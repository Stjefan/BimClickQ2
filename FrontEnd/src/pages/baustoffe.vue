<!-- baustoffe.vue - Vue/Quasar-Komponente zur Baustoffverwaltung -->
<!--***=======================================================================================================================================================================-->
<!-- HINWEIS: BIM.click ToDos/Backlog ist jetzt in bim-click-front-end\src\markdown\bim-click-backlog.md -->
<!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ -->
<!-- NEU: Dieses File umbenannt von Baustoffe.vue nach baustoffe.vue (entsprechend Kebab-Case-Konvention für File-Namen) -->
<!-- Allerdings gab es nach diesem Rename einen Build Fehler "This dependency was not found: * pages/baustoffe.vue in ./src/router/routes.js" -->
<!-- Das File wird in routes.js angezogen, dort wurde allerdings schon BISHER baustoffe.vue, nicht Baustoffev.vue verwendet! -->
<!-- Lösung: Altes File umbenannt nach Baustoffe-bisher.vue, dann mit Quasar new page baustoffe.vue neues File erzeugt, dann Inhalt von Baustoffe-bisher.vue -->
<!-- dort hineinkopieert, dann neuer erfolgreicher Build mit quasar dev -->
<!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ -->
<!-- MERKER/HINWEIS: Wichtige Array-Funktionen/Objekt-Funktionen: find, findIndex, filter, for in, for of, forEach, includes, map, some, indexOf, findIndex, splice, split, push, spread-Operator (...) -->
<!-- https://www.mediaevent.de/javascript/for-in-foreach.html -->
<!-- MERKER/HINWEIS: Vue Array-Operationen: https://stackoverflow.com/questions/42807888/vuejs-and-vue-set-update-array -->
<!-- TIPPS zu return in Callbacks: https://www.bennadel.com/blog/2323-use-a-return-statement-when-invoking-callbacks-especially-in-a-guard-statement.htm -->
<!-- MERKER/HINWEIS: Vergleich von Mongoose Object Ids mit .equals() -->
<!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ -->
<!-- ACHTUNG: Beim Formatieren mit Prettier werden im Template-Teil die String-Ausdrücke für Properties über mehrere Zeilen verteilt. Dies führt manchmal zu obskuren -->
<!--          Fehlern im Log, dass eigentlich definierte Methoden, Funktionen oder Variablen undefiniert sind. Dann muss man händisch diese Strings-Ausdrücke formatieren: -->
<!--          Beispiel: -->
<!-- Prettier--Formatierung über mehrere Zeilen, verursacht potentiell "undefined" Fehlermeldungen im Log: -->
<!--          :selected.sync="                                                    -->
<!--                           selectedRowsTableBaueigenschaften     -->
<!--                         "                                                    -->
<!-- Manuelle Korrektur: :selected.sync="selectedRowsTableBaueigenschaften" -->
<!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ -->
<!-- NEU: Terminologieänderungen 18.10.2019/23.01.2020: -->
<!-- Allgemein:       Bauphysikalische Eigenschaften => (typbezogene bzw. wertbezogene) Baueigenschaften -->
<!-- Bei Baustoffen:  Bauphysikalische Eigenschaften => Materialeigenschaften => Baueigenschaften -->
<!-- Bei Bauvorhaben: Bauphysikalische Eigenschaften => Nutzungseigenschaften => Baueigenschaften -->
<!-- Dies galt anfangs nur am UI, nicht im Backend, mit obigem Refactoring verwendet das Model BaustoffeModel nun das Schema WertbezogeneBaueigenschaftenSchema, -->
<!-- (welches später auch von BaueinheitenModel für Bauvorhaben verwendet werden soll) unter obigem Namen MaterialEigenschaftenSchema -->
<!-- Später direkte Verwendung des WertbezogeneBaueigenschaftenSchema! -->
<!-- Bei beiden:      Knoteneigenschaften => Strukturierungsangaben -->
<!--***=======================================================================================================================================================================-->
<template>
  <!-- ================================================================================================== -->
  <!-- ACHTUNG: Hier class="q-pa-xs" oder "q-pa-sm" zur Kontrolle des  Abstands zwischen den Tableisten   -->
  <!-- ================================================================================================== -->
  <q-page class="q-pa-xs">
    <!-- content -->
    <!-- <div class="q-pa-xs q-gutter-sm"> -->
    <!-- Disabled - wie in baueinheiten.vue, die Seite braucht dann weniger Platz -->
    <!-- <q-splitter v-model="splitterModel" style="height: 1000px"> -->
    <!-- ALT: style="min-width: 1930px" -->
    <q-splitter v-model="splitterModel" :limits="[10, 50]">
      <template v-slot:before>
        <!-- <q-card> -->
        <div class="q-pa-xs q-gutter-xs">
          <!-- label="Filter" -->
          <q-input
            ref="filterTreeBaustoffe"
            v-model="filterTreeBaustoffe"
            bg-color="teal-2"
            standout="bg-teal-4 text-black"
            square
            dense
            debounce="300"
            color="primary"
          >
            <!-- --------------------------------------------------------------------------------- -->
            <!-- NEU: Tooltip auf dem obigen Feld                                                  -->
            <!-- --------------------------------------------------------------------------------- -->
            <q-tooltip
              :delay="1000"
              :offset="[0, 10]"
              max-width="500px"
              content-class="bg-secondary text-white text-caption shadow-4"
            >
              Bestimmte Baustoffe im Baustoffbaum herausfiltern durch Eingabe
              ihrer Bezeichnung als Filtertext
            </q-tooltip>
            <template v-slot:append>
              <q-icon name="search" />
              <q-icon
                v-if="filterTreeBaustoffe !== ''"
                name="clear"
                class="cursor-pointer"
                @click="resetFilterTreeBaustoffe"
              />
            </template>
          </q-input>
          <!-- Row für Buttons mit generellen Aktionen auf den Knoten im Baum -->
          <!-- Auf Position über dem QTree verschoben, da sonst die Buttons bei vielen Knoten unten verschwinden -->
          <!-- TODO: Noch zu sortieren, wohin welche Buttons genau gehören!!! -->
          <!--
                <div v-if="$q.screen.gt.xs" class="row full-width">
                  <div class="col-2">
                    <q-btn
                      color="positive"
                      glossy
                      type="submit"
                      label="Speichern"
                      @click="onlyForTesting()"
                      no-caps
                    />
                  </div>
                  <div class="col-2">
                    <q-btn
                      color="deep-orange"
                      text-color="white"
                      glossy
                      @click="onClickCancelButton()"
                      label="Abbrechen"
                      no-caps
                    />
                  </div>
                -->
          <div class="row full-width q-pa-xs q-col-gutter-xs">
            <div class="col-md-6 col-12">
              <!-- NEU: Ganzen Baum kollabieren -->
              <q-btn
                dense
                class="stretch full-width"
                style="height: 100%"
                label="Baum kollabieren"
                no-caps
                color="cyan-6"
                glossy
                size="md"
                @click="$refs.treeBaustoffe.collapseAll()"
              >
                <!-- --------------------------------------------------------------------------------- -->
                <!-- NEU: Tooltip auf dem obigen Button                                                -->
                <!-- --------------------------------------------------------------------------------- -->
                <q-tooltip
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  Alle aufgeklappten Zweige im Baustoffbaum zuklappen
                </q-tooltip>
              </q-btn>
            </div>
            <div class="col-md-6 col-12">
              <!-- NEU: Ganzen Baum expandieren - funktioniert leider nur für Knoten, die vorher schon lazy loaded wurden -->
              <!-- TODO: Für unbedingte Expansion müsste lazy Loading wohl vorübergehend abgeschaltet werden! -->
              <q-btn
                dense
                class="stretch full-width"
                style="height: 100%"
                label="Baum expandieren"
                no-caps
                color="deep-purple-6"
                glossy
                size="md"
                @click="$refs.treeBautoffe.expandAll()"
              >
                <!-- --------------------------------------------------------------------------------- -->
                <!-- NEU: Tooltip auf dem obigen Button                                                -->
                <!-- --------------------------------------------------------------------------------- -->
                <q-tooltip
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  Alle bereits früher aufgeklappten Zweige im Baustoffbaum
                  wieder aufklappen
                </q-tooltip>
              </q-btn>
            </div>
          </div>
          <div class="row full-width q-pa-xs q-col-gutter-xs">
            <div class="col-md-6 col-12">
              <!-- NEU: Button nur enablen, wenn sinnvoll -->
              <q-btn
                dense
                :disable="
                  selectedNodeTreeBaustoffe === undefined ||
                    selectedNodeTreeBaustoffe === null ||
                    benutzerRolleIstMitarbeiter
                "
                label="Baustoff anlegen"
                no-caps
                color="green-7"
                glossy
                class="stretch full-width"
                style="height: 100%"
                size="md"
                @click="createNewBaustoffDialog = true"
              >
                <!-- --------------------------------------------------------------------------------- -->
                <!-- NEU: Tooltip auf dem obigen Button                                                -->
                <!-- --------------------------------------------------------------------------------- -->
                <q-tooltip
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  Einen neuen Baustoff unter dem aktuell ausgewählten Baustoff
                  (blau markiert) im Baustoffbaum anlegen
                </q-tooltip>
              </q-btn>
            </div>
            <div class="col-md-6 col-12">
              <!-- NEU: Button nur enablen, wenn sinnvoll -->
              <!-- Löschen des Wurzelknotens wird bereits hier durch Disablen des Buttons unterbunden! -->
              <!-- Dito für Rohstoffunterbaumwurzelknoten -->
              <!-- DONE: Auch disabled für Kontextmenü zum Löschen dieser Baumknotentypen im Baustoffbaum -->
              <q-btn
                dense
                :disable="
                  selectedNodeTreeBaustoffe === undefined ||
                    selectedNodeTreeBaustoffe === null ||
                    selectedNodeTreeBaustoffe.baumKnotenTyp ===
                      'Wurzelknoten' ||
                    selectedNodeTreeBaustoffe.baumKnotenTyp ===
                      'Rohstoffunterbaumwurzelknoten' ||
                    benutzerRolleIstMitarbeiter
                "
                label="Baustoff löschen"
                no-caps
                color="red-7"
                glossy
                size="md"
                class="stretch full-width"
                style="height: 100%"
                @click="deleteSelectedBaustoffDialog = true"
              >
                <!-- --------------------------------------------------------------------------------- -->
                <!-- NEU: Tooltip auf dem obigen Button                                                -->
                <!-- --------------------------------------------------------------------------------- -->
                <q-tooltip
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  Den aktuell ausgewählten Baustoff (blau markiert) im
                  Baustoffbaum löschen
                </q-tooltip>
              </q-btn>
            </div>
          </div>
          <q-separator />
          <!-- <br /> -->
          <!-- Nur wenn Buttons unter dem QTree positioniert sind -->
          <!-- HINWEIS: Sonst zu geringer Abstand zum Rand der rechten q-card!!! -->
          <!-- NEU: QScrollArea um den QTree herum, um diesen scrollen zu können unabhängig vom Scroll Bar des Browsers am rechten Rand -->
          <!-- ====================================================================================================================================================================== -->
          <!-- TODO: Aktuell ist am style von q-scroll-area height: 86vh statt 60 vh (für Laptops) gesetzt für Testzwecke - rechter Browser-Scrollbalken sollte damit verschwinden    -->
          <!--       Einstweilen wieder auf 100 vh gesetzt - ist ein Kompromiss zwischen Platzausnutzung und einer oder zwei Scrollbalken                                             -->
          <!-- HINWEIS: class="fit" nach Vorlage auf https://github.com/quasarframework/quasar/discussions/12710 ausprobiert - funktioniert aber warum auch immer NICHT!              -->
          <!-- ====================================================================================================================================================================== -->
        </div>
        <q-scroll-area
          style="height: 100vh"
          :bar-style="{
            right: '0px', // Bestimmt, um wieviel rechts der (immer?) dunkelgraue Scrollbalken angezeigt wird, der zeigt, wo man ist innerhalb des vertikalen Scrollbereichs
            borderRadius: '5px', // Bestimmte den Radius der Abrundung des Scrollbalkens unten und oben
            background: '#bdbdbd', // Bestimmt die Farbe des durch width spezifizierten mausempfindlichen Bereichs zum Scrollen, grey-5
            width: '20px', // Bestimmt die Dicke des mausempfindlichen Bereichs, in dem man mit der Maus scrollen kann
            opacity: 0.7 // Bestimmt die Opazität von background
          }"
        >
          <!-- NEU: QScrollBar um QTree, um diesen separat vom Browser-Scrollbalken rechts scrollen zu können - erfordert height Property -->
          <!-- Nebenziel dabei ist, dass keine 2 Scrollbalken erscheinen (der von QScrollbar und der rechts am Browser Window) -->
          <!-- TODO XXXXXX: height nicht statisch, sondern abhängig vom Bildschirmgröße bzw. surrounding DOM-Elemennt setzen -->
          <!-- Allerdings scheint q-tree die "umgebende Höhe" dynamisch zu verändern beim Expandieren des Trees, wie Sniff Tests ergeben, -->
          <!-- daher muss man die Bildschirmhöhe dynamisch ermitteln, und davon den Platz für die Controls über dem Tree -->
          <!-- abziehen -->
          <!-- ALT absolut: <q-scroll-area style="height: 1450px"> -->
          <!-- ALT absolut: <q-scroll-area style="height: 1350px"> -->
          <!-- Damit erscheint bei 25 Zeilen in QTable rechts kein Browser -->
          <!--              Scrollbalken, sondern bei Bedarf (QTree hat viele expandierte Knoten) nur der Scrollbalken für diesen QTree -->
          <!--              per q-scroll-area -->
          <!-- Siehe https://stackoverflow.com/questions/1575141/how-to-make-a-div-100-height-of-the-browser-window -->
          <!-- Danach "height: 60vh" verwendet (60& der vertikal zur Verfügung stehenden Höhe des Browser Windows) -->
          <!-- Dieser Wert funktioniert relativ gut in Tests mit vertikal verkleinertem Browser-Window (z.B. Laptop mit Full HD und Browser im Vollbildmodus -->
          <!-- mit F11). Dann nimmt sowohl der QTree links den vollen zur Verfügung stehenden vertikalen Platz ein, der Scrollbalken dafür -->
          <!-- funktioniert, und rechts erscheint wie gewünscht kein doppelter Scrollbalken. -->
          <!-- Dieser Wert "height: 60vh" ist allerdings bei größerer Höhe des Browser-Windows etwas zu klein, -->
          <!-- wodurch dann unten links nicht der gesamte zur Verfügung stehende Platz für den QTree genutzt wird, sondern ca. 20% ungenutzt bleibt -->
          <!-- Allerding spielt dabei auch noch die gewählte Zoom-Stufe im Browser (Ctrl-+/-) eine Rolle. -->
          <!-- Vorlage für CSS in bar-style: Siehe https://quasar.dev/vue-components/scroll-area#QScrollArea-API -->
          <!-- Weitere Tipps für Quasar q-scroll-area: -->
          <!-- https://forum.quasar-framework.org/topic/5466/flexbox-and-q-scroll-area-s-height/5 -->
          <!-- Es folgt der der Baustoffbaum als Quasar QTree -->
          <!-- NEU: Nach Vorlage auf https://forum.quasar-framework.org/topic/5765/qtree-select-behavior/3 -->
          <!-- das Handling beim Selektieren eines Nodes geändert, damit bei einem zweiten Klick auf einen Knoten dieser Knoten nicht deselektiert wird: -->
          <!-- Dazu @update:selected="selectedNodeHandlingTreeBaustoffe" mit neuer Methode eingeführt -->
          <!-- ACHTUNG: Dann nicht mehr :selected.sync="selectedKeyTreeBaustoffe", sondern :selected="selectedKeyTreeBaustoffe" notwendig!!! -->
          <q-tree
            dense
            ref="treeBaustoffe"
            :nodes="nodesTreeBaustoffe"
            default-expand-all
            node-key="_id"
            label-key="baustoffBezeichnung"
            :selected="selectedKeyTreeBaustoffe"
            :expanded.sync="expandedKeysTreeBaustoffe"
            @update:selected="selectedNodeHandlingTreeBaustoffe"
            @lazy-load="lazyLoadHandlingTreeBaustoffe"
            selected-color="white bg-primary shadow-2"
            :filter="filterTreeBaustoffe"
            no-nodes-label="Keine Baustoffe vorhanden"
            no-results-label="Keine Baustoffe erfüllen die Filterbedingungen"
          >
            <template v-slot:default-header="{ node }">
              <!-- <div v-if="localStore.state.debugMode"> -->
              <!-- ALT -->
              <!-- NEU - umgestellt nach v-if="false": -->
              <div v-if="false">
                node.lazy:
                {{ node.lazy }}
              </div>
              <!-- <div class="row items-center" @click.stop> -->
              <!-- Für q-popup-edit oder q-menu mit context-menu prop, stoppt die normale Knotenselektion mit linker Maustaste! -->
              <!-- Hat aber keinen Einfluss auf Knotenselektion per Kontextmenü mit @click=selectedKeyTreeBaustoffe = prop.node._id, diese wirft -->
              <!-- Fehler, dass prop und key nicht definiert sind - allerdings wird ja node.baustoffbezeichnung weiter unten verwendet wird und ist -->
              <!-- somit definiert. Mit entsprechendem @click=selectedKeyTreeBaustoffe = node._id gelingt die Knoten-Selektion per Kontextmenü dann doch! -->
              <!-- Context Menu: -->
              <q-menu touch-position context-menu>
                <q-list dense style="min-width: 100px">
                  <q-item
                    clickable
                    v-close-popup
                    @click="selectedKeyTreeBaustoffe = node._id"
                  >
                    <q-item-section>Baustoff auswählen</q-item-section>
                  </q-item>
                  <q-separator />
                  <!-- -------------------------------------------------------------------------------------------------------------------------------------------------- -->
                  <!-- NEU: Aktionen für Profilaktivierungen -->
                  <q-item :disable="benutzerRolleIstMitarbeiter">
                    <q-item-section
                      >Baustoff auswählen und bestimmtes Baueigenschaftsprofil
                      daran aktivieren
                    </q-item-section>
                    <q-item-section side>
                      <q-icon name="keyboard_arrow_right" />
                    </q-item-section>
                    <!-- Es folgen die Untermenüs für die Auswahl des Baueigenschaftsprofils: -->
                    <!-- TODOD XXXXXX: Diverse TODOS hier offen für Anpassung des aus baueinheiten.vue stammenden Codes -->
                    <!-- Bisher nur pauschales Disabling des gesamten Menüs oben auf Grund von Benutzerrolle! -->
                    <!-- TODO XXXXXX: Selektives Disabling der Untermenüs unten, falls das Profil schon aktiviert ist -->
                    <!-- Bisher in baueinheiten.vue nur implementiert für Profil "Baueinheit > Bauvorhaben", "Baueinheit > Standort", "Baueinheit > Gebäude" - weitere Profile: TODO XXXXXX -->
                    <!-- Für diese müssen unten weitere q-items angelegt werden mit eigenen Dialogen nach demselben Muster wie createNewBaueinheitMitBauvorhabenProfilAktivierungDialog -->
                    <!-- =============================================================================================================================================================== -->
                    <!-- NEU: Mit intelligenterem Disabling per Funktion istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(node, baueigenschaftsProfilBezeichnung, modus) -->
                    <!-- Parameter Modus ist bei Profilaktivierung an Baueinheit "Aktivierung am Knoten" -->
                    <!-- HINWEIS: Diese prüft mit, ob am node selbst das Profil schon aktiviert ist sowie am Elternpfad aufwärts. Daher ist mit dieser Funktion kein zusätzlicher Aufruf der -->
                    <!--          individuellen Funktionen istAktiviertBaueigenschaftsProfilAnNode(node, baueigenschaftsProfilBezeichnung) mehr notwendig am :disable -->
                    <!-- UPDATE:  Diese Funktion hatte noch ein Problem (siehe Header der Funktion) mit Geschwisterknoten. Dieses mittlerweile gelöst (siehe Kommentare an Funktion) -->
                    <!-- ALT:     Hier wurden an den :disables ursprünglich pauschal die Funktion istAktiviertBaueigenschaftsProfilAnNode(node, baueigenschaftsProfilBezeichnung) aufgerufen -->
                    <!--          mit dem jeweiligen Profilbezeichnung als zweitem Parameter. Diese Aufrufe dann ersetzt durch die intelligentere Funktion -->
                    <!--          istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst() -->
                    <!-- =============================================================================================================================================================== -->
                    <!-- NEU: Für #505 am Ende in @click Unter-Tab setzen für Baueigenschaftsprofilformulare mit getTabVonHierarchischOberstemProfilFormularInAktiviertenBaueigenschaftsProfilen(node) -->
                    <!-- ACHTUNG: Diese Calls werden nicht ausgeführt, da der vorherige Call aktiviereBauvorhabenBaueigenschaftsProfilAnBaueinheit(node) -->
                    <!-- den Baum vorher asynchron refreshed! -->
                    <!-- Daher hier wieder entfernt und dafür in refrehsTreeBaustoffe(berechneNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung) diesen Call eingefügt!!! -->
                    <q-menu auto-close anchor="top right" self="top left">
                      <q-list>
                        <q-item
                          :disable="false"
                          dense
                          clickable
                          v-close-popup
                          @click="
                            aktiviereBaueigenschaftsProfilAnBaustoff(
                              'Baustoff',
                              node
                            )
                          "
                        >
                          <q-item-section>
                            Baustoff
                          </q-item-section>
                        </q-item>
                        <!-- -------------------------------------------------------------- -->
                        <q-item
                          :disable="true"
                          dense
                          clickable
                          v-close-popup
                          @click="doNothing"
                        >
                          <q-item-section>
                            Rohstoff
                          </q-item-section>
                        </q-item>
                        <!-- -------------------------------------------------------------- -->
                        <q-item
                          :disable="false"
                          dense
                          clickable
                          v-close-popup
                          @click="
                            aktiviereBaueigenschaftsProfilAnBaustoff(
                              'Baustoff > Estrich',
                              node
                            )
                          "
                        >
                          <q-item-section>
                            Baustoff > Estrich
                          </q-item-section>
                        </q-item>
                        <!-- -------------------------------------------------------------- -->
                        <q-item
                          :disable="true"
                          dense
                          clickable
                          v-close-popup
                          @click="doNothing"
                        >
                          <q-item-section>
                            Baustoff > Beton
                          </q-item-section>
                        </q-item>
                        <!-- -------------------------------------------------------------- -->
                        <!-- Platzhalter für die Untermenüs/q-items für weitere Baueigenschaftsprofile: -->
                        <q-item
                          disable
                          dense
                          clickable
                          v-close-popup
                          @click="selectedKeyTreeBaustoffe = node._id"
                        >
                          <q-item-section>
                            Weitere Profile folgen später...
                          </q-item-section>
                        </q-item>
                      </q-list>
                    </q-menu>
                  </q-item>
                  <!--- ------------------------------------------------------------------------------------------- -->
                  <q-item :disable="benutzerRolleIstMitarbeiter">
                    <q-item-section
                      >Baustoff auswählen und bestimmtes Baueigenschaftsprofil
                      daran und an allen Kind- und Kindeskindbaustoffen
                      aktivieren
                    </q-item-section>
                    <q-item-section side>
                      <q-icon name="keyboard_arrow_right" />
                    </q-item-section>
                    <!-- Es folgen die Untermenüs für die Auswahl des Baueigenschaftsprofils: -->
                    <!-- TODOD XXXXXX: Diverse TODOS hier offen für Anpassung des aus baueinheiten.vue stammenden Codes -->
                    <!-- Bisher nur pauschales Disabling des gesamten Menüs oben auf Grund von Benutzerrolle! -->
                    <!-- TODO XXXXXX: Selektives Disabling der Untermenüs unten, falls das Profil schon aktiviert ist -->
                    <!-- Bisher in baueinheiten.vue nur implementiert für Profil "Baueinheit > Bauvorhaben", "Baueinheit > Standort", "Baueinheit > Gebäude" - weitere Profile: TODO XXXXXX -->
                    <!-- Für diese müssen unten weitere q-items angelegt werden mit eigenen Dialogen nach demselben Muster wie createNewBaueinheitMitBauvorhabenProfilAktivierungDialog -->
                    <!-- =============================================================================================================================================================== -->
                    <!-- NEU: Mit intelligenterem Disabling per Funktion istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(node, baueigenschaftsProfilBezeichnung, modus) -->
                    <!-- Parameter Modus ist bei Profilaktivierung an Baueinheit "Aktivierung am Knoten" -->
                    <!-- HINWEIS: Diese prüft mit, ob am node selbst das Profil schon aktiviert ist sowie am Elternpfad aufwärts. Daher ist mit dieser Funktion kein zusätzlicher Aufruf der -->
                    <!--          individuellen Funktionen istAktiviertBaueigenschaftsProfilAnNode(node, baueigenschaftsProfilBezeichnung) mehr notwendig am :disable -->
                    <!-- UPDATE:  Diese Funktion hatte noch ein Problem (siehe Header der Funktion) mit Geschwisterknoten. Dieses mittlerweile gelöst (siehe Kommentare an Funktion) -->
                    <!-- ALT:     Hier wurden an den :disables ursprünglich pauschal die Funktion istAktiviertBaueigenschaftsProfilAnNode(node, baueigenschaftsProfilBezeichnung) aufgerufen -->
                    <!--          mit dem jeweiligen Profilbezeichnung als zweitem Parameter. Diese Aufrufe dann ersetzt durch die intelligentere Funktion -->
                    <!--          istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst() -->
                    <!-- =============================================================================================================================================================== -->
                    <!-- NEU: Für #505 am Ende in @click Unter-Tab setzen für Baueigenschaftsprofilformulare mit getTabVonHierarchischOberstemProfilFormularInAktiviertenBaueigenschaftsProfilen(node) -->
                    <!-- ACHTUNG: Diese Calls werden nicht ausgeführt, da der vorherige Call aktiviereBauvorhabenBaueigenschaftsProfilAnBaueinheit(node) -->
                    <!-- den Baum vorher asynchron refreshed! -->
                    <!-- Daher hier wieder entfernt und dafür in refrehsTreeBaustoffe(berechneNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung) diesen Call eingefügt!!! -->
                    <q-menu auto-close anchor="top right" self="top left">
                      <q-list>
                        <q-item
                          :disable="false"
                          dense
                          clickable
                          v-close-popup
                          @click="
                            aktiviereBaueigenschaftsProfilTransitivAnBaustoff(
                              'Baustoff',
                              node
                            )
                          "
                        >
                          <q-item-section>
                            Baustoff
                          </q-item-section>
                        </q-item>
                        <!-- -------------------------------------------------------------- -->
                        <q-item
                          :disable="true"
                          dense
                          clickable
                          v-close-popup
                          @click="doNothing"
                        >
                          <q-item-section>
                            Rohstoff
                          </q-item-section>
                        </q-item>
                        <!-- -------------------------------------------------------------- -->
                        <q-item
                          :disable="false"
                          dense
                          clickable
                          v-close-popup
                          @click="
                            aktiviereBaueigenschaftsProfilTransitivAnBaustoff(
                              'Baustoff > Estrich',
                              node
                            )
                          "
                        >
                          <q-item-section>
                            Baustoff > Estrich
                          </q-item-section>
                        </q-item>
                        <!-- -------------------------------------------------------------- -->
                        <q-item
                          :disable="true"
                          dense
                          clickable
                          v-close-popup
                          @click="doNothing"
                        >
                          <q-item-section>
                            Baustoff > Beton
                          </q-item-section>
                        </q-item>
                        <!-- -------------------------------------------------------------- -->
                        <!-- Platzhalter für die Untermenüs/q-items für weitere Baueigenschaftsprofile: -->
                        <q-item
                          disable
                          dense
                          clickable
                          v-close-popup
                          @click="selectedKeyTreeBaustoffe = node._id"
                        >
                          <q-item-section>
                            Weitere Profile folgen später...
                          </q-item-section>
                        </q-item>
                      </q-list>
                    </q-menu>
                  </q-item>
                  <!--- ------------------------------------------------------------------------------------------- -->
                  <q-item
                    clickable
                    :disable="benutzerRolleIstMitarbeiter"
                    @click="
                      selectedKeyTreeBaustoffe = node._id;
                      aktiviereElternProfileAnBaustoff();
                    "
                  >
                    <q-item-section
                      >Baustoff auswählen und selbe Baueigenschaftsprofile wie
                      am Elternbaustoff aktivieren
                    </q-item-section>
                  </q-item>
                  <q-separator />
                  <q-item
                    clickable
                    :disable="benutzerRolleIstMitarbeiter"
                    @click="
                      selectedKeyTreeBaustoffe = node._id;
                      createNewBaustoffDialog = true;
                    "
                  >
                    <q-item-section
                      >Baustoff auswählen und Kindbaustoff neu
                      anlegen</q-item-section
                    >
                  </q-item>
                  <q-item
                    clickable
                    :disable="benutzerRolleIstMitarbeiter"
                    @click="
                      selectedKeyTreeBaustoffe = node._id;
                      renameSelectedBaustoffDialog = true;
                    "
                  >
                    <q-item-section
                      >Baustoff auswählen und umbenennen
                    </q-item-section>
                  </q-item>
                  <!-- ------------------------------------------------------------------------------------------- -->
                  <q-separator />
                  <!-- ----------------------------------------------------------------------------------------------------- -->
                  <!-- NEU: Zusätzlich Löschen des Wurzelknotens verbieten -->
                  <!-- ACHTUNG: Die Funktion dafür umfasst hier in baustoffe.vue auch mit den Rohstoffunterbaumwurzelknoten! -->
                  <!-- NEU: Folgendes Menu Item "Baustoff auswählen und löschen" disabled zugunsten von "Baustoff löschen" -->
                  <!-- Auswählen und dann löschen machte keinen Sinn - Löschen eines beliebigen Knotens wohl! -->
                  <!--
                  <q-item
                    clickable
                    :disable="
                      knotenIstWurzelTreeBaustoffe(node._id) ||
                        benutzerRolleIstMitarbeiter
                    "
                    @click="
                      selectedKeyTreeBaustoffe = node._id;
                      deleteSelectedBaustoffDialog = true;
                    "
                  >
                    <q-item-section
                      >Baustoff auswählen und löschen</q-item-section
                    >
                  </q-item>
                  -->
                  <q-separator />
                  <!-- ---------------------------------------------------------------------------------------------------------------- -->
                  <!-- NEU: Kontextmenü, das den per Kontextmenü angewählten Node (Zeile) löscht, ohne ihn zum selected Node zu machen: -->
                  <!--      Der Node (Prop node) wird in der Variablen zuLoeschenderNodeTreeBaustoffe zwischengespeichert -->
                  <!-- #253 g) Löschen disablen für Schichten - trifft im Baustoffbaum nicht zu! -->
                  <q-item
                    :disable="
                      knotenIstWurzelTreeBaustoffe(node._id) ||
                        benutzerRolleIstMitarbeiter
                    "
                    clickable
                    v-close-popup
                    @click="
                      zuLoeschenderNodeTreeBaustoffe = node;
                      deleteBaustoffDialog = true;
                    "
                  >
                    <q-item-section>Baustoff löschen</q-item-section>
                  </q-item>
                  <!-- NEU: Baustoff kopieren -->
                  <q-separator />
                  <!-- NEU: Disabling des Markierens des Wurzelknotens -->
                  <q-item
                    clickable
                    v-close-popup
                    :disable="
                      knotenIstWurzelTreeBaustoffe(node._id) ||
                        benutzerRolleIstMitarbeiter
                    "
                    @click="
                      /* Hier folgt Code, der ggf. existierende Markierungen zurücksetzt und ggf. Markierung am eigenen Node toggled */
                      /* ACHTUNG: Unbedingt $set verwenden, sonst funktioniert es NICHT!!! */
                      if (
                        idWurzelZuBewegenderZweig &&
                        idWurzelZuBewegenderZweig === node._id
                      ) {
                        /* Der geklickte Knoten war bereits markiert, dann die Markierung entfernen (Toggling) */
                        $set(node, 'zweigMarkiertFuerBewegen', false); // Unbedingt $set verwenden!
                        idWurzelZuBewegenderZweig = null; // Den markierten Knoten damit zurücksetzen
                      } else {
                        if (idWurzelZuBewegenderZweig) {
                          /* Markierung für einen anderen bisher markierten, zu verschiebenden/kopierenden Knoten zurücksetzen */
                          $refs.treeBaustoffe.getNodeByKey(
                            idWurzelZuBewegenderZweig
                          ).zweigMarkiertFuerBewegen = false;
                        }
                        idWurzelZuBewegenderZweig = node._id; // Den geklickten Knoten als neu markierten Node setzen und merken
                        // Den Knoten aus der Datenbank lesen - ACHTUNG: Dieses API lädt aber auch NUR den Knoten, NICHT seine Kinder!
                        // Tenporär enabled, weil in der unten für :disable benutzten neuen Funktion knotenIstImFuerBewegenMarkiertenZweig()
                        // folgender API-Aufruf nicht funktionierte:
                        // const wurzelZuBewegenderZweig = this.$refs.treeBaustoffe.getNodeByKey(this.idWurzelZuBewegenderZweig);
                        // Dies lag aber daran, dass auf das Resultat wurzelZuBewegenderZweig versehentlich mit .this zugegriffen wurde
                        // Daher das folgende Statement zum Lesen des Knotens aus der Datenbank wieder disabled:
                        // loadNodeTreeBaustoffe(idWurzelZuBewegenderZweig);
                        $set(node, 'zweigMarkiertFuerBewegen', true); // Markierung am geklickten Knoten setzen, unbedingt $set verwenden!
                        showBenutzerNachrichtZweigZumBewegenMarkiert();
                      }
                    "
                  >
                    <q-item-section
                      >Markierung am Zweig setzen/entfernen für
                      Verschieben/Kopieren</q-item-section
                    >
                  </q-item>
                  <q-separator />
                  <!-- NEU: Funktion knotenIstImFuerBewegenMarkiertenZweigTreeBaustoffe(node._id), die für -->
                  <!-- Knoten, die im markierten Zweig liegen, das Einfügen/Kopieren disabled (sonst käme es zu Fehlern...) -->
                  <!-- NEU: Für "Kopieren" KEIN zusätzliches Disabling des Kopierens innerhalb des Elternknoten des für Bewegen markierten Zweigs! -->
                  <q-item
                    clickable
                    v-close-popup
                    :disable="
                      !idWurzelZuBewegenderZweig ||
                        knotenIstImFuerBewegenMarkiertenZweigTreeBaustoffe(
                          node._id
                        )
                    "
                    @click="bewegeZweig(node._id, true)"
                  >
                    <q-item-section
                      >Markierten Zweig hierher kopieren</q-item-section
                    >
                    <q-item-section avatar>
                      <q-icon
                        v-if="idWurzelZuBewegenderZweig"
                        name="tab_unselected"
                        color="blue"
                        size="28px"
                        class="q-mr-sm"
                      />
                    </q-item-section>
                  </q-item>
                  <!-- NEU: Für "Verschieben" hier zusätzliches Disabling des Verschiebens innerhalb des Elternknotens des für Bewegen markierten Zweigs! -->
                  <q-item
                    clickable
                    v-close-popup
                    :disable="
                      !idWurzelZuBewegenderZweig ||
                        knotenIstImFuerBewegenMarkiertenZweigTreeBaustoffe(
                          node._id
                        ) ||
                        knotenIstElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaustoffe(
                          node._id
                        )
                    "
                    @click="bewegeZweig(node._id, false)"
                  >
                    <q-item-section
                      >Markierten Zweig hierher verschieben</q-item-section
                    >
                    <q-icon
                      v-if="idWurzelZuBewegenderZweig"
                      name="tab_unselected"
                      color="blue"
                      size="28px"
                      class="q-mr-sm"
                    />
                  </q-item>
                  <!--
                      <q-item-section side>
                        <q-icon name="keyboard_arrow_right" />
                      </q-item-section>
                    -->
                  <!-- ACHTUNG/TODO: Bei den Aktionen im Kontextmenü -->
                  <!-- kann nicht einfach z.B. per @click="deleteSelectedBaustoffDialog = true -->
                  <!-- statt v-close-popup dieselben @click-Funktionen wie für die Buttons -->
                  <!-- getriggered werden, da diese auf dem selektierten Baustoff arbeiten -->
                  <!-- Stattdessen muss erst der selektierte Baustoff geändert werden, dann -->
                  <!-- können diese Aktionen getriggered werden -->
                  <!-- Laut https://forum.quasar-framework.org/topic/3010/q-tree-q-context-menu -->
                  <!-- sollte dazu das Kontextmenü an den q-tree Body Slot attached werden -->
                  <!-- Mittels prop.node._id oder node._id oder node.key (?) kann man den zugehörigen -->
                  <!-- Node ermitteln und diesen dann selektieren über eine Zuweisung -->
                  <!-- @click=selectedKeyTreeBaustoffe = prop.node._id im  -->
                  <!-- Body Slot von q-tree (sehe unten) den Node neu selektieren auf den per Kontextmenü ausgwählten Node -->
                  <!-- Versuch am Header Slot: Bringt mit selber Zuweisung Fehler "prop" is not defined... -->
                  <!-- Am Header Slot funktioniert es dann aber doch noch mit @click="selectedKeyTreeBaustoffe = node._id" -->
                  <!-- Dies kann dann einfach konkateniert werden mit denselben v-model Aktionen, die auch in den Buttons darüber verwendet werden, -->
                  <!-- z.B. @click="selectedKeyTreeBaustoffe = node._id; createNewBaustoffDialog = true" -->
                </q-list>
              </q-menu>
              <!-- /Context Menu -->
              <!-- --------------------------------------------------------------------------------- -->
              <!-- NEU: Tooltip auf dem Header VSlot                                                 -->
              <!-- Vorlage: https://forum.quasar-framework.org/topic/6213/tooltip-for-tree-nodes     -->
              <!-- HINWEIS: Funktioniert auch, wenn der Knoten nicht ausgewählt ist,                 -->
              <!--          da Zugriff auf Properties des Knotens per Property/Parameter node erfolgt-->
              <!-- Dazu Methode showZugeordneteBaueigenschaftsProfileAusgewaehlteBaueinheit aufrufen -->
              <!-- --------------------------------------------------------------------------------- -->
              <q-tooltip
                v-if="node.baumKnotenTyp === 'Wurzelknoten'"
                :delay="1000"
                :offset="[0, 10]"
                max-width="500px"
                content-class="bg-secondary text-white text-caption shadow-4"
              >
                <b>Wurzelknoten</b> des Baustoffbaums: Mit der linken Maustaste
                auf das graue Dreieck an einem Baustoff (Knoten im Baum)
                klicken, um dessen Knoten im Baum auf- bzw. zuzuklappen. Um
                einen bestimmten Baustoff auszuwählen, mit der linken Maustaste
                auf dessen farbiges Icon oder dessen Text klicken. Der so
                ausgewählte Baustoff wird dann an dessen Knoten im Baum blau
                markiert. Zusätzlich werden dann rechts alle relevanten
                Planungsinformationen für den ausgewählten Baustoff angezeigt.
              </q-tooltip>
              <q-tooltip
                v-else-if="
                  node.baumKnotenTyp === 'Rohstoffunterbaumwurzelknoten'
                "
                :delay="1000"
                :offset="[0, 10]"
                max-width="500px"
                content-class="bg-secondary text-white text-caption shadow-4"
              >
                In diesem Zweig des Baustoffbaums werden
                <b>Rohstoffe</b> verwaltet, die in der Zusammensetzung von
                Baustoffen enthalten sein können. Diese Rohstoffe können einem
                im Baum ausgewählten Baustoff in dessen Tab 'Zugeordnete
                Rohstoffe' zugeordnet werden.
              </q-tooltip>
              <q-tooltip
                v-else
                :delay="1000"
                :offset="[0, 10]"
                max-width="500px"
                content-class="bg-secondary text-white text-caption shadow-4"
              >
                Aktivierte Baueigenschaftsprofile an diesem Baustoff:
                {{
                  showZugeordneteBaueigenschaftsProfileAusgewaehlterBaustoff(
                    node
                  )
                }}
                <!-- NEU: Wenn vorhanden, baustoffBemerkung als Tooltip mit anzeigen: -->
                <div v-if="node.baustoffBemerkung">
                  <br />
                  {{ node.baustoffBemerkung }}
                </div>
              </q-tooltip>
              <!-- --------------------------------------------------------------------------------- -->
              <div class="row items-center">
                <div v-if="node.baumKnotenTyp === 'Blattknoten'">
                  <q-icon
                    name="eco"
                    color="green"
                    size="28px"
                    class="q-mr-sm"
                  ></q-icon>
                  <!-- Quasar Font Weights per class="text-weight-*": Siehe https://quasar.dev/style/typography#Font-Weights -->
                  <span class="text-weight-regular">
                    {{ node.baustoffBezeichnung }}
                    <!-- NEU: Bei für Verschieben/Kopieren markierten Nodes eie zusätzliches Icon anzeigen -->
                    <!-- Siehe https://quasar.dev/vue-components/tree#Example--Customizing-nodes -->
                    <q-icon
                      v-if="node.zweigMarkiertFuerBewegen"
                      name="tab_unselected"
                      color="blue"
                      size="28px"
                      class="q-mr-sm"
                    />
                  </span>
                </div>
                <div v-else>
                  <!-- Wurzel- und Verzweigungsknoten -->
                  <q-icon
                    name="account_tree"
                    color="orange"
                    size="28px"
                    class="q-mr-sm"
                  ></q-icon>
                  <!-- Quasar Font Weights per class="text-weight-*": Siehe https://quasar.dev/style/typography#Font-Weights -->
                  <span class="text-weight-medium">
                    {{ node.baustoffBezeichnung }}
                    <!-- NEU: Bei für Verschieben/Kopieren markierten Nodes eie zusätzliches Icon anzeigen -->
                    <!-- Siehe https://quasar.dev/vue-components/tree#Example--Customizing-nodes -->
                    <q-icon
                      v-if="node.zweigMarkiertFuerBewegen"
                      name="tab_unselected"
                      color="blue"
                      size="28px"
                      class="q-mr-sm"
                    />
                  </span>
                </div>
              </div>
              <!--  </div> -->
              <!-- Für auskommentiertes <div> oben -->
            </template>
            <!-- Body-Slot mit Kontextmenü - auskommentiert, da der Body Slot auch ohne Inhalt unnötigen Platz verbraucht -->
            <!-- Kontextmenü, das den Knoten neu selektiert, hier im Body - nach einigen Versuchen nun auch oben im Header,-->
            <!-- allerdings dort mit @click="selectedKeyTreeBaustoffe = node._id" statt hier ... = prop.node._id" !!! -->
            <!--
                <template v-slot:default-body="prop">
                  <div class="row items-center @click.stop">
                    {{ prop.node.baumKnotenTyp }}
                  <q-menu touch-position context-menu>
                      <q-list dense style="min-width: 100px">
                        <q-item clickable @click="selectedKeyTreeBaustoffe = prop.node._id">
                          <q-item-section>Knoten selektieren</q-item-section>
                        </q-item>
                        </q-list>
                    </q-menu>
                  </div>
                </template>
              -->
          </q-tree>
        </q-scroll-area>
        <!-- </q-card> -->
        <!-- ACHTUNG: Diese q-card DISABLED, da sie "doppelte" horizontale Scrollbalken verursacht unter der QTable!!! -->
      </template>
      <template v-slot:after>
        <div class="q-pa-xs" v-if="selectedNodeTreeBaustoffe">
          <!-- <q-card> -->
          <!-- =================================================================================================== -->
          <!-- ACHTUNG: class="q-pa-xs" oder "q-pa-none" kontrolliert Breite der Tableiste!                        -->
          <!-- =================================================================================================== -->
          <q-tabs
            mobile-arrows
            class="q-pa-none text-black bg-grey-4 full-width"
            active-color="primary"
            active-bg-color="white"
            content-class="text-h7"
            dense
            align="left"
            v-model="tabBaustoffe"
            @input="initialisiereAusgewaehltesTabBaustoffe"
          >
            <q-tab
              name="strukturierungsAngabenTabBaustoffe"
              label="Angaben zum Baustoff"
              no-caps
            >
              <!-- --------------------------------------------------------------------------------- -->
              <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
              <!-- --------------------------------------------------------------------------------- -->
              <q-tooltip
                :delay="1000"
                :offset="[0, 10]"
                max-width="500px"
                content-class="bg-secondary text-white text-caption shadow-4"
              >
                Verwaltungsinformationen zum links im Baustoffbaum ausgewählten
                Baustoff
                <strong>
                  "{{ selectedNodeTreeBaustoffe.baustoffBezeichnung }}"
                </strong>
              </q-tooltip>
            </q-tab>
            <q-tab name="beschreibungTabBaustoffe" label="Beschreibung" no-caps>
              <!-- --------------------------------------------------------------------------------- -->
              <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
              <!-- --------------------------------------------------------------------------------- -->
              <q-tooltip
                :delay="1000"
                :offset="[0, 10]"
                max-width="500px"
                content-class="bg-secondary text-white text-caption shadow-4"
              >
                Fachliche Beschreibung für den links im Baustoffbaum
                ausgewählten Baustoff
                <strong
                  >"{{ selectedNodeTreeBaustoffe.baustoffBezeichnung }}"
                </strong>
              </q-tooltip>
            </q-tab>
            <!-- ---------------------------------------------------------------------------------------------- -->
            <!-- NEU: Tab für Baueigenschaftsprofilformulare für Baustoffe ("Baustoffdatenblätter")             -->
            <!-- ---------------------------------------------------------------------------------------------- -->
            <!-- :disable am Wurzelknoten des Baustoffbaums, aktuell nicht enabled: -->
            <!--
               :disable="
                selectedNodeTreeBaustoffe.baumKnotenTyp ===
                  'Wurzelknoten'
               "
            -->
            <q-tab
              name="baueigenschaftsProfilFormulareTabBaustoffe"
              label="Fachliche Daten"
              no-caps
            >
              <!-- --------------------------------------------------------------------------------- -->
              <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
              <!-- --------------------------------------------------------------------------------- -->
              <q-tooltip
                :delay="1000"
                :offset="[0, 10]"
                max-width="500px"
                content-class="bg-secondary text-white text-caption shadow-4"
              >
                Fachliche und technische Daten des links im Baustoffbaum
                ausgewählten Baustoffs
                <strong
                  >"{{ selectedNodeTreeBaustoffe.baustoffBezeichnung }}"
                </strong>
              </q-tooltip>
            </q-tab>
            <!-- --------------------------------------------------------------------- -->
            <!-- NEU: Reihenfolge der Tabs geändert, die häufig benutzten weiter links -->
            <!-- TODO XXXXXX: Disabling in Abhängigkeit vom Typ des ausgewählten Baustoffs im Baustoffbaum -->
            <q-tab
              :disable="
                selectedNodeTreeBaustoffe.baumKnotenTyp === 'Wurzelknoten' ||
                  selectedKeyTreeBaustoffeIstImRohstoffUnterbaum
              "
              name="zugeordneteRohstoffeTabBaustoffe"
              label="Zugeordnete Rohstoffe"
              no-caps
            >
              <!-- --------------------------------------------------------------------------------- -->
              <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
              <!-- --------------------------------------------------------------------------------- -->
              <q-tooltip
                :delay="1000"
                :offset="[0, 10]"
                max-width="500px"
                content-class="bg-secondary text-white text-caption shadow-4"
              >
                Rohstoffe, die dem links im Baustoffbaum ausgewählten Baustoff
                <strong
                  >"{{ selectedNodeTreeBaustoffe.baustoffBezeichnung }}"</strong
                >
                zugeordnet werden können, um dessen Zusammensetzung zu erfassen
              </q-tooltip>
            </q-tab>
            <q-tab
              name="zugeordneteBauinformationenTabBaustoffe"
              label="Zugeordnete Bauinformationen"
              no-caps
            >
              <!-- --------------------------------------------------------------------------------- -->
              <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
              <!-- --------------------------------------------------------------------------------- -->
              <q-tooltip
                :delay="1000"
                :offset="[0, 10]"
                max-width="500px"
                content-class="bg-secondary text-white text-caption shadow-4"
              >
                Dokumente und Links, die dem links im Baustoffbaum ausgewählten
                Baustoff
                <strong
                  >"{{ selectedNodeTreeBaustoffe.baustoffBezeichnung }}"</strong
                >
                einzeln als planungsrelevant zugeordnet werden können
              </q-tooltip>
            </q-tab>
            <q-tab
              name="baueigenschaftenTabBaustoffe"
              label="Baueigenschaften am Baustoff"
              no-caps
            >
              <!-- --------------------------------------------------------------------------------- -->
              <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
              <!-- --------------------------------------------------------------------------------- -->
              <q-tooltip
                :delay="1000"
                :offset="[0, 10]"
                max-width="500px"
                content-class="bg-secondary text-white text-caption shadow-4"
              >
                Fachliche Eigenschaften, die an dem links im Baustoffbauum
                ausgewählten Baustoff
                <strong
                  >"{{ selectedNodeTreeBaustoffe.baustoffBezeichnung }}"</strong
                >
                einzeln aktiviert bzw. deaktiviert werden können
              </q-tooltip>
            </q-tab>
            <q-tab
              name="baueigenschaftsProfileTabBaustoffe"
              label="Baueigenschaftsprofile"
              no-caps
            >
              <!-- --------------------------------------------------------------------------------- -->
              <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
              <!-- --------------------------------------------------------------------------------- -->
              <q-tooltip
                :delay="1000"
                :offset="[0, 10]"
                max-width="500px"
                content-class="bg-secondary text-white text-caption shadow-4"
              >
                Zusammengehörige fachliche Eigenschaften, die an dem links im
                Baustoffbaum ausgewählten Baustoff
                <strong
                  >"{{ selectedNodeTreeBaustoffe.baustoffBezeichnung }}"</strong
                >
                als Profile gemeinsam aktiviert bzw. deaktiviert werden können
              </q-tooltip>
            </q-tab>
            <!-- ---------------------------------------------------------------------------------------------- -->
            <!-- ALT: Vorläufiges Tab für Baueigenschaftsprofilformulare für Baustoffe ("Baustoffdatenblätter") -->
            <!-- ---------------------------------------------------------------------------------------------- -->
            <q-tab
              name="altesBaueigenschaftsProfilFormulareTabBaustoffe"
              label="Fachliche Daten (alt)"
              no-caps
            >
              <!-- --------------------------------------------------------------------------------- -->
              <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
              <!-- --------------------------------------------------------------------------------- -->
              <q-tooltip
                :delay="1000"
                :offset="[0, 10]"
                max-width="500px"
                content-class="bg-secondary text-white text-caption shadow-4"
              >
                Fachliche und technische Daten des links im Baustoffbaum
                ausgewählten Baustoffs
                <strong
                  >"{{ selectedNodeTreeBaustoffe.baustoffBezeichnung }}"
                </strong>
              </q-tooltip>
            </q-tab>
            <!-- ----------- -->
            <!-- Debug-Tabs: -->
            <!-- ----------- -->
            <q-tab
              v-if="localStore.state.debugMode"
              name="debugBaustoffBaumTabBaustoffe"
              label="Debug-Info: Baustoffbaum"
              no-caps
            />
            <q-tab
              v-if="localStore.state.debugMode"
              name="debugZugeordneteRohstoffeTabBaustoffe"
              label="Debug-Info: Zugeordnete Rohstoffe"
              no-caps
            />
          </q-tabs>
          <!-- <q-separator /> -->
          <!-- ----------------------------------------------------------------------------------------------------------------------------------- -->
          <!-- NEU: keep-alive, um Zustand der Untertabs zu erhalten! -->
          <!-- TODO: width justieren -->
          <!-- ALT: style="max-width: 550px" -->
          <!-- ALT: style="min-width: 1300px" -->
          <!-- Erzeugt 2 Scrollbalken unten bei Hilfe rechts!!! -->
          <!-- class="bg-grey-6" -->
          <q-tab-panels v-model="tabBaustoffe" animated keep-alive>
            <q-tab-panel name="strukturierungsAngabenTabBaustoffe">
              <q-card class="q-pa-xs">
                <div v-if="selectedNodeTreeBaustoffe != null">
                  <p class="text-h6" v-if="$q.screen.gt.sm">
                    Angaben zu dem im Baustoffbaum ausgewählten Baustoff
                    <strong
                      >"{{
                        selectedNodeTreeBaustoffe.baustoffBezeichnung
                      }}"</strong
                    >
                  </p>
                  <p class="text-subtitle1" v-else>
                    Angaben zu dem im Baustoffbaum ausgewählten Baustoff
                    <strong
                      >"{{
                        selectedNodeTreeBaustoffe.baustoffBezeichnung
                      }}"</strong
                    >
                  </p>
                </div>
                <!-- class="bg-grey-6" -->
                <div class="row full-width items-start q-pa-xs q-col-gutter-xs">
                  <div class="col-md-4 col-12">
                    <div>
                      <b>Bezeichnung des Baustoffs</b>
                    </div>
                    <!-- TODO XXXXXX: disable am q-input entfernen, Bezeichnung änderbar machen (ist bereits änderbar über Kontextmenü im Bauvorhabenbaum!) -->
                    <!--
                        hint="Frei wählbarer Text, der den Baustoff als Knoten im Baustoffbaum bezeichnet, z.B. 'Fenster'"
                        hide-hint
                        -->
                    <q-input
                      disable
                      label="Bezeichnung des Baustoffs im Baustoffbbaum"
                      v-model="selectedNodeTreeBaustoffe.baustoffBezeichnung"
                      square
                      bg-color="teal-2"
                      standout="bg-teal-4 text-black"
                      dense
                      hint="Die Bezeichnung kann aktuell nur per Kontextmenü 'Baustoff auswählen und umbenennen' im Baustoffbaum geändert werden'"
                      autogrow
                    />
                    <div>
                      <br />
                      <b
                        >Systemverwaltete Angaben zur Struktur im
                        Bauvorhabenbaum
                      </b>
                    </div>
                    <q-input
                      disable
                      label="Knotentyp im Baustoffbaum"
                      v-model="selectedNodeTreeBaustoffe.baumKnotenTyp"
                      square
                      bg-color="teal-2"
                      standout="bg-teal-4 text-black"
                      dense
                      hint="Typ des Knotens im Baustoffbaum: 'Wurzelknoten', 'Verzweigungsknoten', 'Blattknoten'"
                      hide-hint
                    />
                    <q-input
                      v-if="
                        selectedNodeTreeBaustoffe.baumKnotenTyp !==
                          'Blattknoten'
                      "
                      disable
                      label="Verzweigungstyp im Baustoffbaum (für Wurzel- und Verzweigungsknoten)"
                      v-model="selectedNodeTreeBaustoffe.verzweigungsTyp"
                      square
                      bg-color="teal-2"
                      standout="bg-teal-4 text-black"
                      dense
                      hint="Typ der Verzweigung im Baustoffbaum: '(ungeordnete) Selektion', 'ungeordnete Aggregation', 'vertikal angeordnete Aggregation', 'horizontal angeordnete Aggregation'"
                      hide-hint
                    />
                  </div>
                  <!-- 2. Spalte: -->
                  <div class="col-md-4 col-12">
                    <!-- Ausgabetext für den Baustoff: NEU - #381 -->
                    <div>
                      <b>Ausgabetext für den Baustoff </b>
                    </div>
                    <q-input
                      :disable="benutzerRolleIstMitarbeiter"
                      label="Ausgabetext für den Baustoff im Baustoffbaum"
                      v-model="selectedNodeTreeBaustoffe.baustoffAusgabeText"
                      square
                      bg-color="teal-2"
                      standout="bg-teal-4 text-black"
                      dense
                      hint="Optionaler Ausgabetext, z.B. 'Zementestrich'"
                      hide-hint
                      autogrow
                    />
                    <div>
                      <br />
                      <b>Bemerkung für den Baustoff </b>
                    </div>
                    <q-input
                      :disable="benutzerRolleIstMitarbeiter"
                      label="Bemerkung für den Baustoff im Baustoffbaum"
                      v-model="selectedNodeTreeBaustoffe.baustoffBemerkung"
                      square
                      bg-color="teal-2"
                      standout="bg-teal-4 text-black"
                      dense
                      hint="Optionale Bemerkung, z.B. 'Baustoff ist schwer entflammbar'"
                      hide-hint
                      autogrow
                    />
                  </div>
                  <!-- 3. Spalte: -->
                  <div class="col-md-4 col-12">
                    <!-- Aktuell nur Debug-Info, keine zugeordneten Autoren für Baustoffe -->
                    <div v-if="localStore.state.debugMode">
                      <b>Interne Id des ausgewählten Baustoffs</b>
                      <br />
                      {{ selectedNodeTreeBaustoffe._id }}
                    </div>
                  </div>
                </div>
                <q-separator />
                <div class="row full-width q-pa-xs q-col-gutter-xs">
                  <div class="col-md-4 col-12">
                    <!-- ALT: style="width: 90%" -->
                    <q-btn
                      dense
                      :disable="benutzerRolleIstMitarbeiter"
                      color="positive"
                      glossy
                      class="stretch full-width"
                      style="height: 100%"
                      type="submit"
                      @click="updateAngabenZumBaustoffAusgewaehlterBaustoff()"
                      label="Angaben zum Baustoff speichern"
                      no-caps
                    />
                  </div>
                  <div class="col-md-4 col-12">
                    <!-- ALT: style="width: 90%" -->
                    <q-btn
                      dense
                      :disable="benutzerRolleIstMitarbeiter"
                      color="deep-orange"
                      text-color="white"
                      class="stretch full-width"
                      style="height: 100%"
                      glossy
                      label="Eingaben auf Originalwerte zurücksetzen"
                      no-caps
                      @click="resetAngabenZumBaustoffAusgewaehlterBaustoff()"
                    />
                  </div>
                </div>
              </q-card>
            </q-tab-panel>
            <q-tab-panel
              name="baueigenschaftsProfileTabBaustoffe"
              class="q-pa-xs"
            >
              <baueigenschaftsProfileTabBaustoffeUndBaueinheiten
                :node="selectedNodeTreeBaustoffe"
                modus="Baustoff"
                @refresh-request-baueigenschafts-profil="refreshTreeBaustoffe()"
              />
              <!-- ALT: refreshRequest -->
            </q-tab-panel>
            <!-- ------------------------------------------------------------------------------------------------------------------------------- -->
            <q-tab-panel name="beschreibungTabBaustoffe">
              <q-card class="q-pa-xs">
                <!-- TODO: width justieren, früher 1200px, jetzt (besser) 1300px -->
                <!-- ALT: style="min-width: 1200px" -->
                <!-- NEU: style="min-wdith: 1300px" -->
                <!-- Mit 1300px kein horizontaler Scrollbalken, auch wenn linker und rechter Drawer offen sind -->
                <!-- ACHTUNG: Durch "autogrow" am QInput-Feld ändert sich sowohl Höhe als auch Breite dieses Panels abhängig vom Feldinhalt!!! -->
                <div>
                  <div v-if="selectedNodeTreeBaustoffe != null">
                    <p class="text-h6" v-if="$q.screen.gt.sm">
                      Beschreibung für den im Baustoffbaum ausgewählten Baustoff
                      <strong
                        >"{{
                          selectedNodeTreeBaustoffe.baustoffBezeichnung
                        }}"</strong
                      >
                    </p>
                    <p class="text-subtitle1" v-else>
                      Beschreibung für den im Baustoffbaum ausgewählten Baustoff
                      <strong
                        >"{{
                          selectedNodeTreeBaustoffe.baustoffBezeichnung
                        }}"</strong
                      >
                    </p>
                  </div>
                  <!-- Test mit Markdown Editor für Vue, Vue Wrapper für TOAST UI Editor, -->
                  <!-- https://github.com/nhn/toast-ui.vue-editor -->
                  <!-- Funktioniert nicht, Icons werden nicht angezeigt, zerschossenes Layout des Editors!!! -->
                  <!-- Eventuell Konflikt mit Quasar? -->
                  <!--
                    <div>
                      <markdownEditor
                        v-model="selectedNodeTreeBaustoffe.baustoffBeschreibung"
                        :options="markdownEditorOptions"
                        previewStyle="vertical"
                        mode="markdown"
                        height="600px"
                      >
                      </markdownEditor>
                    </div>
                    -->
                  <!-- Test mit q-input und q-markdown: -->
                  <div class="row full-width q-pa-xs q-col-gutter-xs">
                    <div class="col-md-6 col-12">
                      <strong>Eingabe (im Markdown-Format)</strong>
                      <br />
                      <!-- ACHTUNG: no-html wegen Security!!! -->
                      <!-- ACHTUNG: Tests ergeben, dass bei q-input standout="..." die Textfarbe immer weiß ist, -->
                      <!-- auch wenn standout="bg-green-1 text-black" angegeben wird!!! -->
                      <!-- Textfarbe weiß ist aber bei Hintergrundfarbe green-1 (sollte gleich wie in fachlicher Hilfe sein) nicht lesbar! -->
                      <!-- Deshalb das q-input Feld auf q-input square umgestellt, color="green-1" beeinflusst den Strich unten -->
                      <!-- wenn das Feld im Fokus ist -->
                      <!-- NEU: Input-Feld disablen in Abhängigkeit von Benutzerrolle -->
                      <q-input
                        :disable="benutzerRolleIstMitarbeiter"
                        v-model="selectedNodeTreeBaustoffe.baustoffBeschreibung"
                        square
                        dense
                        type="textarea"
                        color="green-1"
                        bg-color="green-1"
                        debounce="300"
                        autofocus
                        autogrow
                        no-html
                      >
                      </q-input>
                    </div>
                    <!-- Ende linke Spalte -->
                    <div class="col-md-6 col-12">
                      <strong
                        >Formatierte Ausgabe (Vorschau fachliche Hilfe):</strong
                      >
                      <br />
                      <q-list dense>
                        <q-item dense class="bg-green-1">
                          <q-markdown
                            :src="
                              selectedNodeTreeBaustoffe.baustoffBeschreibung
                            "
                          />
                        </q-item>
                      </q-list>
                    </div>
                    <!-- TODO: Löschen Baueinheitsbeschreibung??? -->
                  </div>
                  <div class="row full-width q-pa-xs q-col-gutter-xs">
                    <div class="col-md-3 col-12">
                      <!-- ALT: url="http://localhost:4444/upload/" -->
                      <!-- NEU: :url="computeUploadURL" // computed Property -->
                      <!-- :factory="uploadFile" mit neuer Factory Function uploadFile, die den JWT Header übermittelt wie in den sonstigen Axios API Calls -->
                      <!-- ALT: style="max-width: 255px" oder stlye="width: 90%" -->
                      <!-- NEU: QUploader disablen in Abhängigkeit von Benutzerrolle -->
                      <q-uploader
                        square
                        :disable="benutzerRolleIstMitarbeiter"
                        class="stretch full-width"
                        :factory="uploadFile"
                        ref="uploaderBaustoffBeschreibung"
                        :url="computeUploadURL"
                        label="Bild hochladen für internen Link"
                        accept=".jpg, .png, .tif, .gif"
                        color="light-green"
                        text-color="white"
                        @uploaded="
                          displayLinkForUploadedFileUploaderBaustoffBeschreibung
                        "
                        :multiple="false"
                      />
                    </div>
                    <div
                      class="col-md-3 col-12"
                      v-if="uploadDoneBaustoffBeschreibung"
                    >
                      <strong>Interner Link für hochgeladenes Bild:</strong>
                      <br />
                      {{ internerLinkAusUploadBaustoffBeschreibung }}
                      <br />
                      <br />
                      <!-- ACHTUNG: Am folgenden q-btn kann type="submit" bleiben, da nicht Teil eines q-forms!!! -->
                      <!-- NEU: QButton disablen in Abhängigkeit von Benutzerrolle -->
                      <!-- ALT:  style="width: 90%" -->
                      <q-btn
                        :disable="benutzerRolleIstMitarbeiter"
                        class="stretch full-width"
                        color="secondary"
                        glossy
                        type="submit"
                        @click="
                          copyToClipboardBaustoffBeschreibung(
                            internerLinkAusUploadBaustoffBeschreibung
                          )
                        "
                        label="Link in die Zwischenablage kopieren"
                        no-caps
                      />
                      <div
                        v-if="copyToClipboardDoneBaustoffBeschreibung"
                        class="text-caption"
                      >
                        Zum Einfügen des Bildes in die Beschreibung nun diesen
                        Link mit Strg+V in den Markdown oben einfügen.
                        Anschließend Linkbezeichnung und Linkanzeigetext
                        anpassen.
                      </div>
                    </div>
                  </div>
                  <q-separator />
                  <div class="row full-width q-pa-xs q-col-gutter-xs">
                    <div class="col-md-3 col-12">
                      <!-- ACHTUNG: Am folgenden q-btn kann type="submit" bleiben, da nicht Teil eines q-forms!!! -->
                      <!-- NEU: QButton disablen in Abhängigkeit von Benutzerrolle -->
                      <!-- ALT:  style="width: 90%" -->
                      <q-btn
                        :disable="benutzerRolleIstMitarbeiter"
                        class="stretch full-width"
                        style="height: 100%"
                        color="positive"
                        glossy
                        type="submit"
                        @click="
                          updateBaustoffBeschreibungAusgewaehlterBaustoff()
                        "
                        label="Beschreibung für Baustoff speichern"
                        no-caps
                      />
                    </div>
                    <div class="col-md-3 col-12">
                      <!-- NEU: QButton disablen in Abhängigkeit von Benutzerrolle -->
                      <!-- ALT:  style="width: 90%" -->
                      <q-btn
                        :disable="benutzerRolleIstMitarbeiter"
                        class="stretch full-width"
                        style="height: 100%"
                        color="deep-orange"
                        glossy
                        text-color="white"
                        @click="
                          resetBaustoffBeschreibungAusgewaehlterBaustoff()
                        "
                        label="Eingaben auf Originalwerte zurücksetzen"
                        no-caps
                      />
                    </div>
                    <!-- TODO: Löschen Baustoffbeschreibung??? -->
                  </div>
                  <!-- <div class="col-md-6 col-12"></div> -->
                </div>
              </q-card>
            </q-tab-panel>
            <!-- ------------------------------------------------------------------------------------------------------------------------------- -->
            <!-- Vorläufiges QTabPanel für fachliche Daten am Baustoff -->
            <q-tab-panel
              class="q-pa-xs"
              name="altesBaueigenschaftsProfilFormulareTabBaustoffe"
            >
              <!-- TODO XXXXXX: Vorläufig hier das generische Profilformular anzeigen -->
              <generischesBaueigenschaftsProfilFormular
                profilBezeichnung="Baustoff > Estrich"
                baum="Baustoffbaum"
                :nodes="nodesTreeBaustoffe"
                :selectedNode="selectedNodeTreeBaustoffe"
                :benutzerDarfBearbeitenSelectedNode="
                  !benutzerRolleIstMitarbeiter
                "
                @refresh-request-baueigenschafts-profil="
                  refreshTreeBaustoffeSpecialized()
                "
              />
            </q-tab-panel>
            <!-- ------------------------------------------------------------------------------------------------------------------------------- -->
            <!-- Neues QTabPanel für fachliche Daten am Baustoff -->
            <q-tab-panel
              class="q-pa-xs"
              name="baueigenschaftsProfilFormulareTabBaustoffe"
            >
              <!-- NEU: Durch das layoutgesteuerte generische Profilformular anzuzeigende Profilformulare für Baustoffe -->
              <!-- ACHTUNG: Steuerung, dass alle Felder auf readonly geschaltet werden und die Button-Zeile unterdrückt wird mit Prop -->
              <!-- :benutzerDarfBearbeitenSelectedNode="false/"true" - diese muss unbedingt mit : angegeben werden, damit es funktioniert! -->
              <q-tabs
                mobile-arrows
                dense
                class="q-pa-none text-black bg-grey-4 full-width"
                active-color="primary"
                active-bg-color="white"
                content-class="text-h7"
                v-model="tabFachlicheDatenBaustoffe"
                align="left"
                narrow-indicator
                @input="initialisiereAusgewaehltesTabFachlicheDatenBaustoffe()"
              >
                <!-- in $event steht der Name des Zieltabs -->
                <!-- :disable am Wurzelknoten, aktuell nicht enabled: -->
                <!--
                    :disable=""
                      selectedNodeTreeBaustoffe.baumKnotenTyp ===
                      'Wurzelknoten' ||
                    "
                -->
                <!-- ACHTUNG: Hier zunächst Test-Tab für layoutgesteuertes generisches Profilformular mit Testdaten: -->
                <!-- v-if="localStore.state.debugMode" -->
                <q-tab
                  v-if="localStore.state.debugMode"
                  :disable="
                    selectedNodeTreeBaustoffe.baumKnotenTyp ===
                      'Wurzelknoten' ||
                      !istAktiviertBaueigenschaftsProfilAllgemeinTestAnAusgewaehltemBaustoff
                  "
                  name="tabTestFachlicheDatenBaustoffe"
                  label="Test"
                  no-caps
                  @input="
                    unterTabFachlicheDatenBaustoffe =
                      'unterTabTestFachlicheDatenBaustoffe'
                  "
                />
                <!-- NEU: Steuerung der angezeigten Unter-Tabs unter "Fachliche Daten" in Abhängigkeit davon, was links im Baustoffbaum ausgewählt ist: -->
                <q-tab
                  v-if="
                    selectedNodeTreeBaustoffe.baumKnotenTyp !== 'Wurzelknoten'
                  "
                  :disable="
                    !istAktiviertBaueigenschaftsProfilBaustoffAnAusgewaehltemBaustoff
                  "
                  name="tabGenerelleFachlicheDatenBaustoffe"
                  label="Generelle Angaben"
                  no-caps
                  @input="
                    unterTabFachlicheDatenBaustoffe =
                      'unterTabGenerelleAngabenFachlicheDatenBaustoffe'
                  "
                />
                <!-- TODO XXXXXX: :disable-Steuerung an allen folgenden Tabs mit dedizierten computed-Funktionen für die diversen Baustoffprofile -->
                <!-- ---------------------------------------------------------------------------------------------------------------------------- -->
                <!-- ALT: Alle folgenden Tabs für Rohstoffe nur für Admins enablen (Platzgründe)! -->
                <!-- v-if="!benutzerRolleIstMitarbeiter" -->
                <!-- NEU: Steuerung in Abhängigkeit davon, ob links im Baustoffbaum ein Schichtbaustoff ausgewählt wurde: -->
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabPlatzhalterBaustoffFachlicheDatenBaustoffe"
                  label="Rohstoff"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabZuschlagRohstoffFachlicheDatenBaustoffe"
                  label="Zuschlag"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabBindemittelRohstoffFachlicheDatenBaustoffe"
                  label="Bindemittel"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabFuellstoffRohstoffFachlicheDatenBaustoffe"
                  label="Füllstoff"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabPigmentRohstoffFachlicheDatenBaustoffe"
                  label="Pigment"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabZusatzRohstoffFachlicheDatenBaustoffe"
                  label="Zusatz"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabMetallRohstoffFachlicheDatenBaustoffe"
                  label="Metall"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabKeramikRohstoffFachlicheDatenBaustoffe"
                  label="Keramik"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabTransparentRohstoffFachlicheDatenBaustoffe"
                  label="Glas"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabKunststoffRohstoffFachlicheDatenBaustoffe"
                  label="Kunststoff"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabSchuettstoffRohstoffFachlicheDatenBaustoffe"
                  label="Schüttstoff"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabNatursteinRohstoffFachlicheDatenBaustoffe"
                  label="Naturstein"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabHolzRohstoffFachlicheDatenBaustoffe"
                  label="Holz"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabGasfRohstoffFachlicheDatenBaustoffe"
                  label="Gas"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabAbstandhalterRohstoffFachlicheDatenBaustoffe"
                  label="Abstandhalter"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImRohstoffUnterbaum"
                  name="tabDichtstoffRohstoffFachlicheDatenBaustoffe"
                  label="Dichtstoff"
                  no-caps
                />
                <!-- ------------------------------------------------------------------------------------------------------------------------------------------ -->
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Schichtbaustoff"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabBetonSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Beton"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabRohdeckeSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Rohdecke"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabRohwandSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Rohwand"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  :disable="
                    !istAktiviertBaueigenschaftsProfilBaustoffEstrichAnAusgewaehltemBaustoff
                  "
                  name="tabEstrichSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Estrich"
                  no-caps
                  @input="
                    unterTabFachlicheDatenBaustoffe =
                      'unterTabEstrichSchichtbaustoffFachlicheDatenBaustoffe'
                  "
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabPutzSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Putz"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabSpachtelungFachlicheDatenBaustoffe"
                  label="Spachtelung"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabVerbundabdichtungSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Verbundabdichtung"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabBahnSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Bahn"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabBodenbelagSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Bodenbelag"
                  no-caps
                />
                <!-- ??? -->
                <!--
                <q-tab
                   v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabWandbelagSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Wandbelag"
                  no-caps
                />
                -->
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabKleberSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Kleber"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabBauplatteSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Bauplatte"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabDaemmungSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Dämmung"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabSandwichSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Sandwich"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabMatteSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Matte"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabSchuettungaustoffFachlicheDatenBaustoffe"
                  label="Schüttung"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabFassadeSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Fassade"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabDeckungSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Deckung"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabVerglasungSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Verglasung"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum"
                  name="tabDeckeSchichtbaustoffFachlicheDatenBaustoffe"
                  label="Decke"
                  no-caps
                />
                <!-- -------------------------------------------------------------------------------------------------------------- -->
                <!-- ALT: Alle folgenden Tabs für Rohstoffe nur für Admins enablen (Platzgründe)! -->
                <!-- v-if="!benutzerRolleIstMitarbeiter" -->
                <!-- NEU: Steuerung in Abhängigkeit davon, ob links im Baustoffbaum ein Schichtbaustoff ausgewählt wurde: -->
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImBauelementUnterbaum"
                  name="tabBauelementFachlicheDatenBaustoffe"
                  label="Bauelement"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImBauelementUnterbaum"
                  name="tabPlatzhalter0BauelementFachlicheDatenBaustoffe"
                  label="Platzhalter"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImBauelementUnterbaum"
                  name="tabPlatzhalter1BauelementFachlicheDatenBaustoffe"
                  label="Platzhalter"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImBauelementUnterbaum"
                  name="tabPlatzhalter2BauelementFachlicheDatenBaustoffe"
                  label="Platzhalter"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImBauelementUnterbaum"
                  name="tabPlatzhalter3BauelementFachlicheDatenBaustoffe"
                  label="Platzhalter"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImBauelementUnterbaum"
                  name="tabPlatzhalter4BauelementFachlicheDatenBaustoffe"
                  label="Platzhalter"
                  no-caps
                />
                <q-tab
                  v-if="selectedKeyTreeBaustoffeIstImBauelementUnterbaum"
                  name="tabPlatzhalter5BauelementFachlicheDatenBaustoffe"
                  label="Platzhalter"
                  no-caps
                />
              </q-tabs>
              <!-- QTabPanels für dritte graue Tab-Zeile - diese zeigen alle das layoutgesteuerte generische Profilformular an, mit jeweils unterschiedlichen Props -->
              <q-tab-panels v-model="unterTabFachlicheDatenBaustoffe">
                <!-- --------------------------------------------------------------------------------------------------------------------------------------- -->
                <!-- Spezifisches QTabPanel (mit Unter-Tabs in der dritten grauen Tab-Zeile) für das Tab "Generelle Angaben" in der zweiten grauen Tab-Zeile -->
                <!-- Aktuell selbe Bedingungen am :disable wie in der ersten grauen Tab-Zeile -->
                <!-- Alternativ wäre auch denkbar: :disable="tabFachlicheDatenBaustoffe='tabGenerelleAngabenFachlicheDatenBaustoffe'" -->
                <!-- --------------------------------------------------------------------------------------------------------------------------------------- -->
                <!-- :disable am Wurzelknoten, aktuell nicht enabled: -->
                <!--
                  :disable=""
                    selectedNodeTreeBaustoffe.baumKnotenTyp ===
                    'Wurzelknoten' ||
                  "
                -->
                <q-tab-panel
                  class="q-pa-xs"
                  name="unterTabGenerelleAngabenFachlicheDatenBaustoffe"
                  :disable="
                    !istAktiviertBaueigenschaftsProfilBaustoffAnAusgewaehltemBaustoff
                  "
                >
                  <!-- ------------------------------------------------------------------------------------------------------------------------------------------------------- -->
                  <!-- NEU: Hier das layoutgesteuerte generische Profilformular anzeigen                                                                                       -->
                  <!-- ACHTUNG: Steuerung, dass alle Felder auf readonly geschaltet werden und die Button-Zeile unterdrückt wird mit Prop                                      -->
                  <!-- :benutzerDarfBearbeitenSelectedNode="false/"true" - diese muss unbedingt mit : angegeben werden, damit es funktioniert!                                 -->
                  <!-- ACHTUNG/TODO XXXXXX: Das Profil "Baustoff" musste erst in back-end-server.js angelegt werden zu Testzwecken - es hat aktuell noch keine BEgs zugeordnet -->
                  <!-- ------------------------------------------------------------------------------------------------------------------------------------------------------- -->
                  <layoutGesteuertesGenerischesBaueigenschaftsProfilFormular
                    profilBezeichnung="Baustoff"
                    baum="Baustoffbaum"
                    :nodes="nodesTreeBaustoffe"
                    :selectedNode="selectedNodeTreeBaustoffe"
                    :benutzerDarfBearbeitenSelectedNode="
                      !benutzerRolleIstMitarbeiter
                    "
                    @refresh-request-baueigenschafts-profil="
                      refreshTreeBaustoffeSpecialized()
                    "
                  />
                </q-tab-panel>
                <!-- --------------------------------------------------------------------------------------------------------------------------------------- -->
                <!-- Spezifisches QTabPanel (mit Unter-Tabs in der dritten grauen Tab-Zeile) für das Tab "Estrich" in der zweiten grauen Tab-Zeile -->
                <!-- NEU :disable-Steuerung: -->
                <!-- Aktuell selbe Bedingungen am :disable wie in der ersten grauen Tab-Zeile -->
                <!-- Alternativ wäre auch denkbar: :disable="tabFachlicheDatenBaustoffe='tabEstrichSchichtbaustoffFachlicheDatenBaustoffe'" -->
                <!-- --------------------------------------------------------------------------------------------------------------------------------------- -->
                <q-tab-panel
                  class="q-pa-xs"
                  name="unterTabEstrichSchichtbaustoffFachlicheDatenBaustoffe"
                  :disable="
                    selectedNodeTreeBaustoffe.baumKnotenTyp ===
                      'Wurzelknoten' ||
                      !istAktiviertBaueigenschaftsProfilBaustoffEstrichAnAusgewaehltemBaustoff
                  "
                >
                  <!-- ------------------------------------------------------------------------------------------------------------------------------------------------------- -->
                  <!-- NEU: Hier das layoutgesteuerte generische Profilformular anzeigen                                                                                       -->
                  <!-- ACHTUNG: Steuerung, dass alle Felder auf readonly geschaltet werden und die Button-Zeile unterdrückt wird mit Prop                                      -->
                  <!-- :benutzerDarfBearbeitenSelectedNode="false/"true" - diese muss unbedingt mit : angegeben werden, damit es funktioniert!                                 -->
                  <!-- ACHTUNG/TODO XXXXXX: Das Profil "Baustoff" musste erst in back-end-server.js angelegt werden zu Testzwecken - es hat aktuell noch keine BEgs zugeordnet -->
                  <!-- ------------------------------------------------------------------------------------------------------------------------------------------------------- -->
                  <layoutGesteuertesGenerischesBaueigenschaftsProfilFormular
                    profilBezeichnung="Baustoff > Estrich"
                    baum="Baustoffbaum"
                    :nodes="nodesTreeBaustoffe"
                    :selectedNode="selectedNodeTreeBaustoffe"
                    :benutzerDarfBearbeitenSelectedNode="
                      !benutzerRolleIstMitarbeiter
                    "
                    @refresh-request-baueigenschafts-profil="
                      refreshTreeBaustoffeSpecialized()
                    "
                  />
                </q-tab-panel>
                <!-- --------------------------------------------------------------------------------------------------------------------------------------- -->
                <!-- NEU: Für Testzwecke -->
                <!-- Spezifisches QTabPanel (mit Unter-Tabs in der dritten grauen Tab-Zeile) für das Tab "Test" in der zweiten grauen Tab-Zeile -->
                <!-- NEU :disable-Steuerung: -->
                <!-- Aktuell selbe Bedingungen am :disable wie in der ersten grauen Tab-Zeile -->
                <!-- Alternativ wäre auch denkbar: :disable="tabFachlicheDatenBaustoffe='tabTestFachlicheDatenBaustoffe'" -->
                <!-- --------------------------------------------------------------------------------------------------------------------------------------- -->
                <q-tab-panel
                  class="q-pa-xs"
                  name="unterTabTestFachlicheDatenBaustoffe"
                  :disable="
                    selectedNodeTreeBaustoffe.baumKnotenTyp ===
                      'Wurzelknoten' ||
                      !istAktiviertBaueigenschaftsProfilAllgemeinTestAnAusgewaehltemBaustoff
                  "
                >
                  <!-- ------------------------------------------------------------------------------------------------------------------------------------------------------- -->
                  <!-- NEU: Hier das layoutgesteuerte generische Profilformular anzeigen                                                                                       -->
                  <!-- ACHTUNG: Steuerung, dass alle Felder auf readonly geschaltet werden und die Button-Zeile unterdrückt wird mit Prop                                      -->
                  <!-- :benutzerDarfBearbeitenSelectedNode="false/"true" - diese muss unbedingt mit : angegeben werden, damit es funktioniert!                                 -->
                  <!-- ACHTUNG/TODO XXXXXX: Das Profil "Baustoff" musste erst in back-end-server.js angelegt werden zu Testzwecken - es hat aktuell noch keine BEgs zugeordnet -->
                  <!-- ------------------------------------------------------------------------------------------------------------------------------------------------------- -->
                  <layoutGesteuertesGenerischesBaueigenschaftsProfilFormular
                    profilBezeichnung="Allgemein > Test > Wertetypen"
                    baum="Baustoffbaum"
                    :nodes="nodesTreeBaustoffe"
                    :selectedNode="selectedNodeTreeBaustoffe"
                    :benutzerDarfBearbeitenSelectedNode="
                      !benutzerRolleIstMitarbeiter
                    "
                    @refresh-request-baueigenschafts-profil="
                      refreshTreeBaustoffeSpecialized()
                    "
                  />
                </q-tab-panel>
              </q-tab-panels>
            </q-tab-panel>
            <!-- ----------------------------------------------------------------------------------------------------------------------- -->
            <!-- ================================================================================================== -->
            <!-- ACHTUNG: Hier class="q-pa-xs" oder "q-pa-none" zur Kontrolle des Abstands zwischen den Tableisten  -->
            <!-- ================================================================================================== -->
            <q-tab-panel class="q-pa-xs" name="baueigenschaftenTabBaustoffe">
              <!--
              localStore.state.debugMode:
              {{ localStore.state.debugMode }}
              <br />
              -->
              <div v-if="localStore.state.debugMode">
                selectedKeyTreeBaustoffe:
                {{ selectedKeyTreeBaustoffe }}
                <br />
                nothingSelectedInTableBaueigenschaften:
                {{ nothingSelectedInTableBaueigenschaften }}
                <br />
                selectedRowsTableBaueigenschaften:
                {{ selectedRowsTableBaueigenschaften }}
                <br />
                <br />
                <q-separator />
                <br />
              </div>
              <!-- ALT: -->
              <!--
                class="text-grey-10 bg-grey-2"
                active-color="primary"
                indicator-color="primary"
                narrow-indicator
              -->
              <!-- =================================================================================================== -->
              <!-- ACHTUNG: class="q-pa-xs" oder "q-pa-none" kontrolliert Breite der Tableiste!                        -->
              <!-- =================================================================================================== -->
              <q-tabs
                mobile-arrows
                dense
                class="q-pa-none text-black bg-grey-4 full-width"
                active-color="primary"
                active-bg-color="white"
                content-class="text-h7"
                :value="tabBaueigenschaften"
                align="left"
                narrow-indicator
                @input="changeAngezeigtesTabBaueigenschaften($event)"
              >
                <!-- in $event steht der Name des Zieltabs -->
                <q-tab
                  name="uebersichtTabBaueigenschaften"
                  label="Übersicht aller Baueigenschaften"
                  no-caps
                />
                <q-tab
                  name="beschreibungTabBaueigenschaften"
                  :disable="nothingSelectedInTableBaueigenschaften"
                  label="Beschreibung für ausgewählte Baueigenschaft"
                  no-caps
                />
                <q-tab
                  name="auswahlTabBaueigenschaften"
                  :disable="nothingSelectedInTableBaueigenschaften"
                  label="Details zur ausgewählten Baueigenschaft"
                  no-caps
                />
                <!-- NEU: QTab für Neuanlage anzeigen in Abhhängigkeit von Benutzerrolle (d.h. nur für Redakteure und Administratoren) -->
                <q-tab
                  v-if="!benutzerRolleIstMitarbeiter"
                  name="neuTabBaueigenschaften"
                  label="Neuanlage einer Baueigenschaft"
                  no-caps
                />
              </q-tabs>
              <q-tab-panels v-model="tabBaueigenschaften" animated>
                <q-tab-panel
                  class="q-pa-xs"
                  name="uebersichtTabBaueigenschaften"
                >
                  <!-- NEU: style="max-width: 1990px" -->
                  <!-- ALT: style="max-width: 1800px" -->
                  <!-- Mit diesem Wert kommt bei geschlossenem rechten Drawer beim Zuschalten von Spalten KEIN 2. Scrollbalken! -->
                  <!-- Bei offenem rechtem Drawer kommt dann allerdings ein 2. Scrollbalken unten -->
                  <!-- Mit diesem "Kompromisswert" wird die Spalte "Aufzählungswert" bei splitterModel 18 noch mit angezeigt bei offenem Drawer -->
                  <!-- ALT: style="max-width: 1550px" -->
                  <!-- Mit diesem Wert auch kein doppelter Scrollbar bei offenem rechtem Drawer! -->
                  <!--      Aber die Table wird dann sehr schmal! -->
                  <!-- ALT: style="max-width: 1930px" -->
                  <!-- Dies war der testweise eingestellte Wert über längere Zeit -->
                  <div class="q-pa-none">
                    <!-- ALT: style="max-width: 1990px" -->
                    <!-- TODO: Mit min-width und max-width von diesem div am q-tab-panel und dem am q-splitter    -->
                    <!-- und evtl. auch an dem div um den q-tree muss noch experimentiert werden!!!               -->
                    <!-- Diese beeinflussen die Scrollbalken unten - dabei 2 parallele Scrollbalken vermeiden!!!  -->
                    <!-- HINWEIS: Dieses div zwischen q-tab-panel und q-table ist WICHTIG, falls die Table in     -->
                    <!--          ein Splitter-Model (hier im rechten Panel) eingebettet ist                      -->
                    <!-- ACHTUNG: Nur mit diesem style="max-width: XXXXpx" lassen sich 2 Scrollbalken unten       -->
                    <!--          im rechten Panel wenigstens einigermaßen vermeiden (allerdings, wenn der        -->
                    <!--          rechte Drawer angezeigt wird, nur mit sehr kleinem Wert XXXX!!!)                -->
                    <q-table
                      ref="tableBaueigenschaften"
                      v-if="selectedNodeTreeBaustoffe != null"
                      :title="titleTableBaueigenschaften"
                      :data="selectedNodeTreeBaustoffe.baueigenschaften"
                      :columns="columnsTableBaueigenschaften"
                      row-key="_id"
                      :filter="filterTableBaueigenschaften"
                      :visible-columns="visibleColumnsTableBaueigenschaften"
                      rows-per-page-label="Einträge pro Seite"
                      :pagination.sync="paginationTableBaueigenschaften"
                      :pagination-label="getPaginationLabel"
                      :rows-per-page-options="[
                        5,
                        10,
                        15,
                        20,
                        25,
                        30,
                        35,
                        40,
                        0
                      ]"
                      :selection="selectionModeTableBaueigenschaften"
                      :selected.sync="selectedRowsTableBaueigenschaften"
                      :selected-rows-label="
                        getSelectedStringTableBaueigenschaften
                      "
                      dense
                      separator="cell"
                      v-bind:class="{
                        stickyColumnsTable2HeaderLines: $q.screen.gt.sm
                      }"
                    >
                      <!-- ACHTUNG: Sticky Column funktioniert nur auf großen Bildschirmen - auf mobilen Bildschirmen funktioniert damit das horizontale Scrolling der QTable nicht! -->
                      <!-- LÖSUNG (#378): Per v-bind mit Bedingung $q.screen.gt.sm die sticky Column nur auf nicht kleinen Bildschirmen! -->
                      <!-- Vorlage: https://vuejs.org/v2/guide/class-and-style.html -->
                      <!-- Dazu musste allerdings die CSS Class sticky-columns-table-... (kebab-case) umbenannt werden nach -->
                      <!-- stickyColumnsTable... (camelCase) -->
                      <!-- ACHTUNG: Separator-Bug in Quasar, https://github.com/quasarframework/quasar/issues/5374 - fixed in 1.2.6  -->
                      <!-- ACHTUNG: Selection="multiple" erfordert speziellen Code für die erste Checkbox-Spalte bei -->
                      <!-- Verwendung des Header Slots (q-th) unten!!! -->
                      <template v-slot:top="props">
                        <div
                          class="row full-width q-table__title text-body2 q-col-gutter-xs q-pa-none"
                        >
                          <!-- HINWEIS: Diese Classes heissen anscheinend tatsächlich q-table__title, q-table__top, etc. -->
                          <div class="col-md-2 col-12 q-pl-none">
                            <q-input
                              square
                              bg-color="teal-2"
                              standout="bg-teal-4 text-black"
                              dense
                              debounce="300"
                              color="primary"
                              v-model="filterTableBaueigenschaften"
                            >
                              <template v-slot:append>
                                <q-icon name="search" />
                              </template>
                            </q-input>
                          </div>
                          <div
                            v-if="selectedNodeTreeBaustoffe != null"
                            class="col-md-9 col-12"
                          >
                            <div class="text-h6" v-if="$q.screen.gt.sm">
                              Baueigenschaften an dem im Baustoffbaum
                              ausgewählten Baustoff
                              <strong
                                >"{{
                                  selectedNodeTreeBaustoffe.baustoffBezeichnung
                                }}"</strong
                              >
                            </div>
                            <div class="text-subtitle1" v-else>
                              Baueigenschaften an dem im Baustoffbaum
                              ausgewählten Baustoff
                              <strong
                                >"{{
                                  selectedNodeTreeBaustoffe.baustoffBezeichnung
                                }}"</strong
                              >
                            </div>
                          </div>
                          <div class="col-md-1 col-12">
                            <!-- ALT: class="absolute-top-right" -->
                            <!-- Button wurde leider früher eventuell vom rechten Drawer verdeckt!!! -->
                            <!-- Daher als Workaround ersetzt durch class="float-left" -->
                            <!-- Nun funktioniert wieder class="float-right" -->
                            <q-btn
                              class="float-right"
                              flat
                              round
                              dense
                              :icon="
                                props.inFullscreen
                                  ? 'fullscreen_exit'
                                  : 'fullscreen'
                              "
                              @click="props.toggleFullscreen"
                              no-caps
                            />
                          </div>
                          <div class="row full-width q-col-gutter-xs q-pa-xs">
                            <div class="col-md-2 col-12">
                              <q-toggle
                                dense
                                label="Aktivierungszustand"
                                v-model="aktivierungsMerkmaleAnzeigen"
                                @input="toggleSpaltenAktivierungsMerkmale()"
                              />
                            </div>
                            <div class="col-md-2 col-12">
                              <q-toggle
                                dense
                                label="Kennwertbezogene Angaben"
                                v-model="kennwertbezogeneAngabenAnzeigen"
                                @input="toggleSpaltenKennwertbezogeneAngaben()"
                              />
                            </div>
                            <div class="col-md-2 col-12">
                              <q-toggle
                                dense
                                label="Wertbezogene Angaben"
                                v-model="wertbezogeneAngabenAnzeigen"
                                @input="toggleSpaltenWertbezogeneAngaben()"
                              />
                            </div>
                            <div class="col-md-2 col-12">
                              <q-toggle
                                dense
                                label="Wertbezogene Merkmale"
                                v-model="wertbezogeneMerkmaleAnzeigen"
                                @input="toggleSpaltenWertbezogeneMerkmale()"
                              />
                            </div>
                            <div class="col-md-2 col-12">
                              <q-toggle
                                dense
                                label="Typbezogene Angaben"
                                v-model="weitereTypbezogeneAngabenAnzeigen"
                                @input="
                                  toggleSpaltenWeitereTypbezogeneAngaben()
                                "
                              />
                            </div>
                            <div class="col-md-2 col-12">
                              <!-- NEU: "Schutzkategorien" am UI umbenannt in "Fachliche Rubriken" -->
                              <!-- NEU - #401: Umbenannt in "Fachliche Kategorien" (mit Rubriken als weitere Einteilung) -->
                              <q-toggle
                                dense
                                label="Fachliche Kategorien und Rubriken"
                                v-model="schutzKategorienAnzeigen"
                                @input="toggleSpaltenSchutzKategorien()"
                              />
                            </div>
                          </div>
                        </div>
                      </template>
                      <!-- ============================================================================================================================ -->
                      <!-- NEU: Customized Table Header, mit <q-th> selbst generiert -->
                      <!-- Sample: https://codepen.io/mickey58/pen/XWWVEEN -->
                      <!-- Man kann damit eine neue obere Header-Zeile erzeugen zur Gruppierung von Spalten mit Kategorieüberschriften -->
                      <!-- in einer neu hinzugefügten ersten Header-Zeile -->
                      <!-- Leider funktioniert es zunächst nicht so wie im Sample, sondern die Kategorieüberschriften wurden -->
                      <!-- alle in die 3. Spalte (über "Obligatorisch") appended, nicht als separate Spalten. -->
                      <!-- Dies passierte auch, wenn man die class="stickyColumnsTable2HeaderLines" an der q-table abschaltete. -->
                      <!-- Anderes Sample: https://forum.quasar-framework.org/topic/2818/solved-how-to-make-a-q-table-with-multiple-headers/19 -->
                      <!-- Schlägt <div> vor wie in https://jsfiddle.net/v09hbkwa/, probiert, hilft nicht -->
                      <!-- Die Ursache obigen Problems war die Steuerung über v-ifs an <div>s, diese funktionniert nicht!!! -->
                      <!-- Die v-ifs müssen direkt an den <q-th>s sein!!! -->

                      <!-- ACHTUNG: Damit erscheint die bei selection="multiple" von Quasar normalerweise generierte -->
                      <!-- Checkbox für "(De-)Select All" nicht mehr automatisch! Diese muss dann im Template unten explizit -->
                      <!-- generiert werden in der zweiten Header-Zeile, erste Spalte. -->
                      <template v-slot:header="props">
                        <!-- <div v-if localStore.state.debugMode> -->
                        <!--   props: {{props}} -->
                        <!-- </div> -->
                        <!-- 1. Header-Zeile -->
                        <q-tr>
                          <!-- Für Column-Alignment notwendig: <q-th> für die Zelle über der erste Checkbox-Spalte: -->
                          <q-th auto-width>
                            Auswahl
                            <!-- War früher leer, um Platz zu sparen! -->
                            <!-- <div v-if localStore.state.debugMode> -->
                            <!--   props.cols.length: {{props.cols.length}} -->
                            <!-- </div> -->
                          </q-th>
                          <!-- Für die Zelle über der fixen zweiten Bezeichnungsspalte -->
                          <q-th align="center" color="primary" auto-width
                            >Bezeichnung der Baueigenschaft</q-th
                          >
                          <!-- Achtung: Mit <div v-if=..." funktioniert die folgende Steuerung NICHT!!! -->
                          <!-- Die v-ifs müssen direkt an q-th sein!!! -->
                          <!-- NEU: Mit Wegfall von "obligatorisch" und "aktivierbar" ist colspan="1" statt "3" -->
                          <!-- NEU: Spaltenüberschrift "Akivierungzustand" statt "Aktivierungsmerkmale" -->
                          <q-th
                            auto-width
                            v-if="aktivierungsMerkmaleAnzeigen"
                            colspan="1"
                            align="center"
                            >Aktivierungszustand</q-th
                          >
                          <!-- ALT: Kennwertbezogene Angaben waren nested innerhalb der wertbezogenen Angaben -->
                          <!-- Dies führte bei den neue eingeführten Kategorieüberschriften in der ersten Header-Zeile dann zu Fehlern bei diversen -->
                          <!-- Sonderfällen, falls wertbezogene und kennwertbezogene Angaben beide ausgeschaltet wurden, -->
                          <!-- oder wertbezogene Angaben ausgeschaltet wurden, während kennwertbezogene Angaben noch an waren -->
                          <!-- Dann blieben falsche Überschriften stehen, selbst wenn man an den v-ifs doppelte -->
                          <!-- Kombinationen der beiden abprüft -->
                          <!-- NEU: Kennwertbezogene Angaben vor die wertbezogenen Angaben verschoben -->
                          <!-- NEU: colspan="4" statt "3" wegen Hinzunahme von Spalte "Formel" nach "Operator" -->
                          <q-th
                            auto-width
                            v-if="kennwertbezogeneAngabenAnzeigen"
                            colspan="4"
                            align="center"
                            >Kennwertbezogene Angaben</q-th
                          >
                          <!-- NEU: Im folgenden <q-th colspan="11"> statt <q-th colspan="9"> wegen Hinzunahme zweier Spalten für Tageszeit1/2 -->
                          <!-- ACHTUNG: Die colspan hier ist unabhängig von der colspan der Spalten davor! -->
                          <q-th
                            auto-width
                            v-if="wertbezogeneAngabenAnzeigen"
                            colspan="11"
                            align="center"
                            >Wertbezogene Angaben (falls aktiviert und definiert
                            am ausgewählten Baustoff)</q-th
                          >
                          <!-- NEU - #514 - colspan="5" statt "7" wegen 2 nach typbezogenen Angaben verschobenen Feldern systemdefiniertNichtBenutzerdefiniert, sollwertNichtIstwert) -->
                          <q-th
                            auto-width
                            v-if="wertbezogeneMerkmaleAnzeigen"
                            colspan="5"
                            align="center"
                            >Wertbezogene Merkmale (falls aktiviert am
                            ausgewählten Baustoff)</q-th
                          >
                          <!-- NEU - #514 - colspan="6" statt "3" wegen 3 zusätzlichen Feldern (baueigenschaftsAnzeigeText, systemdefiniertNichtBenutzerdefiniert, sollwertNichtIstwert) -->
                          <q-th
                            auto-width
                            v-if="weitereTypbezogeneAngabenAnzeigen"
                            colspan="6"
                            align="center"
                            >Typbezogene Angaben zur Baueigenschaft</q-th
                          >
                          <!-- NEU: Im folgenden <q-th colspan="11"> statt <q-th colspan="9"> wegen Hinzunahme zweier Spalten für Brandschutz und Nachhaltigkeit -->
                            <!-- NEU: Weitere 8 Spalten hinzugenommen => 19 statt 11 -->
                            <!-- NEU: "Schutzkategorien" am UI umbenannt in "Fachliche Rubriken" -->
                            <!-- NEU: colspan="35" statt "19" wegen Hinzunahme von 16 zusätzlichen Rubriken in #515 -->
                            <!-- NEU: Für #401 werden 33 "alte" Spalten benötigt ("Materialeigenschaften" und "Nachhaltigkeit" entfallen) plus 59 "neue" = 92 -->
                            <!-- Diese werden in Kategorien unterteilt: -->
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="4"
                              align="center"
                              >Fachliche Kategorie: Struktur</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="5"
                              align="center"
                              >Fachliche Kategorie: Wirtschaft</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="7"
                              align="center"
                              >Fachliche Kategorie: Umgebung</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="15"
                              align="center"
                              >Fachliche Kategorie: Gebäudetechnik</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="3"
                              align="center"
                              >Fachliche Kategorie: Geometrie</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="4"
                              align="center"
                              >Fachliche Kategorie: Statik</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="1"
                              align="center"
                              >Fachliche Kategorie: Konstruktion</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="4"
                              align="center"
                              >Fachliche Kategorie: Bautenschutz</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="1"
                              align="center"
                              >Fachliche Kategorie: Feuchteschutz</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="2"
                              align="center"
                              >Fachliche Kategorie: Wärmeschutz</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="3"
                              align="center"
                              >Fachliche Kategorie: Akustik</q-th
                            >
                             <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="3"
                              align="center"
                              >Fachliche Kategorie: Schwingungs- und Erschütterungsschutz</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="1"
                              align="center"
                              >Fachliche Kategorie: Brandschutz</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="4"
                              align="center"
                              >Fachliche Kategorie: Sicherheit</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="2"
                              align="center"
                              >Fachliche Kategorie: Gebrauchstauglichkeit</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="3"
                              align="center"
                              >Fachliche Kategorie: Gesundheit</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="4"
                              align="center"
                              >Fachliche Kategorie: Ressourcen</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="4"
                              align="center"
                              >Fachliche Kategorie: Bautechnik</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="20"
                              align="center"
                              >Fachliche Kategorie: Verwendung</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="2"
                              align="center"
                              >Fachliche Kategorie: Sonstiges</q-th
                            >
                            <!-- ---------------------------------------------------------------------------------------------------------------------------------- -->
                            <!-- ALT: Fachliche Rubriken vor #401 -->
                            <!--
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="35"
                              align="center"
                              >Typbezogene fachliche Rubriken zur
                              Baueigenschaft</q-th
                            >
                            -->
                            <!-- ---------------------------------------------------------------------------------------------------------------------------------- -->
                        </q-tr>
                        <!-- 2. Header-Zeile, diese funktionierte im Gegensatz zur ersten sofort tadellos, da ohne v-ifs -->
                        <q-tr :props="props">
                          <!-- Erste Spalte, reserviert für Checkboxes: -->
                          <q-th auto-width>
                            <!-- Checkbox für "Select/Deselect All" bei selection="multiple", muss explizit generiert werden -->
                            <!-- TODO: Sollte "-" anzeigen, wie Quasar es selbst macht??? -->
                            <q-checkbox
                              v-if="
                                selectionModeTableBaueigenschaften ===
                                  'multiple'
                              "
                              v-model="props.selected"
                              dense
                            />
                            <!-- TODO: Hier eventuell zusätzlich einbauen: -->
                            <!-- Sort-Möglichkeit nach selected/deselected bei Selection="multiple", über zusätzliche -->
                            <!-- "virtual" Column -->
                            <!-- Siehe https://forum.quasar-framework.org/topic/4602/qtable-question-sort-by-selected-deselected-rows/11 -->
                            <!-- sowie selbst erstellte Vorlage auf https://codepen.io/mickey58/pen/XWWVEEN -->
                            <!-- HINWEIS: Quasar erzeugt und rotiert Sort internen Icon q-table__sort-icon (= die "Up/Down" Arrows) -->
                            <!-- per CSS und handled Events darauf - das ist nicht so leicht zu kopieren: -->
                            <!-- https://github.com/quasarframework/quasar/blob/dev/ui/src/components/table/QTable.styl -->
                          </q-th>
                          <!-- Nun die Zellen für die Überschriften der normalen Table-Spalten erzeugen. -->
                          <!-- Diese werden offenbar automatisch von Quasar zusätzlich befüllt mit den Up/Down-Arrows für "sortable" Spalten  -->
                          <q-th
                            v-for="col in props.cols"
                            :key="col.name"
                            :props="props"
                            :auto-width="true"
                          >
                            <!-- Folgender Code, um die Baueigenschaftsbezeichnungsspalte optisch hervorzuheben, bringt leider die Column-Höhe durcheinander auskommentiert: -->
                            <!--
                                  <div v-if="col.label=='Baueigenschaftsbezeichnung'" class="text-red">{{col.label}}</div>
                                  <div v-else>{{col.label}}</div>
                                  -->
                            {{ col.label }}
                          </q-th>
                        </q-tr>
                      </template>
                      <!-- /v-slot:header="props" -->
                      <!-- ============================================================================================================================ -->
                      <!-- Es folgt der Code für den Table Body: -->
                      <template v-slot:body="props">
                        <q-tr :props="props">
                          <!-- Tests für die Belegung der props am v-slot: -->
                          <!-- Auf nested Properties kann (sofern nicht undefined!) wie folgt zugegriffen werden: -->
                          <!-- props.row.typbezogeneBaueigenschaft.bauinformation.bauinformationsBezeichnung: -->
                          <!-- {{props.row.bauinformation.typbezogeneBaueigenschaft.bauinformationsBezeichnung }} -->
                          <!-- props.selected: {{props.selected}} -->
                          <!-- props.selected ist "true" bzw. "false" für selektierte/deselektierte Rows in der q-table -->
                          <q-td :auto-width="true">
                            <!-- props.selected: {{props.selected}} -->
                            <!-- Es folgt die Checkbox in erster q-table-Spalte für Selektion/Deselektion von Rows -->
                            <!-- (dies wird bei Tables OHNE v-slots bei selection="single" bzw. "multiple" automatisch von Quasar hinzugefügt) -->
                            <q-checkbox
                              v-model="props.selected"
                              color="primary"
                              dense
                            />
                          </q-td>
                          <q-td
                            :auto-width="true"
                            v-for="col in columnsTableBaueigenschaften"
                            :key="col.name"
                            :props="props"
                          >
                            <!-- =================================================================================================================================== -->
                            <!-- START CODE FÜR KONTEXTMENÜ für Rechtsklick-Aktionen auf einer Spalte/Zeile in der QTable -->
                            <!-- Diese Kontextmenüs waren ursprünglich nur für die Spalten, die in booleanFieldsTypbezogen und booleanFieldsWertbezogen enthalten sind, -->
                            <!-- später auch für die Spalte für die Baueigenschaftsbezeichnung definiert, nun diese zentral hier für alle Spalten definiert: -->
                            <!-- TODO: Man könnte später selektiv auch noch andere Aktionen anbieten je nach Spalte/Zeile, z.B. auf den Link-Spalten -->
                            <!-- Dabei ist die (per Maus angewählte) Spalte in col.name, die Zeile in props.row enthalten, siehe Debug Info Kontextmenü unten -->
                            <!-- ================================================================================================================================ -->
                            <q-menu touch-position context-menu>
                              <q-list
                                dense
                                style="min-width: 100px"
                                v-model="props.row[col.name]"
                              >
                                <!--
                                      <div v-if="localStore.state.debugMode">
                                        Debug-Info Kontextmenü:
                                        <q-separator />
                                        props.row: {{props.row}}
                                        <q-separator />
                                        col (Table Column Definition, per v-for): {{col}}
                                        <q-separator />
                                        col.name: {{col.name}}
                                        <q-separator />
                                        col.field: {{col.field}}
                                        <q-separator />
                                        Bisheriger Wert der Zelle: {{col.label}}: {{props.row[col.field]}}
                                        <q-separator />
                                        props.selected: {{props.selected}}
                                        <q-separator />
                                      </div>
                                      -->
                                <!-- ACHTUNG: Der 2. Parameter von toggleBooleanFieldTableBaueigenschaften() muss hier speziell auf 'aktiviertNichtDeaktiviert' gesetzt werden! -->
                                <q-item
                                  clickable
                                  v-close-popup
                                  @click="
                                    bearbeiteEigenschaftAusContextMenuTableBaueigenschaften(
                                      props
                                    )
                                  "
                                >
                                  <!-- NEU: Anzeige des Labels in Abhängigkeit von Benutzerrolle -->
                                  <q-item-section>
                                    {{
                                      computeLabelKontextMenueBaueigenschaftAnzeigenOderBearbeiten
                                    }}
                                  </q-item-section>
                                </q-item>
                                <q-item
                                  :disable="benutzerRolleIstMitarbeiter"
                                  clickable
                                  v-close-popup
                                  @click="
                                    toggleBooleanFieldTableBaueigenschaften(
                                      props.row,
                                      'aktiviertNichtDeaktiviert'
                                    )
                                  "
                                >
                                  <q-item-section>
                                    Baueigenschaft auswählen und
                                    aktivieren/deaktivieren
                                  </q-item-section>
                                </q-item>
                                <q-item
                                  :disable="benutzerRolleIstMitarbeiter"
                                  clickable
                                  v-close-popup
                                  @click="
                                    selectedRowsTableBaueigenschaften[0] =
                                      props.row;
                                    ausgewaehlteBaueigenschaft = props.row;
                                    deleteSelectedBaueigenschaftDialog = true;
                                  "
                                >
                                  <q-item-section
                                    >Baueigenschaft auswählen und im
                                    Baustoffbaum löschen</q-item-section
                                  >
                                </q-item>
                                <q-separator />
                                <q-item
                                  :disable="benutzerRolleIstMitarbeiter"
                                  clickable
                                  v-close-popup
                                  @click="
                                    changeAngezeigtesTabBaueigenschaften(
                                      'neuTabBaueigenschaften'
                                    )
                                  "
                                >
                                  <q-item-section
                                    >Baueigenschaft im Baustoffbaum neu anlegen
                                  </q-item-section>
                                </q-item>
                                <!--
                                          <q-separator />
                                          <q-item clickable v-close-popup>
                                            <q-item-section>Weitere Aktion</q-item-section>
                                          </q-item>
                                          <q-item-section side>
                                            <q-icon name="keyboard_arrow_right" />
                                          </q-item-section>
                                        -->
                                <!--
                                          <q-separator />
                                          <q-item clickable v-close-popup>
                                            <q-item-section>Weitere Aktion</q-item-section>
                                          </q-item>
                                          <q-item-section side>
                                            <q-icon name="keyboard_arrow_right" />
                                          </q-item-section>
                                        -->
                              </q-list>
                            </q-menu>
                            <!-- ENDE CODE FÜR KONTEXTMENÜ -->
                            <!-- ====================================================================================================================== -->
                            <!-- NEU: Die typbezogenen Felder einheit, symbol, operator (sowie NEU: formel) werden als q-markdown Felder benutzt, nicht -->
                            <!-- als gewöhnliche Textfelder -->
                            <!-- Geht einher mit Änderungen der Eingabemasken für diese Felder (mit Markdown Preview und Dropdown-Select-Menü für Sonderzeichen) -->
                            <!-- ACHTUNG: Erfordert spezielle CSS class="height-small", sonst wird wegen dieser Felder die Zeilenhöhe in der Table größer als bei den anderen Zeilen!!! -->
                            <!-- ACHTUNG: Wenn dieser Code enabled ist, müssen in der Definition des Arrays textFieldsTypbezogen diese Felder, der sonst -->
                            <!--          die Anzeige dieser Felder als normale Textfelder steuert, auskommentiert werden! -->
                            <div
                              class="height-small"
                              v-if="col.name === 'einheit'"
                            >
                              <!-- Code für Sniff Test mit v-html anstatt q-markdown - erlaubt dann (nur) HTML Tags, kein Markdown, muss aber wohl sanitized werden? -->
                              <!--
                                    <pre v-html="props.row.typbezogeneBaueigenschaft
                                          .einheit"></pre>
                                    -->
                              <!-- ACHTUNG: Hier wird für :src statt der Lambda-Funktion col.field(props.row) für nested Fields direkt das nested Feld angezogen - -->
                              <!-- siehe Erläuterungen dazu weiter unten -->
                              <q-markdown
                                :src="
                                  props.row.typbezogeneBaueigenschaft.einheit
                                "
                                :no-blockquote="true"
                                :no-abbreviation="true"
                                :no-breaks="true"
                                :no-container="true"
                                :no-deflist="true"
                                :no-footnote="true"
                                :no-highlight="true"
                                :no-image="true"
                                :no-insert="true"
                                :no-line-numbers="true"
                                :no-link="true"
                                :no-linkify="true"
                                :no-tasklist="true"
                                :no-typographer="true"
                              />
                            </div>
                            <!-- ---------------------------------------------------------------------------------------------------- -->
                            <!-- ACHTUNG: Hier überall v-else-if statt v-if verwendet, da performanter und die v-ifs exklusiv sind!!! -->
                            <!-- ACHTUNG: Hier wird für :src statt der Lambda-Funktion col.field(props.row) für nested Fields direkt das nested Feld angezogen - -->
                            <!-- siehe Erläuterungen dazu weiter unten -->
                            <div
                              class="height-small"
                              v-else-if="col.name === 'symbol'"
                            >
                              <q-markdown
                                :src="
                                  props.row.typbezogeneBaueigenschaft.symbol
                                "
                                :no-blockquote="true"
                                :no-abbreviation="true"
                                :no-breaks="true"
                                :no-container="true"
                                :no-deflist="true"
                                :no-footnote="true"
                                :no-highlight="true"
                                :no-image="true"
                                :no-insert="true"
                                :no-line-numbers="true"
                                :no-link="true"
                                :no-linkify="true"
                                :no-tasklist="true"
                                :no-typographer="true"
                              />
                            </div>
                            <!-- ---------------------------------------------------------------------------------------------------- -->
                            <!-- ACHTUNG: Hier überall v-else-if statt v-if verwendet, da performanter und die v-ifs exklusiv sind!!! -->
                            <!-- ACHTUNG: Hier wird für :src statt der Lambda-Funktion col.field(props.row) für nested Fields direkt das nested Feld angezogen - -->
                            <!-- siehe Erläuterungen dazu weiter unten -->
                            <div
                              class="height-small"
                              v-else-if="col.name === 'operator'"
                            >
                              <q-markdown
                                :src="
                                  props.row.typbezogeneBaueigenschaft.operator
                                "
                                :no-blockquote="true"
                                :no-abbreviation="true"
                                :no-breaks="true"
                                :no-container="true"
                                :no-deflist="true"
                                :no-footnote="true"
                                :no-highlight="true"
                                :no-image="true"
                                :no-insert="true"
                                :no-line-numbers="true"
                                :no-link="true"
                                :no-linkify="true"
                                :no-tasklist="true"
                                :no-typographer="true"
                              />
                            </div>
                            <!-- ---------------------------------------------------------------------------------------------------- -->
                            <!-- NEU: Spalte für Formel hier zusätzlich aufgenommen -->
                            <!-- ACHTUNG: Hier überall v-else-if statt v-if verwendet, da performanter und die v-ifs exklusiv sind!!! -->
                            <!-- ACHTUNG: Hier wird für :src statt der Lambda-Funktion col.field(props.row) für nested Fields direkt das nested Feld angezogen - -->
                            <!-- siehe Erläuterungen dazu weiter unten -->
                            <div
                              class="height-small"
                              v-else-if="col.name === 'formel'"
                            >
                              <q-markdown
                                :src="
                                  props.row.typbezogeneBaueigenschaft.formel
                                "
                                :no-blockquote="true"
                                :no-abbreviation="true"
                                :no-breaks="true"
                                :no-container="true"
                                :no-deflist="true"
                                :no-footnote="true"
                                :no-highlight="true"
                                :no-image="true"
                                :no-insert="true"
                                :no-line-numbers="true"
                                :no-link="true"
                                :no-linkify="true"
                                :no-tasklist="true"
                                :no-typographer="true"
                              />
                            </div>
                            <!-- ================================================================================================================= -->
                            <!-- Hier zunächst die Anzeige der booleanFields steuern, weitere Fields folgen weiter unten -->
                            <!-- NEU: Hier testweise indeterminate an der q-checkbox eingeführt, wird auf jeden Fall gebraucht für die Checkbox -->
                            <!-- für den Wertetyp "Wahrheitswert" - FUNKTIONIERT! Bei "null" wird waagrechter Strich angezeigt-->
                            <!-- Es folgt <div> für booleanFieldsTypbezogen:                                                          -->
                            <!-- ---------------------------------------------------------------------------------------------------- -->
                            <!-- ACHTUNG: Hier überall v-else-if statt v-if verwendet, da performanter und die v-ifs exklusiv sind!!! -->
                            <div
                              v-else-if="
                                booleanFieldsTypbezogen.includes(col.name)
                              "
                            >
                              <!-- Zunächst Checkbox zur Anzeige des Boolean-Feldinhalts: -->
                              <!-- ACHTUNG: Hier Aufruf der Lambda-Funktion field() für nested Fields notwendig, siehe Erläuterungen dazu weiter oben im Code: -->
                              <q-checkbox
                                color="grey-9"
                                :disable="!popupEditEnabled"
                                toggle-indeterminate
                                :value="col.field(props.row)"
                                dense
                              />
                            </div>
                            <!-- /booleanFieldsTypbezogen -->
                            <!-- ---------------------------------------------------------------------------------------------------- -->
                            <!-- Es folgt <div> für booleanFieldsWertbezogen: -->
                            <!-- ---------------------------------------------------------------------------------------------------- -->
                            <!-- ACHTUNG: Hier überall v-else-if statt v-if verwendet, da performanter und die v-ifs exklusiv sind!!! -->
                            <div
                              v-else-if="
                                booleanFieldsWertbezogen.includes(col.name)
                              "
                            >
                              <!-- Zunächst Checkbox zur Anzeige des Boolean-Feldinhalts: -->
                              <q-checkbox
                                color="grey-9"
                                :disable="!popupEditEnabled"
                                toggle-indeterminate
                                :value="props.row[col.field]"
                                dense
                              />
                            </div>
                            <!-- /booleanFieldsTypbezogen -->
                            <!-- ================================================================================================================================== -->
                            <!-- Nun Anzeige der (ersten) Spalte für die Baueigenschaftsbezeichnng steuern - dies wurde hier ursprünglich separat gehandled, -->
                            <!-- weil darauf ein Kontextmenü definiert war - dieses ist jetzt zentral oben definiert für alle Spalten - seither -->
                            <!-- wird das separate Handling für die Spalte baueigenschaftsBezeichnung eigentlich nicht mehr benötigt, sie könnte -->
                            <!-- wieder wie die übrigen textFieldsTypbezogen behandelt werden. Für zukünftige Erweiterungen, die die erste Spalte -->
                            <!-- gesondert behandeln, den Code so belassen. -->
                            <!-- ACHTUNG: Die Abfrage unten muss "col.name === 'baueigenschaftsBezeichnung' lauten, nicht "col.name = 'baueigenschaftsBezeichnung', -->
                            <!--          sonst kommen obskure Fehler "duplicate Keys detected" -->
                            <!-- ACHTUNG: Wenn dieser Code enabled ist, muss baueigenschaftsBezeichnung unten aus dem Array textFieldsTypbezogen herausgenommen werden! -->
                            <!-- ACHTUNG: Ob man in den Abfragen hier v-else-if verwendet oder v-if scheint egal zu sein!!! v-else-if dürfte performanter sein, und -->
                            <!--          korrekt, da die v-if-Abfragen exklusiv sind, daher überall v-else-if gewählt -->
                            <!-- Start originaler Code ohne Kontextmenü für textFieldsTypbezogen - auskommentiert: -->
                            <!-- {{ col.field(props.row) }} -->
                            <!-- Ende originaler Code -->
                            <!-- Start neuer Code zur Anzeige der baueigenschaftsBezeichnung - dieser ist nach Rückbau des Kontextmenüs wieder wie der originale! -->
                            <!-- -------------------------------------------------------------------------------------------------------------------------------- -->
                            <!-- ACHTUNG: Hier überall v-else-if statt v-if verwendet, da performanter und die v-ifs exklusiv sind!!! -->
                            <div
                              v-else-if="
                                col.name === 'baueigenschaftsBezeichnung'
                              "
                            >
                              <!-- Hier den Wert des Felds baueigenschaftsBezeichnung anzeigen:  -->
                              <!-- ACHTUNG: Hier Aufruf der Lambda-Funktion field() für nested Fields notwendig, siehe Erläuterungen dazu unten: -->
                              {{ col.field(props.row) }}
                              <!-- {{ props.row.typbezogeneBaueigenschaft.baueigenschaftsBezeichnung }} -->
                              <!-- Äquivalent, siehe Kommentare unten -->
                              <!-- =============================================================================================================================== -->
                              <!-- HINWEISE zum Handling von nested vs. flat Fields in QTables: -->
                              <!-- Für das nested Field typbezogeneBaueigenschaft.baueigenschaftsBezeichnung gilt: -->
                              <!-- In columnsTableBaueigenschaften unten im Skript-Teil wird dafür festgelegt, per: -->
                              <!-- field: row => row.typbezogeneBaueigenschaft.baueigenschaftsBezeichnung -->
                              <!-- field() ist dabei eine (Lambda-)Function! Sie hat als Argument das Objekt row und liefert den aktuellen Wert des Feldes zurück -->
                              <!-- col.field() erlaubt also den Zugriff auf die verschachtelten Felder auf ähnliche Art wie auf die Felder, die nicht nested sind! -->
                              <!-- ACHTUNG: Der folgende Ausdruck ist dann ein Funktionsaufruf der Funktion field() mit der aktuellen Row, -->
                              <!-- wurde so bereits weiter unten im Code so verwendet: -->
                              <!-- {{ col.field(props.row) }} -->
                              <!-- Stattdessen könnte man auch schreiben: -->
                              <!-- {{ props.row.typbezogeneBaueigenschaft.baueigenschaftsBezeichnung }} -->
                              <!-- Andere Props: -->
                              <!-- {{ props.row[col.field] }} zeigt bei normalen, nicht genesteten und nicht per Lambda-Funktion definierten Feldern den Wert dieses Feldes an -->
                              <!-- col.name === 'baueigenschaftsBezeichnung' (wird oben im v-if/v-else-if verwendet -->
                              <!-- col.value === 'Baueigenschaftsname' (Beispiel) - funktioniert nur bei nicht nested Fields!!! -->
                              <!-- =============================================================================================================================== -->
                            </div>
                            <!-- /div für Handling der Column baueigenschaftsBezeichnung -->
                            <!-- ---------------------------------------------------------------------------------------------------- -->
                            <!-- Es folgen die Columns für die Textfelder - ACHTUNG: baueigenschaftsBezeichnung wurde herausgenommen aus textFieldsTypbezogen!!! -->
                            <!-- ---------------------------------------------------------------------------------------------------- -->
                            <!-- ACHTUNG: Hier überall v-else-if statt v-if verwendet, da performanter und die v-ifs exklusiv sind!!! -->
                            <div
                              v-else-if="
                                textFieldsWertbezogen.includes(col.name)
                              "
                            >
                              {{ props.row[col.field] }}
                            </div>
                            <div
                              v-else-if="
                                textFieldsTypbezogen.includes(col.name)
                              "
                            >
                              <!-- ACHTUNG: Hier Aufruf der Lambda-Funktion field() für nested Fields notwendig, siehe Erläuterungen dazu weiter oben im Code: -->
                              {{ col.field(props.row) }}
                              <!-- ==================================================================================================================================== -->
                              <!-- ❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌ -->
                              <!-- ACHTUNG: Schwester-Code in baueinheiten.vue enthält an dieser Stelle DISABLED CODE für spezielles Handling von nested Text Fields    -->
                              <!-- Dies waren in älterer Version des Codes die Felder -->
                              <!-- typbezogeneBaueigenschaft.bauinformation.bauinformationsBezeichnung und -->
                              <!-- typbezogeneBaueigenschaft.bauinformation.bauinformationsTyp -->
                              <!-- ACHTUNG: Diese sind nur populiert, wenn die bauinformation nicht undefined oder null ist -->
                              <!-- In den Testdaten kommen aktuell beide Fälle vor!!! -->
                              <!-- Diese Fälle wurden hier im Template mit v-if-Logik abgefangen -->
                              <!-- Die Spezialbehandlung dieser beiden Felder für die Anzeige der Bauinformation ist nicht mehr notwendig, seit -->
                              <!-- diese Felder per field: row => weiter unten gegen undefined und null gesondert behandelt werden. -->
                              <!-- ❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌ -->
                            </div>
                            <!-- /textFields -->
                            <!-- Weiter geht es mit dem Handling der numerischen und der weiteren Spalten, auch hier stets mit v-else-if: -->
                            <div v-else-if="numericFields.includes(col.name)">
                              <div>
                                {{ props.row[col.name] }}
                              </div>
                            </div>
                            <!-- /numericFields -->
                            <div v-else-if="dateFields.includes(col.name)">
                              <div>
                                {{ formatDate(props.row[col.name]) }}
                              </div>
                            </div>
                            <!-- /dateFields -->
                            <div v-else-if="timeFields.includes(col.name)">
                              <div>
                                {{ formatTime(props.row[col.name]) }}
                              </div>
                            </div>
                            <!-- /timeFields -->
                            <div
                              v-else-if="
                                selectFieldsWertbezogen.includes(col.name)
                              "
                            >
                              <q-select
                                v-model="props.row[col.name]"
                                :options="optionsWertetypBaueigenschaft"
                                :value="props.row[col.field]"
                                dense
                                square
                                :multiple="true"
                                hide-bottom-space
                                class="font-size-small"
                                :disable="!popupEditEnabled"
                              />
                              <!-- HINWEISE:
                                    Leider erhöht das q-select für die Anzeige des Wertetyps leicht die Zeilenhöhe (testbar durch Ab/Anschalten der wertbezogenen Angaben)
                                    class="fonts-size-small" - macht die Options im Aufzählungswert kleiner, die Zeilenhöhe bleibt jedoch leicht erhöht im Vergleich zu Table ohne q-select
                                    Es gibt noch weitere CSS Styles, mit denen man beipielsweise den Font beeinflussen könnte- per Tests leider OHNNE Einfluss auf die Zeilenhöhe:
                                      class="height-1rem"
                                      popup-content-class="font-size-small"
                                      options-selected-class="font-size-small"
                                      options-dense
                                      input-class="font-size-small"
                                    -->
                            </div>
                            <!-- /aufzaehlungsWert-Spalte -->
                            <div
                              v-else-if="
                                selectFieldsTypbezogen.includes(col.name)
                              "
                            >
                              <q-select
                                :value="col.field(props.row)"
                                dense
                                square
                                :multiple="true"
                                hide-bottom-space
                                class="font-size-small"
                                :disable="!popupEditEnabled"
                              />
                            </div>
                            <!-- /werteTyp-Spalte -->
                          </q-td>
                        </q-tr>
                      </template>
                    </q-table>
                  </div>
                  <!-- <br /> -->
                  <!-- <div class="q-pa-xs q-gutter-xs"> -->
                  <!-- Row für Buttons auf selektierten Items in q-table: -->
                  <!-- ============= ACHTUNG: Hier q-col-gutter-xs, sonst Spillover!!! =======================-->
                  <!-- ALT: -->
                  <!-- v-if="$q.screen.gt.xs" -->
                  <div class="flex row full-width q-pa-xs q-col-gutter-xs">
                    <div class="col-md-3 col-12 text-caption">
                      Aktionen für Baueigenschaften
                      {{ displayRightArrow }}
                      <br />
                      <!-- &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -->
                      Mit
                      <q-checkbox
                        v-model="alwaysOn"
                        disable
                        dense
                        color="primary"
                      />
                      in der ersten Spalte Baueigenschaft auswählen. Alternativ
                      mit rechter Maustaste Kontextmenü aufrufen.
                      <!-- <br />&nbsp; <br /> -->
                    </div>
                    <div class="col-md-3 col-12">
                      <!-- DONE: Hier für den Button zum Bearbeiten abhängig von der Benutzerrolle unterschiedliche Labels -->
                      <!-- anzeigen (bei fehlenden Autorenrechten: "Baueigenschaft anzeigen", sonst: "Baueigenschaft bearbeiten" ) -->
                      <!-- ALT: style="width:90%" -->
                      <q-btn
                        dense
                        class="stretch full-width"
                        :label="
                          computeLabelButtonBaueigenschaftAnzeigenOderBearbeiten
                        "
                        color="secondary"
                        glossy
                        no-caps
                        :disable="nothingSelectedInTableBaueigenschaften"
                        @click="
                          changeAngezeigtesTabBaueigenschaften(
                            'auswahlTabBaueigenschaften'
                          )
                        "
                      />
                    </div>
                    <!-- ALT: style="width:90%" class="q-mr-sm" -->
                    <div class="col-md-3 col-12">
                      <q-btn
                        dense
                        class="stretch full-width"
                        :disable="
                          nothingSelectedInTableBaueigenschaften ||
                            benutzerRolleIstMitarbeiter
                        "
                        label="Baueigenschaft im Baustoffbaum löschen"
                        color="negative"
                        glossy
                        no-caps
                        @click="deleteSelectedBaueigenschaftDialog = true"
                      />
                      <!-- ALT (ohne Confirmation Dialog): @click="deleteSelectedBaueigenschaft()"-->
                      <!-- <q-separator vertical inset /> -->
                      <!-- TODO: QSeparator funktioniert nicht, evtl. mit q-toolbar probieren: https://quasar.dev/vue-components/separator -->
                    </div>
                    <!-- ALT: style="width:90%" class="q-mr-sm" -->
                    <div class="col-md-3 col-12">
                      <q-btn
                        dense
                        :disable="benutzerRolleIstMitarbeiter"
                        label="Baueigenschaft im Baustoffbaum neu anlegen"
                        class="stretch full-width"
                        glossy
                        color="green-8"
                        @click="
                          changeAngezeigtesTabBaueigenschaften(
                            'neuTabBaueigenschaften'
                          )
                        "
                        no-caps
                      ></q-btn>
                    </div>
                  </div>
                  <!-- NEU: Dialog für Confirmation des Löschens einer Baueigenschaft: -->
                  <q-dialog
                    v-if="selectedRowsTableBaueigenschaften.length > 0"
                    v-model="deleteSelectedBaueigenschaftDialog"
                  >
                    <!-- =========================================================================== -->
                    <!-- ACHTUNG: Für die Formatierung in diesem QDialog ist aktuell nur eine QCard, -->
                    <!-- kein div-Wrapper und kein QForm erforderlich!                               -->
                    <!-- =========================================================================== -->
                    <q-card>
                      <q-card-section>
                        <div class="row full-width q-pa-xs">
                          <q-avatar
                            icon="warning"
                            color="negative"
                            text-color="white"
                            style="margin-left: auto;margin-right: auto;"
                          />
                        </div>
                        <!-- ------------------------------------------------------------------------------------------------ -->
                        <!-- HINWEIS: style="margin-left: auto;margin-right: auto;" am q-avatar in Verbindung mit div-Wrapper -->
                        <!--          für Centering des Avatars, siehe                                                        -->
                        <!--          https://forum.quasar-framework.org/topic/6109/align-to-center-within-grid-column/3      -->
                        <!-- ------------------------------------------------------------------------------------------------ -->
                        <div class="row full-width q-pt-md">
                          <span class="q-pa-none">
                            Soll die Baueigenschaft
                            <b
                              >"{{
                                selectedRowsTableBaueigenschaften[0]
                                  .typbezogeneBaueigenschaft
                                  .baueigenschaftsBezeichnung
                              }}"</b
                            >
                            wirklich gelöscht werden?
                          </span>
                        </div>
                      </q-card-section>
                      <!-- ALT: -->
                      <!-- <q-card-actions align="right"> -->
                      <!-- NEU: Buttons, die sich stretchen - erfordert Wrapper-div -->
                      <q-card-actions>
                        <div class="row full-width q-col-gutter-xs q-pa-xs">
                          <div class="col-6">
                            <q-btn
                              class="stretch full-width"
                              style="height: 100%"
                              glossy
                              label="Abbrechen"
                              color="positive"
                              no-caps
                              v-close-popup
                            />
                          </div>
                          <div class="col-6">
                            <!-- NEU - #395: Delete der wertbezogenen BEg erfolgt nur im Baustoffbaum -->
                            <!-- Dies wird über Parameter-Default wertBezogeneBaueigenschaftenLoeschenInBaumTyp = "Baustoffbaum" gesteuert -->
                            <q-btn
                              class="stretch full-width"
                              style="height: 100%"
                              glossy
                              label="Löschen"
                              color="negative"
                              @click="deleteSelectedBaueigenschaft()"
                              v-close-popup
                              no-caps
                            />
                          </div>
                        </div>
                        <!-- ACHTUNG: Bei @click="method()" unbedingt "()"" hinter "method" angeben, sonst passiert gar nichts!!! -->
                        <!-- ANDERERSEITS: @click="handleClick" und @click="handleClick()" sind äquivalent laut https://flaviocopes.com/vue-events/ -->
                      </q-card-actions>
                    </q-card>
                  </q-dialog>
                </q-tab-panel>
                <!-- ---------------------------------------------------------------------------------------------------------------------------- -->
                <q-tab-panel class="q-pa-xs" name="auswahlTabBaueigenschaften">
                  <div v-if="localStore.state.debugMode">
                    ausgewaehlteBaueigenschaft:
                    {{ ausgewaehlteBaueigenschaft }}
                    <br />
                    <!-- lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"} -->
                    lazy: {{ $refs.treeBaustoffe.lazy }}
                    <q-separator />
                    <br />
                  </div>
                  <q-form class="q-pa-none" v-if="ausgewaehlteBaueigenschaft">
                    <!-- ALT: style="min-width: 1000px" -->
                    <!-- ACHTUNG: Dieses div mit style="min-width:" ist unbedingt notwendig hinter dem q-form, um dessen Größe zu definieren!!! -->
                    <!-- Sonst macht es sich automatisch klein!!! -->
                    <!-- *** =================================================================================================================== -->
                    <!-- HINWEIS: Der folgende Code war temporär inaktiviert per v-if="false" (bis ca. Zeile 2500+ ) -->
                    <!--          War ersetzt durch Kindkomponente BaueigenschaftBearbeitung (baustoffe-baueigenschaft-bearbeitung.vue) -->
                    <!--          Diese jedoch wieder entfernt und den Inline Code reaktiviert, da die Komponente nur einmal aufgerufen wurde -->
                    <!-- ----------------------------------------------------------------------------------------------------------------------- -->
                    <!-- DONE: Folgenden Code disabled, weil die Kindkomponente hier entfernt wurde: -->
                    <!--
                      <div v-if="localStore.state.debugMode">
                        Komponente BaustoffeBaueigenschaftBearbeitung:
                        <p>
                          Prop
                          selectModelBauinformationAusgewaehlteBaueigenschaft:
                          {{ dataSelectModelBauinformation }}
                          {{ dataAusgewaehlteBauinformation }}
                        </p>
                        <p>
                          Prop (Kopie) ausgewaehlteBaueigenschaft:
                          {{ ausgewaehlteBaueigenschaft }}
                        </p>
                      </div>
                      -->
                    <div v-if="localStore.state.debugMode">
                      TODO: Ermögliche variablen MessageText im global-Store:
                      Folgende Baustoffe müssen aktiviert werden:
                      {{
                        hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
                      }}
                    </div>
                    <div class="q-pb-sm text-h6" v-if="$q.screen.gt.sm">
                      Details zur ausgewählten Baueigenschaft
                      <strong
                        >"{{
                          ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft
                            .baueigenschaftsBezeichnung
                        }}"</strong
                      >
                    </div>
                    <div class="q-pb-sm text-subtitle1" v-else>
                      Details zur ausgewählten Baueigenschaft
                      <strong
                        >"{{
                          ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft
                            .baueigenschaftsBezeichnung
                        }}"</strong
                      >
                    </div>
                    <div
                      class="row full-width items-start q-pa-xs q-col-gutter-xs inset-shadow"
                    >
                      <!-- ACHTUNG: Hier q-col-gutter-xs, nicht q-gutter-xs, sonst wird die letzte Column gewrapped!!! -->
                      <div class="col-md-3 col-12">
                        <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst Layout der Spalte nicht dense!!! -->
                        <div>
                          <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                          <b
                            >Typbezogene Angaben zur Baueigenschaft (systemweit
                            gültig)</b
                          >
                        </div>
                        <br />
                        <div>
                          <b>Festlegung der Bezeichnung der Baueigenschaft</b>
                        </div>
                        <div class="q-col-gutter-xs">
                          <!-- Erstes q-input hat Testcode zur Nutzung von rules: -->
                          <!-- TODO XXXXXX: QInput ist aktuell disabled, daher kein Renaming möglich der Baueigenschaft -->
                          <!-- NEU: QInput disablen in Abhängigkeit von Benutzerrolle -->
                          <q-input
                            :disable="true || benutzerRolleIstMitarbeiter"
                            square
                            bg-color="teal-2"
                            standout="bg-teal-4 text-black"
                            dense
                            v-model="
                              ausgewaehlteBaueigenschaft
                                .typbezogeneBaueigenschaft
                                .baueigenschaftsBezeichnung
                            "
                            lazy-rules
                            :rules="[
                              v => !!v || 'Bezeichnung ist erforderlich',
                              v =>
                                (v && v.length <= 200) ||
                                'Bezeichnung darf höchstens 200 Zeichen lang sein'
                            ]"
                            label="Bezeichnung"
                            hint="Eindeutige Bezeichnung für die Baueigenschaft"
                            hide-hint
                          />
                        </div>
                        <br />
                        <!-- ACHTUNG: Dieses <br /> sorgt für gleichmäßge vertikale Ausrichtung der Eingabefelder auf dieser Maske!!! -->
                        <q-separator />
                        <div>
                          <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                          <b>Weitere typbezogene Angaben zur Baueigenschaft</b>
                        </div>
                        <!-- <br /> -->
                        <!-- ================================================================================================= -->
                        <!-- ACHTUNG: Die beiden folgenden divs sind unbedingt notwendig, sonst funktioniert Layout NICHT!!! -->
                        <div class="col-md-3 col-12">
                          <div class="q-col-gutter-xs">
                            <!-- ============================================================================================= -->
                            <!-- NEU: QInputs disablen in Abhängigkeit von Benutzerrolle -->
                            <!-- NEU: #514/515 - q-input-Feld für baueigenschaftsAnzeigeText -->
                            <q-input
                              :disable="benutzerRolleIstMitarbeiter"
                              square
                              bg-color="teal-2"
                              standout="bg-teal-4 text-black"
                              dense
                              v-model="
                                ausgewaehlteBaueigenschaft
                                  .typbezogeneBaueigenschaft
                                  .baueigenschaftsAnzeigeText
                              "
                              label="Anzeigetext"
                              hint="Anzeigetext für die Baueigenschaft, z.B. 'Schallschutzklasse'"
                              hide-hint
                            />
                            <!-- ============================================================================================= -->
                            <!-- NEU: QInputs disablen in Abhängigkeit von Benutzerrolle -->
                            <q-input
                              :disable="benutzerRolleIstMitarbeiter"
                              square
                              bg-color="teal-2"
                              standout="bg-teal-4 text-black"
                              dense
                              v-model="
                                ausgewaehlteBaueigenschaft
                                  .typbezogeneBaueigenschaft
                                  .baueigenschaftsBemerkung
                              "
                              label="Bemerkung"
                              hint="Bemerkung für die Baueigenschaft, z.B. 'Neu angelegt für Türen'"
                              hide-hint
                              autogrow
                            />
                          </div>
                          <!-- Kindkomponente zur Auswahl der Referenz auf eine Bauinformation für die Baueigenschaft -->
                          <!-- ALT: Separate Komponente - disabled -->
                          <!--
                                    <BauinformationAuswahl
                                      :selectModelBauinformationAusgewaehlteBaueigenschaft="
                                        ausgewaehlteBaueigenschaft
                                          .typbezogeneBaueigenschaft
                                          .bauinformation
                                      "
                                      :selectOptionsBauinformationenAusgewaehlteBaueigenschaft="
                                        selectOptionsBauinformationenAusgewaehlteBaueigenschaft
                                      "
                                      @selectValueChange="
                                        selectHandlerBauinformationAusgewaehlteBaueigenschaft(
                                          $event
                                        )
                                      "
                                    />
                                    -->
                          <!-- NEU: Inline Code wie im Tab "Neu": -->
                          <div>
                            <q-badge
                              v-if="localStore.state.debugMode"
                              color="secondary"
                              multi-line
                            >
                              selectModelBauinformationAusgewaehlteBaueigenschaft:
                              <br />
                              {{
                                selectModelBauinformationAusgewaehlteBaueigenschaft
                              }}
                            </q-badge>
                            <!-- NEU: QSelect disablen in Abhängigkeit von Benutzerrolle -->
                            <q-select
                              dense
                              :disable="benutzerRolleIstMitarbeiter"
                              square
                              bg-color="teal-2"
                              standout="bg-teal-4 text-black"
                              input-class="text-white"
                              filled
                              v-model="
                                selectModelBauinformationAusgewaehlteBaueigenschaft
                              "
                              :options="
                                selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft
                              "
                              option-value="bauinformationsBezeichnung"
                              :multiple="false"
                              label="Zugeordnete Bauinformation auswählen/abwählen"
                              stack-label
                              use-chips
                              options-selected-class="text-primary"
                              options-dense
                              use-input
                              input-debounce="0"
                              @new-value="
                                createSelectValueBauinformationenAusgewaehlteBaueigenschaft
                              "
                              @filter="
                                selectFilterFunctionBauinformationenAusgewaehlteBaueigenschaft
                              "
                              bottom-slots
                              @focus="
                                showHintSelectBauinformationenAusgewaehlteBaueigenschaft = true
                              "
                              @blur="
                                showHintSelectBauinformationenAusgewaehlteBaueigenschaft = false
                              "
                            >
                              <!-- TODO: style="width: 720px" -->
                              <!-- Zu den Icons siehe https://quasar.dev/vue-components/select#Decorators - erfordert "bottom-slots" Prop am q-select  -->
                              <template v-slot:append>
                                <q-icon name="search" @click.stop />
                                <!-- Statt "clearable" Prop am q-select expliziter Cancel-Icon - erlaubt es, dessen Color zu setzen -->
                                <!-- Vorlage: https://quasar.dev/vue-components/select#Clearable -->
                                <!-- ALT: Am folgenden template v-if="selectModelBauinformationAusgewaehlteBaueigenschaft" -->
                                <!-- ACHTUNG: Da selectModelBauinformationAusgewaehlteBaueigenschaft ein Objekt, kein Array ist, -->
                                <!-- muss es auf null oder {} resetted werden, nicht auf [] -->
                                <q-icon
                                  name="cancel"
                                  @click.stop="
                                    selectModelBauinformationAusgewaehlteBaueigenschaft = null
                                  "
                                  class="cursor-pointer"
                                  color="primary"
                                />
                              </template>
                              <template
                                v-slot:hint
                                v-if="
                                  showHintSelectBauinformationenAusgewaehlteBaueigenschaft
                                "
                              >
                                <ul class="q-pl-xs">
                                  <li>
                                    <strong>Filtern:</strong> Eine
                                    Bauinformationsbezeichnung (z.B. "Norm > DIN
                                    > EN > 13164") oder einen
                                    Bauinformationsanzeigetext (z.B.
                                    "Datenblatt") als Filtertext in das
                                    Eingabefeld eingeben. Auch unvollständige
                                    Angaben (z.B. "Datenbl") sind möglich. Dies
                                    filtert die im Dropdown-Menü angezeigten
                                    Optionen.
                                  </li>
                                  <li>
                                    <strong>Auswählen:</strong> Eine der
                                    ausgewählten Baueigenschaft zugeordnete
                                    Bauinformation im Dropdown-Menü auswählen.
                                  </li>
                                  <li>
                                    <strong>Abwählen:</strong> Die ausgewählte
                                    Bauinformation kann mit
                                    <q-icon
                                      name="cancel"
                                      color="primary"
                                    />&nbsp;abgewählt werden.
                                  </li>
                                  <li>
                                    <strong>Speichern:</strong> Unten
                                    Schaltfläche "Speichern" drücken.
                                  </li>
                                </ul>
                                <!-- <br /> <br /> <br /> -->
                                <!-- TODO: Um vertikalen Scrollbalken zu verhindern, funktioniert nicht -->
                              </template>
                              <template v-slot:selected-item="scope">
                                <q-chip
                                  removable
                                  dense
                                  @remove="scope.removeAtIndex(scope.index)"
                                  :tabindex="scope.tabindex"
                                  color="primary"
                                  text-color="white"
                                  class="q-ma-xs shadow-4"
                                >
                                  <!-- ALT: -->
                                  <!-- {{ scope.opt.bauinformationsBezeichnung }} -->
                                  <!-- NEU: Long Label Truncation, mit Tooltip der vollen Bezeichnung, mittels spezieller CSS Class "ellipsis": -->
                                  <!-- Damit Truncation für lange Texte an QChip - Vorlage: https://quasar.dev/vue-components/chip#Example--Long-label-truncation -->
                                  <div class="ellipsis">
                                    {{ scope.opt.bauinformationsBezeichnung }}
                                    <q-tooltip
                                      :delay="1000"
                                      :offset="[0, 10]"
                                      max-width="500px"
                                      content-class="bg-secondary text-white text-caption shadow-4"
                                      >{{
                                        scope.opt.bauinformationsBezeichnung
                                      }}</q-tooltip
                                    >
                                  </div>
                                  <!-- <q-avatar color="secondary" text-color="white" :icon="scope.opt.icon" /> -->
                                  <!-- scope.opt.bauinformationsBezeichnung -->
                                </q-chip>
                              </template>
                              <template v-slot:option="scope">
                                <q-item
                                  v-bind="scope.itemProps"
                                  v-on="scope.itemEvents"
                                >
                                  <q-item-section>
                                    <q-item-label
                                      v-html="
                                        scope.opt.bauinformationsBezeichnung
                                      "
                                    />
                                    <!-- NEU: Hier bauinformationsAnzeigeText statt bauinformationsTyp anzeigen: -->
                                    <q-item-label caption>{{
                                      scope.opt.bauinformationsAnzeigeText
                                    }}</q-item-label>
                                  </q-item-section>
                                </q-item>
                              </template>
                            </q-select>
                          </div>
                          <!-- /q-select für Referenz auf Bauinformation -->
                          <!-- Platz für Hint schaffen: -->
                          <br />
                          <br />
                          <br />
                          <br />
                          <br />
                          <!-- =================================================================== -->
                          <!-- NEU: #514/515: -->
                          <div class="row q-col-gutter-xs inset-shadow">
                            <b>Typbezogene Merkmale der Baueigenschaft</b>
                          </div>
                          <!-- ------------------------------------------------------------------- -->
                          <div class="text-caption">
                            <div class="row full-width q-pa-xs">
                              <div class="col-md-6 col-12">
                                <q-toggle
                                  :disable="benutzerRolleIstMitarbeiter"
                                  dense
                                  v-model="
                                    ausgewaehlteBaueigenschaft
                                      .typbezogeneBaueigenschaft
                                      .systemdefiniertNichtBenutzerdefiniert
                                  "
                                  label="Ist im System vordefiniert, nicht benutzerdefiniert"
                                />
                              </div>
                              <div class="col-md-6 col-12">
                                <q-toggle
                                  :disable="benutzerRolleIstMitarbeiter"
                                  dense
                                  v-model="
                                    ausgewaehlteBaueigenschaft
                                      .typbezogeneBaueigenschaft
                                      .sollwertNichtIstwert
                                  "
                                  label="Definiert Sollwerte, nicht Istwerte"
                                />
                              </div>
                            </div>
                          </div>
                          <!-- =================================================================== -->
                          <!-- ALT - ohne QExpansionItem: -->
                          <!--
                          <div class="row q-col-gutter-xs inset-shadow">
                            <b
                              >Zuordnung der Baueigenschaft zu
                              fachlichen Rubriken</b
                            >
                          </div>
                          -->
                          <!-- ------------------------- -->
                          <!-- NEU - mit QExpansionItem: -->
                          <br />
                          <q-expansion-item
                            expand-separator
                            :default-opened="false"
                            dense
                            header-class="bg-white text-bold inset-shadow q-gutter-xs"
                            label="Zuordnung zu fachlichen Kategorien und Rubriken"
                          >
                            <!-- -------------------------------------------------------------------------------------- -->
                            <div class="text-caption">
                              <!-- NEU - #401: -->
                              <!--
                              ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                          .fachlicheKategorien:
                              {{
                                ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                          .fachlicheKategorien
                              }}
                              -->
                              <div
                                class="row full-width q-pa-xs"
                                v-for="kategorie in optionsFachlicheKategorienBaueigenschaften"
                                :key="kategorie.ueberschriftKategorie"
                              >
                                <div class="col-5">
                                  <b
                                    >{{ kategorie.ueberschriftKategorie }}
                                  </b>
                                </div>
                                <div class="col-7">
                                  <q-option-group
                                    type="checkbox"
                                    :disable="
                                      benutzerRolleIstMitarbeiter
                                    "
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .fachlicheKategorien
                                    "
                                    :options="kategorie.optionsKategorie"
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    square
                                    dense
                                  >
                                  </q-option-group>
                                </div>
                                <q-separator class="row full-width" />
                              </div>
                            </div>
                            <!-- -------------------------------------------------------------------------------------- -->
                            <!-- #401 - alte Schutzkategorien (ersetzt durch neue fachliche Kategorien/Rubriken), disabled: -->
                            <!--
                            <div class="text-caption">
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .projektManagement
                                    "
                                    label="Projektmanagement"
                                  />
                                </div>
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.recht
                                    "
                                    label="Recht"
                                  />
                                </div>
                              </div>
                              <q-separator />
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.geografie
                                    "
                                    label="Geografie"
                                  />
                                </div>
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.geoPolitik
                                    "
                                    label="Geopolitik"
                                  />
                                </div>
                              </div>
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.infrastruktur
                                    "
                                    label="Infrastruktur"
                                  />
                                </div>
                              </div>
                              <q-separator />
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .umweltUndKlima
                                    "
                                    label="Umwelt und Klima"
                                  />
                                </div>
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.hydroGeologie
                                    "
                                    label="Hydrogeologie"
                                  />
                                </div>
                              </div>
                              <q-separator />
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.geometrie
                                    "
                                    label="Geometrie"
                                  />
                                </div>
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.konstruktion
                                    "
                                    label="Konstruktion"
                                  />
                                </div>
                              </div>
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.lastAnnahmen
                                    "
                                    label="Lastannahmen"
                                  />
                                </div>
                              </div>
                              <q-separator />
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .nutzungsUndBetriebsZeiten
                                    "
                                    label="Nutzungs- und Betriebszeiten"
                                  />
                                </div>
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.raumKlima
                                    "
                                    label="Raumklima"
                                  />
                                </div>
                              </div>
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.beleuchtung
                                    "
                                    label="Beleuchtung"
                                  />
                                </div>
                              </div>
                              <q-separator />
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.schallSchutz
                                    "
                                    label="Schallschutz"
                                  />
                                </div>
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.raumAkustik
                                    "
                                    label="Raumakustik"
                                  />
                                </div>
                              </div>
                              <q-separator />
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.wärmeSchutz
                                    "
                                    label="Wärmeschutz"
                                  />
                                </div>
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .energieEinsparung
                                    "
                                    label="Energieeinsparung"
                                  />
                                </div>
                              </div>
                              <q-separator />
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .standSicherheit
                                    "
                                    label="Standsicherheit"
                                  />
                                </div>
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .gebrauchsTauglichkeit
                                    "
                                    label="Gebrauchstauglichkeit"
                                  />
                                </div>
                              </div>
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .verkehrsSicherheit
                                    "
                                    label="Verkehrssicherheit"
                                  />
                                </div>
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .barriereFreiheit
                                    "
                                    label="Barrierefreiheit"
                                  />
                                </div>
                              </div>
                              <q-separator />
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.brandSchutz
                                    "
                                    label="Brandschutz"
                                  />
                                </div>
                              </div>
                              <q-separator />
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.feuchteSchutz
                                    "
                                    label="Feuchteschutz"
                                  />
                                </div>
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .korrosionsSchutz
                                    "
                                    label="Korrosionsschutz"
                                  />
                                </div>
                              </div>
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .abdichtungsTechnik
                                    "
                                    label="Abdichtungstechnik"
                                  />
                                </div>
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .chemischerHolzSchutz
                                    "
                                    label="Holzschutz"
                                  />
                                </div>
                              </div>
                              <q-separator />
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .gesundheitUndHygiene
                                    "
                                    label="Gesundheit und Hygiene"
                                  />
                                </div>
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .schadstoffSchutz
                                    "
                                    label="Schadstoffschutz"
                                  />
                                </div>
                              </div>
                              <q-separator />
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .umweltVerträglichkeit
                                    "
                                    label="Umweltverträglichkeit"
                                  />
                                </div>
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.ökoBilanz
                                    "
                                    label="Ökobilanz"
                                  />
                                </div>
                              </div>
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .nachhaltigkeit
                                    "
                                    label="Nachhaltigkeit"
                                  />
                                </div>
                              </div>
                              <q-separator />
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .materialEigenschaften
                                    "
                                    label="Materialeigenschaften"
                                  />
                                </div>
                              </div>
                              <q-separator />
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft.sonstiges
                                    "
                                    label="Sonstiges"
                                  />
                                </div>
                              </div>
                              <q-separator />
                              <div class="row full-width q-pa-xs">
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .baueigenschaftsProfile
                                    "
                                    label="Baueigenschaftsprofile"
                                  />
                                </div>
                                <div class="col-6">
                                  <q-toggle
                                    :disable="benutzerRolleIstMitarbeiter"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft
                                        .typbezogeneBaueigenschaft
                                        .bauinformationsProfile
                                    "
                                    label="Bauinformationsprofile"
                                  />
                                </div>
                              </div>
                              <q-separator />
                            </div>
                            -->
                          </q-expansion-item>
                        </div>
                      </div>
                      <!-- =================================================================== -->
                      <div class="col-md-3 col-12">
                        <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst Layout der Spalte nicht dense!!! -->
                        <div>
                          <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                          <b
                            >Angaben zum Wertetyp der Baueigenschaft (systemweit
                            gültig)</b
                          >
                        </div>
                        <br />
                        <b>Festlegung des Wertetyps</b>
                        <div class="q-col-gutter-xs">
                          <!-- NEU: QSelect disablen in Abhängigkeit von Benutzerrolle -->
                          <!-- QSelect ist aktuell sowieso ganz disabled, d.h. keine Änderung des Wertetyps möglich -->
                          <q-select
                            :disable="true || benutzerRolleIstMitarbeiter"
                            square
                            bg-color="teal-2"
                            standout="bg-teal-4 text-black"
                            input-class="text-white"
                            dense
                            v-model="
                              ausgewaehlteBaueigenschaft
                                .typbezogeneBaueigenschaft.werteTyp
                            "
                            label="Wertetyp"
                            hint="Auszuwählender Typ für die Werte der Eigenschaft, z.B. 'Datumswert'"
                            hide-hint
                            :options="optionsWertetypBaueigenschaft"
                            options-dense
                          />
                        </div>
                        <br />
                        <!-- ACHTUNG: Dieses <br /> sorgt für gleichmäßge vertikale Ausrichtung der Eingabefelder auf dieser Maske!!! -->
                        <q-separator />
                        <div>
                          <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                          <b> Angaben zum Wertetyp 'Kennwert/Kennwertepaar'</b>
                        </div>
                        <!-- <br /> -->
                        <!-- ========================================================================================================================= -->
                        <!-- NEU: Hier Markdown Enablement für Felder symbol, einheit, operator, formel: -->
                        <div class="q-col-gutter-xs">
                          <!-- NEU: QInput disablen in Abhängigkeit von Benutzerrolle -->
                          <q-input
                            :disable="
                              disabledFieldsAusgewaehlteBaueigenschaft.symbol ||
                                benutzerRolleIstMitarbeiter
                            "
                            square
                            bg-color="teal-2"
                            standout="bg-teal-4 text-black"
                            dense
                            v-model="
                              ausgewaehlteBaueigenschaft
                                .typbezogeneBaueigenschaft.symbol
                            "
                            label="Symbol (Markdown-Format)"
                            hint="Symbol, z.B. 'λ'"
                            hide-hint
                          />
                        </div>
                        <div class="row full-width q-col-gutter-xs">
                          <br />
                          <div class="col-4">
                            <small>Formatiertes Symbol:</small>
                          </div>
                          <div class="col-8">
                            <q-markdown
                              :src="
                                ausgewaehlteBaueigenschaft
                                  .typbezogeneBaueigenschaft.symbol
                              "
                              :no-blockquote="true"
                              :no-abbreviation="true"
                              :no-breaks="true"
                              :no-container="true"
                              :no-deflist="true"
                              :no-footnote="true"
                              :no-highlight="true"
                              :no-image="true"
                              :no-insert="true"
                              :no-line-numbers="true"
                              :no-link="true"
                              :no-linkify="true"
                              :no-tasklist="true"
                              :no-typographer="true"
                            ></q-markdown>
                          </div>
                        </div>
                        <br />
                        <div class="q-col-gutter-xs">
                          <!-- NEU: QInput disablen in Abhängigkeit von Benutzerrolle -->
                          <q-input
                            :disable="
                              disabledFieldsAusgewaehlteBaueigenschaft.einheit ||
                                benutzerRolleIstMitarbeiter
                            "
                            square
                            bg-color="teal-2"
                            standout="bg-teal-4 text-black"
                            dense
                            v-model="
                              ausgewaehlteBaueigenschaft
                                .typbezogeneBaueigenschaft.einheit
                            "
                            label="Einheit (Markdown-Format)"
                            hint="Einheit, z.B. 'W/(mK)'"
                            hide-hint
                          />
                        </div>
                        <div class="row full-width q-col-gutter-xs">
                          <br />
                          <div class="col-4">
                            <small>Formatierte Einheit:</small>
                          </div>
                          <div class="col-8">
                            <q-markdown
                              :src="
                                ausgewaehlteBaueigenschaft
                                  .typbezogeneBaueigenschaft.einheit
                              "
                              :no-blockquote="true"
                              :no-abbreviation="true"
                              :no-breaks="true"
                              :no-container="true"
                              :no-deflist="true"
                              :no-footnote="true"
                              :no-highlight="true"
                              :no-image="true"
                              :no-insert="true"
                              :no-line-numbers="true"
                              :no-link="true"
                              :no-linkify="true"
                              :no-tasklist="true"
                              :no-typographer="true"
                            ></q-markdown>
                          </div>
                        </div>
                        <br />
                        <!-- NEU: QInput disablen in Abhängigkeit von Benutzerrolle -->
                        <!-- --------------------------------------------------------------------------------------- -->
                        <!-- NEU: #514, Operator in typbezogenen Feldern wird nicht mehr unterstützt, daher disabled -->
                        <!--
                        <div class="q-col-gutter-xs">
                          <q-input
                            :disable="
                              disabledFieldsAusgewaehlteBaueigenschaft.operator ||
                                benutzerRolleIstMitarbeiter
                            "
                            square
                            bg-color="teal-2"
                            standout="bg-teal-4 text-black"
                            dense
                            v-model="
                              ausgewaehlteBaueigenschaft
                                .typbezogeneBaueigenschaft.operator
                            "
                            label="Operator (Markdown-Format)"
                            hint="Operator, z.B. '<' oder '≤'"
                            hide-hint
                          />
                        </div>
                        <div class="row full-width q-col-gutter-xs">
                          <br />
                          <div class="col-4">
                            <small>Formatierter Operator:</small>
                          </div>
                          <div class="col-8">
                            <q-markdown
                              :src="
                                ausgewaehlteBaueigenschaft
                                  .typbezogeneBaueigenschaft.operator
                              "
                              :no-blockquote="true"
                              :no-abbreviation="true"
                              :no-breaks="true"
                              :no-container="true"
                              :no-deflist="true"
                              :no-footnote="true"
                              :no-highlight="true"
                              :no-image="true"
                              :no-insert="true"
                              :no-line-numbers="true"
                              :no-link="true"
                              :no-linkify="true"
                              :no-tasklist="true"
                              :no-typographer="true"
                            ></q-markdown>
                          </div>
                        </div>
                        <br />
                        -->
                        <!-- --------------------------------------------------------------------------------------- -->
                        <div class="q-col-gutter-xs">
                          <!-- NEU: QInput disablen in Abhängigkeit von Benutzerrolle -->
                          <q-input
                            :disable="
                              disabledFieldsAusgewaehlteBaueigenschaft.formel ||
                                benutzerRolleIstMitarbeiter
                            "
                            autogrow
                            square
                            bg-color="teal-2"
                            standout="bg-teal-4 text-black"
                            dense
                            v-model="
                              ausgewaehlteBaueigenschaft
                                .typbezogeneBaueigenschaft.formel
                            "
                            label="Formel (Markdown-Format)"
                            :hint="hintFuerFormelMitSonderzeichen"
                            hide-hint
                          />
                        </div>
                        <div class="row full-width q-col-gutter-xs">
                          <br />
                          <div class="col-4">
                            <small>Formatierte Formel:</small>
                          </div>
                          <div class="col-8">
                            <q-markdown
                              :src="
                                ausgewaehlteBaueigenschaft
                                  .typbezogeneBaueigenschaft.formel
                              "
                              :no-blockquote="true"
                              :no-abbreviation="true"
                              :no-breaks="true"
                              :no-container="true"
                              :no-deflist="true"
                              :no-footnote="true"
                              :no-highlight="true"
                              :no-image="true"
                              :no-insert="true"
                              :no-line-numbers="true"
                              :no-link="true"
                              :no-linkify="true"
                              :no-tasklist="true"
                              :no-typographer="true"
                            ></q-markdown>
                          </div>
                        </div>
                        <br />
                        <!-- NEU: q-select zur Auswahl von Sonderzeichen -->
                        <b
                          >Sonderzeichen im Markdown-Format in obige Felder
                          einfügen:</b
                        >
                        <div class="text-caption">
                          Im folgenden Dropdown-Menü ein Sonderzeichen
                          auswählen. Dabei wird dessen-Formatierung in die
                          Zwischenablage kopiert. Diese mit Strg+V an der
                          gewünschten Cursorposition in obige Felder einfügen.
                        </div>
                        <!-- NEU: QSelect disablen in Abhängigkeit von Benutzerrolle -->
                        <q-select
                          dense
                          :disable="
                            disabledFieldsAusgewaehlteBaueigenschaft.sonderzeichen ||
                              benutzerRolleIstMitarbeiter
                          "
                          square
                          bg-color="teal-2"
                          standout="bg-teal-4 text-black"
                          input-class="text-white"
                          filled
                          options-dense
                          :multiple="false"
                          v-model="
                            selectModelSonderzeichenAusgewaehlteBaueigenschaft
                          "
                          :options="selectOptionsSonderzeichen"
                          stack-label
                          label="Sonderzeichen - per Dropdown-Menü (rechts) auswählen"
                          :display-value="
                            `${
                              selectModelSonderzeichenAusgewaehlteBaueigenschaft
                                ? selectModelSonderzeichenAusgewaehlteBaueigenschaft.label
                                : 'Kein Sonderzeichen ausgewählt'
                            }`
                          "
                          :display-value-sanitize="false"
                          @input="
                            copyToClipboardSonderzeichenAusgewaehlteBaueigenschaft(
                              selectModelSonderzeichenAusgewaehlteBaueigenschaft.value
                            )
                          "
                        >
                          <template v-slot:append>
                            <q-icon
                              v-if="
                                selectModelSonderzeichenAusgewaehlteBaueigenschaft !=
                                  null
                              "
                              class="cursor-pointer"
                              name="clear"
                              @click.stop="
                                selectModelSonderzeichenAusgewaehlteBaueigenschaft = null
                              "
                            ></q-icon>
                          </template>
                        </q-select>
                        <!-- Selbstgemachter Hint unter dem q-select: -->
                        <div
                          v-if="
                            copyToClipboardDoneSonderzeichenAusgewaehlteBaueigenschaft
                          "
                          class="text-caption"
                        >
                          Die Formatierung für das ausgewählte Sonderzeichen mit
                          Strg+V an der gewünschten Position in obige
                          Markdown-Felder einfügen
                        </div>
                        <!-- Ende neuer Code für symbol, einheit, operator, formel als Markdown -->
                        <!-- ========================================================================================================================= -->
                        <div>
                          <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                          <br />
                          <br />
                          <b>Angaben zum Wertetyp 'Aufzählungswert'</b>
                          <br />
                          <div class="text-caption">
                            Reserviert für die Definition der selektierbaren
                            Optionen für den Wertetyp 'Aufzählungswert' (TBD)
                          </div>
                        </div>
                      </div>
                      <!-- /col, 2. Spalte -->
                      <!-- 3. Spalte: -->
                      <div class="col-md-6 col-12">
                        <!-- NEU: Code nur noch mit q-radios für aktiviert/deaktiviert - aktiviert bedeutet "im Pfad aktiviert" -->
                        <div class="row q-col-gutter-xs inset-shadow-3 q-pb-md">
                          <b
                            >Aktivierungszustand der Baueigenschaft am
                            ausgewählten Baustoff im Baustoffbaum</b
                          >
                          <div class="col-6">
                            <!-- @input="handleAktivierung(true)" -->
                            <!-- NEU: QRadio disablen in Abhängigkeit von Benutzerrolle -->
                            <q-radio
                              :disable="benutzerRolleIstMitarbeiter"
                              color="accent"
                              class="text-accent"
                              dense
                              v-model="
                                ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert
                              "
                              :val="true"
                              label="Aktiviert (am ausgewählten Baustoff sowie an allen Elternbaustoffen bis zum Wurzelbaustoff)"
                              @input="handleAktivierung(true)"
                            />
                          </div>
                          <div class="col-6">
                            <!-- @input="handleAktivierung(false)" -->
                            <!-- NEU: QRadio disablen in Abhängigkeit von Benutzerrolle -->
                            <q-radio
                              :disable="benutzerRolleIstMitarbeiter"
                              dense
                              color="primary"
                              v-model="
                                ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert
                              "
                              :val="false"
                              label="Deaktiviert (am ausgewählten Baustoff sowie an allen Kindbaustoffen im Baustoffbaum)"
                              @input="handleAktivierung(false)"
                            />
                          </div>
                          <!-- Die folgenden divs sind notwendig, um Abstand zwischen den q-radios für Aktivierungszustand und den Zeilen darunter zu bekommen, -->
                          <!-- insbesondere wenn die Fensterbreite schmal ist - sonst ragt der Label-Text an den q-radios in die Zeilen darunter -->
                          <!--
                            <div class="row">
                            <br />
                          </div>
                          -->
                        </div>
                        <!-- ALT: Alter Code für q-radios mit deaktiviert/lokal aktiviert/im Pfad aktiviert/aktiverbar - disabled -->
                        <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst Layout der Spalte nicht dense!!! -->
                        <!-- Nun zuerst eine Row durchgehend für Aktvierungsmerkmale -->
                        <!--
                        <div class="row full-width q-col-gutter-xs inset-shadow-3">
                          <b
                            >Aktivierungsmerkmale der Baueigenschaft am ausgewählten Baustoff
                            im Baustoffbaum</b
                          >
                          <div class="row q-col-gutter-xs">
                            <div class="col-6 q-col-gutter-xs">
                              <div class="row q-col-gutter-xs">
                        -->
                        <!-- ACHTUNG: Die Änderungen von ausgewwaehlteBaueigenschaft.aktiviertNichtDeaktiviert müssen hier invertiert erfolgen, -->
                        <!-- weil handleAKtivierung es so erwartet!!! -->
                        <!--
                        <q-radio
                          dense
                          color="primary"
                          v-model="aktivierungsMerkmaleAusgewaehlteBaueigenschaft"
                          val="deaktiviert"
                          @input="handleAktivierung(false)"
                          label="Deaktiviert"
                        />
                        -->
                        <!--
                        </div>
                        <div class="row q-col-gutter-xs">
                        -->
                        <!-- ACHTUNG: Die Änderungen von ausgewwaehlteBaueigenschaft.aktiviertNichtDeaktiviert müssen hier invertiert erfolgen, -->
                        <!-- weil handleAKtivierung es so erwartet!!! -->
                        <!--
                        <q-radio
                          dense
                          color="accent"
                          class="text-accent"
                          v-model="aktivierungsMerkmaleAusgewaehlteBaueigenschaft"
                          val="lokalAktiviert"
                          @input="handleAktivierung(true)"
                          label="Lokal aktiviert (am ausgewählten Baustoff im Baustoffbaum)"
                        />
                        -->
                        <!--
                        </div>
                        <div class="row q-col-gutter-xs">
                        -->
                        <!-- TODO: Hier vorläufig selber Handler wie für lokale Aktivierung -->
                        <!-- Braucht aber eigenen Handler, der Aktivierung im Pfad auslöst! -->
                        <!-- ACHTUNG: Die Änderungen von ausgewwaehlteBaueigenschaft.aktiviertNichtDeaktiviert müssen hier invertiert erfolgen, -->
                        <!-- weil handleAKtivierung es so erwartet!!! -->
                        <!--
                        <q-radio
                          dense
                          color="primary"
                          class="text-accent"
                          v-model="aktivierungsMerkmaleAusgewaehlteBaueigenschaft"
                          val="imPfadAktiviert"
                          @input="handleAktivierung(true)"
                          label="Im Pfad aktiviert (am ausgewählten Baustoff und an allen direkten und indirekten Elternbaustoffen bis zum Wurzelbaustoff im Baustoffbaum)"
                        />
                        -->
                        <!--
                        </div>
                        <br />
                        </div>
                        <div class="col-6">
                        -->
                        <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst Layout der Spalte nicht dense!!! -->
                        <!--
                        <div class="row q-col-gutter-xs">
                          <q-space />
                          <br />
                          <br />
                          <br />
                        </div>
                        <div class="row q-col-gutter-xs">
                          <q-space />
                        </div>
                        <div class="row q-col-gutter-xs">
                          <q-radio
                            dense
                            label="Lokal aktivierbar (systemverwaltet)"
                            :disable="true"
                            v-model="ausgewaehlteBaueigenschaft.aktivierbar"
                            :val="true"
                            @input="ausgewaehlteBaueigenschaft.aktivierbar = true"
                          />
                        </div>
                        -->
                        <!--
                        <div>
                          <q-toggle
                            :value="
                              ausgewaehlteBaueigenschaft.obligatorischNichtOptional
                            "
                            label="Obligatorisch"
                            @input="obligatorischHandler()"
                          />
                        </div>
                      -->
                        <!--
                          </div>
                        </div>
                        -->
                        <!-- Nun eine Row mit 2 Columns für wertebezogene Angaben und wertbezogene Merkmale: -->
                        <div
                          class="row full-width q-col-gutter-xs inset-shadow"
                        >
                          <!-- Erste Column für wertbezogene Angaben: -->
                          <div class="col-md-6 col-12">
                            <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst Layout der Spalte nicht dense!!! -->
                            <div>
                              <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                              <b
                                >Wertbezogene Angaben (gemäß Wertetyp) zur
                                aktivierten Baueigenschaft am ausgewählten
                                Baustoff
                              </b>
                              <br />
                              <br />
                            </div>
                            <div>
                              <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                              <b>Kennwert/Kennwertepaar</b>
                            </div>
                            <div class="q-col-gutter-xs">
                              <!-- NEU: QInput disablen in Abhängigkeit von Benutzerrolle -->
                              <q-input
                                :disable="
                                  disabledFieldsAusgewaehlteBaueigenschaft.kennWert1 ||
                                    disableWerteFelder ||
                                    benutzerRolleIstMitarbeiter
                                "
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="ausgewaehlteBaueigenschaft.kennWert1"
                                type="number"
                                label="Kennwert 1"
                                hint="Numerischer Wert, z.B. '3,14'"
                                hide-hint
                              />
                            </div>
                            <div class="q-col-gutter-xs">
                              <!-- NEU: QInput disablen in Abhängigkeit von Benutzerrolle -->
                              <q-input
                                :disable="
                                  disabledFieldsAusgewaehlteBaueigenschaft.kennWert2 ||
                                    disableWerteFelder ||
                                    benutzerRolleIstMitarbeiter
                                "
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="ausgewaehlteBaueigenschaft.kennWert2"
                                type="number"
                                label="Kennwert 2"
                                hint="Numerischer Wert, z.B. '5000'"
                                hide-hint
                              />
                            </div>
                            <div>
                              <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                              <b>Datumswert/Datumswertepaar</b>
                            </div>
                            <div class="q-col-gutter-xs">
                              <!-- NEU: QInput disablen in Abhängigkeit von Benutzerrolle -->
                              <q-input
                                :disable="
                                  disabledFieldsAusgewaehlteBaueigenschaft.datumsWert1 ||
                                    disableWerteFelder ||
                                    benutzerRolleIstMitarbeiter
                                "
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="ausgewaehlteBaueigenschaft.datumsWert1"
                                label="Datumswert 1"
                                stack-label
                                hint="Datum im Format 'tt.mm.jjjj', z.B. '01.12.2019'"
                                hide-hint
                                type="date"
                              >
                                <!-- ------------------------------------------------------------------------------------------------------------------------------------------------------ -->
                                <!-- Testcode für Quasar q-date, vorläufig wieder disabeld zugunsten von alternativem native Date (Browser Date Picker) an q-input-Feldern -->
                                <!-- für Datumswert1/2 mittels type="date" -->
                                <!-- mask="####-##-##" -->
                                <!-- Für Verwendung als Property an diesen q-input Feldern, zusammen mit dem q-date Date Picker für Datumswert1 unten -->
                                <!-- TODO: Mask Properties ausprobieren am q-input (z.B. mask="####-##-##") und am q-date (z.B. mask="YYYY-MM-DD" oder 'formatdate(.YYYY', mit funktionierender Kombination -->
                                <!-- Das Datumsfeld kommt im Mongoose Format aus der Datenbank (UTC, YYYY-MM-DDTHH:MM:SS.000Z -->
                                <!-- In der QTable Feldern wird es aktuell mit formatDate nach YYYY-MM-DD bzw. neuerdings mit Quasar Date Util nach formatdate(.YYYY konvertiert -->
                                <!-- Es wird in diversen Funktionen unten bereits umformatiert in das Format 'formatdate(.YYYY', in ausgewaehlteBaueigenschaft.datumsWert1/2 -->
                                <!-- und neueBaueigenschaft.datumsWert1/2 -->
                                <!-- In den q-input Feldern wird es alternativ aktuell mittels type="date" auf den Browser Date Picker geleitet. -->
                                <!-- Allerdings dürfen diese q-input Felder dann keine autogrow Prop haben!!!  -->
                                <!-- Es folgt der Testcode für q-date: -->
                                <!-- :locale="dateLocale" -->
                                <!-- Prop von q-date - nicht notwendig, wenn in quasar.conf.js lang: "de" als Quasar language gesetzt wird -->
                                <!--
                                            <template v-slot:append>
                                              <q-icon
                                                name="event"
                                                class="cursor-pointer"
                                              >
                                                <q-popup-proxy
                                                  ref="qDateProxyDatumsWert1AusgewaehlteBaueigenschaft"
                                                  transition-show="scale"
                                                  transition-hide="scale"
                                                >
                                                  <q-date
                                                    v-model="
                                                      ausgewaehlteBaueigenschaft.datumsWert1
                                                    "
                                                    @input="
                                                      () =>
                                                        $refs.qDateProxyDatumsWert1AusgewaehlteBaueigenschaft.hide()
                                                    "
                                                    mask="formatdate(.YYYY"
                                                  />
                                                </q-popup-proxy>
                                              </q-icon>
                                            </template>
                                            -->
                              </q-input>
                            </div>
                            <div class="q-col-gutter-xs">
                              <!-- NEU: QInput disablen in Abhängigkeit von Benutzerrolle -->
                              <q-input
                                :disable="
                                  disabledFieldsAusgewaehlteBaueigenschaft.datumsWert2 ||
                                    disableWerteFelder ||
                                    benutzerRolleIstMitarbeiter
                                "
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="ausgewaehlteBaueigenschaft.datumsWert2"
                                label="Datumswert 2"
                                stack-label
                                hint="Datum im Format 'tt.mm.jjjj', z.B. '31.12.2020"
                                hide-hint
                                type="date"
                              />
                            </div>
                            <!-- Testfeld für native Date, siehe https://quasar.dev/vue-components/input#Example--Input-types -->
                            <!-- ACHTUNG: Dieser type="date" funktioniert ursprünglich NICHT an den q-input Feldern für Datumwwerte (diese sind Mongoose Dates) -->
                            <!-- oder Bezeichnungswerte (diese sind Strings) -->
                            <!-- Grund: autogrow Property am q-input war t in Konflikt mit Property type="date" - autogrow muss entfernt werden bei type="date" -->
                            <!-- ACHTUNG: q-input darf bei type="date" keine autogrow Property enthalten!!! -->
                            <!--
                            <div>
                            <b>Testfeld für native Date</b>
                            <q-input square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="dateTest"
                                type="date"
                                hint="Native Date">
                              </q-input>
                            </div>
                            <br />
                            -->
                            <div>
                              <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                              <b>Tageszeitwert/Tageszeitwertepaar</b>
                              <!-- NEU -->
                            </div>
                            <div class="q-col-gutter-xs">
                              <!-- NEU: QInput disablen in Abhängigkeit von Benutzerrolle -->
                              <q-input
                                :disable="
                                  disabledFieldsAusgewaehlteBaueigenschaft.tagesZeitWert1 ||
                                    disableWerteFelder ||
                                    benutzerRolleIstMitarbeiter
                                "
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  ausgewaehlteBaueigenschaft.tagesZeitWert1
                                "
                                label="Tageszeitwert 1"
                                stack-label
                                hint="Uhrzeit im 24-Stunden-Format 'hh:mm', z.B. '08:00'"
                                hide-hint
                                type="time"
                              >
                              </q-input>
                            </div>
                            <div class="q-col-gutter-xs">
                              <!-- NEU: QInput disablen in Abhängigkeit von Benutzerrolle -->
                              <q-input
                                :disable="
                                  disabledFieldsAusgewaehlteBaueigenschaft.tagesZeitWert2 ||
                                    disableWerteFelder ||
                                    benutzerRolleIstMitarbeiter
                                "
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  ausgewaehlteBaueigenschaft.tagesZeitWert2
                                "
                                label="Tageszeitwert 2"
                                stack-label
                                hint="Uhrzeit im 24-Stunden-Format 'hh:nn', z.B. '18:00'"
                                hide-hint
                                type="time"
                              />
                            </div>
                            <div>
                              <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                              <b>Bezeichnungswert/Bezeichnungswertepaar</b>
                            </div>
                            <div class="q-col-gutter-xs">
                              <!-- NEU: QInput disablen in Abhängigkeit von Benutzerrolle -->
                              <q-input
                                :disable="
                                  disabledFieldsAusgewaehlteBaueigenschaft.bezeichnungsWert1 ||
                                    disableWerteFelder ||
                                    benutzerRolleIstMitarbeiter
                                "
                                type="date"
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  ausgewaehlteBaueigenschaft.bezeichnungsWert1
                                "
                                label="Bezeichnungswert 1"
                                hint="Frei wählbare Bezeichnung, z.B. 'Gültig ab'"
                                hide-hint
                                autogrow
                              />
                            </div>
                            <div class="q-col-gutter-xs">
                              <!-- NEU: QInput disablen in Abhängigkeit von Benutzerrolle -->
                              <q-input
                                :disable="
                                  disabledFieldsAusgewaehlteBaueigenschaft.bezeichnungsWert2 ||
                                    disableWerteFelder ||
                                    benutzerRolleIstMitarbeiter
                                "
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  ausgewaehlteBaueigenschaft.bezeichnungsWert2
                                "
                                label="Bezeichnungswert 2"
                                hint="Frei wählbare Bezeichnung, z.B. 'Gültig bis'"
                                hide-hint
                                autogrow
                              />
                            </div>
                            <div class="row full-width q-pa-none">
                              <div class="col-3">
                                <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                                <b>Wahrheitswert</b>
                              </div>
                              <div class="col-9 text-caption">
                                <!-- NEU in Quasar 1.8: Zustand des q-toggles ist neutrales "indeterminate" bei Wert "null", mit Prop toggle-indeterminate -->
                                <q-toggle
                                  dense
                                  :disable="
                                    disabledFieldsAusgewaehlteBaueigenschaft.wahrheitsWert ||
                                      disableWerteFelder ||
                                      benutzerRolleIstMitarbeiter
                                  "
                                  v-model="
                                    ausgewaehlteBaueigenschaft.wahrheitsWert
                                  "
                                  toggle-indeterminate
                                  label="unzutreffend/undefiniert/zutreffend"
                                />
                              </div>
                            </div>
                            <br />
                            <div>
                              <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                              <b>Aufzählungswert</b>
                              <!-- ALT: Kindkomponente, disabled -->
                              <!-- Aufruf einer separaten Vue-Komponente für das QSelect Handling der Aufzählungswerte -->
                              <!--
                              <AufzaehlungsWerteAuswahl
                                :ausgewaehlteBaueigenschaft="
                                  ausgewaehlteBaueigenschaft
                                "
                                :disableProp="
                                  disabledFieldsAusgewaehlteBaueigenschaft.aufzählungsWert ||
                                    disableWerteFelder
                                "
                              />
                              -->
                              <!-- NEU: Kindkomponente disabled zugunsten von Inline Code: -->
                              <!-- NEU: QSelect disablen in Abhängigkeit von Benutzerrolle -->
                              <q-select
                                dense
                                :disable="
                                  disabledFieldsAusgewaehlteBaueigenschaft.aufzaehlungsWert ||
                                    disableWerteFelder ||
                                    benutzerRolleIstMitarbeiter
                                "
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                input-class="text-white"
                                filled
                                v-model="
                                  ausgewaehlteBaueigenschaft.aufzaehlungsWert
                                "
                                :options="
                                  selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft
                                "
                                @filter="
                                  selectFilterFunctionAufzaehlungswertAusgewaehlteBaueigenschaft
                                "
                                :multiple="true"
                                label="Optionen für den Aufzählungswert auswählen"
                                stack-label
                                use-chips
                                options-selected-class="text-primary"
                                options-dense
                                use-input
                                input-debounce="0"
                                bottom-slots
                                @focus="
                                  showHintSelectAufzaehlungswertAusgewaehlteBaueigenschaft = true
                                "
                                @blur="
                                  showHintSelectAufzaehlungswertAusgewaehlteBaueigenschaft = false
                                "
                              >
                                <!-- TODO: style="width: 720px" -->
                                <!-- Zu den Icons siehe https://quasar.dev/vue-components/select#Decorators - erfordert "bottom-slots" Prop am q-select  -->
                                <template v-slot:append>
                                  <q-icon name="search" @click.stop />
                                  <!-- NEU: Statt "clearable" Prop am q-select expliziter Cancel-Icon - erlaubt es, dessen Color zu setzen -->
                                  <!-- Vorlage: https://quasar.dev/vue-components/select#Clearable -->
                                  <!-- ACHTUNG: Hier ist das QSelect Model ausgewaehlteBaueigenschaft.aufzaehlungsWert, -->
                                  <!-- NICHT selectModelAufzaehlungswertAusgewaehlteBaueigenschaft, wie bei der Neuanlage!!! -->
                                  <!-- Deshalb muss auch dieses auf null gesetzt werden!!! -->
                                  <q-icon
                                    @click.stop="
                                      ausgewaehlteBaueigenschaft.aufzaehlungsWert = null
                                    "
                                    name="cancel"
                                    class="cursor-pointer"
                                    color="primary"
                                  />
                                  <!-- ACHTUNG: TODO - Muss oben leerer Array sein???  -->
                                </template>
                                <!-- Den folgenden VSlot für den Hint disabled, da er viel vertikalen Platz brauchte -->
                                <!-- ACHTUNG: Der Text im Hint ist für den QSelect-Modus "Auswählen von Optionen" (d.h. nicht "New Value Mode" wie bei Neuanlage) -->
                                <!--
                                <template
                                  v-slot:hint
                                  v-if="
                                    showHintSelectAufzaehlungswertAusgewaehlteBaueigenschaft
                                  "
                                >
                                  <ul class="q-pl-xs" v-else>
                                    <li>
                                      <strong>Auswählen</strong> von Optionen für den
                                      Aufzählungswert: Diese im Dropdown-Menü auswählen.
                                      Es können eine einzelne oder mehrere Optionen ausgewählt werden.
                                    </li>
                                    <li>
                                      <strong>Filtern:</strong> Einen Filtertext in das
                                      Eingabefeld eingeben. Auch unvollständige Angaben sind
                                      möglich. Dies filtert die im Dropdown-Menü angezeigten
                                      Optionen.
                                    </li>
                                    <li>
                                      <strong>Abwählen:</strong> Zur Liste der Optionen
                                      hinzugefügte Optionen können mit
                                      <q-icon name="cancel" color="primary" />&nbsp;abgewählt
                                      werden.
                                    </li>
                                    <li>
                                      Zum
                                      <strong>Speichern:</strong> Unten Schaltfläche "Baueigenschaft speichern"
                                      drücken.
                                    </li>
                                  </ul>
                                </template>
                                -->
                                <!-- Es folgt der v-slot zur Anzeige des q-chips für eine ausgewählte Option: -->
                                <template v-slot:selected-item="scope">
                                  <!-- scope: {{scope}} -->
                                  <!-- scope ist hier ein Objekt, das einen selektierten Optionswert repräsentiert, welcher per q-chip angezeigt wird -->
                                  <!-- Dieses besteht aus den Feldern scope.index, .opt, .sanitize, .selected und .tabindex -->
                                  <q-chip
                                    removable
                                    dense
                                    @remove="scope.removeAtIndex(scope.index)"
                                    :tabindex="scope.tabindex"
                                    color="primary"
                                    text-color="white"
                                    class="q-ma-xs shadow-4"
                                  >
                                    <!-- ALT: -->
                                    <!-- {{ scope.opt }} -->
                                    <!-- ACHTUNG - hier NICHT: scope.opt.benutzerKennung !!! -->
                                    <!-- ACHTUNG: Bzgl. Sanitization wird hier für die Anzeige im q-chip kein v-html verwendet, sondern wie unten bei den Options nur Moustaches -->
                                    <!-- NEU: Long Label Truncation, mit Tooltip der vollen Bezeichnung, mittels spezieller CSS Class "ellipsis": -->
                                    <!-- Damit Truncation für lange Texte an QChip - Vorlage: https://quasar.dev/vue-components/chip#Example--Long-label-truncation -->
                                    <div class="ellipsis">
                                      {{ scope.opt }}
                                      <q-tooltip
                                        :delay="1000"
                                        :offset="[0, 10]"
                                        max-width="500px"
                                        content-class="bg-secondary text-white text-caption shadow-4"
                                        >{{ scope.opt }}</q-tooltip
                                      >
                                    </div>
                                  </q-chip>
                                </template>
                                <!-- Es folgt der v-slot zur Anzeige der Options im Dropdown-Menü -->
                                <template v-slot:option="scope">
                                  <!-- scope: {{scope}} -->
                                  <!-- scope ist hier das Objekt für einen Optionswert im Dropdown-Menü -->
                                  <!-- Dieses besteht aus den Feldern scope.index, .opt, .sanitize, .selected, .focused, .itemProps (Unterobjekt) und .itemEvents (Unterobjekt) -->
                                  <!-- Angezeigt wird aktuell nur scopt.opt, per v-html - das ist der Inhalt des Textfelds für den Optionswert -->
                                  <!-- ACHTUNG: Die Werte für die Options des Felds Aufzaehlungswert müssen sanitized werden, da er vom User definiert/eingegeben wird!!! -->
                                  <q-item
                                    v-bind="scope.itemProps"
                                    v-on="scope.itemEvents"
                                  >
                                    <!-- avatar section - funktioniert nur, falls ein Feld icon für die Option definiert ist -->
                                    <!--
                                                                              <q-item-section avatar>
                                                                              <q-icon :name="scope.opt.icon" />
                                                                              </q-item-section>
                                                                              -->
                                    <q-item-section>
                                      <!-- TODO bei option-value="valueAufzaehlungswert": -->
                                      <!-- scope.opt.valueAufzaehlungswert-->
                                      <!-- TODO: Sanitization der durch den User eingegebenen Option-Werte -->
                                      <!-- HINWEIS: Wenn im Folgenden v-html am q-item-label verwendet wird, wird der Inhalt des Felds scope.opt als HTML im Dropdown-Menü ausgegegaben -->
                                      <!-- <q-item-label v-html="scope.opt" /> -->
                                      <!-- Beispiel für eine solche "HTML-Option" (eingeben im Input-Feld des q-selects): <strong>xxl</strong> -->
                                      <!-- Dann muss die Benutzereingabe dafür auf jeden Fall sanitized werden -->
                                      <!-- Wenn nur {{ scope.opt }} am q-item-label ausgegeben wird, wird scope.opt nicht als HTML interpretiert -->
                                      <!-- Dann ist eine Sanitization vermutlich weniger kritisch -->
                                      <!-- Dies gilt auch für die q-chips oben, die die ausgewählten Options anzeigen -->
                                      <!-- ACHTUNG: Automatische Sanitization durch Quasar mit den Props options-sanitize und diplay-value-sanitize am q-select -->
                                      <!-- wird laut https://quasar.dev/vue-components/select#Sanitization nur unterstützt, wenn man NICHT wie hier der Fall -->
                                      <!-- den option v-slot bzw. die selected oder selected-item v-slots verwendet!!! -->
                                      <!-- Daher müsste für eine automatische Sanitzation durch Quasar mit diesen Props am q-select das q-select umgestellt werden -->
                                      <!-- auf eine Variante ohne v-slots. Die v-slots werden aktuell verwendet für das Einfügen des Search-Icons und das Ein-/Ausblenden -->
                                      <!-- der Hints bei Fokus. -->
                                      <q-item-label>{{
                                        scope.opt
                                      }}</q-item-label>
                                      <!-- ALT: Gefährlichere Variante: -->
                                      <!-- <q-item-label v-html="scope.opt" /> -->
                                      <!-- <q-item-label caption>{{ scope.opt.bauinformationsTyp }}</q-item-label> -->
                                    </q-item-section>
                                  </q-item>
                                </template>
                              </q-select>
                              <!-- /q-select für Aufzählungswert -->
                              <!-- Platz für Hint schaffen: -->
                              <!-- ACHTUNG: Sonst erscheint vertikaler Scrollbalken, wenn das QSelect Fokus hat! -->
                              <!-- Disabled, wie den Hint selbst -->
                              <!--
                              <br />
                              <br />
                              <br />
                              <br />
                              <br />
                              <br />
                              -->
                            </div>
                          </div>
                          <!-- /col, 3. Spalte -->
                          <!-- 4. Spalte:      -->
                          <!-- ACHTUNG: 4. Spalte darf nur col-3 sein, wenn oben q-col-gutter-xs, nicht q-gutter-xs, sonst Column Wrapping! Workaround: col-3 -->
                          <div class="col-md-6 col-12">
                            <!-- ACHTUNG: Hier kein q-col-gutter-xs, sonst Layout der Spalte nicht dense!!! -->
                            <div>
                              <b
                                >Wertbezogene Merkmale zur aktivierten
                                Baueigenschaft am ausgewählten Baustoff im
                                Baustoffbaum</b
                              >
                            </div>
                            <br />
                            <div>
                              <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                              <b>Systemverwaltete wertbezogene Merkmale</b>
                            </div>
                            <!-- HINWEIS: definiertNichtUndefiniert ist systemverwaltet (:disable=true), nciht benutzerverwaltet-->
                            <div>
                              <q-toggle
                                :value="istDefiniertAusgewaehlteBaueigenschaft"
                                label="Werte sind in definiertem Zustand"
                                :disable="true"
                              />
                            </div>
                            <div>
                              <q-toggle
                                v-model="
                                  ausgewaehlteBaueigenschaft.ererbtNichtGesetzt
                                "
                                label="Werte sind vom Elternbaustoff ererbt"
                                :disable="true"
                              />
                            </div>
                            <!-- NEU - #514: Merkmal verschoben von wertbezogenen nach typbezogenen Feldern, daher hier disabled -->
                            <!--
                            <div>
                              <q-toggle
                                v-model="
                                  ausgewaehlteBaueigenschaft.systemdefiniertNichtBenutzerdefiniert
                                "
                                label="Werte sind vom System vorgegeben (d.h. nicht vom Benutzer eingegeben)"
                                :disable="true"
                              />
                            </div>
                            -->
                            <div>
                              <q-toggle
                                v-model="
                                  ausgewaehlteBaueigenschaft.systemberechnetNichtSystemgesetzt
                                "
                                label="Werte sind vom System berechnet (d.h. nicht vom Benutzer eingegeben)"
                                :disable="true"
                              />
                            </div>
                            <br />
                            <div>
                              <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                              <b>Benutzerverwaltete wertbezogene Merkmale</b>
                            </div>
                            <div>
                              <!-- NEU: QToggle disablen in Abhängigkeit von Benutzerrolle -->
                              <q-toggle
                                :disable="benutzerRolleIstMitarbeiter"
                                v-model="
                                  ausgewaehlteBaueigenschaft.vererbtAnKindknnoten
                                "
                                label="Werte werden vererbt an direkte und indirekte Kindknoten (stets der Fall im Baustoffbaum)"
                              />
                            </div>
                            <!-- NEU - #514: Merkmal verschoben von wertbezogenen nach typbezogenen Feldern, daher hier disabled -->
                            <!--
                            <div>
                              <q-toggle
                                :disable="benutzerRolleIstMitarbeiter"
                                v-model="
                                  ausgewaehlteBaueigenschaft.sollwertNichtIstwert
                                "
                                label="Werte sind Sollwerte, nicht Istwerte"
                              />
                            </div>
                            -->
                            <div>
                              <!-- TODO: q-select für Gütebewertung -->
                              <!-- NEU: QSelect disablen in Abhängigkeit von Benutzerrolle -->
                              <!-- NEU - #300: Disabling des Felds, wenn die Werte der Baueigenschaft undefiniert sind -->
                              <!-- hide-hint dabei entfernt -->
                              <q-select
                                :disable="
                                  benutzerRolleIstMitarbeiter ||
                                    !istDefiniertAusgewaehlteBaueigenschaft
                                "
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                input-class="text-white"
                                dense
                                v-model="
                                  ausgewaehlteBaueigenschaft.güteBewertung
                                "
                                label="Gütebewertung für die Werte der Baueigenschaft"
                                hint="Auswählbare Einschätzung der Güte der Werte der Baueigenschaft, in drei farblich bezeichneten Gütestufen, z.B. 'gelb'.
                                      Nur gültig für Werte in definiertem Zustand.
                                "
                                :options="optionsGueteBewertung"
                                options-dense
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div></div>
                    <q-separator />
                    <!-- Es folgend die Buttons unter dem q-form: -->
                    <div class="row full-width q-pa-xs q-col-gutter-xs">
                      <div class="col-md-3 col-12">
                        <!-- NEU: Fix 22.05.2020 - type="submit" entfernt, da sonst q-form einen Fehler beim @submit Event auslöst, der zum Logout führt! -->
                        <!-- NEU: QButton disablen in Abhängigkeit von Benutzerrolle -->
                        <!-- ALT: style="width: 90%" -->
                        <q-btn
                          class="stretch full-width"
                          style="height: 100%"
                          :disable="benutzerRolleIstMitarbeiter"
                          color="positive"
                          glossy
                          @click="updateAusgewaehlteBaueigenschaft()"
                          label="Ausgewählte Baueigenschaft speichern"
                          no-caps
                        />
                      </div>
                      <div class="col-md-3 col-12">
                        <!-- NEU: QButton disablen in Abhängigkeit von Benutzerrolle -->
                        <!-- ALT: style="width: 90%" -->
                        <q-btn
                          class="stretch full-width"
                          style="height: 100%"
                          :disable="benutzerRolleIstMitarbeiter"
                          color="deep-orange"
                          glossy
                          text-color="white"
                          @click="resetAusgewaehlteBaueigenschaft()"
                          label="Eingaben auf Originalwerte zurücksetzen"
                          no-caps
                        />
                      </div>
                    </div>
                    <!-- /row, 1. Zeile -->
                    <!--------------------------------------------------------------------------------------------------------------------------------->
                  </q-form>
                  <!-- für Bearbeitung von in q-table ausgewählter Baueigenschaft -->
                </q-tab-panel>
                <!-- ------------------------------------------------------------------------------------------------------------------------------- -->
                <!-- NEU: Tab für Bearbeitung BaueigenschaftsBeschreibung (Markdown) der ausgewählten Baueigenchaft        -->
                <!-- ------------------------------------------------------------------------------------------------------------------------------- -->
                <!-- ACHTUNG: v-if="ausgewaehlteBaueigenschaft" UNBEDINGT notwendig am q-tab-panel oder div, sonst TypeError: Cannot read property -->
                <!-- 'baueigenschaftsBeschreibung' of null", und es kommt dann GAR KEIN Tab hoch für Baueigenschaften rechts vom Splitter!!! -->
                <!-- TODO: XXXXXX Initialisierung des Tab Panels, momentan wird (vermutlich) selber Code ausgeführt wie für Tab Auswahl, siehe -->
                <!-- setTabBaueigenschaften -->
                <q-tab-panel
                  class="q-pa-xs"
                  name="beschreibungTabBaueigenschaften"
                  v-if="ausgewaehlteBaueigenschaft"
                >
                  <q-card class="q-pa-xs">
                    <!-- TODO: width justieren, früher 1200px, jetzt (besser) 1300px -->
                    <!-- ALT: style="min-width: 1200px" -->
                    <!-- NEU: style="min-width: 1300px" -->
                    <!-- Mit 1300px kein horizontaler Scrollbalken, auch wenn linker und rechter Drawer offen sind -->
                    <!-- ACHTUNG: Durch "autogrow" am QInput-Feld ändert sich sowohl Höhe als auch Breite dieses Panels abhängig vom Feldinhalt!!! -->
                    <div class="q-pa-xs">
                      <div v-if="localStore.state.debugMode">
                        ausgewaehlteBaueigenschaft:
                        {{ ausgewaehlteBaueigenschaft }}
                        <q-separator />
                      </div>
                      <div
                        v-if="
                          ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft
                            .baueigenschaftsBezeichnung != null
                        "
                      >
                        <p class="text-h6" v-if="$q.screen.gt.sm">
                          Beschreibung für ausgewählte Baueigenschaft
                          <strong
                            >"{{
                              ausgewaehlteBaueigenschaft
                                .typbezogeneBaueigenschaft
                                .baueigenschaftsBezeichnung
                            }}"</strong
                          >
                        </p>
                        <p class="text-subtitle1" v-else>
                          Beschreibung für ausgewählte Baueigenschaft
                          <strong
                            >"{{
                              ausgewaehlteBaueigenschaft
                                .typbezogeneBaueigenschaft
                                .baueigenschaftsBezeichnung
                            }}"</strong
                          >
                        </p>
                      </div>
                      <!-- Felder für das Editieren des Markdowns mit q-input und q-markdown: -->
                      <div class="row full-width q-pa-xs q-col-gutter-xs">
                        <div class="col-md-6 col-12">
                          <strong>Eingabe (im Markdown-Format)</strong>
                          <!-- ACHTUNG: no-html wegen Security!!! -->
                          <!-- ACHTUNG: Tests ergeben, dass bei q-input standout="..." die Textfarbe immer weiß ist, -->
                          <!-- auch wenn standout="bg-green-1 text-black" angegeben wird!!! -->
                          <!-- Textfarbe weiß ist aber bei Hintergrundfarbe green-1 (sollte gleich wie in fachlicher Hilfe sein) nicht lesbar! -->
                          <!-- Deshalb das q-input Feld auf q-input square umgestellt, color="green-1" beeinflusst den Strich unten -->
                          <!-- wenn das Feld im Fokus ist -->
                          <!-- NEU: QInput disablen in Abhängigkeit von Benutzerrolle -->
                          <q-input
                            :disable="benutzerRolleIstMitarbeiter"
                            v-model="
                              ausgewaehlteBaueigenschaft
                                .typbezogeneBaueigenschaft
                                .baueigenschaftsBeschreibung
                            "
                            square
                            dense
                            type="textarea"
                            color="green-1"
                            bg-color="green-1"
                            debounce="300"
                            autofocus
                            autogrow
                            no-html
                          >
                          </q-input>
                        </div>
                        <!-- Ende linke Spalte -->
                        <div class="col-md-6 col-12">
                          <strong
                            >Formatierte Ausgabe (Vorschau fachliche
                            Hilfe):</strong
                          >
                          <br />
                          <q-list dense>
                            <q-item dense class="bg-green-1">
                              <q-markdown
                                :src="
                                  ausgewaehlteBaueigenschaft
                                    .typbezogeneBaueigenschaft
                                    .baueigenschaftsBeschreibung
                                "
                              />
                            </q-item>
                          </q-list>
                        </div>
                        <!-- TODO: Löschen Bauseigenschaftsbeschreibung??? -->
                      </div>
                      <div class="row full-width q-pa-xs q-col-gutter-xs">
                        <div class="col-md-3 col-12">
                          <!-- ALT: url="http://localhost:4444/upload/" -->
                          <!-- NEU: :url="computeUploadURL" // computed Property -->
                          <!-- :factory="uploadFile" mit neuer Factory Function uploadFile, die den JWT Header übermittelt wie in den sonstigen Axios API Calls -->
                          <!-- ALT: style="max-width: 255px" -->
                          <!-- NEU: QUploader disablen in Abhängigkeit von Benutzerrolle -->
                          <q-uploader
                            :disable="benutzerRolleIstMitarbeiter"
                            class="stretch full-width"
                            :factory="uploadFile"
                            ref="uploaderBaueigenschaftsBeschreibung"
                            :url="computeUploadURL"
                            label="Bild hochladen für internen Link"
                            accept=".jpg, .png, .tif, .gif"
                            color="light-green"
                            text-color="white"
                            @uploaded="
                              displayLinkForUploadedFileUploaderBaueigenschaftsBeschreibung
                            "
                            :multiple="false"
                          />
                        </div>
                        <!--
                        <div class="col-1">
                        </div>
                        -->
                        <div
                          class="col-md-3 col-12"
                          v-if="uploadDoneBaueigenschaftsBeschreibung"
                        >
                          <strong>Interner Link für hochgeladenes Bild:</strong>
                          <br />
                          {{ internerLinkAusUploadBaueigenschaftsBeschreibung }}
                          <br />
                          <br />
                          <!-- ACHTUNG: Am folgenden q-btn kann type="submit" bleiben, da nicht Teil eines q-forms!!! -->
                          <!-- ALT:  style="width: 90%" -->
                          <!-- NEU: QButton disablen in Abhängigkeit von Benutzerrolle -->
                          <q-btn
                            :disable="benutzerRolleIstMitarbeiter"
                            class="stretch full-width"
                            color="secondary"
                            glossy
                            type="submit"
                            @click="
                              copyToClipboardBaueigenschaftsBeschreibung(
                                internerLinkAusUploadBaueigenschaftsBeschreibung
                              )
                            "
                            label="Link in die Zwischenablage kopieren"
                            no-caps
                          />
                          <div
                            v-if="
                              copyToClipboardDoneBaueigenschaftsBeschreibung
                            "
                            class="text-caption"
                          >
                            Zum Einfügen des Bildes in die Beschreibung nun
                            diesen Link mit Strg+V in den Markdown oben
                            einfügen. Anschließend Linkbezeichnung und
                            Linkanzeigetext anpassen.
                          </div>
                        </div>
                      </div>
                      <q-separator />
                      <div class="row full-width q-pa-xs q-col-gutter-xs">
                        <div class="col-md-3 col-12">
                          <!-- ACHTUNG: Am folgenden q-btn kann type="submit" bleiben, da nicht Teil eines q-forms!!! -->
                          <!-- ALT:  style="width: 90%" -->
                          <!-- NEU: QButton disablen in Abhängigkeit von Benutzerrolle -->
                          <q-btn
                            dense
                            :disable="benutzerRolleIstMitarbeiter"
                            class="stretch full-width"
                            style="height: 100%"
                            color="positive"
                            glossy
                            type="submit"
                            @click="
                              updateBaueigenschaftsBeschreibungAusgewaehlteBaueigenschaft()
                            "
                            label="Beschreibung für Baueigenschaft speichern"
                            no-caps
                          />
                        </div>
                        <div class="col-md-3 col-12">
                          <!-- ALT:  style="width: 90%" -->
                          <!-- NEU: QButton disablen in Abhängigkeit von Benutzerrolle -->
                          <q-btn
                            dense
                            :disable="benutzerRolleIstMitarbeiter"
                            class="stretch full-width"
                            style="height: 100%"
                            color="deep-orange"
                            glossy
                            text-color="white"
                            @click="
                              resetBaueigenschaftsBeschreibungAusgewaehlteBaueigenschaft()
                            "
                            label="Eingaben auf Originalwerte zurücksetzen"
                            no-caps
                          />
                        </div>
                      </div>
                      <!-- TODO: Löschen Baueigenschaftsbeschreibung??? -->
                    </div>
                    <!-- <div class="col-md-6 col-12"></div> -->
                  </q-card>
                </q-tab-panel>
                <!-- ----------------------------------------------------------------------------------------------------- -->
                <q-tab-panel class="q-pa-none" name="neuTabBaueigenschaften">
                  <div v-if="localStore.state.debugMode">
                    neueBaueigenschaft:
                    {{ neueBaueigenschaft }}
                    <q-separator />
                  </div>
                  <q-form>
                    <!-- für Neuanlage von Baueigenschaft -->
                    <div class="q-pa-none">
                      <!-- Für Neuanlage von Baueigenschaft -->
                      <!-- ALT: style="min-width: 1000px" -->
                      <div class="q-pb-sm text-h6" v-if="$q.screen.gt.sm">
                        Neuanlage einer Baueigenschaft im Baustoffbaum
                      </div>
                      <div class="q-pb-sm text-subtitle1" v-else>
                        Neuanlage einer Baueigenschaft im Baustoffbaum
                      </div>
                      <div
                        class="row full-width items-start q-pa-xs q-col-gutter-xs inset-shadow"
                      >
                        <!-- ACHTUNG: Hier q-col-gutter-xs, nicht q-gutter-xs, sonst wird die letzte Column gewrapped!!! -->
                        <div class="col-md-3 col-12">
                          <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst Layout der Spalte nicht dense!!! -->
                          <div>
                            <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                            <b
                              >Typbezogene Angaben zur Baueigenschaft
                              (systemweit gültig)</b
                            >
                          </div>
                          <br />
                          <div>
                            <b>Festlegung der Bezeichnung der Baueigenschaft</b>
                          </div>
                          <!-- ACHTUNG: Das folgende <div> darf KEIN class="q-col-gutter-xs" haben!!! -->
                          <div>
                            <div>
                              <!-- Erstes q-input hat Testcode zur Nutzung von rules: -->
                              <q-input
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  neueBaueigenschaft.typbezogeneBaueigenschaft
                                    .baueigenschaftsBezeichnung
                                "
                                lazy-rules
                                :rules="[
                                  v =>
                                    (v != null && v !== '') ||
                                    'Bezeichnung ist erforderlich',
                                  v =>
                                    (v && v.length <= 200) ||
                                    'Bezeichnung darf höchstens 200 Zeichen lang sein'
                                ]"
                                label="Bezeichnung"
                                hint="Eindeutige Bezeichnung für die Baueigenschaft"
                                hide-hint
                              />
                            </div>
                            <br />
                            <!-- ACHTUNG: Dieses <br /> sorgt für gleichmäßge vertikale Ausrichtung der Eingabefelder auf dieser Maske!!! -->
                            <q-separator />
                            <div>
                              <b
                                >Weitere typbezogene Angaben zur
                                Baueigenschaft</b
                              >
                            </div>
                            <!-- <br /> -->
                            <!-- =============================================================================================== -->
                            <!-- ACHTUNG: Die beiden folgenden divs sind unbedingt notwendig, sonst funktioniert Layout NICHT!!! -->
                            <div class="col-md-3 col-12">
                              <div class="q-col-gutter-xs">
                                <!-- ============================================================================================= -->
                                <!-- NEU: #514/515 - q-input-Feld für baueigenschaftsAnzeigeText -->
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="
                                    neueBaueigenschaft.typbezogeneBaueigenschaft
                                      .baueigenschaftsAnzeigeText
                                  "
                                  label="Anzeigetext"
                                  hint="Anzeigetext für die Baueigenschaft, z.B. 'Schallschutzklasse'"
                                  hide-hint
                                />
                                <!-- ============================================================================================= -->
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="
                                    neueBaueigenschaft.typbezogeneBaueigenschaft
                                      .baueigenschaftsBemerkung
                                  "
                                  label="Bemerkung"
                                  hint="Bemerkung für die Baueigenschaft, z.B. 'Neu angelegt für Türen'"
                                  hide-hint
                                  autogrow
                                />
                              </div>
                              <div>
                                <q-badge
                                  v-if="localStore.state.debugMode"
                                  color="secondary"
                                  multi-line
                                >
                                  selectModelBauinformationNeueBaueigenschaft:
                                  <br />
                                  {{
                                    selectModelBauinformationNeueBaueigenschaft
                                  }}
                                </q-badge>
                                <q-select
                                  dense
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  input-class="text-white"
                                  filled
                                  v-model="
                                    selectModelBauinformationNeueBaueigenschaft
                                  "
                                  :options="
                                    selectFilterOptionsBauinformationenNeueBaueigenschaft
                                  "
                                  option-value="bauinformationsBezeichnung"
                                  :multiple="false"
                                  label="Zugeordnete Bauinformation auswählen/abwählen"
                                  stack-label
                                  use-chips
                                  options-selected-class="text-primary"
                                  options-dense
                                  use-input
                                  input-debounce="0"
                                  @new-value="
                                    createSelectValueBauinformationenNeueBaueigenschaft
                                  "
                                  @filter="
                                    selectFilterFunctionBauinformationenNeueBaueigenschaft
                                  "
                                  bottom-slots
                                  @focus="
                                    showHintSelectBauinformationenNeueBaueigenschaft = true
                                  "
                                  @blur="
                                    showHintSelectBauinformationenNeueBaueigenschaft = false
                                  "
                                >
                                  <!-- TODO: style="width: 720px" -->
                                  <!-- Zu den Icons siehe https://quasar.dev/vue-components/select#Decorators - erfordert "bottom-slots" Prop am q-select  -->
                                  <template v-slot:append>
                                    <q-icon name="search" @click.stop />
                                    <!-- Statt "clearable" Prop am q-select expliziter Cancel-Icon - erlaubt es, dessen Color zu setzen -->
                                    <!-- Vorlage: https://quasar.dev/vue-components/select#Clearable -->
                                    <!-- ALT: Am folgenden template v-if="selectModelBauinformationNeueBaueigenschaft" -->
                                    <!-- ACHTUNG: Da selectModelBauinformationNeueBaueigenschaft ein Objekt, kein Array ist, -->
                                    <!-- muss es auf null oder {} resetted werden, nicht auf [] -->
                                    <q-icon
                                      name="cancel"
                                      @click.stop="
                                        selectModelBauinformationNeueBaueigenschaft = null
                                      "
                                      class="cursor-pointer"
                                      color="primary"
                                    />
                                  </template>
                                  <template
                                    v-slot:hint
                                    v-if="
                                      showHintSelectBauinformationenNeueBaueigenschaft
                                    "
                                  >
                                    <ul class="q-pl-xs">
                                      <li>
                                        <strong>Filtern:</strong> Eine
                                        Bauinformationsbezeichnung (z.B. "Norm >
                                        DIN > EN > 13164") oder einen
                                        Bauinformationsanzeigetext (z.B.
                                        "Datenblatt") als Filtertext in das
                                        Eingabefeld eingeben. Auch
                                        unvollständige Angaben (z.B. "Datenbl")
                                        sind möglich. Dies filtert die im
                                        Dropdown-Menü angezeigten Optionen.
                                      </li>
                                      <li>
                                        <strong>Auswählen:</strong> Eine der
                                        neuen Baueigenschaft zugeordnete
                                        Bauinformation im Dropdown-Menü
                                        auswählen.
                                      </li>
                                      <li>
                                        <strong>Abwählen:</strong> Die
                                        ausgewählte Bauinformation kann mit
                                        <q-icon
                                          name="cancel"
                                          color="primary"
                                        />&nbsp;abgewählt werden.
                                      </li>
                                      <li>
                                        <strong>Speichern:</strong> Unten
                                        Schaltfläche "Speichern" drücken.
                                      </li>
                                    </ul>
                                    <!-- <br /> <br /> <br /> -->
                                    <!-- TODO: Um vertikalen Scrollbalken zu verhindern, funktioniert nicht -->
                                  </template>
                                  <template v-slot:selected-item="scope">
                                    <q-chip
                                      removable
                                      dense
                                      @remove="scope.removeAtIndex(scope.index)"
                                      :tabindex="scope.tabindex"
                                      color="primary"
                                      text-color="white"
                                      class="q-ma-xs shadow-4"
                                    >
                                      <!-- ALT: -->
                                      <!-- {{ scope.opt.bauinformationsBezeichnung }} -->
                                      <!-- NEU: Long Label Truncation, mit Tooltip der vollen Bezeichnung, mittels spezieller CSS Class "ellipsis": -->
                                      <!-- Damit Truncation für lange Texte an QChip - Vorlage: https://quasar.dev/vue-components/chip#Example--Long-label-truncation -->
                                      <div class="ellipsis">
                                        {{
                                          scope.opt.bauinformationsBezeichnung
                                        }}
                                        <q-tooltip
                                          :delay="1000"
                                          :offset="[0, 10]"
                                          max-width="500px"
                                          content-class="bg-secondary text-white text-caption shadow-4"
                                          >{{
                                            scope.opt.bauinformationsBezeichnung
                                          }}</q-tooltip
                                        >
                                      </div>
                                      <!-- <q-avatar color="secondary" text-color="white" :icon="scope.opt.icon" /> -->
                                      <!-- scope.opt.bauinformationsBezeichnung -->
                                    </q-chip>
                                  </template>

                                  <template v-slot:option="scope">
                                    <q-item
                                      v-bind="scope.itemProps"
                                      v-on="scope.itemEvents"
                                    >
                                      <q-item-section>
                                        <q-item-label
                                          v-html="
                                            scope.opt.bauinformationsBezeichnung
                                          "
                                        />
                                        <!-- NEU: Hier bauinformationsAnzeigeText statt bauinformationsTyp anzeigen: -->
                                        <q-item-label caption>{{
                                          scope.opt.bauinformationsAnzeigeText
                                        }}</q-item-label>
                                      </q-item-section>
                                    </q-item>
                                  </template>
                                </q-select>
                                <!-- /q-select für Referenz auf Bauinformation -->
                                <!-- Platz für Hint schaffen: -->
                                <br />
                                <br />
                                <br />
                                <br />
                                <br />
                              </div>
                              <!-- =================================================================== -->
                              <!-- NEU: #514/515: -->
                              <div class="row q-col-gutter-xs inset-shadow">
                                <b>Typbezogene Merkmale der Baueigenschaft</b>
                              </div>
                              <!-- ------------------------------------------------------------------- -->
                              <div class="text-caption">
                                <div class="row full-width q-pa-xs">
                                  <div class="col-md-6 col-12">
                                    <q-toggle
                                      dense
                                      v-model="
                                        neueBaueigenschaft
                                          .typbezogeneBaueigenschaft
                                          .systemdefiniertNichtBenutzerdefiniert
                                      "
                                      label="Ist im System vordefiniert, nicht benutzerdefiniert"
                                    />
                                  </div>
                                  <div class="col-md-6 col-12">
                                    <q-toggle
                                      dense
                                      v-model="
                                        neueBaueigenschaft
                                          .typbezogeneBaueigenschaft
                                          .sollwertNichtIstwert
                                      "
                                      label="Definiert Sollwerte, nicht Istwerte"
                                    />
                                  </div>
                                </div>
                              </div>
                              <!-- =================================================================== -->
                              <!-- ALT - ohne QExpansionItem: -->
                              <!--
                              <div class="row q-col-gutter-xs inset-shadow">
                                <b
                                  >Zuordnung der Baueigenschaft zu
                                  fachlichen Rubriken</b
                                >
                              </div>
                              -->
                              <!-- ------------------------- -->
                              <!-- NEU - mit QExpansionItem: -->
                              <br />
                              <q-expansion-item
                                expand-separator
                                :default-opened="false"
                                dense
                                header-class="bg-white text-bold inset-shadow q-gutter-xs"
                                label="Zuordnung zu fachlichen Rubriken"
                              >
                              <!-- -------------------------------------------------------------------------------------- -->
                                <div class="text-caption">
                                  <!-- NEU - #401: -->
                                  <!--
                                  neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                              .fachlicheKategorien:
                                  {{
                                    neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                              .fachlicheKategorien
                                  }}
                                  -->
                                  <div
                                    class="row full-width q-pa-xs"
                                    v-for="kategorie in optionsFachlicheKategorienBaueigenschaften"
                                    :key="kategorie.ueberschriftKategorie"
                                  >
                                    <div class="col-5">
                                      <b
                                        >{{ kategorie.ueberschriftKategorie }}
                                      </b>
                                    </div>
                                    <div class="col-7">
                                      <q-option-group
                                        type="checkbox"
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .fachlicheKategorien
                                        "
                                        :options="kategorie.optionsKategorie"
                                        bg-color="teal-2"
                                        standout="bg-teal-4 text-black"
                                        square
                                        dense
                                      >
                                      </q-option-group>
                                    </div>
                                    <q-separator class="row full-width" />
                                  </div>
                                </div>
                                <!-- -------------------------------------------------------------------------------------- -->
                                <!-- #401 - alte Schutzkategorien (ersetzt durch neue fachliche Kategorien/Rubriken), disabled: -->
                                <!--
                                <div class="text-caption">
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .projektManagement
                                        "
                                        label="Projektmanagement"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft.recht
                                        "
                                        label="Recht"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft.geografie
                                        "
                                        label="Geografie"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .geoPolitik
                                        "
                                        label="Geopolitik"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .infrastruktur
                                        "
                                        label="Infrastruktur"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .umweltUndKlima
                                        "
                                        label="Umwelt und Klima"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .hydroGeologie
                                        "
                                        label="Hydrogeologie"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft.geometrie
                                        "
                                        label="Geometrie"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .konstruktion
                                        "
                                        label="Konstruktion"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .lastAnnahmen
                                        "
                                        label="Lastannahmen"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .nutzungsUndBetriebsZeiten
                                        "
                                        label="Nutzungs- und Betriebszeiten"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft.raumKlima
                                        "
                                        label="Raumklima"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .beleuchtung
                                        "
                                        label="Beleuchtung"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .schallSchutz
                                        "
                                        label="Schallschutz"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .raumAkustik
                                        "
                                        label="Raumakustik"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .wärmeSchutz
                                        "
                                        label="Wärmeschutz"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .energieEinsparung
                                        "
                                        label="Energieeinsparung"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .standSicherheit
                                        "
                                        label="Standsicherheit"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .gebrauchsTauglichkeit
                                        "
                                        label="Gebrauchstauglichkeit"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .verkehrsSicherheit
                                        "
                                        label="Verkehrssicherheit"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .barriereFreiheit
                                        "
                                        label="Barrierefreiheit"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .brandSchutz
                                        "
                                        label="Brandschutz"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .feuchteSchutz
                                        "
                                        label="Feuchteschutz"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .korrosionsSchutz
                                        "
                                        label="Korrosionsschutz"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .abdichtungsTechnik
                                        "
                                        label="Abdichtungstechnik"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .chemischerHolzSchutz
                                        "
                                        label="Holzschutz"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .gesundheitUndHygiene
                                        "
                                        label="Gesundheit und Hygiene"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .schadstoffSchutz
                                        "
                                        label="Schadstoffschutz"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .umweltVerträglichkeit
                                        "
                                        label="Umweltverträglichkeit"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft.ökoBilanz
                                        "
                                        label="Ökobilanz"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .nachhaltigkeit
                                        "
                                        label="Nachhaltigkeit"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .materialEigenschaften
                                        "
                                        label="Materialeigenschaften"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft.sonstiges
                                        "
                                        label="Sonstiges"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .baueigenschaftsProfile
                                        "
                                        label="Baueigenschaftsprofile"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .bauinformationsProfile
                                        "
                                        label="Bauinformationsprofile"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                </div>
                                -->
                              </q-expansion-item>
                            </div>
                          </div>
                        </div>
                        <!-- =================================================================== -->
                        <div class="col-md-3 col-12">
                          <div>
                            <!--- /col, 1. Spalte  -->
                            <!-- 2. Spalte: -->
                            <div>
                              <b
                                >Angaben zum Wertetyp der Baueigenschaft
                                (systemweit gültig)</b
                              >
                            </div>
                            <br />
                            <div>
                              <b>Festlegung des Wertetyps</b>
                            </div>
                            <div>
                              <q-select
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                input-class="text-white"
                                dense
                                v-model="
                                  neueBaueigenschaft.typbezogeneBaueigenschaft
                                    .werteTyp
                                "
                                label="Wertetyp"
                                hint="Auszuwählender Typ für die Werte der Eigenschaft, z.B. 'Datumswert'"
                                hide-hint
                                :options="optionsWertetypBaueigenschaft"
                                options-dense
                              />
                            </div>
                            <br />
                            <!-- ACHTUNG: Dieses <br /> sorgt für gleichmäßge vertikale Ausrichtung der Eingabefelder auf dieser Maske!!! -->
                            <q-separator />
                            <div>
                              <b
                                >Angaben zum Wertetyp
                                'Kennwert'/'Kennwertepaar'</b
                              >
                            </div>
                            <!-- ========================================================================================================================= -->
                            <!-- NEU: Hier MarKdown Enablement für Felder symbol, einheit, operator, formel: -->
                            <!-- ACHTUNG: Im Gegensatz zu ausgewaehlteBaueigenschaft ist neueBaueigenschaft FLACH, daher -->
                            <!--          NICHT neueBaueigenschaft.typbezogeneBaueigenschaft.symbol/eineit/operator/formel sondern neueBaueigenschaft.symbol/eineit/operator/formel -->
                            <!-- <br />-->
                            <div class="q-col-gutter-xs">
                              <q-input
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  neueBaueigenschaft.typbezogeneBaueigenschaft
                                    .symbol
                                "
                                label="Symbol (Markdown-Format)"
                                hint="Symbol, z.B. 'λ'"
                                hide-hint
                                :disable="
                                  disabledFieldsNeueBaueigenschaft.symbol
                                "
                              />
                            </div>
                            <div class="row full-width q-col-gutter-xs">
                              <br />
                              <div class="col-4">
                                <small>Formatiertes Symbol:</small>
                              </div>
                              <div class="col-8">
                                <q-markdown
                                  :src="
                                    neueBaueigenschaft.typbezogeneBaueigenschaft
                                      .symbol
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                ></q-markdown>
                              </div>
                            </div>
                            <br />
                            <div class="q-col-gutter-xs">
                              <q-input
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  neueBaueigenschaft.typbezogeneBaueigenschaft
                                    .einheit
                                "
                                label="Einheit (Markdown-Format)"
                                hint="Einheit, z.B. 'W/(mK)'"
                                hide-hint
                                :disable="
                                  disabledFieldsNeueBaueigenschaft.einheit
                                "
                              />
                            </div>
                            <div class="row full-width q-col-gutter-xs">
                              <br />
                              <div class="col-4">
                                <small>Formatierte Einheit:</small>
                              </div>
                              <div class="col-8">
                                <q-markdown
                                  :src="
                                    neueBaueigenschaft.typbezogeneBaueigenschaft
                                      .einheit
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                ></q-markdown>
                              </div>
                            </div>
                            <br />
                            <!-- --------------------------------------------------------------------------------------- -->
                            <!-- NEU: #514, Operator in typbezogenen Feldern wird nicht mehr unterstützt, daher disabled -->
                            <!--
                            <div class="q-col-gutter-xs">
                              <q-input
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  neueBaueigenschaft.typbezogeneBaueigenschaft
                                    .operator
                                "
                                label="Operator (Markdown-Format)"
                                hint="Operator, z.B. '<' oder '≤'"
                                hide-hint
                                :disable="
                                  disabledFieldsNeueBaueigenschaft.operator
                                "
                              />
                            </div>
                            <div class="row full-width q-col-gutter-xs">
                              <br />
                              <div class="col-4">
                                <small>Formatierter Operator:</small>
                              </div>
                              <div class="col-8">
                                <q-markdown
                                  :src="
                                    neueBaueigenschaft.typbezogeneBaueigenschaft
                                      .operator
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                ></q-markdown>
                              </div>
                            </div>
                            <br />
                            -->
                            <!-- --------------------------------------------------------------------------------------- -->
                            <div class="q-col-gutter-xs">
                              <q-input
                                autogrow
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  neueBaueigenschaft.typbezogeneBaueigenschaft
                                    .formel
                                "
                                label="Formel (Markdown-Format)"
                                :hint="hintFuerFormelMitSonderzeichen"
                                hide-hint
                                :disable="
                                  disabledFieldsNeueBaueigenschaft.formel
                                "
                              />
                            </div>
                            <div class="row full-width q-col-gutter-xs">
                              <br />
                              <div class="col-4">
                                <small>Formatierte Formel:</small>
                              </div>
                              <div class="col-8">
                                <q-markdown
                                  :src="
                                    neueBaueigenschaft.typbezogeneBaueigenschaft
                                      .formel
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                ></q-markdown>
                              </div>
                            </div>
                            <br />
                            <!-- NEU: q-select zur Auswahl von Sonderzeichen -->
                            <b
                              >Sonderzeichen im Markdown-Format in obige Felder
                              einfügen:</b
                            >
                            <div class="text-caption">
                              Im folgenden Dropdown-Menü ein Sonderzeichen
                              auswählen. Dabei wird dessen-Formatierung in die
                              Zwischenablage kopiert. Diese mit Strg+V an der
                              gewünschten Cursorposition in obige Felder
                              einfügen.
                            </div>
                            <q-select
                              dense
                              square
                              bg-color="teal-2"
                              standout="bg-teal-4 text-black"
                              input-class="text-white"
                              filled
                              options-dense
                              :multiple="false"
                              v-model="
                                selectModelSonderzeichenNeueBaueigenschaft
                              "
                              :options="selectOptionsSonderzeichen"
                              stack-label
                              label="Sonderzeichen - per Dropdown-Menü (rechts) auswählen"
                              :display-value="
                                `${
                                  selectModelSonderzeichenNeueBaueigenschaft
                                    ? selectModelSonderzeichenNeueBaueigenschaft.label
                                    : 'Kein Sonderzeichen ausgewählt'
                                }`
                              "
                              :display-value-sanitize="false"
                              @input="
                                copyToClipboardSonderzeichenNeueBaueigenschaft(
                                  selectModelSonderzeichenNeueBaueigenschaft.value
                                )
                              "
                              :disable="
                                disabledFieldsNeueBaueigenschaft.sonderzeichen
                              "
                            >
                              <template v-slot:append>
                                <q-icon
                                  v-if="
                                    selectModelSonderzeichenNeueBaueigenschaft !=
                                      null
                                  "
                                  class="cursor-pointer"
                                  name="clear"
                                  @click.stop="
                                    selectModelSonderzeichenNeueBaueigenschaft = null
                                  "
                                ></q-icon>
                              </template>
                            </q-select>
                            <!-- Selbstgemachter Hint unter dem q-select: -->
                            <div
                              v-if="
                                copyToClipboardDoneSonderzeichenNeueBaueigenschaft
                              "
                              class="text-caption"
                            >
                              Die Formatierung für das ausgewählte Sonderzeichen
                              mit Strg+V an der gewünschten Position in obige
                              Markdown-Felder einfügen
                            </div>
                            <!-- Ende neuer Code für symbol, einheit, operator, formel als Markdown -->
                            <!-- ========================================================================================================================= -->
                            <div>
                              <br />
                              <br />
                              <b>Angaben zum Wertetyp 'Aufzählungswert'</b>
                              <br />
                              <div class="text-caption">
                                Reserviert für die Definition der selektierbaren
                                Optionen für den Wertetyp 'Aufzählungswert'
                                (TBD)
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6 col-12">
                          <div
                            class="row q-col-gutter-xs inset-shadow-3 q-pb-md"
                          >
                            <b
                              >Aktivierungszustand der Baueigenschaft am
                              ausgewählten Baustoff im Baustoffbaum</b
                            >
                            <div class="col-6">
                              <q-radio
                                color="accent"
                                class="text-accent"
                                dense
                                v-model="
                                  neueBaueigenschaft.aktiviertNichtDeaktiviert
                                "
                                :val="true"
                                label="Aktiviert (am ausgewählten Baustoff sowie an allen Elternbaustoffen bis zum Wurzelbaustoff)"
                              />
                            </div>
                            <div class="col-6">
                              <q-radio
                                dense
                                color="primary"
                                v-model="
                                  neueBaueigenschaft.aktiviertNichtDeaktiviert
                                "
                                :val="false"
                                label="Deaktiviert (am ausgewählten Baustoff sowie an allen Kindbaustoffen)"
                              />
                            </div>
                            <!-- Die folgenden divs sind notwendig, um Abstand zwischen den q-radios für Aktivierungszustand und den Zeilen darunter zu bekommen, -->
                            <!-- insbesondere wenn die Fensterbreite schmal ist - sonst ragt der Label-Text an den q-radios in die Zeilen darunter -->
                            <!--
                              <div class="row">
                              <br />
                            </div>
                            -->
                          </div>
                          <div
                            class="row full-width q-col-gutter-xs inset-shadow"
                          >
                            <div class="col-md-6 col-12">
                              <div>
                                <b
                                  >Wertbezogene Angaben (gemäß Wertetyp) zur
                                  aktivierten Baueigenschaft am ausgewählten
                                  Baustoff
                                </b>
                              </div>
                              <br />
                              <b>Kennwert/Kennwertepaar</b>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.kennWert1"
                                  type="number"
                                  label="Kennwert 1"
                                  hint="Numerischer Wert, z.B. '3,14'"
                                  hide-hint
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.kennWert1
                                  "
                                />
                              </div>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.kennWert2"
                                  type="number"
                                  label="Kennwert 2"
                                  hint="Numerischer Wert, z.B. '5000"
                                  hide-hint
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.kennWert2
                                  "
                                />
                              </div>
                              <b>Datumswert/Datumswertepaar</b>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.datumsWert1"
                                  label="Datumswert 1"
                                  stack-label
                                  hint="Datum im Format 'tt.mmm.jjjj', z.B. '01.12.2019'"
                                  hide-hint
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.datumsWert1
                                  "
                                  type="date"
                                />
                              </div>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.datumsWert2"
                                  label="Datumswert 2"
                                  stack-label
                                  hint="Datum im Format 'tt.mm.jjjj', z.B. '31.12.2020'"
                                  hide-hint
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.datumsWert2
                                  "
                                  type="date"
                                />
                              </div>
                              <b>Tageszeitwert/Tageszeitwertepaar</b>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.tagesZeitWert1"
                                  label="Tageszeitwert 1"
                                  stack-label
                                  hint="Uhrzeit im 24-Stunden-Format 'hh:mm' z.B. '08:00'"
                                  hide-hint
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.tagesZeitWert1
                                  "
                                  type="time"
                                />
                              </div>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.tagesZeitWert2"
                                  label="Tageszeitwert 2"
                                  stack-label
                                  hint="Uhrzeit im 24-Stunden-Format'hh:mm', z.B. '18:00'"
                                  hide-hint
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.tagesZeitWert2
                                  "
                                  type="time"
                                />
                              </div>
                              <b>Bezeichnungswert/Bezeichnugswertepaar</b>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.bezeichnungsWert1"
                                  label="Bezeichnungswert 1"
                                  hint="Frei wählbare Bezeichnung, z.B. 'Gültig ab'"
                                  hide-hint
                                  autogrow
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.bezeichnungsWert1
                                  "
                                />
                              </div>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.bezeichnungsWert2"
                                  label="Bezeichnungswert 2"
                                  hint="Frei wählbare Bezeichnung, z.B. 'Gültig bis'"
                                  hide-hint
                                  autogrow
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.bezeichnungsWert2
                                  "
                                />
                              </div>
                              <div class="row full-width q-pa-none">
                                <div class="col-3">
                                  <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                                  <b>Wahrheitswert</b>
                                </div>
                                <div class="col-9 text-caption">
                                  <!-- NEU in Quasar 1.8: Zustand des q-toggles ist neutrales "indeterminate" bei Wert "null", mit Prop toggle-indeterminate -->
                                  <q-toggle
                                    dense
                                    :disable="
                                      disabledFieldsNeueBaueigenschaft.wahrheitsWert
                                    "
                                    v-model="neueBaueigenschaft.wahrheitsWert"
                                    toggle-indeterminate
                                    label="unzutreffend/undefiniert/zutreffend"
                                  />
                                </div>
                              </div>
                              <br />
                              <div>
                                <b>Aufzählungswert</b>
                              </div>
                              <div>
                                <!-- Verworfen: Hier statt Inline Code die Kindkomponente baustoffe-baueigenschaft-aufzaehlungs-werte-auswahl aufrufen??? -->
                                <q-badge
                                  v-if="localStore.state.debugMode"
                                  color="secondary"
                                  multi-line
                                >
                                  selectModelAufzaehlungswertNeueBaueigenschaft:
                                  <br />
                                  {{
                                    selectModelAufzaehlungswertNeueBaueigenschaft
                                  }}
                                  <br />
                                  selectOptionsAufzaehlungswertNeueBaueigenschaft:
                                  <br />
                                  {{
                                    selectOptionsAufzaehlungswertNeueBaueigenschaft
                                  }}
                                  <br />
                                  selectFilterOptionsAufzaehlungswertNeueBaueigenschaft:
                                  <br />
                                  {{
                                    selectFilterOptionsAufzaehlungswertNeueBaueigenschaft
                                  }}
                                </q-badge>
                                <q-select
                                  dense
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  input-class="text-white"
                                  filled
                                  v-model="
                                    selectModelAufzaehlungswertNeueBaueigenschaft
                                  "
                                  :options="
                                    selectFilterOptionsAufzaehlungswertNeueBaueigenschaft
                                  "
                                  @filter="
                                    selectFilterFunctionAufzaehlungswertNeueBaueigenschaft
                                  "
                                  @new-value="
                                    createSelectValueAufzaehlungswertNeueBaueigenschaft
                                  "
                                  :multiple="true"
                                  label="Mögliche Optionen für den Aufzählungswert eingeben"
                                  stack-label
                                  use-chips
                                  options-selected-class="text-primary"
                                  options-dense
                                  use-input
                                  input-debounce="0"
                                  bottom-slots
                                  @focus="
                                    showHintSelectAufzaehlungswertNeueBaueigenschaft = true
                                  "
                                  @blur="
                                    showHintSelectAufzaehlungswertNeueBaueigenschaft = false
                                  "
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.aufzaehlungsWert
                                  "
                                >
                                  <!-- TODO: style="width: 720px" -->
                                  <!-- Zu den Icons siehe https://quasar.dev/vue-components/select#Decorators - erfordert "bottom-slots" Prop am q-select  -->
                                  <template v-slot:append>
                                    <q-icon name="search" @click.stop />
                                    <q-icon
                                      name="cancel"
                                      @click.stop="
                                        selectModelAufzaehlungswertNeueBaueigenschaft = []
                                      "
                                      class="cursor-pointer"
                                      color="primary"
                                    />
                                    <!-- ACHTUNG: TODO - Muss oben leerer Array sein???  -->
                                  </template>
                                  <!-- Den folgenden VSlot für den Hint disabled, da er viel vertikalen Platz brauchte - ersetzt durch Hinweistext in rechter Spalte! -->
                                  <!--
                                  <template
                                    v-slot:hint
                                    v-if="
                                      showHintSelectAufzaehlungswertNeueBaueigenschaft
                                    "
                                  >
                                    <ul class="q-pl-xs">
                                      <li>
                                        <strong>Hinzufügen</strong> von
                                        möglichen Optionen für den
                                        Aufzählungswert: Die gewünschte
                                        Bezeichnung für eine Option in das
                                        Eingabefeld eingeben und durch Drücken
                                        der Eingabetaste zur Liste der Optionen
                                        hinzufügen. Beispiele: "xs", "s", "m",
                                        "l", "xl", "xxl" (jeweils mittels
                                        Eingabetaste zur Liste der Optionen
                                        hinzufügen)
                                      </li>
                                      <li>
                                        <strong>Filtern:</strong> Einen
                                        Filtertext in das Eingabefeld eingeben.
                                        Auch unvollständige Angaben sind
                                        möglich. Dies filtert die im
                                        Dropdown-Menü angezeigten Optionen.
                                      </li>
                                      <li>
                                        <strong>Abwählen:</strong> Zur Liste der
                                        Optionen hinzugefügte Optionen können
                                        mit
                                        <q-icon
                                          name="cancel"
                                          color="primary"
                                        />&nbsp;abgewählt werden.
                                      </li>
                                      <li>
                                        <strong>Auswählen:</strong>
                                        Bereits abgewählte Optionen verbleiben
                                        im Dropdown-Menü und können dort erneut
                                        ausgewählt werden
                                      </li>
                                      <li>
                                        Zum
                                        <strong>Speichern:</strong> Unten
                                        Schaltfläche "Speichern" drücken.
                                      </li>
                                    </ul>
                                  </template>
                                  -->
                                  <!-- Es folgt der v-slot zur Anzeige des q-chips für eine ausgewählte Option: -->
                                  <template v-slot:selected-item="scope">
                                    <!-- <div v-if="localStore.state.debugMode"> -->
                                    <!--   scope: {{scope}} -->
                                    <!-- </div> -->
                                    <!-- scope ist hier ein Objekt, das einen selektierten Optionswert repräsentiert, welcher per q-chip angezeigt wird -->
                                    <!-- Dieses besteht aus den Feldern scope.index, .opt, .sanitize, .selected und .tabindex -->
                                    <q-chip
                                      removable
                                      dense
                                      @remove="scope.removeAtIndex(scope.index)"
                                      :tabindex="scope.tabindex"
                                      color="primary"
                                      text-color="white"
                                      class="q-ma-xs shadow-4"
                                    >
                                      <!-- ALT: -->
                                      <!-- {{ scope.opt.valueAufzaehlungswert }} -->
                                      <!-- ALT - TODO bei option-value="valueAufzaehlungswert" -->
                                      <!-- <q-avatar color="secondary" text-color="white" :icon="scope.opt.icon" /> -->
                                      <!-- ALT -->
                                      <!-- ALT: -->
                                      <!-- {{ scope.opt }} -->
                                      <!-- ACHTUNG: Bzgl. Sanitization wird hier für die Anzeige im q-chip kein v-html verwendet, sondern wie unten bei den Options nur Moustaches -->
                                      <!-- NEU: Long Label Truncation, mit Tooltip der vollen Bezeichnung, mittels spezieller CSS Class "ellipsis": -->
                                      <!-- Damit Truncation für lange Texte an QChip - Vorlage: https://quasar.dev/vue-components/chip#Example--Long-label-truncation -->
                                      <div class="ellipsis">
                                        {{ scope.opt }}
                                        <q-tooltip
                                          :delay="1000"
                                          :offset="[0, 10]"
                                          max-width="500px"
                                          content-class="bg-secondary text-white text-caption shadow-4"
                                          >{{ scope.opt }}</q-tooltip
                                        >
                                      </div>
                                    </q-chip>
                                  </template>
                                  <!-- Es folgt der v-slot zur Anzeige der Options im Dropdown-Menü -->
                                  <template v-slot:option="scope">
                                    <q-item
                                      v-bind="scope.itemProps"
                                      v-on="scope.itemEvents"
                                    >
                                      <q-item-section>
                                        <q-item-label>{{
                                          scope.opt
                                        }}</q-item-label>
                                      </q-item-section>
                                    </q-item>
                                  </template>
                                </q-select>
                                <!-- /q-select für Aufzählungswert -->
                                <!-- Platz für Hint schaffen: -->
                                <!-- ACHTUNG: Sonst erscheint vertikaler Scrollbalken, wenn das QSelect Fokus hat! -->
                                <!-- Disabled, wie den Hint selbst -->
                                <!--
                                <br />
                                <br />
                                <br />
                                <br />
                                <br />
                                <br />
                                -->
                              </div>
                            </div>
                            <!-- /col, 3. Spalte -->
                            <!-- 4. Spalte:       -->
                            <!-- ACHTUNG: 3. Spalte darf nur col-4 sein, wenn oben q-col-gutter-xs, nicht q-gutter-xs, sonst Column Wrapping! Workaround: col-3 -->
                            <div class="col-md-6 col-12">
                              <div>
                                <b
                                  >Wertbezogene Merkmale der aktivierten
                                  Baueigenschaft am ausgewählten Baustoff im
                                  Baustoffbaum</b
                                >
                              </div>
                              <br />
                              <div>
                                <b>Systemverwaltete wertbezogene Merkmale</b>
                              </div>
                              <div>
                                <!-- HINWEIS: definiertNichtUndefiniert ist systemverwaltet (:disable=true), nciht benutzerverwaltet-->
                                <q-toggle
                                  :value="istDefiniertNeueBaueigenschaft"
                                  label="Werte sind in definiertem Zustand"
                                  :disable="true"
                                />
                              </div>
                              <div>
                                <q-toggle
                                  v-model="
                                    neueBaueigenschaft.ererbtNichtGesetzt
                                  "
                                  label="Werte sind vom Eltenknoten ererbt"
                                  :disable="true"
                                />
                              </div>
                              <!-- NEU - #514: Merkmal verschoben von wertbezogenen nach typbezogenen Feldern, daher hier disabled -->
                              <!--
                              <div>
                                <q-toggle
                                  v-model="
                                    neueBaueigenschaft.systemdefiniertNichtBenutzerdefiniert
                                  "
                                  label="Werte sind vom System vorgegeben (d.h. nicht vom Benutzer eingegeben)"
                                  :disable="true"
                                />
                              </div>
                              -->
                              <div>
                                <q-toggle
                                  v-model="
                                    neueBaueigenschaft.systemberechnetNichtSystemgesetzt
                                  "
                                  label="Werte sind vom System berechnet (d.h. nicht vom Benutzer eingegeben)"
                                  :disable="true"
                                />
                              </div>
                              <br />
                              <div>
                                <b>Benutzerverwaltete wertbezogene Merkmale</b>
                              </div>
                              <div>
                                <q-toggle
                                  v-model="
                                    neueBaueigenschaft.vererbtAnKindknoten
                                  "
                                  label="Werte werden vererbt an direkte und indirekte Kindknoten (stets der Fall im Baustoffbaum)"
                                />
                              </div>
                              <!-- NEU - #514: Merkmal verschoben von wertbezogenen nach typbezogenen Feldern, daher hier disabled -->
                              <!--
                              <div>
                                <q-toggle
                                  v-model="
                                    neueBaueigenschaft.sollwertNichtIstwert
                                  "
                                  label="Werte sind Sollwerte, nicht Istwerte"
                                />
                              </div>
                              -->
                              <div>
                                <!-- TODO: q-select für Gütebewertung -->
                                <q-select
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  input-class="text-white"
                                  dense
                                  v-model="neueBaueigenschaft.güteBewertung"
                                  label="Gütebewertung für die Werte der Baueigenschaft"
                                  hint="Auswählbare Einschätzung der Güte des Werts der Baueigenschaft, in drei farblich bezeichneten Gütestufen, z.B. 'gelb'"
                                  hide-hint
                                  :options="optionsGueteBewertung"
                                  options-dense
                                />
                                <div class="q-pl-sm text-caption">
                                  <b>Hinweise:</b> Im Auswahlfeld
                                  <b>"Aufzählungswert"</b> in der dritten Spalte
                                  unten können die möglichen Optionen, die eine
                                  Baueigenschaft des Wertetyps "Aufzählungswert"
                                  annehmen kann, festgelegt werden:
                                  <ul class="q-pl-sm">
                                    <li>
                                      <b>Hinzufügen</b>
                                      von möglichen Optionen: Die gewünschte
                                      Bezeichnung für eine Option in das
                                      Eingabefeld eingeben und durch Drücken der
                                      Eingabetaste zur Liste der Optionen
                                      hinzufügen.
                                      <!-- Beispiele: "xs", "s", "m", "l",
                                    "xl", "xxl" (jeweils ohne Anführungszeichen
                                    in das Eingabefeld eingeben und mittels
                                    Eingabetaste zur Liste der Optionen
                                    hinzufügen)
                                    --></li>
                                    <li>
                                      <b>Filtern:</b>
                                      Einen Filtertext in das Eingabefeld
                                      eingeben. Auch unvollständige Angaben sind
                                      möglich. Dies filtert die im Dropdown-Menü
                                      angezeigten Optionen.
                                    </li>
                                    <li>
                                      <b>Abwählen:</b> Zur Liste hinzugefügte
                                      Optionen können mit
                                      <q-icon
                                        name="cancel"
                                        color="primary"
                                      />&nbsp;abgewählt werden.
                                    </li>
                                    <li>
                                      <b>Auswählen:</b>
                                      Abgewählte Optionen verbleiben im
                                      Dropdown-Menü und können dort erneut
                                      ausgewählt werden.
                                    </li>
                                    <li>
                                      Zum
                                      <b>Speichern:</b>
                                      Schaltfläche "Neue Baueigenschaft
                                      speichern" drücken.
                                    </li>
                                  </ul>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <!-- /col, 4. Spalte-->
                      </div>
                      <q-separator />
                      <!-- Es folgend die Buttons unter dem q-form: -->
                      <div class="row full-width q-pa-xs q-col-gutter-xs">
                        <div class="col-md-3 col-12">
                          <!-- NEU: Fix 22.05.2020 - type="submit" entfernt, da sonst q-form einen Fehler beim @submit Event auslöst, der zum Logout führt! -->
                          <!-- ALT: style="width: 90%" -->
                          <q-btn
                            class="stretch full-width"
                            style="height: 100%"
                            color="positive"
                            glossy
                            label="Neue Baueigenschaft speichern"
                            no-caps
                            @click="createNeueBaueigenschaft()"
                          />
                        </div>
                        <div class="col-md-3 col-12">
                          <!-- ALT: style="width: 90%" -->
                          <q-btn
                            class="stretch full-width"
                            style="height: 100%"
                            color="deep-orange"
                            glossy
                            text-color="white"
                            label="Eingaben auf Originalwerte zurücksetzen"
                            no-caps
                            @click="resetNeueBaueigenschaft()"
                          />
                        </div>
                        <!--
                        <q-btn
                          color="negative"
                          glossy
                          label="Löschen"
                          no-caps
                        />
                        -->
                      </div>
                    </div>
                  </q-form>
                </q-tab-panel>
              </q-tab-panels>
              <!-- /Panels unter "Baueigenschaften" -->
              <!-- ------------------------------------------------------------------------------------------------------------------- -->
            </q-tab-panel>
            <!-- Es folgen die weiteren Panels in der oberen Panel-Leiste -->
            <!-- NEU: Das Tab "Zugeordnete Rohstoffe" nur anzeigen, wenn der ausgewählte Baustoff nicht der Wuruzelknoten und kein Rohstoff ist, per computed Property: -->
            <!-- HINWEIS: Das zugehörige q-tab ist mit ähnlichem :disable bereits disabled in diesen Fällen -->
            <q-tab-panel
              name="zugeordneteRohstoffeTabBaustoffe"
              class="q-pa-xs"
              v-if="
                selectedNodeTreeBaustoffe.baumKnotenTyp !== 'Wurzelknoten' &&
                  !selectedKeyTreeBaustoffeIstImRohstoffUnterbaum
              "
            >
              <q-card class="q-pa-xs">
                <!-- TODO: Ginge dies besser per v-model am q-tab oder q-tab-panel?  -->
                <div v-if="localStore.state.debugMode">
                  <!-- NEU - Formatierung teilweise mit stringify -->
                  <!-- Vorlage: https://stackoverflow.com/questions/45539735/prettify-json-string-vuejs2-webpack -->
                  <!-- Erfordert Vue v-html und computed Property, die JSON.stringify aufruft! -->
                  nodesTreeRohstoffe: selectedKeyTreeBaustoffe:
                  {{ selectedKeyTreeBaustoffe }}
                  <br />
                  <br />
                  selectedKeyTreeRohstoffe:
                  {{ selectedKeyTreeRohstoffe }}
                  <br />
                  <br />
                  expandedKeysTreeRohstoffe:
                  {{ expandedKeysTreeRohstoffe }}
                  <br />
                  <br />
                  tickedKeysTreeRohstoffe:
                  {{ tickedKeysTreeRohstoffe }}
                  <br />
                  <br />
                  <q-separator />
                  <br />
                  selectedNodeTreeBaustoffe.zugeordneteRohstoffe:
                  <!-- ALT: -->
                  <!-- {{ selectedNodeTreeBaustoffe.zugeordneteRohstoffe }} -->
                  <!-- NEU: -->
                  <pre v-html="stringifyZugeordneteRohstoffe"></pre>
                  <q-separator />
                  <br />
                </div>
                <div v-if="selectedNodeTreeBaustoffe != null">
                  <div class="text-h6 q-pa-xs" v-if="$q.screen.gt.sm">
                    Zugeordnete Rohstoffe an dem im Baustoffbaum ausgewählten
                    Baustoff
                    <strong
                      >"{{
                        selectedNodeTreeBaustoffe.baustoffBezeichnung
                      }}"</strong
                    >
                  </div>
                  <div class="text-subtitle1 q-pa-xs" v-else>
                    Zugeordnete Rohstoffe an dem im Baustoffbaum ausgewählten
                    Baustoff
                    <strong
                      >"{{
                        selectedNodeTreeBaustoffe.baustoffBezeichnung
                      }}"</strong
                    >
                  </div>
                  <q-separator />
                </div>
                <!-- <div class="q-pa-xs" style="max-width: 1500px"> -->
                <!-- HINWEIS: Dieses div zwischen q-tab-panel und q-table ist WICHTIG, falls das Panel in     -->
                <!--          ein Splitter-Model (hier im rechten Panel) eingebettet ist                      -->
                <!-- ALT: <div class="q-gutter-sm" style="max-width: 1500px"> -->
                <!-- ALT: :data="dataTableBauinformationen" -->
                <!-- dataHierarchyRohstoffe - disabled, nur für QHierarchy:-->
                <!--
                      <br />
                      <br />
                      dataHierarchyRohstoffe:
                      {{ dataHierarchyRohstoffe}}
                      -->
                <!-- </div> -->
                <!-- Hier testweise QHierarchy Quasar Extension zur Anzeige der zugeordneten Rohstoffe -->
                <!-- Kann Hierarchie darstellen, bei QTree Tick Strategy "strict" (wo auch Verzweigungsknoten im Rohstoffunterbaum tickable sind, -->
                <!-- allerdings schlecht unterscheidbar, was ticked war, und was nur ein Elternknoten im Rohstoffunterbaum ist -->
                <!-- Die Frage ist, ob man für die QHierarchy trotzdem die Bezeichnungsspalte per SASS anders färben kann und sticky Columns dafür haben kann -->
                <!-- Vermutlich ja, mit entsprechender CSS ähnlich wie für QTable Bauinformationen, siehe dort class="stickyColumnsTable1HeaderLines" -->
                <!-- Allerdings nicht getestet, under the Covers benutzt QTable eine QMarkupTable, wie man im Source Code auf GitHub sehen kann -->
                <!-- ACHTUNG: QHierarchy braucht für sortable Columns ein Feld sortable=true in seiner Column Definition!!! -->
                <!-- Daneben gibt es ein Feld filterable: true !!! -->
                <!-- Die Column Definition dafür ist relativ statisch, daher kein Problem, diese Felder so anzugeben -->
                <!--
                      <q-hierarchy
                        ref="hierarchyRohstoffe"
                        :columns=columnsHierarchyRohstoffe
                        :data=dataHierarchyRohstoffe
                        dense
                      >
                      </q-hierarchy> -->
                <!-- Weitere Alternative: QTable wie bei zugeordnete Bauinformationen, kann allerdings die Hierarchie nicht darstellen -->
                <!--    Eventuell ohne separate Slots für Header und Body, da keine Toggles für dynamische Spalten notwendig sind -->
                <!-- Weitere Alternative: Den QTree zur Auswahl der Rohstoffe auch gleich zur permanenten Anzeige der zugeordneten Rohstoffe verwenden -->
                <!-- Abwägung der Alternativen in Methode loadTreeRohstoffe() unten-->

                <!-- ------------------------------------------------------------------------------------------------------ -->
                <!-- Unter der QTable nun ein QTree zur kombinierten Auswahl UND Anzeige der zugeordneten Rohstoffe: -->
                <!-- ACHTUNG: default-expand-all funktioniert nur beim allerersten Rendern, wenn die Nodes nicht assigned sind -->
                <!-- Siehe https://stackoverflow.com/questions/56125406/default-expand-all-doesnt-work-for-q-tree-vue-js -->
                <!-- Lösung: Dynamisch den Tree expandieren in loadTreeRohstoffe() - siehe Hinweise dort -->
                <!-- ACHTUNG: Erst die Angabe einer tick-strategy sorgt dafür, dass automatisch Checkboxes für das Ticking im Header erscheinen -->
                <!-- Die vorher selbst eingefügten q-checkboxes sind dann überflüssig, diese disabled!!! -->
                <div class="row full-width q-pa-xs q-col-gutter-xs">
                  <q-expansion-item
                    label="Kurzanleitung"
                    expand-separator
                    :default-opened="false"
                    dense
                    class="stretch full-width"
                    header-class="
                    bg-grey-4 text-black text-bold shadow-2
                  "
                  >
                    <div
                      class="q-pa-xs"
                      v-if="selectedNodeTreeBaustoffe != null"
                    >
                      Um die <b>Zusammensetzung</b> des ganz links im
                      Baustoffbaum ausgewählten Baustoffs
                      <strong
                        >"{{
                          selectedNodeTreeBaustoffe.baustoffBezeichnung
                        }}"</strong
                      >
                      zu erfassen, könnne Sie in diesem Formular dem
                      ausgewählten Baustoff bestimmte <b>Rohstoffe</b> aus dem
                      unten angezeigten
                      <strong>Rohstoffbaum</strong>
                      zuordnen:
                      <ul>
                        <li>
                          Zunächst für den ganz links im Baustoffbaum
                          ausgewählten Baustoff alle
                          <strong>zugeordneten Rohstoffe</strong> im
                          Rohstoffbaum unten <strong>auswählen</strong> bzw.
                          <strong>abwählen</strong> mit Checkboxen
                          <q-checkbox
                            v-model="alwaysOn"
                            disable
                            dense
                            color="primary"
                          />
                          bzw.
                          <q-checkbox
                            v-model="alwaysOff"
                            disable
                            dense
                            color="primary"
                          />.
                        </li>
                        <li>
                          Dann für einen mit Checkbox
                          <q-checkbox
                            v-model="alwaysOn"
                            disable
                            dense
                            color="primary"
                          />
                          ausgewählten zugeordneten Rohstoff diesen ggf. per
                          Klick auf das graue Dreieck links von dieser Checkbox
                          <strong>expandieren</strong>
                        </li>
                        <li>
                          Dann für den jeweiligen ausgewählten zugeordneten
                          Rohstoff in seiner Unterzeile für die Angaben zum
                          Rohstoff im Baustoff ("Anteil in Baustoff:") jeweils
                          per Klick mit der
                          <strong>linken Maustaste</strong> ein
                          <strong>Popup-Formular</strong> aufrufen
                        </li>
                        <li>
                          In diesem Popup-Formular die zugehörigen
                          <strong
                            >Angaben zum Rohstoff im Baustoff ändern</strong
                          >
                        </li>
                        <li>
                          Im Popup-Formular die geänderten Angaben mittels der
                          Schaltfläche
                          <strong>"Angaben zuweisen"</strong>
                          aktualisieren oder das Popup-Formular mittels der
                          Schaltfläche
                          <strong>"Abbrechen"</strong>
                          schließen
                        </li>
                        <li>
                          Anschließend mit der Schaltfläche
                          <strong>"Zuordnungen speichern"</strong>
                          alle geänderten Auswahlen der zugeordneten Rohstoffe
                          und die eingegebenen Angaben zu diesen Rohstoffen im
                          Baustoff
                          <strong>speichern</strong>
                        </li>
                        <li>
                          Alternativ mit der Schaltfläche
                          <strong
                            >"Eingaben auf Originalwerte zurücksetzen"</strong
                          >
                          alle geänderten Auswahlen der zugeordneten Rohstoffe
                          und die eingegebenen Angaben zu diesen Rohstoffen im
                          Baustoff auf die bisherigen, unveränderten
                          Originalwerte aus der Datenbank
                          <strong>zurücksetzen</strong>
                        </li>
                      </ul>
                    </div>
                  </q-expansion-item>
                </div>
                <div class="row full-width q-pa-xs q-gutter-xs">
                  <div class="col-md-3 col-12">
                    <!-- style="width:90%" -->
                    <!-- ALT -->
                    <q-input
                      ref="filterTreeRohstoffe"
                      v-model="filterTreeRohstoffe"
                      bg-color="teal-2"
                      standout="bg-teal-4 text-black"
                      square
                      dense
                      debounce="300"
                      color="primary"
                    >
                      <template v-slot:append>
                        <q-icon name="search" />
                        <q-icon
                          v-if="filterTreeRohstoffe !== ''"
                          name="clear"
                          class="cursor-pointer"
                          @click="resetFilterTreeRohstoffe"
                        />
                      </template>
                    </q-input>
                  </div>
                  <!-- <div class="col-1"></div> -->
                  <div class="col-md-3 col-12">
                    <!-- ACHTUNG: Am folgenden q-btn kann type="submit" bleiben, da nicht Teil eines q-forms!!! -->
                    <!-- NEU: QButton disablen in Abhängigkeit von Benutzerrolle -->
                    <q-btn
                      class="stretch full-width"
                      style="width:90% height:100%"
                      :disable="benutzerRolleIstMitarbeiter"
                      color="positive"
                      glossy
                      type="submit"
                      @click="updateZugeordneteRohstoffeAusgewaehlterBaustoff()"
                      label="Zuordnungen an Baustoff speichern"
                      no-caps
                    />
                  </div>
                  <div class="col-md-3 col-12">
                    <!-- NEU: QButton disablen in Abhängigkeit von Benutzerrolle -->
                    <q-btn
                      class="stretch full-width"
                      style="width:90% height:100%"
                      :disable="benutzerRolleIstMitarbeiter"
                      color="deep-orange"
                      glossy
                      text-color="white"
                      @click="resetZugeordneteRohstoffeAusgewaehlterBaustoff()"
                      label="Eingaben auf Originalwerte zurücksetzen"
                      no-caps
                    />
                  </div>
                  <!-- TODO: Löschen Baustoffbeschreibung??? -->
                </div>
                <q-separator />
                <q-scroll-area style="height:1200px">
                  <!-- 14.04.20 default-expand-all von sts entfernt -->
                  <!-- ACHTUNG: Für selektive Expansion nur der ticked Nodes darf -->
                  <!-- default-expand-all NICHT als Prop spezifiziert werden! -->
                  <!-- NEU: Tests mit tick-strategy="none" bei benutzerRolle === "Mitarbeiter" (dann kein Ticking erlaubt), sonst "strict", per computed-Funktion -->
                  <!--      und :ticked-strategy = "computeTickStrategyTreeRohstoffe" - funktioniert aber so nicht, da bei Benutzerrolle "Mitarbeiter" dann gar keine -->
                  <!--      Checkboxes für Ticking angezeigt werden. Müsste per manuell generierten Checkboxes für das Ticking gelöst werden (siehe Testcode unten) -->
                  <!--      Da selbst mit enableten tickable Nodes bei Benutzerrolle "Mitarbeiter" kein Speichern möglich ist, einstweilen das Ticking nicht -->
                  <!--      disabled in diesen Fall, d.h. tick-strategy="strict" belassen statt :tick-strategy= "computeTickStrategyTreeRohstoffe" -->
                  <!-- TODO XXXXXX: Dies lösen mit manuell generierten Checkboxes für das Ticking, am VSlot für den Header der Nodes im Tree (siehe Testcode unten) -->
                  <q-tree
                    dense
                    tick-strategy="strict"
                    ref="treeRohstoffe"
                    :nodes="nodesTreeRohstoffe"
                    node-key="_id"
                    label-key="baustoffBezeichnung"
                    :selected.sync="selectedKeyTreeRohstoffe"
                    :expanded.sync="expandedKeysTreeRohstoffe"
                    :ticked.sync="tickedKeysTreeRohstoffe"
                    selected-color="primary"
                    :filter="filterTreeRohstoffe"
                    no-nodes-label="Keine Rohstoffe vorhanden"
                    no-results-label="Keine Rohstoffe erfüllen die Filterbedingungen"
                  >
                    <template v-slot:default-header="prop">
                      <!-- ACHTUNG: Geändert von v-slot:default-header="{ node }" -->
                      <!-- ---------------------------------------------------------------------------------------------------------- -->
                      <!-- Code für Popup Menüs, aktuell nicht verwendet: -->
                      <!-- <div class="row items-center" @click.stop> -->
                      <!-- Für q-popup-edit oder q-menu mit context-menu prop, stoppt die normale Knotenselektion mit linker Maustaste! -->
                      <!-- Hat aber keinen Einfluss auf Knotenselektion per Kontextmenü mit @click=selectedKeyTreeBaustoffe = prop.node._id, diese wirft -->
                      <!-- Fehler, dass prop und key nicht definiert sind - allerdings wird ja node.baustoffbezeichnung weiter unten verwendet wird und ist -->
                      <!-- somit definiert. Mit entsprechendem @click=selectedKeyTreeBaustoffe = node._id gelingt die Knoten-Selektion per Kontextmenü dann doch! -->
                      <!-- Context Menu: -->
                      <!-- ACHTUNG: Context Menus vorläufig disabled für Tree Rohstoffe: -->
                      <!--
                            <q-menu touch-position context-menu>
                              <q-list dense style="min-width: 100px">
                                <q-item clickable v-close-popup
                                  @click="selectedKeyTreeBaustoffe = node._id">
                                  <q-item-section>Baustoff auswählen</q-item-section>
                                </q-item>
                                <q-item clickable
                                  @click="selectedKeyTreeBaustoffe = node._id; createNewBaustoffDialog = true">
                                  <q-item-section
                                    >Baustoff auswählen und Kindbaustoff neu anlegen</q-item-section
                                  >
                                </q-item>
                                <q-item clickable
                                  @click="selectedKeyTreeBaustoffe = node._id; deleteSelectedBaustoffDialog = true">
                                  <q-item-section>Baustoff auswählen und löschen</q-item-section>
                                </q-item>
                                <q-separator />
                                <q-item clickable v-close-popup>
                                  <q-item-section>Baustoff auswählen und umbenennen (TODO)</q-item-section>
                                </q-item>
                                -->
                      <!--
                                  <q-item-section side>
                                    <q-icon name="keyboard_arrow_right" />
                                  </q-item-section>
                                -->
                      <!-- ACHTUNG/TODO: Bei den Aktionen im Kontextmenü -->
                      <!-- kann nicht einfach z.B. per @click="deleteSelectedBaustoffDialog = true -->
                      <!-- statt v-close-popup dieselben @click-Funktionen wie für die Buttons -->
                      <!-- getriggered werden, da diese auf dem selektierten Baustoff arbeiten -->
                      <!-- Stattdessen muss erst der selektierte Baustoff geändert werden, dann -->
                      <!-- können diese Aktionen getriggered werden -->
                      <!-- Laut https://forum.quasar-framework.org/topic/3010/q-tree-q-context-menu -->
                      <!-- sollte dazu das Kontextmenü an den q-tree Body Slot attached werden -->
                      <!-- Mittels prop.node._id oder node._id oder node.key (?) kann man den zugehörigen -->
                      <!-- Node ermitteln und diesen dann selektieren über eine Zuweisung -->
                      <!-- @click=selectedKeyTreeBaustoffe = prop.node._id im  -->
                      <!-- Body Slot von q-tree (sehe unten) den Node neu selektieren auf den per Kontextmenü ausgewählten Node -->
                      <!-- Versuch am Header Slot: Bringt mit selber Zuweisung Fehler "prop" is not defined... -->
                      <!-- Am Header Slot funktioniert es dann aber doch noch mit @click="selectedKeyTreeBaustoffe = node._id" -->
                      <!-- Dies kann dann einfach konkateniert werden mit denselben v-model Aktionen, die auch in den Buttons darüber verwendet werden, -->
                      <!-- z.B. @click="selectedKeyTreeBaustoffe = node._id; createNewBaustoffDialog = true" -->
                      <!--
                            </q-list>
                            </q-menu>
                            -->
                      <!-- /Context Menu -->
                      <!-- ---------------------------------------------------------------------------------------------------------- -->
                      <div class="row items-center">
                        <!-- Nachfolgend testweise Checkbox eingefügt für Ticking eines Nodes: -->
                        <!-- Wieder disabled, unnötig, wenn eine tick-strategy als Prop angegeben wird -->
                        <!-- ACHTUNG: Ändert NICHT von selbst per v-model den Inhalt von tickedKeysTreeRohstoffe, -->
                        <!-- sondern nur mit der Funktion am @input!!! Es stellte sich heraus, dass das v-model prop.node.ticked völlig unabhängig -->
                        <!-- vom Quasar Ticking ist (auf dem so definierten und hinzugefügten Feld "ticked" in den nodes in nodesTreeRohstoffe) -->
                        <!-- während das Quasar Ticking ausschließlich auf dem Array tickedKeysTreeRohstoffe arbeitet!!! -->
                        <!--
                              <q-checkbox
                                :toggle-indeterminate="false"
                                v-model="prop.node.ticked"
                                @input="prop.node.ticked  || prop.node.ticked !== undefined ? $refs.treeRohstoffe.setTicked(prop.node._id, false) : $refs.treeRohstoffe.setTicked(prop.node._id, true)"
                              />
                              -->
                        <div v-if="prop.node.baumKnotenTyp === 'Blattknoten'">
                          <!-- ACHTUNG: Geändert von "node.baumKnotenTyp ==="" -->
                          <q-icon
                            name="eco"
                            color="green"
                            size="28px"
                            class="q-mr-sm"
                          ></q-icon>
                          <!-- Quasar Font Weights per class="text-weight-*": Siehe https://quasar.dev/style/typography#Font-Weights -->
                          <span class="text-weight-regular">
                            {{ prop.node.baustoffBezeichnung }}
                            <!-- ACHTUNG: Geändert von "node.baustoffBezeichnung ==="" -->
                          </span>
                        </div>
                        <div v-else>
                          <!-- Wurzel- und Verzweigungsknoten -->
                          <q-icon
                            name="account_tree"
                            color="orange"
                            size="28px"
                            class="q-mr-sm"
                          ></q-icon>
                          <!-- Quasar Font Weights per class="text-weight-*": Siehe https://quasar.dev/style/typography#Font-Weights -->
                          <span class="text-weight-medium">
                            {{ prop.node.baustoffBezeichnung }}
                            <!-- ACHTUNG: Geändert von "node.baumstoffBezeichnung ==="" -->
                          </span>
                        </div>
                      </div>
                      <!--  </div> -->
                      <!-- Für auskommentiertes <div> oben -->
                    </template>
                    <!-- Body-Slot mit Kontextmenü - auskommentiert, da der Body Slot auch ohne Inhalt unnötigen Platz verbraucht -->
                    <!-- Kontextmenü, das den Knoten neu selektiert, hier im Body - nach einigen Versuchen nun auch oben im Header,-->
                    <!-- allerdings dort mit @click="selectedKeyTreeBaustoffe = node._id" statt hier ... = prop.node._id" !!! -->
                    <!--
                          <template v-slot:default-body="prop">
                            <div class="row items-center @click.stop">
                              {{ prop.node.baumKnotenTyp }}
                            <q-menu touch-position context-menu>
                                <q-list dense style="min-width: 100px">
                                  <q-item clickable @click="selectedKeyTreeBaustoffe = prop.node._id">
                                    <q-item-section>Knoten selektieren</q-item-section>
                                  </q-item>
                                  </q-list>
                              </q-menu>
                            </div>
                          </template>
                          -->
                    <!-- ------------------------------------------------------------------------------------------------------------------------------ -->
                    <!-- Body-Slot mit Popupmenü zur Anzeige und zum Editing erweiterter Felder bei ticked Nodes                                        -->
                    <!-- ACHTUNG: Das Popuptmenü arbeitet auf den 3 erweiterten Feldern per prop.node.anteil/symbol/einheitVonRohstoffInBaustoff.       -->
                    <!--          Diese Felder sind bei bereits vorher getickten Nodes vorhanden. Bei neu getickten Nodes fügt sie Quasar per prop.node -->
                    <!--          NEU dem jeweiligen Knoten im verschachtelten Array selectedNodeTreeBaustoffe.zugeordneteRohstoffe hinzu, wie man        -->
                    <!--          es im Debug Mode in obiger Anzeige für selectedNodeTreeBaustoffe.zugeordneteRohstoffe oben im Tab "Zugeordnete Rohstoffe" -->
                    <!--          mitverfolgen kann - sonst würde dieser Code nicht funktionieren!                                                      -->
                    <!-- ACHTUNG: Hier zusätzliches v-if, da sonst Fehler im Log, z.B. nach allererster Auswahl des Tabs "Zugeordnete Rohstoffe":         -->
                    <!-- TypeError: Cannot read property 'isTicked' of undefined"                                                                       -->
                    <!-- ------------------------------------------------------------------------------------------------------------------------------ -->
                    <template v-slot:default-body="prop">
                      <div v-if="$refs.treeRohstoffe !== undefined">
                        <!-- ALT:
                            <div class="row items-center @click.stop" v-if="$refs.treeRohstoffe.isTicked(prop.node._id)">
                            -->
                        <div
                          class="row items-center"
                          v-if="$refs.treeRohstoffe.isTicked(prop.node._id)"
                        >
                          <!-- {{ prop.node.baumKnotenTyp }} -->
                          <!-- War nur Test -->
                          Anteil in Baustoff:
                          {{ prop.node.anteilVonRohstoffInBaustoff }}
                          {{ prop.node.symbolVonRohstoffInBaustoff }}
                          <!-- {{ prop.node.einheitVonRohstoffInBaustoff }} -->
                          <!-- ACHTUNG: Enter und Esc Keys schließen das Popup - dies ist z.B. mit @keyup.enter.stop am q-input verhinderbar, siehe -->
                          <!--          https://quasar.dev/vue-components/popup-edit#Textarea-%2F-QEditor -->
                          <!-- ACHTUNG: Erste Variante mit v-model am q-popup-edit: v-model="prop.node.anteilVonRohstoffInBaustoff" - dann gibt es folgendes -->
                          <!-- PROBLEM [GELÖST MIT ALTERNATIVE 4 UNTEN]: Die Aktualisierung der oben mit {{ }} angezeigten Felder nach deren Änderung im q-popup-edit -->
                          <!--          erfolgt nach dem Verlassen des q-popup-edits per Button erst, nachdem man woanders hin im Baum geklickt hat!!! -->
                          <!-- Eventuell selbes Problem wie bei https://github.com/quasarframework/quasar/issues/5000 -->
                          <!-- Vorgeschlagene Lösung dort: Wrapper Component around q-popup-edit that (only) onSave emits input event, dass sich sein v-model-Feld (value) -->
                          <!-- geändert hat - methods: { onSave(value) { this.$emit('input', value) } }-->
                          <!-- value ist dabei eine prop der Wrapper-Komponente, an diese muüsste z.B. prop.node.baustoffBezeichnung übergeben werden -->
                          <!-- Zu evaluieren, wie das mit mehreren Input-Feldern ginge - eventuell müsste die prop dann ein Objekt aus den 3 Feldern sein? -->

                          <!-- Alternativen: -->
                          <!-- 1. [FAIL] value (ohne : davor - FALSCH - siehe 4.) statt v-model mit doNothingListener für @input Event! -->
                          <!--    value="prop.node.anteilVonRohstoffInBaustoff" @input="doNothing()" -->
                          <!--    Bewirkt aber keine Besserung!!! Variante: Eventuell $nextTick() statt doNothing? Nicht probiert! -->
                          <!-- 2. [FAIL] Test mit v-model="prop.node" statt "prop.node.anteilVonRohstoffInBaustoff"-->
                          <!---   Bewirkt auch keine Besserung -->
                          <!-- 3. [PARTIAL SUCCESS] v-model="prop.node" mit @save="$nextTick(() => {$refs.treeRohstoffe.expandAll()})" -->
                          <!--    Refreshed wie gewünscht den Rohstoffbaum MIT den geänderten Werten, allerdings NUR für das erste der 3 Felder! -->
                          <!--    Expandiert den Baum aber auch gleich - das dürfte allerdings kein Problem sein, da er wegen des Tickings besser immer expandiert seine sollte -->
                          <!-- 4. [SUCCESS] :value="prop.node" mit @save="$nextTick(() => {$refs.treeRohstoffe.expandAll()})": -->
                          <!--    Refreshed wie gewünscht den Rohstoffbaum MIT den geänderten Werten, für ALLE der 3 Felder! -->
                          <!--    Expandiert den Baum aber auch gleich - das dürfte allerdings kein Problem sein, da er wegen des Tickings besser immer expandiert seine sollte -->
                          <!--    Dazu noch zusätzliche Events @before-show und @cancel eingebaut, die die alten Werte speichern und ggf. das model auf diese zurücksetzen -->

                          <!-- PROBLEM: An den Buttons für das q-popup-edit gibt es leider keine no-caps und glossy Props wie an regulären q-btn Buttons!!! -->
                          <!-- Siehe auch: https://forum.quasar-framework.org/topic/2916/popup-edit-save-cancel/7 zum Verhalten von q-popup-edit -->
                          <!-- Siehe auch Feature Request: https://github.com/quasarframework/quasar/issues/6325 - Antwort: Reguläre Buttons verwendbar -->

                          <!-- 5. TODO: Daher weitere Alternative evaluieren, um reguläre q-btns verwenden zu können: Dies geht wohl nur in Verbindung mit "Default scoped slot" -->
                          <!-- mit Parametern, siehe Sample auf https://quasar.dev/vue-components/popup-edit#Default-scoped-slot -->
                          <!-- ACHTUNG: Das Sample dort ist für EIN q-input Feld, hier wird es aber für DREI benötigt! -->
                          <!-- Die Schwierigkeit dabei ist, dass das Sample den v-slot:after mit in das (EINE) q-input integriert! Das geht mit DREI q-inputs so nicht!!! -->
                          <!-- Es kommen mit v-slot:after ähnliche Vue-Fehler wie bei https://stackoverflow.com/questions/43370275/vue-named-slots-do-not-work-when-wrapped -->
                          <!-- ACHTUNG: Per Antworten auf https://github.com/quasarframework/quasar/issues/6325 -->
                          <!-- a) Keinen v-slot:after verwenden, sondern die neuen q-btns direkt nach den q-inputs mit einfachem div einfügen, -->
                          <!--    siehe https://github.com/quasarframework/quasar/issues/6325 -->
                          <!-- b) Die cancel und save Methoden können nicht customized werden, die eine resetted den Input, die andere saved ihn -->

                          <!-- ACHTUNG: Sicherheitshalber dabei besser die Reset-Aktionen bei @cancel wie bisher belasssen - @cancel wird laut API Doku aufgerufen, wenn User -->
                          <!-- außerhalb des q-popup-edits klickt!!! -->

                          <!-- Variiertes Codepen Sample mit Custom Buttons an den q-inputs und am q-popup-edit unten mit Default scoped Slot Parameters am v-slot. -->
                          <!-- https://codepen.io/pdanpdan/pen/poJJbmp?editors=1010 -->
                          <!-- Doku dafür: https://quasar.dev/vue-components/popup-edit#Default-scoped-slot -->

                          <!-- Versuche mit regulären Buttons statt der durch die buttons Prop am q-popup-edit erzeugten Buttons: -->
                          <!-- Am Submit-Button dann idealerweise selbe Aktion wie beim @save am q-popup-edit plus Call von $refs.popupEditTreeRohstoffe.set(); (zum Closen) -->
                          <!-- Am Reset-Button dnann idealerweise selbe Aktion wie beim @cancel am q-popup-edit plus Call von $refs.popupEditTreeRohstoffe.cancel(); (zum Closen) -->

                          <!-- Es bleibt jedoch unklar, wie man bei Alternative 5 überhaupt die vordefinierten Methoden set und cancel erweitert - ein Versuch, stattdessen andersnamige Funktionen -->
                          <!-- dafür einzusetzen, scheitert mit undefined-Fehlern. Wird bestätigt durch Antwort b) oben. Das Resetten auf die alten Werte wie bisher geht dann wohl so nicht mehr! -->

                          <!-- Alternative 5 erscheint insgesamt sehr komplex, daher vorläufig zurückgestellt. -->
                          <!-- ALT: -->
                          <!--
                                  @save="
                                    $nextTick(() => {
                                      $refs.treeRohstoffe.expandAll();
                                    })
                                  "
                                -->
                          <!-- TODO YYYYYY - Im folgenden diverser Testcode gegen im April 2020 auftretenden Reactivty Fehler am QPopupEdit im Baustoffbaum/Rohstoffunterbaum in -->
                          <!-- baueinheiten.vue/baustoffe.vue -->
                          <!-- Durch diesem Fehler funktionierte das Editing per q-popup-edits gar nicht mehr! -->
                          <!-- Die Root Cause dafür war das Nicht-reaktive Hinzufügen der erweiterten Felder für die Angaben zum Baustoff in der Baueinheit -->
                          <!-- in loadTreeBaustoffe/Rohstoffe() - dort gefixed -->
                          <!-- Aktuelle Varianten: -->
                          <!-- :value="prop.node" statt v-model="prop.node" - ist egal -->
                          <!-- @save="savePopupEditTreeRohstoffe()" - siehe unten -->
                          <!-- NEU: @save-Methode nach Vorlage auf https://codepen.io/metalsadman/pen/RmKeWL -->
                          <!-- @save="(newValue, oldValue) => { savePopupEditTreeRohstoffe(newValue, oldValue, prop.node, 'anteilVonRohstoffInBaustoff') }" -->
                          <!-- Der 4. Parameter war nur zu Testzwecken, entfernt -->
                          <!-- Diese @save-Methode wird verwendet für verzögertes reaktives Save der 3 erweiterten Felder nach prop.node/treeRohtoffe -->
                          <!-- Dies wurde aus Performance-Gründen eingeführt -->
                          <!-- Bei direktem reaktiven Update der 3 Felder im Node bzw. Tree dauert bei grooßem Baum jeder Keystroke im q-input sehr lange! -->
                          <!-- Daher versucht, dass die q-inputs per v-model nun auf Variablen tempAnteil/Symbol/EinheitVonRohtoffInBaustoff arbeiten statt direkt reaktiv auf -->
                          <!-- prop.node.anteil/symbol/einheitVonRohstoffInBaustoff -->
                          <!-- Erst bei @save im q-popup-edit wurden diese Werte gesaved in die Datenbank -->
                          <!-- Funktionierte aber nicht, weil damit die @save-Methode gar nicht aufgerufen wurde! -->
                          <!-- Statdessen debounce=1000 (ms) an den q-inputs eingeführt, um Blockieren der Eingabe zu verhindern -->
                          <!-- -->
                          <!-- HINWEIS zur @cancel-Methode unten, bei direkten reaktiven Updates ohne verzögertes Save beim @save-Event: -->
                          <!-- Dafür sind in data() Variablen oldValueAnteil/Symbol/EinheitVonRohstoffInBaustoff definiert -->
                          <!-- Mit dem versuchsweisen verzögerten Update wurde temporär diese @cancel-Methode disabled, da dabei die Daten ohne save nicht geändert weerden -->
                          <!--
                                 @cancel="
                                    prop.node.anteilVonRohstoffInBaustoff = oldValueAnteilVonRohstoffInBaustoff;
                                    prop.node.symbolVonRohstoffInBaustoff = oldValueSymbolVonRohstoffInBaustoff;
                                    prop.node.einheitVonRohstoffInBaustoff = oldValueEinheitVonRohstoffInBaustoff;
                                  "
                                -->
                          <!-- Disablete Variante mit v-model auf temp-Variablen: -->
                          <!--
                                    @before-show="
                                    tempValueAnteilVonRohstoffInBaustoff =
                                      prop.node.anteilVonRohstoffInBaustoff;
                                    tempValueSymbolVonRohstoffInBaustoff =
                                      prop.node.symbolVonRohstoffInBaustoff;
                                    tempValueEinheitVonRohstoffInBaustoff =
                                      prop.node.einheitVonRohstoffInBaustoff;
                                  "
                                -->
                          <!-- NEU: QPopupEdit disablen in Abhängigkeit von Benutzerrolle -->
                          <!-- ================================================================================= -->
                          <!-- NEU - 05.10.2021: Angleichung des Codes an bauueinheiten.vue, #107                -->
                          <!-- ACHTUNG: Allerdings wird für treeRohstoffe bisher keine Object.freeze() gemacht!  -->
                          <!-- QPopupEdit arbeitet nicht mehr direkt auf v-model="prop.node" (dieses kann nicht  -->
                          <!-- mehr reaktiv geändert werden wegen Object.freeze), sondern auf einem eigenen,     -->
                          <!-- neuen v-model, Objekt tempValuesPopupEditTreeRohstoffe!                           -->
                          <!-- Dieses wird in @before-show initialisiert und in @save nach prop.node übertragen! -->
                          <!-- ACHTUNG: Auch die v-models der q-inputs unten mussten entsprechend geändert werden-->
                          <!-- ================================================================================= -->
                          <!-- In der neuen Variante für #107, wo nodesTreeBaustoffe per Object.freeze eingefroren wurde, -->
                          <!-- wird @save bei v-model="props.node" am q-popup-edit daher gar nicht mehr aufgerufen,       -->
                          <!-- und musste daher umgestellt werden auf neues Objekt tempValuesPopupEditTreeRohstoffe!      -->
                          <!-- Präventiv hier ebenfalls umgestellt, auf tempValuesPopupEditTreeRohstoffe!                 -->
                          <!-- Vor Umstellung: -->
                          <!-- v-model="prop.node" -->
                          <q-popup-edit
                            :disable="benutzerRolleIstMitarbeiter"
                            ref="popupEditTreeRohstoffe"
                            touch-position
                            v-model="tempValuesPopupEditTreeRohstoffe"
                            title="Angaben zum Rohstoff im Baustoff ändern"
                            :cover="false"
                            buttons
                            glossy
                            no-caps
                            label-set="Angaben zuweisen"
                            label-cancel="Abbrechen"
                            @before-show="
                              tempValuesPopupEditTreeRohstoffe[
                                'anteilVonRohstoffInBaustoff'
                              ] = prop.node.anteilVonRohstoffInBaustoff;
                              tempValuesPopupEditTreeRohstoffe[
                                'symbolVonRohstoffInBaustoff'
                              ] = prop.node.symbolVonRohstoffInBaustoff;
                              tempValuesPopupEditTreeRohstoffe[
                                'einheitVonRohstoffInBaustoff'
                              ] = prop.node.einheitVonRohstoffInBaustoff;
                            "
                            @save="
                              (newValue, oldValue) => {
                                savePopupEditTreeRohstoffe(
                                  newValue,
                                  oldValue,
                                  prop.node
                                );
                              }
                            "
                          >
                            <div v-if="localStore.state.debugMode">
                              prop.node:
                              {{ prop.node }}
                              <br />
                              <br />
                            </div>
                            Baustoffbezeichnung:
                            {{ selectedNodeTreeBaustoffe.baustoffBezeichnung }}
                            <br />
                            Rohstoffbezeichnung:
                            {{ prop.node.baustoffBezeichnung }}
                            <br />
                            <br />
                            <!-- ================================================================================== -->
                            <!-- ALT: Testcode gegen Reactivity Fehler beim Editing in den QInputs im QPopupEdit    -->
                            <!-- Varianten:                                                                         -->
                            <!-- Aktuell disabled:                                                                  -->
                            <!--   @input="setAnteilVonRohstoffInBaustoffAusInputFeld" - wird nicht mehr benötigt   -->
                            <!--      War temporär hinzugefügt am ersten q-input:                                   -->
                            <!--   @change="changeInputPopupEditTreeRohstoffe();                                    -->
                            <!--   bzw. von Vorlage: https://codepen.io/metalsadman/pen/OJJVGKr:                    -->
                            <!--   @change="v => { prop.node.anteilVonRohstoffInBaustoff = v.target.value }"        -->
                            <!-- Enabled: type="number" am ersten q-input-Feld                                      -->
                            <!-- ursprüngliches v-model=prop.node.anteilVonRohstoffInBaustoff                       -->
                            <!-- ================================================================================== -->
                            <!-- NEU: # 107 - die q-inputs arbeiten nun wie das q-popup-edit auf temporären, eigenen-->
                            <!-- v-models, nicht mehr auf prop.node.anteilVonRohstoffInBaustoff etc.                -->
                            <!-- ================================================================================== -->
                            <q-input
                              debounce="1000"
                              type="number"
                              v-model="
                                tempValuesPopupEditTreeRohstoffe[
                                  'anteilVonRohstoffInBaustoff'
                                ]
                              "
                              label="Anteil des Rohstoffs im Baustoff"
                              square
                              bg-color="teal-2"
                              standout="bg-teal-4 text-black"
                              dense
                              autofocus
                              hint="Zahl, z.B. '50'"
                              hide-hint
                            />
                            <q-input
                              debounce="1000"
                              v-model="
                                tempValuesPopupEditTreeRohstoffe[
                                  'symbolVonRohstoffInBaustoff'
                                ]
                              "
                              label="Symbol für den Anteil des Rohstoffs im Baustoff"
                              square
                              bg-color="teal-2"
                              standout="bg-teal-4 text-black"
                              dense
                              hint="Symbol, z.B. '%'"
                              hide-hint
                            />
                            <q-input
                              debounce="1000"
                              v-model="
                                tempValuesPopupEditTreeRohstoffe[
                                  'einheitVonRohstoffInBaustoff'
                                ]
                              "
                              label="Einheit für den Anteil des Rohstoffs im Baustoff"
                              square
                              bg-color="teal-2"
                              standout="bg-teal-4 text-black"
                              dense
                              hint="Einheitsbezeichnung z.B. 'Prozent'"
                              hide-hint
                            />
                            <!--
                            <div>
                              {{prop.node.anteilVonRohstoffInBaustoff}}
                              </div>
                            -->
                          </q-popup-edit>
                          <!--
                          <q-menu touch-position context-menu>
                            <q-list dense style="min-width: 100px">
                              <q-item clickable @click="showBenutzerNachrichtFunktionNichtVerfuegbar()">
                                <q-item-section>Zugeordneten Rohstoff für Baustoff editieren (TODO)</q-item-section>
                              </q-item>
                              </q-list>
                          </q-menu>
                          -->
                        </div>
                      </div>
                    </template>
                  </q-tree>
                </q-scroll-area>
              </q-card>
            </q-tab-panel>
            <!-- ------------------------------------------------------------------------------------------------------------------- -->
            <!-- Es folgen die weiteren Panels in der oberen Panel-Leiste -->
            <q-tab-panel
              class="q-pa-xs"
              name="zugeordneteBauinformationenTabBaustoffe"
            >
              <!--***===================================== Start Code aus Bauinformationen.vue ========================================-->
              <div>
                <!--
                      Zugeordnete Bauinformationen:
                      {{selectedNodeTreeBaustoffe.zugeordneteBauinformationen}}
                      -->
                <!-- q-dialog für Hinweis, dass erst eine Bauinformation auszuwählen ist                                     -->
                <!-- // ACHTUNG: q-dialog muss stets lokal zu dem q-tab-panel definiert sein, in dem er per v-model aktiviert wird, sonst passiert nichts!!! -->
                <q-dialog
                  v-model="confirmHinweisAuswaehlenBauinformationAusQTable"
                  persistent
                >
                  <q-card>
                    <q-card-section class="row items-center">
                      <q-avatar
                        icon="notification_important"
                        color="warning"
                        text-color="white"
                      />
                      <span class="q-ml-sm">
                        Bitte eine Bauinformation in der ersten Spalte mit
                        <q-checkbox
                          v-model="alwaysOn"
                          disable
                          dense
                          color="primary"
                        />&nbsp;auswählen
                      </span>
                    </q-card-section>
                    <q-card-actions align="right">
                      <!-- NEU: QButton disablen in Abhängigkeit von Benutzerrolle -->
                      <q-btn
                        :disable="benutzerRolleIstMitarbeiter"
                        glossy
                        label="Weiter"
                        color="secondary"
                        no-caps
                        v-close-popup
                      />
                      <!-- ACHTUNG: Bei @click="method()" unbedingt "()"" hinter "method" angeben, sonst passiert gar nichts!!! -->
                      <!-- ANDERERSEITS: @click="handleClick" und @click="handleClick()" sind äquivalent laut https://flaviocopes.com/vue-events/ -->
                      <!-- ACHTUNG: Offenbar muss das v-model this.confirmHinweisAuswaehlenBauinformationAusQTable nicht auf false zurückgesetzt werden!!! -->
                    </q-card-actions>
                  </q-card>
                </q-dialog>
                <!-- q-dialog für Hinweis, dass eine Bauinformation mit internem Link auszuwählen ist                                     -->
                <!-- // ACHTUNG: q-dialog muss stets lokal zu dem q-tab-panel definiert sein, in dem er per v-model aktiviert wird, sonst passiert nichts!!! -->
                <q-dialog
                  v-model="
                    confirmHinweisAuswaehlenBauinformationAusQTableMitInternemLink
                  "
                  persistent
                >
                  <q-card>
                    <q-card-section class="row items-center">
                      <q-avatar
                        icon="notification_important"
                        color="warning"
                        text-color="white"
                      />
                      <span class="q-ml-sm">
                        Bitte eine Bauinformation in der ersten Spalte mit
                        <q-checkbox
                          v-model="alwaysOn"
                          disable
                          dense
                          color="primary"
                        />&nbsp;auswählen, die einen Link in Spalte 'Interner
                        Link' enthält
                      </span>
                    </q-card-section>
                    <q-card-actions align="right">
                      <q-btn
                        glossy
                        label="Weiter"
                        color="secondary"
                        no-caps
                        v-close-popup
                      />
                      <!-- ACHTUNG: Bei @click="method()" unbedingt "()"" hinter "method" angeben, sonst passiert gar nichts!!! -->
                      <!-- ANDERERSEITS: @click="handleClick" und @click="handleClick()" sind äquivalent laut https://flaviocopes.com/vue-events/ -->
                      <!-- ACHTUNG: Offenbar muss das v-model this.confirmHinweisAuswaehlenBauinformationAusQTable nicht auf false zurückgesetzt werden!!! -->
                    </q-card-actions>
                  </q-card>
                </q-dialog>
                <!-- q-dialog für Hinweis, dass eine Bauinformation mit externem Link auszuwählen ist                                     -->
                <!-- // ACHTUNG: q-dialog muss stets lokal zu dem q-tab-panel definiert sein, in dem er per v-model aktiviert wird, sonst passiert nichts!!! -->
                <q-dialog
                  v-model="
                    confirmHinweisAuswaehlenBauinformationAusQTableMitExternemLink
                  "
                  persistent
                >
                  <q-card>
                    <q-card-section class="row items-center">
                      <q-avatar
                        icon="notification_important"
                        color="warning"
                        text-color="white"
                      />
                      <span class="q-ml-sm">
                        Bitte eine Bauinformation in der ersten Spalte mit
                        <q-checkbox
                          v-model="alwaysOn"
                          disable
                          dense
                          color="primary"
                        />&nbsp;auswählen, die einen Link in Spalte 'Externer
                        Link' enthält
                      </span>
                    </q-card-section>
                    <q-card-actions align="right">
                      <q-btn
                        glossy
                        label="Weiter"
                        color="secondary"
                        no-caps
                        v-close-popup
                      />
                      <!-- ACHTUNG: Bei @click="method()" unbedingt "()"" hinter "method" angeben, sonst passiert gar nichts!!! -->
                      <!-- ANDERERSEITS: @click="handleClick" und @click="handleClick()" sind äquivalent laut https://flaviocopes.com/vue-events/ -->
                      <!-- ACHTUNG: Offenbar muss das v-model this.confirmHinweisAuswaehlenBauinformationAusQTable nicht auf false zurückgesetzt werden!!! -->
                    </q-card-actions>
                  </q-card>
                </q-dialog>
                <!-- ------------------------------------------------------------------------------------------ -->
                <!-- <div class="q-pa-xs" style="max-width: 1550px"> -->
                <div class="q-pa-xs">
                  <!-- HINWEIS: Dieses div zwischen q-tab-panel und q-table ist WICHTIG, falls die Table in     -->
                  <!--          ein Splitter-Model (hier im rechten Panel) eingebettet ist                      -->
                  <!-- ALT: <div class="q-gutter-sm" style="max-width: 1500px"> -->
                  <!-- ALT: :data="dataTableBauinformationen" -->
                  <div v-if="localStore.state.debugMode">
                    Zugeordnete Bauinformationen:
                    {{ selectedNodeTreeBaustoffe.zugeordneteBauinformationen }}
                    <q-separator />
                    <br />
                  </div>
                  <!-- ACHTUNG: selectedNodeTreeBaustoffe ist computed: !!! -->
                  <!-- NEU: Erste Spalte zur Selektion von Zeilen mit color="primary" (blau statt grau) -->
                  <q-table
                    color="primary"
                    title="Zugeordnete Bauinformationen: Normen, Vorschriften, Richtlinien, Zulassungen, Nachweise, Datenblätter, etc."
                    rows-per-page-label="Einträge pro Seite"
                    dense
                    row-key="_id"
                    :data="
                      selectedNodeTreeBaustoffe.zugeordneteBauinformationen
                    "
                    :columns="columnsTableBauinformationen"
                    :visible-columns="visibleColumnsTableBauinformationen"
                    :pagination.sync="paginationTableBauinformationen"
                    :pagination-label="getPaginationLabel"
                    :rows-per-page-options="[5, 10, 15, 20, 25, 30, 35, 40, 0]"
                    selection="single"
                    :selected.sync="selectedRowsTableBauinformationen"
                    :selected-rows-label="
                      getSelectedStringTableBauinformationen
                    "
                    :filter="filterTableBauinformationen"
                    v-bind:class="{
                      stickyColumnsTable1HeaderLine: $q.screen.gt.sm
                    }"
                  >
                    <!-- ACHTUNG: Sticky Column funktioniert nur auf großen Bildschirmen - auf mobilen Bildschirmen funktioniert damit das horizontale Scrolling der QTable nicht! -->
                    <!-- LÖSUNG (#378): Per v-bind mit Bedingung $q.screen.gt.sm die sticky Column nur auf nicht kleinen Bildschirmen! -->
                    <!-- Vorlage: https://vuejs.org/v2/guide/class-and-style.html -->
                    <!-- Dazu musste allerdings die CSS Class sticky-columns-table-... (kebab-case) umbenannt werden nach -->
                    <!-- stickyColumnsTable... (camelCase) -->

                    <!-- NEU: class="stickyColumnsTable1HeaderLine" enthält CSS für sticky Columns, braucht SASS Preprocessor -->
                    <!-- Siehe Hinweise dazu ganz unten in <style>-Sektion -->
                    <!-- ACHTUNG: row-key muss gesetzt sein, wenn Selection verwendet wird (Checkboxes pro Tabellenzeile, links) -->

                    <!-- table-class="table-class" -->
                    <!-- CSS zum Test von eigener CSS auf Table, vorläufig auskommentiert -->

                    <!-- ACHTUNG: title oben in q-table wird überdeckt von v-slot:top? Daher eigenes div mit Titel unten -->
                    <!-- ACHTUNG: div mit v-if hier nicht erlaubt, <template v-slot:> muss Root Level in der receiving Component sein!!! -->

                    <!-- Der folgende <template v-slot:> Teil inklusive v-model, das :visible-columns in q-table oben referenziert,-->
                    <!-- ist für die Selektion der sichtbaren q-table Spalten per Toggles -->
                    <template v-slot:top="props">
                      <!------------------------------------------------------------------------------------------->
                      <!-- ALT: Erst neues div mit v-if="selectedKey" hier probiert, funktioniert aber nicht     -->
                      <!-- für alle Teile der komplexen Tabelle mit eigenem v-model und q-select!!!              -->
                      <!-- v-if="selectedKey" an q-tab-panel oben scheint dagegen zu funktionieren!!!            -->
                      <!------------------------------------------------------------------------------------------->
                      <div class="row full-width">
                        <div
                          class="col-md-6 col-12 text-h6"
                          v-if="$q.screen.gt.sm"
                        >
                          <!-- NEU: col-6 statt col-8 wegen Platzbedarf für weitern Toggle für Anzeigetext -->
                          Zugeordnete Bauinformationen am Baustoff
                          <strong
                            >"{{
                              selectedNodeTreeBaustoffe.baustoffBezeichnung
                            }}"</strong
                          >
                        </div>
                        <div class="col-md-6 col-12 text-subtitle1" v-else>
                          <!-- NEU: col-6 statt col-8 wegen Platzbedarf für weitern Toggle für Anzeigetext -->
                          Zugeordnete Bauinformationen am Baustoff
                          <strong
                            >"{{
                              selectedNodeTreeBaustoffe.baustoffBezeichnung
                            }}"</strong
                          >
                        </div>
                        <!--
                              <div class="col-4 subtitle-2 text-left">
                                (Normen, Vorschriften, Richtlinien, Zulassungen,
                                Nachweise, Datenblätter, ...)
                              </div>
                              -->
                        <!-- <div> {{visibleColumnsTableBauinformationen}} </div> -->
                        <!-- Ursprünglich für die "multiplen" "Keine/Alle Normkategorien" "Wenige/Viele Spalten" Toggles (falsch!!!): -->
                        <!--   @input="toggleAllNormkategorien" und  -->
                        <!--   value="toggleAllNormkategorienState"  -->
                        <!--   In Verbindung mit Inversion von toggleAllNormkategorienState am Ende von toggleAllNormkategorien -->
                        <!-- Damit wurde dann zwar der Array korrekt gesteuert, aber es erfolgte kein "Ticking" des Toggles! -->
                        <!-- Per https://forum.quasar-framework.org/topic/4373/how-to-use-q-toggle-with-input-and-value-rather-than-v-model/5 ersetzt durch v-model -->
                        <!-- sollte stattdessen verwendet werden:     -->
                        <!--   @input="toggleAllNormkategorien" und   -->
                        <!--   v-model="toggleAllNormkategorienState" -->
                        <!--   Funktioniert aber nur, wenn am Ende von toggleAllNormkategorien toggleAllNormkategorien NICHT invertiert wird! -->
                        <!--   Funktioniert aber nur, wenn am Ende von toggleAllNormkategorien toggleAllNormkategorien NICHT invertiert wird! -->
                        <div class="col-md-2 col-6 text-body2">
                          <q-toggle
                            dense
                            v-model="visibleColumnsTableBauinformationen"
                            val="bauinformationsAnzeigeText"
                            label="Anzeigetext"
                          />
                        </div>
                        <div class="col-md-2 col-6 text-body2">
                          <q-toggle
                            dense
                            label="Keine/Alle Normkategorien"
                            v-model="toggleAllNormkategorienState"
                            @input="toggleAllNormkategorien"
                            ref="toggleAllNormkategorien"
                            color="info"
                          />
                        </div>
                        <div class="col-md-2 col-6 text-body2">
                          <q-toggle
                            dense
                            label="Wenige/Viele Spalten"
                            v-model="toggleAllColumnsState"
                            @input="toggleAllColumns"
                            ref="toggleAllColumns"
                            color="secondary"
                          />
                        </div>
                        <div class="col-md-2 col-6">
                          <!-- Weiterer Toggle Button für Fullscreen-Darstellung von q-table -->
                          <!-- Verschoben von ursprünglicher Position nach q-select in diese erste Zeile von q-toggles -->
                          <q-btn
                            flat
                            round
                            dense
                            :icon="
                              props.inFullscreen
                                ? 'fullscreen_exit'
                                : 'fullscreen'
                            "
                            @click="props.toggleFullscreen"
                            class="absolute-top-right"
                            no-caps
                          />
                        </div>
                        <!-- ALT: q-button, damit musste toggleAllNormkategorienState in toggleNormkategorien invertiert werden!!!
                              <div class="col-2">
                                <q-btn
                                  label="Normkategorien ein/aus"
                                  dense
                                  v-model="toggleAllNormkategorienState"
                                  @click="toggleNormkategorien"
                                  no-caps
                                />
                              </div>
                              -->
                      </div>
                      <!-- HINWEIS: Hier ursprünglich class="col-2" statt "row" -->
                      <!-- <q-space /> -->
                      <!-- ALT: -->
                      <!-- v-if="$q.screen.gt.xs" -->
                      <div class="row full-width">
                        <!----------------------------------------------------------------------------------------->
                        <!-- Alignment der Toggles in Spalten statt "wilder" Position  mit <q-space /> daszwichen-->
                        <!-- nach Tipp auf https://forum.quasar-framework.org/topic/4254/how-to-align-the-q-toggles-that-control-q-table-column-visibility/2 -->
                        <!-- Flex Row mit 6 even Columns, class="col-2" pro Spalte, d.h. 2/12 des Platzes        -->
                        <!-- Hinweis: class="row full-width" ist dabei wichtig, sonst funktioniert es nicht!     -->
                        <!-- Siehe https://quasar.dev/layout/grid/introduction-to-flexbox                        -->
                        <!-- sowie https://quasar.dev/layout/grid/flex-playground                                -->
                        <!-- TODO: Alternativ auch QSelect Dropdown oder QMenu mit QToggles als Items möglich    -->
                        <!-- Sample dafür auf https://0ybb3.sse.codesandbox.io/table-extensions/custom-header    -->
                        <!-- Zusätzlich: Gemeinsamer Button für alle bauphysikalischen Schutzkategorien, s.u.    -->
                        <!----------------------------------------------------------------------------------------->
                        <!-- <q-toggle v-model="visibleColumnsTableBauinformationen" val="name" label="Name" />  -->
                        <!-- HINWEIS: Die Spalte mit dem Key kann/sollte nicht ausgeblendet werden!              -->
                        <!----------------------------------------------------------------------------------------->
                        <!-- TODO: q-toggle Size verkleinern mit style="transform: scale(0.9, 0.9);"             -->
                        <!-- Dieses Style Property unmittelbar an q-toggle anhängen, ohne weitere CSS in <style> -->
                        <!-- Siehe https://github.com/quasarframework/quasar/issues/2833                         -->
                        <!-- Verkleinert auch den Label-Text mit                                                 -->
                        <!-- Hinweis: Bezeichnung kann nicht ausgeblendet werden, Toggle dafür kann entfallen    -->
                        <!-- Stattdessen q-input Feld für Filter auf q-table an erster Stelle eingefügt          -->
                        <div class="col-md-2 col-12">
                          <!--
                                <q-toggle
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="bauinformationsBezeichnung"
                                  label="Bezeichnung"
                                />
                                -->
                          <q-input
                            class="q-pr-sm"
                            square
                            bg-color="teal-2"
                            standout="bg-teal-4 text-black"
                            dense
                            debounce="300"
                            color="primary"
                            v-model="filterTableBauinformationen"
                          >
                            <template v-slot:append>
                              <q-icon name="search" />
                            </template>
                          </q-input>
                        </div>
                        <!-- NEU: Toggle für Spalte Autoren, dadurch verschieben sich die weiteren Toggles nach rechts bzw. in die nächste Spalte: -->
                        <div class="col-md-2 col-6">
                          <q-toggle
                            dense
                            v-model="visibleColumnsTableBauinformationen"
                            val="benutzerKennungenAutoren"
                            label="Autoren"
                          />
                        </div>
                        <div class="col-md-2 col-6">
                          <q-toggle
                            dense
                            v-model="visibleColumnsTableBauinformationen"
                            val="bauinformationsTyp"
                            label="Typ"
                          />
                        </div>
                        <div class="col-md-2 col-6">
                          <q-toggle
                            dense
                            v-model="visibleColumnsTableBauinformationen"
                            val="bauinformationsBemerkung"
                            label="Bemerkung"
                          />
                        </div>
                        <div class="col-md-2 col-6">
                          <q-toggle
                            dense
                            v-model="visibleColumnsTableBauinformationen"
                            val="herausgeberGeografie"
                            label="Geografie"
                          />
                        </div>
                        <div class="col-md-2 col-6">
                          <q-toggle
                            dense
                            v-model="visibleColumnsTableBauinformationen"
                            val="herausgeberInstitution"
                            label="Institution"
                          />
                        </div>
                      </div>
                      <!-- <q-space /> -->
                      <!-- 2. Toggles-Zeile: -->
                      <!-- ALT: -->
                      <!-- v-if="$q.screen.gt.xs" -->
                      <div class="row full-width">
                        <!-- ---------------------------------------------------------------------------------------- -->
                        <!-- NEU: Toggles für mehrere, inhaltlich zusammengehörende Spalten (dadurch weniger Toggles) -->
                        <div class="col-md-2">
                          <!-- Leerspalte unter Filterfeld -->
                        </div>
                        <div class="col-md-2 col-6">
                          <q-toggle
                            dense
                            v-model="visibleColumnsTableBauinformationen"
                            val="herausgeberBezeichnung"
                            label="Herausgeber"
                          />
                        </div>
                        <div class="col-md-2 col-6">
                          <q-toggle
                            dense
                            v-model="regionenAnzeigen"
                            @input="toggleSpaltenRegionen"
                            label="Regionen"
                            ref="toggleRegionenAnzeigen"
                          />
                        </div>
                        <div class="col-md-2 col-6">
                          <q-toggle
                            dense
                            v-model="gueltigkeitAnzeigen"
                            @input="toggleSpaltenGueltigkeit"
                            label="Gültigkeit"
                            ref="toggleGueltigkeitAnzeigen"
                          />
                        </div>
                        <div class="col-md-2 col-6">
                          <q-toggle
                            dense
                            v-model="normTypenAnzeigen"
                            @input="toggleSpaltenNormTypen"
                            label="Normtypen"
                            ref="toggleNormTypenAnzeigen"
                          />
                        </div>
                        <div class="col-md-2 col-6">
                          <q-toggle
                            dense
                            v-model="linksAnzeigen"
                            @input="toggleSpaltenLinks"
                            label="Links"
                            ref="toggleLinksAnzeigen"
                          />
                        </div>
                        <!-- ALT: Toggles für einzelne Spalten - disabled  -->
                        <!--
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="herausgeberBundeslandDeutschland"
                                  label="Bundesland (D)"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="herausgeberBundeslandÖsterreich"
                                  label="Bundesland (AU)"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="herausgeberKantonSchweiz"
                                  label="Kanton (CH)"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="gültigkeitsDatumVon"
                                  label="Gültig von"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="gültigkeitsDatumBis"
                                  label="Gültig bis"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="normTypDIN"
                                  label="Normtyp (DIN)"
                                />
                              </div>
                              -->
                      </div>
                      <!-- <q-space /> -->
                      <!-- /2. Toggles-Zeile: -->
                      <!-- 3. Toggles-Zeile: -->
                      <!-- ALT (Einzel-Toggles) - disabled -->
                      <!--
                            <div v-if="$q.screen.gt.xs" class="row full-width">
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="normTypÖNORM"
                                  label="Normtyp (ÖNORM)"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="normTypSN"
                                  label="Normtyp (SN)"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="normTypEN"
                                  label="Normtyp (EN)"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="normTypISO"
                                  label="Normtyp (ISO)"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="externerLink"
                                  label="Externer Link"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="internerLink"
                                  label="Interner BIM.click-Link"
                                />
                              </div>
                            </div>
                            -->
                      <!-- /3. Toggles-Zeile: -->
                      <!-- <q-space /> -->
                      <div v-if="$q.screen.gt.xs" class="row full-width">
                        <!-- Die einzelnen Toggles für Normkategorien im Folgenden ausgeblendet -->
                        <!-- 1) Es sind sonst zu viele Toggles -->
                        <!-- 2) Die einzelnen Toggles funktionieren nicht im Zusammenspiel mit dem gemeinsamen Schalter für alle -->
                        <!--
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="grundNorm"
                                  label="Grundnorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="terminologieNorm"
                                  label="Terminologienorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="prüfNorm"
                                  label="Prüfnorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="produktNorm"
                                  label="Produktnorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="verfahrensNorm"
                                  label="Verfahrensnorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="dienstleistungsNorm"
                                  label="Dienstleistungsnorm"
                                />
                              </div>
                            </div>
                            <div v-if="$q.screen.gt.xs" class="row full-width">
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="schnittstellenNorm"
                                  label="Schnittstellensnorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="deklarationsNorm"
                                  label="Deklarationsnorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="fachbereichsNorm"
                                  label="Fachbereichsnorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="werkNorm"
                                  label="Werknorm"
                                />
                              </div>
                              <div class="col-2">
                              </div>
                              -->
                      </div>
                      <!-- <q-space /> -->
                      <!------------------------------------------------------------------------------------------------------------------------------->
                      <!-- q-select, um abhängig von Toggles die Tabelle nur mit den ausgewählten Spalten anzuzeigen                                 -->
                      <!-- ACHTUNG: Funktionsweise von q-select muss noch genauer erforscht werden                                                   -->
                      <!-- Durch das v-else am Anfang scheint es ein unsichtbares Dropdown Select-Menü zu sein!                                      -->
                      <!-- Durch das emit-value und map-options scheinen die Toggle-Werte auf visibleColumnsTableBauinformationen gemapped zu werden  -->
                      <!-- Siehe auch https://quasar.dev/vue-components/select, dort QSelect API ganz unten                                          -->
                      <!------------------------------------------------------------------------------------------------------------------------------->
                      <q-select
                        v-else
                        v-model="visibleColumnsTableBauinformationen"
                        multiple
                        borderless
                        dense
                        options-dense
                        :display-value="$q.lang.table.columns"
                        emit-value
                        map-options
                        :options="columns"
                        option-value="name"
                        style="min-width: 150px"
                      />
                    </template>
                    <!-- /template v-slot-->
                    <!-- ========================================================================================================================================= -->
                    <!-- START neuer Code für Enablement eines Kontextmenüs auf den Tabellenzeilen/-spalten -->
                    <!-- Vorlage dafür ist in bauinformationen.vue -->
                    <!-- Dazu willkürlich die zweite Spalte als v-slot definiert und das Kontextmenü darunter definiert -->
                    <!-- Enabled erstaunlicherweise das Kontextmenü auf ALLEN Spalten!!! -->
                    <!-- ACHTUNG: Im Zuge von #382 hier Fehler festgestellt, dass die Kontextmenüs nicht mehr korrekt angezeigt werden, wenn -->
                    <!-- oben per QToggle z.B. der bauinformationsTyp ausgeblendet wird! -->
                    <!-- Daher bauinformationsTyp durch bauinformationsBezeichnung ersetzt (erste Spalte, diese wird nie ausgeblendet), dann funktionierten -->
                    <!-- die Kontextmenüs wieder! -->
                    <!-- TODO XXXXXX: -->
                    <!-- Der Template-Code für diese QTable hier ist allerdings alt und schlecht, er sollte überarbeitet werden z.B. nach der Vorlage -->
                    <!-- der QTable mit Kontextmenps in uebersicht-tab-baueigenschaften.vue -->
                    <!-- ========================================================================================================================================= -->
                    <template
                      v-slot:body-cell-bauinformationsBezeichnung="props"
                    >
                      <!-- NEU: #382 - ALT: v-slot:body-cell-bauinformationsTyp -->
                      <q-td :props="props">
                        {{ props.row["bauinformationsBezeichnung"] }}
                        <!-- NEU: #382 - ALT: bauinformationsTyp -->
                        <!-- q-td mit {{ }} ist notwendig, sonst wird für diese Spalte kein Wert angezeigt!!! -->
                      </q-td>
                      <!-- =================================================================================================================================== -->
                      <!-- START CODE FÜR KONTEXTMENÜ für Rechtsklick-Aktionen auf einer Spalte/Zeile in der QTable -->
                      <!-- Dabei ist die Zeile in props.rows enthalten, siehe Debug Info Kontextmenü unten -->
                      <!-- Zugriff auf Columns in diesem Fall ist möglich wie oben: props.row["bauinformationsTyp"], allerdings ist ides statisch, nicht in Abhängigkeit von Mausposition   -->
                      <!-- ================================================================================================================================ -->
                      <q-menu touch-position context-menu>
                        <!-- HINWEIS: v-model="props.row['bauinformationsTyp']" am <q-list> entfernt, unnötig oder gar falsch! -->
                        <q-list dense style="min-width: 100px">
                          <div v-if="localStore.state.debugMode">
                            Debug-Info Kontextmenü:
                            <q-separator />
                            props.row: {{ props.row }}
                            <q-separator />
                            props.selected: {{ props.selected }}
                            <!-- ACHTUNG: props.selected ist UNDEFINED - anders als in den QTables für Baueigenschaften in baustoffe.vue und baueinheiten.vue!!! -->
                            <q-separator />
                          </div>
                          <!-- NEU: Hier dedizierte neue Funktion oeffneExternenLinkAusgewaehlteBauinformationAusQTable()}zum Öffnen des externen Links: -->
                          <!-- ACHTUNG: selectedRowsTableBauinformationen = props.row als erste Aktion bei @click unten funktioniert so NICHT!!! -->
                          <!--          Es macht zwar die Zuweisung wie gewünscht, aber die selected Row in der QTable wird dadurch alleine noch nicht reaktiv geändert! -->
                          <!--          Erst reaktives push auf den Array führt dazu, dass die selected Row updated wird (sichtbar durch checked Checkmark in der ersten Spalte der QTable) -->
                          <!-- HINWEIS: In den QTables für die Baueigenschaften in baustoffe.vue und baueinheiten.vue!!! wird die Row einfach per props.selected = true neu ausgewählt, -->
                          <!--          dies funktioniert hier in der bzgl. VSlots anders aufgebauten QTable für Bauinformationen so nicht, props.selected ist UNDEFINED (siehe oben) -->
                          <!-- HINWEIS: Die Abfrage if (selectedRowsTableBauinformationen[0].externerLink == null) ist auch true, wenn das Feld undefined ist (nicht der Fall bei === null) -->
                          <!-- NEU: Disabling, wenn Link nicht vorhanden ist. ACHTUNG: Link ist undefined, wenn nicht vorhanden, daher Prüfung auf "==null -->
                          <q-item
                            :disable="
                              props.row.externerLink == null ||
                                props.row.externerLink === ''
                            "
                            clickable
                            v-close-popup
                            @click="
                              selectedRowsTableBauinformationen = [];
                              selectedRowsTableBauinformationen.push(props.row);
                              checkAusgewaehlteBauinformationAusQTableAufExternenLink();
                              if (
                                selectedRowsTableBauinformationen[0]
                                  .externerLink == null
                              ) {
                                confirmHinweisAuswaehlenBauinformationAusQTableMitExternemLink = true;
                              } else {
                                oeffneExternenLinkAusgewaehlteBauinformationAusQTable();
                              }
                            "
                          >
                            <q-item-section
                              >Bauinformation auswählen und externen Link
                              öffnen</q-item-section
                            >
                          </q-item>
                          <!-- ------------------------------------------------------------------------------------------------ -->
                          <!-- NEU: Kontextmenü zum Öffnen eines OneDrive-Links: -->
                          <q-item
                            :disable="
                              props.row.oneDriveLink == null ||
                                props.row.oneDriveLink === ''
                            "
                            clickable
                            v-close-popup
                            @click="
                              selectedRowsTableBauinformationen = [];
                              selectedRowsTableBauinformationen.push(props.row);
                              checkAusgewaehlteBauinformationAusQTableAufOneDriveLink();
                              if (
                                selectedRowsTableBauinformationen[0]
                                  .oneDriveLink == null
                              ) {
                                confirmHinweisAuswaehlenBauinformationAusQTableMitOneDriveLink = true;
                              } else {
                                oeffneOneDriveLinkAusgewaehlteBauinformationAusQTable();
                              }
                            "
                          >
                            <q-item-section
                              >Bauinformation auswählen und OneDrive-Link
                              öffnen</q-item-section
                            >
                          </q-item>
                          <!-- ACHTUNG: selectedRowsTableBauinformationen = props.row als erste Aktion bei @click unten funktioniert so NICHT!!! -->
                          <!--          Es macht zwar die Zuweisung wie gewünscht, aber die selected Row in der QTable wird dadurch alleine noch nicht reaktiv geändert! -->
                          <!--          Erst reaktives push auf den Array führt dazu, dass die selected Row updated wird (sichtbar durch checked Checkmark in der ersten Spalte der QTable) -->
                          <!-- HINWEIS: In den QTables für die Baueigenschaften in baustoffe.vue und baueinheiten.vue wird die Row einfach per props.selected = true neu ausgewählt, -->
                          <!--          dies funktioniert hier in der bzgl. VSlots anders aufgebauten QTable für Bauinformationen so nicht, props.selected ist UNDEFINED (siehe oben) -->
                          <!-- ACHTUNG: Die Logik für internen Link hier ist anders als für externen Link oben, die check-Funktion öffnet ggf. gleich den internen Link: -->
                          <!-- ACHTUNG: Dies funktioniert aktuell nur für Links zu "frisch" hochgeladenen Dokumenten!!! -->
                          <!--          Es entspricht dem Button "Internen Link öffnen (Cloud)"                         -->
                          <!-- NEU: Disabling, wenn Link nicht vorhanden ist. ACHTUNG: Link ist undefined, wenn nicht vorhanden, daher Prüfung auf "==null -->
                          <q-item
                            :disable="
                              props.row.internerLink == null ||
                                props.row.internerLink === ''
                            "
                            clickable
                            v-close-popup
                            @click="
                              selectedRowsTableBauinformationen = [];
                              selectedRowsTableBauinformationen.push(props.row);
                              checkAusgewaehlteBauinformationAusQTableAufInternenLink();
                            "
                          >
                            <q-item-section
                              >Bauinformation auswählen und internen Link
                              öffnen</q-item-section
                            >
                          </q-item>
                          <!--
                                  <q-separator />
                                  <q-item clickable v-close-popup>
                                    <q-item-section>Weitere Aktion</q-item-section>
                                  </q-item>
                                  <q-item-section side>
                                    <q-icon name="keyboard_arrow_right" />
                                  </q-item-section>
                                -->
                        </q-list>
                      </q-menu>
                      <!-- ENDE CODE FÜR KONTEXTMENÜ -->
                    </template>
                    <!-- =================================================================================================================================== -->
                    <!-- START spezieller Testcode mit v-slot für Spalte "Autoren" - dort (disabled) QSelect statt regulärem Textfeld -->
                    <!-- Wenn dieser Code disabled wird, werden die Autoren in einem regulären Textfeld angezeigt! -->
                    <template v-slot:body-cell-benutzerKennungenAutoren="props">
                      <q-td :props="props">
                        <q-select
                          :value="props.row.benutzerKennungenAutoren"
                          :options="props.row.benutzerKennungenAutoren"
                          options-dense
                          dense
                          :multiple="true"
                          hide-bottom-space
                          class="font-size-small"
                          :disable="true"
                        />
                      </q-td>
                    </template>
                    <!-- ----------------------------------------------------------------------------------------- -->
                    <!-- Alternativer Test-code, der nur die ersten 3 Array-Elemente ausgibt -->
                    <!-- Funktioniert per Test auch bei leerem Array-Feld -->
                    <!-- Wenn dieser Code disabled wird, werden die Autoren in einem regulären Textfeld angezeigt! -->
                    <!--
                    <template v-slot:body-cell-benutzerKennungenAutoren="props">
                      <q-td :props="props">
                        {{ props.row.benutzerKennungenAutoren[0] }}
                        {{ props.row.benutzerKennungenAutoren[1] }}
                        {{ props.row.benutzerKennungenAutoren[2] }}
                      </q-td>
                    </template>
                    -->
                    <!-- ========================================================================================================================================= -->
                    <!-- Es geht weiter mit altem Code zur speziellen Formatierung der Boolean-Spalten für den Normtyp mit Checkboxen: -->
                    <!----------------------------------------------------------------------------------------------------------------------------------------------->
                    <!----------------------------------------------------------------------------------------------------------------------------------------------->
                    <!-- Vorschlag aus https://forum.quasar-framework.org/topic/4127/how-to-display-and-maybe-later-edit-checkboxes-for-boolean-values-in-qtable/2 -->
                    <!-- Nested, disabled q-checkbox Konponente in den "Boolean" Spalten - theoretisch bessere Lösung als simples format mit Unicode               -->
                    <!----------------------------------------------------------------------------------------------------------------------------------------------->
                    <!-- Temporär auskommentiert, weil mit den q-checkboxes und q-toggles die Zeilenhöhe größer wird -->
                    <!-- Mittels style="transform: scale(0.7,0.7);" (bei q-toggles) -->
                    <!-- bzw.    style="transform: scale(0.7);" (bei q-checkboxes) -->
                    <!-- lässt sich zwar per CSS die Größe verkleinern, aber die Zeilenhöhe von q-table bleibt davon leider unberührt!!! -->
                    <!-- Ein CSS height Attribut an q-td hat per Test auch keinen Einfluss: <q-td :props="props" style="{height: '40px'}"> -->
                    <!-- LÖSUNG/WICHTIG: "dense" Property an q-checkbox auch für die erste Spalte zur Selektion einer Row führt schließlich zu "dense" q-table Rows!!! -->
                    <template v-slot:body-cell-grundNorm="props">
                      <q-td :props="props" :auto-width="true">
                        <q-checkbox
                          v-model="props.row.grundNorm"
                          disable
                          dense
                          color="grey-9"
                        />
                      </q-td>
                    </template>
                    <template v-slot:body-cell-terminologieNorm="props">
                      <q-td :props="props" :auto-width="true">
                        <q-checkbox
                          v-model="props.row.terminologieNorm"
                          disable
                          dense
                          color="grey-9"
                        />
                      </q-td>
                    </template>
                    <template v-slot:body-cell-prüfNorm="props">
                      <q-td :props="props" :auto-width="true">
                        <q-checkbox
                          v-model="props.row.prüfNorm"
                          disable
                          dense
                          color="grey-9"
                        />
                      </q-td>
                    </template>
                    <template v-slot:body-cell-produktNorm="props">
                      <q-td :props="props" :auto-width="true">
                        <q-checkbox
                          v-model="props.row.produktNorm"
                          disable
                          dense
                          color="grey-9"
                        />
                      </q-td>
                    </template>
                    <template v-slot:body-cell-verfahrensNorm="props">
                      <q-td :props="props" :auto-width="true">
                        <q-checkbox
                          v-model="props.row.verfahrensNorm"
                          disable
                          dense
                          color="grey-9"
                        />
                      </q-td>
                    </template>
                    <template v-slot:body-cell-dienstleistungsNorm="props">
                      <q-td :props="props" :auto-width="true">
                        <q-checkbox
                          v-model="props.row.dienstleistungsNorm"
                          disable
                          dense
                          color="grey-9"
                        />
                      </q-td>
                    </template>
                    <template v-slot:body-cell-schnittstellenNorm="props">
                      <q-td :props="props" :auto-width="true">
                        <q-checkbox
                          v-model="props.row.schnittstellenNorm"
                          disable
                          dense
                          color="grey-9"
                        />
                      </q-td>
                    </template>
                    <template v-slot:body-cell-deklarationsNorm="props">
                      <q-td :props="props" :auto-width="true">
                        <q-checkbox
                          v-model="props.row.deklarationsNorm"
                          disable
                          dense
                          color="grey-9"
                        />
                      </q-td>
                    </template>
                    <template v-slot:body-cell-fachbereichsNorm="props">
                      <q-td :props="props" :auto-width="true">
                        <q-checkbox
                          v-model="props.row.fachbereichsNorm"
                          disable
                          dense
                          color="grey-9"
                        />
                      </q-td>
                    </template>
                    <template v-slot:body-cell-werkNorm="props">
                      <q-td :props="props" :auto-width="true">
                        <q-checkbox
                          v-model="props.row.werkNorm"
                          disable
                          dense
                          color="grey-9"
                        />
                      </q-td>
                    </template>
                  </q-table>
                </div>
                <div
                  class="row full-width q-pb-none q-pl-xs q-pr-xs q-pt-xs q-col-gutter-xs"
                >
                  <div class="col-md-4 col-12 text-caption">
                    Aktionen für Bauinformationen &nbsp;
                    {{ displayRightArrow }}
                    <br />
                    <!-- &nbsp; -->
                    Mit &nbsp;
                    <q-checkbox
                      v-model="alwaysOn"
                      disable
                      dense
                      color="primary"
                    />
                    in erster Spalte Bauinformation auswählen. Alternativ mit
                    rechter Maustaste Kontextmenü aufrufen.
                  </div>
                  <div class="col-md-2 col-12">
                    <!-- NEU: class="stretch full-width" -->
                    <!-- ALT: style="width: 90%" -->
                    <q-btn
                      :href="getSelectedExternerLinkTableBauinformationen"
                      type="a"
                      target="_blank"
                      class="stretch full-width"
                      label="Externen Link öffnen"
                      color="purple-4"
                      glossy
                      no-caps
                      @click="
                        checkAusgewaehlteBauinformationAusQTableAufExternenLink()
                      "
                      :disable="computeExternerLinkTableBauinformationen"
                    />
                  </div>
                  <div class="col-md-2 col-12">
                    <!-- NEU: class="stretch full-width" -->
                    <!-- ALT: style="width: 90%" -->
                    <q-btn
                      :href="getSelectedOneDriveLinkTableBauinformationen"
                      type="a"
                      target="_blank"
                      class="stretch full-width"
                      label="OneDrive-Link öffnen"
                      color="light-blue-7"
                      glossy
                      no-caps
                      @click="
                        checkAusgewaehlteBauinformationAusQTableAufOneDriveLink()
                      "
                      :disable="computeOneDriveLinkTableBauinformationen"
                    />
                  </div>
                  <div class="col-md-2 col-12">
                    <!-- NEU: Für Heroku Upload/Download -->
                    <!-- Kein :href="getSelectedInternerAusgewaehlteBauinformationen" mehr, sondern Anzeige des internen Links mit in die @click-Methode verlagert -->
                    <!-- ALT: class="stretch full-width" -->
                    <!-- NEU: style="width: 90%" -->
                    <q-btn
                      type="a"
                      target="_blank"
                      class="row stretch full-width"
                      label="Internen BIM.click-Link öffnen"
                      color="light-green"
                      glossy
                      no-caps
                      @click="
                        checkAusgewaehlteBauinformationAusQTableAufInternenLink()
                      "
                      :disable="computeInternerLinkTableBauinformationen"
                    />
                  </div>
                  <!-- ALT: -->
                  <!--
                    <div class="col-2">
                      <q-btn
                        :href="getSelectedInternerLinkTableBauinformationen"
                        type="a"
                        target="_blank"
                        label="Internen Link öffnen"
                        color="light-green"
                        glossy
                        no-caps
                        @click="
                          checkAusgewaehlteBauinformationAusQTableAufInternenLink()
                        "
                        :disable="computeSelectedRowsTableBauinformationen"
                      />
                    </div>
                    -->
                  <div class="col-md-2 col-12">
                    <!-- ALT: class="stretch full-width" -->
                    <!-- NEU: style="width: 90%" -->
                    <q-btn
                      :href="getSelectedInternerLinkTableBauinformationen"
                      type="a"
                      target="_blank"
                      class="row stretch full-width"
                      label="Internen BIM.click-Link öffnen (Test)"
                      color="light-green"
                      glossy
                      no-caps
                      :disable="computeInternerLinkTableBauinformationen"
                    >
                      <q-tooltip
                        :delay="1000"
                        :offset="[0, 10]"
                        max-width="500px"
                        content-class="bg-secondary text-white text-caption shadow-4"
                      >
                        Nur für Tests mit statisch im Download-Verzeichnis
                        gespeicherten Dateien (an Stelle der Schaltfläche
                        daneben)
                      </q-tooltip>
                    </q-btn>
                  </div>
                </div>
                <q-separator />
                <div
                  class="row full-width q-pt-xs q-pl-xs q-pr-xs q-pb-xs q-col-gutter-xs"
                >
                  <!--
                    <div class="col-3">
                    </div>
                    -->
                  <div class="col-md-8 col-12">
                    <q-badge
                      v-if="localStore.state.debugMode"
                      color="secondary"
                      multi-line
                    >
                      selectModelBauinformationenAusgewaehlterBaustoff:
                      {{ selectModelBauinformationenAusgewaehlterBaustoff }}
                    </q-badge>
                    <!-- TODO: input-debounce-Wert justieren, siehe https://quasar.dev/vue-components/input#Debouncing-model -->
                    <!-- ACHTUNG: Ohne option-value="bauinformationsBezeichnung" wird erwartet, dass in den Options eine -->
                    <!-- Property namens "value" vorhanden ist, die dann als Wert für die ausgewählte Option genommen wird!!! -->
                    <!-- In den Testdaten (const selectBauinformationenOptions) war eine solche Property ursprünglich vorhanden, -->
                    <!-- nicht aber in den Bauinformationen selbst -->
                    <!-- Daher funktionierte dieser Testcode ursprünglich auch ohne option-value="bauinformationsBezeichnung"!!! -->
                    <!-- Mittlerweile value: auch in selectBauinformationenOptions auskommentiert und -->
                    <!-- option-value="bauinformationsBezeichnung" unten hinzugefügt -->
                    <!-- ACHTUNG: Das q-select standout Attribut hier verhält sich etwas anders als die sonstigen standouts an q-inputs -->
                    <!-- Daher standout="bg-teal-4 text-black" plus input-class="text-white" -->

                    <!-- ACHTUNG: @new-value="createSelectValueBauinformationenAusgewaehlteBaueigenschaft" -->
                    <!--          OHNE "()" beim Funktionsaufruf, sonst mysteriöser Fehler: -->
                    <!--          "[Vue warn]: Error in v-on handler: 'TypeError: Cannot read property 'length' of undefined' -->
                    <!--          Ohne "()" bedeutet, dass die nativen Parameter des @new-value Events verwendet werden beim -->
                    <!--          Aufruf der Funktion, siehe -->
                    <!-- https://forum.quasar-framework.org/topic/4696/solved-error-in-q-select-with-filtering-and-adding-to-menu-aka-to-use-or-not-to-use/4 -->
                    <!-- NEU: QSelect disablen in Abhängigkeit von Benutzerrolle -->
                    <!-- ================================================================================================================== -->
                    <!-- ALT: style="width:80%"                                                                                             -->
                    <!--      Verhinderte in früherer Version, dass das QSelect mit QButton rechts über die QTable hinausragt               -->
                    <!-- ACHTUNG: War aber die Ursache von Problemen zusammen mit dem "Speichern"-Button im After-VSlot                     -->
                    <!--          Daher dieses entfernt, und das ganze QSelect zusammen mit dem "Speichern"-Button in eigene Row verschoben -->
                    <!-- ================================================================================================================== -->
                    <q-select
                      dense
                      :disable="benutzerRolleIstMitarbeiter"
                      square
                      bg-color="teal-2"
                      standout="bg-teal-4 text-black"
                      input-class="text-white"
                      filled
                      v-model="selectModelBauinformationenAusgewaehlterBaustoff"
                      :options="
                        selectFilterOptionsBauinformationenAusgewaehlterBaustoff
                      "
                      option-value="bauinformationsBezeichnung"
                      label="Dem Baustoff zugeordnete Bauinformationen auswählen/abwählen"
                      stack-label
                      use-chips
                      :multiple="true"
                      options-selected-class="text-primary"
                      options-dense
                      use-input
                      input-debounce="0"
                      @new-value="
                        createSelectValueBauinformationenAusgewaehlterBaustoff
                      "
                      @filter="
                        selectFilterFunctionBauinformationenAusgewaehlterBaustoff
                      "
                      bottom-slots
                      @focus="
                        showHintSelectBauinformationenAusgewaehlterBaustoff = true
                      "
                      @blur="
                        showHintSelectBauinformationenAusgewaehlterBaustoff = false
                      "
                    >
                      <!-- Zu den Icons siehe https://quasar.dev/vue-components/select#Decorators - erfordert "bottom-slots" Prop am q-select  -->
                      <template
                        v-slot:append
                        v-if="selectModelBauinformationenAusgewaehlterBaustoff"
                      >
                        <q-icon name="search" @click.stop />
                        <!-- NEU: Statt "clearable" Prop am q-select expliziter Cancel-Icon - erlaubt es, dessen Color zu setzen -->
                        <!-- Vorlage: https://quasar.dev/vue-components/select#Clearable -->
                        <q-icon
                          name="cancel"
                          @click.stop="
                            selectModelBauinformationenAusgewaehlterBaustoff = []
                          "
                          class="cursor-pointer"
                          color="primary"
                        />
                        <!-- ACHTUNG: TODO - Muss oben leerer Array sein??? -->
                      </template>
                      <template v-slot:after>
                        <!-- Ursprünglich war hier der Button "Speichern" im After-VSlot des QSelects, diesen verschoben im Code nach unten -->
                      </template>
                      <!-- <template v-slot:hint> -->
                      <!-- NEU: Hint nur anzeigen, wenn das q-select Fokus hat -->
                      <!-- Per v-if="showHintSelectBauinformationenAusgewaehlterBaustoff" und native Vue Events: -->
                      <!-- @focus="showHintSelectBauinformationenAusgewaehlterBaustoff=true" -->
                      <!-- @blur="showHintSelectBauinformationenAusgewaehlterBaustoff=false" -->
                      <template
                        v-slot:hint
                        v-if="
                          showHintSelectBauinformationenAusgewaehlterBaustoff
                        "
                      >
                        <ul class="q-pl-xs">
                          <li>
                            <strong>Filtern:</strong> Eine
                            Bauinformationsbezeichnung (z.B. "Norm > DIN > EN >
                            13164") oder einen Bauinformationsanzeigetext (z.B.
                            "Datenblatt") als Filtertext in das Eingabefeld
                            eingeben. Auch unvollständige Angaben (z.B.
                            "Datenbl") sind möglich. Dies filtert die im
                            Dropdown-Menü angezeigten Optionen.
                          </li>
                          <li>
                            <strong>Auswählen:</strong> Dem ausgewählten
                            Baustoff zugeordnete Bauinformationen im
                            Dropdown-Menü auswählen.
                          </li>
                          <li>
                            <strong>Abwählen:</strong> Ausgewählte
                            Bauinformationen können mit
                            <q-icon
                              name="cancel"
                              color="primary"
                            />&nbsp;abgewählt werden.
                          </li>
                          <li>
                            Zum
                            <strong>Speichern:</strong> Schaltfläche
                            "Zugeordnete Bauinformationen speichern" drücken.
                          </li>
                        </ul>
                        <!-- <br /> <br /> <br /> -->
                        <!-- TODO: Um vertikalen Scrollbalken zu verhindern, funktioniert nicht -->
                      </template>
                      <template v-slot:selected-item="scope">
                        <q-chip
                          removable
                          dense
                          @remove="scope.removeAtIndex(scope.index)"
                          :tabindex="scope.tabindex"
                          color="primary"
                          text-color="white"
                          class="q-ma-xs shadow-4"
                        >
                          <!-- ALT: -->
                          <!-- {{ scope.opt.bauinformationsBezeichnung }} -->
                          <!-- NEU: Long Label Truncation, mit Tooltip der vollen Bezeichnung, mittels spezieller CSS Class "ellipsis": -->
                          <!-- Damit Truncation für lange Texte an QChip - Vorlage: https://quasar.dev/vue-components/chip#Example--Long-label-truncation -->
                          <div class="ellipsis">
                            {{ scope.opt.bauinformationsBezeichnung }}
                            <q-tooltip
                              :delay="1000"
                              :offset="[0, 10]"
                              max-width="500px"
                              content-class="bg-secondary text-white text-caption shadow-4"
                              >{{
                                scope.opt.bauinformationsAnzeigeText
                              }}</q-tooltip
                            >
                          </div>
                          <!-- <q-avatar color="secondary" text-color="white" :icon="scope.opt.icon" /> -->
                          <!-- scope.opt.bauinformationsBezeichnung -->
                        </q-chip>
                      </template>

                      <template v-slot:option="scope">
                        <q-item
                          v-bind="scope.itemProps"
                          v-on="scope.itemEvents"
                        >
                          <!--
                                <q-item-section avatar>
                                  <q-icon :name="scope.opt.icon" />
                                </q-item-section>
                                -->
                          <q-item-section>
                            <q-item-label
                              v-html="scope.opt.bauinformationsBezeichnung"
                            />
                            <!-- NEU: Hier bauinformationsAnzeigeText statt bauinformationsTyp anzeigen: -->
                            <q-item-label caption>{{
                              scope.opt.bauinformationsAnzeigeText
                            }}</q-item-label>
                          </q-item-section>
                        </q-item>
                      </template>
                    </q-select>
                  </div>
                  <div class="col-md-4 col-12">
                    <!-- ACHTUNG: Am folgenden q-btn kann type="submit" bleiben, da nicht Teil eines q-forms!!! -->
                    <q-btn
                      class="stretch full-width"
                      :disable="benutzerRolleIstMitarbeiter"
                      color="positive"
                      glossy
                      type="submit"
                      @click="
                        submitZugeordneteBauinformationenAusgewaehlterBaustoff()
                      "
                      label="Zugeordnete Bauinformationen speichern"
                      no-caps
                    />
                  </div>
                </div>
                <!-- Eventuelle 2. Zeile mit Buttons, aktuell disabled -->
                <!--
                <div v-if="$q.screen.gt.xs" class="row full-width">
                  <div class="col-2"></div>
                  <div class="col-2"></div>
                  <div class="col-2"></div>
                  <div class="col-2"></div>
                  <div class="col-2"></div>
                  <div class="col-2"></div>
                </div>
                -->
              </div>
              <br />
              <br />
              <br />
              <!-- TODO: Workaround, um vertikalen Scrollbalken zu verhindern -->
              <!--***===================================== Ende Code aus Bauinformationen.vue ========================================-->
            </q-tab-panel>
            <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
            <q-tab-panel name="debugBaustoffBaumTabBaustoffe">
              <div>
                <q-btn
                  label="Test Button"
                  glossy
                  no-caps
                  @click="wechselndeTestMethode()"
                />
              </div>
              <br />
              <div v-if="localStore.state.debugMode">
                selectedKeyTreeBaustoffe:
                {{ selectedKeyTreeBaustoffe }}
                <br />
                <br />
                expandedKeysTreeBauestoffe:
                {{ expandedKeysTreeBaustoffe }}
                <br />
                <br />
                $refs.treeBaustoffe.lazy:
                {{ $refs.treeBaustoffe.lazy }}
                <!-- lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"} -->
                <br />
                <br />
                <q-separator />
                <br />
                selectedNodeTreeBaustoffe (computed):
                <!-- NEU - Formatierung mit stringify -->
                <!-- Vorlage: https://stackoverflow.com/questions/45539735/prettify-json-string-vuejs2-webpack -->
                <!-- Erfordert Vue v-html und computed Property, die JSON.stringify aufruft! -->
                <pre v-html="stringifySelectedNodeTreeBaustoffe"></pre>
                <!-- ALT: -->
                <!-- {{ selectedNodeTreeBaustoffe }} -->
              </div>
            </q-tab-panel>
            <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
            <q-tab-panel name="debugZugeordneteRohstoffeTabBaustoffe">
              <div v-if="localStore.state.debugMode">
                <!-- NEU - Formatierung teilweise mit stringify -->
                <!-- Vorlage: https://stackoverflow.com/questions/45539735/prettify-json-string-vuejs2-webpack -->
                <!-- Erfordert Vue v-html und computed Property, die JSON.stringify aufruft! -->
                selectedKeyTreeBaustoffe:
                {{ selectedKeyTreeBaustoffe }}
                <br />
                <br />
                selectedKeyTreeRohstoffe:
                {{ selectedKeyTreeRohstoffe }}
                <br />
                <br />
                expandedKeysTreeRohstoffe:
                {{ expandedKeysTreeRohstoffe }}
                <br />
                <br />
                tickedKeysTreeRohstoffe:
                {{ tickedKeysTreeRohstoffe }}
                <br />
                <br />
                <q-separator />
                <br />
                selectedNodeTreeBaustoffe.zugeordneteRohstoffe:
                <!-- ALT: -->
                <!-- {{ selectedNodeTreeBaustoffe.zugeordneteRohstoffe }} -->
                <!-- NEU: -->
                <pre v-html="stringifyZugeordneteRohstoffe"></pre>
                <q-separator />
                <br />
                nodesTreeRohstoffe:
                <!-- ALT: -->
                <!-- {{ nodesTreeRohstoffe }} -->
                <!-- NEU: -->
                <pre v-html="stringifyNodesTreeRohstoffe"></pre>
                <!-- dataHierarchyRohstoffe - disabled, nur für QHierarchy:-->
                <!--
                    <br />
                    <br />
                    dataHierarchyRohstoffe:
                    {{ dataHierarchyRohstoffe}}
                    -->
              </div>
            </q-tab-panel>
          </q-tab-panels>
          <!-- </q-card> -->
        </div>
        <div v-else>
          <q-card class="q-pa-sm">
            <ul>
              <li>
                Bitte links im Baustoffbaum einen
                <strong>Baustoff</strong> (d.h. einen <strong>Knoten</strong> im
                Baum)
                <strong>auswählen.</strong>
              </li>
              <li>
                Dazu mit der linken Maustaste bzw. dem Finger auf das graue
                Dreieck an einem Baustoff klicken, um dessen Knoten im Baum
                <strong>auf- bzw. zuzuklappen.</strong>
              </li>
              <li>
                Um einen bestimmten Baustoff <strong>auszuwählen,</strong> mit
                der linken Maustaste bzw. dem Finger auf dessen farbiges Icon
                oder dessen Text klicken.
              </li>
              <li>
                Der so <strong>ausgewählte Baustoff</strong> wird dann an dessen
                Knoten im Baum
                <span style="color: #ffffff; background-color: #1976d2">
                  <strong> &nbsp;farblich markiert.&nbsp; </strong>
                </span>
              </li>
              <li>
                Zusätzlich werden dann hier rechts vom Baustoffbaum alle
                relevanten <strong>Planungsinformationen</strong> für den
                ausgewählten Baustoff angezeigt.
              </li>
              <li>
                Mit der rechten Maustaste bzw. durch Drücken mit dem Finger kann
                ein <strong>Kontextmenü</strong> für einen Baustoff im Baum
                angezeigt werden. Dies muss nicht der ausgewählte Baustoff sein.
              </li>
              <li>
                <strong>Hinweis:</strong> Die
                <strong>anteilige Breite</strong> der Anzeige für den
                Baustoffbaum links und die Planungsinformationen rechts kann
                durch Ziehen der senkrechten Trennlinie mit der linken Maustaste
                bzw. dem Finger nach links oder rechts angepasst werden.
              </li>
            </ul>
          </q-card>
        </div>
      </template>
    </q-splitter>
    <!-- </div> -->
    <!-- Verworfenener Dialog
    <q-dialog v-if="selectedNodeTreeBaustoffe" v-model="addBaueigenschaftDialog">
      <q-card>
        <q-card-section>
          <div>Bitte die Bezeichnung der neuen Eigenschaft eingeben:</div>
          <q-input label="Baueigenschaftsbezeichnung" v-model="eigenschaftName" />
          <q-input label="Kennwert 1" v-model="eigenschaftKennwert1" />
        </q-card-section>

        <q-card-actions align="right">
          <q-btn flat label="Abbrechen" color="primary" no-caps v-close-popup />
          <q-btn
            flat
            label="Baueigenschaft anlegen"
            color="primary"
            @click="addBaueigenschaft()"
            no-caps
          />
        </q-card-actions>
      </q-card>
    </q-dialog>
    !-->
    <!-- ---------------------------------------------------------------------------------- -->
    <!-- NEU: Dialog für Umbenennung (Renaming) der Bezeichnung des ausgewählten Baustoffs: -->
    <q-dialog
      v-if="selectedNodeTreeBaustoffe"
      v-model="renameSelectedBaustoffDialog"
    >
      <!-- NEU: Quasar Internal Validation hier an diesem q-dialog angewendet - kann auch auf Forms angewendet werden! -->
      <!-- Siehe weitere Kommentare beim Dialog für Erzeugung eines neuen Baustoffs unten -->
      <div>
        <!-- WICHTIG: div-Wrapper für q-form!!! -->
        <q-form
          ref="formUmbenennenBaustoffDialog"
          @submit="renameBaustoff"
          @reset="resetRenameBaustoff"
        >
          <!-- Für Validation, erfordert dieses q-form mit div-Wrapper inside q-dialog, das sonst überflüssig wäre -->
          <q-card>
            <q-card-section>
              <div>
                Bitte die neue Bezeichnung für den Baustoff
                <strong
                  >"{{ selectedNodeTreeBaustoffe.baustoffBezeichnung }}"</strong
                >
                im Baustoffbaum eingeben:
                <br />
                <br />
              </div>
              <q-input
                autofocus
                square
                bg-color="teal-2"
                standout="bg-teal-4 text-black"
                dense
                :clearable="true"
                :rules="[
                  v =>
                    v !== selectedNodeTreeBaustoffe.baustoffBezeichnung ||
                    'Alte und neue Bezeichnung müssen unterschiedlich sein',
                  v =>
                    (v != null && v !== '') || 'Bezeichnung ist erforderlich',
                  v =>
                    (v.length > 0 && v.length <= 200) ||
                    'Bezeichnung darf höchstens 200 Zeichen lang sein'
                ]"
                lazy-rules
                hint="Unter den Geschwisterbaustoffen im Baustoffbaum eindeutige Bezeichnung für den Baustoff"
                hide-hint
                label="Bezeichnung des Baustoffs"
                v-model="geaenderteBezeichnungBaustoff"
                @focus="
                  geaenderteBezeichnungBaustoff =
                    selectedNodeTreeBaustoffe.baustoffBezeichnung
                "
              />
            </q-card-section>
            <q-card-actions align="right">
              <div class="row full-width q-col-gutter-xs q-pa-xs">
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    label="Abbrechen"
                    color="negative"
                    no-caps
                    v-close-popup
                  />
                </div>
                <!-- ACHTUNG: q-btn type="reset" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="reset"
                    label="Zurücksetzen"
                    color="deep-orange"
                    text-color="white"
                    no-caps
                  />
                </div>
                <!-- ACHTUNG: q-btn type="submit" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-6">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="submit"
                    label="Baustoffbezeichnung speichern"
                    color="positive"
                    no-caps
                  />
                </div>
              </div>
            </q-card-actions>
          </q-card>
        </q-form>
        <!-- Für Form Validation Tests statt q-dialog -->
      </div>
    </q-dialog>
    <!-- /Dialog für Umbenennung des ausgewählten Baustoffs -->
    <!-- -------------------------------------------------- -->
    <!-- Dialog für Erzeugung eines neuen Baustoffs: -->
    <q-dialog
      v-if="selectedNodeTreeBaustoffe"
      v-model="createNewBaustoffDialog"
    >
      <!-- NEU: Quasar Internal Validation hier an diesem q-dialog angewendet - kann auch auf Forms angewendet werden! -->
      <!-- (Siehe https://quasar.dev/vue-components/input#Validation: Dort mit HTML <form> !!!) -->
      <!-- Siehe https://quasar.dev/vue-components/form#Usage: Dort mit <q-form> !!! -->

      <!-- HINWEISE für Validation: -->
      <!-- Speziell für Validation innerhalb von q-dialogs muss Folgendes beachtet werden: -->
      <!-- 1. ACHTUNG: Es muss ein <q-form> zwischen <q-dialog> und <q-card> eingefügt werden - Validation erfordert zwingend q-form!!! -->
      <!-- 2. ACHTUNG: Das <q-form> muss durch ein <div> gewrapped werden!!! Siehe Note auf https://quasar.dev/vue-components/dialog -->
      <!-- 3. <q-form @submit="createChildBaustoff"> -->
      <!-- 4. <q-btn type="submit" -->
      <!-- 5. <q-form ref="formNeuerBaustoffDialog"> - damit kann in Methode manuell Validation und Reset Validation für das Feld ausgelöst werden, z.B. per: -->
      <!--     this.$refs.formNeuerBaustoffDialog.validate() -->
      <!--     this.$refs.formNeuerBaustoffDialog.resetValidation() -->
      <!-- 6. Das :clearable="true" am q-input erscheint nur, wenn das Feld schon gefüllt ist mit Input -->
      <!-- 7. Zusätzlich kann man selbst das Form/Feld zurücksetzen, durch den hinzugefügten Reset Button mit Methode, die resetValidation() auslöst:-->
      <!--    <q-btn type="reset"> und <q-form @reset="resetCreateChildBaustoff" -->
      <!--    Ähnliches (ref plus Methode resetValidation() gibt es für q-input, siehe https://quasar.dev/vue-components/input#Validation -->
      <!-- 8. Die eigentlichen Validation Rules per rules=... am q-input spezifizieren -->

      <div>
        <!-- WICHTIG: div-Wrapper für q-form!!! -->
        <q-form
          ref="formNeuerBaustoffDialog"
          @submit="createChildBaustoff"
          @reset="resetCreateChildBaustoff"
        >
          <!-- Für Validation, erfordert dieses q-form mit div-Wrapper inside q-dialog, das sonst überflüssig wäre -->
          <q-card>
            <q-card-section>
              <div>
                Bitte die gewünschte Baustoffbezeichnung für den neuen
                Kindbaustoff des Baustoffs
                <strong
                  >"{{ selectedNodeTreeBaustoffe.baustoffBezeichnung }}"</strong
                >
                im Baustoffbaum eingeben:
                <br />
                <br />
              </div>
              <q-input
                autofocus
                square
                bg-color="teal-2"
                standout="bg-teal-4 text-black"
                dense
                :clearable="true"
                :rules="[
                  v =>
                    (v != null && v !== '') || 'Bezeichnung ist erforderlich',
                  v =>
                    (v.length > 0 && v.length <= 200) ||
                    'Bezeichnung darf höchstens 200 Zeichen lang sein'
                ]"
                lazy-rules
                hint="Unter den Geschwisterbaustoffen im Baustoffbaum eindeutige Bezeichnung für den neuen Kindbaustoff"
                hide-hint
                label="Bezeichnung des neuen Kindbaustoffs"
                v-model="bezeichnungNeuerBaustoff"
              />
            </q-card-section>
            <q-card-actions align="right">
              <div class="row full-width q-col-gutter-xs q-pa-xs">
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    label="Abbrechen"
                    color="negative"
                    no-caps
                    v-close-popup
                  />
                </div>
                <!-- ACHTUNG: q-btn type="reset" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="reset"
                    label="Zurücksetzen"
                    color="deep-orange"
                    text-color="white"
                    no-caps
                  />
                </div>
                <!-- ACHTUNG: q-btn type="submit" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-6">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="submit"
                    label="Kindbaustoff neu anlegen"
                    color="positive"
                    no-caps
                  />
                </div>
              </div>
            </q-card-actions>
          </q-card>
        </q-form>
        <!-- Für Form Validation Tests statt q-dialog -->
      </div>
    </q-dialog>
    <q-dialog
      v-if="selectedNodeTreeBaustoffe"
      v-model="deleteSelectedBaustoffDialog"
    >
      <!-- =========================================================================== -->
      <!-- ACHTUNG: Für die Formatierung in diesem QDialog ist aktuell nur eine QCard, -->
      <!-- kein div-Wrapper und kein QForm erforderlich!                               -->
      <!-- =========================================================================== -->
      <q-card>
        <q-card-section>
          <div class="row full-width q-pa-xs">
            <q-avatar
              icon="warning"
              color="negative"
              text-color="white"
              style="margin-left: auto;margin-right: auto;"
            />
          </div>
          <!-- ------------------------------------------------------------------------------------------------ -->
          <!-- HINWEIS: style="margin-left: auto;margin-right: auto;" am q-avatar in Verbindung mit div-Wrapper -->
          <!--          für Centering des Avatars, siehe                                                        -->
          <!--          https://forum.quasar-framework.org/topic/6109/align-to-center-within-grid-column/3      -->
          <!-- ------------------------------------------------------------------------------------------------ -->
          <div class="row full-width q-pt-md">
            <span class="q-pa-none">
              Soll der Baustoff
              <b>"{{ selectedNodeTreeBaustoffe.baustoffBezeichnung }}"</b>
              und alle seine Kindbaustoffe wirklich gelöscht werden?
            </span>
          </div>
        </q-card-section>
        <!-- ALT: -->
        <!-- <q-card-actions align="right"> -->
        <!-- NEU: Buttons, die sich stretchen - erfordert Wrapper-div -->
        <q-card-actions>
          <div class="row full-width q-col-gutter-xs q-pa-xs">
            <div class="col-6">
              <q-btn
                class="stretch full-width"
                style="height: 100%"
                glossy
                label="Abbrechen"
                color="positive"
                no-caps
                v-close-popup
              />
            </div>
            <div class="col-6">
              <q-btn
                class="stretch full-width"
                style="height: 100%"
                glossy
                label="Löschen"
                color="negative"
                @click="deleteSelectedBaustoff()"
                v-close-popup
                no-caps
              />
            </div>
          </div>
          <!-- ACHTUNG: Bei @click="method()" unbedingt "()"" hinter "method" angeben, sonst passiert gar nichts!!! -->
          <!-- ANDERERSEITS: @click="handleClick" und @click="handleClick()" sind äquivalent laut https://flaviocopes.com/vue-events/ -->
        </q-card-actions>
      </q-card>
    </q-dialog>
    <!-- ------------------------------------------------------------------------------------------- -->
    <!-- NEU: Selber Dialog, der aber nicht den selected Node löscht, sondern einen in der Variablen -->
    <!--      zuLoeschenderNodeTreeBaustoffe zwischengespeicherten Node:                             -->
    <q-dialog
      v-if="zuLoeschenderNodeTreeBaustoffe"
      v-model="deleteBaustoffDialog"
    >
      <!-- =========================================================================== -->
      <!-- ACHTUNG: Für die Formatierung in diesem QDialog ist aktuell nur eine QCard, -->
      <!-- kein div-Wrapper und kein QForm erforderlich!                               -->
      <!-- =========================================================================== -->
      <q-card>
        <q-card-section>
          <div class="row full-width q-pa-xs">
            <q-avatar
              icon="warning"
              color="negative"
              text-color="white"
              style="margin-left: auto;margin-right: auto;"
            />
          </div>
          <!-- ------------------------------------------------------------------------------------------------ -->
          <!-- HINWEIS: style="margin-left: auto;margin-right: auto;" am q-avatar in Verbindung mit div-Wrapper -->
          <!--          für Centering des Avatars, siehe                                                        -->
          <!--          https://forum.quasar-framework.org/topic/6109/align-to-center-within-grid-column/3      -->
          <!-- ------------------------------------------------------------------------------------------------ -->
          <div class="row full-width q-pt-md">
            <span class="q-pa-none">
              Soll der Baustoff
              <b>{{ zuLoeschenderNodeTreeBaustoffe.baustoffBezeichnung }}</b>
              und alle seine Kindbaustoffe wirklich gelöscht werden?
            </span>
          </div>
        </q-card-section>
        <!-- ALT: -->
        <!-- <q-card-actions align="right"> -->
        <!-- NEU: Buttons, die sich stretchen - erfordert Wrapper-div -->
        <q-card-actions>
          <div class="row full-width q-col-gutter-xs q-pa-xs">
            <div class="col-6">
              <q-btn
                class="stretch full-width"
                style="height: 100%"
                glossy
                label="Abbrechen"
                color="positive"
                no-caps
                v-close-popup
              />
            </div>
            <div class="col-6">
              <q-btn
                class="stretch full-width"
                style="height: 100%"
                glossy
                label="Löschen"
                color="negative"
                @click="deleteBaustoff(zuLoeschenderNodeTreeBaustoffe)"
                v-close-popup
                no-caps
              />
            </div>
          </div>
          <!-- ACHTUNG: Bei @click="method()" unbedingt "()"" hinter "method" angeben, sonst passiert gar nichts!!! -->
          <!-- ANDERERSEITS: @click="handleClick" und @click="handleClick()" sind äquivalent laut https://flaviocopes.com/vue-events/ -->
        </q-card-actions>
      </q-card>
    </q-dialog>
    <!-- Verworfener Dialog, Probleme
    <q-dialog v-model="parentPropertyDeaktiviert">
      <q-card>
        <q-card-section>
          <div class="text-h6">Vorgang nicht möglich</div>
        </q-card-section>

        <q-card-section>
          Die Eigenschaft ist im Elternknoten deaktiviert und kann daher nicht
          aktiviert werden.
        </q-card-section>

        <q-card-actions align="right">
          <q-btn flat label="OK" color="primary" no-caps v-close-popup />
        </q-card-actions>
      </q-card>
    </q-dialog>
    -->
  </q-page>
</template>

<script>
//***=====================================================================================================================================
//---------------------------------------------------------------------------------------------------------------------------------------
// Auskommentiertes konstantes Objekt, da durch Variable ersetzt, die mit ALLEN Bauinformationen als QSelect Options geladen wird:
/* const selectOptionsBauinformationenAusgewaehlterBaustoff = [
  // Simulierte Optionen für QSelect zur Auswahl von Bauinformationen
  // TODO: selectOptionsBauinformationenAusgewaehlterBaustoff muss später aus Datenbank geladen werden mit den entsprechenden Daten für ALLE Bauinformationen
  // Es könnte, falls das zuviele Werte sind, auch schon beim initialen Laden zusätzlich gefiltert werden
  // (z.B. über Toggles auf den Enum-Werten für bauinformationsTyp)
  // Design für zugeordnete Bauinformationen:
  // - Halte Array von Referenzen auf zugeordnete Bauinformationen im Mongoose Model des Baustoffs:
  //   bauinformationen: [BauinformationSchema]
  // - Hole diese zugeordneten Bauinformationen schon populiert mit dem Baustoff aus der Datenbank (analog zu Baueigenschaften)
  // - Zeige diese Bauinformationen in q-table im Tab "Zugeordnete Bauinformationen" an, selbes Layout wie die q-table in "Bauinformationen"
  // - Lade selectOptionsBauinformationenAusgewaehlterBaustoff mit den bereits selektierten Bauinformationen für das q-select aus diesem Array (Bezeichnung/Typ)
  // - Lade selectModelBauinformationenAusgewaehlterBaustoff per Backend Call, der Bezeichnung und Typ von allen Bauinformationen aus der Datenbank liest
  // - Nach Ende der Selektion/Deselektion in q-select (dafür im V-Slot "after" oder alternativ "append" einen QButton mit type="submit"
  //   und label="Speichern" hinzugefügt, der bei @click eine Methode submitZugeordneteBauinformationenAusgewaehlterBaustoff ruft,
  //   siehe https://quasar.dev/vue-components/select#Slots-with-QBtn-type-%E2%80%9Csubmit%E2%80%9D):
  //   -- Update des Arrays von Referenzen auf zugeordnete Bauinformationen des Baustoffs per Backend/Mongoose Call in der Datenbank mit den aktuell selektierten Referenzen
  //   -- Neu-Laden des Baustoffs bzw. der populierten zugeordneten Bauinformationen
  //   -- Refresh der q-table im Tab "Zugeordnete Bauinformationen"
  {
    bauinformationsBezeichnung: "13164",
    bauinformationsTyp: "Norm",
    value: "13164", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "13165",
    bauinformationsTyp: "Norm",
    value: "13165",
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "13166",
    bauinformationsTyp: "Norm",
    value: "13166", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "13786",
    bauinformationsTyp: "Norm",
    value: "13786", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "18319",
    bauinformationsTyp: "Norm",
    value: "18319", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "18336",
    bauinformationsTyp: "Norm",
    value: "18336", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "2602",
    bauinformationsTyp: "Norm",
    value: "2602", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "4150-1",
    bauinformationsTyp: "Norm",
    value: "4150-1", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "4150-2",
    bauinformationsTyp: "Norm",
    value: "4150-2", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "4150-3",
    bauinformationsTyp: "Norm",
    value: "4150-3", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "ArbStättV",
    bauinformationsTyp: "Verordnung",
    value: "ArbStättV",
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "Beton-Estrich",
    bauinformationsTyp: "Datenblatt",
    value: "Beton-Estrich", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    ion: "map" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "EnEV",
    bauinformationsTyp: "Verordnung",
    value: "EnEV",
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "Erdbebenzonen und Untergrundklassen",
    bauinformationsTyp: "Technische Baubestimmung (TB)",
    value: "Erdbebenzonen und Untergrundklassen",
    disable: false,
    icon: "golf_course" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "LBO",
    bauinformationsTyp: "Gesetz",
    value: "LBO",
    disable: false,
    icon: "casino" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "Z-1-2-193",
    value: "Z-1-2-193",
    disable: false,
    bauinformationsTyp: "Verordnung",
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  }
];
*/

//-------------------------------------------------------------------------------------------------------------------------------
// NEU: Konstanten für Tests Kontexthilfe
// TODO: Auslagern in JS Datei
//-------------------------------------------------------------------------------------------------------------------------------
const CONTEXT_HELP_BAUSTOFFE_BAUEIGENSCHAFTEN_NEU = 100; // TODO - nur für Test Kontexthilfe mit Markdown
const CONTEXT_HELP_BAUSTOFFE_BAUEIGENSCHAFTEN_AUSWAHL = 50; // TODO - nur für Test Kontexthilfe mit Markdown
//-------------------------------------------------------------------------------------------------------------------------------
// NEU: Import Context from quasar.conf.js:
// Muss nicht importiert werden? Z.B. kann auf process.env.API auch so zugegriffen werden!
// Siehe https://quasar.dev/quasar-cli/quasar-conf-js
// Siehe https://quasar.dev/quasar-cli/cli-documentation/handling-process-env - process.env.API in ctx enthält API URL
// import { ctx } from "./../../quasar.conf";
//-------------------------------------------------------------------------------------------------------------------------------
// NEU: Imports für Enums zur Verwaltung der Benutzernachrichten (QNotify Message im Footer)
// ACHTUNG: Dabei kein require, sondern import, sonst undefined Fehler beim Zugriff!!!
import BenutzerNachrichten from "../modules/benutzer-nachrichten.js";
import BenutzerNachrichtenTypen from "../modules/benutzer-nachrichten-typen.js";
//-------------------------------------------------------------------------------------------------------------------------------
// NEU - #401: Für q-option-group-basierende Anzeige der neuen fachlichen Kategorien/Rubriken von Baueigenschaften:
import OptionsFachlicheKategorienBaueigenschaften from "../modules/options-fachliche-kategorien-baueigenschaften";
//-------------------------------------------------------------------------------------------------------------------------------
import BaueigenschaftsProfileTabBaustoffeUndBaueinheiten from "../components/baueigenschafts-profile-tab-baustoffe-und-baueinheiten";
import GenerischesBaueigenschaftsProfilFormular from "../components/generisches-baueigenschafts-profil-formular"; // NEU
import LayoutGesteuertesGenerischesBaueigenschaftsProfilFormular from "../components/layout-gesteuertes-generisches-baueigenschafts-profil-formular"; // NEU
//-------------------------------------------------------------------------------------------------------------------------------
// Imports für Kindkomponenten:
// import BaueigenschaftBearbeitung from "../components/baustoffe-baueigenschaft-bearbeitung"; // ALT: Wird nicht mehr verwendet
// import BaustoffeigenschaftNeuanlage from "../components/baustoffe-baueigenschaft-neuanlage"; // Wird nicht verwendet
// import AufzaehlungsWerteAuswahl from "../components/baustoffe-baueigenschaft-aufzaehlungs-werte-auswahl"; // Wird nicht mehr verwendet
// import BauinformationAuswahl from "../components/baustoffe-baueigenschaft-bauinformation-auswahl"; // Wird nicht mehr verwendet
// import PopUpMenuTableBaueigenschaftenen from "../components/pop-up-menu-table-baueigenschaften"
//-------------------------------------------------------------------------------------------------------------------------------
// NEU: Import für global Store
// Für globale Daten, die zwischen MyLayout.vue und anderen Vue-Komponenten geshared werden
// Siehe https://medium.com/fullstackio/managing-state-in-vue-js-23a0352b1c87
import { globalStore } from "../modules/global-store";
//-------------------------------------------------------------------------------------------------------------------------------
// NEU: Imports für Quasar Utilities
// Quasar Date Utils, siehe https://quasar.dev/quasar-utils/date-utils
// Quasar Copy to Clipboard, siehe https://quasar.dev/quasar-utils/other-utils#Copy-to-Clipboard
import { date, copyToClipboard, Loading, QSpinnerGears, Notify } from "quasar"; // NEU: Loading, QSpinnerGears, Notify für Spinner Gears, z.B. in loadTreeRohstoffe()
//-------------------------------------------------------------------------------------------------------------------------------
// NEU: Markdown Editor für Beschreibungen (nur Test - wieder disabled, wegen Problemen):
// import { Editor } from "@toast-ui/vue-editor"; // NEU: Markdown Editor, siehe https://github.com/nhn/toast-ui.vue-editor
// Installation mit: bimclickfrontend> npm install --save @toast-ui/vue-editor

export default {
  //***================================================================================================================================
  components: {
    // Verwendete Vue-Komponenten:
    // NEU: Kindkomponenten disabled!
    // AufzaehlungsWerteAuswahl: AufzaehlungsWerteAuswahl // Vue-Komponente zum QSelect Handling der Aufzählungswerte
    // BauinformationAuswahl: BauinformationAuswahl // Vue-Komponente zum QSelect Handling der Auswahl einer Bauinformation für eine Baueigenschaft
    // BaueigenschaftBearbeitung: BaueigenschaftBearbeitung // Vue-Komponente für die Bearbeitung einer Baueigenschaft - wird nicht mehr verwendet
    // BaueigenschaftNeuanlage, // Vue-Komponente für die Neuanalge einer Baueigenschaft - wird aktuell nicht verwendet
    // markdownEditor: Editor // NEU: Markdown Editor, https://github.com/nhn/toast-ui.vue-editor - bisher nur Test
    // PopUpMenuTableBaueigenschaftenen: PopUpMenuTableBaueigenschaftenen
    baueigenschaftsProfileTabBaustoffeUndBaueinheiten: BaueigenschaftsProfileTabBaustoffeUndBaueinheiten,
    generischesBaueigenschaftsProfilFormular: GenerischesBaueigenschaftsProfilFormular, // NEU
    layoutGesteuertesGenerischesBaueigenschaftsProfilFormular: LayoutGesteuertesGenerischesBaueigenschaftsProfilFormular // NEU
  },
  name: "Baustoffe", // Vue Component Name - ACHTUNG - dabei beachten:
  // Exkurs zu Vue Component Names:
  // 1. Auf Groß-/Kleinschreibung achten
  // 2. Zwei Varianten möglich, siehe https://vuejs.org/v2/guide/components-registration.html
  //    Wir verwenden, weil Quasar es auch so macht, PascalCase für den Komponentennamen
  // 3. Der Component Name muss nicht mit dem gewählten File Name der Komponente übereinstimmen. Wir befolgen dafür folgende Namenskonvention:
  //    Component Name der Komponente:           ComponentName  in PascalCase (Großbuchstaben am Anfang aller Worte)
  //    Entsprechender File Name der Komponente: component-name in kebab-case (nur Kleinbuchstaben, mit Strichen getrennt)
  // 4. Der File Name der Komponente wird in routes.js referenziert - dort werden File Names von Komponenten zu Route Names und Route Pfaden zugeordnet!
  // 5. In MyLayout werden in den q-route-tabs nur Route Names referenziert, nicht Component Names!
  // 6. Wenn eine Komponente per components: andere Komponenten verwendet, werden diese zunächst importiert mit ihren File Names, und dann
  //    beliebig lokal benannt (dies sollte auch wieder obige Namenskonvention für die beiden beteiligten Namen folgen) - Beispiel:
  //    import ImportBaueigenschaftBearbeitung from "../components/baustoffe-baueigenschaft-bearbeitung"; // dabei beliebiger Name für den Import
  //    Danach in data():
  //    BaueigenschaftBearbeitung: ImportBaueigenschaftBearbeitung, // Lokaler Name für die verwendete Komponente, damit kann sie im Template
  //    dann per <BaueigenschaftBearbeitung> angesprochen werden, z.B.:
  //    <div> <BaueigenschaftBearbeitung :bearbeiteteBaueigenschaft="ausgewaehlteBaueigenschaft"> ... </div>
  //    Dabei erfolgen per :prop="xyz" Bindungen für deren Props.
  // 7. Im Template können Komponenten dann mit ihrem hier deklarierten Namen angesprochen werden per <ComponentName>
  // 8. Wenn man den Quasar Befehl quasar new page NewComponent benutzt, legt dieser ein File mit demselbern Namen NewComponent.vue an -
  //    dieses dann manuell umbenennen in new-component.vue, um obige Namenskonvention einzuhalten!
  //***================================================================================================================================
  data() {
    return {
      optionsFachlicheKategorienBaueigenschaften: OptionsFachlicheKategorienBaueigenschaften, // NEU - #401
      // selectedNodeTreeBaustoffe: null, // ALT - ist computed(), dort Timing-Problem gelöst
      zuLoeschenderNodeTreeBaustoffe: null, // NEU: Variable, um einen per Kontextmenü bestimmten zu löschenden Node im Tree zwischenzuspeichern
      // NEU: Variablen für QSelect zur Auswahl von Sonderzeichen (für Markdown)
      copyToClipboardDoneSonderzeichenAusgewaehlteBaueigenschaft: false, // NEU: Für Anzeige Hint unter QSelect für Auswahl Sonderzeichen im Tab "Baueigenschaften > Details zur ausgewählten Baueigenschaft"
      copyToClipboardDoneSonderzeichenNeueBaueigenschaft: false, // NEU: Für Anzeige Hint unter QSelect für Auswahl Sonderzeichen im Tab "Baueigenschaften > Neuanlage einer Baueigenschaft"
      hintFuerFormelMitSonderzeichen:
        "Formel, z.B. 'a" +
        "\u2080" +
        " = 10" +
        "\u207B\u00B3" +
        "m/s" +
        "\u00B2" +
        "'",
      // Dies ist eine Beispielformel mit ausgewählten Unicode-Zeichen für Hochstellungen, da hier in JS-Strings dafür keine HTML-Tags <sup> ... </sup> verwendbar sind!
      selectModelSonderzeichenAusgewaehlteBaueigenschaft: null, // Hält Objekt mit dem ausgewählten Sonderzeichen, Format {label, value} für QSelect im Tab "Baueigenschaften > Details zur ausgewählten Baueigenschaft"
      selectModelSonderzeichenNeueBaueigenschaft: null, // Hält Objekt mit dem ausgewählten Sonderzeichen, Format {label, value} im Tab "Baueigenschaften > Neuanlage einer Baueigenschaft"
      selectOptionsSonderzeichen: require("../modules/select-options-sonderzeichen")
        .selectOptionsSonderzeichen, // NEU: Select Options aus separater Datei laden
      //-------------------------------------------------------------------------------------------------------------------------------
      // NEU: Variable, die die id des Wurzelknotens deszu verschiebenden oder kopierenden Zweigs im Baustoffbauum enthält - wird per Kontextmenü gesetzt
      idWurzelZuBewegenderZweig: null,

      disableWerteFelder: false,
      suppressNotificationNeuTabBaueigenschaften: true, // Disabled bei Bedarf die Notifications (z.B. bei Öffnen des Tabs "Neu")

      zugeordneteBauinformationAusgewaehlteBaueigenschaft: {
        // TODO XXXXXX - Wird aktuell nicht mehr verwendet???
        bauinformationId: null,
        bauinformationsTyp: null,
        bauinformationsAnzeigeText: null, // NEU
        bauinformationsBezeichnung: null
      },
      /*
      disabledFieldsNeueBaueigenschaft: {
        kennWert1: true,
        kennWert2: true,
        datumsWert1: true,
        datumsWert2: true,
        tagesZeitWert1: true, // NEU
        tagesZeitWert2: true, // NEU
        bezeichnungsWert1: true,
        bezeichnungsWert2: true,
        aufzaehlungsWert: true,
        wahrheitsWert: true,
        symbol: true,
        einheit: true,
        operator: true,
        formel: true, // NEU
        sonderzeichen: true // NEU
      },
      */

      // Objekt, das die Werte der Baueigenschaft am im Pfad obersten Elternbaustoffs MIT definierten Werten enthält, sowie weitere Informationen:
      hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung: {
        ausgewaehlteBaueigenschaftIstDirektAktivierbar: true,
        ausgewaehlteBaueigenschaftKannEigeneWerteDefinieren: true,
        relevanteKennwerte: {}
      },

      // Nur für Tests mit Markdown Editor - disabled:
      /*
      markdownEditorOptions: { // Markdown Editor, siehe https://github.com/nhn/toast-ui.vue-editor
        minHeight: "600px",
        language: "de_DE",
        useCommandShortcut: true,
        useDefaultHTMLSanitizer: true,
        usageStatistics: false,
        hideModeSwitch: false,
        toolbarItems: [
          "heading",
          "bold",
          "italic",
          "strike",
          "divider",
          "hr",
          "quote",
          "divider",
          "ul",
          "ol",
          "task",
          "indent",
          "outdent",
          "divider",
          "table",
          "image",
          "link",
          "divider",
          "code",
          "codeblock"
        ]
      },
      */
      uploadDoneBaustoffBeschreibung: false, // NEU: Für Anzeige interner Link in Baustoffbeschreibung nach Upload
      uploadDoneBaueigenschaftsBeschreibung: false, // NEU: Für Anzeige interner Link in Baueigenschaftsbeschreibung nach Upload
      copyToClipboardDoneBaustoffBeschreibung: false, // NEU: Für Anzeige Hint unter Button für CopytoClipboard für internen Link in Baustoffbeschreibung
      copyToClipboardDoneBaueigenschaftsBeschreibung: false, // NEU: Für Anzeige Hint unter Button für CopytoClipboard für internen Link in Baueigenschaftsbeschreibung
      internerLinkAusUploadBaustoffBeschreibung: "", // NEU: Für Anzeige interner Link nach Uplooad Images für Baustoffbeschreibung
      internerLinkAusUploadBaueigenschaftsBeschreibung: "", // NEU: Für Anzeige interner Link nach Uplooad Images für Baueigenschaftsbeschreibung

      localStore: globalStore, // NEU: lokales reaktives Objekt für Pendant aus global Store, enthält localStore.state.debugMode u.v.m.

      // Folgende Variable dateTest ist ein Testfeld für native Date Handling mit type="date" - siehe dazu das Test-q-input-feld oben im Template für die ausgewählte Baueigenschaft
      // Quasar Native Date Handling ist hier dokumentiert: // https://quasar.dev/vue-components/input#Example--Input-types

      // 1. Test mit native JS Date als Input:
      // dateTest: new Date("1991-02-27"), // JS Date gemöß https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date - funktioniert NICHT, Vue Warning:
      // "The specified value value "Wed Feb 27 1991 01:00:00 GMT+0100 (Mitteleurop\u00E4ische Normalzeit)" does not conform to the required format, "yyyy-MM-dd".""

      // 2. Tests mit Strings als Input:
      // dateTest: "", // - FUNKTIONIERT, zeigt Browser Date Picker mit leerem Datum an!
      // dateTest: "27.02.1991", // - funktioniert NICHT, kein Browser Date Picker, da falsches Date Format für Date Picker!!!
      // dateTest: "1991-02-27", // - FUNKTIONIERT am Testfeld für type="date"!!!

      // 3. Tests mit Quasar Date Util zur Generierung des Inputs:
      // dateTest: date.formatDate("27.02.1991", "YYYY-MM-DD"), // - Nutzt Quasar Utils, funktioniert NICHT, vermutlich falsches Input-Format für Quasar Date Util formatDate!!!
      // dateTest: date.formatDate("27.02.1991", "DD.MM.YYYY"), // - Nutzt Quasar Date Utils, funktioniert NICHT, vermutlich falsches Input-Format für Quasar DAte Util formatDate,
      // und "DD.MM.YYYY ist FALSCHES Date Format für Browser Date Picker!!!
      // dateTest: date.formatDate("1991-02-27", "YYYY-MM-DD"), // - Nutzt Quasar Date Utils, FUNKTIONIERT - "YYYY-MM-DD" ist KORREKTES Date Format für Browser Date Picker!

      // Fazit: Man muss also das Mongoose Date im v-model in einen String im Format "YYYY-MM-DD" umwandeln, z.B. mit eigener formatDate Funktion hier, die die Quasar Date Utils verwendet!!!
      // Mit diesem Format funktioniert dann der Browser Date Picker (nur getestet mit Chrome)!
      // Dies so eingebaut in resetAusgewaehlteBaueigenschaft und andere Funktionen in Baustoffe.vue, inklusive Rückverwandlung in das von Mongoose erwartete
      // Format "YYYY-MM-DD" in updateAusgewaehlteBaueigenschaft
      // Damit funktionieren dann die q-input Felder DatumsWert1 und DatumwsWert 2 mit type="date", was den Browser Date Picker ansteuert
      // Alternativ könnte auch Quasar QDate als Date Picker verwendet werden - siehe dazu Testcode oben im Template
      //----------------------------------------------------------------------------------------------------------------------------

      // Diverse Daten für den q-tree für die Baustoffe und diverse andere Konstanten und Steuerungen für Dialoge:
      popupEditEnabled: false, // Für Test von Popup Editing in QTable
      alwaysOn: true, // Für Checkbox in statischem Textfeld zur Erklärung der Button-Aktionen auf der QTable
      alwaysOff: false, // Dito
      displayRightArrow: "\u2192", // Konstante für Rechtspfeil, in Moustaches {{displayRightArrow}} oben benutzt

      // v-models für Dialogsteuerungen:
      deleteBaustoffDialog: false, // NEU: Für Steuerung Dialog mit Warnung bei Löschen eines Baustoffs
      deleteSelectedBaustoffDialog: false, // Für Steuerung Dialog mit Warnung bei Löschen eines Baustoffs
      renameSelectedBaustoffDialog: false, // NEU: Für Steuerung Dialog für Umbenennung eines Baustoffs
      geaenderteBezeichnungBaustoff: null, // NEU: Für das Bezeichnungsfeld in diesem Dialog
      createNewBaustoffDialog: false, // Für Steuerung Dialog zur Neuanalage eines Baustoffs
      bezeichnungNeuerBaustoff: null, // Für das Bezeichnungsfeld in diesem Dialog
      deleteSelectedBaueigenschaftDialog: false, // Für Steuerung Dialog mit Warnung bei Löschen einer Baueigenschaft

      /* dateLocale: {
        // Locale für q-date
        // Nicht notwendig, wenn in quasar.conf.js lang: "de" als Quasar language gesetzt wird
        // Starting with Sunday
        days: 'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),
        daysShort: 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
        months: 'Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
        monthsShort: 'Jan_Feb_Mär_Apr_Mai_Jun_Jul_Aug_Sep_Okt_Nov_Dez'.split('_'),
        firstDayOfWeek: 1
      },
      */

      //----------------------------------------------------------------------------------------------------------------------------
      // Neue dedizierte v-models für die beiden q-tab-panels mit q-forms für Baueigenschaften
      // Erstes q-tab-panel hält die Übersicht der Baueigenschaften in q-table
      // Zweites q-tab-panel mit q-form für die im ersten q-tabl-panel ausgewählte Baueigenschaft:
      // Benutzt zunächst leeres Objekt, um die in der q-table ausgewählte Baueigenschaft anzuzeigen,
      // v-model für q-form im Tab "auswahlTabBaueigenschaften"
      // ACHTUNG: {} ist nicht dasselbe wie undefined, nur bei undefined wird per v-if das Tab ausgeblendet!!!
      ausgewaehlteBaueigenschaft: null,

      // Drittes q-tab-panel mit q-form für neue Baueigenschaft:
      neueBaueigenschaft: {
        typbezogeneBaueigenschaft: "Kennwert" // Erforderlich, sonst Fehler!!!
      }, // Objekt, um neue Eigenschaft anzulegen, v-model für q-form im Tab "Neu"
      // ACHTUNG: {} ist nicht dasselbe wie undefined, nur bei undefined wird per v-if das Tab ausgeblendet!!!

      leereBaueigenschaft: {
        // ACHTUNG: Vue kann nicht ohne Weiteres Konstanten in data() deklarieren! Müssten in externe Files ausgelagert oder lokal mit const deklariert werden
        // Siehe https://github.com/vuejs/vue/issues/6004
        // Objekt, mit dem neue Baueigenschaft initialisiert und resetted wird
        // ACHTUNG: Diese Werte müssen die Mongoose Validation bestehen bei Save in die Datenbank!
        // Zu beachtende Regeln für Mongoose Validation: required-Felder müssen vorhanden und gesetzt sein
        // null heisst ein Feld ist vorhanden, aber nicht gesetzt
        // enum-Felder dürfen nur null sein, wenn in enum-Definition null dabei ist!
        // Mongoose Validation Fehler kommen als Error 500 vom Mongoose Call (z.B. save()) zurück
        // Return Parameter error.message enthält dabei die Error Message, ggf. im Controller loggen!
        baueigenschaftsBezeichnung: "",
        // obligatorischNichtOptional: false, // ACHTUNG: Es mus false (Boolean) heißen, nicht "false" (String)!!! NEU: Obligatorisch wird nicht mehr unterstützt
        aktivierbar: false,
        aktiviertNichtDeaktiviert: false,

        baueigenschaftsBemerkung: null,
        bauinformation: null, // TODO

        werteTyp: "Kennwert",
        kennWert1: null,
        kennWert2: null,
        //-------------------------------------------------------------------------------------------------------------------------------------------------------
        // ALT: Initialisierung der folgenden 4 typbezogenen Felder (für Wertetyp "kennWert" bzw. "kennWertePaar" mit null - disabled:
        /*
        symbol: null,
        einheit: null,
        operator: null,
        formel: null, // NEU
        */
        //-------------------------------------------------------------------------------------------------------------------------------------------------------
        // NEU: Diese 4 typbezogenen Felder (für Wertetyp "kennWert" bzw. "kennWertePaar" enthalten Markdown - wenn sie mit null initialisiert werden,
        // wirft Vue bzw. q-markdown Fehler im Tab "Übersicht" - daher mit leerem String "" initialisiert, wie auch schon in baueigenschaften.model im Backend!
        symbol: "",
        einheit: "",
        operator: "",
        formel: "", // NEU
        //--------------------------------------------------------------------------------------------------------------------------------------------------------
        datumsWert1: null,
        datumsWert2: null,
        tagesZeitWert1: null, // NEU
        tagesZeitWert2: null, // NEU
        bezeichnungsWert1: null,
        bezeichnungsWert2: null,
        aufzaehlungsWert: [], // ACHTUNG: Muss hier ein (leerer) Array sein für Aufnahme der im Tab "Neu" angelegten QSelect Options!!!
        // TODO: Eventuell anders im Tab "Auswahl", wo dieses Feld den tatsächlich ausgewählte Option aufnehmen muss und dann ein Objekt oder String sein kann
        wahrheitsWert: false,
        typbezogeneBaueigenschaft: {
          werteTyp: "Kennwert",
          //========================================= TODO XXXXXX #401 ========================================
          // Im Rahmen von #401 gefunden:
          // Fehlen hier nicht typbezogene Felder, z.B. selektierbareOptionenAufzaehlungswert?
          // Die fachlichen Kategorien/Rubriken alle hier in typbezogeneBaueigenschaft rein verschoben - diese waren vorher auf der Ebene darüber!
          // #401 - alte Schutzkategorien (ersetzt durch neue fachliche Kategorien/Rubriken), disabled:
          /*
          schallSchutz: false,
          wärmeSchutz: false,
          brandSchutz: false,
          raumAkustik: false,
          feuchteSchutz: false,
          chemischerHolzSchutz: false,
          abdichtungsTechnik: false,
          korrosionsSchutz: false,
          schadstoffSchutz: false,
          ökoBilanz: false,
          nachhaltigkeit: false,
          // NEU - zusätzliche Kategorien:
          energieEinsparung: false,
          gebrauchsTauglichkeit: false,
          standSicherheit: false,
          verkehrsSicherheit: false,
          barriereFreiheit: false,
          gesundheitUndHygiene: false,
          umweltVerträglichkeit: false,
          sonstiges: false,
          // NEU: #514/515
          recht: false,
          geografie: false,
          infrastruktur: false,
          geoPolitik: false,
          projektManagement: false,
          umweltUndKlima: false,
          hydroGeologie: false,
          geometrie: false,
          konstruktion: false,
          nutzungsUndBetriebsZeiten: false,
          beleuchtung: false,
          raumKlima: false,
          lastAnnahmen: false,
          materialEigenschaften: false,
          baueigenschaftsProfile: false,
          bauinformationsProfile: false,
          */
          // NEU - #401
          fachlicheKategorien: []
        },
        ererbtNichtGesetzt: false,
        systemdefiniertNichtBenutzerdefiniert: false /* Geändert MS */,
        systemberechnetNichtSystemgesetzt: false,

        definiertNichtUndefiniert: false,
        vererbtAnKindknoten: false,
        sollwertNichtIstwert: false,
        güteBewertung: "gelb"
      },

      //----------------------------------------------------------------------------------------------------------------------------
      // Daten für den q-splitter und die q-tab-panels für Baustoffe und deren Baueigenschaften:
      //----------------------------------------------------------------------------------------------------------------------------
      splitterModel: this.$q.screen.gt.sm ? 18 : 36, // TODO: Wert justieren, um Scrollbalken unten zu vermeiden!!!
      // NEU - Tab "Fachliche Daten" anzeigen:
      tabBaustoffe: "baueigenschaftsProfilFormulareTabBaustoffe", // Initialisieren statt null, damit kein leeres Tab angezeigt wird
      // ALT - Tab "Baueigenschaften" anzeigen:
      // tabBaustoffe: "baueigenschaftenTabBaustoffe", // Initialisieren statt null, damit kein leeres Tab angezeigt wird
      tabBaueigenschaften: "uebersichtTabBaueigenschaften", // Initialisieren statt null, damit kein leeres Tab angezeigt wird
      tabFachlicheDatenBaustoffe: "tabGenerelleFachlicheDatenBaustoffe", // NEU: Unter-Tab von "Fachliche Daten", zweite graue Tab-Zeile
      unterTabFachlicheDatenBaustoffe:
        "unterTabGenerelleAngabenFachlicheDatenBaustoffe", // NEU: Unter-Unter-Tab, dritte graue Tab-Zeile
      //----------------------------------------------------------------------------------------------------------------------------
      // Daten für den q-tree für Baustoffe:
      //----------------------------------------------------------------------------------------------------------------------------
      nodesTreeBaustoffe: [], // :nodes v-model für den QTree für Baustoffe
      selectedKeyTreeBaustoffe: null, // Key, d.h. _id des ausgewählten Knotens im QTree für Baustoffe
      expandedKeysTreeBaustoffe: [],
      // HINWEIS: Im QTree für Baustoffe ist bisher kein tickedKeysTreeBaustoffe: [], deklariert, da Ticking dort aktuell nicht verwendet wird!
      filterTreeBaustoffe: "", // NEU: Filter

      //----------------------------------------------------------------------------------------------------------------------------
      // Daten für die q-forms für Baueigenschaften:
      //----------------------------------------------------------------------------------------------------------------------------
      optionsAufzählungsWert: [
        // Options für dynamisches q-select für Wertetyp "Aufzählungswert"
        // TODO: Noch zu implementieren
      ],
      optionsGueteBewertung: ["grün", "gelb", "rot", null],

      //----------------------------------------------------------------------------------------------------------------------------
      // NEU: Daten für den q-tree für Auswahl zugeordneter Rohstoffe im Tab "Zugeordnete Rohstoffe" für Baustoffe:
      //----------------------------------------------------------------------------------------------------------------------------
      nodesTreeRohstoffe: [], // :nodes v-model für den QTree für Rohstoffe
      selectedKeyTreeRohstoffe: null, // Key, d.h. _id des ausgewählten Knotens im QTree für Rohstoffe
      expandedKeysTreeRohstoffe: [], // HINWEIS: Nicht in data() deklariert im QTree für Baustoffe, nur :expanded.sync="expandedKeysTreeRohstoffe" !
      tickedKeysTreeRohstoffe: [], // HINWEIS: Nicht in data() deklariert im QTree für Baustoffe, nur :ticked.sync="tickedKeysTreeRohstoffe" !
      filterTreeRohstoffe: "", // Filter
      // NEU: Für #107 disabled
      // Variablen zum Zwischenspeichern der alten Werte werden nicht mehr benötigt, weil Popup-Edit-interne Logik das Zurücksetzen intern regelt
      // (Werte werden beim @cancel-Event am linken Button des QPopupEdit automatisch auf tempValuesPopupEditTreeRohstoffe, das v-model in diesem Fall, zurückgesetzt)
      /*
      oldValueAnteilVonRohstoffInBaustoff: null, // Variable zum Merken der alten Werte der 3 erweiterten Felder im Rohstoffbaum, wird von q-popup-edit verwendet
      oldValueSymbolVonRohstoffInBaustoff: null, // Variable zum Merken der alten Werte der 3 erweiterten Felder im Rohstoffbaum, wird von q-popup-edit verwendet
      oldValueEinheitlVonRohstoffInBaustoff: null, // Variable zum Merken der alten Werte der 3 erweiterten Felder im Rohstoffbaum, wird von q-popup-edit verwendet
      */
      // NEU: #107
      // Variante mit temp-Variablen statt direkter Operation der q-inputs im q-popup-edit auf prop.node von treeRohstoffe
      // Grund: Symmetrie zu baueinheiten.vue
      tempValuesPopupEditTreeRohstoffe: {
        anteilVonRohstoffInBaustoff: null, // Variable zum Merken der Werte der 3 erweiterten Felder im Baustoffbaum, wird von q-popup-edit verwendet
        symbolVonRohstoffInBaustoff: null, // Variable zum Merken der Werte der 3 erweiterten Felder im Baustoffbaum, wird von q-popup-edit verwendet
        einheitVonRohstoffInBaustoff: null // Variable zum Merken der Werte der 3 erweiterten Felder im Baustoffbaum, wird von q-popup-edit verwendet
      },
      //----------------------------------------------------------------------------------------------------------------------------
      // NEU: Daten für die q-hierarchy für zugeordneteRohstoffe - nur testweise benutzt - disabled:
      //----------------------------------------------------------------------------------------------------------------------------
      // dataHierarchyRohstoffe: [],
      /*
      columnsHierarchyRohstoffe: [
        {
          name: "baustoffBezeichnung",
          label: "Rohstoffbezeichnung",
          field: "baustoffBezeichnung",
          align: "left",
          sortable: true,
          filterable: true,
        },
        {
          name: "baumKnotenTyp",
          label: "Baumknotentyp",
          field: "baumKnotenTyp",
          align: "right",
          sortable: true,
          filterable: true
        }
      ],
      */

      //----------------------------------------------------------------------------------------------------------------------------
      // Daten für die q-table für Baueigenschaften:
      //----------------------------------------------------------------------------------------------------------------------------
      dataTableBaueigenschaften: [], // ACHTUNG/TODO: dataTableBaueigenschaften wird aktuell nicht als v-model der q-table für die
      // Baueigenschaften verwendet - stattdessen ist das v-model aktuell selectedNodeTreeBaustoffe.baueigenschaften!!!

      // ACHTUNG: Für separate Panels zur Bearbeitung/Neuanlage von Eigenschaften sollte man auf einem separaten
      // v-model arbeiten, sonst kommt Vue/Quasar leicht durcheinander!!!
      // Dafür gibt es schon eine computed: Funktion ausgewaehlteBaueigenschaft

      selectedRowsTableBaueigenschaften: [], // Selected Rows in der q-table für die Baueigenschaften

      selectionModeTableBaueigenschaften: "single", // "single" oder "multiple"
      // NEU: Musste als reactive Property :selection="selectionModeTableBaueigenschaften" definiert werden
      // statt simpler selection="single" Property an q-table, damit sie z.B. mittels
      // selectionModeTableBauEigenschften="single" referenziert
      // werden kann von q-checkbox für (De-)Select All in der ersten Spalte, zweite Header-Zeile

      paginationTableBaueigenschaften: {
        sortBy: "baueigenschaftsBezeichnung", // HINWEIS: Hier stand ursprünglich nur "Name"!!!
        // Es sollte aber laut q-table API Doc ein Column name (from colummn definition)" sein!!!
        descending: false,
        page: 1,
        rowsPerPage:
          globalStore.state.einstellungenBenutzer.tablesPaginationRowsPerPage // NEU - einstellbarer Wert
        // rowsPerPage: 25, // ALT
        // rowsNumber: xx if getting data from a server
        // rowsNumber ist laut https://quasar.dev/vue-components/table#Pagination nur relevant bei Server Side Pagination!!!
        // Dann müsste rowsNumber mit dem aktuellen Wert der Zeilen in der q-table für die Baueigenschaften initialisiert und ggf. updated werden,
        // z.B. in computed: selectedNodeTreeBaustoffe (wird aufgerufen, wenn sich der selected Node im Baustoffbaum ändert)
        // unter Verwendung von selectedNodeTreeBaustoffe.baueigenschaften.length, wenn dieses initialisiert und geändert wird
      },

      columnsTableBaueigenschaften: [
        // Spalten für QTable - die Reihenfolge hier bestimmt die Reihenfolge am UI,
        // unabhängig davon, welche Spalten per visibleColumnsTableBaueigenschaften sichtbar sind
        {
          // Baueigenschaftsbezeichnung: Immer sichtbar!
          name: "baueigenschaftsBezeichnung",
          label: "Bezeichnung der Baueigenschaft",
          // field: row => row.name, // ACHTUNG: Geändert für neue Version mit v-slot für Header (q-th)
          field: row =>
            // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
            // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
            row.typbezogeneBaueigenschaft.baueigenschaftsBezeichnung,
          // format: val => `${val}`,
          align: "left",
          sortable: true
        },
        // Aktivierungsmerkmale:
        // NEU: Obligatorisch wird nicht mehr unterstützt
        /*
        {
          name: "obligatorischNichtOptional",
          label: "Obligatorisch",
          field: "obligatorischNichtOoptional",
          align: "center",
          sortable: true
        },
        */
        // NEU: Aktivierbar wird nicht mehr angezeigt
        // Da Aktivierung jetzt stets im gesamten Pfad erfolgt, wird "aktivierbar", welches anzeigte, ob eine Baueigenschaft lokal aktivierbar war,
        // nicht mehr notwendig
        /*
        {
          name: "aktivierbar",
          label: "Aktivierbar",
          field: "aktivierbar",
          align: "center",
          sortable: true
        },
        */
        {
          name: "aktiviertNichtDeaktiviert",
          label: "Aktiviert an Baustoff?",
          field: "aktiviertNichtDeaktiviert",
          align: "center",
          sortable: true
        },
        // Kennwertbezogene Angaben
        // ALT: Direkt hinter den Kennwerten eingeblendet, um häufiges nach rechts scrollen zu verhindern!
        // In Konflikt mit dem neuen multiplen Header aus zwei Zeilen mit "Oberspalten" und "Unterspalten"
        // NEU: Kennwertbezogene Angaben vor die wertbezogenen Angaben verschoben
        {
          name: "symbol",
          label: "Symbol",
          field: row => row.typbezogeneBaueigenschaft.symbol,
          sortable: true
        },
        {
          name: "einheit",
          label: "Einheit",
          field: row => row.typbezogeneBaueigenschaft.einheit,
          align: "right",
          sortable: true
        },
        {
          name: "operator",
          label: "Operator",
          field: row => row.typbezogeneBaueigenschaft.operator,
          sortable: true
        },
        {
          // NEU:
          name: "formel",
          label: "Formel",
          field: row => row.typbezogeneBaueigenschaft.formel,
          sortable: true
        },
        {
          name: "werteTyp",
          label: "Wertetyp", // NEU
          field: row => row.typbezogeneBaueigenschaft.werteTyp,
          align: "left",
          sortable: true
        },
        // Wertbezogene Angaben:
        {
          name: "kennWert1",
          label: "Kennwert 1",
          field: "kennWert1",
          sortable: true
        },
        {
          name: "kennWert2",
          label: "Kennwert 2",
          field: "kennWert2",
          sortable: true
        },
        {
          name: "datumsWert1",
          label: "Datum 1",
          field: "datumsWert1",
          sortable: true,
          format: val => this.formatDate(val)
        },
        {
          name: "datumsWert2",
          label: "Datum 2",
          field: "datumsWert2",
          sortable: true,
          format: val => this.formatDate(val)
        },
        {
          name: "tagesZeitWert1", // NEU
          label: "Tageszeit 1",
          field: "tagesZeitWert1",
          sortable: true,
          format: val => this.formatTime(val)
        },
        {
          name: "tagesZeitWert2", // NEU
          label: "Tageszeit 2",
          field: "tagesZeitWert2",
          sortable: true,
          format: val => this.formatTime(val)
        },
        {
          name: "bezeichnungsWert1",
          label: "Bezeichnung 1",
          field: "bezeichnungsWert1",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Bezeichnungne hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "bezeichnungsWert2",
          label: "Bezeichnung 2",
          field: "bezeichnungsWert2",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Bezeichnungne hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "wahrheitsWert",
          label: "Wahrheitswert",
          field: "wahrheitsWert",
          align: "center",
          sortable: true
        },
        {
          name: "aufzaehlungsWert",
          label: "Aufzählungswert",
          field: "aufzaehlungsWert",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Aufzählungswerte hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        // Wertbezogene Merkmale:
        {
          name: "definiertNichtUndefiniert",
          label: "Definierte Werte?",
          field: "definiertNichtUndefiniert",
          align: "center",
          sortable: true
        },
        {
          name: "ererbtNichtGesetzt",
          label: "Werte ererbt von Elternbaustoff?",
          field: "ererbtNichtGesetzt",
          align: "center",
          sortable: true
        },
        // NEU - #514 - das nächste Merkmal ist nicht mehr wertbezogen, sondern typbezogen, daher hier disabled!
        /*
        {
          name: "systemdefiniertNichtBenutzerdefiniert",
          label: "Systemdefiniert",
          field: "systemdefiniertNichtBenutzerdefiniert",
          align: "center",
          sortable: true
        },
        */
        {
          name: "systemberechnetNichtSystemgesetzt",
          label: "Werte systemberechnet?",
          field: "systemberechnetNichtSystemgesetzt",
          align: "center",
          sortable: true
        },
        {
          // NEU - fehlte (Fehler)
          name: "vererbtAnKindknoten",
          label: "Werte weitervererbt an Kindbaustoffe??",
          field: "vererbtAnKindknoten",
          align: "center",
          sortable: true
        },
        // NEU - #514 - das nächste Merkmal ist nicht mehr wertbezogen, sondern typbezogen, daher hier disabled!
        /*
        {
          name: "sollwertNichtIstwert",
          label: "Sollwert",
          field: "sollwertNichtIstwert",
          align: "center",
          sortable: true
        },
        */
        {
          name: "güteBewertung",
          label: "Gütebewertung",
          field: "güteBewertung",
          align: "center",
          sortable: true
          // TODO: Gütebewertung wird aktuell nicht korrekt angezeigt!!! (Bug)
        },
        // Typbezogene Angaben:
        {
          name: "baueigenschaftsAnzeigeText", // NEU: #514:
          label: "Anzeigetext zur Baueigenschaft",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.baueigenschaftsAnzeigeText,
          align: "left",
          sortable: true
        },
        {
          name: "baueigenschaftsBemerkung",
          label: "Bemerkung zur Baueigenschaft",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.baueigenschaftsBemerkung,
          align: "left",
          sortable: true,
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Bemerkungen hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "systemdefiniertNichtBenutzerdefiniert", // NEU: #514:
          label: "Ist systemdefiniert?",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.systemdefiniertNichtBenutzerdefiniert,
          align: "center",
          sortable: true,
          type: "toggle" // Triggert Anzeige von Checkbox statt "true"/"False"
        },
        {
          name: "sollwertNichtIstwert", // NEU: #514:
          label: "Repräsentiert Sollwerte?",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.sollwertNichtIstwert,
          align: "center",
          sortable: true,
          type: "toggle" // Triggert Anzeige von Checkbox statt "true"/"False"
        },
        {
          name: "bauinformationsAnzeigeText", // NEU: Hier bauinformationsAnzeigeText statt bauinformationsBezeichnung anzeigen -->
          label: "Zugehörige Bauinformation", // NEU
          // ACHTUNG: "field" wuude früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.bauinformation !== undefined && // NEU: Zusätzlich eingefügt, sonst undefined Fehler beim Rendern der QTable!!!
            row.typbezogeneBaueigenschaft.bauinformation !== null
              ? row.typbezogeneBaueigenschaft.bauinformation
                  .bauinformationsAnzeigeText
              : null,
          // field: row => row.bauinformation.bauinformationsAnzeigeText, // Auskommentiert wegen flacher Objekte seit 12.12.19
          // ACHTUNG: Nested Property, funktionierte in q-table mit v-slots für Body nur mit speziellem Code unten!!
          // ACHTUNG: Das Feld musste zusätzlich in den Array textFields aufgenommen werden, um per v-slot angezeigt zu werden
          align: "left",
          sortable: true
        },
        {
          name: "bauinformationsTyp",
          label: "Bauinformationstyp",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.bauinformation !== undefined && // NEU: Zusätzlich eingefügt, sonst undefined Fehler beim Rendern der QTable!!!
            row.typbezogeneBaueigenschaft.bauinformation !== null
              ? row.typbezogeneBaueigenschaft.bauinformation.bauinformationsTyp
              : null,
          // field: row => row.bauinformation.bauinformationsTyp,
          // ACHTUNG: Nested Property, funktioniert in q-table mit v-slots für Body nur mit speziellem Code unten!!
          // ACHTUNG: Das Feld musste zusätzlich in den Array textFields aufgenommen werden, um per v-slot angezeigt zu werden
          align: "left",
          sortable: true
        },
        //--------------------------------------------------------------------------------------------------------------------------------------------------------------------
        // Schutzkategorien/fachliche Rubriken:
        // NEU - #401: Neue fachliche Kategorien/Rubriken, wie in options-fachliche-kategorien-baueigenschaften.js definiert
        {
          name: "strukturAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Struktur > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "strukturEinordnung", // NEU: #514/515
          align: "center",
          label: "Einordnung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Struktur > Einordnung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "strukturZusammensetzung", // NEU: #514/515
          align: "center",
          label: "Zusammensetzung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Struktur > Zusammensetzung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "strukturProfilzuordnung", // NEU: #514/515
          align: "center",
          label: "Profilzuordnung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Struktur > Profilzuordnung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wirtschaftAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Wirtschaft > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wirtschaftHandel", // NEU: #514/515
          align: "center",
          label: "Handel", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Wirtschaft > Handel"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wirtschaftProjektsteuerung", // NEU: #514/515
          align: "center",
          label: "Projektsteuerung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Wirtschaft > Projektsteuerung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wirtschaftRecht", // NEU: #514/515
          align: "center",
          label: "Recht", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Wirtschaft > Recht"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wirtschaftKosten", // NEU: #514/515
          align: "center",
          label: "Kosten", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Wirtschaft > Kosten"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umgebungAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Umgebung > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umgebungGeografie", // NEU: #514/515
          align: "center",
          label: "Geografie", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Umgebung > Geografie"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umgebungGeopolitik", // NEU: #514/515
          align: "center",
          label: "Geopolitik", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Umgebung > Geopolitik"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umgebungInfrastruktur", // NEU: #514/515
          align: "center",
          label: "Infrastruktur", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Umgebung > Infrastruktur"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umgebungUmwelt", // NEU: #514/515
          align: "center",
          label: "Umwelt", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Umgebung > Umwelt"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umgebungKlima", // NEU: #514/515
          align: "center",
          label: "Klima", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Umgebung > Klima"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umgebungHydrogeologie", // NEU: #514/515
          align: "center",
          label: "Hydrogeologie", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Umgebung > Hydrogeologie"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikWasserUndAbwasser", // NEU: #514/515
          align: "center",
          label: "Wasser und Abwasser", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Wasser und Abwasser"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikHeizung", // NEU: #514/515
          align: "center",
          label: "Heizung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Heizung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikKühlung", // NEU: #514/515
          align: "center",
          label: "Kühlung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Kühlung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikLüftung", // NEU: #514/515
          align: "center",
          label: "Lüftung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Lüftung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikElektrik", // NEU: #514/515
          align: "center",
          label: "Elektrik", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Elektrik"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikKommunikation", // NEU: #514/515
          align: "center",
          label: "Kommunikation", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Kommunikation"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikBeförderung", // NEU: #514/515
          align: "center",
          label: "Beförderung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Beförderung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikTechnikFürSpezifischeNutzungen", // NEU: #514/515
          align: "center",
          label: "Technik für spezifische Nutzungen", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Technik für spezifischeNutzungen"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikAutomation", // NEU: #514/515
          align: "center",
          label: "Automation", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Automation"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikNutzungsUndBetriebszeiten", // NEU: #514/515
          align: "center",
          label: "Nutzungs- und Betriebszeiten", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Nutzungs- und Betriebszeiten"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikRaumklima", // NEU: #514/515
          align: "center",
          label: "Raumklima", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Raumklima"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikBeleuchtung", // NEU: #514/515
          align: "center",
          label: "Beleuchtung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Beleuchtung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikBeschattung", // NEU: #514/515
          align: "center",
          label: "Beschattung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Beschattung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikBelichtung", // NEU: #514/515
          align: "center",
          label: "Belichtung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Belichtung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "geometrieAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Geometrie > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "geometrieMaße", // NEU: #514/515
          align: "center",
          label: "Maße", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Geometrie > Maße"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "geometrieMengen", // NEU: #514/515
          align: "center",
          label: "Mengen", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Geometrie > Mengen"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "statikAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Statik > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "statikLasten", // NEU: #514/515
          align: "center",
          label: "Lasten", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Statik > Lasten"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "statikStandsicherheit", // NEU: #514/515
          align: "center",
          label: "Standsicherheit", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Statik > Standsicherheit"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "statikFestigkeit", // NEU: #514/515
          align: "center",
          label: "Festigkeit", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Statik > Festigkeit"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        //-
        {
          name: "konstruktionAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Konstruktion > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautenschutzAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautenschutz > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautenschutzAbdichtungstechnik", // NEU: #514/515
          align: "center",
          label: "Abdichtungstechnik", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautenschutz > Abdichtungstechnik"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautenschutzKorrosionsschutz", // NEU: #514/515
          align: "center",
          label: "Korrosionsschutz", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautenschutz > Korrosionsschutz"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautenschutzHolzschutz", // NEU: #514/515
          align: "center",
          label: "Holzschutz", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautenschutz > Holzschutz"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
         {
          name: "feuchteschutzAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Feuchteschutz > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wärmeschutzAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Wärmeschutz > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wärmeschutzEnergiebedarf", // NEU: #514/515
          align: "center",
          label: "Energiebedarf", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Wärmeschutz > Energiebedarf"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "akustikAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Akustik > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "akustikSchallschutz", // NEU: #514/515
          align: "center",
          label: "Schallschutz", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Akustik > Schallschutz"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "akustikRaumakustik", // NEU: #514/515
          align: "center",
          label: "Raumakustik", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Akustik > Raumakustik"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
         {
          name: "schwingungsUndErschütterungsschutzAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Schwingungs- und Erschütterungsschutz > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "schwingungsUndErschütterungsschutzSchwingungen", // NEU: #514/515
          align: "center",
          label: "Schwingungen", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Schwingungs- und Erschütterungsschutz > Schwingungen"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
         {
          name: "schwingungsUndErschütterungsschutzErschütterungen", // NEU: #514/515
          align: "center",
          label: "Erschütterungen", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Schwingungs- und Erschütterungsschutz > Erschütterungen"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "brandschutzAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Brandschutz > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        // ALT - entfernt:
        /*
        {
          name: "brandschutzBlitzschutz", // NEU: #514/515
          align: "center",
          label: "Blitzschutz", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Brandschutz > Blitzschutz"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        */
        {
          name: "sicherheitAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Sicherheit > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "sicherheitVerkehrssicherheit", // NEU: #514/515
          align: "center",
          label: "Verkehrssicherheit", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Sicherheit > Verkehrssicherheit"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "sicherheitBarrierefreiheit", // NEU: #514/515
          align: "center",
          label: "Barrierefreiheit", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Sicherheit > Barrierefreiheit"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "sicherheitElektrischeSicherheit", // NEU: #514/515
          align: "center",
          label: "Elektrische Sicherheit", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Sicherheit > Elektrische Sicherheit"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebrauchstauglichkeitAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebrauchstauglichkeit > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebrauchstauglichkeitBehaglichkeit", // NEU: #514/515
          align: "center",
          label: "Behaglichkeit", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebrauchstauglichkeit > Behaglichkeit"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gesundheitAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gesundheit > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gesundheitSchadstoffschutz", // NEU: #514/515
          align: "center",
          label: "Schadstoffschutz", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gesundheit > Schadstoffschutz"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gesundheitRadonschutz", // NEU: #514/515
          align: "center",
          label: "Radonschutz", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gesundheit > Radonschutz"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "ressourcenAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Ressourcen > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "ressourcenUmweltverträglichkeit", // NEU: #514/515
          align: "center",
          label: "Umweltverträglichkeit", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Ressourcen > Umweltverträglichkeit"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "ressourcenÖkobilanz", // NEU: #514/515
          align: "center",
          label: "Ökobilanz", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Ressourcen > Ökobilanz"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "ressourcenLebenszyklus", // NEU: #514/515
          align: "center",
          label: "Lebenszyklus", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Ressourcen > Lebenszyklus"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautechnikAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautechnik > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautechnikBauablauf", // NEU: #514/515
          align: "center",
          label: "Bauablauf", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautechnik > Bauablauf"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautechnikZeitbedarf", // NEU: #514/515
          align: "center",
          label: "Zeitbedarf", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautechnik > Zeitbedarf"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautechnikWinterbau", // NEU: #514/515
          align: "center",
          label: "Winterbau", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautechnik > Winterbau"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungHerkunft", // NEU: #514/515
          align: "center",
          label: "Herkunft", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Herkunft"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungQualität", // NEU: #514/515
          align: "center",
          label: "Qualität", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Qualität"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungHerstellung", // NEU: #514/515
          align: "center",
          label: "Herstellung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Herstellung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungVerpackung", // NEU: #514/515
          align: "center",
          label: "Verpackung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Verpackung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungLieferung", // NEU: #514/515
          align: "center",
          label: "Lieferung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Lieferung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungLagerung", // NEU: #514/515
          align: "center",
          label: "Lagerung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Lagerung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungVerarbeitung", // NEU: #514/515
          align: "center",
          label: "Verarbeitung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Verarbeitung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungAnwendung", // NEU: #514/515
          align: "center",
          label: "Anwendung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Anwendung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungMontage", // NEU: #514/515
          align: "center",
          label: "Montage", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Montage"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungVerbrauch", // NEU: #514/515
          align: "center",
          label: "Verbrauch", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Verbrauch"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungNachbehandlung", // NEU: #514/515
          align: "center",
          label: "Nachbehandlung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Nachbehandlung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungBetrieb", // NEU: #514/515
          align: "center",
          label: "Betrieb", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Betrieb"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungBenutzung", // NEU: #514/515
          align: "center",
          label: "Benutzung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Benutzung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungReinigung", // NEU: #514/515
          align: "center",
          label: "Reinigung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Reinigung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungPflege", // NEU: #514/515
          align: "center",
          label: "Pflege", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Pflege"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungWartung", // NEU: #514/515
          align: "center",
          label: "Wartung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Wartung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungDemontage", // NEU: #514/515
          align: "center",
          label: "Demontage", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Demontage"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungWiederverwertung", // NEU: #514/515
          align: "center",
          label: "Wiederverwertung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Recyclilng"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungEntsorgung", // NEU: #514/515
          align: "center",
          label: "Entsorgung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Entsorgung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "sonstigesAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Sonstiges > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "sonstigesTest", // NEU: #514/515
          align: "center",
          label: "Test", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Sonstiges > Test"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        }
        // ----------------------------------------------------------------------------------------------------------------------------------
        // ALT: Struktur vor #401 (alte fachliche Rubriken)
        /*
        {
          name: "projektManagement", // NEU: #514/515
          align: "center",
          label: "Projektmanagement",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.projektManagement,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "recht", // NEU: #514/515
          align: "center",
          label: "Recht",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.recht,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "geografie", // NEU: #514/515
          align: "center",
          label: "Geografie",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.geografie,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "geoPolitik", // NEU: #514/515
          align: "center",
          label: "Geopolitik",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.geoPolitik,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "infrastruktur", // NEU: #514/515
          align: "center",
          label: "Infrastruktur",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.infrastruktur,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umweltUndKlima", // NEU: #514/515
          align: "center",
          label: "Umwelt und Klima",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.umweltUndKlima,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "hydroGeologie", // NEU: #514/515
          align: "center",
          label: "Hydrogeologie",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.hydroGeologie,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "geometrie", // NEU: #514/515
          align: "center",
          label: "Geometrie",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.geometrie,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "konstruktion", // NEU: #514/515
          align: "center",
          label: "Konstruktion",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.konstruktion,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "lastAnnahmen", // NEU: #514/515
          align: "center",
          label: "Lastannahmen",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.lastAnnahmen,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "nutzungsUndBetriebsZeiten", // NEU: #514/515
          align: "center",
          label: "Nutzungs- und Betriebszeiten",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.nutzungsUndBetriebsZeiten,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "raumKlima", // NEU: #514/515
          align: "center",
          label: "Raumklima",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.raumKlima,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "beleuchtung", // NEU: #514/515
          align: "center",
          label: "Beleuchtung",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.beleuchtung,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "schallSchutz",
          align: "center",
          label: "Schallschutz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.schallSchutz,
          // format: val => this.displayCheckMark(val),
          // Erste simple Lösung mit Unicode Checkmarks statt q-checkbox, wieder entfernt
          sortable: true,
          type: "toggle"
        },
        {
          name: "raumAkustik",
          align: "center",
          label: "Raumakustik",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.raumAkustik,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wärmeSchutz",
          align: "center",
          label: "Wärmeschutz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.wärmeSchutz,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle" // Selbsterstelltes Feld um die Anzeige in der qTable zu steuern
        },
        {
          name: "energieEinsparung",
          align: "center",
          label: "Energieeinsparung",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.energieEinsparung,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle" // Selbsterstelltes Feld um die Anzeige in der qTable zu steuern
        },
        {
          name: "standSicherheit",
          align: "center",
          label: "Standsicherheit",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.standSicherheit,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verkehrsSicherheit",
          align: "center",
          label: "Verkehrssicherheit",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.verkehrsSicherheit,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebrauchsTauglichkeit",
          align: "center",
          label: "Gebrauchstauglichkeit",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.gebrauchsTauglichkeit,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "barriereFreiheit",
          align: "center",
          label: "Barrierefreiheit",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.barriereFreiheit,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "brandSchutz",
          align: "center",
          label: "Brandschutz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.brandSchutz,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "feuchteSchutz",
          align: "center",
          label: "Feuchteschutz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.feuchteSchutz,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "abdichtungsTechnik",
          align: "center",
          label: "Abdichtungstechnik",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.abdichtungsTechnik,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "korrosionsSchutz",
          align: "center",
          label: "Korrosionsschutz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.korrosionsSchutz,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "chemischerHolzSchutz",
          align: "center",
          label: "Holzschutz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.chemischerHolzSchutz,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gesundheitUndHygiene",
          align: "center",
          label: "Gesundheit und Hygiene",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.gesundheitUndHygiene,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "schadstoffSchutz",
          align: "center",
          label: "Schadstoffschutz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.schadstoffSchutz,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umweltVerträglichkeit",
          align: "center",
          label: "Umweltverträglichkeit",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.umweltVerträglichkeit,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "ökoBilanz",
          align: "center",
          label: "Ökobilanz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.ökoBilanz,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "nachhaltigkeit",
          align: "center",
          label: "Nachhaltigkeit",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.nachhaltigkeit,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "materialEigenschaften", // NEU: #514/515
          align: "center",
          label: "Materialeigenschaften",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.materialEigenschaften,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "sonstiges",
          align: "center",
          label: "Sonstiges",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.sonstiges,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "baueigenschaftsProfile", // NEU: #514/515
          align: "center",
          label: "Baueigenschaftsprofile",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.baueigenschaftsProfile,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bauinformationsProfile", // NEU: #514/515
          align: "center",
          label: "Bauinformationsprofile",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.bauinformationsProfile,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        }
        */
      ],

      filterTableBaueigenschaften: null, // Filter für die Tabelle der Baueigenschaften

      optionsWertetypBaueigenschaft: [
        // Mögliche Optionen für den Wertetyp einer Baueigenschaft (für Dropdown-Menü)
        "Kennwert",
        "Kennwertepaar",
        "Datumswert",
        "Datumswertepaar",
        "Tageszeitwert", // NEU
        "Tageszeitwertepaar", // NEU
        "Bezeichnungswert",
        "Bezeichnungswertepaar",
        "Wahrheitswert",
        "Aufzählungswert"
      ],

      titleTableBaueigenschaften: "Eigenschaften von ",

      testModelAufzaehlungswert: ["CCC", "BBB-", "AA", "AAA", "AAA+"], // TODO: Selektierte Options für Aufzählungswert aus der Datenbank laden und per q-select anzeigen

      testOptionsAufzaehlungswert: [
        "D",
        "RD",
        "C",
        "CC",
        "CCC",
        "B-",
        "B",
        "B+",
        "BB-",
        "BB",
        "BB+",
        "BBB-",
        "BBB",
        "BBB+",
        "A-",
        "A",
        "A+",
        "AA-",
        "AA",
        "AA+",
        "AAA"
      ], // DONE: Selektierte Options für Aufzählungswert aus der Datenbank holen und per q-select anzeigen

      // Arrays, welche die Anzeige von Spalten in der QTable abhängig vom Typ steuern:
      // TODO: Sonderbehandlung von selectFields??? (aufzaehlungsWert, bauinformation)
      numericFields: ["kennWert1", "kennWert2"],

      textFields: [
        "baueigenschaftsBezeichnung",
        "symbol",
        "einheit",
        "baueigenschaftsBemerkung",
        // "bauinformationsBezeichnung", // ALT - nested Property
        "bauinformationsAnzeigeText", // NEU - statt bauinformationsBezeichnung
        "bauinformationsTyp", // NEU - nested Property
        "bezeichnungsWert1",
        "bezeichnungsWert2",
        "aufzaehlungsWert", // TODO: aufzaehlungsWert temporär als Textfeld
        "operator",
        "formel", // NEU
        "güteBewertung" // TODO: güteBewertung temporär als Textfeld
      ],

      dateFields: ["datumsWert1", "datumsWert2"],
      // TODO: selectFields implementieren (q-select)
      // selectFields: ["aufzaehlungsWert", "güteBewertung"],

      timeFields: ["tagesZeitWert1", "tagesZeitWert2"], // NEU

      typbezogeneBaueigenschaftFelder: [
        // ACHTUNG: Wird aktuell nicht verwendet!!!
        "baueigenschaftsBezeichnung",
        // #401 - alte Schutzkategorien (ersetzt durch neue fachliche Kategorien/Rubriken), disabled:
        /*
        "schallSchutz",
        "wärmeSchutz",
        "brandSchutz",
        "raumAkustik",
        "feuchteSchutz",
        "chemischerHolzSchutz",
        "abdichtungsTechnik",
        "korrosionsSchutz",
        "schadstoffSchutz",
        "ökoBilanz",
        "nachhaltigkeit",
        // NEU:
        "energieEinsparung",
        "gebrauchsTauglichkeit",
        "standSicherheit",
        "verkehrsSicherheit",
        "barriereFreiheit",
        "gesundheitUndHygiene",
        "umweltVerträglichkeit",
        "sonstiges",
        // NEU: #514/515
        "recht",
        "geografie",
        "infrastruktur",
        "geoPolitik",
        "projektManagement",
        "umweltUndKlima",
        "hydroGeologie",
        "geometrie",
        "konstruktion",
        "nutzungsUndBetriebsZeiten",
        "beleuchtung",
        "raumKlima",
        "lastAnnahmen",
        "materialEigenschaften",
        "baueigenschaftsProfile",
        "bauinformationsProfile",
        */
        // NEU - #401:
        "strukturAllgemein",
        "strukturEinordnung",
        "strukturZusammensetzung",
        "strukturProfilzuordnung",
        "wirtschaftAllgemein",
        "wirtschaftHandel",
        "wirtschaftProjektsteuerung",
        "wirtschaftRecht",
        "wirtschaftKosten", // NEU
        "umgebungAllgemein",
        "umgebungGeografie",
        "umgebungGeopolitik",
        "umgebungInfrastruktur",
        "umgebungUmwelt",
        "umgebungKlima",
        "umgebungHydrogeologie",
        "gebäudetechnikAllgemein", // NEU
        "gebäudetechnikWasserUndAbwasser", // NEU
        "gebäudetechnikHeizung", // NEU
        "gebäudetechnikKühlung", // NEU
        "gebäudetechnikLüftung", // NEU
        "gebäudetechnikElektrik", // NEU
        "gebäudetechnikKommunikation", // NEU
        "gebäudetechnikBeförderung", // NEU
        "gebäudetechnikTechnikFürSpezifischeNutzungen",
        "gebäudetechnikAutomation", // NEU
        "gebäudetechnikNutzungsUndBetriebszeiten", // NEU
        "gebäudetechnikRaumklima", // NEU
        "gebäudetechnikBeleuchtung", // NEU
        "gebäudetechnikBeschattung", // NEU
        "gebäudetechnikBelichtung", // NEU
        "geometrieAllgemein",
        "geometrieMaße",
        "geometrieMengen",
        "statikAllgemein",
        "statikLasten",
        "statikStandsicherheit",
        "statikFestigkeit",
        "konstruktionAllgemein",
        "bautenschutzAllgemein", // NEU
        "bautenschutzAbdichtungstechnik", // NEU
        "bautenschutzKorrosionsschutz", // NEU
        "bautenschutzHolzschutz", // NEU
        "feuchteschutzAllgemein",
        "wärmeschutzAllgemein",
        "wärmeschutzEnergiebedarf",
        "akustikAllgemein", // NEU
        "akustikSchallschutz", // NEU
        "akustikRaumakustik", // NEU
        "schwingungsUndErschütterungsschutzAllgemein", // NEU
        "schwingungsUndErschütterungsschutzSchwingungen", // NEU
        "schwingungsUndErschütterungsschutzErschütterungen", // NEU
        "brandschutzAllgemein",
        // "brandschutzBlitzschutz", // ALT - entfernt!
        "sicherheitAllgemein",
        "sicherheitVerkehrssicherheit",
        "sicherheitBarrierefreiheit",
        "sicherheitElektrischeSicherheit",
        "gebrauchstauglichkeitAllgemein",
        "gebrauchstauglichkeitBehaglichkeit",
        "gesundheitAllgemein",
        "gesundheitSchadstoffschutz",
        "gesundheitRadonschutz",
        "ressourcenAllgemein",
        "ressourcenUmweltverträglichkeit",
        "ressourcenÖkobilanz",
        "ressourcenLebenszyklus",
        "bautechnikAllgemein",
        "bautechnikBauablauf",
        "bautechnikZeitbedarf",
        "bautechnikWinterbau",
        "verwendungAllgemein",
        "verwendungHerkunft",
        "verwendungQualität",
        "verwendungHerstellung",
        "verwendungVerpackung",
        "verwendungLieferung",
        "verwendungLagerung",
        "verwendungVerarbeitung",
        "verwendungAnwendung",
        "verwendungMontage",
        "verwendungVerbrauch",
        "verwendungNachbehandlung",
        "verwendungBetrieb",
        "verwendungBenutzung",
        "verwendungReinigung",
        "verwendungPflege",
        "verwendungWartung",
        "verwendungDemontage",
        "verwendungWiederverwertung",
        "verwendungEntsorgung",
        "sonstigesAllgemein",
        "sonstigesTest"
      ],

      booleanFields: [
        // "obligatorischNichtOptional", // NEU: Obligatorisch wird nicht mehr unterstützt
        "aktiviertNichtDeaktiviert",
        "aktivierbar",
        //===============================================
        "definiertNichtUndefiniert",
        "ererbtNichtGesetzt",
        "systemdefiniertNichtBenutzerdefiniert",
        "systemberechnetNichtSystemgesetzt",
        "vererbtAnKindknoten", // NEU: Fehlte (Fehler)
        "sollwertNichtIstwert",
        //===============================================
        // #401 - alte Schutzkategorien (ersetzt durch neue fachliche Kategorien/Rubriken), disabled:
        /*
        "schallSchutz",
        "wärmeSchutz",
        "brandSchutz",
        "raumAkustik",
        "feuchteSchutz",
        "chemischerHolzSchutz",
        "abdichtungsTechnik",
        "korrosionsSchutz",
        "schadstoffSchutz",
        "ökoBilanz",
        "nachhaltigkeit",
        // NEU:
        "energieEinsparung",
        "gebrauchsTauglichkeit",
        "standSicherheit",
        "verkehrsSicherheit",
        "barriereFreiheit",
        "gesundheitUndHygiene",
        "umweltVerträglichkeit",
        "sonstiges",
        // NEU: #514/515
        "recht",
        "geografie",
        "infrastruktur",
        "geoPolitik",
        "projektManagement",
        "umweltUndKlima",
        "hydroGeologie",
        "geometrie",
        "konstruktion",
        "nutzungsUndBetriebsZeiten",
        "beleuchtung",
        "raumKlima",
        "lastAnnahmen",
        "materialEigenschaften",
        "baueigenschaftsProfile",
        "bauinformationsProfile",
        */
        //===============================================
        "wahrheitsWert",
        //==============================================
        // NEU - #401:
        "strukturAllgemein",
        "strukturEinordnung",
        "strukturZusammensetzung",
        "strukturProfilzuordnung",
        "wirtschaftAllgemein",
        "wirtschaftHandel",
        "wirtschaftProjektsteuerung",
        "wirtschaftRecht",
        "wirtschaftKosten", // NEU
        "umgebungAllgemein",
        "umgebungGeografie",
        "umgebungGeopolitik",
        "umgebungInfrastruktur",
        "umgebungUmwelt",
        "umgebungKlima",
        "umgebungHydrogeologie",
        "gebäudetechnikAllgemein", // NEU
        "gebäudetechnikWasserUndAbwasser", // NEU
        "gebäudetechnikHeizung", // NEU
        "gebäudetechnikKühlung", // NEU
        "gebäudetechnikLüftung", // NEU
        "gebäudetechnikElektrik", // NEU
        "gebäudetechnikKommunikation", // NEU
        "gebäudetechnikBeförderung", // NEU
        "gebäudetechnikTechnikFürSpezifischeNutzungen",
        "gebäudetechnikAutomation", // NEU
        "gebäudetechnikNutzungsUndBetriebszeiten", // NEU
        "gebäudetechnikRaumklima", // NEU
        "gebäudetechnikBeleuchtung", // NEU
        "gebäudetechnikBeschattung", // NEU
        "gebäudetechnikBelichtung", // NEU
        "geometrieAllgemein",
        "geometrieMaße",
        "geometrieMengen",
        "statikAllgemein",
        "statikLasten",
        "statikStandsicherheit",
        "statikFestigkeit",
        "konstruktionAllgemein",
        "bautenschutzAllgemein", // NEU
        "bautenschutzAbdichtungstechnik", // NEU
        "bautenschutzKorrosionsschutz", // NEU
        "bautenschutzHolzschutz", // NEU
        "feuchteschutzAllgemein",
        "wärmeschutzAllgemein",
        "wärmeschutzEnergiebedarf",
        "akustikAllgemein", // NEU
        "akustikSchallschutz", // NEU
        "akustikRaumakustik", // NEU
        "schwingungsUndErschütterungsschutzAllgemein", // NEU
        "schwingungsUndErschütterungsschutzSchwingungen", // NEU
        "schwingungsUndErschütterungsschutzErschütterungen", // NEU
        "brandschutzAllgemein",
        // "brandschutzBlitzschutz", // ALT - entfernt!
        "sicherheitAllgemein",
        "sicherheitVerkehrssicherheit",
        "sicherheitBarrierefreiheit",
        "sicherheitElektrischeSicherheit",
        "gebrauchstauglichkeitAllgemein",
        "gebrauchstauglichkeitBehaglichkeit",
        "gesundheitAllgemein",
        "gesundheitSchadstoffschutz",
        "gesundheitRadonschutz",
        "ressourcenAllgemein",
        "ressourcenUmweltverträglichkeit",
        "ressourcenÖkobilanz",
        "ressourcenLebenszyklus",
        "bautechnikAllgemein",
        "bautechnikBauablauf",
        "bautechnikZeitbedarf",
        "bautechnikWinterbau",
        "verwendungAllgemein",
        "verwendungHerkunft",
        "verwendungQualität",
        "verwendungHerstellung",
        "verwendungVerpackung",
        "verwendungLieferung",
        "verwendungLagerung",
        "verwendungVerarbeitung",
        "verwendungAnwendung",
        "verwendungMontage",
        "verwendungVerbrauch",
        "verwendungNachbehandlung",
        "verwendungBetrieb",
        "verwendungBenutzung",
        "verwendungReinigung",
        "verwendungPflege",
        "verwendungWartung",
        "verwendungDemontage",
        "verwendungWiederverwertung",
        "verwendungEntsorgung",
        "sonstigesAllgemein",
        "sonstigesTest"
      ],

      booleanFieldsWertbezogen: [
        "aktiviertNichtDeaktiviert",
        "aktivierbar",
        "definiertNichtUndefiniert",
        "ererbtNichtGesetzt",
        // "systemdefiniertNichtBenutzerdefiniert", // NEU: #514
        "systemberechnetNichtSystemgesetzt",
        "vererbtAnKindknoten", // NEU: Fehlte (Fehler)
        // "sollwertNichtIstwert", // NEU: #514

        "wahrheitsWert"
      ],
      selectFieldsTypbezogen: ["werteTyp"],
      selectFieldsWertbezogen: ["aufzaehlungsWert"],
      textFieldsTypbezogen: [
        "baueigenschaftsAnzeigeText", // NEU: #514
        // "bauinformationsBezeichnung", // ALT
        "bauinformationsAnzeigeText", // NEU - statt bauinformationsBezeichnung!
        "bauinformationsTyp",
        "baueigenschaftsBemerkung",
        "baueigenschaftsBezeichnung"
        // "symbol", // Hinweis: Auszukommentieren für q-markdown für dieses Feld!
        // "einheit", // Hinweis: Auszukommentieren für q-markdown für dieses Feld!
        // "operator" // Hinweis: Auszukommentieren für q-markdown für dieses Feld!
        // "formel" // NEU - Hinweis: Auszukommentieren q-markdown für dieses Feld!
      ],
      booleanFieldsTypbezogen: [
        "systemdefiniertNichtBenutzerdefiniert", // NEU: #514
        "sollwertNichtIstwert", // NEU: #514
        // #401 - alte Schutzkategorien (ersetzt durch neue fachliche Kategorien/Rubriken), disabled:
        /*
        "schallSchutz",
        "wärmeSchutz",
        "brandSchutz",
        "raumAkustik",
        "feuchteSchutz",
        "chemischerHolzSchutz",
        "abdichtungsTechnik",
        "korrosionsSchutz",
        "schadstoffSchutz",
        "ökoBilanz",
        "nachhaltigkeit",
        // NEU:
        "energieEinsparung",
        "gebrauchsTauglichkeit",
        "standSicherheit",
        "verkehrsSicherheit",
        "barriereFreiheit",
        "gesundheitUndHygiene",
        "umweltVerträglichkeit",
        "sonstiges",
        // NEU: #514/515
        "recht",
        "geografie",
        "infrastruktur",
        "geoPolitik",
        "projektManagement",
        "umweltUndKlima",
        "hydroGeologie",
        "geometrie",
        "konstruktion",
        "nutzungsUndBetriebsZeiten",
        "beleuchtung",
        "raumKlima",
        "lastAnnahmen",
        "materialEigenschaften",
        "baueigenschaftsProfile",
        "bauinformationsProfile",
        */
        //==============================================
        // NEU - #401:
        "strukturAllgemein",
        "strukturEinordnung",
        "strukturZusammensetzung",
        "strukturProfilzuordnung",
        "wirtschaftAllgemein",
        "wirtschaftHandel",
        "wirtschaftProjektsteuerung",
        "wirtschaftRecht",
        "wirtschaftKosten", // NEU
        "umgebungAllgemein",
        "umgebungGeografie",
        "umgebungGeopolitik",
        "umgebungInfrastruktur",
        "umgebungUmwelt",
        "umgebungKlima",
        "umgebungHydrogeologie",
        "gebäudetechnikAllgemein", // NEU
        "gebäudetechnikWasserUndAbwasser", // NEU
        "gebäudetechnikHeizung", // NEU
        "gebäudetechnikKühlung", // NEU
        "gebäudetechnikLüftung", // NEU
        "gebäudetechnikElektrik", // NEU
        "gebäudetechnikKommunikation", // NEU
        "gebäudetechnikBeförderung", // NEU
        "gebäudetechnikTechnikFürSpezifischeNutzungen",
        "gebäudetechnikAutomation", // NEU
        "gebäudetechnikNutzungsUndBetriebszeiten", // NEU
        "gebäudetechnikRaumklima", // NEU
        "gebäudetechnikBeleuchtung", // NEU
        "gebäudetechnikBeschattung", // NEU
        "gebäudetechnikBelichtung", // NEU
        "geometrieAllgemein",
        "geometrieMaße",
        "geometrieMengen",
        "statikAllgemein",
        "statikLasten",
        "statikStandsicherheit",
        "statikFestigkeit",
        "konstruktionAllgemein",
        "bautenschutzAllgemein", // NEU
        "bautenschutzAbdichtungstechnik", // NEU
        "bautenschutzKorrosionsschutz", // NEU
        "bautenschutzHolzschutz", // NEU
        "feuchteschutzAllgemein",
        "wärmeschutzAllgemein",
        "wärmeschutzEnergiebedarf",
        "akustikAllgemein", // NEU
        "akustikSchallschutz", // NEU
        "akustikRaumakustik", // NEU
        "schwingungsUndErschütterungsschutzAllgemein", // NEU
        "schwingungsUndErschütterungsschutzSchwingungen", // NEU
        "schwingungsUndErschütterungsschutzErschütterungen", // NEU
        "brandschutzAllgemein",
        // "brandschutzBlitzschutz", // ALT - entfernt!
        "sicherheitAllgemein",
        "sicherheitVerkehrssicherheit",
        "sicherheitBarrierefreiheit",
        "sicherheitElektrischeSicherheit",
        "gebrauchstauglichkeitAllgemein",
        "gebrauchstauglichkeitBehaglichkeit",
        "gesundheitAllgemein",
        "gesundheitSchadstoffschutz",
        "gesundheitRadonschutz",
        "ressourcenAllgemein",
        "ressourcenUmweltverträglichkeit",
        "ressourcenÖkobilanz",
        "ressourcenLebenszyklus",
        "bautechnikAllgemein",
        "bautechnikBauablauf",
        "bautechnikZeitbedarf",
        "bautechnikWinterbau",
        "verwendungAllgemein",
        "verwendungHerkunft",
        "verwendungQualität",
        "verwendungHerstellung",
        "verwendungVerpackung",
        "verwendungLieferung",
        "verwendungLagerung",
        "verwendungVerarbeitung",
        "verwendungAnwendung",
        "verwendungMontage",
        "verwendungVerbrauch",
        "verwendungNachbehandlung",
        "verwendungBetrieb",
        "verwendungBenutzung",
        "verwendungReinigung",
        "verwendungPflege",
        "verwendungWartung",
        "verwendungDemontage",
        "verwendungWiederverwertung",
        "verwendungEntsorgung",
        "sonstigesAllgemein",
        "sonstigesTest"
      ],
      textFieldsWertbezogen: [
        "bezeichnungsWert1",
        "bezeichnungsWert2",
        "güteBewertung"
      ],
      visibleColumnsTableBaueigenschaften: [
        "baueigenschaftsBezeichnung", // Immer visible

        // Aktivierungsmerkmale:
        // "obligatorischNichtOptional", NEU: Obligatorisch wird nicht mehr unterstützt
        // "aktivierbar", NEU: Aktivierbar wird nicht mehr angezeigt, wird mit Aktivierung im Pfad nicht mehr benötigt
        "aktiviertNichtDeaktiviert",

        // Kennwertbezogene Angaben - anfangs nicht visible:
        /*
        "einheit",
        "symbol",
        "operator",
        "formel", // NEU
        */

        // Wertbezogene Angaben:
        "werteTyp",
        "kennWert1",
        "kennWert2",
        "datumsWert1",
        "datumsWert2",
        "tagesZeitWert1", // NEU
        "tagesZeitWert2", // NEU
        "bezeichnungsWert1",
        "bezeichnungsWert2",
        "aufzaehlungsWert",
        "wahrheitsWert"

        // Wertbezogene Merkmale - anfangs nicht visible:
        /*
        "systemdefiniertNichtBenutzerdefiniert",
        "ererbtNichtGesetzt",
        "definiertNichtUndefiniert",
        "systemberechnetNichtSystemgesetzt",
        "sollwertNichtIstwert",
        "güteBewertung"
        */

        // Weitere fachliche Angaben - anfangs nicht visible:
        /*
        "baueigenschaftsBemerkung",
        "bauinformationsBezeichnung", // ALT
        "bauinformationsAnzeigeText", // NEU
        "bauinformationsTyp",
        */

        // #401 - alte Schutzkategorien (ersetzt durch neue fachliche Kategorien/Rubriken), disabled:
        /*
        "schallSchutz",
        "wärmeSchutz",
        "brandSchutz",
        "raumAkustik",
        "feuchteSchutz",
        "chemischerHolzSchutz",
        "abdichtungsTechnik",
        "korrosionsSchutz",
        "schadstoffSchutz",
        "ökoBilanz",
        "nachhaltigkeit",
         // NEU:
        "energieEinsparung",
        "gebrauchsTauglichkeit",
        "standSicherheit",
        "verkehrsSicherheit",
        "barriereFreiheit",
        "gesundheitUndHygiene",
        "umweltVerträglichkeit",
        "sonstiges",
         // NEU: #514/515
        "recht",
        "geografie",
        "infrastruktur",
        "geoPolitik",
        "projektManagement",
        "umweltUndKlima",
        "hydroGeologie",
        "geometrie",
        "konstruktion",
        "nutzungsUndBetriebsZeiten",
        "beleuchtung",
        "raumKlima",
        "lastAnnahmen",
        "materialEigenschaften",
        "baueigenschaftsProfile",
        "bauinformationsProfile",
        */
      ],

      aktivierungsMerkmaleAnzeigen: true,
      aktivierungsMerkmaleArray: [
        // "obligatorischNichtOptional", // NEU: Obligatorisch wird nicht mehr unterstützt
        "aktiviertNichtDeaktiviert",
        "aktivierbar"
      ],

      weitereTypbezogeneAngabenAnzeigen: false,
      weitereTypbezogeneAngabenArray: [
        "baueigenschaftsAnzeigeText", // NEU: #514
        "baueigenschaftsBemerkung",
        "systemdefiniertNichtBenutzerdefiniert", // NEU: #514
        "sollwertNichtIstwert", // NEU: #514
        // "bauinformationsBezeichnung", // ALT
        "bauinformationsAnzeigeText", // NEU - statt bauinformationsBezeichnung
        "bauinformationsTyp"
      ],

      wertbezogeneAngabenAnzeigen: true,
      wertbezogeneAngabenArray: [
        "werteTyp",
        "kennWert1",
        "kennWert2",
        "datumsWert1",
        "datumsWert2",
        "tagesZeitWert1", // NEU
        "tagesZeitWert2", // NEU
        "bezeichnungsWert1",
        "bezeichnungsWert2",
        "aufzaehlungsWert",
        "wahrheitsWert"
      ],

      kennwertbezogeneAngabenAnzeigen: false,
      kennwertbezogeneAngabenArray: ["einheit", "symbol", "operator", "formel"], // NEU: "formel"

      wertbezogeneMerkmaleAnzeigen: false,
      wertbezogeneMerkmaleArray: [
        // "systemdefiniertNichtBenutzerdefiniert", // NEU: #514
        "ererbtNichtGesetzt",
        "definiertNichtUndefiniert",
        "systemberechnetNichtSystemgesetzt",
        "vererbtAnKindknoten", // NEU: Fehlte (Fehler)
        // "sollwertNichtIstwert", // NEU: #514
        "güteBewertung"
      ],

      schutzKategorienAnzeigen: false,
      schutzKategorienArray: [
        // #401 - alte Schutzkategorien (ersetzt durch neue fachliche Kategorien/Rubriken), disabled:
        /*
        "schallSchutz",
        "wärmeSchutz",
        "brandSchutz",
        "raumAkustik",
        "feuchteSchutz",
        "chemischerHolzSchutz",
        "abdichtungsTechnik",
        "korrosionsSchutz",
        "schadstoffSchutz",
        "ökoBilanz",
        "nachhaltigkeit",
        // NEU:
        "energieEinsparung",
        "gebrauchsTauglichkeit",
        "standSicherheit",
        "verkehrsSicherheit",
        "barriereFreiheit",
        "gesundheitUndHygiene",
        "umweltVerträglichkeit",
        "sonstiges",
        // NEU: #514/515
        "recht",
        "geografie",
        "infrastruktur",
        "geoPolitik",
        "projektManagement",
        "umweltUndKlima",
        "hydroGeologie",
        "geometrie",
        "konstruktion",
        "nutzungsUndBetriebsZeiten",
        "beleuchtung",
        "raumKlima",
        "lastAnnahmen",
        "materialEigenschaften",
        "baueigenschaftsProfile",
        "bauinformationsProfile",
        */
        //==============================================
        // NEU - #401:
        "strukturAllgemein",
        "strukturEinordnung",
        "strukturZusammensetzung",
        "strukturProfilzuordnung",
        "wirtschaftAllgemein",
        "wirtschaftHandel",
        "wirtschaftProjektsteuerung",
        "wirtschaftRecht",
        "wirtschaftKosten", // NEU
        "umgebungAllgemein",
        "umgebungGeografie",
        "umgebungGeopolitik",
        "umgebungInfrastruktur",
        "umgebungUmwelt",
        "umgebungKlima",
        "umgebungHydrogeologie",
        "gebäudetechnikAllgemein", // NEU
        "gebäudetechnikWasserUndAbwasser", // NEU
        "gebäudetechnikHeizung", // NEU
        "gebäudetechnikKühlung", // NEU
        "gebäudetechnikLüftung", // NEU
        "gebäudetechnikElektrik", // NEU
        "gebäudetechnikKommunikation", // NEU
        "gebäudetechnikBeförderung", // NEU
        "gebäudetechnikTechnikFürSpezifischeNutzungen",
        "gebäudetechnikAutomation", // NEU
        "gebäudetechnikNutzungsUndBetriebszeiten", // NEU
        "gebäudetechnikRaumklima", // NEU
        "gebäudetechnikBeleuchtung", // NEU
        "gebäudetechnikBeschattung", // NEU
        "gebäudetechnikBelichtung", // NEU
        "geometrieAllgemein",
        "geometrieMaße",
        "geometrieMengen",
        "statikAllgemein",
        "statikLasten",
        "statikStandsicherheit",
        "statikFestigkeit",
        "konstruktionAllgemein",
        "bautenschutzAllgemein", // NEU
        "bautenschutzAbdichtungstechnik", // NEU
        "bautenschutzKorrosionsschutz", // NEU
        "bautenschutzHolzschutz", // NEU
        "feuchteschutzAllgemein",
        "wärmeschutzAllgemein",
        "wärmeschutzEnergiebedarf",
        "akustikAllgemein", // NEU
        "akustikSchallschutz", // NEU
        "akustikRaumakustik", // NEU
        "schwingungsUndErschütterungsschutzAllgemein", // NEU
        "schwingungsUndErschütterungsschutzSchwingungen", // NEU
        "schwingungsUndErschütterungsschutzErschütterungen", // NEU
        "brandschutzAllgemein",
        // "brandschutzBlitzschutz", // ALT - entfernt!
        "sicherheitAllgemein",
        "sicherheitVerkehrssicherheit",
        "sicherheitBarrierefreiheit",
        "sicherheitElektrischeSicherheit",
        "gebrauchstauglichkeitAllgemein",
        "gebrauchstauglichkeitBehaglichkeit",
        "gesundheitAllgemein",
        "gesundheitSchadstoffschutz",
        "gesundheitRadonschutz",
        "ressourcenAllgemein",
        "ressourcenUmweltverträglichkeit",
        "ressourcenÖkobilanz",
        "ressourcenLebenszyklus",
        "bautechnikAllgemein",
        "bautechnikBauablauf",
        "bautechnikZeitbedarf",
        "bautechnikWinterbau",
        "verwendungAllgemein",
        "verwendungHerkunft",
        "verwendungQualität",
        "verwendungHerstellung",
        "verwendungVerpackung",
        "verwendungLieferung",
        "verwendungLagerung",
        "verwendungVerarbeitung",
        "verwendungAnwendung",
        "verwendungMontage",
        "verwendungVerbrauch",
        "verwendungNachbehandlung",
        "verwendungBetrieb",
        "verwendungBenutzung",
        "verwendungReinigung",
        "verwendungPflege",
        "verwendungWartung",
        "verwendungDemontage",
        "verwendungWiederverwertung",
        "verwendungEntsorgung",
        "sonstigesAllgemein",
        "sonstigesTest"
      ],

      formatDate: function(val) {
        //--------------------------------------------------------------------------------------------------------------------
        // Helper function for Date Formatting
        // ACHTUNG: Funktion wird oben im Template verwendet, in Methoden wird meist date.formatDate direkt aus den Quasar Date Utilities gerufen!
        // ACHTUNG: Helper Funktionen, die nicht auf Variablen in data() operieren, können in data () deklariert werden!
        // Sonst müssen sie nach methods: verschoben werden!
        // Die Mongoose Dates werden in Quasar z.B. so dargestellt: 2020-12-04T00:00:00.000Z
        // Siehe https://stackoverflow.com/questions/7443142/how-do-i-format-dates-from-mongoose-in-node-js
        // Die bessere Lösung scheint die JS Library Momentjs zu sein (var moment : require('moment'), läuft in Node und Browser)
        // Mongoose kann anscheinend nur Dates mit Time: https://stackoverflow.com/questions/7443142/how-do-i-format-dates-from-mongoose-in-node-js
        // Auch hier wird Momentjs empfohlen: https://stackoverflow.com/questions/53932266/how-to-convert-date-format-in-nodejs-using-mongoose
        //--------------------------------------------------------------------------------------------------------------------
        if (typeof val === "undefined" || val === null || val === "") {
          return;
        }
        // Ursprüngliche Variante mit eigener simpler Formatierung per Substring aus obigem Mongoose Format, das die ersten 10 Spalten abschneidet:
        // var yyyymmdd = val.substring(0, 10);
        // return yyyymmdd;

        // Stattdessen Quasar Date Utils (per obigem import { date } from 'quasar') benutzen:
        return date.formatDate(val, "DD.MM.YYYY"); // Wandelt das Datum in deutsches Format um
      },

      formatTime: function(val) {
        //--------------------------------------------------------------------------------------------------------------------
        // Helper function for Time of Day Formatting
        // ACHTUNG: Funktion wird oben im Template verwendet, in Methoden wird meist date.formatDate direkt aus den Quasar Date Utilities gerufen!
        // ACHTUNG: Helper Funktionen, die nicht auf Variablen in data() operieren, können in data () deklariert werden!
        // Sonst müssen sie nach methods: verschoben werden!
        // Die Time of Days werden am Backend abgelegt als Strings im Format: "hh:mm" (war ursprünglich "hhmm")
        // Diese Fuktion formatiert sie um nach: "hh:mm"
        // Aktuell muss keine Umformatierung erfolgen!!!
        //--------------------------------------------------------------------------------------------------------------------
        if (typeof val === "undefined" || val === null || val === "") {
          return;
        }
        // return val.substring(0, 2) + ":" + val.substring(2, 4);
        return val;
      },

      //----------------------------------------------------------------------------------------------------------------------
      // Es folgen die data()-Definitionen für die q-table im Tab "Zugeordnete Bauinformationen"
      // NEU: Sichtbare Spalten werden per q-toggles gesteuert
      // btnClickCounter: 1, // Für gemeinsames Togglen aller Normkategorien - ALT, nicht mehr verwendet
      //----------------------------------------------------------------------------------------------------------------------
      dataTableBauinformationen: [], // Array für die eigentlichen Bauinformationen (vom Backend)
      filterTableBauinformationen: null, // NEU: Für die Filterung
      // NEU: Pagination Objekt für Steuerung, muss im Template oben mit ".sync" Modifier verwendet werden: :pagination.sync="pagniationTableBauinformationen"
      paginationTableBauinformationen: {
        sortBy: "bauinformationsBezeichnung", // (initiale) Sortierungsspalte, erwartet einen Column Name aus der Column Definition der q-table
        descending: false, // Sortierungsreihenfolge
        page: 1, // Initial gezeigte Page
        rowsPerPage:
          globalStore.state.einstellungenBenutzer.tablesPaginationRowsPerPage // NEU - einstellbarer Wert
        // rowsPerPage: 30, // ALT
        // rowsNumber: xx if getting data from a server
      },
      // reloadTableBauinformationen: false, // Wird verwendet zusammen mit :loading, um die Tabelle neu zu laden, aktuell disabled

      selectedRowsTableBauinformationen: [], // Array, der die mit den Checkboxes in der ersten Spalte der q-table selektierten Rows enthält
      // HINWEIS: Dieser diente per selectedRowsTableBauinformationen[0] ursprünglich auch als v-model für die q-form im zweiten Tab.
      // Wenn dort Felder verändert wurden, änderten sich diese auch automatisch synchron in der q-table! (D.h. er ist v-model für q-table und q-form)
      // ACHTUNG: Dies führte allerdings zu Komplikationen beim Canceln - dann können Inkonsistenzen zwischen q-table und q-form zu
      // Problemen führen, z.B. konnte q-form im zweiten q-tab-panel nach eineme Cancel nicht mehr per q-input mit neuen Werten aktualisiert werden,
      // sondern erst nach einem "Zwischenstopp" (mit Re-Rendering) im ersten q-tab-panel mit der q-table
      // Daher sollten die Tabs jeweils alle dedizierte v-models haben.
      // Das v-model des zweiten Tabs muss ggf. über einen programmatisch zu verwaltenden selectedIndex (indexOf im Array mit _id)
      // mit der in der q-table ausgewählten Row "assoziiert" werden.

      visibleColumnsTableBauinformationen: [
        // Array, der die sichtbaren Columns in q-table über ein v-model steuert
        "bauinformationsBezeichnung",
        "bauinformationsTyp",
        "benutzerKennungenAutoren", // NEU
        "bauinformationsAnzeigeText", // NEU
        "bauinformationsBemerkung",
        "herausgeberGeografie",
        "herausgeberInstitution",
        "herausgeberBezeichnung",
        "herausgeberBundeslandDeutschland",
        "herausgeberBundeslandÖsterreich",
        "herausgeberKantonSchweiz",
        "gültigkeitsDatumVon",
        "gültigkeitsDatumBis",
        "normTypDIN",
        "normTypÖNORM",
        "normTypSN",
        "normTypEN",
        "normTypISO",
        "externerLink",
        "oneDriveLink", // NEU
        "internerLink"
        /*
        "grundNorm",
        "terminologieNorm"
        "prüfNorm",
        "produktNorm",
        "verfahrensNorm",
        "dienstleistungsNorm",
        "schnittstellenNorm",
        "deklarationsNorm",
        "fachbereichsNorm",
        "werkNorm"
        */
      ],

      //--------------------------------------------------------------------------------------------------------------------
      // Boolean-Variablen für die beiden "besonderen" Toggles rechts oben:
      toggleAllNormkategorienState: false, // Für gemeinsames Togglen aller Normkategorien, anfangs keine Normkategorien, d.h. false
      toggleAllColumnsState: true, // Für gemeinsames Togglen aller Spalten, anfangs alle außer Normkategorien, d.h. true

      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Variablen für Toggling der Sichtbarkeit von MEHREREN gemeinsamen Spalten in der QTable für die Bauinformationen
      // HINWEIS: Die 5 Toggles für das Toggling der EINZELNEN Spalten Autoren, Typ, Bemerkung, Geografie, Institution
      //          funktionieren anders, nämlich direkt auf dem Array visibleColumnsTableBauinformationen als v-model plus val Prop!!!
      // Siehe https://quasar.dev/vue-components/toggle#Array-model und https://quasar.dev/vue-components/toggle#QToggle-API
      regionenAnzeigen: true,
      regionenArray: [
        "herausgeberBundeslandDeutschland",
        "herausgeberBundeslandÖsterreich",
        "herausgeberKantonSchweiz"
      ],

      gueltigkeitAnzeigen: true,
      gueltigkeitArray: ["gültigkeitsDatumVon", "gültigkeitsDatumBis"],

      normTypenAnzeigen: true,
      normTypenArray: [
        "normTypDIN",
        "normTypÖNORM",
        "normTypSN",
        "normTypEN",
        "normTypISO"
      ],

      linksAnzeigen: true,
      linksArray: ["internerLink", "externerLink", "oneDriveLink"],

      //----------------------------------------------------------------------------------------------------------------------
      // ACHTUNG: Helper Funktionen, die nicht auf Variablen in data() operieren, können hier in data () deklariert werden!
      // Sonst müssen sie nach methods: verschoben werden!
      //----------------------------------------------------------------------------------------------------------------------
      displayCheckMark: function(val) {
        //--------------------------------------------------------------------------------------------------------------------
        // Helper function for Boolean val to display checkmarks instead of "true" or "false"
        // Wird aktuell nicht mehr benutzt, stattdessen werden Quasar QCheckboxes benutzt.
        // Diese triggern allerdings eine etwas größere Zeilenhöhe (unschön) - daher doch wieder displayCheckmark verwendet
        //--------------------------------------------------------------------------------------------------------------------
        if (val) {
          // return "\u2611";  // Unicode ballot box with check
          return "\u2705"; // Unicode white heavy check mark
        } else {
          return "\u2610"; // Unicode ballot box unchecked
          // return "\u2612"; // Unicode ballot box with cross
          // return "\u274C"; // Unicode cross mark
        }
      },

      //-----------------------------------------------------------------------------------------------------------------------
      columnsTableBauinformationen: [
        // Spaltendefinitionen für q-table für zugeordnete Bauinformationen
        {
          name: "bauinformationsBezeichnung",
          required: true,
          label: "Bezeichnung der Bauinformation",
          align: "left",
          field: row => row.bauinformationsBezeichnung,
          format: val => `${val}`,
          //--------------------------------------------------------------------------------------------------------------------
          //Aus der QTable Doc:
          // (optional) you can format the data with a function: format: (val, row) => `${val}%`
          // Anderes Beispiel: format: val => date.formatDate(val, ‘DD-MM-YYYY’)
          // Es können auch Funktionen (mit .this !!!) aufgerufen werden:
          // format: (val) => this.displayCheckMark(val) mit val: Boolean
          //--------------------------------------------------------------------------------------------------------------------
          sortable: true
          // Auch hier können Funktionen verwendet werden:
          // sortable: true, sort: (a, b) => parseInt(a, 10) - parseInt(b, 10)
        },
        {
          name: "bauinformationsAnzeigeText", // NEU
          align: "left",
          label: "Anzeigetext für die Bauinformation",
          field: "bauinformationsAnzeigeText",
          sortable: true
        },
        {
          name: "benutzerKennungenAutoren", // NEU
          align: "left",
          label: "Autoren",
          field: "benutzerKennungenAutoren",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell viele Benutzerkennungen hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "bauinformationsTyp",
          align: "left",
          label: "Typ",
          field: "bauinformationsTyp",
          sortable: true
        },
        {
          name: "bauinformationsBemerkung",
          align: "left",
          label: "Bemerkung zur Bauinformation",
          field: "bauinformationsBemerkung",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Bemerkungen hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "herausgeberGeografie",
          align: "left",
          label: "Geografie",
          field: "herausgeberGeografie",
          sortable: true
        },
        {
          name: "herausgeberInstitution",
          align: "left",
          label: "Institution",
          field: "herausgeberInstitution",
          sortable: true
        },
        {
          name: "herausgeberBezeichnung",
          align: "left",
          label: "Herausgeber",
          field: "herausgeberBezeichnung",
          sortable: true
        },
        {
          name: "herausgeberBundeslandDeutschland",
          align: "left",
          label: "Bundesland (D)",
          field: "herausgeberBundeslandDeutschland",
          sortable: true
        },
        {
          name: "herausgeberBundeslandÖsterreich",
          align: "center",
          label: "Bundesland (AU)",
          field: "herausgeberBundeslandÖsterreich",
          sortable: true
        },
        {
          name: "herausgeberKantonSchweiz",
          align: "left",
          label: "Kanton (CH)",
          field: "herausgeberKantonSchweiz",
          sortable: true
        },
        {
          name: "gültigkeitsDatumVon",
          align: "left",
          label: "Gültig von",
          field: "gültigkeitsDatumVon",
          format: val => this.formatDate(val),
          sortable: true
        },
        {
          name: "gültigkeitsDatumBis",
          align: "left",
          label: "Gültig bis",
          field: "gültigkeitsDatumBis",
          format: val => this.formatDate(val),
          sortable: true
        },
        {
          name: "normTypDIN",
          align: "left",
          label: "Normtyp (DIN)",
          field: "normTypDIN",
          sortable: true
        },
        {
          name: "normTypÖNORM",
          align: "center",
          label: "Normtyp (ÖNORM)",
          field: "normTypÖNORM",
          sortable: true
        },
        {
          name: "normTypSN",
          align: "center",
          label: "Normtyp (SN)",
          field: "normTypSN",
          sortable: true
        },
        {
          name: "normTypEN",
          align: "left",
          label: "Normtyp (EN)",
          field: "normTypEN",
          sortable: true
        },
        {
          name: "normTypISO",
          align: "left",
          label: "Normtyp (ISO)",
          field: "normTypISO",
          sortable: true
        },
        {
          name: "externerLink",
          align: "left",
          label: "Externer Link",
          field: "externerLink",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Links hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "oneDriveLink",
          align: "left",
          label: "OneDrive-Link",
          field: "oneDriveLink",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Links hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "internerLink",
          align: "left",
          label: "Interner BIM.click-Link",
          field: "internerLink",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Links hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "grundNorm",
          align: "center",
          label: "Grundnorm",
          field: "grundNorm",
          // format: val => this.displayCheckMark(val), // Alternative Lösung mit Unicode Checkmarks statt q-checkboxes
          sortable: true
        },
        {
          name: "terminologieNorm",
          align: "center",
          label: "Terminologienorm",
          field: "terminologieNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "prüfNorm",
          align: "center",
          label: "Prüfnorm",
          field: "prüfNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "produktNorm",
          align: "center",
          label: "Produktnorm",
          field: "produktNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "verfahrensNorm",
          align: "center",
          label: "Verfahrensnorm",
          field: "verfahrensNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "dienstleistungsNorm",
          align: "center",
          label: "Dienstleistungsnorm",
          field: "dienstleistungsNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "schnittstellenNorm",
          align: "center",
          label: "Schnittstellennorm",
          field: "schnittstellenNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "deklarationsNorm",
          align: "center",
          label: "Deklarationsnorm",
          field: "deklarationsNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "fachbereichsNorm",
          align: "center",
          label: "Fachbereichsnorm",
          field: "fachbereichsNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "werkNorm",
          align: "center",
          label: "Werknorm",
          field: "werkNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        }
      ],

      //-------------------------------------------------------------------------------------------------------------------------------
      // TODO - Variable für eventuelle spätere Selektion von Zeilen in der QTable für die zugeordneten Bauinformationen:
      selectedKeyTableBauinformationen: null, // NEU: Hält _id einer ausgewählten Zeile, muss bei QTable erst z.B. mit computed-Funktion
      // aus selectedRowsTableBauinformationen extrahiert werden (:selected.sync="selectedRowsTableBauinformationen")
      // selectedRowsTableBauinformationen ist allerdings bei multipler Selection ein Array mit evtl. mehreren Bauinformationen
      // Die Daten der selektierten Rows der q-table liegen im oben schon definierten Array selectedRowsTableBaubestimmmungen

      //--------------------------------------------------------------------------------------------------------------------------------
      // Steuerungen für q-dialogs, die bei Aktionen auf der q-table für die zugeordneten Bauinformationen verwendet werden:
      confirmHinweisAuswaehlenBauinformationAusQTable: false, // v-model für q-dialog bei Anwahl Tab Auswahl oder mit Buttons ohne selektierte Baubestimmmung im Tab Übersicht
      confirmHinweisAuswaehlenBauinformationAusQTableMitInternemLink: false, // v-model für q-dialog bei Anwahl Button "Internen Link öffnen" ohne Auswahl selektierte Baubestimmmung mit internem Link
      confirmHinweisAuswaehlenBauinformationAusQTableMitExternemLink: false, // v-model für q-dialog bei Anwahl Button "Externen Link öffnen" ohne Auswahl selektierte Baubestimmmung mit externem Link

      //--------------------------------------------------------------------------------------------------------------------------------
      // Daten für q-select unter q-table für zugeordnete Bauinformationen im ausgewählten Baustoff (Tab "Zugeordnete Bauinformationen")
      //(zu unterscheiden von zugeordneter Bauinformation in Baueigenschaft)
      //--------------------------------------------------------------------------------------------------------------------------------
      selectOptionsBauinformationenAusgewaehlterBaustoff: [], // Array, um ALLE Bauinformationen aufzunehmen als Options im QSelect
      // selectOptionsBauinformationenAusgewaehlterBaustoff wird aus der Datenbank geladen werden mit den entsprechenden Daten für ALLE Bauinformationen
      // Wird im Template nicht direkt referenziert, sondern dient zur Initialisierung von selectFilterOptionsBauinformationenAusgewaehlterBaustoff
      // Es könnte, falls das zuviele Werte sind, auch schon beim initialen Laden zusätzlich gefiltert werden
      // (z.B. mit Toggles auf den Enum-Werten für den bauinformationsTyp)
      selectModelBauinformationenAusgewaehlterBaustoff: [], // Model, enthält die aktuell im QSelect selektierten Objekte in einem Array
      // ACHTUNG: Muss ein Array sein bei Selection multiple bzw. :multiple=true!!!
      // Wird im Template referenziert per v-model="selectModelBauinformationenAusgewaehlterBaustoff" -->
      selectFilterOptionsBauinformationenAusgewaehlterBaustoff: [], // Gefilterte Options, enthält die aktuell im QSelect Dropdown zur Auswahl
      // stehenden gefilterten Objekte in einem Array - mit Filterung gemäß https://quasar.dev/vue-components/select#Example--Filtering-and-adding-to-menu
      // Wird im Template referenziert per :options="selectFilterOptionsBauinformationenAusgewaehlterBaustoff"
      // Wird anfangs initialisiert mit Werten aus selectOptionsBauinformationenAusgewaehlterBaustoff
      showHintSelectBauinformationenAusgewaehlterBaustoff: false, // NEU: Hint am q-select nur anzeigen, wenn das q-select Fokus hat -->

      //---------------------------------------------------------------------------------------------------------------------------------
      // Daten für q-select für zugeordnete Bauinformationen in ausgewählter Baueigenschaft (Tab "Auswahl")
      //(zu unterscheiden von zugeordneten Bauinformationen in Baustoff)
      //---------------------------------------------------------------------------------------------------------------------------------
      selectOptionsBauinformationenAusgewaehlteBaueigenschaft: [], // Array, um ALLE Bauinformationen aufzunehmen als Options im QSelect
      // selectOptionsBauinformationenAusgewaehlteBaueigenschaft wird aus der Datenbank geladen werden mit den entsprechenden Daten für ALLE Bauinformationen
      // Wird im Template nicht direkt referenziert, sondern dient zur Initialisierung von selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft
      // Es könnte, falls das zuviele Werte sind, auch schon beim initialen Laden zusätzlich gefiltert werden
      // (z.B. mit Toggles auf den Enum-Werten für den bauinformationsTyp)
      selectModelBauinformationAusgewaehlteBaueigenschaft: {}, // Model, enthält das aktuell im QSelect selektierte Objekt
      // ACHTUNG: Darf kein Array sein bei Selection :multiple=false, auch wenn die Doku dafür vage ist ("can be anything (string, Object, ...)")
      // Wird im Template referenziert per v-model="selectModelBauinformationAusgewaehlteBaueigenschaft" -->
      selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft: [], // Gefilterte Options, enthält die aktuell im QSelect Dropdown zur Auswahl
      // stehenden gefilterten Objekte in einem Array - mit Filterung gemäß https://quasar.dev/vue-components/select#Example--Filtering-and-adding-to-menu
      // Wird im Template referenziert per :options="selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft"
      // Wird anfangs initialisiert mit Werten aus selectOptionsBauinformationenAusgewaehlteBaueigenschaft
      showHintSelectBauinformationenAusgewaehlteBaueigenschaft: false, // NEU: Hint am q-select nur anzeigen, wenn das q-select Fokus hat -->

      //---------------------------------------------------------------------------------------------------------------------------------
      // Daten für q-select für zugeordnete Bauinformationen in neuer Baueigenschaft (Tab "Neu")
      //(zu unterscheiden von zugeordneten Bauinformationen in Baustoff)
      //---------------------------------------------------------------------------------------------------------------------------------
      selectOptionsBauinformationenNeueBaueigenschaft: [], // Array, um ALLE Bauinformationen aufzunehmen als Options im QSelect
      // selectOptionsBauinformationenAusgewaehlteBaueigenschaft wird aus der Datenbank geladen werden mit den entsprechenden Daten für ALLE Bauinformationen
      // Wird im Template nicht direkt referenziert, sondern dient zur Initialisierung von selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft
      // Es könnte, falls das zuviele Werte sind, auch schon beim initialen Laden zusätzlich gefiltert werden
      // (z.B. mit Toggles auf den Enum-Werten für den bauinformationsTyp)
      selectModelBauinformationNeueBaueigenschaft: {}, // Model, enthält das aktuell im QSelect selektierte Objekt
      // ACHTUNG: Darf kein Array sein bei Selection :multiple=false, auch wenn die Doku dafür vage ist ("can be anything (string, Object, ...)")
      // Wird im Template referenziert per v-model="selectModelBauinformationNeueBaueigenschaft" -->
      selectFilterOptionsBauinformationenNeueBaueigenschaft: [], // Gefilterte Options, enthält die aktuell im QSelect Dropdown zur Auswahl
      // stehenden gefilterten Objekte in einem Array - mit Filterung gemäß https://quasar.dev/vue-components/select#Example--Filtering-and-adding-to-menu
      // Wird im Template referenziert per :options="selectFilterOptionsBauinformationenNeueBaueigenschaft"
      // Wird anfangs initialisiert mit Werten aus selectOptionsBauinformationenNeueBaueigenschaft
      showHintSelectBauinformationenNeueBaueigenschaft: false, // NEU: Hint am q-select nur anzeigen, wenn das q-select Fokus hat -->

      //----------------------------------------------------------------------------------------------------------------------------------
      // Daten für q-select für Aufzählungswert in ausgewählter Baueigenschaft (Tab "Auswahl")
      //----------------------------------------------------------------------------------------------------------------------------------
      selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft: [], // Array, um ALLE definierten Optionen aufzunehmen als Options im QSelect
      // Anfangs leer!!! Nach Definition gefüllt mit den validen Optionen für den Aufzählungstyp, muss in Datenbank abgespeichert werden
      // und bei der weiteren Anzeige der Optionen für den Aufzählungswerts im q-select im Tab "Auswahl" dann verwendet werden.
      // Wird im Template nicht direkt referenziert, sondern dient zur Initialisierung von selectFilterOptionsAufzaehlungswerAusgewaehlteeBaueigenschaft
      selectModelAufzaehlungswertAusgewaehlteBaueigenschaft: [], // Model, enthält die aktuell im QSelect selektierten Werte in einem Array
      // ACHTUNG: Muss Array sein bei Selection :multiple=true
      // ACHTUNG: Wird im Template aktuell referenziert per v-model="selectModelAufzaehlungswertAusgewaehlteBaueigenschaft" -->
      // TODO: Alternativ könnte das v-model auch neueBaueigenschaft.aufzaehlungsWert sein, siehe Template oben!!!  -->
      selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft: [], // Gefilterte Options, enthält die aktuell im QSelect Dropdown zur Auswahl
      // stehenden gefilterten Objekte - mit Filterung gemäß https://quasar.dev/vue-components/select#Example--Filtering-and-adding-to-menu
      // Wird im Template referenziert per :options="selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft"
      // Wird anfangs initialisiert mit Werten aus selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft
      showHintSelectAufzaehlungswertAusgewaehlteBaueigenschaft: false, // NEU: Hint am q-select nur anzeigen, wenn das q-select Fokus hat -->

      //----------------------------------------------------------------------------------------------------------------------------------
      // Daten für q-select für Aufzählungswert in neuer Baueigenschaft (Tab "Neu")
      //----------------------------------------------------------------------------------------------------------------------------------
      selectOptionsAufzaehlungswertNeueBaueigenschaft: [], // Array, um ALLE definierten Optionen aufzunehmen als Options im QSelect
      // Anfangs leer!!! Nach Definition gefüllt mit den validen Optionen für den Aufzählungstyp, muss in Datenbank abgespeichert werden
      // und bei der weiteren Anzeige der Optionen für den Aufzählungswerts im q-select im Tab "Auswahl" dann verwendet werden.
      // Wird im Template nicht direkt referenziert, sondern dient zur Initialisierung von selectFilterOptionsAufzaehlungswertNeueBaueigenschaft
      selectModelAufzaehlungswertNeueBaueigenschaft: [], // Model, enthält die aktuell im QSelect selektierten Werte in einem Array
      // ACHTUNG: Muss Array sein bei Selection :multiple=true
      // ACHTUNG: Wird im Template aktuell referenziert per v-model="selectModelAufzaehlungswertNeueBaueigenschaft" -->
      // TODO: Alternativ könnte das v-model auch neueBaueigenschaft.aufzaehlungsWert sein, siehe Template oben!!!  -->
      selectFilterOptionsAufzaehlungswertNeueBaueigenschaft: [], // Gefilterte Options, enthält die aktuell im QSelect Dropdown zur Auswahl
      // stehenden gefilterten Objekte - mit Filterung gemäß https://quasar.dev/vue-components/select#Example--Filtering-and-adding-to-menu
      // Wird im Template referenziert per :options="selectFilterOptionsAufzaehlungswertNeueBaueigenschaft"
      // Wird anfangs initialisiert mit Werten aus selectOptionsAufzaehlungswertNeueBaueigenschaft
      showHintSelectAufzaehlungswertNeueBaueigenschaft: false // NEU: Hint am q-select nur anzeigen, wenn das q-select Fokus hat -->
    };
  }, // /data()

  //***=====================================================================================================================================
  methods: {
    updateBenutzer: function(newValueForSelectedKeyTreeBaustoffe) {
      //--------------------------------------------------------------------------------------------------------------------
      // Hilfsfunktion: Macht einen Update der Benutzereinstellungen des Benutzers
      // Vorlage: einstellungen.updateBenutzer()
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In updateBenutzer()");
      console.log(
        "globalStore.state.anmeldeDatenBenutzer.idBenutzer: ",
        globalStore.state.anmeldeDatenBenutzer.idBenutzer
      );
      const apiRoute =
        process.env.API +
        "/Benutzer/" +
        globalStore.state.anmeldeDatenBenutzer.idBenutzer;
      this.$axios
        .put(apiRoute, {
          // Schickt einen Put-Request an das Backend für Update des Benutzers
          // Die folgenden Felder werden nicht aktualisiert und können weggelassen werden:
          /*
        tablesPaginationRowsPerPage: this.localStore.state
          .einstellungenBenutzer.tablesPaginationRowsPerPage, // Das oben im Form per QSelect abgeänderte Feld
        // NEU: Zusätzlich das Feld farbSchema mitgeschicken:
        farbSchema: this.localStore.state
          .einstellungenBenutzer.farbSchema, // Das oben im Form per QSelect abgeänderte Feld
        // NEU: Zusätzlich das Feld treesWerteVererbungVorhandeneWerteUeberschreibenMitWertenAusEingefuegtemZweig mitschicken:
        treesWerteVererbungVorhandeneWerteUeberschreibenMitWertenAusEingefuegtemZweig: this
          .localStore.state.einstellungenBenutzer
          .treesWerteVererbungVorhandeneWerteUeberschreibenMitWertenAusEingefuegtemZweig,
          // NEU: Für #262 7usätzlich das Feld vorgabeWerteUeberschreibenVorhandeneWerte mitschicken:
        vorgabeWerteUeberschreibenVorhandeneWerte: this
          .localStore.state.einstellungenBenutzer
          .vorgabeWerteUeberschreibenVorhandeneWerte,
        */
          // Den Wert von selectedKeyTreeBaueinheiten aktualisieren aus dem neuen Wert im watch()
          selectedKeyTreeBaustoffe: newValueForSelectedKeyTreeBaustoffe // NEU: #400
          // selectedKeyTreeBaustoffe:
          // newValueForSelectedKeyTreeBaustoffe, // NEU: #400
        })
        .then(response => {
          // Was im Erfolgsfall zu tun ist:
          console.log(
            "Erfolg aus $axios.put, response.status: ",
            response.status
          ); // Status loggen
          // ACHTUNG: Die Aktualisierung von selectedKeyTreeBaueinheiten im local Storage und global Store wird außerhalb dieser Funktion erledigt!
          // Bei Erfolg hier keine Benutzernachricht, da sie stören würde (Speicherung soll im Hintergrund passieren)
        })
        .catch(error => {
          // Was im Fehlerfall zu tun ist:
          console.log("Error aus $axios.put, error: ", error); // Error loggen
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BENUTZER_AENDERUNG_FEHLER
          );
        });
    },

    getLazyLoadedOverview: function(idParent) {
      //----------------------------------------------------------------------------------------------------------------------------------
      // Durchwandert den Baum unterhalb von idParent und baut ein Dictionary der noch
      // nicht lazy-loaded nodes auf
      // Benötigt wird dies später um beim Reload das lazy-flag an den entsprechenden Knoten
      // richtig zu setzen
      let node = this.$refs.treeBaustoffe.getNodeByKey(idParent);
      let nonLazyNodes = {};
      let idCreatedNode;
      for (var el of this.getQuasarTreeAsList(node)) {
        if (el.lazy && el.children === undefined) {
          console.log("Found non-loaded Node with id", el._id);
          if (el._id === idParent) {
            console.log("Lazy load afterwards");
            nonLazyNodes[el._id] = false;
          }
        }
        if (!el.lazy) {
          nonLazyNodes[el._id] = false;
        }
      }
      return nonLazyNodes;
    },

    getQuasarTreeAsList(node_or_nodes) {
      //----------------------------------------------------------------------------------------------------------------------------------
      // Liefert den Baum (in Quasar-Darstellung) als Liste zurück
      if (node_or_nodes == null || node_or_nodes == null) {
        throw new Error("Argument-null-Exception");
      }
      let treeAsList = [];
      let my_index = 0;
      if (node_or_nodes.length) {
        for (var el of node_or_nodes) {
          // myStack.push(el)
          treeAsList.push(el);
        }
      } else {
        // myStack.push(node_or_nodes);
        treeAsList.push(node_or_nodes);
      }
      while (treeAsList.length > my_index) {
        // let iterNode = myStack.splice(0, 1)[0];
        let iterNode = treeAsList[my_index];
        if (iterNode.children != null) {
          for (let el of iterNode.children) {
            // myStack.push(el);
            treeAsList.push(el);
          }
        }
        my_index++;
      }
      return treeAsList;
    },

    specializedReload(treeData, node) {
      //----------------------------------------------------------------------------------------------------------------------------------
      // Führt den optimierten bzw. spezialiserten Reload aus
      // Damit dieser funktioniert, darf es keine strukturellen Änderungen am Baum gegeben haben (Löschen, hinzufügen)
      // Er ist zweigeteilt:
      // 1) Es werden die Knoten auf dem Pfad des Parameters node neu geladen und dann in den bisherigen Baum an die
      // Stelle ihrer alten Version geschrieben. Dabei wird auch node ersetzt
      // 2) Im anderen Teil werden die Knoten unterhalb von node neu geladen und dann an die neugeladene
      // Version von node (aus 1)) eingehängt
      try {
        let myCb = this.reloadNodesBelowTargetNodePreparation(node);
        var getNodesOnRootPathPromise = this.reloadNodesOnRootPathOfTargetNodeBackendCommunication(
          node
        );
        if (node.children != null) {
          var getNodesBelowPromise = this.reloadNodesBelowTargetNodeBackendCommunication(
            node
          );
          return Promise.all([
            getNodesOnRootPathPromise,
            getNodesBelowPromise
          ]).then(results => {
            console.log(results);
            let reloadedVersionOfNode = this.reloadNodesOnRootPathOfTargetNodeInsertIntoExistingTree(
              treeData,
              results[0].data
            );
            this.reloadNodesBelowTargetNodeInsertNodes(
              reloadedVersionOfNode,
              results[1].data,
              myCb
            );
          });
        } else {
          return getNodesOnRootPathPromise.then(results => {
            let reloadedVersionOfNode = this.reloadNodesOnRootPathOfTargetNodeInsertIntoExistingTree(
              treeData,
              results.data
            );
          });
        }
      } catch (error) {
        console.log("Error bei refreshTreeBaustoffe - error: ", error);
      }
    },

    reloadNodesOnRootPathOfTargetNodeBackendCommunication(node) {
      //----------------------------------------------------------------------------------------------------------------------------------
      // Lädt die Knoten auf dem Pfad aus dem Backend neu
      let query = node.path.split("#").join("&id=");
      let apiRoute = process.env.API + "/Baustoffe/Multiple" + "/?id=" + query;
      return this.$axios.get(apiRoute);
    },

    reloadNodesOnRootPathOfTargetNodeInsertIntoExistingTree(
      treeBeforeReload,
      reloadedNodes
    ) {
      //----------------------------------------------------------------------------------------------------------------------------------
      // Fügt die Knoten aus dem Array reloadedNodes in den Quasar-Baum treeBeforeReload
      // an ihrer ursprünglichen Stelle ein
      let selectedNodeAfterReload = reloadedNodes[reloadedNodes.length - 1];
      let currentStage = treeBeforeReload;
      reloadedNodes.forEach(n => {
        // Hilfsfunktion - HINWEIS: n ist ein node!
        var gefundenInCurrentStageIndex = currentStage.findIndex(
          arg => arg._id === n._id
        );
        if (gefundenInCurrentStageIndex !== -1) {
          console.log("Found");
          let splicedElement = currentStage.splice(
            gefundenInCurrentStageIndex,
            1,
            n
          )[0];
          if (n.baumKnotenTyp !== "Blattknoten") {
            n.lazy = true;
          }
          //--------------------------------------------------------------------------------------------------------
          // Knoten für Tests umbenennen:
          // n.baustoffBezeichnung = `Reloaded - ${n.baustoffBezeichnung}`; // Disabled von @ms
          if (n === selectedNodeAfterReload) {
            if (
              splicedElement.children !== null &&
              splicedElement.children !== undefined
            ) {
              n.lazy = false;
            }
          } else if (splicedElement.children !== undefined) {
            n.children = splicedElement.children;
            currentStage = n.children;
          }
        }
      });
      return selectedNodeAfterReload;
    },

    reloadNodesOnRootPathOfTargetNode(treeNodes, node) {
      //----------------------------------------------------------------------------------------------------------------------------------
      if (node != null) {
        this.reloadNodesOnRootPathOfTargetNodeBackendCommunication(node).then(
          result => {
            this.reloadNodesOnRootPathOfTargetNodeInsertIntoExistingTree(
              treeNodes,
              result.data
            );
          }
        );
      }
    },

    reloadNodesBelowTargetNodeBackendCommunication(node) {
      // Lädt den Kindbaum des gewählten Knotens (ohne diesen)
      // Dazu wird der bisher geladene Baum unter dem Knoten zuerstdurchwandert und als string der ids dargestellt
      // Am Backend werden diese Knoten aus der Datenbank geladen und wieder in die Quasar-Struktur gebracht
      if (node.children != null) {
        let treeStringRepresentation = this.getTreeStringRepresentation(
          node.children
        );
        let apiRoute = process.env.API + "/Baustoffe/Baum";
        return this.$axios.put(apiRoute, {
          treeInStringRepresentation: treeStringRepresentation
        });
      } else throw new Error("Node has no children");
    },

    reloadNodesBelowTargetNodePreparation(node) {
      //----------------------------------------------------------------------------------------------------------------------------------
      let nonLazyNodes = this.getLazyLoadedOverview(node._id); // Hier köntte nach entsprechender Anpassung auch node stehen
      console.log("Lazy-Loaded:", nonLazyNodes);
      let treeElementCallback = i => {
        // i.baustoffBezeichnung += "X"; DEBUG
        if (nonLazyNodes[i._id] !== undefined) {
          console.log("Setze auf Non-Lazy bei", i._id);
          i.lazy = false;
        } else {
          console.log("Setze auf Lazy bei", i._id);
          i.lazy = true;
        }
        /*
          if (i._id === idCreatedNode) {
            i.lazy = false
          }
          if (i._id === node._id) {
            i.lazy = false
          }
        */
      };
      return treeElementCallback;
    },

    reloadNodesBelowTargetNodeInsertNodes(
      node,
      reloadedTree,
      treeElementCallback
    ) {
      //----------------------------------------------------------------------------------------------------------------------------------
      // Fügt den Parameter reloadedTree (ein Quasar-Tree) unter node als dessen children ein
      // Zusätzlich wird treeElementCallback (eine Funktion) auf jedem Element von reloadedTree
      // ausgeführt.
      // Zurzeit wird dies für das setzen des Lazy-Flags verwendet
      for (let node_i of this.getQuasarTreeAsList(reloadedTree)) {
        treeElementCallback(node_i);
      }
      console.log("Setzte children");
      node.children = reloadedTree; // WICHTIG: Hier werden die neuen Daten gesetzt, alles andere sind nur nicht persistente Änderungen
      console.log(node);
    },

    reloadNodesBelowTargetNode(node) {
      //----------------------------------------------------------------------------------------------------------------------------------
      if (node != null) {
        let myCb = this.reloadNodesBelowTargetNodePreparation(node);
        if (node.children != null && node.children.length) {
          this.reloadNodesBelowTargetNodeBackendCommunication(node).then(
            result => {
              this.reloadNodesBelowTargetNodeInsertNodes(
                node,
                result.data,
                myCb
              );
            }
          );
        }
      }
    },

    getTreeStringRepresentation(arg) {
      //----------------------------------------------------------------------------------------------------------------------------------
      // Erstellt rekursiv eine String-Darstellung des Baums
      // Es handelt sich dabei um einen String, der die ids der Knoten sowie ihre Kind-Eltern-Beziehungen enthält
      // Die Darstellung wird am Backend verwendet, um die entsprechenden Knoten aus der Datenbank zu laden und den
      // Baum für die Quasar-Darstellung wieder aufzubauen
      // Jede id wird mittels eines | beendet
      // Nach jeder Angabe einer id folgen die direkten Kinder dieses Knotens
      // Der Abschluss einer Kindergruppe wird ebenfalls durch ein | gekennzeichnet
      // Beispiel: tree:
      // let treeExampel = {_id: 1, children: [{_id: 1a}, {_id: 1b, children: [{_id: 1b1}], {_id: 1c}}]}
      // entspricht
      // <1><1a>|<1b><1b1>||<1c>||
      console.log("In getTreeStringRepresentation", arg);
      if (arg.length) {
        let result_array = arg.map(i => this.getTreeStringRepresentation(i));
        let result_string = "";
        return result_array.join(""); // + "|"
      } else {
        let result = "<" + arg._id + ">";
        let childrenResult = "";
        if (arg.children !== undefined && arg.children.length) {
          arg.children.forEach(element => {
            childrenResult =
              childrenResult + this.getTreeStringRepresentation(element);
          });
        }
        console.log("result", result + childrenResult + "|");
        return result + "" + childrenResult + "|";
      }
    },

    aktiviereBaueigenschaftsProfilAnBaustoff(profilBezeichnung, node) {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - aktiviert das Baueigenschaftsprofil mit der durch den Parameter profilBezeichnung
      // bestimmten Bezeichnung an dem durch den Parameter node spezifizierten
      // Knoten (Ziel-Bauustoff) im Baustoffbaum
      // TODO XXXXXX: Es sollte schon vorher per Methode baueigenschaftsProfilIstAktiviertAnNodeTreeBaustoffe(profilBezeichnung, node)
      // ermittelt worden, dass das betreffende Baueigenschaftsprofil NCIHT aktiviert ist an dem Baustoff
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In aktiviereBaueigenschaftsProfilAnBaustoff()");
      let idZielBaustoff = node._id;
      // Zunächst muss die Id des Baueigenschaftsprofils mit der profilBezeichnung ermittelt werden per API mit Query:
      let apiRoute =
        process.env.API +
        "/Baueigenschaftsprofile/Query/" +
        "?baueigenschaftsProfilBezeichnung=" +
        profilBezeichnung;
      this.$axios
        .get(apiRoute)
        .then(baueigenschaftsProfile => {
          // ACHTUNG: Es kommt bei Erfolg ein Objekt, das einen Unter-Array data der Länge 0 enthält, zurück!
          // console.log("baueigenschaftsProfile: ", baueigenschaftsProfile);
          let idbaueigenschaftsProfil = baueigenschaftsProfile.data[0]._id; // Id des gesuchten Baueigenschaftsprofils
          console.log(
            "Vor API Request für Profilaktivierung - idBaueigenschaftsProfil: ",
            idbaueigenschaftsProfil
          );
          // Nun damit die Profilaktivierung veranlassen per API:
          apiRoute =
            process.env.API +
            "/Baustoffe/" +
            idZielBaustoff +
            "/Baueigenschaftsprofil/Aktivierungszustand";
          this.$axios
            .put(apiRoute, {
              // Body - in req.body.idProfil wird die Id des zu aktivierenden Baueigenschaftsprofils übergeben
              idProfil: idbaueigenschaftsProfil,
              aktivierenNichtDeaktivieren: true,
              vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore.state
                .einstellungenBenutzer.vorgabeWerteUeberschreibenVorhandeneWerte // #357
            })
            .then(response => {
              console.log(
                "Erfolg in API Response für Aktivierung Baueigenschaftsprofil"
              );
              // Nun noch den Tree refreshen:
              this.refreshTreeBaustoffe();
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUSTOFF_ERFOLG
              );
            })
            .catch(error => {
              console.log(
                "Error in API Response für Aktivierung Baueigenschaftsprofil - error: ",
                error
              );
              // Nun noch den Tree refreshen:
              this.refreshTreeBaustoffe();
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUSTOFF_FEHLER
              );
            });
        })
        .catch(error => {
          console.log(
            "Error in API Response für Query Baueigenschaftsprofil - error: ",
            error
          );
          // Nun noch den Tree refreshen:
          this.refreshTreeBaustoffe();
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_LESEN_FEHLER
          );
        });
    },

    aktiviereBaueigenschaftsProfilTransitivAnBaustoff(profilBezeichnung, node) {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - aktiviert das Baueigenschaftsprofil mit der durch den Parameter profilBezeichnung
      // bestimmten Bezeichnung an dem durch den Parameter node spezifizierten
      // Knoten (Ziel-Baustoff) sowie an allen dessen Kind- und Kindeskindknoten im Baustoffbaum
      // TODO XXXXXX: Es sollte schon vorher per Methode baueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheite(profilBezeichnung, node)
      // ermittelt worden, dass das betreffende Baueigenschaftsprofil NCIHT aktiviert ist an dem Baustoff
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In aktiviereBaueigenschaftsProfilTransitivAnBaustoff()");
      let idZielBaustoff = node._id;
      // Zunächst muss die Id des Baueigenschaftsprofils mit der profilBezeichnung ermittelt werden per API mit Query:
      let apiRoute =
        process.env.API +
        "/Baueigenschaftsprofile/Query/" +
        "?baueigenschaftsProfilBezeichnung=" +
        profilBezeichnung;
      this.$axios
        .get(apiRoute)
        .then(baueigenschaftsProfile => {
          // ACHTUNG: Es kommt bei Erfolg ein Objekt, das einen Unter-Array data der Länge 0 enthält, zurück!
          // console.log("baueigenschaftsProfile: ", baueigenschaftsProfile);
          let idbaueigenschaftsProfil = baueigenschaftsProfile.data[0]._id; // Id des gesuchten Baueigenschaftsprofils
          console.log(
            "Vor API Request für transitive Profilaktivierung - idBaueigenschaftsProfil: ",
            idbaueigenschaftsProfil
          );
          // Nun damit die Profilaktivierung veranlassen per API:
          apiRoute =
            process.env.API +
            "/Baustoffe/" +
            idZielBaustoff +
            "/Baueigenschaftsprofil/Aktivierung/Zweig";
          this.$axios
            .put(apiRoute, {
              // Body - in req.body.idProfil wird die Id des zu aktivierenden Baueigenschaftsprofils übergeben
              idProfil: idbaueigenschaftsProfil,
              vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore.state
                .einstellungenBenutzer.vorgabeWerteUeberschreibenVorhandeneWerte // #357
            })
            .then(response => {
              console.log(
                "Erfolg in API Response für transitive  Aktivierung Baueigenschaftsprofil"
              );
              // Nun noch den Tree refreshen:
              this.refreshTreeBaustoffe();
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUSTOFF_ERFOLG
              );
            })
            .catch(error => {
              console.log(
                "Error in API Response für transitive Aktivierung Baueigenschaftsprofil - error: ",
                error
              );
              // Nun noch den Tree refreshen:
              this.refreshTreeBaustoffe();
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUSTOFF_FEHLER
              );
            });
        })
        .catch(error => {
          console.log(
            "Error in API Response für Query Baueigenschaftsprofil - error: ",
            error
          );
          // Nun noch den Tree refreshen:
          this.refreshTreeBaustoffe();
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_LESEN_FEHLER
          );
        });
    },

    aktiviereElternProfileAnBaustoff() {
      //----------------------------------------------------------------------------------------------------------------------------------
      // NEU: Aktiviert die am Elternknoten eines Baustoffs aktivierten Baueigenschaftsprofile auch am Baustoff selbst
      //----------------------------------------------------------------------------------------------------------------------------
      const apiRoute =
        process.env.API +
        "/Baustoffe/" +
        this.selectedKeyTreeBaustoffe +
        "/Baueigenschaftsprofil/Aktivierung/Elternprofile";
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      console.log("Vor Emit to leave room 'roomBaustoffe'");
      this.$socket.emit("leaveRoom", {
        room: "roomBaustoffe"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBaustoffe'");
      //=========================================================================================================================================
      // console.log("Vor put-Request - vorgabeWerteUeberschreibenVorhandeneWerte: ", this.localStore.state.einstellungenBenutzer.vorgabeWerteUeberschreibenVorhandeneWerte)
      this.$axios
        .put(apiRoute, {
          // Schickt einen Put-Request an das Backend für Profilaktivierung mit Elternprofilen
          vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore.state
            .einstellungenBenutzer.vorgabeWerteUeberschreibenVorhandeneWerte // #357
        })
        .then(response => {
          // Was im Erfolgsfall zu tun ist:
          console.log(
            "Erfolg aus $axios.put, response.status: ",
            response.status
          ); // Status loggen
          // Nun noch den Tree refreshen:
          this.refreshTreeBaustoffe();
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_ELTERNPROFILE_AKTIVIERUNG_AN_BAUSTOFF_ERFOLG
          );
        })
        .catch(error => {
          // Was im Fehlerfall zu tun ist:
          console.log("Error aus $axios.put, error: ", error); // Error loggen
          // Nun noch den Tree refreshen:
          this.refreshTreeBaustoffe();
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_ELTERNPROFILE_AKTIVIERUNG_AN_BAUSTOFF_FEHLER // TODO: Vorläufig
          );
        });
    },

    showZugeordneteBaueigenschaftsProfileAusgewaehlterBaustoff: function(node) {
      //==================================================================================================================================================
      // TODO XXXXXX: hierarchieAllerBaueigenschaftsprofile aus baueinheiten.vue muss angepasst werden für Profile für Baustoffe (bisher keine definiert!)
      // Code unten einstweilen vorläufig disabled
      //==================================================================================================================================================
      // NEU: Funktion, die für Tooltip-Anzeige am Knoten im Tree die aktivierten Baueigenschaftsprofile am übergebenen node im Baum anzeigt:
      // Verwandle zuerst diesen Array of Objects [ {"baueigenschaftsProfilBezeichnung: ": "Baueinheit > Bauvorhaben"}, .., {}] in einen einfachen Array of Properties
      // Vorlage: https://stackoverflow.com/questions/19590865/from-an-array-of-objects-extract-value-of-a-property-as-array
      let aktivierteBaueigenschaftsProfilBezeichnungen = node.zugeordneteBaueigenschaftsProfile.map(
        a => a.referenzAufBaueigenschaftsProfil.baueigenschaftsProfilBezeichnung // NEU: Für #272/#515
      );
      // Mapping auf Hierarchie aller Baueigenschaftsprofile (aus beinheiten.vue) vorläufig disabled:
      /*
      // Filtere nun aus dem zentralen Array hierarchieAlleBaueigenschaftsProfile die an node aktivierten Profile heraus (unter Beibehaltung der Reihenfolge)
      // Vorlage: https://stackoverflow.com/questions/19957348/remove-all-elements-contained-in-another-array
      let hierarchieAktivierterBaueigenschaftsprofile = this.hierarchieAllerBaueigenschaftsProfile.filter(
        // Konstanter Array hierarchieAllerBaueigenschaftsProfile definiert die Hierarchie der Baueigenschaftsprofile, links im Array entspricht "oben", rechts "unten"
        el => aktivierteBaueigenschaftsProfilBezeichnungen.includes(el)
      );
      if (hierarchieAktivierterBaueigenschaftsprofile.length === 0) return "Keine"
      else return hierarchieAktivierterBaueigenschaftsprofile.toString().replace(/,/g, ", ") // Replace all occurences of  ", " by ", "
      // https://stackoverflow.com/questions/5865257/finding-a-substring-and-inserting-another-string
      */
      // Stattdessen:
      if (aktivierteBaueigenschaftsProfilBezeichnungen.length === 0) {
        return "Keine";
      } else {
        return aktivierteBaueigenschaftsProfilBezeichnungen
          .toString()
          .replace(/Baustoff > /g, "") // NEU: Für #375 - Präfix "Baustoff > " an allen Profilen hier im Tooltip entfernen
          .replace(/,/g, ", "); // Replace all occurences of  ", " by ", "
      }
    },

    doNothing: function() {
      //------------------------------------------------------------------------------------------------------------------------------
      // Funktion doNothing
      // @input Test-Methode für q-popup-edit mit value Prop - tut nichts
    },

    //-------------------------------------------------------------------------------------------------------------------------------
    // Funktion wechselndeTestMethode
    // Testmethode, wird im Tab "Sonstiges" über Button aufgerufen
    wechselndeTestMethode: function() {},

    //======================================================================================================================================
    // NEU: Methoden für Kontextmenü zum Kopieren oder Verschieben eines vorher zum Verschieben oder Kopieren markierten Zweigs im Bauvorhabenbaum
    //--------------------------------------------------------------------------------------------------------------------------------

    collectIdsInChildrenOfWurzelZuBewegenderZweig: function(node, ids) {
      //---------------------------------------------------------------------------------------------------------------------
      // Rekursive Hilfsfunktion zum Sammeln der ids aller Nodes in children-Objekten in Variable idsImMarkiertenZweig
      console.log(
        `In rekursiver Hilfsfunktion collectIdsInChildrenOfWurzelZuBewegenderZweig() ${ids}`
      );

      if (node.children != null) {
        for (var i = 0; i < node.children.length; i++) {
          console.log("node.children[", i, "]._id: ", node.children[i]._id);
          ids.push(node.children[i]._id);
          this.collectIdsInChildrenOfWurzelZuBewegenderZweig(
            node.children[i],
            ids
          );
        }
      } // else {} // Keine children, return
    },

    knotenIstWurzelTreeBaustoffe: function(idOfNode) {
      //----------------------------------------------------------------------------------------------------------------------------
      // NEU: Funktion, die berechnet, ob ein Knoten der Wurzelknoten im Baustoffbaum ist
      // Parameter: idOfNode - key (id) des zu prüfenden Knotens
      // Könnte über fehlendes parent-Feld abgeprüft werden (Test auf Existenz wie
      // in knotenIstElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaustoffe()
      // Performanter aber über Prüfung des Felds baumKnotenTyp
      //----------------------------------------------------------------------------------------------------------------------------
      // console.log("In knotenIstWurzelTreeBaustoffe()"); // Disabled, da sehr oft aufgerufen im Log
      if (idOfNode !== undefined && idOfNode !== null) {
        // Ansonsten befindet sich der durch idOfNode identifizierte Knoten irgendwo im Baum, und wir müssen feststellen, ob
        // es sich um den Wurzelknoten handelt
        // Mittels QTree API getNodeByKey kann auf dessen Node inklusive seiner Kindknoten (im verschachtelten Unterfeld children) zugegriffen werden:
        const node = this.$refs.treeBaustoffe.getNodeByKey(idOfNode);
        // ACHTUNG: node ist eine lokale Hilfsvariable, KEIN .this verwenden!!!
        // console.log("node: ", node); // ACHTUNG: Kein .this verwenden!
        if (
          node.baumKnotenTyp === "Wurzelknoten" ||
          node.baumKnotenTyp === "Rohstoffunterbaumwurzelknoten"
        ) {
          // NEU: Hier auch Rohstoffunterbaumwurzel disablen für Kopieren/Verschieben - die Knoten darunter können dagegen bewegt werden
          return true;
        } else {
          return false;
        }
      } else {
        return false;
      }
    },

    knotenIstElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaustoffe: function(
      idOfNode
    ) {
      //----------------------------------------------------------------------------------------------------------------------------
      // NEU: Funktion, die berechnet, ob ein Knoten der Elternknoten des zum Bewegen (d.h. Verschieben oder Kopieren) markierten Zweig
      // im Bauvorhabenbaum ist
      // Parameter: idOfNode - key (id) des zu prüfenden Knotens
      //----------------------------------------------------------------------------------------------------------------------------
      // let idsImMarkiertenZweig = []; // Array zum Sammeln aller ids im markierten Zweig, lokale Variable, KEIN .this verwenden!!!
      console.log(
        "In knotenIstElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaustoffe()"
      );
      if (
        idOfNode !== undefined &&
        idOfNode !== null &&
        this.idWurzelZuBewegenderZweig !== undefined &&
        this.idWurzelZuBewegenderZweig !== null
      ) {
        // Ansonsten befindet sich der durch idOfNode identifizierte Knoten irgendwo im Baum, und wir müssen zuerst den markierten Knoten identifizieren
        // Dieser wird in Variable idWurzelZuBewegenderZweig in data() gespeichert
        console.log(
          "idWurzelZuBewegenderZweig: ",
          this.idWurzelZuBewegenderZweig
        );

        // Mittels QTree API getNodeByKey kann auf dessen Node inklusive seiner Kindknoten (im verschachtelten Unterfeld children) zugegriffen werden:
        const wurzelZuBewegenderZweig = this.$refs.treeBaustoffe.getNodeByKey(
          this.idWurzelZuBewegenderZweig
        );
        // ACHTUNG: wurzelZuBewegenderZweig ist eine lokale Hilfsvariable, KEIN .this verwenden!!!
        console.log("wurzelZuBewegenderZweig: ", wurzelZuBewegenderZweig); // ACHTUNG: Kein .this verwenden!

        // NEU: Test auf Existenz des parent-Felds (dieses ist bei Wurzelknoten nicht vorhanden, allerdings sollte Auswahl des Wurzelknotens für
        // Bewegen anderweitig unterbunden werden)
        if (
          wurzelZuBewegenderZweig.hasOwnProperty("parent") &&
          wurzelZuBewegenderZweig.parent !== null
        ) {
          const idOfElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaustoffe =
            wurzelZuBewegenderZweig.parent;
          // console.log("idOfElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaustoffe: , idOfElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaustoffe");
          // console.log("idOfNode: ", idOfNode);
          // Nun feststellen, ob der zu prüfende Knoten idOfNode identisch ist mit diesem Elternknoten, und Resultat zurückgeben:
          if (
            idOfElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaustoffe ===
            idOfNode // ACHTUNG: Kein .this verwenden!
          ) {
            return true;
          } else {
            return false;
          }
        } else {
          // Markierter Zweig ist Wurzelknoten, sollte unterbunden werden, allerdings hat dieser dann keinen Elternknoten, und damit
          // sollte false returned werden
          return false;
        }
      } else {
        return false; // Vue computed Funktion muss immer Wert zurückliefern!
      }
    },

    knotenIstImFuerBewegenMarkiertenZweigTreeBaustoffe: function(idOfNode) {
      //----------------------------------------------------------------------------------------------------------------------------
      // NEU: Funktion, die berechnet, ob ein Knoten in dem zum Bewegen (d.h. Verschieben oder Kopieren) markierten Zweig im Bauvorhabenbaum ist
      // Parameter: idOfNode - key (id) des zu prüfenden Knotens
      //----------------------------------------------------------------------------------------------------------------------------
      let idsImMarkiertenZweig = []; // Array zum Sammeln aller ids im markierten Zweig, lokale Variable, KEIN .this verwenden!!!
      console.log("In knotenIstImFuerBewegenMarkiertenZweigTreeBaustoffe()");
      if (
        idOfNode !== undefined &&
        idOfNode !== null &&
        this.idWurzelZuBewegenderZweig !== undefined &&
        this.idWurzelZuBewegenderZweig !== null
      ) {
        // Ansonsten befindet sich der durch idOfNode identifizierte Knoten irgendwo im Baum, und wir müssen zuerst den markierten Knoten identifizieren
        // Dieser wird in Variable idWurzelZuBewegenderZweig in data() gespeichert
        console.log(
          "idWurzelZuBewegenderZweig: ",
          this.idWurzelZuBewegenderZweig
        );

        // Mittels QTree API getNodeByKey kann auf dessen Node inklusive seiner Kindknoten (im verschachtelten Unterfeld children) zugegriffen werden:
        const wurzelZuBewegenderZweig = this.$refs.treeBaustoffe.getNodeByKey(
          this.idWurzelZuBewegenderZweig
        );
        // ACHTUNG: wurzelZuBewegenderZweig ist eine lokale Hilfsvariable, KEIN .this verwenden!!!
        // Das ggf. vorhandene Unterfeld children von wurzelZuBewegenderZweig ist ein verschachtelter Array aller Kinder des Wurzelknotens des markierten Zweigs,
        // potentiell auch leer, wenn der Wurzelknoten des markierten Zweigs keine Kindknoten hat
        console.log("wurzelZuBewegenderZweig: ", wurzelZuBewegenderZweig); // ACHTUNG: Kein .this verwenden!

        console.log(
          "Vor rekursiver Sammlung der ids in childrenOfWurzelZuBewegenderZweig()"
        );
        this.collectIdsInChildrenOfWurzelZuBewegenderZweig(
          wurzelZuBewegenderZweig,
          idsImMarkiertenZweig
        );
        // Rekursive Hilfsfunktion, sammelt ids aller Kinder im Array idsImMarkiertenZweig - wenn children leer ist, bleibt auch dieser Array leer!
        // Es muss nun idWurzelZuBewegenderZweig zusätzlich auf den Array gepushed werden:
        idsImMarkiertenZweig.push(this.idWurzelZuBewegenderZweig);
        console.log(
          "idsImMarkiertenZweig nach Rekursion: ",
          idsImMarkiertenZweig
        ); // ACHTUNG: Kein .this verwenden!

        // Nun mit Array-Funktion includes feststellen, ob der zu prüfende Knoten idOfNode in diesem Array ist, und Resultat zurückgeben:
        if (
          idsImMarkiertenZweig.includes(idOfNode) // ACHTUNG: Kein .this verwenden!
        ) {
          return true;
        } else {
          return false;
        }
      } else {
        return false;
      } // Vue computed Funktion muss immer Wert zurückliefern!
    },

    bewegeZweig: function(idZielElternKnoten, kopierenNichtVerschieben) {
      //----------------------------------------------------------------------------------------------------------------------------------
      // Funktion zum Verschieben oder Kopieren des vorher zum Verschieben oder Kopieren ausgewählten Zweigs unter einen neuen Elternknoten
      // Die id von dessen Wurzel wird gemerkt in der Variablen idWurzelZuBewegenderZweig
      // Parameter:
      // - idZielElternKnoten - id des neuen Elternknotens, unter dem der Zweig eingefügt werden soll
      // - kopierenNichtVerschieben: Boolean - zeigt an, ob der Zweig verschoben oder kopiert werden soll
      //   Wenn "false", wird der originale Zweig nach dem Einfügen unter dem neuen Elternknoten unter dem bisherigen Elternknoten gelöscht
      //----------------------------------------------------------------------------------------------------------------------------------
      const sleepTime = 2000; // Millisekunden
      function sleep(milliseconds) {
        // Hilsfunktion für sleep unten
        return new Promise(resolve => setTimeout(resolve, milliseconds));
      }
      //-------------------------------------------------------------------------------
      console.log("In bewegeZweig()");
      const apiRoute =
        process.env.API +
        "/Baustoffe/" +
        this.idWurzelZuBewegenderZweig +
        "/Zweig";
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      console.log("Vor Emit to leave room 'roomBaustoffe'");
      this.$socket.emit("leaveRoom", {
        room: "roomBaustoffe"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBaustoffe'");

      const ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt =
        this.localStore.state.einstellungenBenutzer
          .treesWerteVererbungVorhandeneWerteUeberschreibenMitWertenAusEingefuegtemZweig ===
        true; // ? true : false // Zum besseren Verständnis, aber eigentlich unnötig
      console.log(
        "Vor Aufruf von Axios put für Bewegen Zweig im Baum - Boolean-Wert im Body-Feld ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt: ",
        ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt
      );
      //=========================================================================================================================================
      this.$axios // Schickt einen Put-Request an das Backend für Baustoffe, um den Zweig zu kopieren
        .put(apiRoute, {
          // body:
          idZielElternKnoten: idZielElternKnoten,
          kopierenNichtVerschieben: kopierenNichtVerschieben,
          ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt: ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt // Die lokale Variable von oben
        })
        .then(async response => {
          // Hier async wegen await unten
          // Was im Erfolgsfall zu tun ist:
          console.log(
            "Erfolg aus $axios.put, response.status: ",
            response.status
          ); // Status loggen

          // NEU: Return-Parameter vom API für die id des neu erzeugten Wurzelknotens des kopierten/verschobenen Zweigs:
          console.log(
            "idNeueWurzelZuBewegenderZweig: ",
            response.data.idNeueWurzelZuBewegenderZweig
          );
          //=====================================================================================================================================
          // Alternative 1 - ENABLED: refreshTreeBaustoffe() aufrufen
          // Funktionierte ursprünglich nicht immer zuverlässig, z.B. beim Verschieben eines Zweigs im Baum
          // Außerdem wird das Icon für den Baumknotentyp nach dem Verschieben eines Zweigs nicht aktualisiert (wenn er keine Geschwister hatte)
          // Zusätzlich zu erledigen bei dieser Alternative: Expandieren der Knoten im bewegten Zweig, siehe Code unten
          // Aktuell ist diese Alternative enabled - funktioniert stabil, Tests aller Kombinationen in Testmatrix in bim-click-design-internals.md
          // Z.B. frühere Restfehler:
          // - Der Baumknotentyp der Wurzel eines verschobenen Zweigs wird eventuell als Blatt statt als Verzweigung angezeigt
          // - Die eigentlich expandierbare Wurzel eines expandierten, kopierten Zweigs wird als nicht expandierbar angezeigt
          // Nach Refresh war der Baum aber stets in Ordnung!
          // Diese Fehler sind mittlerweile durch speziellen, neuen Code in refreshTreeBaustoffe() gefixed!
          //----------------------------------------------------------------------------------------------------------------------------------------
          // this.refreshTreeBaustoffe(); // ALT: Nun den gesamten Baum neu laden mit dieser speziellen Funktion
          //---------------------------------------------------------------------------------------------------------
          // NEU: #111 - Zielelternknoten des bewegten Zweigs expandieren - NACH await des Refreshs des Baums.
          // HINWEIS: Da der Refresh asynchron abläuft, ist await notwendig!
          console.log("Vor await refreshTreeBaustoffe()");
          this.idWurzelZuBewegenderZweig = null; // Zurücksetzen, sonst wird weiter das Icon für "markiert" angezeigt
          // ACHTUNG: Dieses Zurücksetzen als Fix für #325 von Position NACH dem Aufruf VOR den Aufruf von reloadTreeAllgemein() verschoben!
          await this.refreshTreeBaustoffe(); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
          console.log("Nach await refreshTreeBaustoffe()");
          this.$refs.treeBaustoffe.setExpanded(idZielElternKnoten, true);
          // this.idWurzelZuBewegenderZweig = null; // Zurücksetzen, sonst wird weiter das Icon für "markiert" angezeigt
          // Ursprüngliche Position des Zurücksetzens vor der Verschiebung als Fix für #325!
          //------------------------------------------------------------------------------------------------------------------
          // ALT: Es folgen diverse experimentelle Versuche, die mangels obigem await refreshTreeBaustoffe() diverse
          // Timing-Probleme hatten!
          // ACHTUNG: Erst NACH refreshTreeBaustoffe() zurücksetzen - denn der bisherige Wert wird in refreshTreeBaustoffe() gebraucht!!!
          // ACHTUNG: In früheren Codeständen musste dieses Reset von idWurzelZuBewegenderZWeig unbedingt vor der dem Aktualisieren des Trees passieren, sonst failten
          // die auf idWurzelZuBewegenderZweig im Template basierenden Funktionen zum Disabling von markierten
          // Knoten in den QTree Kontextmenüs (damit man nicht nach Knoten im markierten Zweig kopieren/verschieben kann)
          //----------------------------------------------------------------------------------------------------------------------------------------
          // Variante 1: expandedKeysTreeBaustoffe verändern - disabled, da es nicht funktioniert
          // this.expandedKeysTreeBaustoffe.push(idZielElternKnoten, response.data.idNeueWurzelZuBewegenderZweig);
          // Dies sollte zunächst nur den Elternknoten des verschobenen/kopierten Zweigs expandieren
          // Später auch noch den neuen Wurzelknoten des verschobenen/kopierten Zweigs hinzugefügt
          // ACHTUNG: Dies bewirkt allerdings leider für keinen der beiden Knoten eine Expansion, wahrscheinlich wegen Konflikt mit Lazy Loading
          // console.log("expandedKeysTreeBaustoffe: ", this.expandedKeysTreeBaustoffe);
          //----------------------------------------------------------------------------------------------------------------------------------------
          // Variante 2 - aktuell ebenfalls disabled: Per QTree API setExpanded() aufrufen für bestimmte Knoten, z.B. den neuen Elternknoten
          // ACHTUNG: Funktioniert auf Heroku nur mit sehr langer Sleep-Zeit (mehrere Sekunden) - daher auch wieder disabled!!!
          // console.log("Vor sleep(sleepTime), um asynchrones Ende von refreshTreeBaustoffe() abzuwarten - sleepTime: ", sleepTime, "ms");
          // await sleep(sleepTime); // ACHTUNG: Sleep erforderlich, da sonst wegen Noch-Nicht-Completion von refreshTreeBaustoffe() oben Fehler im Log auftreten können, dass
          //                         // setExpanded() für Knoten gemacht wird, die noch nicht fertiggestellt sind bzgl. lazy-Flag!!!
          // this.$refs.treeBaustoffe.getNodeByKey(idZielElternKnoten).lazy = true; // Sicherheitshalber - Flag lazy wird in refreshTreeBaustoffe() auf true gesetzt!
          // ACHTUNG: Das Flag lazy wird auch in refreshTreeBaustoffe() auf true gesetzt! Per Tests ist es hier für Knoten, die vor dem Bewegen Blattknoten waren,
          //          erst dann true, wenn refreshTreeBaustoffe() vollständig durchgelaufen ist...was aktuell nur durch den Workaround mit sleep() erzielt wird.
          //          Falls refreshTreeBaustoffe() noch asynchron aktiv ist, und den neuen Elternknoten noch nicht bearbeitet hat, wird hier lazy mit false
          //          angezeigt, d.h. der alte Werte!!! Daher wird es hier sicherheitshalber noch einmal auf true gesetzt!
          // console.log("Vor setExpanded() für neuen Zielelternknoten - lazy: ", this.$refs.treeBaustoffe.getNodeByKey(idZielElternKnoten).lazy);
          // this.$refs.treeBaustoffe.setExpanded(idZielElternKnoten, true); // Funktioniert nach den Tests (siehe Testmatrix in bim-click-design-internals.md),
          //                                                                 // allerdings auf Heroku nur mit sehr langer Sleep-Zeit (mehrere Sekunden)
          //----------------------------------------------------------------------------------------------------------------------------------------
          // Nun setExpanded() auch für den neuen Wurzelknoten des bewegten Zweigs aufrufen, um diesen zumindest auf der obersten Ebene zu expandieren
          // Funktionierte in ersten Code-Versionen noch nicht, funktioniert jetzt zwar meistens,  im Zusammenspiel mit überarbeiteter Methode refreshTreeBaustoffe(),
          // die das lazy-Flag für den neu eingefügten Wurzelknoten des bewegten Zweigs korrekt setzt,
          // ist aber abhängig von der Länge des Sleep Timings und daher sehr fragil - daher einstweilen DISABLED!!!
          //============================================================================================================================================================
          // ACHTUNG: Bei zu kurzem Sleep ist im Log sichtbar, dass refreshTreeBaustoffe() noch nicht fertig ist, es kommt dann ein Error, der durch setExpanded() ausgelöst ist:
          // "Error aus $axios.put, error:  "TypeError: Cannot read property 'lazy' of undefined"
          // bzw. durch den .catch ganz unten ein Error: TypeError: Cannot read property 'status' of undefined"
          // await sleep(sleepTime); // ACHTUNG: Sleep erforderlich, da sonst wegen Noch-Nicht-Completion von refreshTreeBaustoffe() oben Fehler im Log auftreten können, dass
          // setExpanded() für Knoten gemacht wird, die noch nicht fertiggestellt sind bzgl. lazy-Flag!!!
          // this.$refs.treeBaustoffe.getNodeByKey(idNeueWurzelZuBewegenderZweig).lazy = true; // Sicherheitshalber - Flag lazy wird in refreshTreeBaustoffe() auf true gesetzt!
          // console.log("Vor setExpanded() für neue Wurzel des bewegten Zweigs - lazy: ", this.$refs.treeBaustoffe.getNodeByKey(response.data.idNeueWurzelZuBewegenderZweig).lazy);
          // this.$refs.treeBaustoffe.setExpanded(response.data.idNeueWurzelZuBewegenderZweig, true);
          //=====================================================================================================================================
          // Alternative 2 - DISABLED nodesTreeBaustoffe resetten und loadRootNodeTreeBaustoffe() aufrufen
          // Diese Alternative funktioniert im Prinzip, aber nur mit fragilen Workarounds (Sleeps gegen Timing Probleme - siehe unten)
          // Aktuell disabled zugunsten von Alternative 1 oben
          // ====================================================================================================================================
          // ACHTUNG: Der Code für Alternative 2 wird hier in baustoffe.vue weggelassen, er ist nur in Baustoffe.vue in disabled Form vorhanden!
          // ====================================================================================================================================
          if (kopierenNichtVerschieben) {
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_ZWEIG_KOPIEREN_ERFOLG
            );
          } else {
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_ZWEIG_VERSCHIEBEN_ERFOLG
            );
          }
        })
        .catch(error => {
          // Was im Fehlerfall zu tun ist:
          console.log("Error aus $axios.put, error: ", error); // Error loggen
          this.idWurzelZuBewegenderZweig = null; // Zurücksetzen, sonst wird weiter das Icon angezeigt
          this.refreshTreeBaustoffe();
          //--------------------------------------------------------------------------------------------------------------------------------------------
          // ACHTUNG: Bei Exceptions im .then-Code NACH dem Empfang Response vom API wird ebenfalls dieser Catch-Block ausgeführt,
          // allerdings ist dann error.response undefined - deshalb unten vorsorglich noch Prüfungen dafür hier eingebaut!
          if (
            typeof error !== "undefined" &&
            typeof error.response !== "undefined"
          ) {
            // Hier nun den Fall Status 403 abhandeln (Baustoffbezeichnung nicht eindeutig unter dem neuen Elternknoten)
            // Kommt nur vor, wenn 100-mal ein Zweig mit derselben Wurzel-Bezeichnung kopiert/verschoben wird,
            // da das Backend bei Namenskollisonen unter dem neuen Elternknoten ein eindeutiges Suffix " - Kopie (n)"
            // an die Bezeichnung anhängt, bis n=100 erreicht ist
            if (error.response.status === 403) {
              console.log(
                "Status 403 - es existiert unter dem neuen Elternbaustoff bereits ein Baustoff mit derselben Bezeichnung wie die des Wurzelknotens des zu kopierenden/verschiebenden Zweigs"
              );
              if (kopierenNichtVerschieben) {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUSTOFF_ZWEIG_KOPIEREN_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
                );
              } else {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUSTOFF_ZWEIG_VERSCHIEBEN_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
                );
              }
            } else {
              // sonstiger Fehler, z.B. 500
              if (kopierenNichtVerschieben) {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUSTOFF_ZWEIG_KOPIEREN_FEHLER
                );
              } else {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUSTOFF_ZWEIG_VERSCHIEBEN_FEHLER
                );
              }
            }
          } else {
            console.log("In catch-Block für bewegeZweig()");
            console.log(
              "error oder error.response ist undefiniert - Fehler in refreshTreeBaustoffe()"
            );
            if (kopierenNichtVerschieben) {
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUSTOFF_ZWEIG_KOPIEREN_FEHLER
              );
            } else {
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUSTOFF_ZWEIG_VERSCHIEBEN_FEHLER
              );
            }
          }
        });
    },

    //======================================================================================================================================
    // Funktionen für zugeordnete Rohstoffe in Baustoffen (Tab "Zugeordnete Rohstoffe")
    //--------------------------------------------------------------------------------------------------------------------------------------

    expandTickedNodesTreeRohstoffe() {
      //------------------------------------------------------------------------------------------------------------------------------
      // Expandiert die ticked Nodes im Rohstoffbaum
      // HINWEIS: Bereits vorher expandierte Nodes bleiben davon unberührt expandiert!
      //------------------------------------------------------------------------------------------------------------------------------
      console.log("In expandTickedNodesTreeRohstoffe()");
      // Hier zunächst testweise hier versucht, die ticked Nodes zu expandieren, mittels:
      // for (var key of this.tickedKeysTreeRohstoffe) {
      //   this.$refs.treeRohstoffe.setExpanded(key, true);
      // };
      // ACHTUNG: Hier unbedingt for ... of zum Iterieren durch die Values, NICHT for ... in zum Iterieren durch die Props verwenden!!!
      // Siehe https://www.w3schools.com/jsref/jsref_forin.asp

      // Aber ACHTUNG: Diese Expansion der ticked Nodes funktioniert so NICHT ohne weiteres - es werden damit alle Nodes expandiert, nicht nur die getickten!
      // Als Test-Baustoff dafür genommmen: Putze, Mörtel, Estriche, Kleber und Beschichtungen
      // Dieser hat 3 getickte zugeordnete Rohstoffe, den obersten davon unticked und gespeichert
      // Anschließend werden nach Refresh dennoch alle Knoten expandiert, warum auch immer

      // Zusätzlich daher folgendes versucht:
      // this.expandedKeysTreeRohstoffe = this.tickedKeysTreeRohstoffe; // ACHTUNG: Weist nur Pointer auf Array zu!
      // Dies funktioniert schon eher, aber es werden damit bei einem ersten Test gar keine Nodes expandiert
      // Vermutliche Ursache: Offensichtlich reicht es hier nicht aus, nur die getickten Knoten auf expandiert zu setzen,
      // sondern es müssen vermutlich deren Elternknoten im Pfad expandiert werden!
      // Diese sind verfügbar im Feld path, durch #-Trennzeichen separiert

      // Ab ca. Zeile 7100 existiert bereits Code (this.nodesTreeRohstoffe.forEach(function iter(a) {...), welcher rekursiv den Rohstoffbaum durchwandert.
      // Dieser kann als Vorlage dienen, um die ticked Nodes im Array nodesTreeRohstoffe zu identifizieren, jeweils deren
      // path zu extrahieren, und die Elternknoten im Pfad in einen temporären Array zu pushen, der am Ende
      // alle zu expandierenden Knoten enthält (eventuell mit Duplikaten?!?).
      // Mit den dort enthaltenen keys=ids kann dann
      // - entweder die API-Funktion setExpanded(key, true) aufgerufen werden
      // - oder eine reaktive Zuweisung an expandedKeysTreeRohstoffe durchgeführt werden,
      // um schließlich genau die Eltern der ticked Nodes zu expandieren
      // HINWEIS: Die ticked Nodes müssen dabei gar nicht selbst expandiert werden, sondern nur deren Eltern im Pfad!!!
      //-------------------------------------------------------------------------------------------------------------------------------
      // Neue Variante:
      // Prüfe zunächst die Existenz von treeRohstoffe:
      if (this.$refs.treeRohstoffe !== undefined) {
        // Gegen Fehler: Error in nextTick: "TypeError: Cannot read property 'getNodeByKey' of undefined"
        // bei Versuch mit $refs. unten auf noch nicht im DOM vorhandenen treeRohstoffe zuzugreifen
        // Passiert z.B., wenn das Tab "Zugeordnete Rohstoffe" noch nie ausgewählt war
        // console.log("tickedKeysTreeRohstoffe: ", this.tickedKeysTreeRohstoffe);
        for (var key of this.tickedKeysTreeRohstoffe) {
          // Expandiert die Elternknoten von getickten Knoten
          // ACHTUNG: Hier unbedingt for ... of zum Iterieren durch die Values, NICHT for ... in zum Iterieren durch die Props verwenden!!!
          // Siehe https://www.w3schools.com/jsref/jsref_forin.asp
          var aktuellerNodeRohstoffe = this.$refs.treeRohstoffe.getNodeByKey(
            key
          );
          // console.log("aktuellerNodeRohstoffe.path:", aktuellerNodeRohstoffe.path);
          let pathAktuellerNodeRohstoffe = aktuellerNodeRohstoffe.path.split(
            "#"
          ); // Zerlegt den Pfad in einen Array der einzelnen Knoten im Pfad
          //------------------------------------------------------------------------------------------------------------------------------------------------
          // NEU:
          // Den Wurzelknoten sicherheitshalber jeweils entfernen (dies ist per Browser Console Logs immer der Wurzelknoten des Baustoffbaums, der aber hier
          // unter "Zugeordnete Rohstoffe" gar nicht angezeigt wird - desen id ist aber im Feld "path" immer als erstes Element enthalten, das zweite ist
          // dann die id des betreffenden Knotens selbst!
          pathAktuellerNodeRohstoffe.shift();
          // console.log("pathAktuellerNodeRohstoffe: ", pathAktuellerNodeRohstoffe);
          /*
          if (pathAktuellerNodeRohstoffe.length >= 2) {
            let idParentAktuellerNodeRohstoffe = pathAktuellerNodeRohstoffe[pathAktuellerNodeRohstoffe.length - 2]
            this.expandedKeysTreeRohstoffe.push(idParentAktuellerNodeRohstoffe)
          }
          */
          // Nun den Pfad ausklappen durch reaktiven Update von expandedKeysTreeRohstoffe:
          for (var pfadKey of pathAktuellerNodeRohstoffe) {
            if (
              this.expandedKeysTreeRohstoffe.find(arg => arg === pfadKey) ===
              undefined // true, wenn der pfadKey bereits in expandedKeysTreeRohstoffe enthalten ist
            ) {
              this.expandedKeysTreeRohstoffe.push(pfadKey); // Sonst den Knoten pfadKey auf den Array pushen
            }
          }
        }
      } else {
        console.log(
          "$refs.treeRohstoffe ist undefined - daher erfolgt das Expandieren der ticked Nodes erst bei Anwahl des Tabs 'zugeordnete Rohstoffe'!"
        );
      }
    },

    showBenutzerNachrichtZweigZumBewegenMarkiert: function() {
      //------------------------------------------------------------------------------------------------------------------------------b
      // Ruft globalStore.ShowBenutzerNachricht - da diese nicht direkt aus dem Template aufgerufen werden kann,
      // bzw. per localStore.showBenutzerNachricht() schon, aber nicht
      // mit dem Argument BenutzerNachrichten.BAUEINHEIT_ZWEIG_ZUM_BEWEGEN_MARKIERT
      globalStore.showBenutzerNachricht(
        BenutzerNachrichten.BAUSTOFF_ZWEIG_ZUM_BEWEGEN_MARKIERT
      );
    },

    showBenutzerNachrichtFunktionNichtVerfuegbar: function() {
      //------------------------------------------------------------------------------------------------------------------------------
      // Ruft globalStore.ShowBenutzerNachricht - da diese nicht direkt aus dem Template aufgerufen werden kann
      // Siehe https://quasar.dev/quasar-utils/other-utils#Copy-to-Clipboard
      globalStore.showBenutzerNachricht(
        BenutzerNachrichten.FUNKTION_NICHT_VERFUEGBAR
      );
    },

    setAnteilVonRohstoffInBaustoffAusInputFeld(newValue) {
      //------------------------------------------------------------------------------------------------------------------------------
      // TODO YYYYYY - Testcode gegen temporäre Fehler beim Editing in den QInputs im QPopupEdit für zugeordnete Rohstoffe eines Baustoffs
      // Funktion, die beim @input-Event auf dem ersten Input-Feld aufgerufen wird, innerhalb des QPopuEdits für das Editing
      // der erweiterten Angaben zum Rohstoff im Baustoff
      // Parameter: newValue - enthält als Event Payload den neu vom Benutzer in das Input-Feld eingetragenen Wert
      // Setzt manuell die Prop auf den neuen Wert, nachdem es ohne @input-Event nicht funktionierte!
      // Der Grund ist vermutlich, dass hier im QPopupEdit ein Objekt mit mehreren Feldern editiert wird, die q-inputs aber immer
      // nur auf einem Teil-Feld arbeiten, und Vue dann nicht automatisch ein Rerendering der übergeordneten Komponente (QPopupEdit)
      // durchführt. Deshalb wird dieser Update hier manuell durchgeführt.
      // Der neue Wert wird sicherheitshalber per $set zugewiesen, nicht direkt.
      //------------------------------------------------------------------------------------------------------------------------------
      console.log("In setAnteilVonRohstoffInBaustoff()");
      console.log("Parameter newValue: ", newValue);

      // List props of q-popup-edit:
      // console.log("All props of q-popup-edit: ", this.$refs.popupEditTreeRohstoffe.$props);
      // Aus Console Log: value.anteilVonRohstoffInBaustoff ist die zu setzende Prop!
      console.log(
        "Bisheriger Wert der Prop value.anteilVonRohstoffInBaustoff: ",
        this.$refs.popupEditTreeRohstoffe.$props.value
          .anteilVonRohstoffInBaustoff
      );
      this.$set(
        this.$refs.popupEditTreeRohstoffe.$props.value,
        "anteilVonRohstoffInBaustoff",
        newValue
      );
      console.log(
        "Neuer Wert der Prop value.anteilVonRohstoffInBaustoff: ",
        this.$refs.popupEditTreeRohstoffe.$props.value
          .anteilVonRohstoffInBaustoff
      );
    },

    changeInputPopupEditTreeRohstoffe() {
      // Wird aktuell nicht verwendet
      console.log("In changeInputPopupEditTreeRohstoffe()");
    },

    savePopupEditTreeRohstoffe(newValue, oldValue, node) {
      // HINWEIS: Mit neuem Code für #107 werden Parameter newValue, oldValue nicht benötigt - siehe unten. Trotzdem belassen
      //--------------------------------------------------------------------------------------------------------------------------------
      // TODO YYYYYY [FIXED] - FUnktion enthält Testcode gegen temporäre Fehler beim Editing in den QInputs im QPopupEdit für zugeordnete Rohstoffe eines Baustoffs
      // Funktion, die bei Save des Popup Edits der zugeordneten Rohstoffe desim Baustoffbbaum ausgewählten Baustoffs aufgerufen wird
      // War ursprünglich NoOp
      // Enthält aktuell testweise diverse disabelte Aktionen, um den Fehler der nicht funktionierenden Input-Felder im QPopupEdit zu fixen
      // UPDATE: Dies Funktion ist nach Lösung des Fehlers (siehe unten) defacto NoOp
      //================================================================================================================================
      // Aktueller Stand des Fehlers am 29.94.2020:
      // 1. Mit dem Code unten am Save ($nextTick mit Dummy setTicked) werden die geänderten Input-Felder nach Drücken des Save-Buttons
      //    im Tree am Display korrekt angezeigt. Das heißt aber noch nicht, dass sie auch in nodesTreeRohstoffe aktuell sind, siehe unten!
      //    HINWEIS: Die Save-Methode am @save wird nur aufgerufen, wenn am q-popup-edit v-model="prop.node" oder :value="prop.node" gesetzt ist.
      //    Mit v-model="prop.node.anteilvonRohstoffInBaustoff" oder :value="prop.node.anteilvonRohstoffInBaustoff" wird die Save-
      //    Methode NICHT aufgerufen! Dies ist auch der Fall, wenn keine @change-Methode enabled ist am ersten q-input.
      // 2. In der aktuellen Save Methode mit setTicked kann es vorkommen, dass wenn man den ersten von 2 ticked Nodes per Popup Edit
      //    bearbeitet hat und danach mit Save das PopuEdit verlässt, dass der falsche, zweite ticked Node geticked wird - das ist
      //    ein Problem mit den Props am q-popup-edit (siehe weitere Kommentare dazu weiter unten)
      // 3. Allerdings werden aus unbekanntem Grund schon VOR dem Save die
      //    vom Benutzer geänderte Input-Feld-Werte NICHT in den Input-Feldern selbst und in der Debug Mode Anzeige von prop.node im
      //    q-popup-edit oben aktualisiert - FEHLER - hier gibt es nach wie vor ein Problem mit dem v-model
      // 4. Außerdem, nach "Speichern":
      //    - der Array selectedNodeTreeBaustoffe.zugeordneteRohstoffe wird nach dem Speichern korrekt aktualisiert
      //    - der Array nodesTreeRohstoffe wird dagegen NICHT mit den aktuellen Werten aktualisiert - das scheint ein weiterer FEHLER  zu sein
      //     Erst nach einem Browser Refresh sind die Werte korrekt!
      // Weitere getestete Variationen:
      // - v-model/:value => Keine Besserung - v-model ist normalerweise richtig, :value verhindert Änderungen (???)
      // - @change-Event am ersten q-input - wird aufgerufen, die dortige Zuweisung scheint aber nicht zu funktionieren
      // - v-if für ticked Nodes only im Rohstoffbaum: Temporär disabled => Keine Besserung
      // - v-model/:value für q-popup-edit und q-input identisch auf prop.node.anteilVonRohstoffInBaustoff => Keine Besserung, @save
      //   wird nicht mehr aufgerufen
      // - Das zweite und dritte q-input temporär disabled => Keine Besserung
      // NEU: @save-Methode mit obigen Parametern, nach Vorlage auf https://codepen.io/metalsadman/pen/RmKeWL - diese getestet, wird aber mit
      // der folgenden Lösung aktuell nicht mehr gebraucht - macht nur noch ein Console Logging
      //================================================================================================================================
      // URSACHE/LÖSUNG des QPopupEdit Editing Fehlers:
      // In loadTreeRohstoffe() war das Hinzufügen der erweiterten Felder nicht reaktiv - dies zerstörte die Reaktivität von treeRohstoffe
      // Dort den Code, der die erweiterten Felder in das Array hinzufügt, per $set reaktiv gemacht => Dann funktionieren die Editing
      // Funktionen im QPopupEdit ordnungsgemäß!!!
      //================================================================================================================================
      //--------------------------------------------------------------------------------------------------------------------------------
      console.log("In @save für popupEditTreeRohstoffe()");
      /*
      console.log("Parameter newValue: ", newValue); // Ist Objekt vom Typ node!!! anteilVonRohstoffInBaustoff hat darin den neuen, eingegebenen Wert
      console.log("Parameter oldValue: ", oldValue); // Ist Objekt vom Typ node!!! anteilVonRohstoffInBaustoff hat darin den alten Wert
      */
      // Folgender 3. Parameter node ist bei v-model an den q-inputs dasselbe wie newValue
      // Bei :value an den q-inputs ist das der hier in der Methode upzudatende Node (übergeben als prop.node)
      // console.log("Parameter node: ", node); // Ist Objekt vom Typ node, erscheint bei v-model (nicht bei :value) im Log identisch mit newValue, wurde also bereits updated!!!
      // Folgende Statements waren für 4. Parameter fieldName, der z.B. testweise als "anteilVonRohstoffInBaustoff" im Template übergeben werden konnte
      // Diesen wieder entfernt
      /*
      console.log("Parameter fieldName: ", fieldName); // "anteilVonRohstoffInBaustoff"
      console.log("node.fieldName vor Update: ", node[fieldName]); // alter Wert
      node[fieldName] = newValue[fieldName]; // Ist eigentlich überflüssig, da Wert bereits auf newValue steht!
      console.log("node.fieldName nach Update: ", node[fieldName]); // neuer Wert
      */
      // Aus Performance-Gründen (langsame Eingabe in q-input-Felder insbesondere am großen Baustoffbaum in baueinheiten.vue)
      // temporär testweise jedoch :value statt v-model benutzt - dann sind hier in der save-Methode die neuen/geänderten Werte der 3
      // erweiterten Felder in den getickten Node (prop.node) innerhalb von treeRohstoffe zu übertragen
      // Folgender Code macht den Update in prop.node im Fall von Verwendung von :value an den q-inputs auf reaktive Art:
      // Funktionierte aber NICHT - auch nicht mit v-models an den q-inputs - da @save-Event nicht gefeuert wurde und die Methode gar nicht aufgerufen wurde!
      // Daher wieder disabled - stattdessen debounce=1000 (ms) an den q-input-Feldern, um Blockieren der Eingabe zu verhindern
      // Der Grund für diesen Fehler ist per https://forum.quasar-framework.org/topic/2916/popup-edit-save-cancel/11
      // vermutlich auch, dass beim Save am QPopupEdit die @save-Methode NUR aufgerufen wird, wenn sich die initialen Werte des v-models geändert haben

      //========================================================================================================================
      // NEU 06.10.2021 - Angleichung des Codes hier an baueinheiten.vue
      // NEU 25.02.2021 - #107
      // Nach Vorlagen von https://forum.quasar-framework.org/topic/2916/popup-edit-save-cancel/11 wird
      // beim Save am QPopupEdit die @save-Methode NUR aufgerufen, wenn sich die initialen Werte des v-models geändert haben
      // Daher kann das QPopupEdit nicht mehr, wie VOR #107, auf prop.node arbeiten (dieses kann mit Object.freeze() nicht mehr
      // reaktiv geändert werden), sondern auf einem eigenen, aus prop.node "kopierten", reaktiven Objekt!
      // Dieses wird (NEU) in @load intitialisiert mit den Werten aus prop.node
      // Beim Save findet nun hier die Rückwärts-Aktualisierung von prop.node statt, per $set.
      // HINWEIS: Beim Cancel ist nichts zu tun - dies wird von Quasar von selbst erledigt (ursprüngliche Werte der Variablen
      //          werden genommen)
      console.log("Vor $set für Aktualisierung von prop.node");
      this.$set(
        node,
        "anteilVonRohstoffInBaustoff",
        this.tempValuesPopupEditTreeRohstoffe["anteilVonRohstoffInBaustoff"]
      );
      this.$set(
        node,
        "symbolVonRohstoffInBaustoff",
        this.tempValuesPopupEditTreeRohstoffe["symbolVonRohstoffInBaustoff"]
      );
      this.$set(
        node,
        "einheitVonRohstoffInBaustoff",
        this.tempValuesPopupEditTreeRohstoffe["einheitVonRohstoffInBaustoff"]
      );
      console.log(
        "Nach $set - node.anteilVonRohstoffInBaustoff: ",
        node.anteilVonRohstoffInBaustoff
      );
      console.log(
        "Nach $set - node.symbolVonRohstoffInBaustoff: ",
        node.symbolVonRohstoffInBaustoff
      );
      console.log(
        "Nach $set - node.einheitVonRohstoffInBaustoff: ",
        node.einheitVonRohstoffInBaustoff
      );
      // ACHTUNG: Nur durch die folgenden QTree-API-Aufrufe wird nodesTreeBaustoffe (als Teil von #107 zur Performance-
      // Verbesserung beim Laden eigentlich eingefroren) reaktiv updated!!! (Fake-Unticken und Reticken dieses Nodes in nodesTreeBaustoffe!)
      this.$refs.treeRohstoffe.setTicked([node._id], false);
      this.$refs.treeRohstoffe.setTicked([node._id], true);
      // Die folgenden Parameter werden als Teil von #107 nicht mehr verwendet:
      // console.log("Parameter newValue: ", newValue); // Ist Objekt vom Typ node!!! anteilVonRohstoffInBaustoff hat darin den neuen, eingegebenen Wert
      // console.log("Parameter oldValue: ", oldValue); // Ist Objekt vom Typ node!!! anteilVonRohstoffInBaustoff hat darin den alten Wert
      //-------------------------------------------------------------------------------------------------------------------------
      // ALT:
      /*
      console.log("Vor $set");

      this.$set(node, "anteilVonRohstoffInBaustoff", this.tempValueAnteilVonRohstoffInBaustoff);
      this.$set(node, "symbolVonRohstoffInBaustoff", this.tempValueSymbolVonRohstoffInBaustoff);
      this.$set(node, "einheitVonRohstoffInBaustoff", this.tempValueEinheitVonRohstoffInBaustoff);

      console.log("Nach $set - node.anteilVonRohstoffInBaustoff: ", node.anteilVonRohstoffInBaustoff);
      console.log("Nach $set - node.symbolVonRohstoffInBaustoff: ", newValue.symbolVonRohstoffInBaustoff);
      console.log("Nach $set - node.einheitVonRohstoffInBaustoff: ", newValue.einheitVonRohstoffInBaustoff);
      */
      //--------------------------------------------------------------------------------------------------------------------------
      // HINWEIS: Update von node ist normalerweise überflüssig bei direkter Verwendung von v-models an den q-input Feldern
      // $nextTick stellte sich als überflüssig heraus - disabled
      // this.$nextTick(() => {
      // console.log("In $nextTick()");
      // console.log("All props of q-popup-edit: ", this.$refs.popupEditTreeRohstoffe.$props);
      // Aus dem Console Log der $props: Unterfeld value in den Props hält das v-model, dieses ist als prop.node im Template deklariert
      // Auf dieses Unterfeld _id (für setTicked API-Funktion) wird unten per $props.value._id zugegriffen
      // console.log("this.$refs.popupEditTreeRohstoffe.$props.value._id: ", this.$refs.popupEditTreeRohstoffe.$props.value._id);
      // Hier kommt per Tests allerdings manchmal eine falsche _id zurück, siehe unten!!!
      // console.log("ACHTUNG FEHLER in dieser _id!?! Per $props.value kommt manchmal falsche _id zurück! Siehe Kommentare in savePopupEditTreeRohstoffe())");
      //-------------------------------------------------------------------------------------------------------------------------
      // ALT: Macht nun eine Dummy-Operation auf dem Tree, um Rerendering zu forcieren, der zu tickende Node ist bereits geticked
      // console.log("Löse Dummy Ticking des im Popup Edit bearbeiteten getickten Nodes aus");
      // Dummy Ticking mit falscher _id aus $props, disabled:
      // this.$refs.treeRohstoffe.setTicked(this.$refs.popupEditTreeRohstoffe.$props.value._id, true);
      // Dummy Ticking daher nicht mit $props, sondern so:
      // console.log("node._id des Nodes für das @save-Event: ", node._id); // Müsste die korrekte _id sein
      // this.$refs.treeRohstoffe.setTicked(node._id, true);
      //-------------------------------------------------------------------------------------------------------------------------
      // NEU: Dummy Ticking zugunsten von forceUpdate des Trees disabled
      // forceUpdate ebenfalls disabled, nicht mehr notwendig nach Reactivity Fix in loadTreeRohstoffe()
      // console.log("Vor $forceUpdate() für Rohstoffbaum");
      // this.$refs.treeRohstoffe.$forceUpdate();
      // console.log("nodesTreeRohstoffe:");
      // console.log(this.stringifyNodesTreeRohstoffe);
      //-------------------------------------------------------------------------------------------------------------------------
      // Weitere Alternative zum Dummy Ticking: Den getickten Node testweise selektieren im Rohstoffbaum:
      // console.log("Wähle den im Popup Edit bearbeiteten getickten Node im Rohstoffbaum aus");
      // this.selectedKeyTreeRohstoffe = this.$refs.popupEditTreeRohstoffe.$props.value._id;
      // console.log("selectedKeyTreeRohstoffe: ", this.selectedKeyTreeRohstoffe);
      // ACHTUNG: Ohne eine solche "Dummy-Operation" auf dem Tree werden die upgedateten Input-Felder nach Drücken des Save-Buttons NICHT im betreffenden Node
      // reflektiert! Allerdings passiert nach diesem Save aktuell aus unbekanntem Grund kein Update von nodesTreeRohstoffe selbst, sondern nur des Felds
      // prop.node.anteilVonRohstoffInBaustoff, das im Tree Body-Slot per {{ prop.node.anteilVonRohstoffInBaustoff }} angezeigt wird!!!
      //-------------------------------------------------------------------------------------------------------------------------
      // TODO YYYYYY - FEHLER mit den Props - umgangen durch obiges $forceUpdate(), das ohne _id auskommt
      // Wenn man per Popup Edit am Knoten "Mauerwerk, einschließlich Mörtelfugen" den ersten der
      // beiden ticked Nodes bearbeitet und das Popup Edit mit Save verläasst, wird aus dem Log ist ersichtlich,
      // dass hier in der Save-Methode die id in $props.value._id NICHT die des im Popup Edit
      // bearbeiteten ersten Knotens im Array tickedKeysTreeRohstoffe ist, sondern die des zweiten Knotens in diesem Array!!!
      // In der Variante mit setTicked fiel dies nicht weiter auf, da ja beide Nodes ticked sind, in der Variante mit
      // selectedKeyTreeRohstoffe wohl - es wurde dann der zweite der ticked Nodes im Baum selektiert, nicht der erste!
      // Wenn schon diese _id falsch ist, ist nicht verwunderlich, dass auch auf die 3 Input-Felder in den Props nicht richtig
      // verarbeitet werden!!!
      // Derselbe Test auf dem zweiten Knoten verläuft allerdings ohne diesen Fehler!
      // Außerdem zeigt das Debug-Mode-Objekt prop.node über dem q-popup-edit den korrekten Node an (mit der id des ersten), der
      // vom q-input aber nicht korrekt updated wird bei Eingabe in das Input-Feld
      // Es gibt also ein generelles Problem mit den Props von q-popup-edit und der q-inputs
      // HINWEIS: Klickt man im Rohstoffbaum nach dem Save manuell auf einen anderen Knoten statt obiger Tree-Dummy-Operation,
      // werden die Werte ebenfalls aktualisiert!!!
      // });
    },

    updateZugeordneteRohstoffeAusgewaehlterBaustoff() {
      //------------------------------------------------------------------------------------------------------------------------------
      // Macht einen Update der zugeordneten Rohstoffe des im Baustoffbaum ausgewählten Baustoffs
      // (Aufruf per Button "Speichern" im Tab "Zugeordnete Rohstoffe")
      //------------------------------------------------------------------------------------------------------------------------------
      console.log("In updateZugeordneteRohstoffeAusgewaehlterBaustoff()");
      if (this.selectedKeyTreeBaustoffe != null) {
        console.log(
          "selectedKeyTreeBaustoffe: ",
          this.selectedKeyTreeBaustoffe
        );
        //------------------------------------------------------------------------------------------------------------------------------------------------------------
        // NEU: In loadTreeRohstoffe() wurde zusätzlich Support für die
        // 3 erweiterten Felder im Model (anteilVonRohstoffInBaustoff, symbolVonRohstoffInBaustoff, einheitVonRohstoffInBaustoff) eingebaut.
        // Diese sind zusätzlich zum Feld referenzAufRohstoffInBaustoff, welches die Id des zugeordneten Rohstoffs enthält.
        // Die 4 Felder zusammen bilden ein Objekt. Aus solchen Objekten ist dann der Array zugeordneteRohstoffe aufgebaut.

        // ACHTUNG: Diese 3 erweiterten Felder sind aktuell in den Testdaten NICHT an allen Knoten auch definiert, denn zugeordneteRohstoffe wird in back-end-server.js in den
        // Testdaten nur für bestimmte Testbaustoffe, u.a. "Putze, Mörtel, Estriche, Kleber und Beschichtungen", gesetzt, es ist sonst [], wie man im Debug Mode sieht,
        // schlimmstenfalls undefined! Dies also muss beim Rendern im Template unbedingt abgefangen werden!!!

        // Mittlerweile ist über QPopupEdits das Ändern dieser erweiterten 3 Felder in selectedNodeTreeBaustoffe.zugeordneteRohstoffe möglich, die dann
        // zum Backend schicken mit put-Methode in updateZugeordneteRohstoffeAusgewaehlterBaustoff
        // ------------------------------------------------------------------------------------------------------------------------------------------------------------

        // Nun this.selectedNodeTreeBaustoffe.zugeordneteRohstoffe updaten mit den ids aus tickedKeysTreeRohstoffe:
        // Dabei ist zu beachten, dass selectedNodeTreeBaustoffe.zugeordneteRohstoffe ein Array aus Objekten ist, während tickedKeysTreeRohstoffe ein flacher
        // Array aus ids ist.

        // Hier erfolgt nun das Einfügen der ids der getickten Rohstoffe mit ihren Attributen in den Array of Objects zugeordneteRohstoffe in selectedNodeTreeBaustoffe:
        this.selectedNodeTreeBaustoffe.zugeordneteRohstoffe = []; // Alte Werte löschen

        // ALT: Vorläufiger Code, setzte nur referenzAufRohstoffinBaustoff - disabled
        /*
        for (var i = 0; i < this.tickedKeysTreeRohstoffe.length; i++) {
          var element = {
            referenzAufRohstoffInBaustoff: this.tickedKeysTreeRohstoffe[i],
            anteilVonRohstoffInBaustoff: null, // TODO - vorläufig!!!
            symbolVonRohstoffInBaustoff: null, // TODO - vorläufig!!!
            einheitVonRohstoffInBaustoff: null // TODO - vorläufig!!!
          };
          this.selectedNodeTreeBaustoffe.zugeordneteRohstoffe.push(element);
        };
        */

        // NEU: Setze auch die 3 erweiterten Felder in selectedNodeTreeBaustoffe.zugeordneteRohstoffe:
        // Dazu Traversieren von nodesTreeRohstoffe und Heraussuchen der ticked Nodes mit ihren erweiteterten Feldern im Baum:
        // Dazu muss im Rohstoffbaum der passende ticked Knoten per id gefunden werden (rekursiver Algorithmus wie in loadTreeBaustoffe mit
        // forEach und includes) und die Werte daraus übertragen werden in den passenden zugeordneten Rohstoff in selectedNodeTreeBaustoffe

        if (this.tickedKeysTreeRohstoffe !== []) {
          // Nur dann den Rohstoffbaum traversieren zum Augmentieren der ticked Nodes:
          console.log(
            "Vor rekursivem Traversieren des Rohstoffbaums auf der Suche nach ticked Nodes"
          );
          let idsTickedKeysTreeRohstoffe = this.tickedKeysTreeRohstoffe; // ACHTUNG: Lokale Variable für tickedKeysTreeRohstoffe
          // ACHTUNG: Ohne diese, bei direkter Verwendung von this.tickedKeysTreeRohstoffe unten kommt in der rekursiven Funktion,
          // die Fehlermeldung "typeError - cannot read property 'tickedKeysTreeRohstoffe' of undefined"
          // Grund: .this ist dort nicht bekannt
          let updatedZugeordneteRohstoffe = this.selectedNodeTreeBaustoffe
            .zugeordneteRohstoffe; // ACHTUNG: Lokale Variable für selectedNodeTreeBaustoffe.zugeordneteRohstoffe
          // ACHTUNG: Ohne diese, bei direkter Verwendung von this.selectedNodeTreeBautoffe unten kommt in der rekursiven Funktion,
          // die Fehlermeldung "typeError - cannot read property 'selectedNodeTreeBaustoffe' of undefined"
          // Grund: .this ist dort nicht bekannt
          this.nodesTreeRohstoffe.forEach(function iter(a) {
            if (idsTickedKeysTreeRohstoffe.includes(a._id)) {
              // D.h. die id des traversierten Knotens im Rohstoffbaum ist dieselbe wie eine id in tickedKeysTreeRohstoffe
              console.log(
                "Passenden ticked Node gefunden, füge erweiterte Felder hinzu - _id: ",
                a._id
              );
              var tickedNodeMitErweitertenFeldern = {
                // Nur für bessere Lesbarkeit zum Zwischenspeichern
                // ACHTUNG: Das Feld a.referenzAufRohstoffInBaustoff und die 3 erweiterten Felder müssen bei NEU getickten Nodes NICHT definiert sein, falls diese
                // nicht mit dem Popup Edit gesetzt wurden!!!
                // Nur a._id muss bei jedem Node vorhanden sein, dieses hernehmen für referenzAufRohstoffInBaustoff!!!
                // FALSCH: referenzAufRohstoffInBaustoff: a.referenzAufRohstoffInBaustoff, // ALT: Führte in obigem Fall zu undefined-Elementen im Array!!!
                referenzAufRohstoffInBaustoff: a._id, // NEU
                // Die übrigen Felder, falls undefiniert, wenigstens auf null setzen:
                anteilVonRohstoffInBaustoff:
                  a.anteilVonRohstoffInBaustoff !== undefined
                    ? a.anteilVonRohstoffInBaustoff
                    : null,
                symbolVonRohstoffInBaustoff:
                  a.symbolVonRohstoffInBaustoff !== undefined
                    ? a.symbolVonRohstoffInBaustoff
                    : null,
                einheitVonRohstoffInBaustoff:
                  a.einheitVonRohstoffInBaustoff !== undefined
                    ? a.einheitVonRohstoffInBaustoff
                    : null
              };
              console.log(
                "Füge dem Array nodesTreeRohstoffe Objekt hinzu - tickedNodeMitErweitertenFeldern: ",
                tickedNodeMitErweitertenFeldern
              );
              updatedZugeordneteRohstoffe.push(tickedNodeMitErweitertenFeldern);
            }
            Array.isArray(a.children) && a.children.forEach(iter);
          });
          // ACHTUNG: Der folgende Code war fehlerhaft!!!
          // Eventuell ist diese Zuweisung auch ganz unnötig, da updatedZugeordneteRohstoffe sowieso ein Pointer auf this.selectedNodeTreeBaustoffe.zugeordneteRohstoffe ist???
          // ALT/FALSCH: this.nodesTreeBaustoffe.zugeordneteRohstoffe = updatedZugeordneteRohstoffe;
          // this.nodesTreeBaustoffe.zugeordneteRohstoffe existiert so nicht, denn nodesTreeBaustoffe ist ein (verschachtelter) Array
          // ALT/FALSCH:: this.selectedNodeTreeBaustoffe.zugeordneteRohstoffe = updatedZugeordneteRohstoffe;
          // Array Assigment - unklar ob okay so, ersetzt durch $set
          // NEU/RICHTIG:
          // Sicherheitshalber Array Assigmment mit $set für Vue Reactivity:
          this.$set(
            this.selectedNodeTreeBaustoffe,
            "zugeordneteRohstoffe",
            updatedZugeordneteRohstoffe
          );
          // HINWEIS: Obwohl selectedNodeTreeBaustoffe computed ist, ist darüber offenbar doch ein reaktiver Update von nodesTreeBaustoffe möglich, wie
          // der Code in renameBaustoff() zeigt
        } else {
          console.log(
            "Keine ticked Nodes - kein Traversieren des Rohstoffbaums nötig"
          );
          // this.selectedNodeTreeBaustoffe.zugeordneteRohstoffe ist dann []
        }
        //----------------------------------------------------------------------------------------------------------------------------
        // ACHTUNG: Der folgende Teil muss AUCH ausgeführt werden, falls alle Nodes vom User unticked wurden!!!
        // Dann muss leerer Array zugeordneteRohstoffe abgespeichert werden!!!
        const apiRoute =
          process.env.API +
          "/Baustoffe/" +
          this.selectedKeyTreeBaustoffe +
          "/Rohstoffe";
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBaustoffe'");
        this.$socket.emit("leaveRoom", {
          room: "roomBaustoffe"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBaustoffe'");
        //=========================================================================================================================================
        this.$axios
          .put(apiRoute, {
            // Schickt einen Put-Request an das Backend für Update des Felds zugeordneteRohstoffe für Baustoff
            zugeordneteRohstoffe: this.selectedNodeTreeBaustoffe
              .zugeordneteRohstoffe
          })
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log(
              "Erfolg aus $axios.put, response.status: ",
              response.status
            ); // Status loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_ROHSTOFFE_AENDERUNG_ERFOLG
            );
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.put, error: ", error); // Error loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_ROHSTOFFE_AENDERUNG_FEHLER
            );
          });
        // NEU: Rohstoffbaum expandieren:
        // Auskommentiert 17.04.20 @sts
        // TODO YYYYYY - endgültige Lösung?
        /*
        this.$nextTick(() => {
          this.$refs.treeRohstoffe.expandAll();
        });
        */
      } // this.selectedKeyTreeBaustoffe === null
    },

    resetZugeordneteRohstoffeAusgewaehlterBaustoff() {
      //--------------------------------------------------------------------------------------------------------------------
      // Macht einen Reset der zugeordneten Rohstoffe (Aufruf per Button "Zurücksetzen" im Tab "Zugeordnete Rohstoffe"), indem
      // es die bisherigen Werte aus der Datenbank lädt
      // TODO: Update der 3 erweiterten Felder an den ticked Nodes - siehe loadTreeRohstoffe()
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetZugeordneteRohstoffeAusgewaehlterBaustoff()");
      // NEU:
      this.loadTreeRohstoffe(true);
      // ALT:
      /*
      if (this.selectedKeyTreeBaustoffe != null) {
        console.log(" _id: ", this.selectedKeyTreeBaustoffe); // Das ist die id des ausgewählten Baustoffs, wird als req.params.id in Request URL eingefügt
        const apiRoute =
          process.env.API +
          "/Baustoffe/" +
          this.selectedKeyTreeBaustoffe +
          "/Rohstoffe";
        this.$axios
          .get(apiRoute) // Schickt einen Get-Request an das Backend für Lesen des Felds zugeordnete Rohstoffe für Baustoff mit _id
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log("Erfolg aus $axios.get, response.status: ", response.status); // Status loggen
            console.log("response: ", response);

            this.selectedNodeTreeBaustoffe.zugeordneteRohstoffe =
              response.data.zugeordneteRohstoffe;
            // Nun noch die aus der Datenbank gelesenen ids in den Array tickedKeysTreeRohstoffe übertragen, damit sie korrekt im Rohstoffunterbaum als ticked
            // angezeigt werden:
            // Vorher die ids für diesen flachen Array aus dem nested Array of Objects zugeordneteRohstoffe extrahieren -
            // dort liegen sie im Feld referenzAufRohstoffInBaustoff:
            this.tickedKeysTreeRohstoffe = this.selectedNodeTreeBaustoffe.zugeordneteRohstoffe.map(a => a.referenzAufRohstoffInBaustoff);
            console.log("tickedKeysTreeRohstoffe nach map: ", this.tickedKeysTreeRohstoffe);
            // HINWEIS: Hier keine Benutzernachricht nötig
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.get, error: ", error); // Status loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_LESEN_FEHLER
            );
          });
      }
      */
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Funktion CopyToClipbaordSonderzeichenAusgewaehlteBaueigenschaft für QSelect im Tab "Baueigenschaften > Details zur ausgewählten Baueigenschaft"
    // Siehe https://quasar.dev/quasar-utils/other-utils#Copy-to-Clipboard
    copyToClipboardSonderzeichenAusgewaehlteBaueigenschaft: async function(
      text
    ) {
      copyToClipboard(text)
        .then(() => {
          // success!
          console.log(
            "Success in copyToClipboardSonderzeichenAusgewaehlteBaueigenschaft"
          );
          this.copyToClipboardDoneSonderzeichenAusgewaehlteBaueigenschaft = true; // Für Anzeige Hint unter dem Button
        })
        .catch(() => {
          // fail
          console.log(
            "Error in copyToClipboardSonderzeichenAusgewaehlteBaueigenschaft"
          );
        });
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Funktion CopyToClipbaordSonderzeichenNeueBaueigenschaft für QSelect im Tab "Baueigenschaften > Details zur ausgewählten Baueigenschaft"
    // Siehe https://quasar.dev/quasar-utils/other-utils#Copy-to-Clipboard
    copyToClipboardSonderzeichenNeueBaueigenschaft: async function(text) {
      copyToClipboard(text)
        .then(() => {
          // success!
          console.log(
            "Success in copyToClipboardSonderzeichenNeueBaueigenschaft"
          );
          this.copyToClipboardDoneSonderzeichenNeueBaueigenschaft = true; // Für Anzeige Hint unter dem Button
        })
        .catch(() => {
          // fail
          console.log(
            "Error in copyToClipboardSonderzeichenNeueBaueigenschaft"
          );
        });
    },
    //------------------------------------------------------------------------------------------------------------------------------
    // Funktion CopyToClipbaord für QUploader UploaderBaueigenschaftsBeschreibung im Tab "Baueigenschaften > Beschreibung"
    // Siehe https://quasar.dev/quasar-utils/other-utils#Copy-to-Clipboard
    copyToClipboardBaueigenschaftsBeschreibung: async function(text) {
      copyToClipboard(text)
        .then(() => {
          // success!
          console.log("Success in copyToClipboardBaueigenschaftsBeschreibung");
          this.copyToClipboardDoneBaueigenschaftsBeschreibung = true; // Für Anzeige Hint unter dem Button
        })
        .catch(() => {
          // fail
          console.log("Error in copyToClipboardBaueigenschaftsBeschreibung");
        });
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Funktion CopyToClipbaord für QUploader UploaderBaustoffBeschreibung im Tab "Beschreibung"
    // Siehe https://quasar.dev/quasar-utils/other-utils#Copy-to-Clipboard
    copyToClipboardBaustoffBeschreibung: async function(text) {
      copyToClipboard(text)
        .then(() => {
          // success!
          console.log("Success in copyToClipboardBaustoffBeschreibung");
          this.copyToClipboardDoneBaustoffBeschreibung = true; // Für Anzeige Hint unter dem Button
        })
        .catch(() => {
          // fail
          console.log("Error in copyToClipboardBaustoffBeschreibung");
        });
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Funktion für QUploader UploaderBaueigenschaftsBeschreibung im Tab "Baueigenschaften > Beschreibung"
    // Zeigt File Name nach File Upload an in einem Feld "DateiNameAusUpload"
    // Hat als Parameter Objekt info = { [files], xhr } laut https://quasar.dev/vue-components/uploader
    // ACHTUNG: Erfordert offensichtlich nicht die Factory Function unten, daher diese disabled!
    displayLinkForUploadedFileUploaderBaueigenschaftsBeschreibung: function(
      info
    ) {
      // console.log(info.files[0]);
      console.log(
        "In displayLinkForUploadedFileUploaderBaueigenschaftsBeschreibung() - info.files[0].name: ",
        info.files[0].name
      ); // File Name aus dem Upload

      // ALT: Ohne slugified File Name vom Backend:
      // const uriEncodedFileName = encodeURI(info.files[0].name);
      // Ersetzt u.a. Blanks durch %20 - mit denen kann QMarkdown in seinen internen Links nicht umgehen!
      // Siehe https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/encodeURI

      // NEU: Mit slugified File Name aus xhr Header vom Backend:
      console.log("info.xhr: ", info.xhr); // NEU
      // console.log("info.xhr.response.id: ", info.xhr.response.id); // Ist leider undefined, id muss daher geparsed werden aus dem Response Text:

      const idOfUploadedFile = JSON.parse(info.xhr.responseText).id;
      console.log("idOfUploadedFile: ", idOfUploadedFile);

      const slugNameOfUploadedFile = JSON.parse(info.xhr.responseText)
        .slugFileName;
      console.log("slugNameOUploadedFile: ", slugNameOfUploadedFile);

      this.internerLinkAusUploadBaueigenschaftsBeschreibung =
        // ALT: Bei lokalem Deployment mit Upload/Download nach/von statics/pdfs
        // "![Linkbezeichnung](/statics/pdfs/" +
        // NEU: Für Heroku und lokal mit Download aus tmp/download/img:
        "![Linkbezeichnung]" +
        "(" +
        process.env.fileAPI +
        "/img/" +
        // Beispiel lokal:  ![Linkbezeichnung](http://localhost:8080/img/parkplatz.gif "Linkanzeigetext")
        // Beispiel Heroku: ![Linkbezeichnung](https://bimclickfiles.herokuapp.com/img/parkplatz.gif "Linkanzeigetext")
        // ALT:
        // uriEncodedFileName +
        // NEU:
        slugNameOfUploadedFile +
        ' "Linkanzeigetext")';
      console.log(
        "In displayLinkForUploadedFileUploaderBaueigenschaftsBeschreibung()  - internerLinkAusUploadBaueigenschaftsBeschreibung: ",
        this.internerLinkAusUploadBaueigenschaftsBeschreibung
      );

      this.uploadDoneBaueigenschaftsBeschreibung = true; // Steuert Anzeige

      // Test Code, um zu prüfen, ob QUploader Reset per API funktioniert - positiv verifiziert
      /*
      console.log(
        "In displayLinkForUploadedFileUploaderBaueigenschaftsBeschreibung() - vor Reset von QUploader: "
      );
       this.$refs.uploaderBaueigenschaftsBeschreibung.reset(); // Issue reset of q-uploader through API
      */
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Funktion für QUploader UploaderBaustoffBeschreibung im Tab "Beschreibung"
    // Zeigt  File Name nach File Upload an in einem Feld "DateiNameAusUpload"
    // Hat als Parameter Objekt info = { [files], xhr } laut https://quasar.dev/vue-components/uploader
    // ACHTUNG: Erfordert offensichtlich nicht die Factory Function unten, daher diese disabled!
    displayLinkForUploadedFileUploaderBaustoffBeschreibung: function(info) {
      // console.log(info.files[0]);
      console.log(
        "In displayLinkForUploadedFileUploaderBaustoffBeschreibung() - info.files[0].name: ",
        info.files[0].name
      ); // File Name aus dem Upload

      // ALT: Ohne slugified File Name vom Backend:
      // const uriEncodedFileName = encodeURI(info.files[0].name);
      // Ersetzt u.a. Blanks durch %20 - mit denen kann QMarkdown in seinen internen Links nicht umgehen!
      // Siehe https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/encodeURI

      // NEU: Mit slugified File Name aus xhr Header vom Backend:
      console.log("info.xhr: ", info.xhr); // NEU
      // console.log("info.xhr.response.id: ", info.xhr.response.id); // Ist leider undefined, id muss daher geparsed werden aus dem Response Text:

      const idOfUploadedFile = JSON.parse(info.xhr.responseText).id;
      console.log("idOfUploadedFile: ", idOfUploadedFile);

      const slugNameOfUploadedFile = JSON.parse(info.xhr.responseText)
        .slugFileName;
      console.log("slugNameOUploadedFile: ", slugNameOfUploadedFile);

      this.internerLinkAusUploadBaustoffBeschreibung =
        // ALT: Bei lokalem Deployment mit Upload/Download nach/von statics/pdfs
        // "![Linkbezeichnung](/statics/pdfs/" +
        // NEU: Für Heroku und lokal mit Download aus tmp/download/img:
        "![Linkbezeichnung]" +
        "(" +
        process.env.fileAPI +
        "/img/" +
        // Beispiel lokal:  ![Linkbezeichnung](http://localhost:8080/img/parkplatz.gif "Linkanzeigetext")
        // Beispiel Heroku: ![Linkbezeichnung](https://bimclickfiles.herokuapp.com/img/parkplatz.gif "Linkanzeigetext")
        // ALT:
        // uriEncodedFileName +
        // NEU:
        slugNameOfUploadedFile +
        ' "Linkanzeigetext")';
      console.log(
        "In displayLinkForUploadedFileUploaderBaustoffBeschreibung()  - internerLinkAusUpload: ",
        this.internerLinkAusUploadBaustoffBeschreibung
      );

      this.uploadDoneBaustoffBeschreibung = true; // Steuert Anzeige

      // Test Code, um zu prüfen, ob QUploader Reset per API funktioniert - positiv verifiziert
      /*
      console.log(
        "In displayLinkForUploadedFileUploaderBaustoffBeschreibung() - vor Reset von QUploader: "
      );
       this.$refs.uploaderBaustoffBeschreibung.reset(); // Issue reset of q-uploader through API
      */
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Reset Funktion, um QUploader UploaderBaustoffBeschreibung zu resetten
    // Wird aktuell nicht aufgerufen
    resetUploaderBaustoffBeschreibung: function() {
      console.log("In resetUploaderBaustoffBeschreibung()");
      this.$refs.uploaderBaustoffBeschreibung.reset(); // Issue reset of q-uploader through API
    },

    //----------------------------------------------------------------------------------------------------------------------------
    // NEU: Neue Factory Function für q-uploader, um Authorization Header mit JWT Token mitgeben zu können und damit 401 Fehler
    // mit den bisherigen q-uploaders ohne Factory Function (bei Aktivierung von JWT Authorisierung am Frontend und Backend)
    // zu eliminieren!!!
    // Wird an ALLEN q-uploaders definiert per :factory="uploadFile" (NICHT: "uploadfFle()")
    // Siehe https://quasar.dev/vue-components/uploader#ASP.NET-MVC%2FCore als Vorlage und BIM.click Backlog Item #96
    // Bringt per Test nach Upoload Status 200 (uff!!!)
    // TODO: XXXXXX Der Code läuft im Gegensatz zu den anderen API Calls OHNE Axios und fällt daher aus dem Rahmen -
    // z.B. funktionieren damit für die File Upoload Requests nicht die Axios Interceptors
    // Allerdings returned der Code nur eine Promise, die sich in ein Objekt für Quasar resolved (bestehend aus {url, method, headers})
    // und macht gar nicht selbst den HTTP-Post-Call (den man durch Axios mit JWT-Header ersetzen könnte), sondern dieser wird
    // offenbar in Quasar intern gemacht! Daher ist eine Umstellung auf Axios nicht so einfach möglich.
    //----------------------------------------------------------------------------------------------------------------------------
    uploadFile: function(file) {
      return new Promise((resolve, reject) => {
        console.log("In getUploadFile()");
        // Retrieve JWT token from your store.
        const myJWTToken = localStorage.getItem("jwtToken");
        console.log("Token geholt");
        // console.log("jwtToken: ", myJWTToken); // Disabled aus Security-Gründen
        // Set Authorization Header mit JWT Token aus localStorage für den nachfolgenden Axios Call für secure Route
        // TODO: XXXXXX - besser mit Axios?!? Aber wie genau den Axios Call in resolve() unten einpassen?
        console.log("Vor Post für File Upload");
        resolve({
          url: process.env.fileAPI + "/Dateien/upload",
          method: "POST",
          headers: [
            /* { name: "Content-Type", value: "application/json" }, */ // Damit kommt Error Status 500 - disabled!!!
            { name: "Authorization", value: "Bearer " + myJWTToken }
          ]
        });
      });
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // ALT: Frühere Factory Funktion für QUploader
    // Aktuell disabled, scheint nicht ausgeführt zu werden bzw. wird nicht gebraucht!
    // Achtung, Signatur hat sich geändert zwischen Quasar 0.x und 1.x
    // Siehe https://quasar.dev/vue-components/uploader
    // sowie https://stackoverflow.com/questions/53899220/quasar-quploader-failed-upload-with-upload-fcatory
    // Siehe https://forum.quasar-framework.org/topic/4600/how-to-deal-with-added-event-method-in-q-uploader/4
    /*
    factoryFunctionForQUploader: function(files) {
      return new Promise((resolve, reject) => {
        // resolve(file); // Aus obigem SO-Link, funktioniert, zusammen mit function(file, updateProgress)!
        // resolve(); // Funktioniert AUCH, zusammen mit function(file, updateProgress)! Siehe https://forum.quasar-framework.org/topic/3759/q-uploader-with-factory-function/5
        resolve(files); // Funktioniert AUCH, zusammen mit function(files, updateProgress)!
      });
    },
    */

    updateBaueigenschaftsBeschreibungAusgewaehlteBaueigenschaft() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Macht einen Update der Baueigenschaftsbeschreibung (Aufruf per Button "Speichern" im Tab "Baueigenschaften > Beschreibung")
      //----------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In updateBaueigenschaftsBeschreibungAusgewaehlteBaueigenschaft()"
      );
      if (this.ausgewaehlteBaueigenschaft != null) {
        // ALT - mit Flattening:
        /*
        console.log(
          "ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaftId: ",
          this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaftId
        );
        */
        // NEU - ohne Flattening:
        console.log(
          "ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft._id: ",
          this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft._id
        );
        /*
        console.log(
          "baueigenschaftsBeschreibung: ",
          this.ausgewaehlteBaueigenschaft.baueigenschaftsBeschreibung
        );
        */
        const apiRoute =
          process.env.API +
          "/Baueigenschaften/" +
          // ALT - mit Flattening:
          // this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaftId +
          // NEU - ohne Flattening:
          this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft._id +
          "/Beschreibung";
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBaustoffe'");
        this.$socket.emit("leaveRoom", {
          room: "roomBaustoffe"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBaustoffe'");
        //=========================================================================================================================================
        this.$axios
          .put(/* url, */ apiRoute, {
            // Schickt einen Put-Request an das Backend für Update des Felds baueigenschaftsBeschreibung für die (typbezogene) Baueigenschaft
            baueigenschaftsBeschreibung: this.ausgewaehlteBaueigenschaft
              .typbezogeneBaueigenschaft.baueigenschaftsBeschreibung
          })
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log(
              "Erfolg aus $axios.put, response.status: ",
              response.status
            ); // Status loggen
            // NEU - Fix für #298 - den neuen Wert auch in selectedRowsTableBaueigenschaften reflektieren:
            this.selectedRowsTableBaueigenschaften[0].typbezogeneBaueigenschaft.baueigenschaftsBeschreibung = this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.baueigenschaftsBeschreibung;
            // Nun auch die Baustoffbeschreibung im global Store updaten, damit sie in der fachlichen Hilfe reaktiv angezeigt wird:
            globalStore.setBaueigenschaftsBeschreibungAusgewaehlteBaueigenschaftBaustoff(
              this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft
                .baueigenschaftsBeschreibung
            );
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEIGENSCHAFT_BESCHREIBUNG_AENDERUNG_ERFOLG
            );
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.put, error: ", error); // Error loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEIGENSCHAFT_BESCHREIBUNG_AENDERUNG_FEHLER
            );
          });
      }
    },

    updateAngabenZumBaustoffAusgewaehlterBaustoff() {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Macht einen Update der Felder baustoffBemerkung, baustoffAusgabeText
      // für den ausgewählten Baustoff (Aufruf per Button "Speichern" im Tab "Angaben zum Baustoff"/früher "Strukturierungsangaben"
      // ACHTUNG: Feld benutzerKennungenAutoren wird an Baustoffen nicht angeboten, nur an Baueinheiten!
      // TODO XXXXXX: Auch Feld baustoffBezeichnung updaten
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In updateAngabenZumBaustoffAusgewaehlterBaustoff()");
      if (this.selectedKeyTreeBaustoffe != null) {
        console.log(
          "selectedKeyTreeBaustoffe: ",
          this.selectedKeyTreeBaustoffe
        );
        const apiRoute =
          process.env.API + "/Baustoffe/" + this.selectedKeyTreeBaustoffe;
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBaustoffe'");
        this.$socket.emit("leaveRoom", {
          room: "roomBaustoffe"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBaustoffe'");
        //=========================================================================================================================================
        this.$axios
          .put(/* url, */ apiRoute, {
            // Schickt einen Put-Request an das Backend für Update obiger Felder für die Baustoff
            // baustoffBezeichung: this.selectedNodeTreeBaustoffen
            //  .baustoffBezeichnung,
            baustoffBemerkung: this.selectedNodeTreeBaustoffe.baustoffBemerkung,
            baustoffAusgabeText: this.selectedNodeTreeBaustoffe
              .baustoffAusgabeText // NEU - #381,
          })
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log(
              "Erfolg aus $axios.put, response.status: ",
              response.status
            ); // Status loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_AENDERUNG_ERFOLG
            );
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.put, error: ", error); // Error loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_AENDERUNG_FEHLER
            );
          });
      }
    },

    resetAngabenZumBaustoffAusgewaehlterBaustoff() {
      //--------------------------------------------------------------------------------------------------------------------
      // Macht einen Reset der Felder baustoffBemerkung, baustoffAusgabeText
      // für den ausgewählten Baustoff (Aufruf per Button "Eingaben zurücksetzen" im Tab
      // ACHTUNG: Feld benutzerKennungenAutoren wird an Baustoffen nicht angeboten, nur an Baueinheiten!
      // TODO XXXXXX: Auch Feld baustoffbezeichnung resetten
      // "Angaben zum Baustoff"/früher "Strukturierungsangaben", indem
      // es den bisherigen Wert aus der Datenbank lädt
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetAngabenZumBaustoffAusgewaehlterBaustoff()");
      if (this.selectedKeyTreeBaustoffe != null) {
        console.log("baustoffBezeichnung und _id: ");
        console.log({
          baustoffBezeichnung: this.selectedNodeTreeBaustoffe
            .baustoffBezeichnung, // Das ist die Bezeichnung des ausgewählten Baustoffs, dessen Felder zurückgesetzt werden sollen
          _id: this.selectedKeyTreeBaustoffe // Das ist die id des ausgewählten Baustoff, wird als req.params.id in Request URL eingefügt
        });
        const apiRoute =
          process.env.API + "/Baustoffe/" + this.selectedKeyTreeBaustoffe;
        this.$axios
          .get(/* url */ apiRoute) // Schickt einen Get-Request an das Backend für Lesen der Felder für Baustoff mit _id
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log(
              "Erfolg aus $axios.get, response.status: ",
              response.status
            ); // Status loggen
            console.log("response: ", response);
            // Nun die obigen Felder des ausgewählten Baustoff auf die aus der Datenbank gelesenen Werte resetten:
            this.selectedNodeTreeBaustoffe.baustoffBemerkung =
              response.data.baustoffBemerkung;
            this.selectedNodeTreeBaustoffe.baustoffAusgabeText =
              response.data.baustoffAusgabeText; // NEU - #381
            // HINWEIS: Hier keine Benutzernachricht nötig
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.get, err: ", error); // Status loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_LESEN_FEHLER
            );
          });
      }
    },

    updateBaustoffBeschreibungAusgewaehlterBaustoff() {
      //--------------------------------------------------------------------------------------------------------------------
      // Macht einen Update der Baustoffbeschreibung (Aufruf per Button "Speichern" im Tab "Beschreibung")
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In updateBaustoffBeschreibungAusgewaehlterBaustoff()");
      if (this.selectedKeyTreeBaustoffe != null) {
        console.log(
          "selectedKeyTreeBaustoffe: ",
          this.selectedKeyTreeBaustoffe
        );
        /*
        console.log(
          "baustoffBeschreibung: ",
          this.selectedNodeTreeBaustoffe.baustoffBeschreibung
        );
        */
        // ALT:
        // const url = "http://localhost:8080/api/baustoffe/updateBaustoffBeschreibungBaustoffByBaustoffId";
        // NEU:
        const apiRoute =
          process.env.API +
          "/Baustoffe/" +
          this.selectedKeyTreeBaustoffe +
          "/Beschreibung";
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBaustoffe'");
        this.$socket.emit("leaveRoom", {
          room: "roomBaustoffe"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBaustoffe'");
        //=========================================================================================================================================
        this.$axios
          .put(/* url, */ apiRoute, {
            // Schickt einen Put-Request an das Backend für Update des Felds baustoffBeschreibung für Baustoff
            baustoffBeschreibung: this.selectedNodeTreeBaustoffe
              .baustoffBeschreibung
            // _id: this.selectedKeyTreeBaustoffe
          })
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log(
              "Erfolg aus $axios.put, response.status: ",
              response.status
            ); // Status loggen
            // Nun auch die Baustoffbeschreibung im global Store updaten, damit sie in der fachlichen Hilfe reaktiv angezeigt wird:
            globalStore.setBaustoffBeschreibungAusgewaehlterBaustoff(
              this.selectedNodeTreeBaustoffe.baustoffBeschreibung
            );
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_BESCHREIBUNG_AENDERUNG_ERFOLG
            );
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.put, error: ", error); // Error loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_BESCHREIBUNG_AENDERUNG_FEHLER
            );
          });
      }
    },

    resetBaueigenschaftsBeschreibungAusgewaehlteBaueigenschaft() {
      //------------------------------------------------------------------------------------------------------------------------------
      // Macht einen Reset der Baustoffbeschreibung (Aufruf per Button "Zurücksetzen" im Tab "Baueigenschaften > Beschreibung"), indem
      // es den bisherigen Wert aus der Datenbank lädt
      //------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In resetBaueigenschaftsfBeschreibungAusgewaehlteBaueigenschaft()"
      );
      if (this.selectedKeyTreeBaustoffe != null) {
        console.log("baueigenschaftsBezeichnung und _id: ");
        console.log({
          baueigenschaftsBezeichnung: this.ausgewaehlteBaueigenschaft
            .typbezogeneBaueigenschaft.baueigenschaftsBezeichnung,
          // Das ist die Bezeichnung der ausgewählten Baueigenschaft, deren Beschreibung zurückgesetzt werden soll
          _id: this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft._id // NEU - ohne Flattening
          // _id: this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaftId // ALT - mit Flattening
          // Das ist die id der referenzierten (typbezogenen) Baueigenschaft, wird als req.params._id in Request URL eingefügt
        });

        const apiRoute =
          process.env.API +
          "/Baueigenschaften/" +
          this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft._id + // NEU - ohne Flattening
          // this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaftId + // ALT - mit Flatteining
          "/Beschreibung";
        this.$axios
          .get(/* url */ apiRoute) // Schickt einen Get-Request an das Backend für Lesen des Felds baueigenschaftsBeschreibung für Baueigenschaft mit _id
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log(
              "Erfolg aus $axios.get, response.status: ",
              response.status
            ); // Status loggen
            console.log("response: ", response);
            // Nun das Feld für die Baueigenschaftsbeschreibung der ausgewählten Baueigenschaft auf den aus der Datenbank gelesenen Wert resetten:
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.baueigenschaftsBeschreibung =
              response.data.baueigenschaftsBeschreibung;
            // HINWEIS: Hier keine Benutzernachricht nötig
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.get, err: ", error); // Status loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEIGENSCHAFT_LESEN_FEHLER
            );
          });
      }
    },

    resetBaustoffBeschreibungAusgewaehlterBaustoff() {
      //--------------------------------------------------------------------------------------------------------------------
      // Macht einen Reset der Baustoffbeschreibung (Aufruf per Button "Zurücksetzen" im Tab "Beschreibung"), indem
      // es den bisherigen Wert aus der Datenbank lädt
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetBaustoffBeschreibungAusgewaehlterBaustoff()");
      if (this.selectedKeyTreeBaustoffe != null) {
        console.log("baustoffBezeichnung und _id: ");
        console.log({
          baustoffBezeichnung: this.selectedNodeTreeBaustoffe
            .baustoffBezeichnung, // Das ist die Bezeichnung des ausgewählten Baustoffs, dessen Beschreibung zurückgesetzt werden soll
          _id: this.selectedKeyTreeBaustoffe // Das ist die id des ausgewählten Baustofffs, wird als req.params.id in Request URL eingefügt
        });
        // ALT:
        // const url = "http://localhost:8080/api/baustoffe/readBaustoffBeschreibungBaustoffByBaustoffId/" + this.selectedKeyTreeBaustoffe;
        // NEU:
        const apiRoute =
          process.env.API +
          "/Baustoffe/" +
          this.selectedKeyTreeBaustoffe +
          "/Beschreibung";
        this.$axios
          .get(/* url */ apiRoute) // Schickt einen Get-Request an das Backend für Lesen des Felds baustoffBeschreibung für Baustoff mit _id
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log(
              "Erfolg aus $axios.get, response.status: ",
              response.status
            ); // Status loggen
            console.log("response: ", response);
            // Nun das Feld für die Baustoffbeschreibung des ausgewählten Baustoffs auf den aus der Datenbank gelesenen Wert resetten:
            this.selectedNodeTreeBaustoffe.baustoffBeschreibung =
              response.data.baustoffBeschreibung;
            // HINWEIS: Hier keine Benutzernachricht nötig
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.get, err: ", error); // Status loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_LESEN_FEHLER
            );
          });
      }
    },

    getWerteVonBaueigenschaft(baueigenschaft) {
      //-----------------------------------------------------------------------------------------------------------------------
      // Liest die Werte einer Baueigenschaft (baueigenschaft) in Abhängigkeit vom gesetzten Wertetyp und returned diese
      //-----------------------------------------------------------------------------------------------------------------------
      let vererbteWerte = {};
      console.log("In getWerteVonBaueigenschaft()");
      console.log(baueigenschaft);
      switch (baueigenschaft.typbezogeneBaueigenschaft.werteTyp) {
        case "Kennwert":
          vererbteWerte.kennWert1 = baueigenschaft.kennWert1;
          // vererbteWerte.symbol = baueigenschaft.symbol;
          // vererbteWerte.einheit = baueigenschaft.einheit;
          // vererbteWerte.operator = baueigenschaft.operator;
          // vererbteWerte.formel = baueigenschaft.formel; // NEU
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          break;
        case "Kennwertepaar":
          vererbteWerte.kennWert1 = baueigenschaft.kennWert1;
          vererbteWerte.kennWert2 = baueigenschaft.kennWert2;
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          vererbteWerte.bezeichnungsWert2 = baueigenschaft.bezeichnungsWert2;
          break;
        case "Datumswert":
          vererbteWerte.datumsWert1 = baueigenschaft.datumsWert1;
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          break;
        case "Datumswertepaar":
          vererbteWerte.datumsWert1 = baueigenschaft.datumsWert1;
          vererbteWerte.datumsWert2 = baueigenschaft.datumsWert2;
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          vererbteWerte.bezeichnungsWert2 = baueigenschaft.bezeichnungsWert2;
          break;
        case "Tageszeitwert": // NEU
          vererbteWerte.tagesZeitWert1 = baueigenschaft.tagesZeitWert1;
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          break;
        case "Tageszeitwertepaar": // NEU
          vererbteWerte.tagesZeitWert1 = baueigenschaft.tagesZeitWert1;
          vererbteWerte.tagesZeitWert2 = baueigenschaft.tagesZeitWert2;
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          vererbteWerte.bezeichnungsWert2 = baueigenschaft.bezeichnungsWert2;
          break;
        case "Bezeichnungswert":
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          break;
        case "Bezeichnungswertepaar":
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          vererbteWerte.bezeichnungsWert2 = baueigenschaft.bezeichnungsWert2;
          break;
        case "Aufzählungswert":
          // console.log("Aufzählungswert");
          vererbteWerte.aufzaehlungsWert = baueigenschaft.aufzaehlungsWert;
          // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          break;
        case "Wahrheitswert":
          vererbteWerte.wahrheitsWert = baueigenschaft.wahrheitsWert;
          // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          break;
      }
      return vererbteWerte;
    },

    pruefeAktivierungFuerAusgewaehlteBaueigenschaft() {
      //--------------------------------------------------------------------------------------------------------------------
      // Prüft am Frontend ab, welche Werte eine Baueigenschaft eines Baustoffs im Baum beim Aktivieren erbt.
      // Dazu wird der Baum von der Wurzel bis zum aktuell gewählten Baustoff auf dem Pfad (path) durchlaufen.
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In pruefeAktivierungFuerAusgewaehlteBaueigenschaft()");
      let idsBaustoffeToLookAt = this.selectedNodeTreeBaustoffe.path.split("#");
      console.log(
        `Die folgenden Baustoffe im Pfad werden der Reihe nach durchwandert: ${idsBaustoffeToLookAt}`
      );
      let idBaueigenschaftToLookAt = this.ausgewaehlteBaueigenschaft
        .typbezogeneBaueigenschaft._id;
      let notFoundYet = true;
      let idsZuAktivierendeBaustoffe = [];
      let idsZuDefinierendeBaustoffe = [];
      let currentlyInspectedNodeTreeBaustoffe = this.nodesTreeBaustoffe[0];
      let currentlyInspectedMaterialeigenschaftInCurrentlySelectedBaustoff;
      let unmittelbareElternBaueigenschaft = null;
      let definierteElterneigenschaft;
      for (var i = 0; i < idsBaustoffeToLookAt.length - 1; i++) {
        // Betrachte nur Knoten über dem ausgewählten Baustoff
        // Finde die Eigenschaft in dem aktuellen in der Schleife betrachteten Baustoff
        currentlyInspectedMaterialeigenschaftInCurrentlySelectedBaustoff = currentlyInspectedNodeTreeBaustoffe.baueigenschaften.find(
          arg => {
            if (
              arg.typbezogeneBaueigenschaft._id === idBaueigenschaftToLookAt
            ) {
              return true;
            }
          }
        );
        // Falls wir am direkten Elternknoten sind, notieren wir diese Eigenschaft:
        if (i === idsBaustoffeToLookAt.length - 2) {
          unmittelbareElternBaueigenschaft = currentlyInspectedMaterialeigenschaftInCurrentlySelectedBaustoff;
          console.log(
            "Die Eigenschaft am unmittelbaren Elternbaustoff: ",
            unmittelbareElternBaueigenschaft
          );
        }
        if (
          currentlyInspectedMaterialeigenschaftInCurrentlySelectedBaustoff.aktiviertNichtDeaktiviert
        ) {
          // Falls wir noch keine definierte Eigenschaft gefunden haben, speichern wir die erste definierte gefundene Eigenschaft, da alle darunterliegenden den Wert von dieser erben
          if (notFoundYet) {
            if (
              currentlyInspectedMaterialeigenschaftInCurrentlySelectedBaustoff.definiertNichtUndefiniert
            ) {
              definierteElterneigenschaft = {
                baueigenschaft: currentlyInspectedMaterialeigenschaftInCurrentlySelectedBaustoff,
                baustoffBezeichnung:
                  currentlyInspectedNodeTreeBaustoffe.baustoffBezeichnung
              };
              notFoundYet = false;
            } else {
              // Hier ist nichts zu tun
              // idsZuDefinierendeBaustoffe.push({
              //   baueigenschaft: currentlyInspectedMaterialeigenschaftInCurrentlySelectedBaustoff,
              //   baustoffBezeichnung: currentlyInspectedNodeTreeBaustoffe.baustoffBezeichnung
              // })
            }
          } else {
            console.log(
              "Definierter Wert bereits gefunden. Alle im Baum tiefer liegenden Knoten müssen diesen Wert automatisch ererbt haben, sofern sie aktiviert sind."
            );
          }
        } else {
          console.log(
            "Eigenschaft ist deaktiviert, deshalb wäre eine Aktivierung nötig, um Werte definieren zu können."
          );
          idsZuAktivierendeBaustoffe.push({
            baueigenschaft:
              currentlyInspectedMaterialeigenschaftInCurrentlySelectedBaustoff
                .typbezogeneBaueigenschaft.baueigenschaftsBezeichnung,
            baustoffBezeichnung:
              currentlyInspectedNodeTreeBaustoffe.baustoffBezeichnung
          });
          if (!notFoundYet) {
            console.log(
              "Da bereits ein Elternknoten gefunden wurde, der definiert ist. Bei einer Aktivierung werden dessen Werte ererbt."
            );
            idsZuDefinierendeBaustoffe.push({
              baueigenschaft:
                currentlyInspectedMaterialeigenschaftInCurrentlySelectedBaustoff
                  .typbezogeneBaueigenschaft.baueigenschaftsBezeichnung,
              baustoffBezeichnung:
                currentlyInspectedNodeTreeBaustoffe.baustoffBezeichnung
            });
          } else {
            console.log(
              "Es wurde noch kein definierter Elternknoten gefunden. "
            );
          }
        }
        // Gehe zum nächsten Verwandten in der Baumhierachie
        if (i + 1 <= idsBaustoffeToLookAt.length - 1) {
          console.log(
            "currentlyInspectedMaterialeigenschaftInCurrentlySelectedBaustoff:",
            currentlyInspectedMaterialeigenschaftInCurrentlySelectedBaustoff
          );
          currentlyInspectedNodeTreeBaustoffe = currentlyInspectedNodeTreeBaustoffe.children.find(
            arg => {
              if (arg._id === idsBaustoffeToLookAt[i + 1]) {
                return true;
              } else {
                return false;
              }
            }
          );
        }
      }
      // Bis hier wurde gesucht, ob eine definierte Elterneigenschaft vorhanden ist - dies wird nun abgefragt:
      if (definierteElterneigenschaft != null) {
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.relevanteKennwerte = this.getWerteVonBaueigenschaft(
          definierteElterneigenschaft.baueigenschaft
        );
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.ausgewaehlteBaueigenschaftKannEigeneWerteDefinieren = false;
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.ausgewaehlteBaueigenschaftIstDirektAktivierbar =
          unmittelbareElternBaueigenschaft.aktiviertNichtDeaktiviert;
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.unmittelbareElternBaueigenschaft = unmittelbareElternBaueigenschaft;
        console.log(
          "Es wurde eine definierte Elterneigenschaft gefunden",
          definierteElterneigenschaft,
          "Die Werteeingabe ist deshalb nicht möglich."
        );
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.idsZuAktivierendeBaustoffe = idsZuAktivierendeBaustoffe;
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.idsZuDefinierendeBaustoffe = idsZuDefinierendeBaustoffe;
        console.log(
          "Damit die Werte ererbt werden können, muss die Eigenschaft in folgenden Baustoffen aktiviert werden:",
          idsZuAktivierendeBaustoffe
        );
        console.log(
          "Die folgenden Baustoffe erben dabei die Werte vom obersten definierten Elternbaustoff",
          idsZuDefinierendeBaustoffe
        );
      } else {
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.ausgewaehlteBaueigenschaftKannEigeneWerteDefinieren = true;
        if (unmittelbareElternBaueigenschaft != null) {
          this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.ausgewaehlteBaueigenschaftIstDirektAktivierbar =
            unmittelbareElternBaueigenschaft.aktiviertNichtDeaktiviert;
          this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.unmittelbareElternBaueigenschaft = unmittelbareElternBaueigenschaft;
        } else {
          this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.ausgewaehlteBaueigenschaftIstDirektAktivierbar = true;
          this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.unmittelbareElternBaueigenschaft = null;
        }
        console.log(
          "Es wurde keine definierte Elterneigenschaft gefunden. Die Werteeingabe ist deshalb möglich."
        );
        console.log(
          "Die Eigenschaft muss dazu in folgenden Baustoffen aktiviert werden:",
          idsZuAktivierendeBaustoffe
        );
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.idsZuAktivierendeBaustoffe = idsZuAktivierendeBaustoffe;
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.idsZuDefinierendeBaustoffe = idsZuDefinierendeBaustoffe;
      }
      // }
    },
    //--------------------------------------------------------------------------------------------------------------------
    // Methode notifyTopicContextHelp
    // TODO: Experimentell, für Test Kontexthilfe
    // Feuert einen Event an Global Event Bus, der in MyLayout.vue konsumiert wird und dort das Kontexthilfethema setzt
    // für eventuelle Anzeige durch rechten Drawer
    //--------------------------------------------------------------------------------------------------------------------
    notifyTopicContextHelp(topicContextHelp) {
      console.log("In notifyTopicContextHelp()");
      console.log("Emit Event ist disabled zugunsten global Store!");
      // this.$root.$emit("notifyTopicContextHelpEvent", topicContextHelp); // ACHTUNG: Unbedingt $root notwendig, da Cross-Component Event (Use Bus)
    },

    //--------------------------------------------------------------------------------------------------------------------
    // Methode showBedienungsHilfe(ref)
    // NEU: Für Öffnen Bedienungshilfethema im rechten Drawer
    // Feuert einen Event an Global Event Bus, der in my-layout.vue konsumiert wird und dort das q-expansion-item, das
    // per Parameter ref identifiziert wird, öffnet für eventuelle Anzeige durch rechten Drawer
    //--------------------------------------------------------------------------------------------------------------------
    showBedienungsHilfe(ref) {
      console.log("In showBedienungsHilfe()");
      console.log(
        "Emit Event showBedienungsHilfeEvent mit String-Parameter ref: ",
        ref
      );
      this.$root.$emit("showBedienungsHilfeEvent", ref); // ACHTUNG: Unbedingt $root notwendig, da Cross-Component Event (Use Bus)
    },

    //--------------------------------------------------------------------------------------------------------------------
    // Methode showFachlicheHilfe(ref)
    // NEU: Für Öffnen fachliches Hilfethema im rechten Drawer
    // Feuert einen Event an Global Event Bus, der in my-layout.vue konsumiert wird und dort das q-expansion-item, das
    // per Parameter ref identifiziert wird, öffnet für eventuelle Anzeige durch rechten Drawer
    //--------------------------------------------------------------------------------------------------------------------
    showFachlicheHilfe(ref) {
      console.log("In showFachlicheHilfe()");
      console.log(
        "Emit Event showFachlicheHilfeEvent mit String-Parameter ref: ",
        ref
      );
      this.$root.$emit("showFachlicheHilfeEvent", ref); // ACHTUNG: Unbedingt $root notwendig, da Cross-Component Event (Use Bus)
    },

    //--------------------------------------------------------------------------------------------------------------------
    // NEU: Methoden für den QTree für die Auswahl von zugeordneten Rohstoffe im Tab "Zugeordnete Rohstoffe"
    //--------------------------------------------------------------------------------------------------------------------
    resetFilterTreeRohstoffe() {
      //--------------------------------------------------------------------------------------------------------------------
      // Filter-Methode für QTree, siehe https://quasar.dev/vue-components/tree#Example--Filtering-nodes
      //--------------------------------------------------------------------------------------------------------------------
      this.filterTreeRohstoffe = "";
      this.$refs.filterTreeRohstoffe.focus();
    },

    loadTreeRohstoffe(show) {
      //-------------------------------------------------------------------------------------------------------------------------------------------
      // Methode - lädt den Baum für die Rohstoffe aus der Datenbank (nur Extrakt von Feldern - wichtig, da hier sehr viele Knoten geholt werden!)
      // Dieser ist eigentlich ein Unterbaum des Baustoffbaums, wird aber im Tab "Zugeordnete Rohstoffe" als eigener Baum dargestellt
      // ACHTUNG: Es erfolgt ein mehrfacher Aufruf der Funktion (tricky!!!):
      // 1. aus watch für selectedKeyTreeBaustoffe - nötig, wenn der ausgewählte Knoten im Baum sich ändert - bei Aufruf dort kann jedoch, wenn das
      //    Tab "Zugeordnete Rohstoffe" noch nicht angewählt wurde, der Code nicht den Rohstoffbaum dort mit den zugeordneten Rohstoffen aktualisieren, da
      //    dieser dann noch gar nicht geladen ist! Umgekehrt muss dieser Aufruf aber den Baum in diesem Tab aktualisieren, falls es aktuell
      //    ausgewählt ist!
      // 2. aus Tab-Initialisierung bei Anwahl des Tabs "Zugeordnete Baustoffe" - das ist nötig trotz 1., da bei 1. das Tab noch nicht ausgewählt sein muss!!!
      // 3. bei "Zurücksetzen" im Tab "Zugeordnete Rohstoffe"
      // Dies wurde noch optimiert, indem die Funktion aufgeteilt wird in 2 Teile (Teil 2 ist jetzt separate Funktion showTreeBaustoffe())
      // - Teil 1: nodesTreeRohstoffe vom Backend laden, tickedKeys ermitteln
      // - Teil 2: Am Ende von Teil 1 (muss im selben .then sein!), aber auch in separater Funktion showTreeRohstoffe()
      //           Den Rohstoffbaum rendern und expandieren, dafür expandedKeys ermitteln -
      //           Allerdings sollte dieses Rendern nur einmal passieren, d.h. bei Tab-Wechsel nicht nochmals!
      // Die Aufrufe damit:
      //                         Teil 1            Teil 2
      // Watch                   ja                Nachdem Teil 1 (asynchron, .then!) zu Ende ist, und nur, wenn Tab "Zugeordnete Rohstoffe" ausgewählt ist -
      //                                           dies wird aber abgefangen in der Funktion expandTickedNodesTreeRohstoffe()
      //                                           per Prüfung "if (this.$refs.TreeRohstoffe !== undefined)"
      // Tab-Anwahl              nein              ja - dieser Teil muss dann separat von Teil 1 aufrufbar sein!
      // Tab-Zurücksetzen        ja                Nachdem Teil 1 (asynchron, .then!) zu Ende ist
      //
      // Teil 2 nun separat aufrufbar gemacht in Funktion showTreeRohstoffe()
      //-------------------------------------------------------------------------------------------------------------------------------------------
      // NEU (15.04.20): Nur die ticked Nodes expandieren, da der Baum sehr groß werden kann!
      //-------------------------------------------------------------------------------------------------------------------------------------------
      // Parameter: show: Boolean
      // show === true:  Rendered den (ggf. mit ticked Nodes expandierten) Rohstoffbaum
      // show === false: Initialisiert nur den Baum (nodesTreeRohstoffe) und die tickedNodesTreeRohstoffe
      // Mit show === false kann Teil 2 abgeklemmt werden
      // Allerdings ist Teil 2 im .then-Zweig und kann hier somit nicht separat aufgerufen werden ohne Teil 1 - deshalb wurde er in die separate
      // Funktion showTreeRohstoffe() ausgelagert.
      // Dieser Parameter war temporär notwendig, weil, falls der Rohstoffbaum gleich geladen wurde, ohne dass das entsprechende Tab
      // offen war, ein Fehler kam "Error in render: "TypeError: Cannot read property 'expandAll' of undefined"
      // Dieser Fall wird nun in expandTickedNodesTreeRohstoffe() abgefangen durch eine Abfrage "if (this.$refs.treeRohstoffe !== undefined)"
      // NEU: Aktuell wird die Funktion nur noch mit show === true aufgerufen! Den Parameter trotzdem einstweilen belassen.
      //-------------------------------------------------------------------------------------------------------------------------------------------
      console.log("In loadTreeRohstoffe(show) - Parameter show: ", show);
      this.expandedKeysTreeRohstoffe = []; // @sts: 15.04.20
      // TODO XXXXXX - im Log auf Heroku erfolgt aus unbekanntem Grund der folgende Axios Call (per Request Interceptor) manchmal erst mit
      // Delay nach dem obigen console.log beim Start von loadTreeRohstoffe()!
      // Noch dramatischer ist dieser Delay bei der analogen Funktion in baueinheiten.vue
      // Dies könnte daran liegen, dass der große, responsive Array nodesTreeRohsoffe dort komplett refreshed wird (falls das
      // Tab "Zugeordnete Rohstoffe" angewählt ist)
      // NEU: Hier erst mal Spinner Gears zeigen, da die Funktion so lange dauern kann!!!
      // Temporär disabled, da eventuell ursächlich für obigen Delay, oder Konflikt mit dem Spinner im Request Interceptor!!!
      /*
      Loading.show({
        spinner: QSpinnerGears,
        // delay: 200 // ms, Default ist 500 ms, bevor Loading den Spinner zeigt
        // other props
      });
      console.log("Nach Loading.show(), vor API-Call");
      */
      const apiRoute = process.env.API + "/Baustoffe/Rohstoffe/Extrakt";
      this.$axios
        .get(apiRoute)
        .then(response => {
          console.log("response.data: ", response.data);
          this.nodesTreeRohstoffe = response.data;

          // ACHTUNG: Die ursprünglichen Custom Checkboxes waren per Tests erst wirksam, wenn jedes Objekt in nodesTreeRohstoffe
          // ein Feld ticked hatte, das anfangs auf false gesetzt werden musste, sonst zeigten alle diese Custom Checkboxes im QTree
          // anfangs "indeterminate"  an!!!
          // Dieses wird von den bei Angabe einer tick-strategy am q-tree von Quasar
          // generierten Checkboxes für das Ticking NICHT benötigt, daher zusammen mit den Custom Checkboxes wieder auskommentiert!

          // Feld ticked zu allen Nodes hinzufügen mittels:
          // Function to add field ticked=false to all objects in nested array (with field "children" for nested objects):
          // Siehe https://stackoverflow.com/questions/14367101/how-to-add-property-to-nested-javascript-array-of-objects
          /*
          function addTicked(val) {
            val["ticked"]=false;
            for (var i = 0, len = val.children.length; i < len; i++) {
                addTicked(val.children[i])
            }
          };
          addTicked(this.nodesTreeRohstoffe[0]); // Fügt ticked: false zu allen Nodes inklusive dem Wurzelknoten des Rostoffunterbaums hinzu
          console.log("nodesTreeRohstoffe: ", this.nodesTreeRohstoffe); // Zur Überprüfung, ob ticked überall gesetzt wurde
          */

          // this.tickedKeysTreeRohstoffe = []; // ALT - confirmed, dass alle Nodes unticked sind
          this.tickedKeysTreeRohstoffe.splice(
            0,
            this.tickedKeysTreeRohstoffe.length
          ); // NEU: Sicherheitshalber Array mit reaktiver Methode leeren!!!
          // Zu Array Methoden und Vue siehe https://stackoverflow.com/questions/42807888/vuejs-and-vue-set-update-array
          // console.log("tickedKeysTreeRohstoffe: ", this.tickedKeysTreeRohstoffe);

          // this.expandedKeysTreeRohstoffe.splice(0, this.expandedKeysTreeRohstoffe.length); // Disabled - NICHT leeren, führte zu reaktivem Kollabieren des Arrays

          //-------------------------------------------------------------------------------------
          // Finde alle ids in nodesTreeRohstoffe:
          // Siehe https://stackoverflow.com/questions/52363138/get-all-key-values-from-multi-level-nested-array-javascript:
          // Diese wurden urspürnglich gebraucht, um per QTree API setTicked alle Nodes auf unticked zu setzen. Stellt sich mit den von Quasar
          // generierten Checkboxes im Tree auch bei Verwendung von Slots für den Tree als überflüssig heraus, daher disabled:
          /*
          var idsInTreeRohstoffe = [];
          JSON.stringify(this.nodesTreeRohstoffe, (key, value) => {
            if (key === '_id') idsInTreeRohstoffe.push(value);
            return value;
          });
          console.log("idsInTreeRohstoffe: ", idsInTreeRohstoffe);
          this.$nextTick(() => { // Überflüssig - Array tickedLeysTreeBaustoffe ist vorher und nachher leer!!!
            this.$refs.treeRohstoffe.setTicked(idsInTreeRohstoffe, false); // Unticked alle
            console.log("nodesTreeRohstoffe nach'setTicked(idsInTreeRohstoffe, false)': ", this.nodesTreeRohstoffe);
          });
          */

          //---------------------------------------------------------------------------------------------------------------------------------------
          // Start Code für expermimentelle Tests mit Quasar Extension q-hierarchy - disabled, hat sich nicht bewährt (siehe unten)
          // Siehe https://quasar-qhierarchy.netlify.com/docs
          // QHierarchy initialisieren - wieder disabled:
          // console.log("nodesTreeRohstoffe: ", this.nodesTreeRohstoffe);

          // this.dataHierarchyRohstoffe = this.nodesTreeRohstoffe; // Vorläufig, später müssen hier die zugeordneten Rohstoffe vom
          // Backend geholt werden, ebenfalls als Tree
          // Dazu muss am Backend ein Algorithmus zum Einsatz kommen, der die MPath-Pfade aller getickten Rohstoffe als Input nimmt,
          // und daraus einen verschachtelten Array (mit children-Feldern) als Input für q-hierarchy erzeugt:
          // Design:
          // 1. Die Gesamtmenge der vom Ticking betroffenen Knoten bestimmen als die Vereinigungsmenge aller ids in Pfaden der ticked Rohstoffe:
          //    var idsInPathsOfAllTickedNodesTreeRohstoffe = [];
          //    Durch paths aller zugeordneten Rohstoffe eines Baustoffs iterieren:
          //    Für jeden path den Pfad aufsplitten und die resultierenden ids in Array zwischenspeichern:
          //      var idsInPathOfSingleTickedNodeTreeRohstoffe = ausgewaehlterBaustoff.zugeordneteRohstoffe[i].path.split("#"); // Array!!!
          //      idsInPathOfSingleTickedNodeTreeRohstoffe der Gesamtmenge hinzufügen, z.B. mit spread Operator:
          //        idsInPathsOfAllTickedNodesTreeRohstoffe.push(...idsInPathOfSingleTickedNodeTreeRohstoffe)
          // 2. Dann alle duplicate ids in der Gesamtmenge aus 1. eliminieren:
          //    Siehe dazu: https://stackoverflow.com/questions/1960473/get-all-unique-values-in-a-javascript-array-remove-duplicates,
          //    ebenfalls mit ES6 spread Operator:
          //    var uniqueIdsInPathsOfAllTickedNodesTreeRohstoffe = [...new Set(idsInPathsOfAllTickedNodesTreeRohstoffe)]
          // 3. Gesamten Rohstoffunterbaum per getChildrenTree holen als Quell-Array treeRohstoffe (TBD: diesen nach Ziel-Array kopieren)
          // 4. Den Quell-Array rekursiv durchwandern - wenn ein Knoten gefunden wird, dessen id NICHT in obiger Gesamtmenge enthalten ist,
          //    im Quell-Array nicht mehr tiefer gehen und diesen Knoten samt Kindern aus dem Quell-Array entfernen
          //    ACHTUNG: Array-Methode filter ist non-mutating und liefert neuen Array zurück!!!
          //    Siehe https://stackoverflow.com/questions/42005096/js-remove-object-from-nested-array-and-return-parent-array (filter)
          //    und https://stackoverflow.com/questions/237104/how-do-i-check-if-an-array-includes-a-value-in-javascript (includes):
          //    var id = currentNode._id
          //    if (!uniqueIdsInPathsOfAllTickedNodesTreeBaustoffe.includes(id)) { // id ist nicht enthalten in obiger Gesamtmenge
          //      treeRohstoffe.forEach(function(o) {
          //         o.children = o.children.filter(s => s.id !== id); // Filtert Objekt mit id aus dem Array der children
          //      })
          //     }
          // 5. ACHTUNG: Es könnten dabei leere Kinder übrig bleiben. Das könnte man das mit if (o.children = []) {} abfragen
          //    Eventuell erledigt obiges filter dies auch gleich!
          //    Außerdem haben Blattknoten schon heute children: [] und q-hierarchy kann damit umgehen!
          //    Siehe https://stackoverflow.com/questions/48633792/filter-empty-array-object
          //    und https://stackoverflow.com/questions/281264/remove-empty-elements-from-an-array-in-javascript?noredirect=1&lq=1
          // 6. Übrigbleibende Knoten sind Input für q-hierarchy

          // ACHTUNG: Restriktionen von q-hierarchy:
          // a) q-hierarchy macht wohl nur mit Tick Strategy "leaf" Sinn, bei "strict" müsste man sonst in der q-hierarchy über ein zusätzliches
          //    Feld anzeigen, welche Verzweigungsknoten geticked sind, und welche nur angezeigt werden, weil Kindknoten davon geticked sind
          // a) q-hierarchy hat keine Default Expansion und auch kein API dafür, d.h. der Benutzer muss immer erst alles manuell expandieren mittels "+" Icons!
          // b) Probleme mit Änderungen von Feldern, z.B. dem vorgesehenen "Anteil", es gibt kinen selectedKey wie in einer q-table, mit dem man pro Zeile´
          //    verzweigen könnte in ein Tab zur Bearbeitung der dem ausgewählten Rohstoff entsprechenden Beziehung zwischen Baustoff und Rohstoff!
          // c) Damit kann man auch später nicht einen Router-Link zum Anzeigen des Rohstoffs im Tab Baustoffe hinzufügen!!!
          // d) Unklar, ob CSS Styling von QHierarchy per SASS (Färbung, stick Columns) so gut geht wie bei QTable
          // ==> Daher ratsam, wohl doch eine q-table statt q-hierarchy zu nehmen und in dieser q-tab evtl. die Rohstoffbezeichnung des/der Parents pro Zeile
          //     mit anzeigen, o.ä., um dem Benutzer Zusatzinformationen zu geben, welcher Rohstoff im Rohstoffbaum geticked ist
          // HINWEIS: q-table könnte sogar mit Tick Strategy "strict" arbeiten, die erlauben würde, auch Verzweigungsknoten zu ticken
          //          Allerdings verwirrt dies eventuell den Benutzer, da damit beliebige Kombinationen möglich sind!!!

          // GEWÄHLTE WEITERE ALTERNATIVE: Den q-tree zur Auswahl von Rohstoffen zur permanenten Anzeige der ausgewählten Rohstoffe verwenden
          // und tickedNodesTreeRohstoffe dafür auslesen/abspeichern aus/nach selectedNodeTreeBaustoffe.zugeordneteRohstoffe (ACHTUNG: Array von Objekten)
          //
          // Im Body Slot eines Knotens dann zusätzliche Felder anzeigen, z.B. anteilVonRohstoffInBaustoff, etc.
          // RISIKO: Braucht aber ohne lazy Loading wahrscheinlich ordentlich Speicher, pro Baustoff

          // ACHTUNG: Siehe https://stackoverflow.com/questions/45730610/vue-js-best-way-to-update-entire-array
          // ACHTUNG: Mit der folgenden Zuweisung ändert sich der jeweils andere Array, wenn einer der Arrays verändert wird!!!
          // console.log("dataHierarchyRohstoffe: ", this.dataHierarchyRohstoffe);
          //------------------------------------------------------------------------------------------------------------------------ (Ende Code für QHierarchy)

          // ids für den Array tickedKeysTreeRohstoffe für den Rohstoffbaum aus zugeordneteRohstoffe extrahieren (Array of Objects):
          this.tickedKeysTreeRohstoffe = this.selectedNodeTreeBaustoffe.zugeordneteRohstoffe.map(
            a => a.referenzAufRohstoffInBaustoff
          );
          console.log(
            "tickedKeysTreeRohstoffe nach map: ",
            this.tickedKeysTreeRohstoffe
          );

          //-----------------------------------------------------------------------------------------------------------------------------------------------------
          // NEU: Erweiterte Felder and der Beziehung zwischen dem Baustoff und einem zugeordneten Rohstoff setzen an ticked Nodes im Rohstoffbaum:
          //-----------------------------------------------------------------------------------------------------------------------------------------------------
          // ALT:
          // Die 3 erweiterten Felder im Model (anteilVonRohstoffInBaustoff, symbolVonRohstoffInBaustoff, einheitVonRohstoffInBaustoff) wurden im
          // Frontend noch nicht angezeigt und konnten damit auch nicht updated werden.

          // ACHTUNG: Diese 3 Felder sind aktuell in den Testdaten NICHT an allen Knoten auch definiert, denn zugeordneteRohstoffe wird in server.js in den
          // Testdaten nur für EINEN Testbaustoff "Putze, Mörtel, Estriche, Kleber und Beschichtungen" gesetzt, es ist sonst [], wie man im Debug Mode sieht,
          // schlimmstenfalls undefined! Dies also muss beim Rendern im Template unbedingt abgefangen werden!!

          // NEU:
          // Sie müssen nun in den Rohstoffbaum (nodesTreeRohstoffe) pro ausgewähltem Baustoff mit aufgenommen werden.
          // Das initiale Laden des Rohstoffbaums erfolgt hier in der
          // Methode loadTreeRohstoffe - schon hier könnte man entweder im Backend (Methode readExtraktRohstoffe) alle diese Felder für alle Knoten im
          // Rohstoffbaum anlegen, dann allerdings müssten sie zunächst mit null initialisiert werden, oder man fügt sie hier im Frontend dem Rohstoffbaum
          // hinzu für alle Knoten. Aber: Tatsächlich gebraucht werden sie (pro ausgewähltem Baustoff) NUR für die getickten Rohstoffe, deshalb hier zunächst
          // darauf verzichtet.

          // Sie müssen also am Frontend für die getickten Knoten mit den passenden Werten gefüllt werden, am Besten hier, wenn tickedKeysTreeRohstoffe gesetzt wird,
          // in loadTreeRohstoffe - dazu müssen diese Werte aus selectedNodeTreeBaustoffe, wo sie für früher getickte Rohstoffe des Baustoffs bereits vorliegen
          // (denn sie werden am Backend von readRohstoff für den betreffenden Baustoff mit ans Frontend übergeben, auch ohne weiteres populate dort der
          // Referenzen auf Rohstoffe, UND sie werden HIER in dieser Methodee weiter unten im Code auch schon berücksichtigt, allerdings noch vorläufig mit null
          // belegt), auch an den entsprechenden getickten Knoten in nodesTreeRohstoffe EINGEFÜGT werden! Dazu nun folgender Ansatz:

          // Es muss dazu dieser nested Array of Objects nodesTreeRohstoffe traversiert werden und die 3 Felder pro getickter id (= Feld referenzAufRohstoffInBaustoff)
          // in den betreffenden getickten Knoten in nodesTreeRohstoffe eingefügt werden - es handelt sich um ein Pendant zu dem Code weiter unten, in der
          // umgekehrten Richtung:

          // Zunächst Schleife über den Array der zugeordneten Rohstoffe des ausgewählten Baustoffs, um daraus die erweiterten Felder zu holen.
          // Die erweiterten Felder für jeden zugeordneten Rohstoff inklusive des id-Felds des jeweiligen Rohstoffs in referenzAufRohstoffInBaustoff werden
          // dabei in einem Array zwischengespeichert.

          // HINWEIS: Die Objekte in zugeordneteRohstoffe enthalten ein eigenes von Mongoose hinzugefügtes _id-Feld, das aber hier nicht gebraucht wird

          console.log(
            "Vor for-Schleife auf zugeordneten Rohstoffen des ausgewählten Baustoffs"
          );
          console.log(
            "selectedNodeTreeBaustoffe.zugeordneteRohstoffe: ",
            this.selectedNodeTreeBaustoffe.zugeordneteRohstoffe
          );
          console.log(
            "tickedKeysTreeRohstoffe: ",
            this.tickedKeysTreeRohstoffe
          );
          var relationshipElement = {}; // leeres Zwischenobjekt
          var tickedNodesMitErweitertenFeldern = []; // Array, der die ticked Nodes mit erweiterten Feldern enthält
          for (
            var i = 0;
            i < this.selectedNodeTreeBaustoffe.zugeordneteRohstoffe.length;
            i++
          ) {
            // HINWEIS: zugeordneteRohstoffe ist === [] und damit ist .length === 0, wenn keine zugeordneten Rohstoffe definiert sind für einen Baustoff!
            // Dann wird die Schleife nicht betreten, tickedNodesMitErweitertenFeldern bleibt ein leerer Array, und es werden keine ticked Nodes updated
            // In diesem Fall müsste auch tickedKeysTreeRohstoffe === [] sein, da tickedKeysTreeRohstoffe mit den ids der zugeordneten Rohstoffe initialisiert
            // wird
            relationshipElement = {
              // Zwischenobjekt, nur zur besseren Lesbarkeit
              referenzAufRohstoffInBaustoff: this.selectedNodeTreeBaustoffe
                .zugeordneteRohstoffe[i].referenzAufRohstoffInBaustoff,
              anteilVonRohstoffInBaustoff: this.selectedNodeTreeBaustoffe
                .zugeordneteRohstoffe[i].anteilVonRohstoffInBaustoff,
              symbolVonRohstoffInBaustoff: this.selectedNodeTreeBaustoffe
                .zugeordneteRohstoffe[i].symbolVonRohstoffInBaustoff,
              einheitVonRohstoffInBaustoff: this.selectedNodeTreeBaustoffe
                .zugeordneteRohstoffe[i].einheitVonRohstoffInBaustoff
            };
            tickedNodesMitErweitertenFeldern[i] = relationshipElement;
          }
          console.log(
            "tickedNodesMitErweitertenFeldern: ",
            tickedNodesMitErweitertenFeldern
          );

          // Nun die Objekte in diesem Array in das Objekt mit derselben id im nested Tree Array nodesTreeRohstoffe einfügen (push),
          // bzw. (besser, so unten implementiert) dort die Werte direkt flach einfügen bzw. setzen:
          // Benutzt rekursive Funktion zum Traversieren - Vorlage: https://stackoverflow.com/questions/43612046/how-to-update-value-of-nested-array-of-objects

          if (tickedNodesMitErweitertenFeldern !== []) {
            // Nur dann den Rohstoffbaum traversieren zum Augmentieren der ticked Nodes:
            console.log(
              "Vor rekursivem Traversieren des Rohstoffbaums auf der Suche nach ticked Nodes"
            );
            let idsTickedKeysTreeRohstoffe = this.tickedKeysTreeRohstoffe; // ACHTUNG: Lokale Variable für this.tickedKeysTreeRohstoffe -
            // ohne diese, bei direkter Verwendung von this.tickedKeysTreeRohstoffe unten kommt in der rekursiven Funktion,
            // die Fehlermeldung "typeError - cannot read property 'tickedKeysTreeBaustoffe' of undefined"
            // Notwendig, weil in function iter "this" sich auf die iter-Funktion bezieht, die Vue-Instanz kennt diese nicht unmittelbar

            let vueInstance = this; // ACHTUNG: In der Funktion iter statt "this" verwenden
            // Notwendig, weil in function iter "this" sich auf die iter-Funktion bezieht, die Vue-Instanz kennt diese nicht unmittelbar

            this.nodesTreeRohstoffe.forEach(function iter(a) {
              if (idsTickedKeysTreeRohstoffe.includes(a._id)) {
                // D.h. die id des traversierten Knotens im Rohstoffbaum ist dieselbe wie eine id in tickedKeysTreeRohstoffe
                console.log(
                  "Passenden ticked Node gefunden, füge erweiterte Felder hinzu - _id: ",
                  a._id
                );
                // Filtere dazu obigen Array mit den passenden erweiterten Feldern nach Objekt mit dieser _id:
                var filteredTickedNodesMitErweitertenFeldern = tickedNodesMitErweitertenFeldern.filter(
                  element => element.referenzAufRohstoffInBaustoff === a._id
                );
                // ACHTUNG: Ergebnis von filter ist auch ein Array!!! Dieser muss aber wegen Filtern auf _id genau ein Element haben!
                console.log(
                  "filteredTickedNodesMitErweitertenFeldern: ",
                  filteredTickedNodesMitErweitertenFeldern
                );
                if (filteredTickedNodesMitErweitertenFeldern.length !== 1) {
                  console.log(
                    "ACHTUNG: Interner Fehler in loadTreeBaustoffe bei Filtern auf Array tickedNodesMitErweitertenFeldern"
                  );
                }
                // ALT/FALSCH - nicht reaktive Zuweisungen
                /*
                a.referenzAufRohstoffInBaustoff =
                  filteredTickedNodesMitErweitertenFeldern[0].referenzAufRohstoffInBaustoff;
                a.anteilVonRohstoffInBaustoff =
                  filteredTickedNodesMitErweitertenFeldern[0].anteilVonRohstoffInBaustoff;
                a.symbolVonRohstoffInBaustoff =
                  filteredTickedNodesMitErweitertenFeldern[0].symbolVonRohstoffInBaustoff;
                a.einheitVonRohstoffInBaustoff =
                  filteredTickedNodesMitErweitertenFeldern[0].einheitVonRohstoffInBaustoff;
                */

                // NEU - reaktive Zuweisungen mit $set - Fix für QPopupEdit Probleme im Baustoffbaum/Rohstoffunterbaum in zugeordnete Baustoffe/Rohstoffe (TODO YYYYYY)
                // WICHTIG - sonst funktioniert die gesamte Reactivity des Arrays nodesTreeRohstoffe nicht mehr!!!
                // Reaktivity geht verloren, wenn dem an sich reaktiven Objekt nicht-reaktiv Felder hinzugefügt werden - das reaktive
                // Objekt kriegt das nicht mit!!!
                vueInstance.$set(
                  a,
                  "referenzAufRohstoffInBaustoff",
                  filteredTickedNodesMitErweitertenFeldern[0]
                    .referenzAufRohstoffInBaustoff
                );
                vueInstance.$set(
                  a,
                  "anteilVonRohstoffInBaustoff",
                  filteredTickedNodesMitErweitertenFeldern[0]
                    .anteilVonRohstoffInBaustoff
                );
                vueInstance.$set(
                  a,
                  "symbolVonRohstoffInBaustoff",
                  filteredTickedNodesMitErweitertenFeldern[0]
                    .symbolVonRohstoffInBaustoff
                );
                vueInstance.$set(
                  a,
                  "einheitVonRohstoffInBaustoff",
                  filteredTickedNodesMitErweitertenFeldern[0]
                    .einheitVonBaustoffInBaustoff
                );

                console.log("Node nach Hinzufügen der erweiterten Felder: ", a);
              }
              Array.isArray(a.children) && a.children.forEach(iter);
            });
          } else {
            console.log(
              "Keine ticked Nodes - kein Traversieren des Rohstoffbaums nötig"
            );
          }
          //----------------------------------------------------------------------------------------------------------------------------
          // Nun in Abhängigkeit des Parameters show den Rohstoffbaum expandieren:
          // ACHTUNG: In expandTickednodesTreeRohstoffe() ist zusätzlich eine Abfrage auf if ($refs.treeRohstoffe !== undefined) enthalten
          // Dies ist für den Fall, dass die Funktion mit show === true aufgerufen wird, aber das Tab "Zugeordnete Rohstoffe" noch nicht
          // ausgewählt wurde, und damit $refs.treeRohstoffe undefined ist - in diesem Fall kann der Baum nicht expandiert werden,
          // da nicht vorhanden!!!
          if (show) {
            this.$nextTick(() => {
              // NEU: Rohstoffbaum initial expandieren
              // this.expandedKeysTreeRohstoffe.splice(0, this.expandedKeysTreeRohstoffe.length); // NEU: Sicherheitshalber vorher reaktiv den Array leeren!???
              // Disabled, führte zu unerwünschtem Kollabieren des Arrays vor dem Expandieren
              console.log(
                "expandedKeysTreeRohstoffe vor expandTickedNodesTreeRohstoffe(): ",
                this.expandedKeysTreeRohstoffe
              );
              // NEU: Hier nur die ticked Nodes expandieren
              // Dafür die folgende Expansion aller Knoten im Rohstoffbaum auskommentiert:
              // this.$refs.treeRohstoffe.expandAll(); // Ganzen Baum expandieren (bisherige Lösung) // 14.04.20 Auskommentiert von sts
              // Stattdessen:
              this.expandTickedNodesTreeRohstoffe(); // 14.04.20 Einkommentiert von sts
              console.log(
                "Rohstoffbaum wurde geladen und ticked Nodes wurden ggf. expandiert"
              );
              console.log(
                "expandedKeysTreeRohstoffe nach expandTickedNodesTreeRohstoffe(): ",
                this.expandedKeysTreeRohstoffe
              );
              // HINWEIS: Offenbar fügt Quasar bei expandAll() immer wieder per push die neu expandierten Keys dem Array expandedKeysTreeBaustoffe hinzu,
              // was zu Duplikaten darin führt - scheint aber "works as designed" zu sein!!!
            });
            // ACHTUNG: Einfaches this.$refs.treeRohstoffe.expandAll(); // Ohne $nextTick() => {} funktioniert es NICHT!!!
            // Siehe https://forum.quasar-framework.org/topic/4147/solved-v1-qtree-does-not-expand-all-by-property-default-expand-all
            // $nextTick() forciert anscheinend einen DOM Update, den Vue sonst nicht machen würde
          } // Sonst hier nichts tun
          // NEU: Spinner Gears wieder ausblenden:
          Loading.hide();
        })
        .catch(error => {
          console.log("Error bei readExtraktRohstoffe - error: ", error);
          // NEU: Spinner Gears wieder ausblenden:
          Loading.hide();
        });
    },

    showTreeRohstoffe() {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - Teil 2 von loadTreeRohstoffe (siehe oben)
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In showTreeRohstoffe");
      this.$nextTick(() => {
        // NEU: Rohstoffbaum initial expandieren
        // this.expandedKeysTreeRohstoffe.splice(0, this.expandedKeysTreeRohstoffe.length); // NEU: Sicherheitshalber vorher reaktiv den Array leeren!???
        // Disabled, führte zu unerwünschtem Kollabieren des Arrays vor dem Expandieren
        console.log(
          "expandedKeysTreeRohstoffe vor expandTickedNodesTreeRohstoffe(): ",
          this.expandedKeysTreeRohstoffe
        );
        // NEU: Hier nur die ticked Nodes expandieren
        // Dafür die folgende Expansion aller Knoten im Rohstoffbaum auskommentiert:
        // this.$refs.treeRohstoffe.expandAll(); // Ganzen Baum expandieren (bisherige Lösung) // 14.04.20 Auskommentiert von sts
        // Stattdessen:
        this.expandTickedNodesTreeRohstoffe(); // 14.04.20 Einkommentiert von sts
        console.log(
          "Rohstoffbaum wurde geladen und ticked Nodes wurden ggf. expandiert"
        );
        console.log(
          "expandedKeysTreeRohstoffe nach expandTickedNodesTreeRohstoffe(): ",
          this.expandedKeysTreeRohstoffe
        );
        // HINWEIS: Offenbar fügt Quasar bei expandAll() immer wieder per push die neu expandierten Keys dem Array expandedKeysTreeBaustoffe hinzu,
        // was zu Duplikaten darin führt - scheint aber "works as designed" zu sein!!!
      });
      // ACHTUNG: Einfaches this.$refs.treeRohstoffe.expandAll(); // Ohne $nextTick() => {} funktioniert es NICHT!!!
      // Siehe https://forum.quasar-framework.org/topic/4147/solved-v1-qtree-does-not-expand-all-by-property-default-expand-all
      // $nextTick() forciert anscheinend einen DOM Update, den Vue sonst nicht machen würde
    },

    //--------------------------------------------------------------------------------------------------------------------
    // Methoden für den QTree für Baustoffe:
    //--------------------------------------------------------------------------------------------------------------------
    resetFilterTreeBaustoffe() {
      //--------------------------------------------------------------------------------------------------------------------
      // Filter-Methode für QTree, siehe https://quasar.dev/vue-components/tree#Example--Filtering-nodes
      //--------------------------------------------------------------------------------------------------------------------
      this.filterTreeBaustoffe = "";
      this.$refs.filterTreeBaustoffe.focus();
    },

    loadRootNodeTreeBaustoffe() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - lädt beim ersten Laden der Page den Wurzelknoten des Baustoffbaums aus der Datenbank
      // Aufruf in mounted()
      // NEU: Returned promise - damit kann bei Aufruf mit await sichergestellt werden, dass die
      //      Funktion komplett abgeschlossen ist
      // Realisiert mit async loadRootNodeTreeBaustoffe() und return this.$axios
      // ACHTUNG: Ein await ohne dieses return erzwingt dies NICHT!!!
      // Aufrufe ohne await bleiben dabei unbehelligt!
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In loadRootNodeTreeBaustoffe()");
      // NEU: Aufruf des neuen APIs zum Lesen des Wurzelknotens
      const apiRoute = process.env.API + "/Baustoffe/Wurzel";

      return this.$axios
        .get(/* url */ apiRoute)
        .then(response => {
          console.log("response.data: ");
          console.log(response.data);
          response.data.lazy = true;
          // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
          //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
          //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
          // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
          this.nodesTreeBaustoffe.push(response.data); // Pushe Objekt für den Wurzelbaustoff auf nodesTreeBaustoffe
          // HINWEIS: QTree erlaubt auch mehrere Wurzeln, dann würden hier mehrere Objekte auf den Array gepushed
          console.log("Wurzel des Baustoffbaums wurde geladen");
        })
        .catch(error => {
          // NEU: Error Handling mit .catch
          console.log("Error bei loadRootNodeTreeBaustoffe - error: ", error);
        });
    },

    async loadLastSelectedNodeTreeBaustoffe(lastSelectedKeyTreeBaustoffe) {
      //----------------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - lädt beim ersten Laden der Page einen als Parameter (Key = Id) übergebenen zuletzt ausgewählten Node im Baum
      // VORLAGE: baueinheiten.loadLastSelectedNodeTreeBaueinheiten(lastSelectedKeyTreeBaueinheiten()
      // TODO XXXXXX: Arbeitet noch mit Testdaten für den usgewählten Baustoff (myBaustoffId)
      // TODO XXXXXX: Wenn keiner gespeichert ist, sollte es wie schon vorher loadRootNodeTreeBaustoffe() aufrufen!
      // Aufruf in mounted()
      // NEU: Returned promise - damit kann bei Aufruf mit await sichergestellt werden, dass die
      //      Funktion komplett abgeschlossen ist
      // Realisiert mit async loadlastSelectedNodeTreeBaustoffe() und return this.$axios
      // ACHTUNG: Ein await ohne dieses return erzwingt dies NICHT!!!
      // Aufrufe ohne await bleiben dabei unbehelligt!
      //----------------------------------------------------------------------------------------------------------------------------
      // NEU: Lädt bei Fehler aus Laden des letzten ausgewählten Nodes den Wurzelknoten
      //      Returned zusätzlich einen Result-String, der anzeigt, welcher Knoten geladen wurde:
      //      - lastSelectedNode
      //      - rootNode
      // Ein solcher Fehler beim Laden des letzten ausgewählten Nodes kann z.B. passieren
      // - wenn die Datenbank inzwischen neu geladen wurde (bei lokalen Tests)
      // - wenn der zuletzt ausgewählte Knoten gelöscht oder verschoben wurde
      // TODO XXXXXX: Einstweilen kommt in diesen Fällen, weil das Backend dann 404 meldet, noch eine Fehlermeldung aus dem
      //              Axios Response Interceptor. Diese könnte man unterdrücken.
      //-----------------------------------------------------------------------------------------------------------------------------
      console.log("In loadLastSelectedNodeTreeBaustoffe()");
      console.log(
        "Parameter lastSelectedKeyTreeBaustoffe: ",
        lastSelectedKeyTreeBaustoffe
      );
      // NEU: Aufruf des neuen APIs zum Lesen des verschachtelten Baums aller Knoten vom Wurzelknoten auf dem Pfad bis zum als Parameter übergebenen Knoten, plus dessen Kindern
      //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      // Test-Ids von Baustoffen für lokale Tests (statt Aufruf des APIs mit dem Parameter lastSelectedKeyTreeBaustoffe:
      // const myBaustoffId = "xyz"
      // let apiRoute = process.env.API + "/Baustoffe/" + myBaustoffId + "/Reload/Pfad";
      //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      // In Production nun das neue API mit Parameter lastSelectedKeyTreeBaustoffe aufrufen - dieser darf nicht null sein:
      if (!lastSelectedKeyTreeBaustoffe) {
        console.log(
          "FEHLER: Parameter lastSelectedKeyTreeBaustoffe ist undefined oder null - vor Return ohne Laden des Baums"
        );
        return;
      }
      // Ansonsten:
      let apiRoute =
        process.env.API +
        "/Baustoffe/" +
        lastSelectedKeyTreeBaustoffe +
        "/Reload/Pfad";
      return this.$axios // ACHTUNG: Das return hier ist unbedingt erforderlich!!!
        .get(apiRoute)
        .then(response => {
          console.log("response.data: ");
          console.log(response.data);
          // Aus Vorlage für "normales" Laden des Wurzelknotens - hier nicht nötig, da die lazy-Flags bereits durch obiges API am Backend gesetzt werden
          /*
          response.data.lazy = true; // Fügt ein Feld lazy hinzu!!!
          // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
          //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
          //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
          // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
          */
          this.nodesTreeBaustoffe = response.data; // Speichere verschachtelten Array für QTree aus Backend nach nodesTreeBaustoffen
          // HINWEIS: QTree erlaubt auch mehrere Wurzeln, dann würden hier mehrere Objekte auf den Array gepushed
          //--------------------------------------------------------------------------------------------------------------------------
          // Nur für obige Tests:
          // this.selectedKeyTreeBaustoffe=myBaustoffId; // Nur für Tests, wird ansonsten vor Aufruf in mounted() gesetzt
          // this.expandedKeysTreeBaustoffe = ["6220ad94aa8a318008a7e876", "6220ad94aa8a318008a7e883", "6220ad94aa8a318008a7e889"]
          //--------------------------------------------------------------------------------------------------------------------------
          console.log(
            "Zuletzt selektierter Node im Baustoffbaum wurde geladen"
          );
          return "lastSelectedNode" // NEU - String returnen, der anzeigt, was geladen wurde
        })
        .catch(async error => { // async erforderlich wegen await unten
          // NEU: Error Handling mit .catch
          console.log(
            "Error bei loadLastSelectedNodeTreeBaustoffe - error: ",
            error
          );
          // NEU - Wurzelknoten laden stattdessen:
          console.log("Statt des zuletzt ausgewählten Knotens wird der Wurzelnknoten geladen")
          await this.loadRootNodeTreeBaustoffe()
          return "rootNode" // NEU - String returnen, der anzeigt, was geladen wurde
        });
    },

    selectedNodeHandlingTreeBaustoffe(key) {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode für das Select Node Handling des QTrees für die Baustoffe
      // Siehe https://forum.quasar-framework.org/topic/5765/qtree-select-behavior/3
      // Komfortfunktion: Sorgt dafür, dass bei Selektion eines Knotens im Baum mit Mausklick dieser Knoten nicht deselektiert
      // wird, sondern selektiert bleibt. Erst beim Klicken auf einen anderen Knoten ändert sich der selektierte Knoten.
      // HINWEIS: Mit dieser Methode darf am q-tree nicht mehr :selected.sync="selectedKeyTreeBaustoffe" angegeben werden,
      // sondern :selected="selectedKeyTreeBaustoffe"
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In selectedNodeHandlingTreeBaustoffe()");
      console.log("Parameter key: ", key);
      if (key != null) {
        this.selectedKeyTreeBaustoffe = key;
      }
    },

    lazyLoadHandlingTreeBaustoffe({ node, key, done, fail }) {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode für das Lazy Loading des QTrees für die Baustoffe
      // Siehe https://quasar.dev/vue-components/tree#QTree-API
      // - Diese führt das Lazy Loading der Kinder eines Nodes node mit node-key key durch
      // - fail() ist Funktion, die im Fehlerfall augerufen wird ("if any error occurs")
      // - done(children) ist eine Funktion, die dem obigen Node den Array seiner Kinder (als Argument der Funktion) zuweist
      // Diese werden dann q-tree intern zum Array :nodes="nodesTreeBaustoffe" hinzugefügt
      // HINWEIS: Nur durch den Aufruf dieser Funktion "lernt" q-tree, welche Kinder ein Node hat!!!
      //--------------------------------------------------------------------------------------------------------------------
      console.log(
        "In lazyLoadHandlingTreeBaustoffe() - Parameter node: ",
        node
      );
      // console.log("Funktions-Parameter done: ", done); // Zeigt Source Code von done() in Browser Console, zeigt z.B. dass done() under the Covers das Objekt lazy verändert...
      const apiRoute = process.env.API + "/Baustoffe/" + node._id + "/Kinder";
      this.$axios
        .get(apiRoute)
        .then(response => {
          console.log("Success aus API Call für readKindKnotenBaustoff()");
          for (var i = 0; i < response.data.length; i++) {
            // console.log(response.data[i])
            // ALT - lazy für alle Baumknotentypen auf true setzen - disabled
            // response.data[i].lazy = true;
            // NEU - lazy setzen in Abhängigkeit von baumKnotenTyp:
            if (response.data[i].baumKnotenTyp === "Blattknoten") {
              response.data[i].lazy = false;
            } else {
              response.data[i].lazy = true;
            }
            // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
            //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
            //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
            // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
          }
          done(response.data); // Übergebe die Kinder an q-tree
        })
        .catch(error => {
          // NEU: Error Handling mit .catch
          console.log(
            "Error aus API Call für readKindKnotenBaustoff() - error: ",
            error
          );
        });
    },

    getChildrenById(_id) {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - holt Kinder für einen Baustoff mit _id aus der Datenbank
      // TODO: Wird aktuell nicht mehr verwendet
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In getChildrenById()");
      console.log("_id: ", _id);
      console.log("WARNUNG/ACHTUNG: API ist veraltet!!!");
      var url = "http://localhost:8080/API/children/" + _id;
      this.$axios.get(url).then(response => {
        console.log("response.data: ");
        console.log(response.data);
        var arr = this.$refs.treeBaustoffe.getNodeByKey(_id);
        console.log("arr: ");
        console.log(arr);
        this.$set(arr, "children", response.data);
        /*
        for (var i = 0; i < response.data.length; i++) {
          //console.log(response.data[i])
          arr.children.push(response.data[i]);
        }
        */
      });
    },

    deleteSelectedBaustoff() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Methode - löscht den im QTree selektierten Baustoff im Backend mit Kindern und Kindeskindern und anschließend auch im Frontend
      // ACHTUNG: Im Gegensatz zum Einfügen eines Knotens wird hier beim Löschen eines Knotens bisher kein Refresh ausgelöst
      // (Performance-Gründe). Geändert im Rahmen von #338/339.
      // ACHTUNG/TODO: Das Löschen des Wurzelknotens wird hier aktuell nicht unterbunden
      // Dies erfolgt aktuell nur durch Disablen des "Baustoff löschen" Buttons für den Wurzelknoten
      //-------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In deleteSelectedBaustoff() - vor Löschen des ausgewählten Knotens mit Key: " +
          this.selectedKeyTreeBaustoffe
      );
      if (this.selectedKeyTreeBaustoffe != null) {
        // console.log("process.env.API: ", process.env.API);
        // NEU - https://quasar.dev/quasar-cli/cli-documentation/handling-process-env
        // process.env.API zeigt die URL des APIs an, abhängig davon, ob Dev oder Production Build
        var apiRoute =
          process.env.API + "/Baustoffe/" + this.selectedKeyTreeBaustoffe;
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBaustoffe'");
        this.$socket.emit("leaveRoom", {
          room: "roomBaustoffe"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBaustoffe'");
        //=========================================================================================================================================
        this.$axios
          // ALT: Löschte nur den ausgewählten Knoten ohne Kindknoten!!!
          // .get(this.urlAPI + "API/Baustoff0919/Delete/" + this.selectedKeyTreeBaustoffe)
          // NEU: Löschen des ausgewählten Knotens mit allen Kindknoten!!!
          .delete(apiRoute)
          .then(async response => {
            console.log(
              "In deleteSelectedBaustoff() nach Delete für Baustoff mit Kindern und Kindeskindern, response: ",
              response
            );
            // console.log(response.status);
            //------------------------------------------------------------------------------------------------
            // NEU - um Konflikte mit Aktionen für markierte Zweige zu vermeiden: Markierung für einen eventuell markierten Zweig entefernen
            // ACHTUNG: Der markierte Knoten kann sogar im zu löschenden Zweig liegen!
            // ACHTUNG: Ein einfaches this.idWurzelZuBewegenderZweig = null wie beim Einfügen von Knoten genügt hier warum auch immer NICHT!!!
            // ACHTUNG: Dies muss am Anfang dieser Funktion erfolgen!!!
            if (this.idWurzelZuBewegenderZweig != null) {
              // Ein Knoten im Baum war markiert
              let node = this.$refs.treeBaustoffe.getNodeByKey(
                this.idWurzelZuBewegenderZweig
              ); // Den markierten Knoten per QTree API ermitteln
              this.$set(node, "zweigMarkiertFuerBewegen", false); // Markierung entfernen - unbedingt $set verwenden!;
              this.idWurzelZuBewegenderZweig = null;
            }
            //-----------------------------------------------------------------------------------------------
            // arrayOfIdsInPath ist Array, der die ids aller Knoten im Pfad vom Wurzelknoten bis inklusive des gelöschten Knotens enthält
            var arrayOfIdsInPath = this.$refs.treeBaustoffe
              .getNodeByKey(this.selectedKeyTreeBaustoffe) // QTree API Methode
              .path.split("#");
            //------------------------------------------------------------------------------------------------
            if (arrayOfIdsInPath.length > 1) {
              // arrayOfIdsInPath muss immer mindestens 2 Elemente enthalten, denn Wurzelknoten darf nicht gelöscht werden
              // ACHTUNG: Dies wird aktuell nur am Frontend per Disable des Buttons für "Baustoff löschen" für Wurzelknoten unterbunden! -->
              console.log(arrayOfIdsInPath);
              var parentId = arrayOfIdsInPath[arrayOfIdsInPath.length - 2]; // id des Elternknotens im Baum, bei Länge 2 ist das der Wurzelknoten
              var parent = this.$refs.treeBaustoffe.getNodeByKey(parentId); // parent ist der Elternknoten im Baum
              var index = parent.children.findIndex(value => {
                // Finde index des gelöschten Knotens im Array der Kindknoten des Elternknotens
                if (value._id === this.selectedKeyTreeBaustoffe) {
                  return true;
                }
              });
            }
            //------------------------------------------------------------------------------------------------
            parent.children.splice(index, 1); // Entferne id des gelöschten Knotens aus dem Array der Kindknoten des Elternknotens
            // HINWEIS: Der Knoten muss nicht aus nodesTreeBaustoffe entfernt werden, da die Änderung von parent dies
            //          automatisch mit erledigt!!!
            console.log(
              "In deleteSelectedBaustoff(): Geänderter Elternknoten nach Löschen des Kindknotens - parent: ",
              parent
            );
            //-----------------------------------------------------------------------------------------------
            // NEU: Fix für Backlog Item #111 - Löschen des letzten Kindes unter dem Elternknoten hier besonders behandeln:
            if (parent.children.length === 0) {
              // Elternknoten hat keine Kinder mehr
              if (parent.baumKnotenTyp === "Verzweigungsknoten") {
                parent.baumKnotenTyp = "Blattknoten";
              } // else {} // baumKnotenTyp "Wurzelknoten" nicht ändern!
            }
            //------------------------------------------------------------------------------------------------------------------------------
            // Kommentare zum Flag lazy an jedem QTree Node:
            // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
            //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
            //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
            // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            //------------------------------------------------------------------------------------------------
            parent.lazy = false; // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            //------------------------------------------------------------------------------------------------
            // Kommentare zum Objekt lazy am QTree selbst:
            // delete this.$refs.treeBaustoffe.lazy[parentId] // Resetten des Eintrags im Objekt lazy - hier disabled, unnötig
            // lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"}
            // HINWEIS: Es handelt sich bei lazy um ein JS Objekt, keinen Array
            // Zugriff auf ein Element darin mit this.$refs.treeBaustoffe.lazy[id]
            // Resetten eines Elements darin mit delete this.$refs.treeBaustoffe.lazy[id]
            //------------------------------------------------------------------------------------------------------------------------------
            // NEU: Ursprünglicher Fix für #338 - Weil obiges splice manchmal nicht reaktiv erkannt wird (der gelöschte Knoten wird dann fälschlich
            // weiterhin angezeigt, und verschwindet erst nach Zu- und Aufklappen des Parents)
            // hier ein setExpanded des Elternknotens auslösen, was das Problem behebt auch ohne Refresh (Workaround)
            // Enabled wegen Problem #340 (ist aber nur Workaround für #340, trotzdem belassen)
            // HINWEISE:
            // #340 dürfte aber bisher in baustoffe.vue gar nicht auftreten, weil hier (weiter unten) der alte, nicht Performance-optimierte Refresh aufgerufen wird
            // Eigentliche Lösung für #340 in baueinheiten.vue, deleteBaueinheit(): Aufruf refreshTreeBaueinheitenPerformanceOptimiert(parent)
            //
            this.$refs.treeBaustoffe.setExpanded(
              parent._id, // Erwartet key, nicht node!
              true
            );
            //
            //------------------------------------------------------------------------------------------------------------------------------
            // NEU: Alternativer Fix A für #338 - selectedKeyTreeBaustoffe reaktiv ändern, weil obiges splice nicht immer reaktiv
            // funktioniert, warum auch immer!
            // Funktioniert so nicht, bzw. nur, wenn selectedKeyTreeBaustoffe ganz auf null gesetzt wird, was nicht erwünscht ist!
            // Daher disabled
            // let oldKeyTreeBaustoffe = this.selectedKeyTreeBaustoffe;
            // this.selectedKeyTreeBaustoffe = null;
            // this.selectedKeyTreeBaustoffe = oldKeyTreeBaustoffe;
            //-----------------------------------------------------------------------------------------------------------------------------
            // NEU: Zusätzlicher Fix für #338 wegen #339 - Baum neu laden - funktioniert per Test!
            // Erfordert async oben am .then
            console.log("Vor await refreshTreeBaustoffe()");
            await this.refreshTreeBaustoffe(); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
            // HINWEIS: Problem #340 dürfte mit dem altem Refresh hier nicht auftreten!
            console.log("Nach await refreshTreeBaustoffe()");
            //-----------------------------------------------------------------------------------------------------------------------------
            // NEU: Da in dieser Variante der delete-Funktion immer der selected Node selbst gelöscht wird, muss zusätzlich unbedingt
            // selectedKeyTreeBaustoffe auf null oder die Id des Parents gesetzt werden!
            // Sonst werden rechts z.B. in "Angaben zurm Baustoff" alte, gelöschte Daten angezeigt (Fehler)
            // this.selectedKeyTreeBaustoffe = null;
            // Alternativ das Parent auswählen:
            this.selectedKeyTreeBaustoffe = parent._id;
            //------------------------------------------------------------------------------------------------
            this.deleteSelectedBaustoffDialog = false;
            // NEU: Banner-Benutzernachricht im Footer per global Store und Enums:
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_LOESCHEN_ERFOLG
            );
            //------------------------------------------------------------------------------------------------
          })
          .catch(error => {
            console.log(
              "Fehler bei delete von Baustoff mit id: ",
              this.selectedKeyTreeBaustoffe
            );
            console.log("error:", error);
            this.deleteSelectedBaustoffDialog = false;
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_LOESCHEN_FEHLER
            );
          });
      } else {
        console.log(
          "In deleteSelectedBaustoff(): Kein Baustoff ausgewählt - kein Löschen möglich"
        );
        this.deleteSelectedBaustoffDialog = false;
        globalStore.showBenutzerNachricht(
          BenutzerNachrichten.BAUSTOFF_LOESCHEN_WARNUNG_KEIN_BAUSTOFF_AUSGEWAEHLT
        );
      }
    },

    deleteBaustoff(node) {
      //-------------------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - löscht einen im Parameter Node übergebenen Baustoff im Backend
      // mit Kindern und Kindeskindern und anschließend auch im Frontend (Modifikation obiger Methode deleteSelectedBaustoff)
      //
      // ACHTUNG: Im Gegensatz zum Einfügen eines Knotens wird hier beim Löschen eines Knotens bisher kein Refresh ausgelöst
      // (Performance-Gründe). Geändert im Rahmen von #338/339.
      // ACHTUNG/TODO: Das Löschen des Wurzelknotens wird hier aktuell nicht unterbunden
      // Dies erfolgt aktuell nur durch Disablen des "Baustoff löschen" Buttons für den Wurzelknoten
      //-------------------------------------------------------------------------------------------------------------------------------
      console.log("In deleteBaustoff(node)");

      if (node != null) {
        console.log(
          "Vor Löschen des Knotens node mit bauestoffBezeichnung: " +
            node.baustoffBezeichnung
        );
        // console.log("process.env.API: ", process.env.API);
        // NEU - https://quasar.dev/quasar-cli/cli-documentation/handling-process-env
        // process.env.API zeigt die URL des APIs an, abhängig davon, ob Dev oder Production Build
        var apiRoute = process.env.API + "/Baustoffe/" + node._id;
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBaustoffe'");
        this.$socket.emit("leaveRoom", {
          room: "roomBaustoffe"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBaustoffe'");
        //=========================================================================================================================================
        this.$axios
          // ALT: Löschte nur den ausgewählten Knoten ohne Kindknoten!!!
          // .get(this.urlAPI + "API/Baustoff0919/Delete/" + this.selectedKeyTreeBaustoffe)
          // NEU: Löschen des ausgewählten Knotens mit allen Kindknoten!!!
          .delete(apiRoute)
          .then(async response => {
            console.log(
              "In deleteBaustoff() nach Delete für Baustoff mit Kindern und Kindeskindern, response: ",
              response
            );
            // console.log(response.status);
            //------------------------------------------------------------------------------------------------
            // NEU - um Konflikte mit Aktionen für markierte Zweige zu vermeiden: Markierung für einen eventuell markierten Zweig entefernen
            // ACHTUNG: Der markierte Knoten kann sogar im zu löschenden Zweig liegen!
            // ACHTUNG: Ein einfaches this.idWurzelZuBewegenderZweig = null wie beim Einfügen von Knoten genügt hier warum auch immer NICHT!!!
            // ACHTUNG: Dies muss am Anfang dieser Funktion erfolgen!!!
            if (this.idWurzelZuBewegenderZweig != null) {
              // Ein Knoten im Baum war markiert
              let node = this.$refs.treeBaustoffe.getNodeByKey(
                this.idWurzelZuBewegenderZweig
              ); // Den markierten Knoten per QTree API ermitteln
              this.$set(node, "zweigMarkiertFuerBewegen", false); // Markierung entfernen - unbedingt $set verwenden!;
              this.idWurzelZuBewegenderZweig = null;
            }
            //-----------------------------------------------------------------------------------------------
            // arrayOfIdsInPath ist Array, der die ids aller Knoten im Pfad vom Wurzelknoten bis inklusive des gelöschten Knotens enthält
            var arrayOfIdsInPath = this.$refs.treeBaustoffe
              .getNodeByKey(node._id) // QTree API Methode, arbeitet hier auf der Id des gelöschten Knotens!
              .path.split("#");
            //------------------------------------------------------------------------------------------------
            if (arrayOfIdsInPath.length > 1) {
              // arrayOfIdsInPath muss immer mindestens 2 Elemente enthalten, denn Wurzelknoten darf nicht gelöscht werden
              // ACHTUNG: Dies wird aktuell nur am Frontend per Disable des Buttons für "Baustoff löschen" für Wurzelknoten unterbunden! -->
              console.log(arrayOfIdsInPath);
              var parentId = arrayOfIdsInPath[arrayOfIdsInPath.length - 2]; // id des Elternknotens im Baum, bei Länge 2 ist das der Wurzelknoten
              var parent = this.$refs.treeBaustoffe.getNodeByKey(parentId); // parent ist der Elternknoten im Baum
              var index = parent.children.findIndex(value => {
                // Finde index des gelöschten Knotens im Array der Kindknoten des Elternknotens
                if (value._id === node._id) {
                  // ACHTUNG: Hier Id des gelöschten Knotens!
                  return true;
                }
              });
            }
            //------------------------------------------------------------------------------------------------
            parent.children.splice(index, 1); // Entferne id des gelöschten Knotens aus dem Array der Kindknoten des Elternknotens
            // HINWEIS: Der Knoten muss nicht aus nodesTreeBaustoffe entfernt werden, da die Änderung von parent dies
            //          automatisch mit erledigt!!!
            console.log(
              "In deleteBaustoff(): Geänderter Elternknoten nach Löschen des Kindknotens - parent: ",
              parent
            );
            //-----------------------------------------------------------------------------------------------
            // NEU: Fix für Backlog Item #111 - Löschen des letzten Kindes unter dem Elternknoten hier besonders behandeln:
            if (parent.children.length === 0) {
              // Elternknoten hat keine Kinder mehr
              if (parent.baumKnotenTyp === "Verzweigungsknoten") {
                parent.baumKnotenTyp = "Blattknoten";
              } // else {} // baumKnotenTyp "Wurzelknoten" nicht ändern!
            }
            //------------------------------------------------------------------------------------------------
            // Kommentare zum Flag lazy an jedem QTree Node:
            // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
            //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
            //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
            // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            parent.lazy = false; // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            //------------------------------------------------------------------------------------------------
            // Kommentare zum Objekt lazy am QTree selbst:
            // delete this.$refs.treeBaustoffe.lazy[parentId] // Resetten des Eintrags im Objekt lazy - hier disabled, unnötig
            // lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"}
            // HINWEIS: Es handelt sich bei lazy um ein JS Objekt, keinen Array
            // Zugriff auf ein Element darin mit this.$refs.treeBaustoffe.lazy[id]
            // Resetten eines Elements darin mit delete this.$refs.treeBaustoffe.lazy[id]
            //------------------------------------------------------------------------------------------------------------------------------
            // NEU: Ursprünglicher Fix für #338 - Weil obiges splice manchmal nicht reaktiv erkannt wird (der gelöschte Knoten wird dann fälschlich
            // weiterhin angezeigt, und verschwindet erst nach Zu- und Aufklappen des Parents)
            // hier ein setExpanded des Elternknotens auslösen, was das Problem behebt auch ohne Refresh (Workaround)
            // Enabled wegen Problem #340 (ist aber nur Workaround für #340, trotzdem belassen)
            // HINWEISE:
            // #340 dürfte aber bisher in baustoffe.vue gar nicht auftreten, weil hier (weiter unten) der alte, nicht Performance-optimierte Refresh aufgerufen wird
            // Eigentliche Lösung für #340 in baueinheiten.vue, deleteBaueinheit(): Aufruf refreshTreeBaueinheitenPerformanceOptimiert(parent)
            //
            this.$refs.treeBaustoffe.setExpanded(
              parent._id, // Erwartet key, nicht node!
              true
            );
            //
            //------------------------------------------------------------------------------------------------------------------------------
            // NEU: Alternativer Fix A für #338 - selectedKeyTreeBaustoffe reaktiv ändern, weil obiges splice nicht immer reaktiv
            // funktioniert, warum auch immer!
            // Funktioniert so nicht, bzw. nur, wenn selectedKeyTreeBaustoffe ganz auf null gesetzt wird, was nicht erwünscht ist!
            // Daher disabled
            // let oldKeyTreeBaustoffe = this.selectedKeyTreeBaustoffe;
            // this.selectedKeyTreeBaustoffe = null;
            // this.selectedKeyTreeBaustoffe = oldKeyTreeBaustoffe;
            //-----------------------------------------------------------------------------------------------------------------------------
            // NEU: Zusätzlicher Fix für #338 wegen #339 - Baum neu laden - funktioniert per Test!
            // Erfordert async oben am .then
            console.log("Vor await refreshTreeBaustoffe()");
            await this.refreshTreeBaustoffe(); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
            // HINWEIS: Problem #340 dürfte mit dem altem Refresh hier nicht auftreten!
            console.log("Nach await refreshTreeBaustoffe()");
            //-----------------------------------------------------------------------------------------------------------------------------
            // NEU: Falls der selected Node selbst gelöscht wird, muss zusätlich selectedKeyTreeBaustoffe auf null oder die Id des
            // Parents gesetzt werden! Sonst werden rechts z.B. in "Angaben zur Baueinheit" alte, gelöschte Daten angezeigt (Fehler)
            // Dies geändert auf unbedingtes Setzen, weil ja der selected Node auch ein Kind des gelöschten sein kann!!!
            // if (node._id === this.selectedKeyTreeBaustoffe) {
            // this.selectedKeyTreeBaustoffe = null;
            // Alternativ das Parent auswählen:
            this.selectedKeyTreeBaustoffe = parent._id;
            // }
            //-----------------------------------------------------------------------------------------------------------------------------
            this.deleteBaustoffDialog = false;
            // NEU: Banner-Benutzernachricht im Footer per global Store und Enums:
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_LOESCHEN_ERFOLG
            );
            //------------------------------------------------------------------------------------------------
          })
          .catch(error => {
            console.log(
              "Fehler bei delete von Baustoff mit id: ",
              this.selectedKeyTreeBaustoffe
            );
            console.log("error:", error);
            this.deleteBaustoffDialog = false;
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_LOESCHEN_FEHLER
            );
          });
      } else {
        console.log(
          "In deleteBaustoff(): Kein Baustoff ausgewählt - kein Löschen möglich"
        );
        this.deleteBaustoffDialog = false;
        globalStore.showBenutzerNachricht(
          BenutzerNachrichten.BAUSTOFF_LOESCHEN_WARNUNG_KEIN_BAUSTOFF_AUSGEWAEHLT
        );
      }
    },

    removeChildrenInSelectedNodeTreeBaustoffe() {
      //--------------------------------------------------------------------------------------------------------------------
      // Verworfene Testmethode
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In removeChildrenInSelectedNodeTreeBaustoffe()");
      this.$refs.treeBaustoffe.getNodeByKey(
        this.selectedKeyTreeBaustoffe
      ).children = [];
      this.$refs.treeBaustoffe.lazy = {}; // lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"}
    },

    cancelButton() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - setzt aktuell nur den selected Key im QTree für die Baustoffe auf null
      // TODO: Implementierung
      //--------------------------------------------------------------------------------------------------------------------
      this.selectedKeyTreeBaustoffe = null;
    },

    resetCreateChildBaustoff() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - resetted die Validation im q-form innerhalb des q-dialogs für das Anlegen eines Kindknotens im Baustoffbaum
      // Greift per $refs auf das Form zu und ruft dessen API-MEthode resetValidation() auf
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetCreateChildBaustoff()");
      this.$refs.formNeuerBaustoffDialog.resetValidation();
    },

    createChildBaustoff() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - erstellt einen Kindknoten des ausgewählten Knotens am Backend und fügt ihn anschließend den Daten des
      // QTree hinzu. Anschließend wird der Tree noch ausgeklappt.
      // NEU: Ausklappen des Trees nach asynchronem await refreshTreeBaustoffe() mit setExpanded(node, true)
      // erst möglich ist, wenn der Knoten geladen wurde
      // TODO: Entweder Validation enforcen oder Länge <= 200 abprüfen vor Create!!
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In createChildBaustoff()");
      console.log("bezeichnungNeuerBaustoff: ", this.bezeichnungNeuerBaustoff);
      if (
        this.selectedKeyTreeBaustoffe != null &&
        this.bezeichnungNeuerBaustoff != null &&
        this.bezeichnungNeuerBaustoff !== ""
      ) {
        // NEU - um Konflikte mit Aktionen für markierte Zweige zu vermeiden:
        this.idWurzelZuBewegenderZweig = null;
        // NEU:
        const apiRoute =
          process.env.API + "/Baustoffe/" + this.selectedKeyTreeBaustoffe;
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBaustoffe'");
        this.$socket.emit("leaveRoom", {
          room: "roomBaustoffe"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBaustoffe'");
        //=========================================================================================================================================
        this.$axios
          // ALT:
          // .put("http://localhost:8080/api/baustoffe/createKindBaustoffByElternBaustoffId",
          // NEU:
          .post(apiRoute, {
            // Body - in req.body.baustoffBezeichnungKindKnoten wird die Bezeichnung des neuen Kindknotens übergeben:
            baustoffBezeichnungKindKnoten: this.bezeichnungNeuerBaustoff
            // baustoffIdElternKnoten: this.selectedKeyTreeBaustoffe // ALT
          })
          .then(async response => {
            // async wegen await unten
            console.log("Response aus Post Request: ", response);
            var tmp = this.$refs.treeBaustoffe.getNodeByKey(
              this.selectedKeyTreeBaustoffe
            );
            //---------------------------------------------------------------------------------------------------------
            // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
            //      da der Refresh asynchron abläuft, ist await notwendig
            console.log("Vor await refreshTreeBaustoffe)");
            await this.refreshTreeBaustoffe(); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
            console.log("Nach await refreshTreeBaustoffe()");
            console.log(
              "selectedNodeTreeBaustoffe: ",
              this.selectedNodeTreeBaustoffe
            );
            // this.selectedNodeTreeBaustoffe.lazy = true; // Offenbar unnötig!
            this.$refs.treeBaustoffe.setExpanded(
              this.selectedKeyTreeBaustoffe,
              true
            );
            this.createNewBaustoffDialog = false;
            this.bezeichnungNeuerBaustoff = null;
            // NEU: Benutzernachricht im Footer per global Store und Enums:
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_NEUANLAGE_ERFOLG
            );
            //----------------------------------------------------------------------------------------------------------
            // Ältere Fehlversuche - disabled:
            /*
            this.$set(tmp, "baumKnotenTyp", response.data.baumKnotenTyp);
            this.$set(tmp, "children", response.data.children);
            // tmp = response.data
            this.$refs.treeBaustoffe.setExpanded(
              this.selectedKeyTreeBaustoffe,
              false
            );
            */
            /*
            tmp.children = [];

            console.log("lazy: ", ths.$refs.treeBaustoffe.lazy);
            // lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"}
            // HINWEIS: Es handelt sich bei lazy um ein JS Objekt, keinen Array
            // Zugriff auf ein Element darin mit this.$refs.treeBaustoffe.lazy[id]
            // Resetten eines Elements darin mit delete this.$refs.treeBauestoffe.lazy[id]
            delete this.$refs.treeBaustoffe.lazy[tmp._id]; // Resetten des Eintrags im Objekt lazy

            tmp.lazy = true;
            // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
            //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
            //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
            // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            */
            // this.$refs.treeBaustoffe.setExpanded(tmp._id, true);
            /*
            this.selectedNodeTreeBaustoffe.children.push({
              _id: response.data._id,
              baustoffBezeichnung: response.data.baustoffBezeichnung,
              baueigenschaften:                      // ACHTUNG: Überprüfen!
                response.data.baueigenschaften,      // ACHTUNG: Überprüfen!
              lazy: true
            });
            */
          })
          .catch(error => {
            console.log("Error in createChildBaustoff - error: ", error);
            if (error.response.status === 403) {
              console.log(
                "Error 403 - Geschwisterbaustoff mit dieser Bezeichnung existiert bereits"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUSTOFF_NEUANLAGE_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
              );
            } else {
              // Status 500
              // Logging ist bereits durch Axios Interceptor erfolgt!
              // console.log("Error status 500 bei CreateChildBaustoff")
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUSTOFF_NEUANLAGE_FEHLER
              );
            }
            this.createNewBaustoffDialog = false;
          });
      } else {
        console.log("Fehlende Bezeichnung für Neuanlage Kindbaustoff!");
        globalStore.showBenutzerNachricht(
          BenutzerNachrichten.BAUSTOFF_NEUANLAGE_WARNUNG_BEZEICHNUNG_EINGEBEN
        );
      }
    },

    // NEU: Methoden für Form zum Umbenennen eines Baustoffs
    resetRenameBaustoff() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - resetted die Validation im q-form innerhalb des q-dialogs für das Umbenennen eines Knotens im Baustoffbaum
      // Greift per $refs auf das Form zu und ruft dessen API-MEthode resetValidation() auf
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetRenameBaustoff()");
      this.$refs.formUmbenennenBaustoffDialog.resetValidation();
    },

    renameBaustoff() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - führt eine Umbenennung des ausgewählten Baustoffs am Backend durch
      //--------------------------------------------------------------------------------------------------------------------
      if (this.selectedKeyTreeBaustoffe != null) {
        console.log("In renameBaustoff()");
        console.log("id: ", this.selectedKeyTreeBaustoffe);
        console.log(
          "Bisherige baustoffBezeichnung: ",
          this.selectedNodeTreeBaustoffe.baustoffBezeichnung
        );
        console.log(
          "Geänderte baustoffBezeichnung: ",
          this.geaenderteBezeichnungBaustoff
        );
        // NEU:
        const apiRoute =
          process.env.API +
          "/Baustoffe/" +
          this.selectedKeyTreeBaustoffe /* :id */ +
          "/Bezeichnung";
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBaustoffe'");
        this.$socket.emit("leaveRoom", {
          room: "roomBaustoffe"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBaustoffe'");
        //=========================================================================================================================================
        this.$axios
          // ALT: .put("http://localhost:8080/API/UpdateMaterialName", {
          // NEU:
          .put(apiRoute, {
            baustoffBezeichnung: this.geaenderteBezeichnungBaustoff
            // _id: this.selectedKeyTreeBaustoffe
          })
          .then(response => {
            console.log("response status: ", response.status);
            // Nun die geänderte Bezeichnung auch im Baum reflektieren:
            // HINWEIS: Obwohl selectedNodeTreeBaustoffe computed auf dem nested Aarray nodesTreeBaustoffe ist, kann
            // durch die Zuweisung unten darüber eine Änderung im nested Array nodesTreeBaustoffe erfolgen.
            // Es muss also NICHT mit einer rekursiven Funktion auf dem nested Array nodesTreeBaustoffe erst die id-Felder
            // nach der id selectedKeyTreeBaustoffe durchsucht werden und dann in dem gefundenen Knoten das Feld baustoffBezeichnung
            // updated werden.
            this.selectedNodeTreeBaustoffe.baustoffBezeichnung = this.geaenderteBezeichnungBaustoff;
            this.renameSelectedBaustoffDialog = false;
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUSTOFF_BEZEICHNUNG_AENDERUNG_ERFOLG
            );
          })
          .catch(error => {
            console.log("error: ", error);
            this.renameSelectedBaustoffDialog = false;
            // Hier den Fall Status 403 abhandeln (Baustoffbezeichnung nicht eindeutig unter den Geschwisterknoten)
            if (error.response.status === 403) {
              console.log(
                "Status 403 - geänderte Baustoffbezeichnung existiert bereits an einem Geschwisterknoten"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUSTOFF_BEZEICHNUNG_AENDERUNG_FEHLER_EXISTIERT_BEREITS
              );
            } else {
              // sonstiger Fehler
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUSTOFF_BEZEICHNUNG_AENDERUNG_FEHLER
              );
            }
          });
      }
    },

    refreshTreeBaustoffeSpecialized() {
      this.specializedReload(
        this.nodesTreeBaustoffe,
        this.selectedNodeTreeBaustoffe
      );
    },

    async refreshTreeBaustoffe() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - der komplette Bauvorhabenbaum wird neu aus der Datenbank geladen. Dabei wird eine Rekursion benutzt.
      // ACHTUNG: Es wird hier KEIN lazy Loading benutzt, sondern der Baum mit eigener rekursiver Methode ladeKinderRekursiv() neu aufgebaut!
      // Nach Beendigung dieser Funktion ist der verschachtelte Array nodesTreeBaustoffe neu aufgebaut mit den neuesten Daten aus der Datenbank
      // HINWEIS: Testmatrix für diese Funktion in bim-click-design-internals.md
      // HINWEIS: Die Objekte/Arrays this.$refs.treeBaustoffe.lazy und this.$refs.treeBaustoffe.expanded und .selected bleiben in ihrem bisherigen Zustand!
      // ACHTUNG: Diese Methode hat zwar async/await, man kann sich aber dennoch nicht darauf verlassen, dass die gesamte Methode komplett zu Ende ist nach Rückkehr!
      //          Daher muss man in bewegeZweig() nach Aufruf von refreshTreeBaustoffe() vor dem Aufruf von setExpanded(), welches unter der Decke die Methode
      //          lazyLoadHandlingTreeBaustoffe() aufruft (die asynchrone Datenbank-Calls macht) mit Sleeps als Workaround arbeiten.
      // ACHTUNG: Diese Methode funktionierte bzgl. strukturellen Änderungen im Baum (Hinzufügen, Löschen, Verschieben, Kopieren von Knoten)
      //          in den meisten Fällen, wie z.B. dem einfachen Hinzufügen oder Löschen von einzelnen Knoten.
      //          Diese Methode funktionierte nicht immer wenn im Baum ganze Zweige verschoben oder kopiert wurden - siehe Testmatrix.
      //          Diese Fälle sind mittlerweile ebenfalls gefixed!
      // ===================================================================================================================
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In refreshTreeBaustoffe() - Baum wird neu aufgebaut");
      const apiRoute = process.env.API + "/Baustoffe/Wurzel";
      await this.$axios // async/await sicherheitshalber wegen Rekursion
        .get(apiRoute)
        .then(async response => {
          console.log("Success get für Wurzel Bauvorhabenbaum");
          // console.log("response.data: ", response.data);
          var neuGeladenerKnoten = response.data;
          //-------------------------------------------------------------------------------------------------------
          // ALT - lazy für alle Baumknotentypen auf true setzen - disabled
          // neuGeladenerKnoten.lazy = true; // FIX 09.05.2020, von false auf true gesetzt im Zusammenhang mit Fixing der Fehler beim Verschieben/Kopieren von Zweigen
          // NEU - lazy setzen in Abhängigkeit von baumKnotenTyp:
          if (neuGeladenerKnoten.baumKnotenTyp === "Blattknoten") {
            neuGeladenerKnoten.lazy = false;
          } else {
            neuGeladenerKnoten.lazy = true;
          }
          // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
          //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
          //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
          // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
          //---------------------------------------------------------------------------------------------------------
          console.log(
            "Start der Rekursion zum Neuaufbau von nodesTreeBaustoffe"
          );
          var tmp = await this.ladeKinderRekursiv(
            // tmp hält den aktuellen Zustand des neu aufgebauten Baums
            this.nodesTreeBaustoffe[0], // Bisheriger Zustand des aktuell bearbeiteten Knotens - hier Wurzelknoten (verschachtelt mit Kindern im children-Feld)
            neuGeladenerKnoten // Neu vom Backend geholter Zustand des aktuell bearbeiteten Knotens (verschachtelt mit Kindern im children-Feld)
          );
          console.log(
            "Ende der Rekursion - nodesTreeBaustoffe wird aktualisiert mit dem Ergebnis"
          );
          // Reaktiv den Knoten auf die nodes-Variable pushen
          this.nodesTreeBaustoffe = [];
          this.nodesTreeBaustoffe.push(tmp);
          console.log(
            "nodesTreeBaustoffe nach Neu-Laden: ",
            this.nodesTreeBaustoffe
          );
          // this.vorgangNeuanlage = false; // ALT
          //-----------------------------------------------------------------------------------------------------------------------------------------
          // TODO XXXXXXX: Hier eventuell ähnlicher Code wie in baueinheiten.vue für #505 nachzuziehen!!!
          //-----------------------------------------------------------------------------------------------------------------------------------------
          return true; // Hinweis: Eingefügt, um Ende obiger Promise (.then) zu signalisieren
        })
        .catch(error => {
          // NEU: Error Handling mit .catch
          console.log("Error bei refreshTreeBaustoffe - error: ", error);
        });
    },

    async ladeKinderRekursiv(
      alterZustandAktuellBearbeiteterKnoten,
      neuerZustandAktuellBearbeiteterKnoten
    ) {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - durchläuft den bisherigen Baum rekursiv und lädt ihn neu.
      // In alterZustandAktuellBearbeiteterKnoten steht immer der aktuelle Knoten (aus dem alten Baum), in neuerZustandAktuellBearbeiteterKnoten steht sein Update.
      // In dieser Methode werden die Kinder in neuerZustandAktuellBearbeiteterKnoten neu geladen, falls der aktuelle alte Knoten denn geladene Kinder hatte.
      // Gleichzeitig wird (über eine Variable tmp) neuerZustandAktuellBearbeiteterKnoten als Ergebnis der Funktion returned - dies erfolgt, um das Ende der
      // Funktion besser zu signalisieren.
      // HINWEIS: nodesTreeBaustoffe[0], mit dem die Funktion initial aufgerufen wird, enthält NUR die vor dem Refresh bereis per lazy Loading geladenen Knoten,
      //          NICHT ALLE Knoten!!!
      // HINWEIS: children in nodesTreeBaustoffe ist verschachtelt, während das API getKindKnotenBaustoff die Kinder linear holt!
      // TODO XXXXXX: Konsistenteres Error Handling mit catch für den Axios Call!!!
      //--------------------------------------------------------------------------------------------------------------------

      function findIndexOfKind(id) {
        // Helper-Funktion um im Array response.data, welcher Kinder enthält, den Index für ein Element mit id zu ermitteln, mittels findIndex
        // Siehe https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex
        return response.data.findIndex(item => item._id === id);
      }

      //--------------------------------------------------------------------------------------------------------------------
      try {
        //----------------------------------------------------------------------------------------------------------
        // ALT - lazy für alle Baumknotentypen auf true setzen - disabled
        // neuerZustandAktuellBearbeiteterKnoten.lazy = true;
        // NEU - lazy setzen in Abhängigkeit von baumKnotenTyp:
        if (
          neuerZustandAktuellBearbeiteterKnoten.baumKnotenTyp === "Blattknoten"
        ) {
          neuerZustandAktuellBearbeiteterKnoten.lazy = false;
        } else {
          neuerZustandAktuellBearbeiteterKnoten.lazy = true;
        }
        // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
        //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
        //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
        // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
        //-----------------------------------------------------------------------------------------------------------
        if (alterZustandAktuellBearbeiteterKnoten.hasOwnProperty("children")) {
          console.log("In ladeKinderRekursiv()");
          let apiRoute =
            process.env.API +
            "/Baustoffe/" +
            alterZustandAktuellBearbeiteterKnoten._id +
            "/Kinder";
          // this.$axios.get(apiRoute); // Fix MS 07.05.2020 - disabled, die Zeile darunter macht ja dasselbe!
          var response = await this.$axios.get(apiRoute);
          // TODO XXXXXX: Konsistenteres Error Handling mit catch für den Axios Call!!!
          // Folgende console.logs disabled, da dieselbe Info schon von Axios Response Interceptor ausgegeben wird:
          /*
          console.log(
            "Response von API readKindKnotenBaustoff() für Knoten mit id: ", alterZustandAktuellBearbeiteterKnoten._id
          );
          console.log(
            "response.status: ",
            response.status
          );
          console.log(
            "response.data: ",
            response.data
          );
          */
          neuerZustandAktuellBearbeiteterKnoten.children = response.data; // HINWEIS: Diese Zuweisung weist ggf. auch neu hinzugekommene Kindknoten mit zu!!!
          try {
            for (
              var i = 0;
              i < alterZustandAktuellBearbeiteterKnoten.children.length;
              i++
            ) {
              // HINWEISE:
              // i ist Index für Array alterZustandAktuellBearbeiteterKnoten.children
              // currentIndex ist Index für Arrays response.data (enthält die Children als Objekte, hat kein Feld children!) und neuerZustandAktuellBearbeiteterKnoten.children
              console.log(
                "In Schleife für Rekursion - baumKnotenTyp wird gesetzt und Rekursion für Kinder aufgerufen - i:",
                i
              );
              const currentIndex = findIndexOfKind(
                alterZustandAktuellBearbeiteterKnoten.children[i]._id
              ); // Finde den korrespondierenden Index für den Zugriff auf die anderen Arrays
              console.log("currentIndex: ", currentIndex);
              if (currentIndex === -1) {
                console.log(
                  "Spezialfall: Knoten wurde nach dem Verschieben gelöscht - diesen ignorieren - id: ",
                  alterZustandAktuellBearbeiteterKnoten.children[i]._id
                );
                continue; // Beendet aktuellen Schleifendurchlauf, führt nächste Iteration der Schleife aus
                // ACHTUNG: Diese Abfrage ist aus Robustheitsgründen generell sinnvoll, covered aber auch den Spezialfall, wenn in alterZustandAktuellBearbeiteterKnoten.children
                // der bisherig Wurzelknoten des bewegten Zweigs noch enthalten ist - dieser wurde ja gelöscht, daher returned die API-Methode
                // readKindKnotenBaustoff() in diesem Fall dann 404! In diesem Fall hier mit continue fortfahren, um das Lesen
                // der Kindknoten für solche Knoten zu unterbinden!
              }
              // Andernfalls weitermachen:
              //--------------------------------------------------------------------------------------------------------
              // NEU - lazy setzen für das aktuelle Kind in Abhängigkeit von baumKnotenTyp:
              if (response.data[currentIndex].baumKnotenTyp === "Blattknoten") {
                neuerZustandAktuellBearbeiteterKnoten.children[
                  currentIndex
                ].lazy = false;
              } else {
                neuerZustandAktuellBearbeiteterKnoten.children[
                  currentIndex
                ].lazy = true;
              }
              // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
              //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
              //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
              // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
              //--------------------------------------------------------------------------------------------------------
              // Nun die Rekursion durchführen für das aktuelle Kind:
              var tmp = await this.ladeKinderRekursiv(
                alterZustandAktuellBearbeiteterKnoten.children[i],
                // NEU:
                response.data[currentIndex] // NEU
                // ALT: response.data[i] // ACHTUNG: Dieser Code funktionierte meistens, war aber nicht robust - man sollte nicht davon ausgehen, dass sich die jeweligen per [i]
                // indizierten Positionen in den beiden Arrays immer entsprechen!!! Daher geändert mit Hilfe der Helper-Funktion!
                // --------------------------------------------------------------------------------------------------------------------------------------------------
                // ACHTUNG: Bei dem neu eingefügten Wurzelknoten eines bewegten (kopierten/verschobenen) Zweigs, der bisher NICHT in nodesTreeBaustoffe enthalten war,
                // aber in response.data[i] nun unter dem neuen Elternknoten mit zurückkommt, wird dessen neuer Zustand response.data[i] hier
                // "unterschlagen" - response.data.length ist in diesem Fall um 1 größer sein alterZustandAktuellBearbeiteterKnoten.children.length!!!
                // Dies gilt auch beim Einfügen von neuen (Blatt-)Knoten, ist dort aber vermutlich unschädlich.
                // FIX: Obigen Fall nachfolgend separat handeln - siehe unten
              );
            }
            // NEU: Obigen Fall hier separat handeln:
            if (
              response.data.length ===
              alterZustandAktuellBearbeiteterKnoten.children.length + 1
            ) {
              console.log(
                "Achtung: Neu erzeugter Knoten gefunden - id: ",
                response.data[response.data.length - 1]._id
              );
              console.log(
                "Dessen lazy-Flag wird nun in Abhängigkeit von baumKnotenTyp gesetzt"
              );
              //--------------------------------------------------------------------------------------------------------
              // ALT - lazy unbedingt auf true setzen:
              // response.data[response.data.length-1].lazy = true; // ACHTUNG: War FALSCH, response.data statt neuerZustandAktuellBearbeiteterKnoten, und .children fehlte!!!
              // neuerZustandAktuellBearbeiteterKnoten[response.data.length-1].lazy = true; // ACHTUNG: War wohl falsch, .children fehlte!!!
              // neuerZustandAktuellBearbeiteterKnoten.children[response.data.length-1].lazy = true; // Korrigierte Version, ersetzt durch selektives Setzen des lazy-Flags
              // NEU - lazy setzen für das aktuelle Kind in Abhängigkeit von baumKnotenTyp:
              if (
                response.data[response.data.length - 1].baumKnotenTyp ===
                "Blattknoten"
              ) {
                neuerZustandAktuellBearbeiteterKnoten.children[
                  response.data.length - 1
                ].lazy = false;
              } else {
                neuerZustandAktuellBearbeiteterKnoten.children[
                  response.data.length - 1
                ].lazy = true;
              }
              // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
              //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
              //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
              // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
              //--------------------------------------------------------------------------------------------------------
              /*
              // Optionaler Code - bisher nicht weiter verfolgt: Ggf. dessen Kinder aus Datenbank lesen
              // Einstweilen zur Bestimmung, ob er Kinder hat, den baumKnotenTyp prüfen:
              if (response.data[response.data.length-1].baumKnotenTyp === "Verzweigungsknoten") {
                console.log("Verzweigungsknoten - dessen Kinder lesen");
                apiRoute =
                  process.env.API +
                  "/Baustoffe/" +
                  response.data[response.data.length-1]._id +
                  "/Kinder";
                response = await this.$axios.get(apiRoute);
                // TODO XXXXXX: Konsistenteres Error Handling mit catch für den Axios Call!!!
                console.log(
                  "Antwort aus API getKindKnotenBaustoff() - response.data: ",
                  response.data
                );
                // Diese nun weiterverarbeiten - aber wie?
                // neuerZustandAktuellBearbeiteterKnoten.children.push(response.data);
                console.log("ACHTUNG: Code ist hier noch unvollständig!!!")
              }
              */
            }
          } catch (error) {
            console.log("Error in ladeKinderRekursiv() - error: ", error);
          }
          console.log(
            "Nach Rekursion - result.children: ",
            neuerZustandAktuellBearbeiteterKnoten.children
          );
        }
        return neuerZustandAktuellBearbeiteterKnoten;
      } catch (error) {
        console.log("Error in ladeKinderRekursiv() - error: ", error);
      }
    },

    //----------------------------------------------------------------------------------------------------------------------
    // Methoden für Baueigenschaften
    //----------------------------------------------------------------------------------------------------------------------

    aktualisiereDefiniertNichtUndefiniert(baueigenschaft) {
      //--------------------------------------------------------------------------------------------------------------------
      // Aktualisiert bei aktivierter Baueigenschaft in Abhängigkeit vom Wertetyp, und ob die
      // für den Wertetyp relevanten Wertefelder gesetzt sind oder nicht,
      // das wertbezogene Merkmal definiertNichtUndefiniert.
      // Bei deaktivierter Baueigenschaft werden in Abhängigkeit vom Wertetyp die betreffenden Wertefelder geleert.
      //--------------------------------------------------------------------------------------------------------------------
      if (!baueigenschaft.aktiviertNichtDeaktiviert) {
        // Baueigenschaft ist deaktiviert:
        // Alle Wertefelder leeren und die Baueigenschaft auf undefiniert setzen
        switch (baueigenschaft.typbezogeneBaueigenschaft.werteTyp) {
          case "Kennwert":
            baueigenschaft.kennWert1 = null;
            // baueigenschaft.typbezogeneBaueigenschaft.symbol = null; // War falsch, ist typbezogenes Feld!
            // baueigenschaft.typbezogeneBaueigenschaft.einheit = null; // War falsch, ist typbezogenes Feld!
            // baueigenschaft.typbezogeneBaueigenschaft.operator = null; // War falsch, ist typbezogenes Feld!
            // baueigenschaft.typbezogeneBaueigenschaft.formel = null; // War falsch, ist typbezogenes Feld! // NEU
            baueigenschaft.bezeichnungsWert1 = null;
            break;
          case "Kennwertepaar":
            baueigenschaft.kennWert1 = null;
            baueigenschaft.kennWert2 = null;
            // baueigenschaft.typbezogeneBaueigenschaft.symbol = null; // War falsch, ist typbezogenes Feld!
            // baueigenschaft.typbezogeneBaueigenschaft.einheit = null; // War falsch, ist typbezogenes Feld!
            // baueigenschaft.typbezogeneBaueigenschaft.operator = null; // War falsch, ist typbezogenes Feld!
            // baueigenschaft.typbezogeneBaueigenschaft.formel = null; // War falsch, ist typbezogenes Feld! // NEU
            baueigenschaft.bezeichnungsWert1 = null;
            baueigenschaft.bezeichnungsWert2 = null;
            break;
          case "Datumswert":
            baueigenschaft.datumsWert1 = null;
            baueigenschaft.bezeichnungsWert1 = null;
            break;
          case "Datumswertepaar":
            baueigenschaft.datumsWert1 = null;
            baueigenschaft.datumsWert2 = null;
            baueigenschaft.bezeichnungsWert1 = null;
            baueigenschaft.bezeichnungsWert2 = null;
            break;
          case "Tageszeitwert": // NEU
            baueigenschaft.tagesZeitWert1 = null;
            baueigenschaft.bezeichnungsWert1 = null;
            break;
          case "Tageszeitwertepaar": // NEU
            baueigenschaft.tagesZeitWert1 = null;
            baueigenschaft.tagesZeitWert2 = null;
            baueigenschaft.bezeichnungsWert1 = null;
            baueigenschaft.bezeichnungsWert2 = null;
            break;
          case "Bezeichnungswert":
            baueigenschaft.bezeichnungsWert1 = null;
            break;
          case "Bezeichnungswertepaar":
            baueigenschaft.bezeichnungsWert1 = null;
            baueigenschaft.bezeichnungsWert2 = null;
            break;
          case "Aufzählungswert":
            // console.log("Aufzählungswert");
            baueigenschaft.aufzaehlungsWert = null;
            // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            baueigenschaft.bezeichnungsWert1 = null;
            break;
          case "Wahrheitswert":
            baueigenschaft.wahrheitsWert = null;
            // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            baueigenschaft.bezeichnungsWert1 = null;
            break;
        }
        baueigenschaft.definiertNichtUndefiniert = false;
      } else {
        // Bei Aktivierung, je nach Wertetyp, prüfen ob die entsprechenden Wertefelder leer oder gelöscht sind.
        // Wenn das nicht der Fall ist, wird definiertNichtUndefiniert auf true gesetzt, sonst auf false
        switch (baueigenschaft.typbezogeneBaueigenschaft.werteTyp) {
          case "Kennwert":
            if (
              (baueigenschaft.kennWert1 === null ||
                baueigenschaft.kennWert1 === "") &&
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Kennwertepaar":
            if (
              (baueigenschaft.kennWert1 === null ||
                baueigenschaft.kennWert1 === "") &&
              (baueigenschaft.kennWert2 === null ||
                baueigenschaft.kennWert2 === "") &&
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "") &&
              (baueigenschaft.bezeichnungsWert2 === null ||
                baueigenschaft.bezeichnungsWert2 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Datumswert":
            if (
              (baueigenschaft.datumsWert1 === null ||
                baueigenschaft.datumsWert1 === "") &&
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Datumswertepaar":
            if (
              (baueigenschaft.datumsWert1 === null ||
                baueigenschaft.datumsWert1 === "") &&
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "") &&
              (baueigenschaft.datumsWert2 === null ||
                baueigenschaft.datumsWert2 === "") &&
              (baueigenschaft.bezeichnungsWert2 === null ||
                baueigenschaft.bezeichnungsWert2 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Tageszeitwert": // NEU
            if (
              (baueigenschaft.tagesZeitWert1 === null ||
                baueigenschaft.tagesZeitWert1 === "") &&
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Tageszeitwertepaar":
            if (
              (baueigenschaft.tagesZeitWert1 === null ||
                baueigenschaft.tagesZeitWert1 === "") &&
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "") &&
              (baueigenschaft.tagesZeitWert2 === null ||
                baueigenschaft.tagesZeitWert2 === "") &&
              (baueigenschaft.bezeichnungsWert2 === null ||
                baueigenschaft.bezeichnungsWert2 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Bezeichnungswert":
            if (
              baueigenschaft.bezeichnungsWert1 === null ||
              baueigenschaft.bezeichnungsWert1 === ""
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Bezeichnungswertepaar":
            if (
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "") &&
              (baueigenschaft.bezeichnungsWert2 === null ||
                baueigenschaft.bezeichnungsWert2 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Aufzählungswert":
            // console.log("Aufzählungswert");
            if (
              (baueigenschaft.aufzaehlungsWert === null ||
                baueigenschaft.aufzaehlungsWert === "" ||
                baueigenschaft.aufzaehlungsWert === []) && // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Wahrheitswert":
            // ALT: Der Fall, dass der Wahrheitswert leer ist, kann nicht erkannt werden
            // NEU: Kann nun erkannt werden, mit prop indeterminate am q-toggle:
            if (
              baueigenschaft.wahrheitsWert === null && // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
        }
      }
    },

    updateAusgewaehlteBaueigenschaft() {
      //------------------------------------------------------------------------------------------------------------------------------
      // Aktualisiert die augewaehlte Baueigenschaft am Backend
      //------------------------------------------------------------------------------------------------------------------------------
      console.log(`In updateAusgewaehlteBaueigenschaft`);

      // Für die Baueigenschaft zunächst ermitteln, ob sie definierte Werte hat oder nicht, und definiertNichtUndefiniert entsprechend setzen:
      this.ausgewaehlteBaueigenschaft.definiertNichtUndefiniert = this.istDefiniertAusgewaehlteBaueigenschaft; // Computed Property, siehe unten

      var apiRoute =
        process.env.API +
        "/Baustoffe/" +
        this.selectedKeyTreeBaustoffe +
        "/Baueigenschaften";

      // console.log("selectModelBauinformationAusgewaehlteBaueigenschaft: ", this.selectModelBauinformationAusgewaehlteBaueigenschaft);

      // NEU - ohne Flattening:
      this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation._id =
        this.selectModelBauinformationAusgewaehlteBaueigenschaft != null
          ? this.selectModelBauinformationAusgewaehlteBaueigenschaft._id
          : null;
      // Feld setzen mit ausgewählter Bauinformation in q-select
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      console.log("Vor Emit to leave room 'roomBaustoffe'");
      this.$socket.emit("leaveRoom", {
        room: "roomBaustoffe"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBaustoffe'");
      //=========================================================================================================================================
      // ACHTUNG: Hier zusätzlich Leave für roomBaueigenschaften notwendig, denn deren (typbezogene) Felder können ebenfalls geändert worden sein!
      console.log("Vor Emit to leave room 'roomBaueigenschaften'");
      this.$socket.emit("leaveRoom", {
        room: "roomBaueigenschaften"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBaueigenschaften'");
      //=========================================================================================================================================
      this.$axios
        .put(/* url */ apiRoute, {
          // NEU: Ruft updateBaueigenschaftBaustoff als Route Handler am Backend
          // Body - in req.body.baueigenschaft wird die upzudatende Baueigenschaft übergeben
          // Diese enthält auch ein Feld _id zur Identifikation der zugehörigen typbezogenen Baueigenschaft in BaueigenschaftenCollection
          // in req.body.baueigenschaft.typbezogeneBaueigenschaft._id
          // Dieses wird schonn beim Lesen aus der Datenbank dem Objekt hinzugefügt (ohne Flattening!)
          baueigenschaft: this.ausgewaehlteBaueigenschaft,
          // ALT 280720: idBaueigenschaft: this.ausgewaehlteBaueigenschaft._id,
          idBaueigenschaft: this.ausgewaehlteBaueigenschaft
            .typbezogeneBaueigenschaft._id,
          idBaustoff: this.selectedKeyTreeBaustoffe,
          definiertNichtUndefiniert: this.istDefiniertAusgewaehlteBaueigenschaft // Computed Property - ermittelt, ob die Baueigenschaft definierte Werte hat
        })
        .then(async updateResponse => {
          // updateResponse ist die Response vom Update, es wird daraus nur updateResponse.status benötigt
          console.log("updateResponse: ", updateResponse);
          if (updateResponse.status === 200) {
            //=======================================================================================================================
            await this.refreshTreeBaustoffe(); // Aktualisiere den Baustoffbaum, der ausgewählte Knoten bleibt dabei erhalten,
            // sein Inhalt kann sich geändert haben!
            //=======================================================================================================================
            // NEU: Banner-Benutzernachricht im Footer per global Store und Enums:
            console.log(
              "In updateAusgewaehlteBaueigenschaft() - Update der Baueigenschaft erfolgreich"
            );
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEIGENSCHAFT_AENDERUNG_ERFOLG
            );
            //----------------------------------------------------------------------------------------------------------
            this.selectedRowsTableBaueigenschaften[0] = this.selectedNodeTreeBaustoffe.baueigenschaften.find(
              arg => this.ausgewaehlteBaueigenschaft._id === arg._id
            );
            // Sucht in der aktualisierten Tabelle der Baueigenschaften am ausgewählten Baustoff im Baum nach der id der gerade aktualisierten Baueigenschaft
            // und aktualisiert die ausgewählte Baueigenschaft auf die Werte der aktualisierten Baueigenschaft am ausgewählten Baustoff im aus der Datenbank
            // neu geladenen Baustoffbaum - dabei ist der Key in der QTable derselbe wie vor dem Update
            //----------------------------------------------------------------------------------------------------------
            // NEU: Fix #118 22.05.2020 gegen Fehler im alten Code unten:
            this.ausgewaehlteBaueigenschaft = Object.assign(
              {},
              this.selectedRowsTableBaueigenschaften[0]
            );
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft = Object.assign(
              {},
              this.selectedRowsTableBaueigenschaften[0]
                .typbezogeneBaueigenschaft
            );
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation = Object.assign(
              {},
              this.selectedRowsTableBaueigenschaften[0]
                .typbezogeneBaueigenschaft.bauinformation
            );
            // Fix 28.08.2020:
            // ACHTUNG: Funktioniert so nur im Zusammenspiel mit type="date" an den betreffenden Quasar-Feldern, welche
            //          in der Lage sind, diese Felder als native Date-Typen zu verarbeiten!
            //          Die Date-Utils verarbeiten als Argument nur diese Date-Typen, nicht Strings!
            this.ausgewaehlteBaueigenschaft.datumsWert1 = date.formatDate(
              this.ausgewaehlteBaueigenschaft.datumsWert1,
              "YYYY-MM-DD"
            );
            this.ausgewaehlteBaueigenschaft.datumsWert2 = date.formatDate(
              this.ausgewaehlteBaueigenschaft.datumsWert2,
              "YYYY-MM-DD"
            );
            //------------------------------------------------------------------------------------------------------------
            // ALT - FALSCH, da hier Referenzen zugewiesen werden, wir wollen jedoch auf Kopien arbeiten!
            // Führte dazu, dass in der QTable Felder aktualisiert werden, obwohl kein Speichern erfolgte - daher disabled:
            // this.ausgewaehlteBaueigenschaft = this.selectedRowsTableBaueigenschaften[0];
            //------------------------------------------------------------------------------------------------------------
            console.log(
              "Selected Row in Tabelle für Baueigenschaften wurde aktualisiert"
            );
            //-------------------------------------------------------------------------------------------------------------
            // NEU: Fix #119 22.05.2020 gegen Fehler bei 2-maligem Speichern - "Cannot set property '_id' of null" für das Objekt
            // selectModelBauinformationAusgewaehlteBaueigenschaft:
            this.selectModelBauinformationAusgewaehlteBaueigenschaft = this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft.find(
              bauinformation => {
                return (
                  bauinformation._id ===
                  this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft
                    .bauinformation._id
                );
              }
            );
          } else {
            console.log(
              "In updateAusgewaehlteBaueigenschaft() - Updateprüfung im Backend abgelehnt"
            );
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEIGENSCHAFT_AENDERUNG_ABLEHNUNG
            );
          }
        })
        .catch(error => {
          console.log(
            "In updateAusgewaehlteBaueigenschaft() - Error bei Update der Baueigenschaft für Baustoff"
          );
          console.log("error: ", error);
          // TODO: showBenutzerNachricht mit entsprechender Nachricht
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFT_AENDERUNG_FEHLER
          );
        });
      // .finally(/* Tue etwas bei Erfolg und Misserfolg */);
    },

    resetNeueBaueigenschaft() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode, um die neue Baueigenschaft zu resetten (auf leere Baueigenschaft)
      // Wird von "Zurücksetzen"-Button ausgelöst
      //--------------------------------------------------------------------------------------------------------------------
      console.log("resetNeueBaueigenschaft");
      this.neueBaueigenschaft = Object.assign({}, this.leereBaueigenschaft);
      this.neueBaueigenschaft.typbezogeneBaueigenschaft = Object.assign(
        {},
        this.leereBaueigenschaft.typbezogeneBaueigenschaft
      );
      this.selectOptionsAufzaehlungswertNeueBaueigenschaft = [];
      this.suppressNotificationNeuTabBaueigenschaften = true; // Verhindert Notification bei erstem Tab-Auruf!
      // (Benutzer hat dann noch keine Aktivierung oder Deaktivierung auslöst)
      this.selectModelAufzaehlungswertNeueBaueigenschaft = null;
      this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft = null;
      this.selectModelBauinformationNeueBaueigenschaft = null;
      this.initialisiereSelectOptionsUndSelectFilterOptionsAufzaehlungswertNeueBaueigenschaft();
    },

    //----------------------------------------------------------------------------------------------------------------------
    resetAusgewaehlteBaueigenschaft() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode, um die ausgewählte Baueigenschaft zu resetten (Änderungen werden rückgängig gemacht)
      // Wird von Buttons ausgelöst oder Tab-Anwahl
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetAusgewaehlteBaueigenschaft()");
      if (this.selectedRowsTableBaueigenschaften.length > 0) {
        this.ausgewaehlteBaueigenschaft = Object.assign(
          {},
          this.selectedRowsTableBaueigenschaften[0]
        );
        this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft = Object.assign(
          {},
          this.selectedRowsTableBaueigenschaften[0].typbezogeneBaueigenschaft
        );
        this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation = Object.assign(
          {},
          this.selectedRowsTableBaueigenschaften[0].typbezogeneBaueigenschaft
            .bauinformation
        );
        // ALT: Code mit Flattening, disabled:
        /*
        this.zugeordneteBauinformationAusgewaehlteBaueigenschaft = this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft.find(
          bauinformation => {
            return (
              bauinformation._id ===
              this.ausgewaehlteBaueigenschaft.bauinformationId
            );
          }
        );
        */
        // NEU: Code OHNE Flattening am Backend, 2-fach genestetes Objekt!!!
        this.selectModelBauinformationAusgewaehlteBaueigenschaft = this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft.find(
          bauinformation => {
            return (
              bauinformation._id ===
              this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft
                .bauinformation._id
            );
          }
        );
        // NEU: Date Felder aufbereiten in das von type="date" an den q-input Feldern erwartete Format "YYYY-MM-DD":
        // ACHTUNG: Funktioniert so nur im Zusammenspiel mit type="date" an den betreffenden Quasar-Feldern, welche
        //          in der Lage sind, diese Felder als native Date-Typen zu verarbeiten!
        //          Die Date-Utils verarbeiten als Argument nur diese Date-Typen, nicht Strings!
        this.ausgewaehlteBaueigenschaft.datumsWert1 = date.formatDate(
          this.ausgewaehlteBaueigenschaft.datumsWert1,
          "YYYY-MM-DD"
        );
        this.ausgewaehlteBaueigenschaft.datumsWert2 = date.formatDate(
          this.ausgewaehlteBaueigenschaft.datumsWert2,
          "YYYY-MM-DD"
        );
      }
    },

    changeAngezeigtesTabBaueigenschaften(value) {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode, um das ausgewählte Tab für die Baueigenschaften zu initialisieren und es anzuzeigen
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In changeAngezeigtesTabBaueigenschaften() - value: ", value);
      this.tabBaueigenschaften = value;
      console.log("tabBaueigenschaften: ", this.tabBaueigenschaften);
      if (this.tabBaueigenschaften === "neuTabBaueigenschaften") {
        this.initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenNeueBaueigenschaft();
        this.resetNeueBaueigenschaft();
        // NEU - experimentell - Kontexthilfethema per Event setzen (wird verarbeitet durch MyLayout/rechter Drawer)
        this.notifyTopicContextHelp(
          CONTEXT_HELP_BAUSTOFFE_BAUEIGENSCHAFTEN_NEU
        );

        // NEU - Bedienungshilfe im rechten Drawer steuern über globalStore
        // NEU: Ist nicht mehr nötig, da die Steuerung nun doch über Events erfolgt (da mehrere verschachtelte Expansion Items gleichzeitig zu öffnen sind)
        // globalStore.setIsSelectedNeuBaueigenschaftenBaustoffe(); // Für Bedienungshilfe setzen

        // NEU - Event abfeuern zum Anzeigen des richtigen Bedienungshilfethemas:
        this.showBedienungsHilfe("bedienungsHilfeNeuBaueigenschaftenBaustoffe"); // Aufruf mit String-Parameter ref des betreffenden q-expansion-items
      }
      if (
        this.tabBaueigenschaften === "auswahlTabBaueigenschaften" ||
        this.tabBaueigenschaften === "beschreibungTabBaueigenschaften"
      ) {
        this.initialisiereAusgewaehltesTabBaueigenschaften();
        this.pruefeAktivierungFuerAusgewaehlteBaueigenschaft();
        // Setzen Kontexthilfethema wird für Button "Bearbeiten" in initialisiereAusgewaehltesTabBaueigenschaften(); mit erledigt (asymmetrisch zu "Neu") - TODO
        /* this.notifyTopicContextHelp(
          CONTEXT_HELP_BAUSTOFFE_BAUEIGENSCHAFTEN_AUSWAHL
        );
        */
      }
    },

    createNeueBaueigenschaft() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - legt eine neue Baueigenschaft im Backend an und lädt den Baum dann neu.
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In createNeueBaueigenschaft()");
      // Zuerst selectModelBauinformationNeueBaueigenschaft nach neueBaueigenschaft.bauinformation kopieren
      // (= aktuell per q-select im Tab ausgewaehlte, neue oder potentiell auch leere Bauinformation), damit diese abgespeichert wird.
      // ACHTUNG: Der Fall, dass das select model leer ist und damit auch bauinformation null ist, muss im Controller speziell behandelt werden!!!

      this.neueBaueigenschaft.typbezogeneBaueigenschaft.bauinformation =
        this.selectModelBauinformationNeueBaueigenschaft === {}
          ? null
          : this.selectModelBauinformationNeueBaueigenschaft;
      // Nun ggf. das Select Model für den Aufzählungswert nach neueBaueigenschaft.selektierbareOptionenAufzaehlungswert kopieren:
      if (
        this.neueBaueigenschaft.typbezogeneBaueigenschaft.werteTyp ===
        "Aufzählungswert"
      ) {
        this.neueBaueigenschaft.typbezogeneBaueigenschaft.selektierbareOptionenAufzaehlungsWert = this.selectModelAufzaehlungswertNeueBaueigenschaft;
      }
      console.log("neueBaueigenschaft", this.neueBaueigenschaft);

      this.neueBaueigenschaft.baumTyp = "Baustoffbaum"; // NEU: Parameter zur Unterscheidung des BaumTyps, hier Baustoffbaum
      // NEU: Neuanlage mit idBaustoff statt baustoffBezeichnung als Argument:
      this.neueBaueigenschaft.idKnoten = this.selectedKeyTreeBaustoffe; // HINWEIS: idKnoten heißt dieses Feld im Body für API-Methode createBaueigenschaft()

      // Triggere nun Erzeugung der neuen Baueigenschaft am Backend:
      // HINWEIS: Die übrigen Felder in neueBaueigenschaft (baueigenschatsBemerkung, symbol, einheit, operator, formel, Wertefelder, etc. werden nun "flach" an das
      // Backend geschickt zur Verarbeitung durch die Post-API-Methode createBaueigenschaft()
      const apiRoute = process.env.API + "/Baueigenschaften/";
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      console.log("Vor Emit to leave room 'roomBaustoffe'");
      this.$socket.emit("leaveRoom", {
        room: "roomBaustoffe"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBaustoffe'");
      //=========================================================================================================================================
      // ACHTUNG: Hier zusätzlich Leave für roomBaueigenschaften notwendig, denn es wird ja eine neue Baueigenschaft angelegt!
      console.log("Vor Emit to leave room 'roomBaueigenschaften'");
      this.$socket.emit("leaveRoom", {
        room: "roomBaueigenschaften"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBaueigenschaften'");
      //=========================================================================================================================================
      this.$axios
        .post(
          // NEU:
          apiRoute,
          this.neueBaueigenschaft
        )
        .then(response => {
          // NEU: Banner-Benutzernachricht im Footer per global Store und Enums:
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFT_NEUANLAGE_ERFOLG
          );
          this.refreshTreeBaustoffe();
        })
        // NEU: Catch für Error 403 - Baueigenschaft mit dieser Bezeichnung existiert bereits
        .catch(error => {
          console.log("error: ", error);
          if (error.response.status === 403) {
            console.log(
              "Error 403 - Baueigenschaft mit dieser Bezeichnung existiert bereits"
            );
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEIGENSCHAFT_NEUANLAGE_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
            );
          }
        });
    },

    deleteSelectedBaueigenschaft: function(
      wertBezogeneBaueigenschaftenLoeschenInBaumTyp = "Baustoffbaum"
    ) {
      //------------------------------------------------------------------------------------------------------------------
      // Funktion, um eine an einem im Baustoffbaum ausgewählten Baustoff ausgewählte Baueigenschaft in allen
      // Baustoffen zu löschen
      // NEU - #395: Selektives Löschen in den zwei Baumtypen unterstützen
      // Damit wird hier die wertbezogene eine Baueigenschaft nur noch im jeweiligen Baumtyp - hier dem Baustoffbaum - gelöscht
      // ACHTUNG: Bei Baueigenschaften, die nur in diesem Baumtyp angelegt wurden, kann dann eine "leere" typbezogene BEg übrig bleiben!
      // Diese kann jedoch in "Baueigenschaften" mit der dortigen Löschfunktion endgültig gelöscht werden!
      // Dazu zweiter Parameter und gleichnamigen Request-Parameter am API eingeführt:
      //    wertBezogeneBaueigenschaftenLoeschenInBaumTyp - "Allgemein", "Baustoffbaum", "Bauvorhabenbaum"
      //------------------------------------------------------------------------------------------------------------------
      console.log("In deleteSelectedBaueigenschaft()");
      console.log(
        "wertBezogeneBaueigenschaftenLoeschenInBaumTyp: ",
        wertBezogeneBaueigenschaftenLoeschenInBaumTyp
      );
      // NEU:
      const apiRoute =
        process.env.API +
        "/Baueigenschaften/" +
        this.selectedRowsTableBaueigenschaften[0].typbezogeneBaueigenschaft
          ._id + // NEU - ohne Flattening
        // this.selectedRowsTableBaueigenschaften[0].typbezogeneBaueigenschaftId; // ALT - mit Flattening
        // ACHTUNG: Löschen by id der (typbezogenen) Baueigenschaft, NICHT der id der Baueigenschaft (= _id) selbst
        // NEU - #395: Selektives Löschen nur noch am jeweiligen Baumtyp:
        "/" +
        wertBezogeneBaueigenschaftenLoeschenInBaumTyp;
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      console.log("Vor Emit to leave room 'roomBaustoffe'");
      this.$socket.emit("leaveRoom", {
        room: "roomBaustoffe"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBaustoffe'");
      //=========================================================================================================================================
      // ACHTUNG: Hier zusätzlich Leave für roomBaueigenschaften notwendig, denn es wird ja eine Baueigenschaft gelöscht!
      console.log("Vor Emit to leave room 'roomBaueigenschaften'");
      this.$socket.emit("leaveRoom", {
        room: "roomBaueigenschaften"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBaueigenschaften'");
      //=========================================================================================================================================
      this.$axios
        .delete(
          // NEU:
          apiRoute
          // ALT:
          // "http://localhost:8080/api/baustoffe/deleteMaterialEigenschaftByBaueigenschaftId/" +
          //  this.selectedRowsTableBaueigenschaften[0]
          //   .typbezogeneBaueigenschaftId
          // ACHTUNG: Löschen by id der (typbezogenen) Baueigenschaft, NICHT der id der Baueigenschaft (= _id) selbst
        )
        .then(response => {
          console.log(response);
          this.refreshTreeBaustoffe();
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFT_LOESCHEN_ERFOLG
          );
          this.deleteSelectedBaueigenschaftDialog = false; // NEU
          this.selectedRowsTableBaueigenschaften = [];
        })
        .catch(error => {
          console.log("Fehler beim Löschen von Baueigenschaft");
          console.log(error);
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFT_LOESCHEN_FEHLER
          );
          this.deleteSelectedBaueigenschaftDialog = false; // NEU
        });
    },

    //---------------------------------------------------------------------------------------------------------------------
    // Methoden für die q-table für Baueigenschaften:
    //---------------------------------------------------------------------------------------------------------------------

    // ACHTUNG: Die folgende Funktion wird auch für die q-table für die zugeordneten Bauinformationen benutzt!!!
    getPaginationLabel: function(firstRowIndex, endRowIndex, totalRowsNumber) {
      //--------------------------------------------------------------------------------------------------------------------
      // Funktion, um in QTable das Pagination Label unten rechts in deutsch anzuzeigen.
      // Wird in q-tables für Baueigenschaften UND Bauinformationen verwewndet
      // Sonst würde z.B. "1 - 25 of 500" angezeigt werden,
      // Wird im Templates oben durch :pagination-label="getPaginationLabel" verwendet.
      // ACHTUNG: Sicherheitshalber von data() nach methods verschoben!!!
      //--------------------------------------------------------------------------------------------------------------------
      return firstRowIndex + " - " + endRowIndex + " von " + totalRowsNumber;
    },

    getSelectedStringTableBaueigenschaften: function() {
      //--------------------------------------------------------------------------------------------------------------------
      // Funktion, um in QTable das selected label unten links deutsch anzuzeigen.
      // Sonst würde z.B. "2 records selected" angezeigt werden.
      // Wird im Template oben durch :selected-rows-label="getSelectedString" verwendet.
      // ACHTUNG: Muss unbedingt in "methods" deklariert werden, NICHT oben in data ()!!!
      //--------------------------------------------------------------------------------------------------------------------
      // console.log(
      //  "In getSelectedStringTableBaueigenschaften() - length:", this.selectedRowsTableBauinformationen.length
      //   ); */
      return this.selectedRowsTableBaueigenschaften.length === 0
        ? ""
        : `${this.selectedRowsTableBaueigenschaften.length} Eigenschaft${
            this.selectedRowsTableBaueigenschaften.length > 1 ? "en" : ""
          } ausgewählt von ${
            this.selectedNodeTreeBaustoffe.baueigenschaften.length
          }`;
      // ACHTUNG: Hier dataTableBaueigenschaften.length zu verwenden statt selectedRowsTableBaueigenschaften.length, falls
      // dataTableBaueigenschaften statt selectedRowsTableBaueigenschaften als v-model für die QTable für die Baueigenschaften
      // dienen würde (aktuell nicht der Fall)
    },

    toggleBooleanFieldTableBaueigenschaften(row, booleanColumnField) {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode für das Togglen von Boolean-Werten in der QTable für Baueigenschaften
      // Parameter:
      // - row - (Referenz auf eine) Row aus der QTable
      //         ACHTUNG: Mit dieser wird dann dataTableBaueigenschaften direkt aktualisiert
      // - booleanColumnField - Das zu aktualisierende Boolean Feld in der Row (d.h. dessen "name" in {"name": value})
      // Per row[booleanColumnField] wird dann die Property booleanColumnField im Objekt row geändert
      // (d.h., da Boolean-Wert erwartet wird, einfach getoggled)
      // ACHTUNG: row.booleanColumnField wäre undefined, da booleanColumnField eine Variable ist - JS sucht im Row Objekt nach
      // einer Eigenschaft mit dem Stringnamen "booleanColumnField" => undefined

      // TODO XXXXXX: Spezialisierung der Methode für Aktivierungszustand vs. andere Boolean-Felder
      // Aktuell funktioniert die Methode nur auf dem Boolean-Feld aktiviertNichtDeaktiviert!!!
      // Sie aktiviert bzw. deaktiviert die Baueigenschaft auch in der Datenbank!
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In toggleBooleanFieldTableBaueigenschaften() für Baustoffe");
      console.log("booleanColumnField: ", booleanColumnField);
      console.log(
        "Bisheriger, zu togglender Wert von row[booleanColumnField]: ",
        row[booleanColumnField]
      );
      let idSelectedRow = row._id;
      this.selectedRowsTableBaueigenschaften[0] = row;
      row[booleanColumnField] = !row[booleanColumnField]; // TODO/ACHTUNG: Funktioniert nicht, wenn das Feld undefined ist,
      // was z.B. der Fall sein kann bei obligatorischNichtOptional!
      var apiRoute =
        process.env.API +
        "/Baustoffe/" +
        this.selectedKeyTreeBaustoffe + // id des Baustoffs
        "/Baueigenschaft/toggleAktivierungszustand";
      // this.pruefeAktivierungFuerAusgewaehlteBaueigenschaft()
      // this.selectedRowsTableBaueigenschaften[0].aktiviertNichtDeaktiviert = !this.selectedRowsTableBaueigenschaften[0].aktiviertNichtDeaktiviert
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      console.log("Vor Emit to leave room 'roomBaustoffe'");
      this.$socket.emit("leaveRoom", {
        room: "roomBaustoffe"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBaustoffe'");
      //=========================================================================================================================================
      this.$axios
        .put(/* url */ apiRoute, {
          baueigenschaft: this.selectedRowsTableBaueigenschaften[0],
          // ALT 280720: idBaueigenschaft: this.selectedRowsTableBaueigenschaften[0]._id,
          idBaueigenschaft: this.selectedRowsTableBaueigenschaften[0]
            .typbezogeneBaueigenschaft._id,
          definiertNichtUndefiniert: false // Wird nicht verwendet
        })
        .then(async updateResponse => {
          this.$refs.tableBaueigenschaften.clearSelection();
          await this.refreshTreeBaustoffe(); // Aktualisiere den Baustoffbaum, der ausgewählte Knoten bleibt dabei erhalten,
          // sein Inhalt kann sich geändert haben!

          // NEU: Banner-Benutzernachricht im Footer per global Store und Enums:
          console.log(
            "In updateAusgewaehlteBaueigenschaft() - Update der Baueigenschaft erfolgreich"
          );
          console.log(idSelectedRow);
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFT_AENDERUNG_ERFOLG
          );
          // Sucht in der aktualisierten Tabelle der Baueigenschaften am ausgewählten Baustoff per id nach der gerade aktualisierten Baueigenschaft
          // und aktualisiert die ausgewählte Baueigenschaft auf die Werte der aktualisierten Baueigenschaft am ausgewählten Baustoff im aus der Datenbank
          // neu geladenen Baustoffbaum - dabei ist der Key in der QTable derselbe wie vor dem Update
          this.selectedRowsTableBaueigenschaften.push(
            this.selectedNodeTreeBaustoffe.baueigenschaften.find(
              arg => idSelectedRow === arg._id
            )
          );
          /*
            this.ausgewaehlteBaueigenschaft = this.selectedRowsTableBaueigenschaften[0];
            console.log(
              "Selected Row in Tabelle für Baueigenschaften wurde aktualisiert"
            );
            */
        });
      //
    },

    bearbeiteEigenschaftAusContextMenuTableBaueigenschaften(props) {
      //----------------------------------------------------------------------------------------------------------------------------
      // Test-Methode für das Bearbeiten einer Baueigenschaft per Context Menu in der QTable für Baueigenschaften
      // Parameter:
      // - props - (Referenz auf die) Props aus QTable
      //----------------------------------------------------------------------------------------------------------------------------
      props.selected = true; // Selektiere die betreffende Row programmatisch über das selected Settings in den Props
      this.changeAngezeigtesTabBaueigenschaften("auswahlTabBaueigenschaften"); // Initialisiere ausgewaehlteBaueigenschaft und
      // wechsle zum Tab "Auswahl"
    },

    toggleSpaltenWeitereTypbezogeneAngaben() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in der QTable für Baueigenschaften die Spaltensichtbarkeit für die fachlichen Angaben
      //----------------------------------------------------------------------------------------------------------------------------
      if (this.weitereTypbezogeneAngabenAnzeigen) {
        this.visibleColumnsTableBaueigenschaften.push(
          "baueigenschaftsBemerkung"
        );
        // ALT:
        /*
        this.visibleColumnsTableBaueigenschaften.push(
          "bauinformationsBezeichnung"
        );
        */
        // NEU - statt bauinformationsBezeichnung:
        this.visibleColumnsTableBaueigenschaften.push(
          "bauinformationsAnzeigeText"
        );
        this.visibleColumnsTableBaueigenschaften.push("bauinformationsTyp");
        this.visibleColumnsTableBaueigenschaften.push(
          "baueigenschaftsAnzeigeText"
        ); // NEU: #514
        this.visibleColumnsTableBaueigenschaften.push(
          "systemdefiniertNichtBenutzerdefiniert"
        ); // NEU: #514
        this.visibleColumnsTableBaueigenschaften.push("sollwertNichtIstwert"); // NEU: #514
      } else {
        this.visibleColumnsTableBaueigenschaften = this.visibleColumnsTableBaueigenschaften.filter(
          value =>
            value !== "baueigenschaftsBemerkung" &&
            // value !== "bauinformationsBezeichnung" && // ALT
            value !== "bauinformationsAnzeigeText" && // NEU
            value !== "bauinformationsTyp" &&
            value !== "baueigenschaftsAnzeigeText" && // NEU: #514
            value !== "systemdefiniertNichtBenutzerdefiniert" && // NEU: #514
            value !== "sollwertNichtIstwert" // NEU: #514
          // TODO: && value !== "bauinformation"
        );
      }
    },

    toggleSpaltenKennwertbezogeneAngaben() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Baueigenschaften die Spaltensichtbarkeit für die kennwertbezogenen Angaben
      //-------------------------------------------------------------------------------------------------------------------------------
      if (this.kennwertbezogeneAngabenAnzeigen) {
        this.visibleColumnsTableBaueigenschaften.push("einheit");
        this.visibleColumnsTableBaueigenschaften.push("symbol");
        this.visibleColumnsTableBaueigenschaften.push("operator");
        this.visibleColumnsTableBaueigenschaften.push("formel"); // NEU
      } else {
        this.visibleColumnsTableBaueigenschaften = this.visibleColumnsTableBaueigenschaften.filter(
          value =>
            value !== "einheit" &&
            value !== "symbol" &&
            value !== "operator" &&
            value !== "formel" // NEU: "formel"
        );
      }
    },

    toggleSpaltenWertbezogeneMerkmale() {
      //--------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Baueigenschaften die Spaltensichtbarkeit für die wertbezogenen Merkmale
      //--------------------------------------------------------------------------------------------------------------------------
      if (this.wertbezogeneMerkmaleAnzeigen) {
        for (let i = 0; i < this.wertbezogeneMerkmaleArray.length; i++) {
          this.visibleColumnsTableBaueigenschaften.push(
            this.wertbezogeneMerkmaleArray[i]
          );
        }
      } else {
        this.visibleColumnsTableBaueigenschaften = this.visibleColumnsTableBaueigenschaften.filter(
          value => !this.wertbezogeneMerkmaleArray.includes(value)
        );
      }
    },

    toggleSpaltenSchutzKategorien() {
      //----------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Baueigenschaften die Spaltensichtbarkeit für die Schutzkategorien
      //----------------------------------------------------------------------------------------------------------------------
      //this.schutzKategorienAnzeigen = !this.schutzKategorienAnzeigen;
      if (this.schutzKategorienAnzeigen) {
        for (let i = 0; i < this.schutzKategorienArray.length; i++) {
          this.visibleColumnsTableBaueigenschaften.push(
            this.schutzKategorienArray[i]
          );
        }
      } else {
        this.visibleColumnsTableBaueigenschaften = this.visibleColumnsTableBaueigenschaften.filter(
          value => !this.schutzKategorienArray.includes(value)
        );
      }
    },

    toggleSpaltenWertbezogeneAngaben() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Baueigenschaften die Spaltensichtbarkeit für die wertbezogenen Angaben
      //----------------------------------------------------------------------------------------------------------------------------
      if (this.wertbezogeneAngabenAnzeigen) {
        for (let i = 0; i < this.wertbezogeneAngabenArray.length; i++) {
          this.visibleColumnsTableBaueigenschaften.push(
            this.wertbezogeneAngabenArray[i]
          );
        }
      } else {
        this.visibleColumnsTableBaueigenschaften = this.visibleColumnsTableBaueigenschaften.filter(
          value => !this.wertbezogeneAngabenArray.includes(value)
        );
      }
    },

    toggleSpaltenAktivierungsMerkmale() {
      //--------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Baueigenschaften die Spaltensichtbarkeit für die Aktivierungsmerkmale
      //--------------------------------------------------------------------------------------------------------------------------
      if (this.aktivierungsMerkmaleAnzeigen) {
        for (let i = 0; i < this.aktivierungsMerkmaleArray.length; i++) {
          this.visibleColumnsTableBaueigenschaften.push(
            this.aktivierungsMerkmaleArray[i]
          );
        }
      } else {
        this.visibleColumnsTableBaueigenschaften = this.visibleColumnsTableBaueigenschaften.filter(
          value => !this.aktivierungsMerkmaleArray.includes(value)
        );
      }
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Methoden für die q-table für die zugeordneten Bauinformationen:
    //------------------------------------------------------------------------------------------------------------------------------
    //---------------------------------------------------------------------------------------------------------------------
    // Gemeinsamer Toggle Button für alle Q-Table Spalten in der QTable für die Bauinformationen
    // ACHTUNG: Die einzelnen Toggles für die visible Columns fügen auch jeweils "ihren" Array-Wert HINTEN an den Array an!
    // Oder sie löschen "ihre" Werte aus dem Array an beliebiger Position
    // Dadurch kann sich die Länge des Arrays und die Position eines Wertes im Array über die Zeit verändern!
    toggleAllColumns() {
      console.log("In toggleAllColumns()");
      if (this.toggleAllColumnsState) {
        // "Viele Spalten"
        this.visibleColumnsTableBauinformationen.length = 0;
        this.visibleColumnsTableBauinformationen.push(
          // Array initialisieren mit allen Kategorien außer den 10 Normkategorien:
          // Hinweis: Würde hier eigentlich auch nicht-reaktiv durch normale Zuweisung statt push funktionieren (getestet)
          "bauinformationsBezeichnung",
          "bauinformationsTyp",
          "benutzerKennungenAutoren", // NEU
          "bauinformationsAnzeigeText", // NEU
          "bauinformationsBemerkung",
          "herausgeberGeografie",
          "herausgeberInstitution",
          "herausgeberBezeichnung",
          "herausgeberBundeslandDeutschland",
          "herausgeberBundeslandÖsterreich",
          "herausgeberKantonSchweiz",
          "gültigkeitsDatumVon",
          "gültigkeitsDatumBis",
          "normTypDIN",
          "normTypÖNORM",
          "normTypSN",
          "normTypEN",
          "normTypISO",
          "internerLink",
          "externerLink",
          "oneDriveLink" // NEU
          /*
          "grundNorm",
          "terminologieNorm",
          "prüfNorm",
          "produktNorm",
          "verfahrensNorm",
          "dienstleistungsNorm",
          "schnittstellenNorm",
          "deklarationsNorm",
          "fachbereichsNorm",
          "werkNorm"
          */
        );
        console.log(
          "In toggleAllColumns mit Toggle auf EIN - visibleColumnsTableBauinformationen:",
          this.visibleColumnsTableBauinformationen
        );

        // ACHTUNG: toggleAllColumnsState darf nicht invertiert werden - wird von q-toggle v-model automatisch gemacht!!!
        // this.toggleAllColumnsState = !this.toggleAllColumnsState;
        // Nur wenn :value statt v-model verwendet wird am q-toggle, muss der State in der @input-Methode invertiert werden!!!
        // Kan getestet werden in https://codepen.io/mickey58/pen/NWxdqKO?editors=1011

        // NEU: Auch die neuen Gruppen-Toggles alle einschalten - sonst sind diese Toggles eventuell inkonsistent:
        this.regionenAnzeigen = true;
        // console.log("regionenAnzeigen: ", this.regionenAnzeigen);
        // this.$refs.toggleRegionenAnzeigen.toggle(); // Überflüssig
        this.gueltigkeitAnzeigen = true;
        // this.$refs.toggleGueltigkeitAnzeigen.toggle(); // Überflüssig
        this.normTypenAnzeigen = true;
        // this.$refs.normTypenAnzeigen.toggle(); // Überflüssig
        this.linksAnzeigen = true;
        // this.$refs.linksAnzeigen.toggle(); // Überflüssig

        // NEU: Den Toggle für die Normkategorien ausschalten - sonst ist dieser Toggle eventuell inkonsistent:
        this.toggleAllNormkategorienState = false;
      } else {
        // "Wenige Spalten"
        // Array leeren außer den 4 ersten Spalten
        // Hinweis: Würde hier eigentlich auch nicht-reaktiv durch normale Zuweisung statt push funktionieren (getestet)
        this.visibleColumnsTableBauinformationen.length = 0;
        this.visibleColumnsTableBauinformationen.push(
          "bauinformationsBezeichnung",
          "benutzerKennungenAutoren",
          "bauinformationsTyp",
          "bauinformationsBemerkung", // NEU: Weggelassen
          "bauinformationsAnzeigeText" // NEU: Dazugenommen
        );

        console.log(
          "In toggleAllColumns mit Toggle auf AUS - visibleColumnsTableBauinformationen:",
          this.visibleColumnsTableBauinformationen
        );

        // ACHTUNG: toggleAllColumnsState darf nicht invertiert werden - wird von q-toggle v-model automatisch gemacht!!!
        // this.toggleAllColumnsState = !this.toggleAllColumnsState;
        // Nur wenn :value statt v-model verwendet wird am q-toggle, muss der State in der @input-Methode invertiert werden!!!
        // Kann getestet werden in https://codepen.io/mickey58/pen/NWxdqKO?editors=1011

        // NEU: Auch die neuen Gruppen-Toggles alle ausschalten - sonst sind diese Toggles eventuell inkonsistent:
        this.regionenAnzeigen = false;
        // this.$refs.toggleRegionenAnzeigen.toggle(); // Überflüssig
        this.gueltigkeitAnzeigen = false;
        // this.$refs.toggleGueltigkeitAnzeigen.toggle(); // Überflüssig
        this.normTypenAnzeigen = false;
        // this.$refs.toggleNormTypenAnzeigen.toggle(); // Überflüssig
        this.linksAnzeigen = false;
        // this.$refs.toggleLinksAnzeigen.toggle(); // Überflüssig

        // NEU: Auch den Toggle für die Normkategorien ausschalten -  sonst ist dieser Toggle eventuell inkonsistent:
        this.toggleAllNormkategorienState = false;
      } // else

      console.log(
        "Am Ende von toggleAllColumns - toggleAllColumnsState neu: ",
        this.toggleAllColumnsState
      );
      // ALT:
      // this.$refs.toggleAllColumns.toggle(); // Führt zu infinite Loop!!!
      // await this.$nextTick(); // nur mit async function oben!
      // console.log("After next tick");
    },

    //---------------------------------------------------------------------------------------------------------------------
    // Gemeinsamer Toggle Button für alle Q-Table Spalten, die Normkategorien emthalten
    // ACHTUNG: Die einzelnen Toggles für die visible Columns fügen auch jeweils "ihren" Array-Wert HINTEN an den Array an!
    // Oder sie löschen "ihre" Werte aus dem Array an beliebiger Position
    // Dadurch kann sich die Länge des Arrays und die Position eines Wertes im Array über die Zeit verändern!
    // Deshalb mussten die früher vorhandenen Einzel-Toggles für die Normkategorien entfernt werden, da inkompatibel mit der folgenden Methode
    toggleAllNormkategorien() {
      // "Alle Normkategorien"
      // if (this.btnClickCounter % 2 === 1) {
      if (this.toggleAllNormkategorienState) {
        this.visibleColumnsTableBauinformationen.push(
          // Adds 10 Normkategorien at end of array (first parameter)
          /*
          "bauinformationsBezeichnung",
          "bauinformationsTyp",
          "benutzerKennungenAutoren", // NEU
          "bauinformationsAnzeigeText", // NEU
          "bauinformationsBemerkung",
          "herausgeberGeografie",
          "herausgeberInstitution",
          "herausgeberBezeichnung",
          "herausgeberBundeslandDeutschland",
          "herausgeberBundeslandÖsterreich",
          "herausgeberKantonSchweiz",
          "gültigkeitsDatumVon",
          "gültigkeitsDatumBis",
          "normTypDIN",
          "normTypÖNORM",
          "normTypSN",
          "normTypEN",
          "normTypISO",
          "internerLink",
          "externerLink",
          "oneDriveLink", // NEU
          */
          "grundNorm",
          "terminologieNorm",
          "prüfNorm",
          "produktNorm",
          "verfahrensNorm",
          "dienstleistungsNorm",
          "schnittstellenNorm",
          "deklarationsNorm",
          "fachbereichsNorm",
          "werkNorm"
        );
        console.log(
          "In toggleAllNormkategorien mit Toggle auf EIN - visibleColumnsTableBauinformationen:",
          this.visibleColumnsTableBauinformationen
        );
      } else {
        // "Keine Normkategorien"
        // if (this.btnClickCounter % 2 === 0) {
        // if (this.toggleAllNormkategorienState) {
        // Achtung: Da sich durch Togglen von anderen Toggles die Position von Normkategorien im Array visibleColunmnsBauinformationen ändern kann,
        // kann man nicht einfach hinten am Array mit der Splice-Funktion die 10 dort anfangs eingefügten Normkategorien abschneiden!!!
        // D.h. das Folgende funktioniert nicht so einfach, sondern schneidet evtl. andere getogglete Werte einfach mit ab:
        // this.visibleColumnsTableBauinformationen.splice(this.visibleColumnsTableBauinformationen.length - 10, 10);
        // Stattdessen müssen explizit die Normkategorien im Array herausgefiltert werden.
        // ACHTUNG: .filter liefert einen neuen Array zurück, funktioniert nicht direkt auf dem bisherigen Array!
        this.visibleColumnsTableBauinformationen = this.visibleColumnsTableBauinformationen.filter(
          value =>
            value !== "grundNorm" &&
            value !== "terminologieNorm" &&
            value !== "prüfNorm" &&
            value !== "produktNorm" &&
            value !== "verfahrensNorm" &&
            value !== "dienstleistungsNorm" &&
            value !== "schnittstellenNorm" &&
            value !== "deklarationsNorm" &&
            value !== "fachbereichsNorm" &&
            value !== "werkNorm"
        );

        console.log(
          "In toggleAllNormkategorien mit Toggle auf AUS - visibleColumnsTableBauinformationen:",
          this.visibleColumnsTableBauinformationen
        );
      }
      // this.btnClickCounter += 1; // ALT
      // ACHTUNG: toggleAllNormkategorienState darf nicht invertiert werden - wird von q-toggle v-model automatisch gemacht!!!
      // this.toggleAllNormkategorienState = !this.toggleAllNormkategorienState;
      console.log(
        "Am Ende von toggleAllNormKategorien - toggleAllNormkategorienState neu: ",
        this.toggleAllNormkategorienState
      );

      // this.$refs.toggleAllNormkategorien.toggle(); // Führt zu infinite Loop!!!
      // await this.$nextTick(); // nur mit async function oben!
      // console.log("After next tick");
    },
    /* eslint-disable no-console */

    //----------------------------------------------------------------------------------------------------------------------------
    // NEU: Funktionen für "Gruppen-Toggles", die jeweils die Sichtbarkeit mehrerer Spalten in der QTable togglen:

    toggleSpaltenRegionen() {
      //--------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Bauinformationen die Spaltensichtbarkeit für die Normtypen
      //--------------------------------------------------------------------------------------------------------------------------
      // console.log("In toggleSpaltenRegionen() - regionenAnzeigen: ", this.regionenAnzeigen);
      if (this.regionenAnzeigen) {
        for (let i = 0; i < this.regionenArray.length; i++) {
          this.visibleColumnsTableBauinformationen.push(this.regionenArray[i]);
        }
      } else {
        this.visibleColumnsTableBauinformationen = this.visibleColumnsTableBauinformationen.filter(
          value => !this.regionenArray.includes(value)
        );
      }
    },

    toggleSpaltenGueltigkeit() {
      //--------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Bauinformationen die Spaltensichtbarkeit für die Gültigkeit
      //--------------------------------------------------------------------------------------------------------------------------
      if (this.gueltigkeitAnzeigen) {
        for (let i = 0; i < this.gueltigkeitArray.length; i++) {
          this.visibleColumnsTableBauinformationen.push(
            this.gueltigkeitArray[i]
          );
        }
      } else {
        this.visibleColumnsTableBauinformationen = this.visibleColumnsTableBauinformationen.filter(
          value => !this.gueltigkeitArray.includes(value)
        );
      }
    },

    toggleSpaltenNormTypen() {
      //--------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Bauinformationen die Spaltensichtbarkeit für die Normtypen
      //--------------------------------------------------------------------------------------------------------------------------
      if (this.normTypenAnzeigen) {
        for (let i = 0; i < this.normTypenArray.length; i++) {
          this.visibleColumnsTableBauinformationen.push(this.normTypenArray[i]);
        }
      } else {
        this.visibleColumnsTableBauinformationen = this.visibleColumnsTableBauinformationen.filter(
          value => !this.normTypenArray.includes(value)
        );
      }
    },

    toggleSpaltenLinks() {
      //--------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Bauinformationen die Spaltensichtbarkeit für die Links
      //--------------------------------------------------------------------------------------------------------------------------
      if (this.linksAnzeigen) {
        for (let i = 0; i < this.linksArray.length; i++) {
          this.visibleColumnsTableBauinformationen.push(this.linksArray[i]);
        }
      } else {
        this.visibleColumnsTableBauinformationen = this.visibleColumnsTableBauinformationen.filter(
          value => !this.linksArray.includes(value)
        );
      }
    },

    getSelectedStringTableBauinformationen: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Funktion, um in QTable das selected Label unten links auf Deutsch anzuzeigen.
      // Sonst würde z.B. "2 records selected" angezeigt werden.
      // Wird im Template oben durch :selected-rows-label="getSelectedStringTableBauinformationen" verwendet.
      // ACHTUNG: Muss unbedingt in "methods" deklariert werden, NICHT oben in data ()!!!
      //-------------------------------------------------------------------------------------------------------------------------------
      /* console.log(
        "In getSelectedStringTableBauinformationen() - length:",
        this.selectedRowsTableBauinformationen.length
      ); */
      return this.selectedRowsTableBauinformationen.length === 0
        ? ""
        : `${this.selectedRowsTableBauinformationen.length} Bauinformation${
            this.selectedRowsTableBauinformationen.length > 1 ? "en" : ""
          } ausgewählt von ${this.dataTableBauinformationen.length}`;
    },

    getSelectedBauinformation: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Funktion zur Berechnung der ausgewählten Bauinformation
      //-------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) return undefined; // ALT: {}
      // ACHTUNG: {} ist nicht dasselbe wie undefined, nur bei undefined wird per v-if das Tab ausgeblendet!!!
      return this.selectedRowsTableBauinformationen[0]; // Alle Felder im 1. Eintrag in den selektierten Rows
    },

    //--------------------------------------------------------------------------------------------------------------
    checkAusgewaehlteBauinformationAusQTableAufInternenLink() {
      // NEU: Für Button "Internen Link öffnen" im Tab "Übersicht":
      // Zuerst Aufruf dieser Methode, die prüft, ob überhaupt eine Bauinformation ausgewählt ist. Wenn keine ausgewählt ist,
      // triggered die Methode per v-model zunächst den anderen q-dialog, der einen Hinweis ausgibt, dass eine Bauinformation auszuwählen ist
      // und returned.
      // Ansonsten prüft sie, ob die (erste) ausgewählte Bauinformation einen validen internen Link hat und returned in diesem Fall.
      // Sonst stösst sie per v-model einen weiteren q-dialog mit Hinweis an, dass eine Bauinformation mit internem Link auszuwählen ist.
      // NEU: Andernfalls stösst sie die weitere Funktion openSelectedInternerLinkTableBauinformationen(); an, die das verlinkte File am Backend herunterlädt
      // aus MongoDB und diese im Browser öffnet
      // HINWEIS: Die Funktion "getSelectedInternerLinkTableBauinformationen" muss zur korrekten Gesamtfunktion returnen ohne Ergebnis, falls
      // selectedRowsTableBauinformationen[0].internerLink === undefined ist!

      if (this.selectedRowsTableBauinformationen.length === 0) {
        this.confirmHinweisAuswaehlenBauinformationAusQTable = true; // Hinweis, dass Bauinformation auszuwählen ist
        // return;
      } else {
        // Testen, ob interner Link vorhanden
        if (
          this.selectedRowsTableBauinformationen[0].internerLink === undefined
        ) {
          this.confirmHinweisAuswaehlenBauinformationAusQTableMitInternemLink = true; // Hinweis, dass Bauinformation mit internem Link auszuwählen ist
        } else {
          this.openSelectedInternerLinkTableBauinformationen(); // NEU: Lädt File am Backend herunter aus MongoDB per API von dateien.controller.js
          // und öffnet diese im Browser
        }
      }
    },

    //-------------------------------------------------------------------------------------------------------------------------------------------------------
    // NEU: Methode zum Öffnen eines internen Links (in einem neuen Browser Tab) in der ausgewählten Bauinformation in der Tabelle "Zugeordnete Bauinformationen"
    // Für lokales und Heroku Cloud Deployment enabled
    openSelectedInternerLinkTableBauinformationen: function() {
      if (this.selectedRowsTableBauinformationen.length === 0) {
        return;
      }
      if (
        this.selectedRowsTableBauinformationen[0].internerLink === undefined
      ) {
        return;
      }
      console.log(
        "In openSelectedInternerLinkTableBauinformationen() - selectedRowsTableBauinformationen[0].internerLink: ",
        this.selectedRowsTableBauinformationen[0].internerLink
      );
      // NEU: id der gespeicherten Datei steht in this.selectedRowsTableBauinformationen[0].idInternerLink
      // BIM.click Backend File Server API rufen, um mit dieser id die Datei aus der Datenbank zu lesen und am Backend File Server in tmp/download-Folder zur Verfügung zu stellen

      const apiRoute =
        process.env.fileAPI +
        "/Dateien/download/" +
        this.selectedRowsTableBauinformationen[0].idInternerLink; // id der zugehörigen hochgeladenen Datei in DateienCollection in Mongoose
      //
      this.$axios
        .get(apiRoute)
        .then(response => {
          console.log(
            "In openSelectedInternerLinkTableBauinformationen() nach HTTP Get Request für Download Datei - response.data: ",
            response.data
          );
          // ACHTUNG - TODO: Die folgende Abfrage auf [] ist per Tests immer false, also so nicht sinnvoll! Abfrage auf null oder {} ist ebenfalls false!!!
          if (
            response.data.dateiName === undefined ||
            response.data.dateiName === null ||
            response.data.dateiName === ""
          ) {
            console.log(
              "WARNUNG: Keine Datei gefunden - die herunterzuladende Datei kann z.B. inzwischen gelöscht worden sein"
            );
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.DATEI_NICHT_OEFFENBAR
            );
            return;
          }
          //-----------------------------------------------------------------------------------------------------------
          // URL zum Öffnen der Datei, jeweils für lokales Deployment und für Heroku Deployment, bestimmen:
          var downloadDir = null;
          var downloadURL = null;
          // TODO: XXXXXX - Die downloadURL für lokal und Production ist aktuell identisch, funktioniert auch in beiden Umgebungen, kann also zusammengeführt werden!!!
          if (process.env.NODE_ENV !== "production") {
            // Greift auch, wenn undefined!!!
            // Bei lokalem Deployment auf localhost:
            // ALT (für Testzwecke)
            // downloadDir = "statics/pdfs"; //
            // downloadURL =
            //   process.env.ownURL + "/" + downloadDir + "/" + response.data.dateiName; // HINWEIS: Dateiname könnte alternativ aus
            // selectedRowsTableBauinformationen[0].internerLink extrahiert werden
            // NEU (auch lokal Download aus Datenbank nach localhost:4444/tmp/download, welches statisch von Express geserved wird)
            downloadDir = "tmp/download";
            downloadURL =
              process.env.fileAPI +
              // "/" +
              // downloadDir +
              "/" +
              response.data.dateiName; // HINWEIS: Dateiname könnte alternativ aus
            // selectedRowsTableBauinformationen[0].internerLink extrahiert werden
          } else {
            // Bei Cloud Deployment auf Heroku:
            // downloadDir = "app/tmp/download"; // Wird nicht gebraucht bei Zugriff über express.static in file-server.js
            // gemäß https://stackoverflow.com/questions/35744597/how-to-link-pages-in-node
            // Die URLS zum Zugriff sind direkt: bimclickfiles.herokuapp.com/filename.ext
            downloadURL =
              // "https://" + // ACHTUNG: https:// ist entgegen ersten Annahmen hier doch nicht notwendig gegen Status 404/"cannot GET..." Errors
              // Im Gegenteil: Mit "https://" kommt in Tests sogar zweimal https://https://bimclickfiles als URL im Browser, was
              // zu "This website is unavailable..." Errors führt!!!
              process.env.fileAPI +
              // "/" +
              // downloadDir +
              "/" +
              response.data.dateiName; // HINWEIS: Dateiname könnte alternativ aus
            // selectedRowsTableBauinformationen[0].internerLink extrahiert werden
          }
          console.log("downloadDir: ", downloadDir);
          console.log("downloadURL: ", downloadURL);

          window.open(downloadURL, "_blank"); // Die URL in neuem Tab öffnen - siehe https://www.tutorialsplane.com/vue-js-open-link-in-new-tab/
        })
        .catch(error => {
          console.log("Fehler beim Get für Download Datei");
          console.log(error);
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.DATEI_NICHT_OEFFENBAR
          );
        });
    },

    //-------------------------------------------------------------------------------------------------------------------------------------
    oeffneExternenLinkAusgewaehlteBauinformationAusQTable() {
      // NEU: Funktion zum Öffnen des externen Links in neuem Browser Tab - wird verwendet bei Öffnen aus Kontextmenü in der QTable für die Bauinformationen
      // Siehe https://stackoverflow.com/questions/4907843/open-a-url-in-a-new-tab-and-not-a-new-window
      let win = window.open(
        this.selectedRowsTableBauinformationen[0].externerLink,
        "_blank"
      );
      win.focus();
    },

    //-------------------------------------------------------------------------------------------------------------------------------------
    oeffneOneDriveLinkAusgewaehlteBauinformationAusQTable() {
      // NEU: Funktion zum Öffnen des OneDrive-Links in neuem Browser Tab - wird verwendet bei Öffnen aus Kontextmenü in der QTable für die Bauinformationen
      // Siehe https://stackoverflow.com/questions/4907843/open-a-url-in-a-new-tab-and-not-a-new-window
      let win = window.open(
        this.selectedRowsTableBauinformationen[0].oneDriveLink,
        "_blank"
      );
      win.focus();
    },

    checkAusgewaehlteBauinformationAusQTableAufExternenLink() {
      //------------------------------------------------------------------------------------------------------------------------------------
      // NEU für Button "Externen Link öffnen":
      // Zuerst Aufruf dieser Methode, die prüft, ob überhaupt eine Bauinformation ausgewählt ist. Wenn keine ausgewählt ist,
      // triggered die Methode per v-model zunächst den anderen q-dialog, der einen Hinweis ausgibt, dass eine Bauinformation auszuwählen
      // ist und returned.
      // Ansonsten prüft sie, ob die (erste) ausgewählte Bauinformation einen validen externen Link hat und returned in diesem Fall.
      // Sonst stösst sie per v-model einen weiteren q-dialog mit Hinweis an, dass eine Bauinformation mit externem Link auszuwählen ist.
      // Sonst returned sie, wodurch dann der Button "Externen Link öffnen" das PDF anzeigt.
      // HINWEIS: Die Funktion "getSelectedExternerLinkTableBauinformationen" muss zur korrekten Gesamtfunktion returnen ohne Ergebnis,
      // falls selectedRowsTableBauinformationen[0].externerLink === undefined ist!
      //------------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        this.confirmHinweisAuswaehlenBauinformationAusQTable = true; // Hinweis, dass Bauinformation auszuwählen ist
        // return;
      } else {
        // Testen, ob externer Link vorhanden
        if (
          this.selectedRowsTableBauinformationen[0].externerLink === undefined
        ) {
          this.confirmHinweisAuswaehlenBauinformationAusQTableMitExternemLink = true; // Hinweis, dass Bauinformation mit externem Link auszuwählen ist
        }
      }
    },

    checkAusgewaehlteBauinformationAusQTableAufOneDriveLink() {
      //------------------------------------------------------------------------------------------------------------------------------------
      // NEU für Button "OneDrive-Link öffnen":
      // Zuerst Aufruf dieser Methode, die prüft, ob überhaupt eine Bauinformation ausgewählt ist. Wenn keine ausgewählt ist,
      // triggered die Methode per v-model zunächst den anderen q-dialog, der einen Hinweis ausgibt, dass eine Bauinformation auszuwählen
      // ist und returned.
      // Ansonsten prüft sie, ob die (erste) ausgewählte Bauinformation einen validen OneDrive-Link hat und returned in diesem Fall.
      // Sonst stösst sie per v-model einen weiteren q-dialog mit Hinweis an, dass eine Bauinformation mit OneDrive-Link auszuwählen ist.
      // Sonst returned sie, wodurch dann der Button "OneDrive-Link öffnen" z.B. das PDF anzeigt.
      // HINWEIS: Die Funktion "getSelectedOneDriveLinkTableBauinformationen" muss zur korrekten Gesamtfunktion returnen ohne Ergebnis,
      // falls selectedRowsTableBauinformationen[0].oneDriveLink == null ist!
      //------------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        this.confirmHinweisAuswaehlenBauinformationAusQTable = true; // Hinweis, dass Bauinformation auszuwählen ist
        // return;
      } else {
        // Testen, ob OneDrive-Link vorhanden
        if (this.selectedRowsTableBauinformationen[0].oneDriveLink == null) {
          this.confirmHinweisAuswaehlenBauinformationAusQTableMitOneDriveLink = true; // Hinweis, dass Bauinformation mit OneDrive-Link auszuwählen ist
        }
      }
    },

    initialisiereAusgewaehltesTabFachlicheDatenBaustoffe() {
      //------------------------------------------------------------------------------------------------------------------------------------
      // Methode zur Initialisierung der Unter-Tabs für die fachlichen Daten des ausgewählten Baustoffs
      console.log("In initialisiereAusgewaehltesTabFachlicheDatenBaustoffe()");
      switch (this.tabFachlicheDatenBaustoffe) {
        case "tabGenerelleAngabenTabFachlicheDatenBaustoffe": {
          this.unterTabFachlicheDatenBaustoffe =
            "unterTabGenerelleAngabenFachlicheDatenBaustoffe";
          break;
        }
        case "tabEstrichSchichtbaustoffFachlicheDatenBaustoffe": {
          this.unterTabFachlicheDatenBaustoffe =
            "unterTabEstrichSchichtbaustoffFachlicheDatenBaustoffe";
          break;
        }
        case "tabTestFachlicheDatenBaustoffe": {
          this.unterTabFachlicheDatenBaustoffe =
            "unterTabTestFachlicheDatenBaustoffe";
          break;
        }
        default: {
          // Vorläufig:
          this.unterTabFachlicheDatenBaustoffe =
            "unterTabGenerelleAngabenFachlicheDatenBaustoffe";
        }
      }
    },

    initialisiereAusgewaehltesTabBaustoffe() {
      //------------------------------------------------------------------------------------------------------------------------------------
      // Methode zur Initialisierung der Tabs für den ausgewählten Baustoff (Strukturierungsangaben/Beschreibung/Baueigenschaften/Zugeordnete
      // Rohstoffe/Zugeordnete Bauinformationen/Sonstiges)
      // Für das Tab "Zugeordnete Bauinformationen":
      //   Initialisiert selectModelBauinformationenAusgewaehlterBaustoff für das q-select zum Auswählen/Abwählen mit den zugeordneten Bauinformationen
      //   des ausgewählten Baustoffs
      // NEU: Für das Tab "Zugeordnete Rohstoffe":
      //   Lädt den Rohstoffbaum in dem entsprechenden Tab Panel
      //   TODO: XXXXXX - Wird doppelt ausgeführt, da auch in watch für selectedKeyTreeBaustoffe?
      //-------------------------------------------------------------------------------------------------------------------------------------
      console.log("In initialisiereAusgewaehltesTabBaustoffe()");
      if (this.tabBaustoffe === "zugeordneteBauinformationenTabBaustoffe") {
        // Model für q-select laden mit den bereits für den Baustoff selektierten = aktuell in der q-table angezeigten zugeordneten Bauinformationen
        // this.selectModelBauinformationenAusgewaehlterBaustoff.push(
        //   this.selectedNodeTreeBaustoffe.zugeordneteBauinformationen
        // );
        this.selectModelBauinformationenAusgewaehlterBaustoff = this.selectedNodeTreeBaustoffe.zugeordneteBauinformationen;
        // TODO: Hier würde es auch genügen, dass nur die Felder _id, bauinformationsBezeichung, bauinformationsAnzeigeText, bauinformationsTyp extrahiert werden
        // Es ist aber hier nicht so dramatisch wie beim den selectOptions, wo alle Bauinformationen aus der Datenbank angezeigt werden müssen,
        // da für eine bestimmte Baueigenschaft immer nur einige wenige Bauinformationen selektiert sein werden! Daher bisher nur beim
        // Initialisieren der selectOptions per neuem API Call den Extrakt obiger 3 Felder geladen!

        // ACHTUNG: Muss Array sein bei Selection "multiple"
        // selectedNodeTreeBaustoffe ist computed!
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectModelBauinformationenAusgewaehlterBaustoff hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        console.log(
          "selectModelBauinformationenAusgewaehlterBaustoff: ",
          this.selectModelBauinformationenAusgewaehlterBaustoff
        );
        this.initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenAusgewaehlterBaustoff();
      }
      if (this.tabBaustoffe === "beschreibungTabBaustoffe") {
        // NEU - Event abfeuern zum Anzeigen des richtigen Bedienungshilfethemas:
        this.showBedienungsHilfe("bedienungsHilfeBeschreibungBaustoffe"); // Aufruf mit String-Parameter ref des betreffenden q-expansion-items
      }
      if (this.tabBaustoffe === "zugeordneteRohstoffeTabBaustoffe") {
        if (!this.selectedKeyTreeBaustoffeIstImRohstoffUnterbaum) {
          // ALT: Die Funktion loadTreeRohstoffe() wurde doppelt ausgeführt, da sie nicht nur hier in initialisiereAusgewaehltesTabBaustoffe,
          // sondern auch im watch für selectedNodeTreeBaustoffe gerufen wurde!
          // Der Aufruf im watch ist notwendig, da sie bei Änderung des ausgewählten
          // Baustoffsjeweils neu aufgerufen werden muss! Falls das Tab "Zugeordnete Rohstoffe" allerdings noch nie
          // ausgewählt wurde, kann loadTreeRohstoffe() in diesem Fall den Rohstoffbaum mit den ticked Nodes nicht laden.
          // Deshalb war der Aufruf hier aus initialisiereAusgewaehltesTabBaustoffe() ebenfalls notwendig, da
          // das Tab auch erst nach der Auswahl eines Knotens im Baum angewählt werden kann.
          // NEU: Dies wurde optimiert, indem die Funktion aufgeteilt wurde in 2 Funktionen, Teil 2 ist jetzt showTreeRohstoffe()
          //      und wird hier aufgerufen statt loadTreeRohstoffe()
          // Siehe Kommentare in loadTreeRohstoffe()
          //------------------------------------------------------------------------------------------------
          // NEU: Spinner Gears zeigen, da die Funktion lange dauern kann!!! Disabled, da showTreeRohstoffe() schneller ist als loadTreeRohstoffe()
          /*
        Loading.show({
        spinner: QSpinnerGears,
        // delay: 200 // ms, Default ist 500 ms, bevor Loading den Spinner zeigt
        // other props
        });
        */
          this.showTreeRohstoffe(); // NEU: Anzeigen des Unterbaums für die Auswahl der Baustoffe, statt loadTreeRohstoffe()
          // Loading.hide(); // Spinner entfernen
          // Test Code: Den Spinner nach 1,5 s wieder hiden per Timer:
          /*
        let timer = setTimeout(() => {
          Loading.hide()
          timer = void 0
        }, 1500)
        */
          //------------------------------------------------------------------------------------------------
        }
        // TODO: Event abfeuern zum Anzeigen des richtigen Bedienungshilfethemas:
        // this.showBedienungsHilfe("bedienungsHilfeZugeordneteRohstoffeBaustoffe"); // Aufruf mit String-Parameter ref des betreffenden q-expansion-items
      }
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Funktionen für das q-select zum Auswählen/Abwählen der zugeordneten Bauinformation unter q-table für zugeordnete Bauinformationen
    // für ausgewählten Baustoff im Tab "Zugeordnete Bauinformationen":
    //----------------------------------------------------------------------------------------------------------------------------------
    initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenAusgewaehlterBaustoff() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Lädt alle Bauinformationen aus der Datenbank und initialisiert damit die Options und Filter Options für das q-select für
      // zum Auswählen/Abwählen von zugeordneten Bauinformationen im Tab "Zugeordnete Bauinformationen"
      // TODO: Eigentlich werden für die QSelect Options nur die Felder bauinformationsBemerkung und bauinformationsTyp benötigt
      //---------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenAusgewaehlterBaustoff()"
      );
      // ALT:
      // var url = "http://localhost:8080/api/bauinformationen/readBauinformationen";
      // NEU: Benutze neues API, das nur ID, Bezeichnung, Typ holt, um das Datenvolumen im Speicher zu reduzieren:
      // ALT:
      // const url = "http://localhost:8080/Bauinformationen/Extrakt";
      // NEU:
      const apiRoute = process.env.API + "/Bauinformationen/Extrakt";
      this.$axios.get(apiRoute /* ALT: url */).then(response => {
        // console.log("response.data: ");
        // console.log(response.data);
        this.selectOptionsBauinformationenAusgewaehlterBaustoff = response.data; // RICHTIG - Array an Array
        // FALSCH: this.selectOptionsBauinformationenAusgewaehlterBaustoff.push(response.data);
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectOptionsBauinformationenAusgewaehlterBaustoff hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        console.log(
          "selectOptionsBauinformationenAusgewaehlterBaustoff: ",
          this.selectOptionsBauinformationenAusgewaehlterBaustoff
        );
        this.selectFilterOptionsBauinformationenAusgewaehlterBaustoff =
          response.data; // RICHTIG
        // FALSCH: this.selectFilterOptionsBauinformationenAusgewaehlterBaustoff.push(response.data);
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectFilterOptionsBauinformationenAusgewaehlterBaustoff hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        console.log(
          "selectFilterOptionsBauinformationenAusgewaehlterBaustoff: ",
          this.selectFilterOptionsBauinformationenAusgewaehlterBaustoff
        );
      });
    },

    createSelectValueBauinformationenAusgewaehlterBaustoff(val, done) {
      //--------------------------------------------------------------------------------------------------------------------
      // Funktion für QSelect zur Auswahl von Bauinformationen
      // Wird im Tab "Zugeordnete Bauinformationen" verwendet
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      //--------------------------------------------------------------------------------------------------------------------
      // Calling done(var) when new-value-mode is not set or "add", or done(var, "add") adds "var" content to the model
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "add-unique", or done(var, "add-unique") adds "var" content to the model
      // only if is not already set
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "toggle", or done(var, "toggle") toggles the model with "var" content
      // (adds to model if not already in the model, removes from model if already has it)
      // and it resets the input textbox to empty string
      // ----
      // If "var" content is undefined/null, then it doesn't tampers with the model
      // and only resets the input textbox to empty string

      console.log(
        "In createSelectValueBauinformationenAusgewaehlterBaustoff(val, done) - val: ",
        val
      );
      if (val.length > 1) {
        if (
          !this.selectOptionsBauinformationenAusgewaehlterBaustoff.bauinformationsBezeichnung.includes(
            val
          )
        ) {
          done(val, "toggle");
        }
      }
    },

    selectFilterFunctionBauinformationenAusgewaehlterBaustoff(val, update) {
      //--------------------------------------------------------------------------------------------------------------------
      // Filter-Funktion für QSelect zur Auswahl von Bauinformationen
      // Wird im Tab "Zugeordnete Bauinformationen" verwendet
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // Der Filter-String kann eingegeben werden zur Filterung der auswählbaren Optionen auf bauinformationsBezeichnung
      // oder bauinformationsTyp
      //--------------------------------------------------------------------------------------------------------------------
      update(() => {
        console.log(
          "In selectFilterFunctionBauinformationenAusgewaehlterBaustoff(val, update) für update - val: ",
          val
        ); // val ist der eingegebene Filter-String!
        if (val === "") {
          this.selectFilterOptionsBauinformationenAusgewaehlterBaustoff = this.selectOptionsBauinformationenAusgewaehlterBaustoff;
          console.log(
            "selectOptionsBauinformationenAusgewaehlterBaustoff: ",
            this.selectOptionsBauinformationenAusgewaehlterBaustoff
          );
          console.log(
            "selectFilterOptionsBauinformationenAusgewaehlterBaustoff: ",
            this.selectFilterOptionsBauinformationenAusgewaehlterBaustoff
          );
        } else {
          const needle = val.toLowerCase();
          //===============================================================================================================================
          // ACHTUNG: Der folgende Array-Filter mit needle funktioniert NICHT, wenn eines der beteiligten Felder undefined oder null ist!!!
          // Er wirft dann im Browser Log Fehler "Cannot read property 'toLowerCase' of undefined"
          // Daher sollten Filter nur auf Feldern definiert werden, die im Model required sind bzw. default: null haben!!!
          // Allerdings fixed der Fix für #268 unten die null- und undefined-Eventualitäten!!!
          //===============================================================================================================================
          // Logging für Debugging von #268 - disabled:
          /*
          console.log("XXXXXXXXXXXXXXXXXXXXXXX Vor Options Filterung mit val XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX");
          console.log("selectOptionsBauinformationenAusgewaehlterBaustoff: ",
            this.selectOptionsBauinformationenAusgewaehlterBaustoff
          );
          console.log("selectFilterOptionsBauinformationenAusgewaehlterBaustoff: ",
            this.selectFilterOptionsBauinformationenAusgewaehlterBaustoff
          );
          */
          this.selectFilterOptionsBauinformationenAusgewaehlterBaustoff = this.selectOptionsBauinformationenAusgewaehlterBaustoff.filter(
            // Array-Filter mit Arrow-Funktion:
            // Siehe https://medium.com/poka-techblog/simplify-your-javascript-use-map-reduce-and-filter-bd02c593cc2d
            //=============================================================================================================================
            // ACHTUNG: Hier muss bei Verwendung von Objekten als Options unbedingt das Unterfeld v.subField angegeben werden!!!
            v =>
              // ACHTUNG: Fix für #268, "!= null"-Abfrage erschlägt auch gleich den undefined-Fall!
              (v.bauinformationsBezeichnung != null &&
                v.bauinformationsBezeichnung.toLowerCase().indexOf(needle) >
                  -1) ||
              // v.bauinformationsTyp.toLowerCase().indexOf(needle) > -1 // ALT
              (v.bauinformationsAnzeigeText != null &&
                v.bauinformationsAnzeigeText.toLowerCase().indexOf(needle) > -1) // NEU
          );
          console.log(
            "selectFilterOptionsBauinformationenAusgewaehlterBaustoff: ",
            this.selectFilterOptionsBauinformationenAusgewaehlterBaustoff
          );
        }
      });
    },

    submitZugeordneteBauinformationenAusgewaehlterBaustoff: function() {
      //----------------------------------------------------------------------------------------------------------------------------------
      // Funktion, um neue, per q-select ausgewählte Referenzen auf zugeordnete Bauinformationen für den ausgewählten Baustoff abzuspeichern
      // Wird im Tab "Zugeordnete Bauinformationen" verwendet
      //----------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In submitZugeordneteBauinformationenAusgewaehlterBaustoff()"
      );
      console.log(
        "selectModelBauinformationenAusgewaehlterBaustoff:",
        this.selectModelBauinformationenAusgewaehlterBaustoff
      );
      var idsSelectedBauinformationen = this.selectModelBauinformationenAusgewaehlterBaustoff.map(
        value => {
          return value._id; // Extrahiere die ids der selektierten Bauinformationen
        }
      );
      // console.log("process.env.API: ", process.env.API);
      // NEU - https://quasar.dev/quasar-cli/cli-documentation/handling-process-env
      // process.env.API zeigt die URL des APIs an, abhängig davon, ob Dev oder Production Build
      const apiRoute =
        process.env.API +
        "/Baustoffe/" +
        this.selectedKeyTreeBaustoffe +
        // "9999999999999999999999" + // Für Tests mit express-async-errors
        "/Bauinformationen";
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      console.log("Vor Emit to leave room 'roomBaustoffe'");
      this.$socket.emit("leaveRoom", {
        room: "roomBaustoffe"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBaustoffe'");
      //=========================================================================================================================================
      this.$axios
        .put(
          // SEHR ALT:
          // "http://localhost:8080/API/Baustoff/0919/Update/Baustoff/Bauinformationen",
          // ALT:
          // process.env.API + "/API/Baustoff/0919/Update/Baustoff/Bauinformationen",
          // NEU: this.selectedKeyTreeBaustoffe als id in request.param.id übergeben:
          apiRoute,
          {
            // _id: this.selectedKeyTreeBaustoffe, // ALT (_id im Body)
            // _id: "99999999999999999999", // Für Test von Express-Async-Errors, provoziert einen Error, in der Controller-Methode parallel .catch disablen
            zugeordneteBauinformationen: idsSelectedBauinformationen
          }
        )
        .then(response => {
          console.log("Update erfolgreich - response: ", response);
          // QTree updaten mit den neu ausgewählten Bauinformationen für den Baustoff:
          this.$set(
            this.selectedNodeTreeBaustoffe,
            "zugeordneteBauinformationen",
            response.data.zugeordneteBauinformationen
          );
          console.log(
            "selectedNodeTreeBaustoffe.zugeordneteBauinformationen: ",
            this.selectedNodeTreeBaustoffe.zugeordneteBauinformationen
          );
          // Nun noch das zugehörige selectModel im QTree updaten:
          // TODO: Hier wäre eigentlich ein Extrakt beschränkt auf {_id, bauinformationsBezeichnung, bauinformationsTyp}
          // aus den größeren Objekten in zugeordneteBauinformationen ausreichend
          this.$set(
            this,
            "selectModelBauinformationenAusgewaehlterBaustoff",
            this.selectedNodeTreeBaustoffe.zugeordneteBauinformationen
          );
          // NEU:
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUSTOFF_BAUINFORMATIONEN_AENDERUNG_ERFOLG
          );
        })
        .catch(error => {
          console.log(
            "Fehler bei put für Update Bauinformationen - error:",
            error
          );
          // ALT: Logging und Fehlermeldung durch Axios Response Interceptor
          // NEU:
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUSTOFF_BAUINFORMATIONEN_AENDERUNG_FEHLER
          );
        });
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Methode zur Initialisierung der Unter-Tabs des Tabs "Baueigenschaften" (Übersicht/Auswahl/Neu)
    // Initialisiert insbesondere die Variablen für die q-selects in diesen Tabs
    // - 2 q-selects im Unter-Tab "Auswahl" für Bauinformation und Aufzählungswert
    // - 2 q-selects im Unter-Tab "Neu" für Bauinformation und Aufzählungswert
    //----------------------------------------------------------------------------------------------------------------------------------
    async initialisiereAusgewaehltesTabBaueigenschaften() {
      //--------------------------------------------------------------------------------------------------------------------------------
      // Methode
      // Aktionen für das Unter-Tab "auswahlTabBaueigenschaften":
      // 1) ALT/weggefallen: Erstellt flache Kopie der ausgewählten Baueigenschaft (ein JS Objekt), um Änderungen zuerst daran durchzuführen
      //    NEU: Erstelle Kopie der ausgewählten Baueigenschaft mit entsprechenden object.assigns für die genesteten Objekte (siehe unten)
      // 2) Initialisiert selectModelBauinformationAusgewaehlteBaueigenschaft (in diesem Fall wegen single Selection
      //    auch ein JS Objekt, kein Array!) für das q-select zum Auswählen/Abwählen der zugeordneten Bauinformation der ausgewählten
      //    Baueigenschaft
      // 3) Dito für Aufzählungswert
      // 4) Setze Kontexthilfe
      //--------------------------------------------------------------------------------------------------------------------------------
      console.log("In initialisiereAusgewaehltesTabBaueigenschaften()");
      console.log(this.tabBaueigenschaften);
      if (
        this.tabBaueigenschaften === "auswahlTabBaueigenschaften" ||
        this.tabBaueigenschaften === "beschreibungTabBaueigenschaften"
      ) {
        if (this.selectedRowsTableBaueigenschaften.length > 0) {
          // Step 1):
          console.log(
            "Erstelle Arbeitskopie von ausgewählter Baueigenschaft für den ausgewählten Baustoff"
          );
          // console.log("selectedRowsTableBaueigenschaften[0]: ", this.selectedRowsTableBaueigenschaften[0])
          // Die hier erstellte 3-fache Anwendung von Object.assign ist nötig, da sonst die Referenzen noch auf die alten Objekte zeigen (keine Deep-Copy)
          this.ausgewaehlteBaueigenschaft = Object.assign(
            {},
            this.selectedRowsTableBaueigenschaften[0]
          );
          this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft = Object.assign(
            {},
            this.selectedRowsTableBaueigenschaften[0].typbezogeneBaueigenschaft
          );
          this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation = Object.assign(
            {},
            this.selectedRowsTableBaueigenschaften[0].typbezogeneBaueigenschaft
              .bauinformation
          );

          this.pruefeAktivierungFuerAusgewaehlteBaueigenschaft();
          this.pruefeWerteeingabe(this.ausgewaehlteBaueigenschaft);
          // NEU: Date Felder aufbereiten in das von type="date" an den q-input Feldern erwartete Format "YYYY-MM-DD":
          // ACHTUNG: Funktioniert so nur im Zusammenspiel mit type="date" an den betreffenden Quasar-Feldern, welche
          //          in der Lage sind, diese Felder als native Date-Typen zu verarbeiten!
          //          Die Date-Utils verarbeiten als Argument nur diese Date-Typen, nicht Strings!
          this.ausgewaehlteBaueigenschaft.datumsWert1 = date.formatDate(
            this.ausgewaehlteBaueigenschaft.datumsWert1,
            "YYYY-MM-DD"
          );
          console.log(
            "ausgewaehlteBaueigenschaft.datumsWert1: ",
            this.ausgewaehlteBaueigenschaft.datumsWert1
          );
          this.ausgewaehlteBaueigenschaft.datumsWert2 = date.formatDate(
            this.ausgewaehlteBaueigenschaft.datumsWert2,
            "YYYY-MM-DD"
          );
          console.log(
            "ausgewaehlteBaueigenschaft.datumsWert2: ",
            this.ausgewaehlteBaueigenschaft.datumsWert2
          );

          // Step 2):
          // Model für q-select laden mit der bereits für die Baueigenschaft selektierten = aktuell im q-form angezeigten zugeordneten Bauinformation
          // SEHR ALT (mit Flattening am Backend):
          // this.selectModelBauinformationAusgewaehlteBaueigenschaft = this.ausgewaehlteBaueigenschaft.bauinformationId; // Objekt, die populierte bauinformation (KEIN Array)
          // ALT (ohne Flattening):
          // this.selectModelBauinformationAusgewaehlteBaueigenschaft = this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation;
          // NEU (ohne Flattening, null Fall berücksichtigen)
          // ACHTUNG: Der Fall, dass das select model leer ist und damit auch bauinformation null ist, muss im Controller speziell behandelt werden!!!

          this.selectModelBauinformationAusgewaehlteBaueigenschaft =
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft
              .bauinformation === {}
              ? null
              : this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft
                  .bauinformation;
          // Objekt, die populierte bauinformation (KEIN Array)
          // ACHTUNG: Bei q-select Selection "single" (d.h. Abwesenheit von "multiple") MUSS das v-model ein Objekt sein, kein Array, sonst Fehler!!!
          // ACHTUNG: bauinformation muss populiert sein!!! Nur dann kann im q-select auf bauinformationsBezeichnung, bauinformationsAnzeigeText zugegriffen werden
          console.log(
            "selectModelBauinformationAusgewaehlteBaueigenschaft: ",
            this.selectModelBauinformationAusgewaehlteBaueigenschaft
          );

          await this.initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft();
          console.log(
            this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft
          );

          // Step 3) - initialisiere QSelect Options für Auswahl Aufzählungswerte:
          this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft = this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.selektierbareOptionenAufzaehlungsWert;

          // Step 4):
          // NEU - experimentell - Kontexthilfethema per Event setzen (wird verarbeitet durch MyLayout/rechter Drawer)
          this.notifyTopicContextHelp(
            CONTEXT_HELP_BAUSTOFFE_BAUEIGENSCHAFTEN_AUSWAHL
          );
          // NEU: Bedienungshilfe im rechten Drawer über global Store steuern:
          // NEU: Ist nicht mehr nötig, da die Steuerung nun doch über Events erfolgt (da mehrere verschachtelte Expansion Items gleichzeitig zu öffnen sind)
          // globalStore.setIsSelectedAuswahlBaueigenschaftenBaustoffe(); // Für Bedienungshlife setzen

          // NEU - Event abfeuern zum Anzeigen des richtigen Bedienungshilfethemas:
          this.showBedienungsHilfe(
            "bedienungsHilfeAuswahlBaueigenschaftenBaustoffe"
          ); // Aufruf mit String-Parameter ref des betreffenden q-expansion-items
        } else {
          this.ausgewaehlteBaueigenschaft = null;
        }
      } else {
        if (this.tabBaueigenschaften === "neuTabBaueigenschaften") {
          // Model für q-select initialisieren für Definition Optionen für Aufzählungswert (immer ein Array!!!)
          // ACHTUNG: Bei q-select Selection "multiple" (NUR beim Tab "Neu" der Fall) MUSS auch das v-model ein Array sein, sonst Fehler!!!
          // ACHTUNG: Hier wahrscheinlich push notwendig, da Array Operation auf v-model! Beseitigt aber nicht den Fehler mit undefiniertem val in @new-value-Funktion!
          // ACHTUNG: Bei v-model="neueBaueigenschaft.aufzaehlungsWert": Push funktioniert nur, wenn gleichzeitig der aufzaehlungsWert
          //          in leereBaueigenschaft mit [] initialisiert wurde, nicht mit null!!!
          // TODO: Bisher wird der Array nur mit Testwerten initialisiert - später kann er initial vermutlich leer sein, da bei
          //       Neuanlage zunächst keine Optionswerte am q-select vorhanden sein sollten
          // TODO: Bei wiederholtem Aufruf des Tabs "Neu" werden die Testwerte mehrfach auf den Array gepushed!!!
          /* sts: Auskommentiert
          this.selectModelAufzaehlungswertNeueBaueigenschaft.push(
            "xl"
          );
          this.selectModelAufzaehlungswertNeueBaueigenschaft.push(
            "xs"
          );
          this.selectModelAufzaehlungswertNeueBaueigenschaft.push(
            "lg"
          );
          */
          // TODO: Bei option-value="valueAufzaehlungsWert": [ { valueAufzaehlungswert: "xl" }, { valueAufzaehlungswert: "xs" }, ...  ]
          // TODO: Alternativ final vermutlich leerer Array!!!
          this.initialisiereSelectOptionsUndSelectFilterOptionsAufzaehlungswertNeueBaueigenschaft();

          // selectModelBauinformationNeueBaueigenschaft intialisieren:
          this.selectModelBauinformationenNeueBaueigenschaft = null; // leeres Objekt (KEIN Array)
          this.initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenNeueBaueigenschaft();

          // NEU - experimentell - Kontexthilfethema per Event setzen (wird verarbeitet durch MyLayout/rechter Drawer)
          this.notifyTopicContextHelp(
            CONTEXT_HELP_BAUSTOFFE_BAUEIGENSCHAFTEN_NEU
          );
          // NEU: Bedienungshilfe im rechten Drawer über global Store steuern:
          // NEU: Ist nicht mehr nötig, da die Steuerung nun doch über Events erfolgt (da mehrere verschachtelte Expansion Items gleichzeitig zu öffnen sind)
          // globalStore.setIsSelectedNeuBaueigenschaftenBaustoffe(); // Für Bedienungshilfe setzen

          // NEU - Event abfeuern zum Anzeigen des richtigen Bedienungshilfethemas:
          this.showBedienungsHilfe(
            "bedienungsHilfeNeuBaueigenschaftenBaustoffe"
          ); // Aufruf mit String-Parameter ref des betreffenden q-expansion-items
        }
      }
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Funktionen für das q-select zum Definieren der Optionen zur Auswahl einer Bauinformation im Tab Baueigenschaften/Auswahl:
    //----------------------------------------------------------------------------------------------------------------------------------
    initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Funktion initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft
      // Lädt alle Bauinformationen aus der Datenbank und initialisiert damit die Options und Filter Options für das q-select für
      // zum Auswählen/Abwählen von zugeordneten Bauinformationen
      // TODO: Eigentlich werden für die QSelect Options nur die Felder _id, bauinformationsBemerkung und bauinformationsTyp benötigt
      //---------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft()"
      );
      // ALT:
      // var url = "http://localhost:8080/api/bauinformationen/readBauinformationen";
      // NEU: Benutze neues API, das nur ID, Bezeichnung, Typ holt, um das Datenvolumen im Speicher zu reduzieren:
      // ALT:
      // const url = "http://localhost:8080/Bauinformationen/Extrakt";
      // NEU:
      const apiRoute = process.env.API + "/Bauinformationen/Extrakt";
      this.$axios.get(apiRoute /* ALT: url */).then(response => {
        // console.log("response.data: ");
        // console.log(response.data);
        this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft =
          response.data; // RICHTIG - Array an Array
        // FALSCH: this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft.push(response.data);
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectOptionsBauinformationenAusgewaehlteBaueigenschaft hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        this.$set(
          this,
          "selectOptionsBauinformationenAusgewaehlteBaueigenschaft",
          response.data
        );
        console.log(
          "selectOptionsBauinformationenAusgewaehlteBaueigenschaft: ",
          this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft
        );
        this.selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft =
          response.data; // RICHTIG
        // FALSCH: this.selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft.push(response.data);
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        console.log(
          "selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft: ",
          this.selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft
        );
        //@sts, 16.12. HotFix Für Darstellung Bauinformation im Auswahltab (mit Flattening Backend - disabled)
        /*
        this.selectModelBauinformationAusgewaehlteBaueigenschaft = this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft.find(
          bauinformation => {
            return (
              bauinformation._id ===
              this.ausgewaehlteBaueigenschaft.bauinformationId
            );
          }
        );
        */
      });
    },

    createSelectValueBauinformationenAusgewaehlteBaueigenschaft(val, done) {
      //--------------------------------------------------------------------------------------------------------------------
      // Funktion createSelectValueBauinformationenAusgewaehlteBaueigenschaft für QSelect zur Auswahl von Bauinformationen
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      //--------------------------------------------------------------------------------------------------------------------
      // Calling done(var) when new-value-mode is not set or "add", or done(var, "add") adds "var" content to the model
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "add-unique", or done(var, "add-unique") adds "var" content to the model
      // only if is not already set
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "toggle", or done(var, "toggle") toggles the model with "var" content
      // (adds to model if not already in the model, removes from model if already has it)
      // and it resets the input textbox to empty string
      // ----
      // If "var" content is undefined/null, then it doesn't tampers with the model
      // and only resets the input textbox to empty string

      console.log(
        "In createSelectValueBauinformationenAusgewaehlteBaueigenschaft(val, done) - val: ",
        val
      );
      if (val.length > 1) {
        if (
          !this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft.bauinformationsBezeichnung.includes(
            val
          )
        ) {
          done(val, "toggle");
        }
      }
    },

    selectFilterFunctionBauinformationenAusgewaehlteBaueigenschaft(
      val,
      update
    ) {
      //----------------------------------------------------------------------------------------------------------------------
      // Filter-Funktion für QSelect zur Auswahl von Bauinformationen
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // Der Filter-String kann eingegeben werden zur Filterung auf bauinformationsBezeichnung oder bauinformationsAnzeigeText (NEU: statt bauinformationsTyp)
      // ohne dass die durch den Filter erfassten Objekte automatisch zum Menü selbst (d.h. zum selectOptionsBauinformationen)
      // hinzugefügt werden
      //----------------------------------------------------------------------------------------------------------------------
      update(() => {
        console.log(
          "In selectFilterFunctionBauinformationenAusgewaehlteBaueigenschaft(val, update) für update - val: ",
          val
        ); // val ist der eingegebene Filter-String!
        if (val === "") {
          this.selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft = this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft;
          console.log(
            "selectOptionsBauinformationenAusgewaehlteBaueigenschaft: ",
            this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft
          );
          console.log(
            "selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft: ",
            this.selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft
          );
        } else {
          const needle = val.toLowerCase();
          //===============================================================================================================================
          // ACHTUNG: Der folgende Array-Filter mit needle funktioniert NICHT, wenn eines der beteiligten Felder undefined oder null ist!!!
          // Er wirft dann im Browser Log Fehler "Cannot read property 'toLowerCase' of undefined"
          // Daher sollten Filter nur auf Feldern definiert werden, die im Model required sind bzw. default: null haben!!!
          // Allerdings fixed der Fix für #268 unten die null- und undefined-Eventualitäten!!!
          //===============================================================================================================================
          this.selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft = this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft.filter(
            // Array-Filter mit Arrow-Funktion:
            // Siehe https://medium.com/poka-techblog/simplify-your-javascript-use-map-reduce-and-filter-bd02c593cc2d
            //=============================================================================================================================
            // ACHTUNG: Hier muss bei Verwendung von Objekten als Options unbedingt das Unterfeld v.subField angegeben werden!!!
            v =>
              // ACHTUNG: Fix für #268, "!= null"-Abfrage erschlägt auch gleich den undefined-Fall!
              (v.bauinformationsBezeichnung != null &&
                v.bauinformationsBezeichnung.toLowerCase().indexOf(needle) >
                  -1) ||
              // v.bauinformationsTyp.toLowerCase().indexOf(needle) > -1 // ALT
              (v.bauinformationsAnzeigeText != null &&
                v.bauinformationsAnzeigeText.toLowerCase().indexOf(needle) > -1) // NEU
          );
          console.log(
            "selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft: ",
            this.selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft
          );
        }
      });
    },

    submitZugeordneteBauinformationAusgewaehlteBaueigenschaft: function() {
      //---------------------------------------------------------------------------------------------------------------------------------------
      // Funktion, um neue, per q-select ausgewählte Referenz auf zugeordnete Bauinformation für die ausgewählte Baueigenschaft abzuspeichern
      // TODO - Feld bauinformation in ausgewählter Baueigenschaft des ausgewählten Baustoffs updaten mit
      // in selectModelBauinformationAusgewaehlteBaueigenschaft ausgewählter Referenz auf zugeordnete Bauinformation
      // (Feld ausgewaehlteBaueigenschaft.bauinformation)
      // ACHTUNG: Der Update dieses Feldes muss global in allen gleichnamigen Baueigenschaften im Baum erfolgen!!!
      // ACHTUNG: Der Code hier ist noch FALSCH, stammt vom Update des Arrays von Referenzen auf Bauinformationen im Baustoff!!!
      //          Siehe weitere Kommentare unten im Code.
      // (TODO) - Diesen Fehler vorläufig nicht korrigiert, da diese Methode aktuell gar nicht separat aufgerufen wird, sondern die Speicherung
      //          der Bauinformation sollte zusammen mit dem Speichern aller anderen Felder für die ausgewählte Bauinformation
      //          im Tab "Auswahl" erfolgen!!!
      //---------------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In submitZugeordneteBauinformationAusgewaehlteBaueigenschaft()"
      );
      console.log(
        "ACHTUNG: Dieser Code ist veraltet - bitte die BIM.click Entwickler benachrichtigen, falls diese Meldung erscheint!!!"
      );
      console.log(
        "selectModelBauinformationAusgewaehlteBaueigenschaft:",
        this.selectModelBauinformationAusgewaehlteBaueigenschaft
      );

      // (TODO): Folgender Code ist eventuell FALSCH, da selectModelBauinformationAusgewaehlteBaueigenschaft kein Array, sondern ein
      // Objekt ist ({_id, bauinformationsTyp, bauinformationsBezeichnung})
      var idSelectedBauinformation = this.selectModelBauinformationAusgewaehlteBaueigenschaft.map(
        value => {
          return value; // @sts: unnötig nach Flatten._id; // Extrahiere die id der selektierten Bauinformation
        }
      );
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      console.log("Vor Emit to leave room 'roomBaustoffe'");
      this.$socket.emit("leaveRoom", {
        room: "roomBaustoffe"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBaustoffe'");
      //=========================================================================================================================================
      this.$axios
        .put(
          // (TODO): Dieser Call ist definitiv FALSCH - er dated die zugeordneten Bauinformationen für einen Baustoff ab.
          // Stattdessen muss hier die einzelne zugeordnete Bauinformation für eine Baueigenschaft updated werden!!!
          "http://localhost:8080/API/Baustoff/0919/Update/Baustoff/Bauinformationen", // ACHTUNG: API ist veraltet!!!
          {
            _id: this.selectedKeyTreeBaustoffe,
            zugeordneteBauinformationen: idSelectedBauinformation
          }
        )
        .then(response => {
          console.log("Update erfolgreich");
          console.log(response);
          //var tmpNode = this.$refs.treeBaustoffe.getNodeByKey(this.)
          this.$set(
            this.selectedNodeTreeBaustoffe,
            "zugeordneteBauinformationen",
            response.data.zugeordneteBauinformationen
          );
          console.log(
            this.selectedNodeTreeBaustoffe.zugeordneteBauinformationen
          );
          this.$set(
            this,
            "selectModelBauinformationAusgewaehlteBaueigenschaft",
            this.selectedNodeTreeBaustoffe.zugeordneteBauinformationen
          );
        });
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Funktionen für das q-select zum Definieren der Optionen zur Auswahl einer Bauinformation im Tab Baueigenschaften/Neu:
    //----------------------------------------------------------------------------------------------------------------------------------
    initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenNeueBaueigenschaft() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Funktion initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenNeueBaueigenschaft
      // Lädt alle Bauinformationen aus der Datenbank und initialisiert damit die Options und Filter Options für das q-select für
      // zum Auswählen/Abwählen von zugeordneten Bauinformationen
      // TODO: Eigentlich werden für die QSelect Options nur die Felder bauinformationsBemerkung und bauinformationsTyp benötigt
      //---------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenNeueBaueigenschaft()"
      );
      // ALT:
      // var url = "http://localhost:8080/api/bauinformationen/readBauinformationen";
      // NEU: Benutze neues API, das nur ID, Bezeichnung, Typ holt, um das Datenvolumen im Speicher zu reduzieren:
      // ALT:
      // const url = "http://localhost:8080/Bauinformationen/Extrakt";
      // NEU:
      const apiRoute = process.env.API + "/Bauinformationen/Extrakt";
      this.$axios.get(apiRoute /* ALT: url */).then(response => {
        // console.log("response.data: ");
        // console.log(response.data);
        this.selectOptionsBauinformationenNeueBaueigenschaft = response.data; // RICHTIG - Array an Array
        // FALSCH: this.selectOptionsBauinformationenNeueBaueigenschaft.push(response.data);
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectOptionsBauinformationenNeueBaueigenschaft hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        console.log(
          "selectOptionsBauinformationenNeueBaueigenschaft: ",
          this.selectOptionsBauinformationenNeueBaueigenschaft
        );
        this.selectFilterOptionsBauinformationenNeueBaueigenschaft =
          response.data; // RICHTIG
        // FALSCH: this.selectFilterOptionsBauinformationenNeueBaueigenschaft.push(response.data);
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectFilterOptionsBauinformationenNeueBaueigenschaft hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        console.log(
          "selectFilterOptionsBauinformationenNeueBaueigenschaft: ",
          this.selectFilterOptionsBauinformationenNeueBaueigenschaft
        );
      });
    },

    createSelectValueBauinformationenNeueBaueigenschaft(val, done) {
      //--------------------------------------------------------------------------------------------------------------------
      // Funktion createSelectValueBauinformationenNeueBaueigenschaft für QSelect zur Auswahl von Bauinformationen
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      //--------------------------------------------------------------------------------------------------------------------
      // Calling done(var) when new-value-mode is not set or "add", or done(var, "add") adds "var" content to the model
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "add-unique", or done(var, "add-unique") adds "var" content to the model
      // only if is not already set
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "toggle", or done(var, "toggle") toggles the model with "var" content
      // (adds to model if not already in the model, removes from model if already has it)
      // and it resets the input textbox to empty string
      // ----
      // If "var" content is undefined/null, then it doesn't tampers with the model
      // and only resets the input textbox to empty string

      console.log(
        "In createSelectValueBauinformationenNeueBaueigenschaft(val, done) - val: ",
        val
      );
      if (val.length > 1) {
        if (
          !this.selectOptionsBauinformationenNeueBaueigenschaft.bauinformationsBezeichnung.includes(
            val
          )
        ) {
          done(val, "toggle");
        }
      }
    },

    selectFilterFunctionBauinformationenNeueBaueigenschaft(val, update) {
      //--------------------------------------------------------------------------------------------------------------------
      // Filter-Funktion für QSelect zur Auswahl von Bauinformationen
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // Der Filter-String kann eingegeben werden zur Filterung auf bauinformationsBezeichnung oder bauinformationsAnzeigeText (NEU - statt bauinformationsTyp),
      // ohne dass die durch den Filter erfassten Objekte automatisch zum Menü selbst (d.h. zum selectOptionsBauinformationen)
      // hinzugefügt werden
      //--------------------------------------------------------------------------------------------------------------------
      update(() => {
        console.log(
          "In selectFilterFunctionBauinformationenNeueBaueigenschaft(val, update) für update - val: ",
          val
        ); // val ist der eingegebene Filter-String!
        if (val === "") {
          this.selectFilterOptionsBauinformationenNeueBaueigenschaft = this.selectOptionsBauinformationenNeueBaueigenschaft;
          console.log(
            "selectOptionsBauinformationenNeueBaueigenschaft: ",
            this.selectOptionsBauinformationenNeueBaueigenschaft
          );
          console.log(
            "selectFilterOptionsBauinformationenNeueBaueigenschaft: ",
            this.selectFilterOptionsBauinformationenNeueBaueigenschaft
          );
        } else {
          const needle = val.toLowerCase();
          //===============================================================================================================================
          // ACHTUNG: Der folgende Array-Filter mit needle funktioniert NICHT, wenn eines der beteiligten Felder undefined oder null ist!!!
          // Er wirft dann im Browser Log Fehler "Cannot read property 'toLowerCase' of undefined"
          // Daher sollten Filter nur auf Feldern definiert werden, die im Model required sind bzw. default: null haben!!!
          // Allerdings fixed der Fix für #268 unten die null- und undefined-Eventualitäten!!!
          //===============================================================================================================================
          this.selectFilterOptionsBauinformationenNeueBaueigenschaft = this.selectOptionsBauinformationenNeueBaueigenschaft.filter(
            // Array-Filter mit Arrow-Funktion:
            // Siehe https://medium.com/poka-techblog/simplify-your-javascript-use-map-reduce-and-filter-bd02c593cc2d
            //=============================================================================================================================
            // ACHTUNG: Hier muss bei Verwendung von Objekten als Options unbedingt das Unterfeld v.subField angegeben werden!!!
            v =>
              // ACHTUNG: Fix für #268, "!= null"-Abfrage erschlägt auch gleich den undefined-Fall!
              (v.bauinformationsBezeichnung != null &&
                v.bauinformationsBezeichnung.toLowerCase().indexOf(needle) >
                  -1) ||
              // v.bauinformationsTyp.toLowerCase().indexOf(needle) > -1 // ALT
              (v.bauinformationsAnzeigeText != null &&
                v.bauinformationsAnzeigeText.toLowerCase().indexOf(needle) > -1) // NEU
          );
          console.log(
            "selectFilterOptionsBauinformationenNeueBaueigenschaft: ",
            this.selectFilterOptionsBauinformationenNeueBaueigenschaft
          );
        }
      });
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Funktionen für das q-select zum Definieren der Optionen für einen Aufzählungswert im Tab Baueigenschaften/Auswahl:
    //----------------------------------------------------------------------------------------------------------------------------------
    createSelectValueAufzaehlungswertAusgewaehlteBaueigenschaft(val, done) {
      //--------------------------------------------------------------------------------------------------------------------
      // Funktion createSelectValueAufzaehlungswertAusgewaehlteBaueigenschaft für QSelect zur Definition von Optionen
      // für einen neuen Aufzählungswert
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      //--------------------------------------------------------------------------------------------------------------------
      // Calling done(var) when new-value-mode is not set or "add", or done(var, "add") adds "var" content to the model
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "add-unique", or done(var, "add-unique") adds "var" content to the model
      // only if is not already set
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "toggle", or done(var, "toggle") toggles the model with "var" content
      // (adds to model if not already in the model, removes from model if already has it)
      // and it resets the input textbox to empty string
      // ----
      // If "var" content is undefined/null, then it doesn't tampers with the model
      // and only resets the input textbox to empty string

      console.log(
        "In createSelectValueAufzaehlungswertAusgewaehlteBaueigenschaft(val, done) - val: ",
        val
      );

      if (val.length > 0) {
        // ACHTUNG: Werte mit val.length >= 1 sind erlaubt, z.B. "s", "m", "l", "xl" bei Größenangaben!
        if (
          !this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft.includes(
            val
          )

          // ACHTUNG - TODO bei option-value="valueAufzaehlungswert" = nested q-select Option Values:
          // !this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft.valueAufzaehlungswert.includes(val)
        ) {
          // Den Wert als neue Option zum Select Dropdown Menü hinzufügen:
          this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft.push(
            val
            // TODO bei option-value="valueAufzaehlungswert" = nested q-select Option Values:
            // { "valueAufzaehlungswert": val } // ??? Unklar, ob richtig so - bei q-select für Bauinformationen (ebenfalls nested) steht hier nur val!!!
          );
        }
        // TODO bei option-value="valueAufzaehlungswert" = nested q-select Option Values:
        // done({ "valueAufzaehlungswert": val }, "toggle");  // ??? Unklar, ob richtig so - bei q-select für Bauinformationen (ebenfalls nested) steht hier nur val!!!
        done(val, "toggle");
      }
    },

    //------------------------------------------------------------------------------------------------------------------------------------------------
    selectFilterFunctionAufzaehlungswertAusgewaehlteBaueigenschaft(
      val,
      update
    ) {
      //--------------------------------------------------------------------------------------------------------------------
      // Filter-Funktion für QSelect zur Definition der Optionen für einen neuen Aufzählungswert
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // Der Filter-String kann eingegeben werden zur Filterung der auswählbaren Menü Options
      //--------------------------------------------------------------------------------------------------------------------
      update(() => {
        console.log(
          "In selectFilterFunctionAufzaehlungswertAusgewaehlteBaueigenschaft(val, update) für update - val: ",
          val
        ); // val ist der vom Benutzer eingegebene Filter-String!
        if (val === "") {
          this.selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft = this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft;
          // Variante: Array Cloning statt Zuweisung - funktioniert, aber beseitigt den Fehler mit @new-value="...()" nicht
          // this.selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft = [...this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft];
          // ES6 Spread Operation auf Array, siehe https://www.samanthaming.com/tidbits/35-es6-way-to-clone-an-array?source=post_page-----9a782b17fa89----------------------
          console.log(
            "selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft: ",
            this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft
          );
          console.log(
            "selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft: ",
            this.selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft
          );
        } else {
          const needle = val.toLowerCase();
          //===============================================================================================================================
          // ACHTUNG: Der folgende Array-Filter mit needle funktioniert NICHT, wenn eines der beteiligten Felder undefined oder null ist!!!
          // Er wirft dann im Browser Log Fehler "Cannot read property 'toLowerCase' of undefined"
          // Daher sollten Filter nur auf Feldern definiert werden, die im Model required sind bzw. default: null haben!!!
          // Allerdings fixed der Fix für #268 unten die null- und undefined-Eventualitäten!!!
          //===============================================================================================================================
          this.selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft = this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft.filter(
            // Array-Filter mit Arrow-Funktion:
            // Siehe https://medium.com/poka-techblog/simplify-your-javascript-use-map-reduce-and-filter-bd02c593cc2d
            // Nur bei nested Objekten: v => v.valueAufzaehlungswert.toLowerCase().indexOf(needle) > -1
            //=============================================================================================================================
            // NEU: Abfrage gegen null und undefined (falls z.B. keine Options definiert sind):
            // v => v.toLowerCase().indexOf(needle) > -1 // ALT
            //=============================================================================================================================
            // ACHTUNG: Hier muss bei Verwendung von Objekten als Options unbedingt das Unterfeld v.subField angegeben werden!!!
            v => v != null && v.toLowerCase().indexOf(needle) > -1 // NEU
          );
          console.log(
            "selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft: ",
            this.selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft
          );
        }
      });
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Funktionen für das q-select zum Definieren der Optionen für einen Aufzählungswert im Tab Baueigenschaften/Neu:
    //----------------------------------------------------------------------------------------------------------------------------------
    initialisiereSelectOptionsUndSelectFilterOptionsAufzaehlungswertNeueBaueigenschaft() {
      // @sts 9.12.19 Initialisierung überflüssig und deshalb auskommentiert
      //--------------------------------------------------------------------------------------------------------------------------------
      // Methode - initialisiert die Options und Filter Options für das q-select zur Definition von Optionen für einen Aufzählungswert
      // TODO: Diese werden temporär zu Testzwecken mit Testwerten gefüllt
      // TODO: Da diese bei Neuanlage eines Aufzählungswerts im Tab "neuTabBaueigenschaften" leer sein sollten und schon so deklariert sind,
      // ist hier eventuell nichts zu tun, es sei denn, man kommt von woanders auf das Tab "Neu"???
      // TODO: Bisher werden die beiden Arrays nur mit Testwerten initialisiert - später können sie initial vermutlich leer sein, da bei
      //       Neuanlage zunächst keine Optionswerte am q-select vorhanden sein sollten
      // TODO: Bei wiederholtem Aufruf des Tabs "Neu" werden die Testwerte mehrfach auf den Array gepushed!!!
      //---------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In initialisiereSelectOptionsUndSelectFilterOptionsAufzaehlungswertNeueBaueigenschaft()"
      );
      /*this.selectOptionsAufzaehlungswertNeueBaueigenschaft.push(
        "xl"
      ); // Variante 1 - funktioniert
      this.selectOptionsAufzaehlungswertNeueBaueigenschaft.push(
        "xs"
      ); // Variante 1 - funktioniert
      this.selectOptionsAufzaehlungswertNeueBaueigenschaft.push(
        "lg"
      ); // Variante 1 - funktioniert
      // this.selectOptionsAufzaehlungswertNeueBaueigenschaft = [ "xl", "xs", "lg" ]; // Variante 2 - funktioniert auch
      // this.selectOptionsAufzaehlungswertNeueBaueigenschaft = [ { valueAufzaehlungswert: "xl" }, ... ];
      // TODO: Nur bei option-value="valueAufzaehlungswert" = nested Property für die q-select Option Values
      // this.selectOptionsAufzaehlungswertNeueBaueigenschaft = []; // TODO: Finale Variante?
      console.log(
        "selectOptionsAufzaehlungswertNeueBaueigenschaft: ",
        this.selectOptionsAufzaehlungswertNeueBaueigenschaft
      );
      this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft.push(
        "xl"
      ); // Variante 1 - funktioniert
      this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft.push(
        "xs"
      ); // Variante 1 - funktioniert
      this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft.push(
        "lg"
      ); // Variante 1 - funktioniert
      // this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft = [ "xl", "xs", "lg" ]; // Variante 2 - funktioniert auch
      // this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft = [ { valueAufzaehlungswert: "xl" }, ... ];
      // TODO: Nur bei option-value="valueAufzaehlungswert" = nested Property für die q-select Option Values
      // this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft = []; // TODO: Finale Variante?
      console.log(
        "selectFilterOptionsAufzaehlungswertNeueBaueigenschaft: ",
        this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft
      );
      */
    },

    //--------------------------------------------------------------------------------------------------------------------------------------------------------
    createSelectValueAufzaehlungswertNeueBaueigenschaft(val, done) {
      //--------------------------------------------------------------------------------------------------------------------
      // Funktion createSelectvalueAufzaehlungswertNeueBaueigenschaft für QSelect zur Definition von Optionen
      // für einen neuen Aufzählungswert
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      //--------------------------------------------------------------------------------------------------------------------
      // Calling done(var) when new-value-mode is not set or "add", or done(var, "add") adds "var" content to the model
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "add-unique", or done(var, "add-unique") adds "var" content to the model
      // only if is not already set
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "toggle", or done(var, "toggle") toggles the model with "var" content
      // (adds to model if not already in the model, removes from model if already has it)
      // and it resets the input textbox to empty string
      // ----
      // If "var" content is undefined/null, then it doesn't tampers with the model
      // and only resets the input textbox to empty string

      console.log(
        "In createSelectValueAufzaehlungswertNeueBaueigenschaft(val, done) - val: ",
        val
      );

      if (val.length > 0) {
        // ACHTUNG: Werte mit val.length >= 1 sind erlaubt, z.B. "s", "m", "l", "xl" bei Größenangaben!
        if (
          !this.selectOptionsAufzaehlungswertNeueBaueigenschaft.includes(val)

          // ACHTUNG - TODO bei option-value="valueAufzaehlungswert" = nested q-select Option Values:
          // !this.selectOptionsAufzaehlungswertNeueBaueigenschaft.valueAufzaehlungswert.includes(val)
        ) {
          // Den Wert als neue Option zum Select Dropdown Menü hinzufügen:
          this.selectOptionsAufzaehlungswertNeueBaueigenschaft.push(
            val
            // TODO bei option-value="valueAufzaehlungswert" = nested q-select Option Values:
            // { "valueAufzaehlungswert": val } // ??? Unklar, ob richtig so - bei q-select für Bauinformationen (ebenfalls nested) steht hier nur val!!!
          );
        }
        // TODO bei option-value="valueAufzaehlungswert" = nested q-select Option Values:
        // done({ "valueAufzaehlungswert": val }, "toggle");  // ??? Unklar, ob richtig so - bei q-select für Bauinformationen (ebenfalls nested) steht hier nur val!!!
        done(val, "toggle");
      }
    },

    //--------------------------------------------------------------------------------------------------------------------------------------------------------
    selectFilterFunctionAufzaehlungswertNeueBaueigenschaft(val, update) {
      //--------------------------------------------------------------------------------------------------------------------
      // Filter-Funktion für QSelect zur Definition der Optionen für einen neuen Aufzählungswert
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // Der Filter-String kann eingegeben werden zur Filterung der auswählbaren Menü Options
      //--------------------------------------------------------------------------------------------------------------------
      update(() => {
        console.log(
          "In selectFilterFunctionAufzaehlungswertNeueBaueigenschaft(val, update) für update - val: ",
          val
        ); // val ist der vom Benutzer eingegebene Filter-String!
        if (val === "") {
          this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft = this.selectOptionsAufzaehlungswertNeueBaueigenschaft;
          // Variante: Array Cloning statt Zuweisung - funktioniert, aber beseitigt den Fehler mit @new-value="...()" nicht
          // this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft = [...this.selectOptionsAufzaehlungswertNeueBaueigenschaft];
          // ES6 Spread Operation auf Array, siehe https://www.samanthaming.com/tidbits/35-es6-way-to-clone-an-array?source=post_page-----9a782b17fa89----------------------
          console.log(
            "selectOptionsAufzaehlungswertNeueBaueigenschaft: ",
            this.selectOptionsAufzaehlungswertNeueBaueigenschaft
          );
          console.log(
            "selectFilterOptionsAufzaehlungswertNeueBaueigenschaft: ",
            this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft
          );
        } else {
          const needle = val.toLowerCase();
          //===============================================================================================================================
          // ACHTUNG: Der folgende Array-Filter mit needle funktioniert NICHT, wenn eines der beteiligten Felder undefined oder null ist!!!
          // Er wirft dann im Browser Log Fehler "Cannot read property 'toLowerCase' of undefined"
          // Daher sollten Filter nur auf Feldern definiert werden, die im Model required sind bzw. default: null haben!!!
          // Allerdings fixed der Fix für #268 unten die null- und undefined-Eventualitäten!!!
          //===============================================================================================================================
          this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft = this.selectOptionsAufzaehlungswertNeueBaueigenschaft.filter(
            // Array-Filter mit Arrow-Funktion:
            // Siehe https://medium.com/poka-techblog/simplify-your-javascript-use-map-reduce-and-filter-bd02c593cc2d
            // Nur bei nested Objekten: v => v.valueAufzaehlungswert.toLowerCase().indexOf(needle) > -1
            //=============================================================================================================================
            // NEU: Abfrage gegen null und undefined (falls z.B. keine Options definiert sind):
            // v => v.toLowerCase().indexOf(needle) > -1 // ALT
            //=============================================================================================================================
            // ACHTUNG: Hier muss bei Verwendung von Objekten als Options unbedingt das Unterfeld v.subField angegeben werden!!!
            v => v != null && v.toLowerCase().indexOf(needle) > -1 // NEU
          );
          console.log(
            "selectFilterOptionsAufzaehlungswertNeueBaueigenschaft: ",
            this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft
          );
        }
      });
    },
    pruefeWerteeingabe(baueigenschaft) {
      if (
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
          .unmittelbareElternBaueigenschaft !== undefined &&
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
          .unmittelbareElternBaueigenschaft !== null
      ) {
        if (
          !this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
            .ausgewaehlteBaueigenschaftKannEigeneWerteDefinieren
        ) {
          this.disableWerteFelder = true;
          // NEU: Benutzernachricht per global Store und Enums:
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.WERTEEINGABE_NICHT_MOEGLICH
          );
        } else {
          // Werte waren im aktivierten Elternknoten noch nicht definiert
          this.disableWerteFelder = false; // Erlaube Werteänderungen
          globalStore.showBenutzerNachricht(
            // NEU: Benutzernachricht per global Store und Enums:
            BenutzerNachrichten.WERTEEINGABE_MOEGLICH
          );
        }
      }
    },
    //-------------------------------------------------------------------------------------------------------------------------------------------------------
    handleAktivierung(gewuenschterAktivierungszustand) {
      // Methode handleAktivierung
      // Parameter: gewuenschterAktivierungszustand: Boolean (true bei Aktivierung, false bei Deaktivierung)
      // Wird aufgerufen, wenn Toggle bzw. Radio Button für Aktivierung betätigt wird im Tab Baueigenschaften/Auswahl
      //-----------------------------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In handleAktivierung() - ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert: ",
        this.ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert
      );
      if (gewuenschterAktivierungszustand) {
        // Eigenschaft war BISHER nicht aktiviert und soll aktiviert werden
        if (
          this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
            .unmittelbareElternBaueigenschaft !== undefined &&
          this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
            .unmittelbareElternBaueigenschaft !== null
        ) {
          // ACHTUNG: Hier unbedingt Prüfung auf undefined und null,
          // sonst "TypeError: Cannot read property 'definiertNichtUndefiniert' of undefined"
          // bzw. "TypeError: Cannot read property 'aktiviertNichtDeaktiviert' of null"

          // if-Zweig: Es handelt sich NICHT um den Wurzelknoten, an dem die Eigenschaft aktiviert werden soll
          console.log(
            "In handleAktivierung() - Aktivierung, ausgewaehlteBaueigenschatAmElternknoten: ",
            this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
              .unmittelbareElternBaueigenschaft
          );
          let bool = true; //this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.ausgewaehlteBaueigenschaftIstDirektAktivierbar // Die Eigenschaft ist im Elternknoten aktiviert, diese Prüfung ist nicht mehr nötig
          if (bool) {
            if (
              !this
                .hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
                .ausgewaehlteBaueigenschaftKannEigeneWerteDefinieren
            ) {
              this.erbeWerteAusBaumHierarchie();
              this.disableWerteFelder = true;
              // NEU: Benutzernachricht per global Store und Enums:
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.PFADAKTIVIERUNG_AUSGELOEST_WERTEEINGABE_NICHT_MOEGLICH
              );
              // globalStore.showBenutzerNachricht("Die folgenden Baustoffe werden beim Abspeichern zusätzlich aktiviert und durch Vererbung definiert:" + this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.idsZuAktivierendeBaustoffe)
            } else {
              // Werte waren im aktivierten Elternknoten noch nicht definiert
              this.disableWerteFelder = false; // Erlaube Werteänderungen
              globalStore.showBenutzerNachricht(
                // NEU: Benutzernachricht per global Store und Enums:
                BenutzerNachrichten.PFADAKTIVIERUNG_AUSGELOEST_WERTEEINGABE_MOEGLICH
              );
              // globalStore.showBenutzerNachricht("Die folgenden Baustoffe werden beim Abspeichern zusätzlich aktiviert:" + this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.idsZuAktivierendeBaustoffe)
            }
            this.ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert = true; // Eigenschaft ist jetzt aktiviert
            this.ausgewaehlteBaueigenschaft.aktivierbar = false; // NEU: MS - Setze aktivierbar zurück!
            // HINWEIS: Vererbung an Kinder und Aktivierbar-Setzen der Kinder wird im Backend erledigt!
          } else {
            // Die Eigenschaft ist im Elternknoten nicht aktiviert und darf deshalb gemäß Aktivierungsregel nicht aktiviert werden!
            // In diesem Fall verbleibt this.ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert im bisherigen Zustand "false"
            // NEU: Benutzernachricht per global Store und Enums:
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.AKTIVIERUNG_NICHT_MOEGLICH
            );
            console.log("Dieser Fall sollte nicht mehr vorkommen.");
          }
        } else {
          // Es handelt sich um den Wurzelknoten, und die Eigenschaft soll an diesem aktiviert werden
          // this.disableWerteFelder = false;
          console.log("In handleAktivierung() - Wurzelknoten");
          this.disableWerteFelder = false;
          this.ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert = true;
          this.ausgewaehlteBaueigenschaft.aktivierbar = false; // NEU: MS - Setze aktivierbar zurück!
          // Wertefelder sind in diesem Fall enabled!
          // NEU: Benutzernachricht per global Store und Enums:
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.AKTIVIERUNG_AUSGELOEST_WURZELKNOTEN
          );
        }
      } else {
        // Eigenschaft soll deaktiviert werden
        if (!this.ausgewaehlteBaueigenschaft.obligatorischNichtOptional) {
          console.log("In handleAktivierung() - Deaktivierung");
          this.ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert = false;
          this.ausgewaehlteBaueigenschaft.aktivierbar = true; // NEU
          this.disableWerteFelder = true;
          this.verwerfeEingabewerte();
          // NEU: Benutzernachricht per global Store und Enums:
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.DEAKTIVIERUNG_AUSGELOEST
          );
        } else {
          // NEU: Benutzernachricht per global Store und Enums:
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.DEAKTIVIERUNG_NICHT_MOEGLICH
          );
        }
      }
    },

    selectHandlerBauinformationAusgewaehlteBaueigenschaft(val) {
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      // Handler für QSelect zur Auswahl der Bauinformation für eine Baueigenschaft
      // Die Auswahl wird hier in die ausgewählte Baueigenschaft übertragen
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      console.log("In selectHandlerBauinformationAusgewaehlteBaueigenschaft()");
      console.log("val: ");
      this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation._id =
        val._id;
      this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation.bauinformationsAnzeigeText =
        val.bauinformationsAnzeigeText; // NEU, statt bauinformationsTyp
      this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation.bauinformationsBezeichnung =
        val.bauinformationsBezeichnung;
    },

    erbeWerteAusBaumHierarchie() {
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      // Überträgt die Werte aus dem gefundenenen definierten Elternknoten in die ausgewaehlte Baueigenschaft
      // Wird beim Aktivieren aufgerufen
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      console.log("In erbeWerteAusBaumHierarchie()");

      for (var prop in this
        .hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
        .relevanteKennwerte) {
        if (prop === "datumsWert1" || prop === "datumsWert2") {
          // ACHTUNG: Funktioniert so nur im Zusammenspiel mit type="date" an den betreffenden Quasar-Feldern, welche
          //          in der Lage sind, diese Felder als native Date-Typen zu verarbeiten!
          //          Die Date-Utils verarbeiten als Argument nur diese Date-Typen, nicht Strings!
          this.ausgewaehlteBaueigenschaft[prop] = date.formatDate(
            this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
              .relevanteKennwerte[prop],
            "YYYY-MM-DD"
          );
        } else {
          // ACHTUNG: Hier kam ESLint Fehler "error Expected "[" and "]" to be on the same line  standard/computed-property-even-spacing"
          // (weil Prettier offenbar automatisch die eckigen Klammern auf verschiedene Zeilen umformatiert, warum auch immer)
          // Gelöst durch Einfügen folgender Regel in eslintrc.js: "standard/computed-property-even-spacing": "off",
          // Danach Rebuild mit quasar dev notwendig, damit Quasar die eue ESLint Regel berücksichtigt!
          // Nach Tipp von https://github.com/prettier/eslint-config-prettier/issues/29
          this.ausgewaehlteBaueigenschaft[
            prop
          ] = this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.relevanteKennwerte[
            prop
          ];
        }
      }
      this.ausgewaehlteBaueigenschaft.definiertNichtUndefiniert = true;
      // this.ausgewaehlteBaueigenschaft.ererbtNichtGesetzt = true; // NEU -#258:  MS - ist vermutlich FALSCH - disabled
    },

    verwerfeEingabewerte() {
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      // Wird beim Deaktivieren aufgerufen
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      console.log("In verwerfeEingabewerte()");

      this.ausgewaehlteBaueigenschaft.kennWert1 = null;
      this.ausgewaehlteBaueigenschaft.kennWert2 = null;
      // this.ausgewaehlteBaueigenschaft.symbol = null; Auskommentiert, da dies typbezogene Eigenschaften sind
      // this.ausgewaehlteBaueigenschaft.einheit = null;
      // this.ausgewaehlteBaueigenschaft.operator = null;
      // this.ausgewaehlteBaueigenschaft.formel = null;
      this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 = null;
      this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 = null;
      this.ausgewaehlteBaueigenschaft.datumsWert1 = null; // Wurde vergessen!!!
      this.ausgewaehlteBaueigenschaft.datumsWert2 = null; // Wurde vergessen!!!
      this.ausgewaehlteBaueigenschaft.tagesZeitWert1 = null;
      this.ausgewaehlteBaueigenschaft.tagesZeitWert1 = null;
      this.ausgewaehlteBaueigenschaft.aufzaehlungsWert = [];
      this.ausgewaehlteBaueigenschaft.wahrheitsWert = null; // Wurde vergessen!!!

      this.ausgewaehlteBaueigenschaft.definiertNichtUndefiniert = false;
      this.ausgewaehlteBaueigenschaft.ererbtNichtGesetzt = false;
    },

    handleDisabledFieldsNeueBaueigenschaft(newValue, oldValue) {
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      // ?????? ACHTUNG: Muss "handler" heißen, siehe https://vuejs.org/v2/api/#watch
      // ?????? TODO XXXXXX: Wird nirgends aufgerufen?
      // Stattdessen gibt es eine computed Property disabledFieldsNeueBaueigenschaft
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In Watch Handler für Watch auf neueBaueigenschaft.aktiviertNichtDeaktiviert"
      );
      // newValue, oldValue beziehen sich auf den Wert von neueBaueigenschaft.aktiviertNichtDeaktiviert
      console.log("newValue: ", newValue, "oldValue: ", oldValue);
      this.disabledFieldsNeueBaueigenschaft.kennWert1 = true;
      this.disabledFieldsNeueBaueigenschaft.kennWert2 = true;
      this.disabledFieldsNeueBaueigenschaft.datumsWert1 = true;
      this.disabledFieldsNeueBaueigenschaft.datumsWert2 = true;
      this.disabledFieldsNeueBaueigenschaft.tagesZeitWert1 = true; // NEU
      this.disabledFieldsNeueBaueigenschaft.tagesZeitWert2 = true; // NEU
      this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = true;
      this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert2 = true;
      this.disabledFieldsNeueBaueigenschaft.aufzaehlungsWert = true;
      this.disabledFieldsNeueBaueigenschaft.wahrheitsWert = true;
      this.disabledFieldsNeueBaueigenschaft.symbol = true;
      this.disabledFieldsNeueBaueigenschaft.einheit = true;
      this.disabledFieldsNeueBaueigenschaft.operator = true;
      this.disabledFieldsNeueBaueigenschaft.formel = true; // NEU
      this.disabledFieldsNeueBaueigenschaft.sonderzeichen = true; // NEU
      if (newValue) {
        // Aktivierung
        if (!this.suppressNotificationNeuTabBaueigenschaften) {
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.AKTIVIERUNG_AUSGELOEST_WERTEEINGABE_MOEGLICH
          );
        }
        var arg = this.neueBaueigenschaft.typbezogeneBaueigenschaft.werteTyp;
        switch (arg) {
          case "Kennwert":
            this.disabledFieldsNeueBaueigenschaft.kennWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.symbol = false;
            this.disabledFieldsNeueBaueigenschaft.einheit = false;
            this.disabledFieldsNeueBaueigenschaft.operator = false;
            this.disabledFieldsNeueBaueigenschaft.formel = false; // NEU
            this.disabledFieldsNeueBaueigenschaft.sonderzeichen = false; // NEU
            break;
          case "Kennwertepaar":
            this.disabledFieldsNeueBaueigenschaft.kennWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.kennWert2 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert2 = false;
            this.disabledFieldsNeueBaueigenschaft.symbol = false;
            this.disabledFieldsNeueBaueigenschaft.einheit = false;
            this.disabledFieldsNeueBaueigenschaft.operator = false;
            this.disabledFieldsNeueBaueigenschaft.formel = false; // NEU
            this.disabledFieldsNeueBaueigenschaft.sonderzeichen = false; // NEU
            break;
          case "Datumswert":
            this.disabledFieldsNeueBaueigenschaft.datumsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            break;
          case "Datumswertepaar":
            this.disabledFieldsNeueBaueigenschaft.datumsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.datumsWert2 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert2 = false;
            break;
          case "Tageszeitwert":
            this.disabledFieldsNeueBaueigenschaft.tagesZeitWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            break;
          case "Tageszeitwertepaar":
            this.disabledFieldsNeueBaueigenschaft.tagesZeitWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.tagesZeitWert2 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert2 = false;
            break;
          case "Bezeichnungswert":
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            break;
          case "Bezeichnungswertepaar":
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert2 = false;
            break;
          case "Aufzählungswert":
            // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.aufzaehlungsWert = false;
            break;
          case "Wahrheitswert":
            // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.wahrheitsWert = false;
            break;
        }
      } else {
        if (!this.suppressNotificationNeuTabBaueigenschaften) {
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.DEAKTIVIERUNG_AUSGELOEST
          );
        }
      }
      this.suppressNotificationNeuTabBaueigenschaften = false;
    }
  }, // /methods:

  //***=======================================================================================================================================================
  computed: {
    //--------------------------------------------------------------------------------------------------------------------------------------------------------
    // ACHTUNG: Computed Properties sind zwar auch functions, dürfen aber im Template NICHT mit :property="function()",
    //          sondern MÜSSEN per :property="function" aufgerufen werden!!!
    //          Andernfalls kommt die irreführendé Vue-Fehlermeldung "..is not a function"!!!
    // ERKLÄRUNG: Computed Properties akzeptieren keine Argumente, deshalb funktioniert computed() NICHT!!!
    // Siehe https://forum.quasar-framework.org/topic/4596/how-to-trigger-an-event-when-button-in-q-uploader-is-clicked-how-to-dynamically-disable-enable-it/3
    //--------------------------------------------------------------------------------------------------------------------------------------------------------

    //------------------------------------------------------------------------------------------------------------------------------------------------------
    // Funktionen zum Disablen/Enablen von Tabs für Knoten im Baustoffbaum
    //------------------------------------------------------------------------------------------------------------------------------------------------------
    // HINWEIS: Die folgenden Funktionen sind angepasste Varianten der gleichnamigen Funktion istAktiviertBaueigenschaftsProfilAnNode() aus baueinheiten.vue
    // Sie sind hier in baustoffe.vue als computed-Funktionen definiert (deshalb ohne Parameter).
    // Sie müssen daher statt eines Parameters baueigenschaftsProfilBezeichnung die Profilbezeichnung im Funktionsnamen enthalten.
    // Sie werden automatisch neu berechnet, wenn sich selectedNodeTreeBaustoffe ändert.
    //------------------------------------------------------------------------------------------------------------------------------------------------------
    istAktiviertBaueigenschaftsProfilBaustoffAnAusgewaehltemBaustoff: function() {
      // Funktion, um festzustellen, ob ein BaueigenschaftsProfil (dessen Bezeichnung wird aus dem Funktkionsnamen ermittelt) aktiviert ist an
      // aktuell ausgewählten Knoten im Baustoffbaum (dieser wird statt des wegfallenden Parameters node genommen)
      // Ursprüngliche Parameter:
      // node, // Parameter: Der im Baustoffbaum ausgewählte Knoten (Verweis auf Baustoff
      // baueigenschaftsProfilBezeichnung // Bezeichnung eines Profils
      console.log(
        "In istAktiviertBaueigenschaftsProfilBaustoffAnAusgewaehltemBaustoff()"
      );
      /*
      console.log(
        "Parameter baueigenschaftsProfilBezeichnung: ",
        baueigenschaftsProfilBezeichnung
      );
      */
      let baueigenschaftsProfilBezeichnung = "Baustoff"; // Das für diese Variante der Funktion relevante Profil
      let node = this.selectedNodeTreeBaustoffe;
      console.log(
        "node.zugeordneteBaueigenschaftsProfile: ",
        node.zugeordneteBaueigenschaftsProfile
      );
      /*
      if (node.zugeordneteBaueigenschaftsProfile.length > 0) {
        console.log("Check auf Population von baueigenschaftsProfilBezeichnung: ")
        // HINWEIS: Dieses Feld sollte bei korrektem Model und populates in den Controller-Methoden populiert sein, obwohhl das Feld im Brwoser Log
        // nur als object{..} angezeigt wird!!!
        console.log(node.zugeordneteBaueigenschaftsProfile[0].referenzAufBaueigenschaftsProfil.baueigenschaftsProfilBezeichnung)
      };
      */
      if (
        node.zugeordneteBaueigenschaftsProfile.findIndex(
          arg =>
            arg.referenzAufBaueigenschaftsProfil
              .baueigenschaftsProfilBezeichnung ===
            baueigenschaftsProfilBezeichnung
        ) >
        // Siehe https://stackoverflow.com/questions/7176908/how-to-get-index-of-object-by-its-property-in-javascript
        -1
      ) {
        console.log(
          "Vor return true aus istAktiviertBaueigenschaftsProfilBaustoffAnAusgewaehltemBaustoff()"
        );
        return true;
      } else {
        console.log(
          "Vor return false aus istAktiviertBaueigenschaftsProfilBaustoffAnAusgewaehltemBaustoff()"
        );
        return false;
      }
    },

    istAktiviertBaueigenschaftsProfilBaustoffEstrichAnAusgewaehltemBaustoff: function() {
      // Funktion, um festzustellen, ob ein BaueigenschaftsProfil (dessen Bezeichnung wird aus dem Funktkionsnamen ermittelt) aktiviert ist an
      // aktuell ausgewählten Knoten im Baustoffbaum (dieser wird statt des wegfallenden Parameters node genommen)
      // Ursprüngliche Parameter:
      // node, // Parameter: Der im Baustoffbaum ausgewählte Knoten (Verweis auf Baustoff
      // baueigenschaftsProfilBezeichnung // Bezeichnung eines Profils
      console.log(
        "In istAktiviertBaueigenschaftsProfilBaustoffEstrichAnAusgewaehltemBaustoff()"
      );
      /*
      console.log(
        "Parameter baueigenschaftsProfilBezeichnung: ",
        baueigenschaftsProfilBezeichnung
      );
      */
      let baueigenschaftsProfilBezeichnung = "Baustoff > Estrich"; // Das für diese Variante der Funktion relevante Profil
      let node = this.selectedNodeTreeBaustoffe;
      console.log(
        "node.zugeordneteBaueigenschaftsProfile: ",
        node.zugeordneteBaueigenschaftsProfile
      );
      /*
      if (node.zugeordneteBaueigenschaftsProfile.length > 0) {
        console.log("Check auf Population von baueigenschaftsProfilBezeichnung: ")
        // HINWEIS: Dieses Feld sollte bei korrektem Model und populates in den Controller-Methoden populiert sein, obwohhl das Feld im Brwoser Log
        // nur als object{..} angezeigt wird!!!
        console.log(node.zugeordneteBaueigenschaftsProfile[0].referenzAufBaueigenschaftsProfil.baueigenschaftsProfilBezeichnung)
      };
      */
      if (
        node.zugeordneteBaueigenschaftsProfile.findIndex(
          arg =>
            arg.referenzAufBaueigenschaftsProfil
              .baueigenschaftsProfilBezeichnung ===
            baueigenschaftsProfilBezeichnung
        ) >
        // Siehe https://stackoverflow.com/questions/7176908/how-to-get-index-of-object-by-its-property-in-javascript
        -1
      ) {
        console.log(
          "Vor return true aus istAktiviertBaueigenschaftsProfilBaustoffEstrichAnAusgewaehltemBaustoff()"
        );
        return true;
      } else {
        console.log(
          "Vor return false aus istAktiviertBaueigenschaftsProfilBaustoffEstrichAnAusgewaehltemBaustoff()"
        );
        return false;
      }
    },

    istAktiviertBaueigenschaftsProfilAllgemeinTestAnAusgewaehltemBaustoff: function() {
      // Funktion, um festzustellen, ob ein BaueigenschaftsProfil (dessen Bezeichnung wird aus dem Funktkionsnamen ermittelt) aktiviert ist an
      // aktuell ausgewählten Knoten im Baustoffbaum (dieser wird statt des wegfallenden Parameters node genommen)
      // Ursprüngliche Parameter:
      // node, // Parameter: Der im Baustoffbaum ausgewählte Knoten (Verweis auf Baustoff
      // baueigenschaftsProfilBezeichnung // Bezeichnung eines Profils
      console.log(
        "In istAktiviertBaueigenschaftsProfilAllgemeinTestAAnAusgewaehltemBaustoff()"
      );
      /*
      console.log(
        "Parameter baueigenschaftsProfilBezeichnung: ",
        baueigenschaftsProfilBezeichnung
      );
      */
      let baueigenschaftsProfilBezeichnung = "Allgemein > Test > Wertetypen"; // Das für diese Variante der Funktion relevante Profil
      let node = this.selectedNodeTreeBaustoffe;
      console.log(
        "node.zugeordneteBaueigenschaftsProfile: ",
        node.zugeordneteBaueigenschaftsProfile
      );
      /*
      if (node.zugeordneteBaueigenschaftsProfile.length > 0) {
        console.log("Check auf Population von baueigenschaftsProfilBezeichnung: ")
        // HINWEIS: Dieses Feld sollte bei korrektem Model und populates in den Controller-Methoden populiert sein, obwohhl das Feld im Brwoser Log
        // nur als object{..} angezeigt wird!!!
        console.log(node.zugeordneteBaueigenschaftsProfile[0].referenzAufBaueigenschaftsProfil.baueigenschaftsProfilBezeichnung)
      };
      */
      if (
        node.zugeordneteBaueigenschaftsProfile.findIndex(
          arg =>
            arg.referenzAufBaueigenschaftsProfil
              .baueigenschaftsProfilBezeichnung ===
            baueigenschaftsProfilBezeichnung
        ) >
        // Siehe https://stackoverflow.com/questions/7176908/how-to-get-index-of-object-by-its-property-in-javascript
        -1
      ) {
        console.log(
          "Vor return true aus istAktiviertBaueigenschaftsProfilAllgemeinTestAnAusgewaehltemBaustoff()"
        );
        return true;
      } else {
        console.log(
          "Vor return false aus istAktiviertBaueigenschaftsProfilAllgemeinTestAnAusgewaehltemBaustoff()"
        );
        return false;
      }
    },

    //======================================================================================================================================
    // NEU: Computed-Funktionen, die in Abhängigkeit von der Benutzerrolle des angemeldeten Benutzers Labels berechnen oder
    //      Boolean-Werte zum Disablen von Kontextmenü-Einträgen/Buttons/Tabs zurückliefern oder TickStrategy für zugeordnete Rohstoffe
    //--------------------------------------------------------------------------------------------------------------------------------
    computeTickStrategyTreeRohstoffe: function() {
      if (this.benutzerRolleIstMitarbeiter) {
        return "none";
      } else {
        return "strict";
      }
    },

    computeLabelButtonBaueigenschaftAnzeigenOderBearbeiten: function() {
      if (this.benutzerRolleIstMitarbeiter) {
        return "Baueigenschaft anzeigen";
      } else {
        return "Baueigenschaft bearbeiten";
      }
    },

    computeLabelKontextMenueBaueigenschaftAnzeigenOderBearbeiten: function() {
      if (this.benutzerRolleIstMitarbeiter) {
        return "Baueigenschaft auswählen und anzeigen";
      } else {
        return "Baueigenschaft auswählen und bearbeiten";
      }
    },

    benutzerRolleIstMitarbeiter: function() {
      console.log("In benutzerRolleIstMitarbeiter (computed)");
      // console.log("localStore.state.anmeldeDatenBenutzer.benutzerRolle: ", this.localStore.state.anmeldeDatenBenutzer.benutzerRolle);
      if (
        this.localStore.state.anmeldeDatenBenutzer.benutzerRolle ===
        "Mitarbeiter"
      ) {
        return true;
      } else {
        return false;
      }
    },

    computeUploadURL: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property - returned URL für File Upload
      //------------------------------------------------------------------------------------------------------------------------------
      const port = process.env.PORT || 4444;
      console.log("In computeUploadURL (computed)");
      console.log(
        "computeUploadURL: ",
        process.env.fileAPI /* + ":" + port */ + "/Dateien/upload"
      );
      return process.env.fileAPI /* + ":" + port */ + "/Dateien/upload";
    },

    istDefiniertAusgewaehlteBaueigenschaft: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property - schaut, ob in den Input-Feldern Eingabewerte stehen und gibt in diesem Fall true zurück
      //-------------------------------------------------------------------------------------------------------------------------------
      let result;
      switch (
        this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
      ) {
        case "Kennwert":
          if (
            (this.ausgewaehlteBaueigenschaft.kennWert1 === null ||
              this.ausgewaehlteBaueigenschaft.kennWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Kennwertepaar":
          if (
            (this.ausgewaehlteBaueigenschaft.kennWert1 === null ||
              this.ausgewaehlteBaueigenschaft.kennWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.kennWert2 === null ||
              this.ausgewaehlteBaueigenschaft.kennWert2 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Datumswert":
          if (
            (this.ausgewaehlteBaueigenschaft.datumsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.datumsWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Datumswertepaar":
          if (
            (this.ausgewaehlteBaueigenschaft.datumsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.datumsWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.datumsWert2 === null ||
              this.ausgewaehlteBaueigenschaft.datumsWert2 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Tageszeitwert": // NEU
          if (
            (this.ausgewaehlteBaueigenschaft.tagesZeitWert1 === null ||
              this.ausgewaehlteBaueigenschaft.tagesZeitWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Tageszeitwertepaar":
          if (
            (this.ausgewaehlteBaueigenschaft.tagesZeitWert1 === null ||
              this.ausgewaehlteBaueigenschaft.tagesZeitWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.tagesZeitWert2 === null ||
              this.ausgewaehlteBaueigenschaft.tagesZeitWert2 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Bezeichnungswert":
          if (
            this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
            this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === ""
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Bezeichnungswertepaar":
          if (
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Aufzählungswert":
          // console.log("Aufzählungswert");
          if (
            (this.ausgewaehlteBaueigenschaft.aufzaehlungsWert === null ||
              this.ausgewaehlteBaueigenschaft.aufzaehlungsWert === "" ||
              this.ausgewaehlteBaueigenschaft.aufzaehlungsWert.length === 0) && // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Wahrheitswert":
          // ALT: Der Fall, dass der Wahrheitswert leer ist, konnte bisher nicht erkannt werden
          // NEU: Mit der neuesten Quasar Version 1.8+ kann der Toggle bei Boolean auch Zustand "indeterminate", wenn das zugehörige v-model null ist!!!
          console.log("Wahrheitswert");
          if (
            this.ausgewaehlteBaueigenschaft.wahrheitsWert === null && // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
      }
      return result;
    },

    disabledFieldsAusgewaehlteBaueigenschaft: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property
      // Returned Array aus Wertefeldname/Boolean-Paaren, wobei der Boolean-Wert "true" ist, wenn das Feld disabled ist
      //-------------------------------------------------------------------------------------------------------------------------------
      console.log("In disabledFieldsAusgewaehlteBaueigenschaft (computed)");
      if (!this.ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert) {
        return {
          kennWert1: true,
          kennWert2: true,
          datumsWert1: true,
          datumsWert2: true,
          tagesZeitWert1: true,
          tagesZeitWert2: true,
          bezeichnungsWert1: true,
          bezeichnungsWert2: true,
          aufzaehlungsWert: true,
          wahrheitsWert: true,
          symbol: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          einheit: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          operator: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          // NEU:
          formel: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          // NEU:
          sonderzeichen: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          )
        };
      } else {
        return {
          kennWert1: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          kennWert2: !["Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          datumsWert1: !["Datumswert", "Datumswertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          datumsWert2: !["Datumswertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          // Fix für Defect - Tageszeitwert1/2 war nie disabled!!!
          // FALSCH:
          // tagesZeitWert1: false,
          // tagesZeitWert2: false,
          // NEU/RICHTIG:
          tagesZeitWert1: !["Tageszeitwert", "Tageszeitwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          tagesZeitWert2: !["Tageszeitwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),

          // Fix für Defect - Bezeichnungswert1 war disabled!!!
          bezeichnungsWert1: ![
            "Kennwert",
            "Kennwertepaar",
            "Datumswert",
            "Datumswertepaar",
            "Aufzählungswert",
            "Wahrheitswert",
            "Bezeichnungswert", // NEU: FIX
            "Bezeichnungswertepaar" // NEU: FIX
          ].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),

          // Fix für Defect - Bezeichnungswert2 war disabled!!!
          bezeichnungsWert2: ![
            "Kennwertepaar",
            "Datumswertepaar",
            "Bezeichnungswertepaar" // NEU
          ].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          aufzaehlungsWert: !["Aufzählungswert"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          wahrheitsWert: !["Wahrheitswert"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          symbol: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          einheit: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          operator: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          // NEU:
          formel: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          )
        };
      }
    },

    stringifyZugeordneteRohstoffe: function() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Macht Pretty Printing für Debug-Ausgabe
      //----------------------------------------------------------------------------------------------------------------------------
      if (
        globalStore.state.debugMode &&
        this.selectedNodeTreeBaustoffe != null
      ) {
        return JSON.stringify(
          this.selectedNodeTreeBaustoffe.zugeordneteRohstoffe,
          null,
          2
        );
      } else {
        return null;
      }
    },

    stringifyNodesTreeRohstoffe: function() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Macht Pretty Printing für Debug-Ausgabe
      //----------------------------------------------------------------------------------------------------------------------------
      if (globalStore.state.debugMode && this.nodesTreeRohstoffe != null) {
        return JSON.stringify(this.nodesTreeRohstoffe, null, 2);
      } else {
        return null;
      }
    },

    stringifySelectedNodeTreeBaustoffe: function() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Macht Pretty Printing für debug-Ausgabe
      //----------------------------------------------------------------------------------------------------------------------------
      if (
        globalStore.state.debugMode &&
        this.selectedNodeTreeBaustoffe != null
      ) {
        return JSON.stringify(this.selectedNodeTreeBaustoffe, null, 2);
      } else {
        return null;
      }
    },

    // eslint-disable-next-line vue/return-in-computed-property
    selectedKeyTreeBaustoffeIstImRohstoffUnterbaum: function() {
      //----------------------------------------------------------------------------------------------------------------------------
      // computed Property - berechnet, ob der im Baustoffbaum ausgewählte Baustoff im Rohstoffunterbaum ist
      // HINWEIS: Diese Funktion ist nur relevant in baustoffe.vue, wo zugeordnete Rohstoffe für solche Baustoffe verwaltet werden, die nicht
      // zum Rohstoffunterbaum selbst gehören
      // In baueinheiten.vue kann JEDE Baueinheit Verweise auf zugeordnete Baustoffe (ohne Rohstoffe) haben
      //----------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In selectedKeyTreeBaustoffeIstImRohstoffUnterbaum (computed)"
      );

      if (
        this.selectedKeyTreeBaustoffe !== undefined &&
        this.selectedKeyTreeBaustoffe !== null
      ) {
        if (this.selectedNodeTreeBaustoffe.baumKnotenTyp === "Wurzelknoten") {
          return false;
        }
        if (
          this.selectedNodeTreeBaustoffe.baumKnotenTyp ===
          "Rohstoffunterbaumwurzelknoten"
        ) {
          return true;
        }
        // Ansonsten befinden wir uns irgendwo im Baum, und müssen den zweitobersten Knoten im Pfad von oben extrahieren, sofern dieser existiert,
        // und feststellen, ob das der Wurzelknoten des Rohstoffunterbaums ist:
        const arrayOfIdsInPath = this.selectedNodeTreeBaustoffe.path.split("#");
        console.log("arrayOfIdsInPath: ", arrayOfIdsInPath);
        if (arrayOfIdsInPath.length <= 2) {
          return false;
        } // Es handelt sich um einen Kindknoten von Baustoffe (Wurzelknoten des Rohstoffunterbaums wurde oben schon ausgeschlossen)

        // Ansonsten handelt es sich um einen "tiefgelegenen" Kindknoten irgendwo im Baum (Baustoff- oder Rohstoffteil)
        // Nun die id des zweitobersten Knotens im Pfad dieses Kindknotens hernehmen und für diese prüfen, ob dies die des Wurzelknotens des Rohstoffunterbaums ist
        // Dazu ausnutzen, dass ab dem Laden der zweiten Ebene des Baustoffbaums in den Array nodesTreeBaustoffe auch der Wurzelknoten
        // des Rohstoffunterbaums in das Frontend geladen ist - also kommt man ohn Backend Call aus - allerdings ist der Code dafür etwas tricky und abhängig
        // vom genauen Aufbau des Baums und den Bezeichnungen in baumKnotenTyp!

        // Der Rohstoffunterbaumwurzelknoten befindet sich in den children:[ {} ] des ersten Array-Elements (nodesTreeBaustoffe[0].children) und hat u.a.
        // die Felder _id und baumKnotenTyp="Rohstoffunterbaumwwurzelknoten"
        // Die per filter im Unter-Array children gefundene _id des Rohstoffunterbaumwurzelknotens dann vergleichen mit der zweitobersten _id im Pfad (arrayOfIdsInPath[1])

        console.log("Vor filter auf Suche nach Rohstoffunterbaumwurzelknoten!");
        // console.log("nodesTreeBaustoffe: ", this.nodesTreeBaustoffe);
        console.log(
          "nodesTreeBaustoffe[0].children: ",
          this.nodesTreeBaustoffe[0].children
        );
        // ACHTUNG dabei: nodesTreeBaustoffe ist ein Array aus verschachtelten Objekten UND auch children ist ein Array!
        const rohstoffunterbaumWurzelknoten = this.nodesTreeBaustoffe[0].children.filter(
          element => element.baumKnotenTyp === "Rohstoffunterbaumwurzelknoten"
        );
        // ACHTUNG: Resultat von filter ist wieder ein Array!!!
        if (
          rohstoffunterbaumWurzelknoten === null ||
          rohstoffunterbaumWurzelknoten.length > 2
        ) {
          console.log(
            "In selectedKeyTreeBaustoffeIstImRohstoffUnterbaum (computed) - Fehler beim Finden des Rohstoffunterbaumwurzelknotens per Filter im Baustoffbaum!!!"
          );
          return false;
        }
        const idRohstoffunterbaumWurzelknoten =
          rohstoffunterbaumWurzelknoten[0]._id;
        console.log(
          "Nach filter - idRohstoffunterbaumWurzelknoten: ",
          idRohstoffunterbaumWurzelknoten
        );

        // Nun die id des potentiellen Rohstoffunterbaumwurzelknotens ermittteln, zum Vergleich mit der oben ermittelten _id des tatsächlichen:
        const idPotentiellerRohstoffunterbaumWurzelknoten = arrayOfIdsInPath[1]; // Dies ist die _id des zweitobersten Knotens im Pfad
        console.log(
          "idPotentiellerRohstoffunterbaumWurzelknoten: ",
          idPotentiellerRohstoffunterbaumWurzelknoten
        );

        // Nun vergleichen und Resultat zurückgeben:
        if (
          idPotentiellerRohstoffunterbaumWurzelknoten ===
          idRohstoffunterbaumWurzelknoten
        ) {
          return true;
        } else {
          return false;
        }
      } else {
        return false;
      } // Vue computed Funktion muss immer Wert zurückliefern!
    },

    // eslint-disable-next-line vue/return-in-computed-property
    selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum: function() {
      //----------------------------------------------------------------------------------------------------------------------------
      // computed Property - berechnet, ob der im Baustoffbaum ausgewählte Baustoff im Unterbaum für die "Schichtbaustoffe" ist
      // HINWEIS: Diese sind bisher kein offizieller", in der Property baumKnotenTyp unterschiedener Unterbaum, sondern werden
      //          provisorisch über die baustoffBezeichnung "Schichtbaustoffe" identifiziert
      //----------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In selectedKeyTreeBaustoffeIstImSchichtbaustoffunterbaum (computed)"
      );

      if (
        this.selectedKeyTreeBaustoffe !== undefined &&
        this.selectedKeyTreeBaustoffe !== null
      ) {
        if (this.selectedNodeTreeBaustoffe.baumKnotenTyp === "Wurzelknoten") {
          return false;
        }
        if (
          this.selectedNodeTreeBaustoffe.baustoffBezeichnung ===
          "Schichtbaustoffe"
        ) {
          return true;
        }
        // Ansonsten befinden wir uns irgendwo im Baum, und müssen den zweitobersten Knoten im Pfad von oben extrahieren, sofern dieser existiert,
        // und feststellen, ob das der Wurzelknoten des Unterbaums für die Schichtbaustoffe ist:
        const arrayOfIdsInPath = this.selectedNodeTreeBaustoffe.path.split("#");
        console.log("arrayOfIdsInPath: ", arrayOfIdsInPath);
        if (arrayOfIdsInPath.length <= 2) {
          return false;
        } // Es handelt sich um einen Kindknoten von Baustoffe (Wurzelknoten des Unterbaums für die Schichtbaustoffe wurde oben schon ausgeschlossen)

        // Ansonsten handelt es sich um einen "tiefgelegenen" Kindknoten irgendwo im Baum (Baustoff- oder Rohstoffteil)
        // Nun die id des zweitobersten Knotens im Pfad dieses Kindknotens hernehmen und für diese prüfen, ob dies die des Wurzelknotens des Unterbaums für die Schichtbaustoffe ist
        // Dazu ausnutzen, dass ab dem Laden der zweiten Ebene des Baustoffbaums in den Array nodesTreeBaustoffe auch der Wurzelknoten
        // des Unterbaums für die Schichtbaustoffe in das Frontend geladen ist - also kommt man ohn Backend Call aus - allerdings ist der Code dafür etwas tricky und abhängig
        // vom genauen Aufbau des Baums und den Bezeichnungen der beteiligten Baustoffe!

        // Der Schichtbaustoffunterbaumwurzelknoten befindet sich in den children:[ {} ] des ersten Array-Elements (nodesTreeBaustoffe[0].children) und hat u.a.
        // die Felder _id und baustoffBezeichnung="Schichtbaustoffe"
        // Die per filter im Unter-Array children gefundene _id des Schichtbaustoffunterbaumwurzelknotens dann vergleichen mit der zweitobersten _id im Pfad (arrayOfIdsInPath[1])

        console.log(
          "Vor filter auf Suche nach Wurzelknoten des Unterbaums für die Schichtbaustoffe!"
        );
        // console.log("nodesTreeBaustoffe: ", this.nodesTreeBaustoffe);
        console.log(
          "nodesTreeBaustoffe[0].children: ",
          this.nodesTreeBaustoffe[0].children
        );
        // ACHTUNG dabei: nodesTreeBaustoffe ist ein Array aus verschachtelten Objekten UND auch children ist ein Array!
        const schichtBaustoffUnterbaumWurzelknoten = this.nodesTreeBaustoffe[0].children.filter(
          element => element.baustoffBezeichnung === "Schichtbaustoffe"
        );
        // ACHTUNG: Resultat von filter ist wieder ein Array!!!
        if (
          schichtBaustoffUnterbaumWurzelknoten === null ||
          schichtBaustoffUnterbaumWurzelknoten.length > 2
        ) {
          console.log(
            "In selectedKeyTreeBaustoffeIstImSchichtbaustoffUnterbaum (computed) - Fehler beim Finden des Schichtbaustoffunterbaumwurzelknotens per Filter im Baustoffbaum!!!"
          );
          return false;
        }
        const idSchichtbaustoffUnterbaumWurzelknoten =
          schichtBaustoffUnterbaumWurzelknoten[0]._id;
        console.log(
          "Nach filter - idSchichtbaustoffUnterbaumWurzelknoten: ",
          idSchichtbaustoffUnterbaumWurzelknoten
        );

        // Nun die id des potentiellen Schichtbaustoffunterbaumwurzelknotens ermittteln, zum Vergleich mit der oben ermittelten _id des tatsächlichen:
        const idPotentiellerSchichtbaustoffunterbaumWurzelknoten =
          arrayOfIdsInPath[1]; // Dies ist die _id des zweitobersten Knotens im Pfad
        console.log(
          "idPotentiellerSchichtbaustoffunterbaumWurzelknoten: ",
          idPotentiellerSchichtbaustoffunterbaumWurzelknoten
        );

        // Nun vergleichen und Resultat zurückgeben:
        if (
          idPotentiellerSchichtbaustoffunterbaumWurzelknoten ===
          idSchichtbaustoffUnterbaumWurzelknoten
        ) {
          return true;
        } else {
          return false;
        }
      } else {
        return false;
      } // Vue computed Funktion muss immer Wert zurückliefern!
    },

    // eslint-disable-next-line vue/return-in-computed-property
    selectedKeyTreeBaustoffeIstImBauelementUnterbaum: function() {
      //----------------------------------------------------------------------------------------------------------------------------
      // computed Property - berechnet, ob der im Baustoffbaum ausgewählte Baustoff im Unterbaum für die "Bauelemente" ist
      // HINWEIS: Diese sind bisher kein offizieller", in der Property baumKnotenTyp unterschiedener Unterbaum, sondern werden
      //          provisorisch über die baustoffBezeichnung "Bauelemente" identifiziert
      //----------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In selectedKeyTreeBaustoffeIstImBauelementunterbaum (computed)"
      );

      if (
        this.selectedKeyTreeBaustoffe !== undefined &&
        this.selectedKeyTreeBaustoffe !== null
      ) {
        if (this.selectedNodeTreeBaustoffe.baumKnotenTyp === "Wurzelknoten") {
          return false;
        }
        if (
          this.selectedNodeTreeBaustoffe.baustoffBezeichnung === "Bauelemente"
        ) {
          return true;
        }
        // Ansonsten befinden wir uns irgendwo im Baum, und müssen den zweitobersten Knoten im Pfad von oben extrahieren, sofern dieser existiert,
        // und feststellen, ob das der Wurzelknoten des Unterbaums für die Bauelemente ist:
        const arrayOfIdsInPath = this.selectedNodeTreeBaustoffe.path.split("#");
        console.log("arrayOfIdsInPath: ", arrayOfIdsInPath);
        if (arrayOfIdsInPath.length <= 2) {
          return false;
        } // Es handelt sich um einen Kindknoten von Baustoffe (Wurzelknoten des Unterbaums für die Bauelemente wurde oben schon ausgeschlossen)

        // Ansonsten handelt es sich um einen "tiefgelegenen" Kindknoten irgendwo im Baum (Baustoff- oder Rohstoffteil)
        // Nun die id des zweitobersten Knotens im Pfad dieses Kindknotens hernehmen und für diese prüfen, ob dies die des Wurzelknotens des Unterbaums für die Bauelemente ist
        // Dazu ausnutzen, dass ab dem Laden der zweiten Ebene des Baustoffbaums in den Array nodesTreeBaustoffe auch der Wurzelknoten
        // des Unterbaums für die Bauelemente in das Frontend geladen ist - also kommt man ohn Backend Call aus - allerdings ist der Code dafür etwas tricky und abhängig
        // vom genauen Aufbau des Baums und den Bezeichnungen der beteiligten Baustoffe!

        // Der Bauelementunterbaumwurzelknoten befindet sich in den children:[ {} ] des ersten Array-Elements (nodesTreeBaustoffe[0].children) und hat u.a.
        // die Felder _id und baustoffBezeichnung="Bauelemente"
        // Die per filter im Unter-Array children gefundene _id des Bauelementunterbaumwurzelknotens dann vergleichen mit der zweitobersten _id im Pfad (arrayOfIdsInPath[1])

        console.log(
          "Vor filter auf Suche nach Wurzelknoten des Unterbaums für die Bauelemente!"
        );
        // console.log("nodesTreeBaustoffe: ", this.nodesTreeBaustoffe);
        console.log(
          "nodesTreeBaustoffe[0].children: ",
          this.nodesTreeBaustoffe[0].children
        );
        // ACHTUNG dabei: nodesTreeBaustoffe ist ein Array aus verschachtelten Objekten UND auch children ist ein Array!
        const bauElementUnterbaumWurzelknoten = this.nodesTreeBaustoffe[0].children.filter(
          element => element.baustoffBezeichnung === "Bauelemente"
        );
        // ACHTUNG: Resultat von filter ist wieder ein Array!!!
        if (
          bauElementUnterbaumWurzelknoten === null ||
          bauElementUnterbaumWurzelknoten.length > 2
        ) {
          console.log(
            "In selectedKeyTreeBaustoffeIstImBauelementUnterbaum (computed) - Fehler beim Finden des Schichtbaustoffunterbaumwurzelknotens per Filter im Baustoffbaum!!!"
          );
          return false;
        }
        const idBauelementUnterbaumWurzelknoten =
          bauElementUnterbaumWurzelknoten[0]._id;
        console.log(
          "Nach filter - idBauelementUnterbaumWurzelknoten: ",
          idBauelementUnterbaumWurzelknoten
        );

        // Nun die id des potentiellen Bauelementunterbaumwurzelknotens ermittteln, zum Vergleich mit der oben ermittelten _id des tatsächlichen:
        const idPotentiellerBauelementUnterbaumWurzelknoten =
          arrayOfIdsInPath[1]; // Dies ist die _id des zweitobersten Knotens im Pfad
        console.log(
          "idPotentiellerBauelementUnterbaumWurzelknoten: ",
          idPotentiellerBauelementUnterbaumWurzelknoten
        );

        // Nun vergleichen und Resultat zurückgeben:
        if (
          idPotentiellerBauelementUnterbaumWurzelknoten ===
          idBauelementUnterbaumWurzelknoten
        ) {
          return true;
        } else {
          return false;
        }
      } else {
        return false;
      } // Vue computed Funktion muss immer Wert zurückliefern!
    },

    selectedNodeTreeBaustoffe: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property - liefert den aktuell im Baustoffbaum selektierten Knoten (node) zurück
      // ACHTUNG: War temporär nach data() verschoben wegen Timing-Problem - führte jedoch zu massiven anderen Problemen, daher wieder computed
      //-------------------------------------------------------------------------------------------------------------------------------
      /*
      console.log("In selectedNodeTreeBaustoffe (computed)");
        console.log(
          "selectedKeyTreeBaustoffe: ",
          this.selectedKeyTreeBaustoffe
      );
      */
      // Workaround für Problem, wenn obiges Console Logging per uglifyOptions oder durch Auskommentierung entfällt -
      // es tritt dann ein Timing-Problem auf, dass offenbar die undefined-Abfrage unten noch true ist und daher die computed
      // Funktion undefined zurückliefert - dann rendered das ganze Template rechts vom QSplitter NICHT mehr!!!
      // Asynchrones sleep ist in computed nicht erlaubt, daher eigene Schleife für Verzögerung:
      /*
      let j=0;
        for (let i=0; i<100000; i++) {
        j = j+1;
      };
      */
      // Dies funktioniert jedoch NICHT - stattdessen unten Pseudozugriff per helper auf this.selectedKeyTreeBaustoffe - beeinflusst vermutlich
      // das Timing und die Reihenfolge der Initialisierungen dieser Variablen/computed Funktionen - funktionierte, aber fragil
      // Obige console.logs sicherheitshalber disabled, werden nicht unbedingt benötigt
      let helper = this.selectedKeyTreeBaustoffe; // WICHTIG: Für Zeitverögerung!!!
      if (this.$refs.treeBaustoffe !== undefined) {
        try {
          return this.$refs.treeBaustoffe.getNodeByKey(
            this.selectedKeyTreeBaustoffe
          );
        } catch {
          return null;
        }
      } else {
        return undefined;
      }
    },

    nothingSelectedInTableBaueigenschaften: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property - liefert 'true', wenn keine Baueigenschaft in q-table ausgewählt ist,
      // regelt das Disablen von Buttons für "Auswahl"-Tab
      //-------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBaueigenschaften.length > 0) {
        return false;
      } else {
        return true;
      }
    },

    //---------------------------------------------------------------------------------------------------------------------------------
    // Computed Properties für q-table für zugeordnete Bauinformationen:
    //---------------------------------------------------------------------------------------------------------------------------------
    computeExternerLinkTableBauinformationen: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zum Disablen des Buttons für externen Link im Tab "Zugeordnete Bauinformationen"
      //---------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        return true;
      }
      if (
        this.selectedRowsTableBauinformationen[0].externerLink === undefined ||
        this.selectedRowsTableBauinformationen[0].externerLink === null
      ) {
        return true;
      }
      return false;
    },

    computeOneDriveLinkTableBauinformationen: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zum Disablen des Buttons für OneDrive-Link im Tab "Zugeordnete Bauinformationen"
      //---------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        return true;
      }
      if (
        this.selectedRowsTableBauinformationen[0].oneDriveLink === undefined ||
        this.selectedRowsTableBauinformationen[0].oneDriveLink === null
      ) {
        return true;
      }
      return false;
    },

    computeInternerLinkTableBauinformationen: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zum Disablen des Buttons für internen Link im Tab "Zugeordnete Bauinformationen"
      //---------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        return true;
      }
      if (
        this.selectedRowsTableBauinformationen[0].internerLink === undefined ||
        this.selectedRowsTableBauinformationen[0].internerLink === null
      ) {
        return true;
      }
      return false;
    },

    computeSelectedRowsTableBauinformationen: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zum Disablen der Buttons unter der QTable, wenn keine Bauinformation ausgewählt ist
      //---------------------------------------------------------------------------------------------------------------------------------
      return this.selectedRowsTableBauinformationen.length === 0; // return "true", falls nichts ausgewählt ist
    },

    getSelectedExternerLinkTableBauinformationen: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zur Berechnung des externen Links in der ausgewählten Bauinformation in der Tabelle im Tab "Übersicht"
      //---------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        return;
      }
      if (
        this.selectedRowsTableBauinformationen[0].externerLink === undefined
      ) {
        return;
      }
      return this.selectedRowsTableBauinformationen[0].externerLink; // URL-Feld im 1. Eintrag in den selektierten Rows
    },

    getSelectedOneDriveLinkTableBauinformationen: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zur Berechnung des OneDrive-Links in der ausgewählten Bauinformation in der Tabelle im Tab "Übersicht"
      //---------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        return;
      }
      if (this.selectedRowsTableBauinformationen[0].oneDriveLink == null) {
        return;
      }
      return this.selectedRowsTableBauinformationen[0].oneDriveLink; // URL-Feld im 1. Eintrag in den selektierten Rows
    },

    getSelectedInternerLinkTableBauinformationen: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zur Berechnung des internen Links in der ausgewählten Bauinformation in der Tabelle im Tab "Übersicht"
      //---------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        return;
      }
      if (
        this.selectedRowsTableBauinformationen[0].internerLink === undefined
      ) {
        return;
      }
      console.log(
        "In getSelectedInternerLinkTableBauinformationen (computed) - selectedRowsTableBauinformationen[0].internerLink: ",
        this.selectedRowsTableBauinformationen[0].internerLink
      );
      return (
        // Hier gemäß https://stackoverflow.com/questions/35744597/how-to-link-pages-in-node testen:
        // a) href mit Link auf Heroku Route, die File aus dem tmp Directory per sendfile an den Browser schickt
        // b) href mit Link auf die File im tmp Directory auf Heroku und express.static für das tmp Directory

        // a) FUNKTIONIERT per Test!
        // "https://bimclickserver.herokuapp.com/sendfile" // ACHTUNG: https:// ist notwendig, sonst prefixed href es mit einer lokalen URL!!!

        // b) FUNKTIONERT per Test!
        // "https://bimclickserver.herokuapp.com/parkplatz.gif" // ACHTUNG: https:// ist notwendig, sonst prefixed href es mit einer lokalen URL!!!

        // Bisheriger Code für den lokalen Fall - temporär wieder enabled
        // SEHR ALT: "http://localhost:4200/" +
        // ACHTUNG: Ohne Origin "http://" öffnet sich zwar das Browser-Tab mit der URL, aber das PDF wird erst bei Refresh geladen!!!
        // ALT: process.env.ownURL +
        // NEU:
        process.env.fileAPI +
        "/" +
        // ACHTUNG: Ohne Origin "http://" öffnet sich zwar das Browser-Tab mit der URL, aber das PDF wird erst bei Refresh geladen!!!
        this.selectedRowsTableBauinformationen[0].internerLink
      ); // URL-Feld im 1. Eintrag in den selektierten Rows
    },

    istDefiniertNeueBaueigenschaft: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property - schaut, ob in den Input-Feldern Eingabewerte stehen und gibt in diesem Fall true zurück
      //-------------------------------------------------------------------------------------------------------------------------------
      let result;
      switch (this.neueBaueigenschaft.typbezogeneBaueigenschaft.werteTyp) {
        case "Kennwert":
          if (
            (this.neueBaueigenschaft.kennWert1 === null ||
              this.neueBaueigenschaft.kennWert1 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Kennwertepaar":
          if (
            (this.neueBaueigenschaft.kennWert1 === null ||
              this.neueBaueigenschaft.kennWert1 === "") &&
            (this.neueBaueigenschaft.kennWert2 === null ||
              this.neueBaueigenschaft.kennWert2 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert2 === null ||
              this.neueBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Datumswert":
          if (
            (this.neueBaueigenschaft.datumsWert1 === null ||
              this.neueBaueigenschaft.datumsWert1 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Datumswertepaar":
          if (
            (this.neueBaueigenschaft.datumsWert1 === null ||
              this.neueBaueigenschaft.datumsWert1 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.neueBaueigenschaft.datumsWert2 === null ||
              this.neueBaueigenschaft.datumsWert2 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert2 === null ||
              this.neueBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Tageszeitwert": // NEU
          if (
            (this.neueBaueigenschaft.tagesZeitWert1 === null ||
              this.neueBaueigenschaft.tagesZeitWert1 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Tageszeitwertepaar":
          if (
            (this.neueBaueigenschaft.tagesZeitWert1 === null ||
              this.neueBaueigenschaft.tagesZeitWert1 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.neueBaueigenschaft.tagesZeitWert2 === null ||
              this.neueBaueigenschaft.tagesZeitWert2 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert2 === null ||
              this.neueBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Bezeichnungswert":
          if (
            this.neueBaueigenschaft.bezeichnungsWert1 === null ||
            this.neueBaueigenschaft.bezeichnungsWert1 === ""
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Bezeichnungswertepaar":
          if (
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert2 === null ||
              this.neueBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Aufzählungswert":
          // console.log("Aufzählungswert");
          if (
            (this.neueBaueigenschaft.aufzaehlungsWert === null ||
              this.neueBaueigenschaft.aufzaehlungsWert === "" ||
              this.neueBaueigenschaft.aufzaehlungsWert.length === 0) && // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Wahrheitswert":
          // ALT: Der Fall, dass der Wahrheitswert leer ist, konnte bisher nicht erkannt werden
          // NEU: Mit der neuesten Quasar Version 1.8+ kann der Toggle bei Boolean auch Zustand "indeterminate", wenn das zugehörige v-model null ist!!!
          // console.log("Wahrheitswert");
          if (
            this.neueBaueigenschaft.wahrheitsWert === null && // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
      }
      return result;
    },

    disabledFieldsNeueBaueigenschaft: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property für Disabling der Wertefelder im Tab Baueigenschaften/Neu
      //-------------------------------------------------------------------------------------------------------------------------------
      console.log("In disabledFieldsNeueBaueigenschaft (computed)");
      let result = {};
      result.kennWert1 = true;
      result.kennWert2 = true;
      result.datumsWert1 = true;
      result.datumsWert2 = true;
      result.tagesZeitWert1 = true; // NEU
      result.tagesZeitWert2 = true; // NEU
      result.bezeichnungsWert1 = true;
      result.bezeichnungsWert2 = true;
      result.aufzaehlungsWert = true;
      result.wahrheitsWert = true;
      // Fix für Backlog Item #117: Folgende 4 Felder plus das QSelectfür Sonderzeichen sind typbezogene Felder - hier NICHT disablen! Daher unten auskommentert.
      // Sollten auch ohne Aktivierung editierbar sein, allerdings nur bei Wertetyp "Kennwert" oder "Kennwertepaar"
      /*
      result.symbol = true;
      result.einheit = true;
      result.operator = true;
      result.formel = true; // NEU
      result.sonderzeichen = true; // NEU

      */
      if (this.neueBaueigenschaft.aktiviertNichtDeaktiviert) {
        // Aktivierung
        if (!this.suppressNotificationNeuTabBaueigenschaften) {
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.AKTIVIERUNG_AUSGELOEST_WERTEEINGABE_MOEGLICH
          );
        }
        var arg = this.neueBaueigenschaft.typbezogeneBaueigenschaft.werteTyp;
        // Enable nur zum werteTyp passende Felder:
        switch (arg) {
          case "Kennwert":
            result.kennWert1 = false;
            result.bezeichnungsWert1 = false;
            result.symbol = false;
            result.einheit = false;
            result.operator = false;
            result.formel = false; // NEU
            result.sonderzeichen = false; // NEU
            break;
          case "Kennwertepaar":
            result.kennWert1 = false;
            result.kennWert2 = false;
            result.bezeichnungsWert1 = false;
            result.bezeichnungsWert2 = false;
            result.symbol = false;
            result.einheit = false;
            result.operator = false;
            result.formel = false; // NEU
            result.sonderzeichen = false; // NEU
            break;
          case "Datumswert":
            result.datumsWert1 = false;
            result.bezeichnungsWert1 = false;
            break;
          case "Datumswertepaar":
            result.datumsWert1 = false;
            result.datumsWert2 = false;
            result.bezeichnungsWert1 = false;
            result.bezeichnungsWert2 = false;
            break;
          case "Tageszeitwert":
            result.tagesZeitWert1 = false;
            result.bezeichnungsWert1 = false;
            break;
          case "Tageszeitwertepaar":
            result.tagesZeitWert1 = false;
            result.tagesZeitWert2 = false;
            result.bezeichnungsWert1 = false;
            result.bezeichnungsWert2 = false;
            break;
          case "Bezeichnungswert":
            result.bezeichnungsWert1 = false;
            break;
          case "Bezeichnungswertepaar":
            result.bezeichnungsWert1 = false;
            result.bezeichnungsWert2 = false;
            break;
          case "Aufzählungswert":
            result.bezeichnungsWert1 = false; // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            result.aufzaehlungsWert = false;
            break;
          case "Wahrheitswert":
            result.bezeichnungsWert1 = false; // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            result.wahrheitsWert = false;
            break;
        }
      } else {
        // Deaktivierung =>
        if (
          this.neueBaueigenschaft.typbezogeneBaueigenschaft.werteTyp ===
          "Aufzählungswert"
        ) {
          result.aufzaehlungsWert = false;
        }
      }
      return result;
    }
  }, // /computed:

  //***==============================================================================================================================================
  watch: {
    //-----------------------------------------------------------------------------------------------------------------------------------------------
    selectedKeyTreeBaustoffe: function(value) {
      //------------------------------------------------------------------------------------------------------------------------------------------------
      // Watch-Funktion, für Aktionen, wenn sich selectedKeyTreeBaustoffe ändert
      //------------------------------------------------------------------------------------------------------------------------------------------------
      this.ausgewaehlteBaueigenschaft = null;
      this.tabBaueigenschaften = "uebersichtTabBaueigenschaften";

      console.log("In selectedKeyTreeBaustoffe(value) (watch)");
      console.log("Parameter value: ", value);
      console.log("selectedKeyTreeBaustoffe: ", this.selectedKeyTreeBaustoffe);

      if (this.selectedKeyTreeBaustoffe != null) {
        // Die folgenden Aktionen werden NUR wenn ein Knoten im Baum selektiert ist, ausgeführt, NICHT, wenn gar nichts selektiert ist!
        //-----------------------------------------------------------------------------------------------------------------------------
        // ALT - verlagert aus computed() wegen Timing-Problem dort - führte zu anderen massiven Problemen, daher wieder disabled
        // console.log("$refs: ", this.$refs)
        /*
        if (this.$refs.treeBaustoffe !== undefined) {
          try {
            this.selectedNodeTreeBaustoffe = this.$refs.treeBaustoffe.getNodeByKey(
              this.selectedKeyTreeBaustoffe
            );
          } catch {
            this.selectedNodeTreeBaustoffe = null;
          }
        } else {
          this.selectedNodeTreeBaustoffe = undefined;
        }
        console.log(
          "selectedNodeTreeBaustoffe: ",
          this.selectedNodeTreeBaustoffe
        );
        if (
          this.selectedNodeTreeBaustoffe == null ||
          this.selectedNodeTreeBaustoffe === undefined
        ) {
          console.log(
            "ACHTUNG: Schwerwiegender Fehler in selectedNodeTreeBaustoff - null oder undefined"
          );
        }
        */
        // TODO - Bei null nicht weitermachen, sollte aber nicht vorkommen!!!
        //------------------------------------------------------------------------------------------------------------------------------
        // Update der ausgewählten Zeile in der Table für Baueigenschaften mit aktuellem Wert der Baueigenschaft aus dem selectedNodeTreeBaustoffe
        if (this.selectedRowsTableBaueigenschaften.length > 0) {
          const selectedKeyTable = this.selectedRowsTableBaueigenschaften[0]
            .typbezogeneBaueigenschaft.baueigenschaftsBezeichnung;
          // if (this.$refs.tableBaueigenschaften !== undefined) {
          //   this.$refs.tableBaueigenschaften.clearSelection();
          this.selectedRowsTableBaueigenschaften[0] = this.selectedNodeTreeBaustoffe.baueigenschaften.find(
            baueigenschaft => {
              return (
                baueigenschaft.typbezogeneBaueigenschaft
                  .baueigenschaftsBezeichnung === selectedKeyTable
              );
            }
          );
        }
        console.log(
          "Vor Zugriff auf selectedNodeTreeBaustoffe.baustoffBeschreibung"
        );
        // console.log("selectedNodeTreeBaustoffe: ", this.selectedNodeTreeBaustoffe);
        //-------------------------------------------------------------------------------------------------------------------------
        // NEU: Für Markdown-Anzeige in my-layout.vue im rechten Drawer per reaktivem Update über global Store:
        globalStore.setBaustoffBeschreibungAusgewaehlterBaustoff(
          this.selectedNodeTreeBaustoffe.baustoffBeschreibung
        );
        // Mutated global Store und triggered reaktiven Update von localStore.state.baustoffBeschreibungAusgewaehlterBaustoff in MyLayout.vue!
        // Alternativ funktioniert auch:
        // this.localStore.setBaustoffBeschreibungAusgewaehlterBaustoff(this.selectedNodeTreeBaustoffe.baustoffBeschreibung);
        globalStore.setBaustoffBezeichnungAusgewaehlterBaustoff(
          this.selectedNodeTreeBaustoffe.baustoffBezeichnung
        );
        //---------------------------------------------------------------------------------------------------------------------------
        // NEU: selectModelBauinformationenAusgewaehlterBaustoff neu initialisieren für das Tab "Zugeordnete Bauinformationen":
        this.selectModelBauinformationenAusgewaehlterBaustoff = this.selectedNodeTreeBaustoffe.zugeordneteBauinformationen; // selectedNodeTreeBaustoffe ist computed!
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectModelBauinformationenAusgewaehlterBaustoff hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        /*
        console.log(
          "selectModelBauinformationenAusgewaehlterBaustoff: ",
          this.selectModelBauinformationenAusgewaehlterBaustoff
        );
        */
        //---------------------------------------------------------------------------------------------------------------------------
        // NEU: Select Models neu initialisieren für die Tabs "Details zur ausgewählten Baueigenschaft" und "Neuanlage einer Baueigenschaft"
        this.selectModelSonderzeichenAusgewaehlteBaueigenschaft = null;
        this.selectModelSonderzeichenNeueBaueigenschaft = null;
        //---------------------------------------------------------------------------------------------------------------------------
        // NEU: Rohstoffbaum initialisieren für das Tab "Zugeordnete Rohstoffe":
        // ACHTUNG: Die Funktion wird eventuell doppelt ausgeführt, da auch bei Initialisierung des Tabs loadTreeRohstoffe(true) gerufen wird
        //          Dies stellte sich allerdings als nötig heraus, da sowohl bei Anwahl von "zugeordnete Rohstoffe" über das Tab, als
        //          auch bei Neu-Auswahl eines Knotens im Baum BEI AUSWGEWÄHLTEM TAB "zugeordnete Rohstoffe" die zugeordneten Rohstoffe aktualisiert
        //          werden müssen!!!
        // this.loadTreeRohstoffe(false); // ALT
        this.loadTreeRohstoffe(true); // 15.04.20 @sts // NEU - Aufruf hier ist notwendig!
        // ACHTUNG: Bei Aufruf mit (false), werden, wenn aktuell das Tab "Zugeordnete Rohstoffe" bereits angewählt ist, und ein neuer Knoten im
        // Baum ausgewählt wird, die zugeordneten Rohstoffe für den neu ausgewählten Knoten NICHT angezeigt, sondern weiterhin die des bisher ausgewählten
        // Knotens - Fehler!!!
        console.log("selectedKeyTreeBaustoffe wurde gesetzt");
      } else {
        console.log("selectedKEyTreeBaustoffe wurde abgewählt");
        this.selectedNodeTreeBaustoffe = null; // Derzeit disabled im QTree - trotzdem notwendig for future Use
      }
      //---------------------------------------------------------------------------------------------------------------------------
      // NEU - #400: selectedKeyTreeBaueinheiten auch in localStorage abspeichern - auch wenn er abgewählt wurde (d.h. auf null gesetzt wurde)
      // TODO XXXXXX: Auch in Benutzereinstellungen speichern, damit sie auch nach Abmeldung dort erhalten bleiben
      localStorage.setItem(
        "selectedKeyTreeBaustoffe",
        this.selectedKeyTreeBaustoffe
      );
      globalStore.changeSelectedKeyTreeBaustoffe(this.selectedKeyTreeBaustoffe); // Diesen auch in global Store speichern
      // Nun zusätzlich den Wert auch in den Benutzereinstellungen speichern per Backend-Call, damit auch noch nach einer Abmeldung der Wert erhalten bleibt:
      // Rufe dazu die Hilfsfunktion updateBenutzer() in methods():
      this.updateBenutzer(value);
    }
  }, // /watch:

  //***========================================================================================================================================
  mounted: async function() {
    //---------------------------------------------------------------------------------------------------------------------------------
    // Mounted-Funktion, für Initialisierungen beim Laden der Komponente
    console.log("In mounted() von baustoffe.vue");

    // NEU: JWT Header setzen für Axios Calls an das Backend:
    const myJWTToken = localStorage.getItem("jwtToken");
    console.log("Token geholt");
    // console.log("jwtToken: ", myJWTToken); // Disabled aus Security-Gründen
    // Set Authorization Header mit JWT Token aus localStorage für den nachfolgenden Axios Call für secure Route
    // Vorlage: https://www.djamware.com/post/5ac8338780aca714d19d5b9e/securing-mevn-stack-vuejs-2-web-application-using-passport
    this.$axios.defaults.headers.common["Authorization"] =
      "bearer " + myJWTToken;
    //----------------------------------------------------------------------------------------------------------------------------------------
    // Weiter geht es in mounted():
    // NEU - #400: Baum bis zu gespeichertem zuletzt ausgewählten selected Key laden, mit den Knoten auf dem Pfad vom Wurzelknoten bis zu diesem Knoten, inklusive seiner Kindknoten, expandiert per neuem API
    // Zunächst selectedKeyTreeBaustoffe aus dem local (Browser) Store oder dem global Store (localStore.state) holen (ist per Design unten vermutlich gleichwertig/egal) und prüfen, ob nicht null. Bei null den Wurzelknoten laden wie ohne #400!
    // HINWEIS: my-layout.created() sorgt dafür, dass auch nach einem Refresh die in local (Browser) Storage ebenfalls vorgehaltenen Werte nach global Store kopiert werden!
    //-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    // HINWEISE zu allen benutzerspezifischen Einstellungen/Werten, zu denen auch mit #400 nun auch selectedKeyTreeBaueinheiten und selectedKeyTreeBaustoffe gehören:
    // - In my-layout.vue werden bei Anmeldung eines Benutzers alle solchen Werte aus den Benutzereinstellungen aus der Datenbank in den local (Browser) Storage UND den global (BIM.click Frontend) Store kopiert
    // - In local Storage werden sie zusätzlich vorgehalten, damit sie auch noch nach einem Refresh verfügbar sind
    // - Nach einem Refresh werden sie in my-layout.created() aus local Storage wieder in den global Store "dupliziert" (falls nicht ein Sicherheits-Timeout von aktuell 12 Stunden zuschlägt, sonst wird Neu-Anmeldung erzwungen)
    // - Wenn eine solche Benutzereinstellung aktualisiert wird, muss sie direkt per API (benutzer.controller.updateBenutzer()) an das Backend übermittelt werden, sonst wird sie "vergessen"!
    // - Das passiert bei vielen solchen Einstellungen im Tab "Einstellungen"
    // - Bei den in den Benutzereinstellungen gespeicherten Werten selectedKeyTreeBaueinheiten und selectedKeyTreeBaustoffe muss diese Aktualisierung allerdings bei jeder Änderung dieser
    //   Werte erfolgen, in den watch()-Funktionen dafür in baueinheiten.vue und baustoffe.vue
    //-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    const lastSelectedKeyTreeBaustoffe = localStorage.getItem(
      "selectedKeyTreeBaustoffe"
    );
    console.log("lastSelectedKeyTreeBaustoffe: ", lastSelectedKeyTreeBaustoffe); // ACHTUNG: Kann String mit Wert "null" sein!?!
    // console.log("typeof lastSelectedKeyTreeBaustoffe: ", typeof lastSelectedKeyTreeBaustoffe) // string
    // globalStore.changeSelectedKeyTreeBaustoffe(lastSelectedKeyTreeBaustoffe) // Diesen auch in global Store speichern - hier überflüssig, wird in my-layout.vue erledigt und in watch() für selectedKeyTreeBaustoffe
    //=============================================================================================================================================
    // ACHTUNG: Es funktioniert warum auch immer nur mit der folgenden kryptischen null-Abfrage!!!
    //          Außerdem darf hier nicht sofort selectedKeyTreeBaustoffe aktualisiert werden, sondern erst nach Neu-Aufbau des Baums!!!
    if (
      lastSelectedKeyTreeBaustoffe != null &&
      lastSelectedKeyTreeBaustoffe !== "null"
    ) {
      // if (lastSelectedKeyTreeBaustoffe != null) { // ACHTUNG: Führt zu Fehler, dass trotz "null" loadLastSelectedNodeTreeBaustoffe() aufgerufen wird!
      //=============================================================================================================================================
      let resultAusLoadLastSelectedNode = await this.loadLastSelectedNodeTreeBaustoffe( // NEU: Resultat (String) abfragen
        lastSelectedKeyTreeBaustoffe
      ); // NEU - #400
      //=============================================================================================================================================
      // ACHTUNG: Hier unbedingt await, und erst danach die Aktualisierungen von selectedKeyTreeBaustoffe und expandedKeysTreeBaustoffe, sonst
      //          gibt es Race Conditions/Timing Probleme!!!
      //=============================================================================================================================================
      // Nun (NACH dem Neu-Laden des Baums) selectedKeyTreeBaustoffe aktualisieren mit dem neuen Wert:
      if (resultAusLoadLastSelectedNode === "lastSelectedNode") {
        this.selectedKeyTreeBaustoffe = lastSelectedKeyTreeBaustoffe;
        // Nun die expanded Keys aus dem Pfad von selectedNodeTreeBaustoffe ermitteln (computed)
        // HINWEIS: Die Property "path" enthält die ids aller Knoten im Pfad vom Wurzelknoten bis inklusive des gelöschten Knotens, getrennt durch "#"
        // HINWEIS: Als weitere Alternative könnte man diese auch im oben in loadLastSelectedNodeTreeBaustoffe() aufgerufenen API am Backend aus dem Pfad ermitteln und im Response Body mitschicken
        //------------------------------------------------------------------------------------------------
        // Alternative 1:
        this.expandedKeysTreeBaustoffe = this.selectedNodeTreeBaustoffe.path // computed-Wert
          .split("#");
        //------------------------------------------------------------------------------------------------
        // Alternative 2 - funktioniert auch, aber disabled, da komplexer:
        /*
        this.expandedKeysTreeBaustoffe = this.$refs.treeBaustoffe
          .getNodeByKey(lastSelectedKeyTreeBaustoffe) // QTree API Methode
          .path.split("#");
        */
      } // else {} // resultAusLastSelectedNode ist "rootNode", d.h. es wurde der Root Node geladen - dann ist nichts weiter zu tun
      //---------------------------------------------------------------------------------------------------------------------------
    } else {
      this.loadRootNodeTreeBaustoffe(); // Wie bisher ohne #400 - HINWEIS: Hier kein await, da keine Folgeaktionen darauf warten
    }
  } // /mounted:
};
</script>

<!--***====================================================================================================================================-->
<!-- CSS .my-sticky-column-table, ursprünglich auskommentiert, wegen Dependency auf SASS-Preprocessor -->
<!--
     CSS, um erste Spalte in q-table (mit zunächst EINER Header-Zeile) "sticky" zu machen, siehe https://quasar.dev/vue-components/table */
     Benötigt SASS als CSS Pre-Processor - dieser wird angezogen per style lang="sass"
     Neu:    https://quasar.dev/quasar-cli/cli-documentation/css-preprocessors#Introduction
             SASS kann mit Quasar App v1.1.0+ direkt verwendet werden!
     Vorher: http://v0-13.quasar-framework.org/guide/app-pre-processors.html

     a) Zunächst Quasar Upgrade nach Quasar 1.1.7 und Quasar App 1.1.4 durchgeführt mit:
        bimclickfrontend> quasar upgrade
        bimclickfrontend> quasar upgrade --install
        Am Besten aus separatem Node.js Command Window mit Admin-Rechten bzw. bei geschlossenem VS Code,
        da bei laufendem VS Code es zu gelockten Files, die vom NPM Install gebraucht werden, kommen kann!!!
        Siehe auch https://quasar.dev/start/upgrade-guide

     b) Sass-Loader und Node-Sass mussten (sonst auch nach dem Quasar Upgrade Compile-Fehler mit dem <style lange="sass">)
        dennoch installiert werden nach Hinweisen in https://quasar.dev/quasar-cli/cli-documentation/handling-webpack, mittels:
          bimclickfrontend> npm add --dev sass-loader node-sass
          (Note you also need to install node-sass because sass-loader depends on it as a peer dependency)
     c) Es kamen danach Warnungen, dass zusätzliche Pakete sass und fibers benötigt werden (ignorieren???
        Diese könnten installiert werden mit npm install -g sass bzw. npm install fibers (unklar, ob notwendig oder nicht)

     d) Zusätzlich in VS Code eine Sass Extension installiert zur Formatierung des SASS-Codes

     e) Dann den ursprünglichen SASS/CSS-Code aus der Vorlage umfänglich angepasst mit vielen Versuchen,
        damit auch die zweite Spalte "sticky" wird!!!
        CSS-HINWEISE: https://stackoverflow.com/questions/5664773/how-can-i-get-a-specific-number-child-using-css
        ACHTUNG: max-width: 600px verursachte Compile-Fehler, daher entfernt!!!

     f) TODO: Später zusätzlich zu sticky Column noch sticky Header hinzufügen, dazu gibt es auch eine Vorlage auf
        https://quasar.dev/vue-components/table

-->
<!-- Start Vorlage -->
<!--
<style lang="sass">
.my-sticky-column-table
    /* specifying max-width so the example can highlight the sticky column on any browser window     */
    max-width: 600px

    /* bg color is important for th; just specify one */
    thead tr: first-child th: first-child
      background-color: #fff
      opacity: 1

    td:first-child
      background-color: #f5f5dc

    thead tr: first-child th: first-child,

    td: first-child
      position: sticky
      left: 0
      z-index: 1
 </style>
-->
<!-- Ende Vorlage -->

<style lang="sass">

/* Aktueller q-table Aufbau für Tabelle Baueigenschaften: */
/* Header: */
/* q-tr für 1. Header-Zeile */
/*   q-th mindestens 2-mal (1 leer, 1 leer über Bezeichnung) */
/* q-tr für 2. Header-Zeile */
/*   Von Quasar erzeugte q-ths, mindestens 2-mal (1 für (De-)Select All Checkbox, 1 für "Bezeichnung") */
/* Body: Viele q-trs mit q-tds */
/* ACHTUNG: Ein Quasar <q-th> entspricht nicht immer einem HTML <th> was in der CSS verwendet wird! */
/* Für die MIT VSlots für Header und Body aufgebaute QTable für die Tabelle Baueigenschaften mit EINER Header-Zeile gilt :/
/* In der ersten Header-Zeile werden unter der Decke von Quasar offenbar NUR HTML <td>s verwendet!!! */
/* In der zweiten Header-Zeile wird für die erste (De-)Select All Checkbox Spalte offenbar ein <td> verwendet, sonst <th>s!!! */

.stickyColumnsTable2HeaderLines
  /*----------------------------------------------------------------------------------------------------------------------------*/
  /* Definitionen für Farben für Table mit 2 Header-Zeilen und Body: */
  /* #C0C0C0 ist HTML Silver, siehe https://www.w3schools.com/colors/colors_shades.asp */

  thead tr:first-child td:first-child /* Setzt Farbe der 1. Header-Zeile, 1. Spalte (td) - OK */
    background-color: #FFFFFF // HTML White, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  thead tr:first-child  /* Setzt Farbe der gesamten 1. Header-Zeile, 1. Spalte bereits oben separat gesetzt  - OK */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  /* Wegen Opacity-Änderung das folgende thead hinter das vorherige thead oben verschoben */
  thead tr:first-child td:nth-child(2) /* Setzt Farbe und Opacity der 1. Header-Zeile, 2. Spalte (td) - OK */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 0.8

  thead tr:nth-child(2) td:first-child /* Setzt Farbe der 2. Header-Zeile, 1. Spalte (td) - OK */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  thead tr:nth-child(2) /* Setzt Farbe der gesamten 2. Header-Zeile, 1. Spalte bereits oben separat gesetzt  - OK */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  /* Wegen Opacity-Änderung das folgende thead hinter das vorherige thead oben verschoben */
  thead tr:nth-child(2) th:nth-child(2) /* Setzt Farbe und Opacity der 2. Header-Zeile, 2. Spalte (th) */
    /* ACHTUNG: nth-Zählung zählt ALLE Typen von Children, auch das erste td in der 2. Row, daher hier für das th:nth-child(2) - OK */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 0.8

  td:first-child /* Setzt Farbe der 1. Spalte NUR im Table Body (ab 3. Zeile in Table mit 2 Header-Zeilen) - OK */
    background-color: #FFFFFF // HTML White, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  tbody td:nth-child(2) /* Setzt Farbe der 2. Spalte in allen Zeilen im Body, überschreibt nicht die Header-Zeilen */
    background-color: #F5F5DC // ein Beige, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 0.9

  /*----------------------------------------------------------------------------------------------------------------------------*/
  /* Definitionen für Stickiness der 1. und 2. Spalte im Table Header (2 Zeilen) und im Body: */

  /* Definitionen für 1. Header-Zeile (thead tr: first-child) */
  thead tr:first-child th:first-child /* Setzt Stickiness in der 1. Header-Zeile (tr) für 1. Spalte (th:first-child, leeres Feld für Checkboxes) - OK  */
    position: sticky
    left: 0
    z-index: 1

  /* ACHTUNG: Offensichtlich hat sich in Quasar 1.8 das Rendering der 1. Header-Zeile geändert, es sind jetz dort: */
  /* 1. Spalte (Checkboxen - leer): th - früher war das ein td???  */
  /* 2. Spalte (Bezeichnung): th -- früher war das ein td??? */
  /* 3. Spalte (Aktivierungsmerkmale mit Unterspalten): th colspan=2 (bei 3 Unterspalten unter Aktivierungsmerkmalen) -- früher waren das tds, nicht ths!!! */
  /* ACHTUNG: Mit Wegfall von "obligatorisch" und "aktivierbar" ist colspan=1 für 3. Spalte!

  /* Setzt Stickiness in der 1. Header-Zeile (tr:first-child) für 2. Spalte (nth-child(2)) */
  /* ALT, vor Quasar 1.8 */
  /* thead tr:first-child td:nth-child(2) */ /* ALT: 2. td */
  /*   position: sticky */
  /*   left: 37px */
  /*   z-index: 1 */

  /* ALT, seit Quasar 1.8 */
  /* thead tr:first-child th:nth-child(2) */ /* NEU: 2. th */
  /*   position: sticky */
  /*   left: 37px */
  /*   z-index: 1 */

  /* NEU für 1. Header-Zeile, 2. Spalte (th:nth-child(2), Baueigenschafsbezeichnung) */
  /* NEU: Mit Ueberschrift in 1. Header-Zeile, braucht mehr Platz - 70px statt 37px */
  thead tr:first-child th:nth-child(2)
    position: sticky
    left: 70px
    z-index: 1

  /* Definitionen für 2. Header-Zeile (thead tr: nth-child(2) */
  /*========================================================================================================= */
  /* ACHTUNG - BUG FIX für #278: Ohne das nächste thead mit left: 0 wird die 2. Header-Zeile durch die (leere) 1. (Checkbox-)Spalte, 2. Zeile durchgescrollt!!! */
  thead tr:nth-child(2) th:first-child /* Setzt Stickiness in der 2. Header-Zeile (tr) für 1. Spalte (th:first-child, leeres Feld für Checkboxes) - OK  */
    position: sticky
    left: 0
    z-index: 1
  /*========================================================================================================= */

  thead tr:nth-child(2) th:nth-child(2) /* Setzt Stickiness in der 2. Header-Zeile (tr) für 2. Spalte (th:nth-child(2), Baueigenschaftsbezeichnung) - OK  */
    position: sticky
    left: 70px
    z-index: 1

  tbody td:first-child /* Setzt Stickiness der 1. Spalte (td:first-child, Checkboxes) im Table Body (ab 3. Zeile in Table mit 2 Header-Zeilen) - OK */
    position: sticky
    left: 0
    z-index: 1

  tbody td:nth-child(2) /* Setzt Stickiness der 2. Spalte (td:nth-child(2), Baueigenschaftsbezeichnung) im Table Body (ab 3. Zeile in Table mit 2 Header-Zeilen) - OK */
    position: sticky
    left: 70px
    z-index: 1

/* Aktueller q-table Aufbau für Tabelle zugeordnete Bauinformationen: */
/* Header: */
/* q-tr für einzige Header-Zeile */
/*   Von Quasar erzeugte q-ths, mindestens 2-mal (1 für (De-)Select All Checkbox, 1 für "Bezeichnung"), weitere q-ths für Spalten-Labels */
/* Body: Viele q-trs mit q-tds */
/* ACHTUNG: Ein Quasar <q-th> entspricht nicht immer einem HTML <th> was in der CSS verwendet wird! */
/* ACHTUNG: Für die OHNE VSlots für Header und Body aufgebaute Tabelle für zugeordnete Bauinformationen mit einer Header-Zeile ist die Generierung */
/* von HTML <th>s und <td>s anders als bei der Tabelle für Baueigenschaften MIT VSlots für Header und Body und zwei Header-Zeilen!!! */
/* In der einzigen Header-Zeile wird hier für die erste (De-)Select All Checkbox Spalte ein <th> verwendet und auch sonst nur <th>s!!! */
/* Daher sind hier andere thead und tbody Definitionen erforderlich als für .stickyColumnsTable2HeaderLines */
</style>

<style lang="sass">
.stickyColumnsTable1HeaderLine
  /*----------------------------------------------------------------------------------------------------------------------------*/
  /* Definitionen für Farben für Table mit 1 Header-Zeile und Body: */
  /* #C0C0C0 ist HTML Silver, siehe https://www.w3schools.com/colors/colors_shades.asp */

  thead tr:first-child th:first-child /* Setzt Farbe der 1. Header-Zeile, 1. Spalte (th - nicht td wie oben) - OK */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  thead tr:first-child /* Setzt Farbe der gesamten 1. Header-Zeile, 1. Spalte bereits oben separat gesetzt  - OK */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  /* Wegen Opacity-Änderung das folgende thead hinter das vorherige thead oben verschoben */
  thead tr:first-child th:nth-child(2) /* Setzt Farbe und Opacity der 1. Header-Zeile, 1. Spalte (th) */
    /* ACHTUNG: nth-Zählung zählt ALLE Typen von Children, gleichgültig ob th oder td - OK */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 0.8

  td:first-child /* Setzt Farbe der 1. Spalte NUR im Table Body (ab 2. Zeile in Table mit 1 Header-Zeile) - OK */
    background-color: #FFFFFF // HTML White, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  tbody td:nth-child(2) /* Setzt Farbe der 2. Spalte in allen Zeilen im Body, überschreibt nicht die Header-Zeilen */
    background-color: #F5F5DC // ein Beige, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 0.9

  /*----------------------------------------------------------------------------------------------------------------------------*/
  /* Definitionen für Stickiness der 1. und 2. Spalte im Table Header (1 Zeile) und im Body: */
  thead tr:first-child th:first-child /* Setzt Stickiness in der 1. Header-Zeile (tr) für 1. Spalte (erstes td) - OK  */
    position: sticky
    left: 0
    z-index: 1

  thead tr:first-child th:nth-child(2) /* Setzt Stickiness in der 1. Header-Zeile (tr) für 2. Spalte (zweites td) - OK */
    position: sticky
    left: 43px
    z-index: 1

  tbody td:first-child /* Setzt Stickiness der 1. Spalte (td) im Table Body (ab 1. Zeile in Table mit 1 Header-Zeile) - OK */
    position: sticky
    left: 0
    z-index: 1

  tbody td:nth-child(2) /* Setzt Stickiness der 2. Spalte (td) im Table Body (ab 2. Zeile in Table mit 1 Header-Zeile) - OK */
    position: sticky
    left: 43px
    z-index: 1
</style>

<style>
/* CSS Klassen zum Test: */
.background-color-beige {
  /* Aktuell nicht verwendet */
  background-color: #f5f5dc;
}
.my-card {
  width: 100%;
  max-width: 250px;
}
.height-1rem {
  height: 1rem;
  /* height: 1em; */
}
.font-size-small {
  font-size: small;
  /* font-size: x-small; */
  /* font-size: xx-small; */
  height: 25px;
}
.height-small {
  height: 18px;
}
</style>
