<!-- baueinheiten.vue - Vue/Quasar-Komponente zur Bauvorhaben-/Baueinheitenverwaltung -->
<!--***=======================================================================================================================================================================-->
<!-- HINWEIS: BIM.click ToDos/Backlog ist jetzt in bim-click-front-end\src\markdown\bim-click-backlog.md -->
<!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ -->
<!-- NEU: Dieses File umbenannt von Baueinheiten.vue nach baustoffe.vue (entsprechend Kebab-Case-Konvention für File-Namen) -->
<!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ -->
<!-- MERKER/HINWEIS: Wichtige Array-Funktionen/Objekt-Funktionen: find, findIndex, filter, for in, for of, forEach, includes, map, some, indexOf, findIndex, splice, split, push, spread-Operator (...) -->
<!-- https://www.mediaevent.de/javascript/for-in-foreach.html -->
<!-- MERKER/HINWEIS: Vue Array-Operationen: https://stackoverflow.com/questions/42807888/vuejs-and-vue-set-update-array -->
<!-- TIPPS zu return in Callbacks: https://www.bennadel.com/blog/2323-use-a-return-statement-when-invoking-callbacks-especially-in-a-guard-statement.htm -->
<!-- MERKER/HINWEIS: Vergleich von Mongoose Object Ids mit .equals() -->
<!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ -->
<!-- ACHTUNG: Beim Formatieren mit Prettier werden im Template-Teil die String-Ausdrücke für Properties über mehrere Zeilen verteilt. Dies führt manchmal zu obskuren -->
<!--          Fehlern im Log, dass eigentlich definierte Methoden, Funktionen oder Variablen undefiniert sind. Dann muss man händisch diese Strings-Ausdrücke formatieren: -->
<!--          Beispiel: -->
<!-- Prettier--Formatierung über mehrere Zeilen, verursacht potentiell "undefined" Fehlermeldungen im Log: -->
<!--          :selected.sync="                                                    -->
<!--                           selectedRowsTableBaueigenschaften     -->
<!--                         "                                                    -->
<!-- Manuelle Korrektur: :selected.sync="selectedRowsTableBaueigenschaften" -->
<!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ -->
<!-- NEU: Terminologieänderungen 18.10.2019/23.01.2020: -->
<!-- Allgemein:       Bauphysikalische Eigenschaften => (typbezogene bzw. wertbezogene) Baueigenschaften -->
<!-- Bei Baustoffen:  Bauphysikalische Eigenschaften => Materialeigenschaften => Baueigenschaften -->
<!-- Bei Bauvorhaben: Bauphysikalische Eigenschaften => Nutzungseigenschaften => Baueigenschaften -->
<!-- Dies galt anfangs nur am UI, nicht im Backend, mit obigem Refactoring verwendet das Model BaustoffeModel nun das Schema WertbezogeneBaueigenschaftenSchema, -->
<!-- (welches später auch von BaueinheitenModel für Bauvorhaben verwendet werden soll) unter obigem Namen MaterialEigenschaftenSchema -->
<!-- Später direkte Verwendung des WertbezogeneBaueigenschaftenSchema! -->
<!-- Bei beiden:      Knoteneigenschaften => Strukturierungsangaben -->
<!--***=======================================================================================================================================================================-->
<template>
  <!-- ================================================================================================== -->
  <!-- ACHTUNG: Hier class="q-pa-xs" oder "q-pa-sm" zur Kontrolle des  Abstands zwischen den Tableisten   -->
  <!-- ================================================================================================== -->
  <q-page class="q-pa-xs">
    <!-- content -->
    <!-- TODO: Folgende QCard ist experimentell, in Verbindung mit dem Scrollbar am QTree links vom QSplitter muss sie noch intensiver getestet werden -->
    <!--  <q-card> -->
    <div>
      <!-- <q-splitter v-model="splitterModel" style="height: 1000px"> -->
      <!-- ALT: style="min-width: 1930px" -->
      <q-splitter v-model="splitterModel" :limits="[10, 50]">
        <template v-slot:before>
          <!-- <q-card> -->
          <div class="q-pa-xs q-gutter-xs">
            <!-- label="Filter" -->
            <q-input
              ref="filterTreeBaueinheiten"
              v-model="filterTreeBaueinheiten"
              bg-color="teal-2"
              standout="bg-teal-4 text-black"
              square
              dense
              debounce="300"
              color="primary"
            >
              <!-- --------------------------------------------------------------------------------- -->
              <!-- NEU: Tooltip auf dem obigen Feld                                                  -->
              <!-- --------------------------------------------------------------------------------- -->
              <q-tooltip
                :delay="1000"
                :offset="[0, 10]"
                max-width="500px"
                content-class="bg-secondary text-white text-caption shadow-4"
              >
                Bestimmte Baueinheiten im Bauvorhabenbaum herausfiltern durch
                Eingabe ihrer Bezeichnung als Filtertext
              </q-tooltip>
              <template v-slot:append>
                <q-icon name="search" />
                <q-icon
                  v-if="filterTreeBaueinheiten !== ''"
                  name="clear"
                  class="cursor-pointer"
                  @click="resetFilterTreeBaueinheiten"
                />
              </template>
            </q-input>
            <!-- Row für Buttons mit generellen Aktionen auf den Knoten im Baum -->
            <!-- Auf Position über dem QTree verschoben, da sonst die Buttons bei vielen Knoten unten verschwinden -->
            <!-- TODO: Noch zu sortieren, wohin welche Buttons genau gehören!!! -->
            <!--
                <div v-if="$q.screen.gt.xs" class="row full-width">
                  <div class="col-2">
                    <q-btn
                      color="positive"
                      glossy
                      type="submit"
                      label="Speichern"
                      @click="onlyForTesting()"
                      no-caps
                    />
                  </div>
                  <div class="col-2">
                    <q-btn
                      color="deep-orange"
                      text-color="white"
                      glossy
                      @click="onClickCancelButton()"
                      label="Abbrechen"
                      no-caps
                    />
                  </div>
                -->
            <div class="row full-width q-pa-xs q-col-gutter-xs">
              <div class="col-md-6 col-12">
                <!-- Von Stefan für Testzwecke, verlagert nach verwaltung.vue, Test Area 16 -->
                <!-- <q-btn label="foo"
                  @click="runAgendaTask"/>
                -->
                <!-- NEU: Ganzen Baum kollabieren -->
                <q-btn
                  dense
                  class="stretch full-width"
                  style="height: 100%"
                  label="Baum kollabieren"
                  no-caps
                  color="cyan-6"
                  glossy
                  size="md"
                  @click="$refs.treeBaueinheiten.collapseAll()"
                >
                  <!-- --------------------------------------------------------------------------------- -->
                  <!-- NEU: Tooltip auf dem obigen Button                                                -->
                  <!-- --------------------------------------------------------------------------------- -->
                  <q-tooltip
                    :delay="1000"
                    :offset="[0, 10]"
                    max-width="500px"
                    content-class="bg-secondary text-white text-caption shadow-4"
                  >
                    Alle aufgeklappten Zweige im Bauvorhabenbaum zuklappen
                  </q-tooltip>
                </q-btn>
              </div>
              <div class="col-md-6 col-12">
                <!-- NEU: Ganzen Baum expandieren - funktioniert leider nur für Knoten, die vorher schon lazy loaded wurden -->
                <!-- TODO: Für unbedingte Expansion müsste lazy Loading wohl vorübergehend abgeschaltet werden! -->
                <q-btn
                  dense
                  class="stretch full-width"
                  style="height: 100%"
                  label="Baum expandieren"
                  no-caps
                  color="deep-purple-6"
                  glossy
                  size="md"
                  @click="$refs.treeBaueinheiten.expandAll()"
                >
                  <!-- --------------------------------------------------------------------------------- -->
                  <!-- NEU: Tooltip auf dem obigen Button                                                -->
                  <!-- --------------------------------------------------------------------------------- -->
                  <q-tooltip
                    :delay="1000"
                    :offset="[0, 10]"
                    max-width="500px"
                    content-class="bg-secondary text-white text-caption shadow-4"
                  >
                    Alle bereits früher aufgeklappten Zweige im Bauvorhabenbaum
                    wieder aufklappen
                  </q-tooltip>
                </q-btn>
              </div>
            </div>
            <div class="row full-width q-pa-xs q-col-gutter-xs">
              <div class="col-md-6 col-12">
                <!-- NEU: Button nur enablen, wenn sinnvoll -->
                <!-- NEU: Zusätzlich Benutzerberechtigungen enablen, prüfen mit Computed-Funktionen -->
                <!-- Siehe internes Design -->
                <!-- NEU: #253 g) Einfügen disablen unter Bodenaufbauten und Schichten - ist nur noch im Profilformular "Baueinheit > Bodenaufbau" erlaubt! -->
                <q-btn
                  dense
                  :disable="
                    selectedNodeTreeBaueinheiten === undefined ||
                      selectedNodeTreeBaueinheiten === null ||
                      !benutzerDarfNeuanlegenKindKnotenUnterSelectedNodeTreeBaueinheiten ||
                      !benutzerDarfBearbeitenImBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                      nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                        selectedNodeTreeBaueinheiten,
                        'Baueinheit > Bodenaufbau'
                      ) ||
                      nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                        selectedNodeTreeBaueinheiten,
                        'Baueinheit > Schicht'
                      )
                  "
                  label="Baueinheit anlegen"
                  no-caps
                  color="green-7"
                  glossy
                  class="stretch full-width"
                  style="height: 100%"
                  size="md"
                  @click="createNewBaueinheitDialog = true"
                >
                  <!-- --------------------------------------------------------------------------------- -->
                  <!-- NEU: Tooltip auf dem obigen Button                                                -->
                  <!-- --------------------------------------------------------------------------------- -->
                  <q-tooltip
                    :delay="1000"
                    :offset="[0, 10]"
                    max-width="500px"
                    content-class="bg-secondary text-white text-caption shadow-4"
                  >
                    Eine neue Baueinheit unter der aktuell ausgewählten
                    Baueinheit (blau markiert) im Bauvorhabenbaum anlegen
                  </q-tooltip>
                </q-btn>
              </div>
              <div class="col-md-6 col-12">
                <!-- NEU: Button nur enablen, wenn sinnvoll -->
                <!-- Löschen des Wurzelknotens wird bereits hier durch Disablen des Buttons unterbunden! -->
                <!-- Dito für Bauvorlagenunterbaumwurzelknoten -->
                <!-- DONE: Auch disabled für Kontextmenü zum Löschen dieser Baumknotentypen im Bauvorhabenbaum -->
                <!-- NEU: Zusätzlich Benutzerberechtigungen enablen, prüfen mit Computed-Funktionen -->
                <!-- NEU: Löschen des Unterbaums für "Bauprojekte" verbieten - TODO XXXXX #264: Diesen zum offiziellen Baumknotentyp machen -->
                <!-- Siehe internes Design -->
                <!-- NEU: #253 g) Löschen disablen für Schichten - ist nur noch im Profilformular "Baueinheit > Bodenaufbau" erlaubt! -->
                <q-btn
                  dense
                  :disable="
                    selectedNodeTreeBaueinheiten === undefined ||
                      selectedNodeTreeBaueinheiten === null ||
                      selectedNodeTreeBaueinheiten.baumKnotenTyp ===
                        'Wurzelknoten' ||
                      selectedNodeTreeBaueinheiten.baumKnotenTyp ===
                        'Bauvorlagenunterbaumwurzelknoten' ||
                      selectedNodeTreeBaueinheiten.baueinheitsBezeichnung.startsWith(
                        'Bauprojekte'
                      ) ||
                      !benutzerDarfBearbeitenSelectedNodeTreeBaueinheiten ||
                      !benutzerDarfBearbeitenImBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                      nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                        selectedNodeTreeBaueinheiten,
                        'Baueinheit > Schicht'
                      )
                  "
                  label="Baueinheit löschen"
                  no-caps
                  color="red-7"
                  glossy
                  size="md"
                  class="stretch full-width"
                  style="height: 100%"
                  @click="deleteSelectedBaueinheitDialog = true"
                >
                  <!-- --------------------------------------------------------------------------------- -->
                  <!-- NEU: Tooltip auf dem obigen Button                                                -->
                  <!-- --------------------------------------------------------------------------------- -->
                  <q-tooltip
                    :delay="1000"
                    :offset="[0, 10]"
                    max-width="500px"
                    content-class="bg-secondary text-white text-caption shadow-4"
                  >
                    Die aktuell ausgewählte Baueinheit (blau markiert) im
                    Bauvorhabenbaum löschen
                  </q-tooltip>
                </q-btn>
              </div>
              <div
                v-if="localStore.state.debugMode"
                class="row full-width q-pt-sm"
              >
                <q-btn
                  no-caps
                  color="deep-orange"
                  glossy
                  class="stretch full-width"
                  @click="reloadTreeWrapper"
                  >Baum neu laden (optimiert)</q-btn
                >
              </div>
            </div>
            <q-separator />
            <!-- <br /> -->
            <!-- Nur wenn Buttons unter dem QTree positioniert sind -->
            <!-- HINWEIS: Sonst zu geringer Abstand zum Rand der rechten q-card!!! -->
            <!-- NEU: QScrollArea um den QTree herum, um diesen scrollen zu können unabhängig vom Scroll Bar des Browsers am rechten Rand -->
          </div>
          <!-- =================================================================================================================================================================================== -->
          <!-- TODO: Aktuell ist am style von q-scroll-area height: 86vh statt 60 bis 66vh (besser für Laptops) gesetzt für Testzwecke - rechter Browser-Scrollbalken sollte damit verschwinden    -->
          <!--       Einstweilen wieder auf 100vh gesetzt - ist ein Kompromiss zwischen Platzausnutzung und einer oder zwei Scrollbalken                                                           -->
          <!-- HINWEIS: class="fit" nach Vorlage auf https://github.com/quasarframework/quasar/discussions/12710 ausprobiert - funktioniert aber warum auch immer NICHT!                           -->
          <!-- =================================================================================================================================================================================== -->
          <!-- style="height: 86vh" -->
          <q-scroll-area
            style="height: 100vh"
            :bar-style="{
              right: '0px', // Bestimmt, um wieviel rechts der (immer?) dunkelgraue Scrollbalken angezeigt wird, der zeigt, wo man ist innerhalb des vertikalen Scrollbereichs
              borderRadius: '5px', // Bestimmte den Radius der Abrundung des Scrollbalkens unten und oben
              background: '#bdbdbd', // Bestimmt die Farbe des durch width spezifizierten mausempfindlichen Bereichs zum Scrollen, grey-5
              width: '20px', // Bestimmt die Dicke des mausempfindlichen Bereichs, in dem man mit der Maus scrollen kann
              opacity: 0.7 // Bestimmt die Opazität von background
            }"
          >
            <!-- NEU: QScrollBar um QTree, um diesen separat vom Browser-Scrollbalken rechts scrollen zu können - erfordert height Property -->
            <!-- Nebenziel dabei ist, dass keine 2 Scrollbalken erscheinen (der von QScrollbar und der rechts am Browser Window) -->
            <!-- TODO XXXXXX: height nicht statisch, sondern abhängig vom Bildschirmgröße bzw. surrounding DOM-Elemennt setzen -->
            <!-- Allerdings scheint q-tree die "umgebende Höhe" dynamisch zu verändern beim Expandieren des Trees, wie Sniff Tests ergeben, -->
            <!-- daher muss man die Bildschirmhöhe dynamisch ermitteln, und davon den Platz für die Controls über dem Tree -->
            <!-- abziehen -->
            <!-- ALT absolut: <q-scroll-area style="height: 1450px"> -->
            <!-- ALT absolut: <q-scroll-area style="height: 1350px"> -->
            <!-- Damit erscheint bei 25 Zeilen in QTable rechts kein Browser -->
            <!--              Scrollbalken, sondern bei Bedarf (QTree hat viele expandierte Knoten) nur der Scrollbalken für diesen QTree -->
            <!--              per q-scroll-area -->
            <!-- Siehe https://stackoverflow.com/questions/1575141/how-to-make-a-div-100-height-of-the-browser-window -->
            <!-- Danach "height: 60vh" verwendet (60% der vertikal zur Verfügung stehenden Höhe des Browser Windows) -->
            <!-- Dieser Wert funktioniert relativ gut in Tests mit vertikal verkleinertem Browser-Window (z.B. Laptop mit Full HD und Browser im Vollbildmodus -->
            <!-- mit F11). Dann nimmt sowohl der QTree links den vollen zur Verfügung stehenden vertikalen Platz ein, der Scrollbalken dafür -->
            <!-- funktioniert, und rechts erscheint wie gewünscht kein doppelter Scrollbalken. -->
            <!-- Dieser Wert "height: 60vh" ist allerdings bei größerer Höhe des Browser-Windows etwas zu klein, -->
            <!-- wodurch dann unten links nicht der gesamte zur Verfügung stehende Platz für den QTree genutzt wird, sondern ca. 20% ungenutzt bleibt -->
            <!-- Allerding spielt dabei auch noch die gewählte Zoom-Stufe im Browser (Ctrl-+/-) eine Rolle. -->
            <!-- Vorlage für CSS in bar-style: Siehe https://quasar.dev/vue-components/scroll-area#QScrollArea-API -->
            <!-- Weitere Tipps für Quasar q-scroll-area: -->
            <!-- https://forum.quasar-framework.org/topic/5466/flexbox-and-q-scroll-area-s-height/5 -->
            <!-- -------------------------------------------------------------------------------------------------------- -->
            <!-- Es folgt der der Bauvorhabenbaum als Quasar QTree -->
            <!-- NEU: Nach Vorlage auf https://forum.quasar-framework.org/topic/5765/qtree-select-behavior/3 -->
            <!-- das Handling beim Selektieren eines Nodes geändert, damit bei einem zweiten Klick auf einen Knoten dieser Knoten nicht deselektiert wird: -->
            <!-- Dazu @update:selected="selectedNodeHandlingTreeBaueinheiten" mit neuer Methode eingeführt -->
            <!-- ACHTUNG: Dann nicht mehr :selected.sync="selectedKeyTreeBaueinheiten", sondern :selected="selectedKeyTreeBaueinheiten" notwendig!!! -->
            <q-tree
              dense
              ref="treeBaueinheiten"
              :nodes="nodesTreeBaueinheiten"
              default-expand-all
              node-key="_id"
              label-key="baueinheitsBezeichnung"
              v-model:selected="selectedKeyTreeBaueinheiten"
              v-model:expanded="expandedKeysTreeBaueinheiten"
              @update:selected="selectedNodeHandlingTreeBaueinheiten"
              @lazy-load="lazyLoadHandlingTreeBaueinheiten"
              selected-color="white bg-primary shadow-2"
              :filter="filterTreeBaueinheiten"
              no-nodes-label="Keine Baueinheiten vorhanden"
              no-results-label="Keine Baueinheiten erfüllen die Filterbedingungen"
            >
              <template v-slot:default-header="{ node }">
                <!-- <div v-if="localStore.state.debugMode">
                  node.lazy:
                  {{ node.lazy }}
                </div> -->
                <!-- <div class="row items-center" @click.stop> -->
                <!-- Für q-popup-edit oder q-menu mit context-menu prop, stoppt die normale Knotenselektion mit linker Maustaste! -->
                <!-- Hat aber keinen Einfluss auf Knotenselektion per Kontextmenü mit @click=selectedKeyTreeBaueinheiten = prop.node._id, diese wirft -->
                <!-- Fehler, dass prop und key nicht definiert sind - allerdings wird ja node.baueinheitsBezeichnung weiter unten verwendet wird und ist -->
                <!-- somit definiert. Mit entsprechendem @click=selectedKeyTreeBaueinheiten = node._id gelingt die Knoten-Selektion per Kontextmenü dann doch! -->
                <!-- Context Menu: -->
                <q-menu touch-position context-menu>
                  <q-list dense style="min-width: 100px">
                    <q-item
                      clickable
                      v-close-popup
                      @click="selectedKeyTreeBaueinheiten = node._id"
                    >
                      <q-item-section>Baueinheit auswählen</q-item-section>
                    </q-item>
                    <q-separator />
                    <!-- ------------------------------------------------------------------------------------------- -->
                    <!-- NEU: Für #272/#505 -->
                    <!-- "Relevantestes", d.h. in dieser Implementierungsstufe hierarchisch oberstes aktiviertes Baueigenschaftsprofilformular anzeigen -->
                    <!-- NEU: Menü wird disabled, wenn keine Baueigenschaftsprofile aktiviert sind, d.h. node.zugeordneteBaueigenschaftsProfile.length === 0 -->
                    <!-- NEU: Wenn Knoten "Bauprojekte", dann Anzeige relevantestes Profil disablen -->
                    <!-- NEU: Wenn Knoten "Vorlagen für Baueinheiten", dann Anzeige relevantestes Profil disablen -->
                    <q-item
                      :disable="
                        node.zugeordneteBaueigenschaftsProfile.length === 0 ||
                          node.baueinheitsBezeichnung.startsWith(
                            'Bauprojekte'
                          ) ||
                          node.baueinheitsBezeichnung ===
                            'Vorlagen für Baueinheiten'
                      "
                      clickable
                      v-close-popup
                      @click="
                        selectedKeyTreeBaueinheiten = node._id;
                        tabBaueinheiten =
                          'baueigenschaftsProfilFormulareTabBaueinheiten';
                        tabBaueigenschaftsProfilFormulare = getTabVonHierarchischOberstemProfilFormularInAktiviertenBaueigenschaftsProfilen(
                          node
                        );
                      "
                    >
                      <q-item-section
                        >Baueinheit auswählen und relevantestes
                        Baueigenschaftsprofilformular daran
                        anzeigen</q-item-section
                      >
                    </q-item>
                    <!-- ----------------------------------------------------------------------------------------------------------- -->
                    <!-- NEU: Auszuwählende, "relevante" Baueigenschaftsprofilformulare in den Tabs rechts ansteuern, gesteuert durch Untermenüs -->
                    <!-- ACHTUNG: Dieses Menü ist bisher nicht disabled wie die übrigen, da im Read-Only Mode ein Formular für jede Baueinheit angeschaut werden können sollte! -->
                    <!-- NEU: Im Zuge von #272/#505 diejenigen Profile als relevant enablen (per :disable-Funktion), für die diese -->
                    <!-- Baueinheit der unterste Knoten im Pfad ist, an dem das betreffende Profil aktiviert ist -->
                    <!-- NEU: Wenn Knoten "Bauprojekte", dann Anzeige relevantes Profil disablen -->
                    <!-- NEU: Wenn Knoten "Vorlagen für Baueinheiten", dann Anzeige relevantes Profil disablen -->
                    <q-item
                      :disable="
                        node.baueinheitsBezeichnung.startsWith('Bauprojekte') ||
                          node.baueinheitsBezeichnung ===
                            'Vorlagen für Baueinheiten'
                      "
                    >
                      <q-item-section
                        >Baueinheit auswählen und relevantes
                        Baueigenschaftsprofilformular daran anzeigen
                      </q-item-section>
                      <q-item-section side>
                        <q-icon name="keyboard_arrow_right" />
                      </q-item-section>
                      <!-- Es folgen die Untermenüs für die Auswahl des Baueigenschaftsprofils: -->
                      <!-- Mit Disabling, falls das Profil nicht aktiviert ist -->
                      <!-- Bisher nur implementiert für Profil "Baueinheit > Bauvorhaben", weitere Profile: TODO XXXXXX -->
                      <!-- Für diese müssen unten weitere q-items angelegt werden mit eigenen Dialogen nach demselben Muster wie createNewBaueinheitMitBauvorhabenProfilAktivierungDialog -->
                      <q-menu auto-close anchor="top right" self="top left">
                        <q-list>
                          <q-item
                            :disable="
                              !nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                                node,
                                'Baueinheit > Bauvorhaben'
                              )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              tabBaueinheiten =
                                'baueigenschaftsProfilFormulareTabBaueinheiten';
                              tabBaueigenschaftsProfilFormulare =
                                'bauvorhabenProfilFormularTabBaueinheiten';
                            "
                          >
                            <q-item-section>
                              Bauvorhaben
                            </q-item-section>
                          </q-item>
                          <q-item
                            :disable="
                              !nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                                node,
                                'Baueinheit > Standort'
                              )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              tabBaueinheiten =
                                'baueigenschaftsProfilFormulareTabBaueinheiten';
                              tabBaueigenschaftsProfilFormulare =
                                'standortProfilFormularTabBaueinheiten';
                            "
                          >
                            <q-item-section>
                              Standort
                            </q-item-section>
                          </q-item>
                          <q-item
                            :disable="
                              !nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                                node,
                                'Baueinheit > Gebäude'
                              )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              tabBaueinheiten =
                                'baueigenschaftsProfilFormulareTabBaueinheiten';
                              tabBaueigenschaftsProfilFormulare =
                                'gebaeudeProfilFormularTabBaueinheiten';
                            "
                          >
                            <q-item-section>
                              Gebäude
                            </q-item-section>
                          </q-item>
                          <q-item
                            :disable="
                              !nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                                node,
                                'Baueinheit > Geschoss'
                              )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              tabBaueinheiten =
                                'baueigenschaftsProfilFormulareTabBaueinheiten';
                              tabBaueigenschaftsProfilFormulare =
                                'geschossProfilFormularTabBaueinheiten';
                            "
                          >
                            <q-item-section>
                              Geschoss
                            </q-item-section>
                          </q-item>
                          <!-- TODO XXXXXX - #502: Provisorische Erweiterung um weitere Raumnutzungsprofile: -->
                          <q-item
                            :disable="
                              !nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                                node,
                                'Baueinheit > Raum'
                              ) &&
                                !nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                                  node,
                                  'Baueinheit > Raum > Wohnen > Flur in der Wohnung'
                                ) &&
                                !nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                                  node,
                                  'Baueinheit > Raum > Wohnen > Abstellraum in der Wohnung'
                                )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              tabBaueinheiten =
                                'baueigenschaftsProfilFormulareTabBaueinheiten';
                              tabBaueigenschaftsProfilFormulare =
                                'raumProfilFormularTabBaueinheiten';
                            "
                          >
                            <q-item-section>
                              Raum
                            </q-item-section>
                          </q-item>
                          <!-- Platzhalter für die Untermenüs/q-items für weitere Baueigenschaftsprofile: -->
                          <q-item
                            disable
                            dense
                            clickable
                            v-close-popup
                            @click="selectedKeyTreeBaueinheiten = node._id"
                          >
                            <q-item-section>
                              Weitere Profile folgen später...
                            </q-item-section>
                          </q-item>
                        </q-list>
                      </q-menu>
                    </q-item>
                    <q-separator />
                    <!-- ----------------------------------------------------------------------------------------------------------- -->
                    <!-- NEU: Baueigenschaftsprofilaktivierung, gesteuert durch Untermenüs -->
                    <!-- NEU: Wenn Knoten "Bauprojekte", dann Profilaktivierung disablen -->
                    <!-- NEU: Wenn Knoten "Vorlagen für Baueinheiten", dann Profilaktivierung disablen -->
                    <!-- TODO XXXXXX: Für #335 (Strukturierungsknoten unter "Bauprojekte") hier ebenfalls die Profilaktivierung disablen -->
                    <q-item
                      :disable="
                        !benutzerDarfBearbeitenNodeTreeBaueinheiten(node) ||
                          !benutzerDarfBearbeitenImBauvorlagenunterbaumNodeTreeBaueinheiten(
                            node
                          ) ||
                          node.baueinheitsBezeichnung.startsWith(
                            'Bauprojekte'
                          ) ||
                          node.baueinheitsBezeichnung ===
                            'Vorlagen für Baueinheiten'
                      "
                    >
                      <q-item-section
                        >Baueinheit auswählen und bestimmtes
                        Baueigenschaftsprofil daran aktivieren
                      </q-item-section>
                      <q-item-section side>
                        <q-icon name="keyboard_arrow_right" />
                      </q-item-section>
                      <!-- Es folgen die Untermenüs für die Auswahl des Baueigenschaftsprofils: -->
                      <!-- Mit Disabling, falls das Profil schon aktiviert ist -->
                      <!-- Bisher nur implementiert für Profil "Baueinheit > Bauvorhaben", "Baueinheit > Standort", "Baueinheit > Gebäude" - weitere Profile: TODO XXXXXX -->
                      <!-- Für diese müssen unten weitere q-items angelegt werden mit eigenen Dialogen nach demselben Muster wie createNewBaueinheitMitBauvorhabenProfilAktivierungDialog -->
                      <!-- =============================================================================================================================================================== -->
                      <!-- NEU: Mit intelligenterem Disabling per Funktion istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(node, baueigenschaftsProfilBezeichnung, modus) -->
                      <!-- Parameter Modus ist bei Profilaktivierung an Baueinheit "Aktivierung am Knoten" -->
                      <!-- HINWEIS: Diese prüft mit, ob am node selbst das Profil schon aktiviert ist sowie am Elternpfad aufwärts. Daher ist mit dieser Funktion kein zusätzlicher Aufruf der -->
                      <!--          individuellen Funktionen istAktiviertBaueigenschaftsProfilAnNode(node, baueigenschaftsProfilBezeichnung) mehr notwendig am :disable -->
                      <!-- UPDATE:  Diese Funktion hatte noch ein Problem (siehe Header der Funktion) mit Geschwisterknoten. Dieses mittlerweile gelöst (siehe Kommentare an Funktion) -->
                      <!-- ALT:     Hier wurden an den :disables ursprünglich pauschal die Funktion istAktiviertBaueigenschaftsProfilAnNode(node, baueigenschaftsProfilBezeichnung) aufgerufen -->
                      <!--          mit dem jeweiligen Profilbezeichnung als zweitem Parameter. Diese Aufrufe dann ersetzt durch die intelligentere Funktion -->
                      <!--          istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst() -->
                      <!-- =============================================================================================================================================================== -->
                      <!-- NEU: Für #505 am Ende in @click Unter-Tab setzen für Baueigenschaftsprofilformulare mit getTabVonHierarchischOberstemProfilFormularInAktiviertenBaueigenschaftsProfilen(node) -->
                      <!-- ACHTUNG: Diese Calls werden nicht ausgeführt, da der vorherige Call aktiviereBauvorhabenBaueigenschaftsProfilAnBaueinheit(node) -->
                      <!-- den Baum vorher asynchron refreshed! -->
                      <!-- Daher hier wieder entfernt und dafür in refrehsTreeBaueinheiten(berechneNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung) diesen Call eingefügt!!! -->
                      <q-menu auto-close anchor="top right" self="top left">
                        <q-list>
                          <q-item
                            :disable="
                              istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                node,
                                'Baueinheit > Bauvorhaben',
                                'Aktivierung am Knoten'
                              )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              aktiviereBauvorhabenBaueigenschaftsProfilAnBaueinheit(
                                node
                              );
                            "
                          >
                            <q-item-section>
                              Bauvorhaben
                            </q-item-section>
                          </q-item>
                          <q-item
                            :disable="
                              istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                node,
                                'Baueinheit > Standort',
                                'Aktivierung am Knoten'
                              )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              aktiviereStandortBaueigenschaftsProfilAnBaueinheit(
                                node
                              );
                            "
                          >
                            <q-item-section>
                              Standort
                            </q-item-section>
                          </q-item>
                          <q-item
                            :disable="
                              istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                node,
                                'Baueinheit > Gebäude',
                                'Aktivierung am Knoten'
                              )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              aktiviereGebaeudeBaueigenschaftsProfilAnBaueinheit(
                                node
                              );
                            "
                          >
                            <q-item-section>
                              Gebäude
                            </q-item-section>
                          </q-item>
                          <q-item
                            :disable="
                              istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                node,
                                'Baueinheit > Geschoss',
                                'Aktivierung am Knoten'
                              )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              aktiviereGeschossBaueigenschaftsProfilAnBaueinheit(
                                node
                              );
                            "
                          >
                            <q-item-section>
                              Geschoss
                            </q-item-section>
                          </q-item>
                          <!-- TODO XXXXXX - #502: Provisorische Erweiterung um weitere Raumnutzungsprofile: -->
                          <q-item
                            :disable="
                              istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                node,
                                'Baueinheit > Raum',
                                'Aktivierung am Knoten'
                              ) ||
                                istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                  node,
                                  'Baueinheit > Raum > Wohnen > Flur in der Wohnung',
                                  'Aktivierung am Knoten'
                                ) ||
                                istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                  node,
                                  'Baueinheit > Raum > Wohnen > Abstellraum in der Wohnung',
                                  'Aktivierung am Knoten'
                                )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              aktiviereRaumBaueigenschaftsProfilAnBaueinheit(
                                node
                              );
                            "
                          >
                            <q-item-section>
                              Raum
                            </q-item-section>
                          </q-item>
                          <q-item
                            :disable="
                              istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                node,
                                'Baueinheit > Bodenaufbau',
                                'Aktivierung am Knoten'
                              )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              aktiviereBodenaufbauBaueigenschaftsProfilAnBaueinheit(
                                node
                              );
                            "
                          >
                            <q-item-section>
                              Bodenaufbau
                            </q-item-section>
                          </q-item>
                          <!-- Platzhalter für die Untermenüs/q-items für weitere Baueigenschaftsprofile: -->
                          <q-item
                            disable
                            dense
                            clickable
                            v-close-popup
                            @click="selectedKeyTreeBaueinheiten = node._id"
                          >
                            <q-item-section>
                              Weitere Profile folgen später...
                            </q-item-section>
                          </q-item>
                        </q-list>
                      </q-menu>
                    </q-item>
                    <q-separator />
                    <!-- ---------------------------------------------------------------------------------------------------------- -->
                    <!-- Kindbaueinheit neu anlegen: -->
                    <!-- NEU: #253 g) Einfügen disablen unter Bodenaufbauten und Schichten - ist nur noch im Profilformular "Baueinheit > Bodenaufbau" erlaubt! -->
                    <q-item
                      :disable="
                        !benutzerDarfNeuanlegenKindKnotenOderMarkiertenZweigBewegenUnterNodeTreeBaueinheiten(
                          node
                        ) ||
                          !benutzerDarfBearbeitenImBauvorlagenunterbaumNodeTreeBaueinheiten(
                            node
                          ) ||
                          nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                            node,
                            'Baueinheit > Bodenaufbau'
                          ) ||
                          nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                            node,
                            'Baueinheit > Schicht'
                          )
                      "
                      clickable
                      v-close-popup
                      @click="
                        selectedKeyTreeBaueinheiten = node._id;
                        createNewBaueinheitDialog = true;
                      "
                    >
                      <q-item-section
                        >Baueinheit auswählen und Kindbaueinheit neu
                        anlegen</q-item-section
                      >
                    </q-item>
                    <!-- ---------------------------------------------------------------------------------------------------------- -->
                    <!-- NEU: Kindbaueinheit anlegen mit anschließender Baueigenschaftsprofilaktivierung, gesteuert durch Untermenü -->
                    <!-- NEU: #253 g) Einfügen disablen unter Bodenaufbauten und Schichten - ist nur noch im Profilformular "Baueinheit > Bodenaufbau" erlaubt! -->
                    <q-item
                      :disable="
                        !benutzerDarfNeuanlegenKindKnotenOderMarkiertenZweigBewegenUnterNodeTreeBaueinheiten(
                          node
                        ) ||
                          !benutzerDarfBearbeitenImBauvorlagenunterbaumNodeTreeBaueinheiten(
                            node
                          ) ||
                          nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                            node,
                            'Baueinheit > Bodenaufbau'
                          ) ||
                          nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                            node,
                            'Baueinheit > Schicht'
                          )
                      "
                    >
                      <q-item-section
                        >Baueinheit auswählen, Kindbaueinheit neu anlegen und
                        Baueigenschaftsprofil daran aktivieren
                      </q-item-section>
                      <q-item-section side>
                        <q-icon name="keyboard_arrow_right" />
                      </q-item-section>
                      <!-- Es folgen die Untermenüs für die Auswahl des Baueigenschaftsprofils: -->
                      <!-- Bisher nur implementiert für Profil "Baueinheit > Bauvorhaben", "Baueinheit > Standort", "Baueinheit > Gebäude" - weitere Profile: TODO XXXX -->
                      <!-- Für diese müssen unten weitere q-items angelegt werden mit eigenen Dialogen nach demselben Muster wie createNewBaueinheitMitBauvorhabenProfilAktivierungDialog -->
                      <!-- =============================================================================================================================================================== -->
                      <!-- NEU: Mit intelligenterem Disabling per Funktion istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(node, baueigenschaftsProfilBezeichnung, modus) -->
                      <!-- Parameter Modus ist bei Neuanlage Kindbaueinheit mit Profilaktivierung "Aktivierung am Kindknoten" -->
                      <!-- HINWEIS: Diese prüft mit, ob am node selbst das Profil schon aktiviert ist sowie am Elternpfad aufwärts. Daher ist mit dieser Funktion kein zusätzlicher Aufruf der -->
                      <!--          individuellen Funktionen istAktiviertBaueigenschaftsProfilAnNode(node, baueigenschaftsProfilBezeichnung) mehr notwendig am :disable -->
                      <!-- UPDATE:  Diese Funktion hatte noch ein Problem (siehe Header der Funktion) mit Geschwisterknoten. Dieses mittlerweile gelöst (siehe Kommentare an Funktion) -->
                      <!-- ALT:     Hier wurde an den :disables ursprünglich pauschal die Funktion istAktiviertBaueigenschaftsProfilAnNode(node, baueigenschaftsProfilBezeichnung) aufgerufen -->
                      <!--          mit dem jeweiligen Profilbezeichnung als zweitem Parameter. Diese Aufrufe dann ersetzt durch die intelligentere Funktion -->
                      <!--          istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst() -->
                      <!-- =============================================================================================================================================================== -->
                      <q-menu auto-close anchor="top right" self="top left">
                        <q-list>
                          <q-item
                            :disable="
                              istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                node,
                                'Baueinheit > Bauvorhaben',
                                'Aktivierung am Kindknoten'
                              )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              createNewBaueinheitMitBauvorhabenProfilAktivierungDialog = true;
                            "
                          >
                            <q-item-section>
                              Bauvorhaben
                            </q-item-section>
                          </q-item>
                          <q-item
                            :disable="
                              istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                node,
                                'Baueinheit > Standort',
                                'Aktivierung am Kindknoten'
                              )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              createNewBaueinheitMitStandortProfilAktivierungDialog = true;
                            "
                          >
                            <q-item-section>
                              Standort
                            </q-item-section>
                          </q-item>
                          <q-item
                            :disable="
                              istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                node,
                                'Baueinheit > Gebäude',
                                'Aktivierung am Kindknoten'
                              )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              createNewBaueinheitMitGebaeudeProfilAktivierungDialog = true;
                            "
                          >
                            <q-item-section>
                              Gebäude
                            </q-item-section>
                          </q-item>
                          <q-item
                            :disable="
                              istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                node,
                                'Baueinheit > Geschoss',
                                'Aktivierung am Kindknoten'
                              )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              createNewBaueinheitMitGeschossProfilAktivierungDialog = true;
                            "
                          >
                            <q-item-section>
                              Geschoss
                            </q-item-section>
                          </q-item>
                          <!-- TODO XXXXXX - #502: Provisorische Erweiterung um weitere Raumnutzungsprofile: -->
                          <q-item
                            :disable="
                              istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                node,
                                'Baueinheit > Raum',
                                'Aktivierung am Kindknoten'
                              ) ||
                                istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                  node,
                                  'Baueinheit > Raum > Wohnen > Flur in der Wohnung',
                                  'Aktivierung am Kindknoten'
                                ) ||
                                istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                  node,
                                  'Baueinheit > Raum > Wohnen > Abstellraum in der Wohnung',
                                  'Aktivierung am Kindknoten'
                                )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              createNewBaueinheitMitRaumProfilAktivierungDialog = true;
                            "
                          >
                            <q-item-section>
                              Raum
                            </q-item-section>
                          </q-item>
                          <q-item
                            :disable="
                              istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst(
                                node,
                                'Baueinheit > Bodenaufbau',
                                'Aktivierung am Kindknoten'
                              )
                            "
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              createNewBaueinheitMitBodenaufbauProfilAktivierungDialog = true;
                            "
                          >
                            <q-item-section>
                              Bodenaufbau
                            </q-item-section>
                          </q-item>
                          <!-- Platzhalter für die Untermenüs/q-items für weitere Baueigenschaftsprofile: -->
                          <q-item
                            disable
                            dense
                            clickable
                            v-close-popup
                            @click="
                              selectedKeyTreeBaueinheiten = node._id;
                              createNewBaueinheitMitXYZProfilAktivierungDialog = true;
                            "
                          >
                            <q-item-section>
                              Weitere Profile folgen später...
                            </q-item-section>
                          </q-item>
                        </q-list>
                      </q-menu>
                    </q-item>
                    <q-separator />
                    <!-- ----------------------------------------------------------------------------------------------------------- -->
                    <!-- Baueinheit umbenennen -->
                    <!-- NEU: Disabling auf Basis von Benutzerberechtigungen per Funktionen mit Parameter node -->
                    <!-- NEU: Umbenennen des Unterbaums für "Bauprojekte" verbieten - TODO XXXXX  #264: Diesen zum offiziellen Baumknotentpy machen -->
                    <!-- NEU: Wenn Knoten "Vorlagen für Baueinheiten", dann Umbenennen disablen -->
                    <q-item
                      :disable="
                        !benutzerDarfBearbeitenNodeTreeBaueinheiten(node) ||
                          !benutzerDarfBearbeitenImBauvorlagenunterbaumNodeTreeBaueinheiten(
                            node
                          ) ||
                          node.baueinheitsBezeichnung.startsWith(
                            'Bauprojekte'
                          ) ||
                          node.baueinheitsBezeichnungKindKnoten ===
                            'Vorlagen für Baueinheiten'
                      "
                      clickable
                      v-close-popup
                      @click="
                        selectedKeyTreeBaueinheiten = node._id;
                        renameSelectedBaueinheitDialog = true;
                      "
                    >
                      <q-item-section
                        >Baueinheit auswählen und umbenennen
                      </q-item-section>
                    </q-item>
                    <!-- ----------------------------------------------------------------------------------------------------------------- -->
                    <!-- NEU: Disabling auf Grund von Benutzerberechtigungen per Funktionen mit Parameter node -->
                    <!-- NEU: Zusätzlich Löschen des Wurzelknotens verbieten -->
                    <!-- NEU: Löschen des Unterbaums für "Bauprojekte" verbieten - TODO XXXXX #264: Diesen zum offiziellen Baumknotentyp machen -->
                    <!-- ACHTUNG: Die Funktion dafür umfasst hier in baueinheiten.vue auch den Bauvorlagenunterbaumwurzelknoten! -->
                    <!-- NEU: Folgendes Menu Item "Baueinheit auswählen und löschen" disabled zugunsten von "Baueinheit löschen" -->
                    <!-- Auswählen und dann löschen machte keinen Sinn - Löschen eines beliebigen Knotens wohl! -->
                    <!--
                    <q-item
                      :disable="
                        knotenIstWurzelTreeBaueinheiten(node._id) ||
                          !benutzerDarfBearbeitenNodeTreeBaueinheiten(node) ||
                          !benutzerDarfBearbeitenImBauvorlagenunterbaumNodeTreeBaueinheiten() ||
                          node.baueinheitsBezeichnung.startsWith('Bauprojekte')
                      "
                      clickable
                      v-close-popup
                      @click="
                        selectedKeyTreeBaueinheiten = node._id;
                        deleteSelectedBaueinheitDialog = true;
                      "
                    >
                      <q-item-section
                        >Baueinheit auswählen und löschen</q-item-section
                      >
                    </q-item>
                    -->
                    <q-separator />
                    <!-- ---------------------------------------------------------------------------------------------------------------- -->
                    <!-- NEU: Kontextmenü, das den per Kontextmenü angewählten Node (Zeile) löscht, ohne ihn zum selected Node zu machen: -->
                    <!--      Der Node (Prop node) wird in der Variablen zuLoeschenderNodeTreeBaueinheiten zwischengespeichert -->
                    <!-- NEU: #253 g) Löschen disablen für Schichten - ist nur noch im Profilformular "Baueinheit > Bodenaufbau" erlaubt! -->
                    <!-- TODO XXXXX #264: "Bauprojekte" zum offiziellen Baumknotentyp machen-->
                    <q-item
                      :disable="
                        knotenIstWurzelTreeBaueinheiten(node._id) ||
                          !benutzerDarfBearbeitenNodeTreeBaueinheiten(node) ||
                          !benutzerDarfBearbeitenImBauvorlagenunterbaumNodeTreeBaueinheiten() ||
                          node.baueinheitsBezeichnung.startsWith(
                            'Bauprojekte'
                          ) ||
                          nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                            node,
                            'Baueinheit > Schicht'
                          )
                      "
                      clickable
                      v-close-popup
                      @click="
                        zuLoeschenderNodeTreeBaueinheiten = node;
                        deleteBaueinheitDialog = true;
                      "
                    >
                      <q-item-section>Baueinheit löschen</q-item-section>
                    </q-item>
                    <!-- NEU: Baueinheit kopieren -->
                    <q-separator />
                    <!-- NEU: Disabling des Markierens des Wurzelknotens -->
                    <!-- NEU: Wenn Knoten "Bauprojekte", dann Markierung setzen für Bewegen disablen -->
                    <q-item
                      clickable
                      v-close-popup
                      :disable="
                        knotenIstWurzelTreeBaueinheiten(node._id) ||
                          node.baueinheitsBezeichnung.startsWith('Bauprojekte')
                      "
                      @click="
                        /* Hier folgt Code, der ggf. existierende Markierungen zurücksetzt und ggf. Markierung am eigenen Node toggled */
                        /* ACHTUNG: Unbedingt $set verwenden, sonst funktioniert es NICHT!!! */
                        if (
                          idWurzelZuBewegenderZweig &&
                          idWurzelZuBewegenderZweig === node._id
                        ) {
                          /* Der geklickte Knoten war bereits markiert, dann die Markierung entfernen (Toggling) */
                          $set(node, 'zweigMarkiertFuerBewegen', false); // Unbedingt $set verwenden!
                          idWurzelZuBewegenderZweig = null; // Den markierten Knoten damit zurücksetzen
                        } else {
                          if (idWurzelZuBewegenderZweig) {
                            /* Markierung für einen anderen bisher markierten, zu verschiebenden/kopierenden Knoten zurücksetzen */
                            $refs.treeBaueinheiten.getNodeByKey(
                              idWurzelZuBewegenderZweig
                            ).zweigMarkiertFuerBewegen = false;
                          }
                          idWurzelZuBewegenderZweig = node._id; // Den geklickten Knoten als neu markierten Node setzen und merken
                          // Den Knoten aus der Datenbank lesen - ACHTUNG: Dieses API lädt aber auch NUR den Knoten, NICHT seine Kinder!
                          // Tenporär enabled, weil in der unten für :disable benutzten neuen Funktion knotenIstImFuerBewegenMarkiertenZweig()
                          // folgender API-Aufruf nicht funktionierte:
                          // const wurzelZuBewegenderZweig = this.$refs.treeBaustoffe.getNodeByKey(this.idWurzelZuBewegenderZweig);
                          // Dies lag aber daran, dass auf das Resultat wurzelZuBewegenderZweig versehentlich mit .this zugegriffen wurde
                          // Daher das folgende Statement zum Lesen des Knotens aus der Datenbank wieder disabled:
                          // loadNodeTreeBaueinheiten(idWurzelZuBewegenderZweig);
                          $set(node, 'zweigMarkiertFuerBewegen', true); // Markierung am geklickten Knoten setzen, unbedingt $set verwenden!
                          showBenutzerNachrichtZweigZumBewegenMarkiert();
                        }
                      "
                    >
                      <q-item-section
                        >Markierung am Zweig setzen/entfernen für
                        Verschieben/Kopieren</q-item-section
                      >
                    </q-item>
                    <q-separator />
                    <!-- NEU: Funktion knotenIstImFuerBewegenMarkiertenZweigTreeBaueinheiten(node._id), die für -->
                    <!-- Knoten, die im markierten Zweig liegen, das Einfügen/Kopieren disabled (sonst käme es zu Fehlern...) -->
                    <!-- NEU: Für "Kopieren" KEIN zusätzliches Disabling des Kopierens innerhalb des Elternknoten des für Bewegen markierten Zweigs! -->
                    <!-- NEU: Kein Verschieben erlauben für Benutzerrolle "Mitarbeiter" in den Bauvorlagenunterbaum! Dieser darf nur -->
                    <!--      von Administratoren und Redakteuren geändert werden -->
                    <!-- NEU: Kopieren von markiertem Zweig nur erlauben nach selben Regeln wie bei Neuanlage Kindknoten. -->
                    <!--      Dies wird durch die Funktion benutzerDarfNeuanlegenKindKnotenOderMarkiertenZweigBewegenUnterNodeTreeBaueinheiten(node) -->
                    <!--      ermittelt. -->
                    <!-- NEU - für #354: -->
                    <!-- @click="bewegeZweigMitAgendaJob(node._id, true)" -->
                    <q-item
                      clickable
                      v-close-popup
                      :disable="
                        !idWurzelZuBewegenderZweig ||
                          knotenIstImFuerBewegenMarkiertenZweigTreeBaueinheiten(
                            node._id
                          ) ||
                          (localStore.state.anmeldeDatenBenutzer
                            .benutzerRolle === 'Mitarbeiter' &&
                            nodeTreeBaueinheitenIstImBauvorlagenunterbaum(
                              node
                            )) ||
                          !benutzerDarfNeuanlegenKindKnotenOderMarkiertenZweigBewegenUnterNodeTreeBaueinheiten(
                            node
                          )
                      "
                      @click="bewegeZweig(node._id, true)"
                    >
                      <q-item-section
                        >Markierten Zweig hierher kopieren</q-item-section
                      >
                      <q-item-section avatar>
                        <div class="row q-col-gutter-none">
                          <q-icon
                            v-if="idWurzelZuBewegenderZweig"
                            name="tab_unselected"
                            color="blue"
                            size="28px"
                            class="q-mr-sm"
                          />
                          <q-icon
                            v-if="idWurzelZuBewegenderZweig"
                            name="tab"
                            color="blue"
                            size="28px"
                            class="q-mr-sm"
                          />
                        </div>
                      </q-item-section>
                    </q-item>
                    <!-- NEU: Für "Verschieben" hier zusätzliches Disabling des Verschiebens innerhalb des Elternknotens des für Bewegen markierten Zweigs! -->
                    <!-- NEU: Verschieben disablen auf Basis von Benutzerrolle und Autoren-Berechtigung: -->
                    <!--      Wenn der Benutzer Mitarbeiter ist (d.h. kein Administrator oder Redakteur ist) -->
                    <!--      und er kein Autor am Wurzelknoten des zum Verschieben markierten Zweigs ist -->
                    <!--      Dafür neue Computed Property benutzerIstAutorAnWurzelVonFuerBewegenMarkiertemZweigTreeBaueinheiten -->
                    <!--      Für Administratoren/Redakteure ist die erste Bedingung in dieser Klammer (... === 'Mitarbeiter') false, -->
                    <!--      damit ist diese ganze Klammer false, daher wird für diese das Verschieben stets NICHT disabled, d.h. enabled -->
                    <!-- NEU: Kein Verschieben erlauben für Benutzerrolle "Mitarbeiter" in den Bauvorlagenunterbaum! Dieser darf nur -->
                    <!--      von Administratoren und Redakteuren geändert werden -->
                    <!--      von Administratoren und Redakteuren geändert werden -->
                    <!-- NEU: Verschieben von markiertem Zweig nur erlauben nach selben Regeln wie bei Neuanlage Kindknoten. -->
                    <!--      Dies wird durch die Funktion benutzerDarfNeuanlegenKindKnotenOderMarkiertenZweigBewegenUnterNodeTreeBaueinheiten(node) -->
                    <!--      ermittelt. -->
                    <!-- TODO XXXXXX - #347: Verschieben verhindern vom Bauvorlagenunterbaum in den Zweig unter "Bauprojekte" -->
                    <!-- NEU - für #354: -->
                    <!-- @click="bewegeZweigMitAgendaJob(node._id, false)" -->
                    <q-item
                      clickable
                      v-close-popup
                      :disable="
                        !idWurzelZuBewegenderZweig ||
                          knotenIstImFuerBewegenMarkiertenZweigTreeBaueinheiten(
                            node._id
                          ) ||
                          knotenIstElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaueinheiten(
                            node._id
                          ) ||
                          (localStore.state.anmeldeDatenBenutzer
                            .benutzerRolle === 'Mitarbeiter' &&
                            !benutzerIstAutorAnWurzelVonFuerBewegenMarkiertemZweigTreeBaueinheiten) ||
                          (localStore.state.anmeldeDatenBenutzer
                            .benutzerRolle === 'Mitarbeiter' &&
                            nodeTreeBaueinheitenIstImBauvorlagenunterbaum(
                              node
                            )) ||
                          !benutzerDarfNeuanlegenKindKnotenOderMarkiertenZweigBewegenUnterNodeTreeBaueinheiten(
                            node
                          )
                      "
                      @click="bewegeZweig(node._id, false)"
                    >
                      <q-item-section
                        >Markierten Zweig hierher verschieben</q-item-section
                      >
                      <q-icon
                        v-if="idWurzelZuBewegenderZweig"
                        name="tab_unselected"
                        color="blue"
                        size="28px"
                        class="q-mr-sm"
                      />
                    </q-item>
                    <q-separator />
                    <!-- ----------------------------------------------------------------------------------------------------------------------------------------------- -->
                    <!-- NEU: Kontextmenü, um "blaue" Auswahl von selected Key/Node generell aufzuheben - könnte auch auf Button gelegt werden, braucht dort aber Platz  -->
                    <!-- ACHTUNG: Auf selectedKeyTreeBaueinheiten sitzt ein Watcher, der bei null-Setzung diverse Aktionen erledigt!                                     -->
                    <q-item
                      :disable="!selectedKeyTreeBaueinheiten"
                      clickable
                      v-close-popup
                      @click="selectedKeyTreeBaueinheiten = null"
                    >
                      <q-item-section
                        >Auswahl einer Baueinheit aufheben</q-item-section
                      >
                    </q-item>
                    <!-- ----------------------------------------------------------------------------------------------------------------------------------------------- -->
                    <!--
                      <q-item-section side>
                        <q-icon name="keyboard_arrow_right" />
                      </q-item-section>
                    -->
                    <!-- ACHTUNG/TODO: Bei den Aktionen im Kontextmenü -->
                    <!-- kann nicht einfach z.B. per @click="deleteSelectedBaueinheitDialog = true -->
                    <!-- statt v-close-popup dieselben @click-Funktionen wie für die Buttons -->
                    <!-- getriggered werden, da diese auf der selektierten Baueinheit arbeiten -->
                    <!-- Stattdessen muss erst die selektierte Baueinheit geändert werden, dann -->
                    <!-- können diese Aktionen getriggered werden -->
                    <!-- Laut https://forum.quasar-framework.org/topic/3010/q-tree-q-context-menu -->
                    <!-- sollte dazu das Kontextmenü an den q-tree Body Slot attached werden -->
                    <!-- Mittels prop.node._id oder node._id oder node.key (?) kann man den zugehörigen -->
                    <!-- Node ermitteln und diesen dann selektieren über eine Zuweisung -->
                    <!-- @click=selectedKeyTreeBaueinheiten = prop.node._id im  -->
                    <!-- Body Slot von q-tree (sehe unten) den Node neu selektieren auf den per Kontextmenü ausgewählten Node -->
                    <!-- Versuch am Header Slot: Bringt mit selber Zuweisung Fehler "prop" is not defined... -->
                    <!-- Am Header Slot funktioniert es dann aber doch noch mit @click="selectedKeyTreeBaueinheiten = node._id" -->
                    <!-- Dies kann dann einfach konkateniert werden mit denselben v-model Aktionen, die auch in den Buttons darüber verwendet werden, -->
                    <!-- z.B. @click="selectedKeyTreeBaueinheiten = node._id; createNewBaueinheitDialog = true" -->
                  </q-list>
                </q-menu>
                <!-- /Context Menu -->
                <!-- ------------------------------------------------------------------------------------------ -->
                <!-- NEU: Tooltip auf dem Header VSlot                                                          -->
                <!-- Vorlage: https://forum.quasar-framework.org/topic/6213/tooltip-for-tree-nodes              -->
                <!-- HINWEIS: Funktioniert auch, wenn der Knoten nicht ausgewählt ist,                          -->
                <!--          da Zugriff auf Properties des Knotens per Property/Parameter node erfolgt         -->
                <!-- Dazu Methode nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst() aufrufen -->
                <!-- ------------------------------------------------------------------------------------------ -->
                <q-tooltip
                  v-if="node.baumKnotenTyp === 'Wurzelknoten'"
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  <b>Wurzelknoten</b> des Bauvorhabenbaums: Mit der linken
                  Maustaste auf das graue Dreieck an einer Baueinheit (Knoten im
                  Baum) klicken, um deren Knoten im Baum auf- bzw. zuzuklappen.
                  Um eine bestimmte Baueinheit auszuwählen, mit der linken
                  Maustaste auf deren farbiges Icon oder deren Text klicken. Die
                  so ausgewählte Baueinheit wird dann an deren Knoten im Baum
                  blau markiert. Zusätzlich werden dann rechts alle relevanten
                  Planungsinformationen für die ausgewählte Baueinheit
                  angezeigt.
                </q-tooltip>
                <q-tooltip
                  v-else-if="
                    node.baumKnotenTyp === 'Bauvorlagenunterbaumwurzelknoten'
                  "
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  In diesem Zweig des Bauvorhabenbaums werden
                  <b>Vorlagen</b> für die Planung von Bauprojekten und
                  Baueinheiten verwaltet. Diese können mit Kontextmenüs (rechte
                  Maustaste an Knoten im Baum) markiert und in Bauprojekte
                  kopiert werden.
                </q-tooltip>
                <q-tooltip
                  v-else-if="
                    node.baueinheitsBezeichnung.startsWith('Bauprojekte')
                  "
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  In diesem Zweig des Bauvorhabenbaums werden <b>Bauprojekte</b>
                  verwaltet. Neue Projekte können mit obiger Schaltfläche
                  'Baueinheit anlegen' unter dem aktuell ausgewählten Knoten im
                  Baum oder mit Kontextmenüs (rechte Maustaste an Knoten im
                  Baum) angelegt werden.
                </q-tooltip>
                <!-- NEU: Im Rahmen von #272/#505 "Aktivierte Baueigenschaftsprofile an dieser Baueinheit" verfeinert. -->
                <!-- Es werden jetzt die jeweils "untersten" aktivierten Profile angezeigt -->
                <!-- Text einstweilen geändert in "Relevante aktivierte Baueigenschaftsprofile an dieser Baueinheit: " -->
                <!-- Eigentlich: "Aktivierte Baueigenschaftsprofile, für die diese Baueinheit die unterste im Pfad ist, an -->
                <!--              dem das Profil aktiviert ist: " -->
                <q-tooltip
                  v-else
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  Relevante aktivierte Baueigenschaftsprofile an dieser
                  Baueinheit:
                  <br />
                  <strong>
                    {{
                      showZugeordneteBaueigenschaftsProfileAusgewaehlteBaueinheit(
                        node
                      )
                    }}
                    <br />
                  </strong>
                  Hinweis: Als "relevant" werden hier diejenigen aktivierten
                  Profile aufgeführt, für die die betreffende Baueinheit der
                  <strong>unterste</strong> Knoten im Pfad von der Wurzel bis zu
                  den Blättern im Bauvorhabenbaum ist, an dem das betreffende
                  Profil aktiviert ist
                </q-tooltip>
                <!-- --------------------------------------------------------------------------------- -->
                <div class="row items-center">
                  <div v-if="node.baumKnotenTyp === 'Blattknoten'">
                    <q-icon
                      name="eco"
                      color="green"
                      size="28px"
                      class="q-mr-sm"
                    ></q-icon>
                    <!-- Quasar Font Weights per class="text-weight-*": Siehe https://quasar.dev/style/typography#Font-Weights -->
                    <span class="text-weight-regular">
                      {{ node.baueinheitsBezeichnung }}
                      <!-- NEU: Bei für Verschieben/Kopieren markierten Nodes eie zusätzliches Icon anzeigen -->
                      <!-- Siehe https://quasar.dev/vue-components/tree#Example--Customizing-nodes -->
                      <q-icon
                        v-if="node.zweigMarkiertFuerBewegen"
                        name="tab_unselected"
                        color="blue"
                        size="28px"
                        class="q-mr-sm"
                      />
                    </span>
                  </div>
                  <div v-else>
                    <!-- Wurzel- und Verzweigungsknoten -->
                    <q-icon
                      name="account_tree"
                      color="orange"
                      size="28px"
                      class="q-mr-sm"
                    ></q-icon>
                    <!-- Quasar Font Weights per class="text-weight-*": Siehe https://quasar.dev/style/typography#Font-Weights -->
                    <span class="text-weight-medium">
                      {{ node.baueinheitsBezeichnung }}
                      <!-- NEU: Bei für Verschieben/Kopieren markierten Nodes eie zusätzliches Icon anzeigen -->
                      <!-- Siehe https://quasar.dev/vue-components/tree#Example--Customizing-nodes -->
                      <q-icon
                        v-if="
                          node.zweigMarkiertFuerBewegen &&
                            node != selectedNodeTreeBaueinheiten
                        "
                        name="tab_unselected"
                        color="blue"
                        size="28px"
                        class="q-mr-sm"
                      />
                      <q-icon
                        v-if="
                          node.zweigMarkiertFuerBewegen &&
                            node == selectedNodeTreeBaueinheiten
                        "
                        name="tab_unselected"
                        color="white"
                        size="28px"
                        class="q-mr-sm"
                      />
                    </span>
                  </div>
                </div>
                <!--  </div> -->
                <!-- Für auskommentiertes <div> oben -->
              </template>
              <!-- Body-Slot mit Kontextmenü - auskommentiert, da der Body Slot auch ohne Inhalt unnötigen Platz verbraucht -->
              <!-- Kontextmenü, das den Knoten neu selektiert, hier im Body - nach einigen Versuchen nun auch oben im Header,-->
              <!-- allerdings dort mit @click="selectedKeyTreeBaueinheiten = node._id" statt hier ... = prop.node._id" !!! -->
              <!--
                <template v-slot:default-body="prop">
                  <div class="row items-center @click.stop">
                    {{ prop.node.baumKnotenTyp }}
                  <q-menu touch-position context-menu>
                      <q-list dense style="min-width: 100px">
                        <q-item clickable @click="selectedKeyTreeBaueinheiten = prop.node._id">
                          <q-item-section>Knoten selektieren</q-item-section>
                        </q-item>
                        </q-list>
                    </q-menu>
                  </div>
                </template>
              -->
            </q-tree>
          </q-scroll-area>
          <!-- </q-card> -->
          <!-- ACHTUNG: Diese q-card DISABLED, da sie "doppelte" horizontale Scrollbalken verursacht unter der QTable!!! -->
        </template>
        <template v-slot:after>
          <div class="q-pa-xs" v-if="selectedNodeTreeBaueinheiten">
            <!-- <q-card ref="cardEigenschaften"> -->
            <!-- =================================================================================================== -->
            <!-- ACHTUNG: class="q-pa-xs" oder "q-pa-none" kontrolliert Breite der Tableiste!                        -->
            <!-- =================================================================================================== -->
            <q-tabs
              mobile-arrows
              class="q-pa-none text-black bg-grey-4 full-width"
              active-color="primary"
              active-bg-color="white"
              content-class="text-h7"
              dense
              align="left"
              v-model="tabBaueinheiten"
              @input="initialisiereAusgewaehltesTabBaueinheiten"
            >
              <q-tab
                name="strukturierungsAngabenTabBaueinheiten"
                label="Angaben zur Baueinheit"
                no-caps
              >
                <!-- --------------------------------------------------------------------------------- -->
                <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
                <!-- --------------------------------------------------------------------------------- -->
                <q-tooltip
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  Verwaltungsinformationen zur links im Bauvorhabenbaum
                  ausgewählten Baueinheit
                  <strong
                    >"{{
                      selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                    }}"</strong
                  >
                </q-tooltip>
              </q-tab>
              <q-tab
                name="beschreibungTabBaueinheiten"
                label="Beschreibung"
                no-caps
              >
                <!-- --------------------------------------------------------------------------------- -->
                <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
                <!-- --------------------------------------------------------------------------------- -->
                <q-tooltip
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  Fachliche Beschreibung für die links im Bauvorhabenbaum
                  ausgewählte Baueinheit
                  <strong
                    >"{{
                      selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                    }}"</strong
                  >
                </q-tooltip>
              </q-tab>
              <!-- --------------------------------------------------------------------- -->
              <!-- NEU: Reihenfolge der Tabs geändert, die häufig benutzten weiter links -->
              <!-- NEU: Disabling in Abhängigkeit vom Typ der ausgewählten Baueinheit im Bauvorhabenbaum -->
              <!-- TODO XXXXXX #264: Für den Knoten "Bauprojekte" sollte ein eigener baumKnotenTyp sollte eingeführt werden -->
              <q-tab
                :disable="
                  selectedNodeTreeBaueinheiten.baumKnotenTyp ===
                    'Wurzelknoten' ||
                    selectedNodeTreeBaueinheiten.baumKnotenTyp ===
                      'Bauvorlagenunterbaumwurzelknoten' ||
                    selectedNodeTreeBaueinheiten.baueinheitsBezeichnung.startsWith(
                      'Bauprojekte'
                    )
                "
                name="baueigenschaftsProfilFormulareTabBaueinheiten"
                label="Fachliche Planung"
                no-caps
              >
                <!-- --------------------------------------------------------------------------------- -->
                <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
                <!-- --------------------------------------------------------------------------------- -->
                <q-tooltip
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  Formulare zur fachlichen Planung für die links im
                  Bauvorhabenbaum ausgewählte Baueinheit
                  <strong
                    >"{{
                      selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                    }}"</strong
                  >
                  <br />
                  Hinweis: Die Unter-Tabs bei Anwahl ('Bauvorhaben', 'Standort',
                  etc.) entsprechen bestimmten Baueigenschaftsprofilen
                </q-tooltip>
              </q-tab>
              <q-tab
                :disable="
                  selectedNodeTreeBaueinheiten.baumKnotenTyp ===
                    'Wurzelknoten' ||
                    selectedNodeTreeBaueinheiten.baumKnotenTyp ===
                      'Bauvorlagenunterbaumwurzelknoten' ||
                    selectedNodeTreeBaueinheiten.baueinheitsBezeichnung.startsWith(
                      'Bauprojekte'
                    )
                "
                name="zugeordneteBaustoffeTabBaueinheiten"
                label="Zugeordnete Baustoffe"
                no-caps
              >
                <!-- --------------------------------------------------------------------------------- -->
                <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
                <!-- --------------------------------------------------------------------------------- -->
                <q-tooltip
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  Baustoffe, die der links im Bauvorhabenbaum ausgewählten
                  Baueinheit
                  <strong
                    >"{{
                      selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                    }}"</strong
                  >
                  zur Verwendung zugeordnet werden können
                </q-tooltip>
              </q-tab>
              <!-- NEU: Kein Disabling für "zugeordnete Bauinformationen": -->
              <!--
                :disable="
                  selectedNodeTreeBaueinheiten.baumKnotenTyp ===
                    'Wurzelknoten' ||
                  selectedNodeTreeBaueinheiten.baumKnotenTyp ===
                    'Bauvorlagenunterbaumwurzelknoten' ||
                  selectedNodeTreeBaueinheiten.baueinheitsBezeichnung.startsWith('Bauprojekte')
                  "
              -->
              <q-tab
                name="zugeordneteBauinformationenTabBaueinheiten"
                label="Zugeordnete Bauinformationen"
                no-caps
              >
                <!-- --------------------------------------------------------------------------------- -->
                <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
                <!-- --------------------------------------------------------------------------------- -->
                <q-tooltip
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  Dokumente und Links, die der links im Bauvorhabenbaum
                  ausgewählten Baueinheit
                  <strong
                    >"{{
                      selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                    }}"</strong
                  >
                  einzeln als planungsrelevant zugeordnet werden können
                </q-tooltip>
              </q-tab>
              <!-- NEU: Tab "Zugeordnete Bauinformationsprofile" -->
              <q-tab
                name="bauinformationsProfileTabBaueinheiten"
                label="Bauinformationsprofile"
                no-caps
              >
                <!-- --------------------------------------------------------------------------------- -->
                <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
                <!-- --------------------------------------------------------------------------------- -->
                <q-tooltip
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  Zusammengehörige Dokumente und Links, die an der links im
                  Bauvorhabenbaum ausgewählten Baueinheit
                  <strong
                    >"{{
                      selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                    }}"</strong
                  >
                  als Profile gemeinsam aktiviert bzw. deaktiviert werden können
                </q-tooltip>
              </q-tab>
              <!-- ---------------------------------------------------------------------- -->
              <q-tab
                name="baueigenschaftenTabBaueinheiten"
                label="Baueigenschaften an der Baueinheit"
                no-caps
              >
                <!-- --------------------------------------------------------------------------------- -->
                <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
                <!-- --------------------------------------------------------------------------------- -->
                <q-tooltip
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  Fachliche Eigenschaften, die an der links im Bauvorhabenbaum
                  ausgewählten Baueinheit
                  <strong
                    >"{{
                      selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                    }}"</strong
                  >
                  einzeln aktiviert bzw. deaktiviert werden können
                </q-tooltip>
              </q-tab>
              <!-- NEU: Tab "Zugeordnete Baueigenschaftsprofile" umbenannt in "Baueigenschaftsprofile", zusätzlich das Tab verschoben an Position hinter "Baueigenschaften" -->
              <q-tab
                name="baueigenschaftsProfileTabBaueinheiten"
                label="Baueigenschaftsprofile"
                no-caps
              >
                <!-- --------------------------------------------------------------------------------- -->
                <!-- NEU: Tooltip auf dem obigen Tab                                                  -->
                <!-- --------------------------------------------------------------------------------- -->
                <q-tooltip
                  :delay="1000"
                  :offset="[0, 10]"
                  max-width="500px"
                  content-class="bg-secondary text-white text-caption shadow-4"
                >
                  Zusammengehörige fachliche Eigenschaften, die an der links im
                  Bauvorhabenbaum ausgewählten Baueinheit
                  <strong
                    >"{{
                      selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                    }}"</strong
                  >
                  als Profile gemeinsam aktiviert bzw. deaktiviert werden können
                </q-tooltip>
              </q-tab>
              <!-- Test-Tab für Test des layoutgesteuerten generischen Profilformulars an Baueinheiten - aktuell disabled: -->
              <q-tab
                v-if="false"
                name="layoutGesteuertesGenerischesProfilFormularTabBaueinheiten"
                label="Layoutgesteuertes generisches Profilformular"
                no-caps
              />
              <q-tab
                v-if="localStore.state.debugMode"
                name="debugBauvorhabenBaumTabBaueinheiten"
                label="Debug-Info: Bauvorhabenbaum"
                no-caps
              />
              <q-tab
                v-if="localStore.state.debugMode"
                name="debugZugeordneteBaustoffeTabBaueinheiten"
                label="Debug-Info: Zugeordnete Baustoffe"
                no-caps
              />
            </q-tabs>
            <!-- <q-separator /> -->
            <!-- ----------------------------------------------------------------------------------------------------------------------------------- -->
            <q-tab-panels v-model="tabBaueinheiten" keep-alive animated>
              <!-- NEU: keep-alive, um Zustand der Untertabs zu erhalten! -->
              <!-- TODO: width justieren -->
              <!-- ALT: style="max-width: 550px" -->
              <!-- ALT: style="min-width: 1300px"> -->
              <!-- Erzeugt 2 Scrollbalken unten bei Hilfe rechts!!! -->
              <!-- class="bg-grey-6" -->
              <q-tab-panel name="strukturierungsAngabenTabBaueinheiten">
                <q-card class="q-pa-xs">
                  <div v-if="selectedNodeTreeBaueinheiten != null">
                    <p class="text-h6" v-if="$q.screen.gt.sm">
                      Angaben zu der im Bauvorhabenbaum ausgewählten Baueinheit
                      <strong
                        >"{{
                          selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                        }}"</strong
                      >
                    </p>
                    <p class="text-subtitle1" v-else>
                      Angaben zu der im Bauvorhabenbaum ausgewählten Baueinheit
                      <strong
                        >"{{
                          selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                        }}"</strong
                      >
                    </p>
                  </div>
                  <!-- class="bg-grey-6" -->
                  <div
                    class="row full-width items-start q-pa-xs q-col-gutter-xs"
                  >
                    <div class="col-md-4 col-12">
                      <div>
                        <b>Bezeichnung der Baueinheit </b>
                      </div>
                      <!-- TODO XXXXXX: disable am q-input entfernen, Bezeichnung änderbar machen (ist bereits änderbar über Kontextmenü im Bauvorhabenbaum!) -->
                      <!--
                        hint="Frei wählbarer Text, der die Baueinheit als Knoten im Bauvorhabenbaum bezeichnet, z.B. 'Bodenaufbau'"
                        hide-hint
                        -->
                      <q-input
                        disable
                        label="Bezeichnung der Baueinheit im Bauvorhabenbaum"
                        v-model="
                          selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                        "
                        square
                        bg-color="teal-2"
                        standout="bg-teal-4 text-black"
                        dense
                        hint="Hinweis: Die Bezeichnung kann aktuell nur per Kontextmenü 'Baueinheit auswählen und umbenennen' im Bauvorhabenbaum geändert werden'"
                        autogrow
                      />
                      <div>
                        <br />
                        <b
                          >Systemverwaltete Angaben zur Struktur im
                          Bauvorhabenbaum
                        </b>
                      </div>
                      <q-input
                        disable
                        label="Knotentyp im Bauvorhabenbaum"
                        v-model="selectedNodeTreeBaueinheiten.baumKnotenTyp"
                        square
                        bg-color="teal-2"
                        standout="bg-teal-4 text-black"
                        dense
                        hint="Typ des Knotens im Bauvorhabenbaum: 'Wurzelknoten', 'Verzweigungsknoten', 'Blattknoten'"
                        hide-hint
                      />
                      <q-input
                        v-if="
                          selectedNodeTreeBaueinheiten.baumKnotenTyp !==
                            'Blattknoten'
                        "
                        disable
                        label="Verzweigungstyp im Bauvorhabenbaum (für Wurzel- und Verzweigungsknoten)"
                        v-model="selectedNodeTreeBaueinheiten.verzweigungsTyp"
                        square
                        bg-color="teal-2"
                        standout="bg-teal-4 text-black"
                        dense
                        hint="Typ der Verzweigung im Bauvorhabenbaum: '(ungeordnete) Selektion', 'ungeordnete Aggregation', 'vertikal angeordnete Aggregation', 'horizontal angeordnete Aggregation'"
                        hide-hint
                      />
                    </div>
                    <!-- 2. Spalte: -->
                    <div class="col-md-4 col-12">
                      <div>
                        <b>Bemerkung für die Baueinheit </b>
                      </div>
                      <q-input
                        :disable="
                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                        "
                        label="Bemerkung für die Baueinheit im Bauvorhabenbaum"
                        v-model="
                          selectedNodeTreeBaueinheiten.baueinheitsBemerkung
                        "
                        square
                        bg-color="teal-2"
                        standout="bg-teal-4 text-black"
                        dense
                        hint="Optionale Bemerkung, z.B. 'Bauvorhaben ist in Ausschreibungsphase'"
                        hide-hint
                        autogrow
                      />
                      <br />
                    </div>
                    <!-- 3. Spalte: -->
                    <div class="col-md-4 col-12">
                      <div>
                        <b>Der Baueinheit zugeordnete Autoren </b>
                      </div>
                      <!-- NEU: Autoren mit anzeigen -->
                      <!-- ALT: -->
                      <!--
                          :value="
                            selectedNodeTreeBaueinheiten.benutzerKennungenAutoren
                          "
                          :options="
                            selectedNodeTreeBaueinheiten.benutzerKennungenAutoren
                          hide-bottom-space
                        -->
                      <!-- NEU: Disabling des QSelect in folgenden Fällen - siehe internes Design dafür
                                  - wenn der Benutzer wegen seiner Benutzerrolle 'Mitarbeiter' und der Tatsache, dass er nicht Autor an der ausgewählten Baueinheit
                                    ist, den Knoten nicht bearbeiten darf
                                  - wenn es sich um den Wurzelknoten handelt
                                  - wenn es sich um einen Knoten im Bauvorlagenunterbaum handelt
                                  - oder wenn Benutzerrolle "Mitarbeiter" ist und bisheriges Array-Feld benutzerKennungenAutoren leer ist
                                    Dies betrifft (optionale) sogenannte "Strukturierungsknoten" mit leerem Array-Feld benutzerKennungenAutoren
                                    unterhalb des Wurzelknotens, die nur von Administratoren und Redakteuren angelegt und verändert werden
                                    dürfen
                        -->
                      <!-- ACHTUNG: Das QSelect für die Autoren hat Unterschiede zum QSelect für zugeordnete Bauinformationen: -->
                      <!--          1. Prop emit-value notwendig, zusammen mit option-value="benutzerKennung" -->
                      <!--          2. Beim Abspeichern im Backend muss selectModelAutorenAusgewaehlteBaueinheit im Body mitgegeben werden, -->
                      <!--             (v-model), NICHT selectedNodeTreeBaueinheiten.benutzerKennungenAutoren (NICHT das v-model) -->
                      <!-- NEU: Zusätzlich externe Validation am QSelect -->
                      <!-- Mit :error, nicht mit :rules -->
                      <!-- Wenn Autoren am Elternknoten zugeordnet sind, darf wegen Vererbungsregel für Autoren das Feld nicht leer sein! -->
                      <!-- Dies geschieht per :error="!isValidAutorenAusgewaehlteBaueinheit", isValidAutorenAusgewaehlteBaueinheit ist computed -->
                      <!-- Zusätzlich unten Error VSlot am QSelect für Error Message eingefügt  -->
                      <!-- Siehe https://quasar.dev/vue-components/input#External-validation -->
                      <!-- Bei Validation Error muss zusätzlich der "Speichern"- Button disabled werden mit derselben computed Property! -->
                      <!-- NEU: Eintragung von Autoren an der Baueinheit für den Unterbaum für "Bauprojekte" verbieten -->
                      <!-- Ohne dieses Disabling können dort Autoren eingetragen werden, was dann dazu führt, dass normale Mitarbeiter -->
                      <!-- keine Bauvorhaben mehr darunter anlegen können (Bug)!!! -->
                      <!-- TODO XXXXX #264: Diesen zum offiziellen Baumknotentyp machen -->
                      <q-badge
                        v-if="localStore.state.debugMode"
                        color="secondary"
                        multi-line
                      >
                        selectModelAutorenAusgewaehlteBaueinheit:
                        {{ selectModelAutorenAusgewaehlteBaueinheit }}
                      </q-badge>
                      <q-select
                        dense
                        :error="!isValidAutorenAusgewaehlteBaueinheit"
                        square
                        bg-color="teal-2"
                        standout="bg-teal-4 text-black"
                        :disable="
                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                            selectedNodeTreeBaueinheiten.baumKnotenTyp ===
                              'Wurzelknoten' ||
                            nodeTreeBaueinheitenIstImBauvorlagenunterbaum(
                              selectedNodeTreeBaueinheiten
                            ) ||
                            selectedNodeTreeBaueinheiten.baueinheitsBezeichnung.startsWith(
                              'Bauprojekte'
                            ) ||
                            (localStore.state.anmeldeDatenBenutzer
                              .benutzerRolle === 'Mitarbeiter' &&
                              selectedNodeTreeBaueinheiten
                                .benutzerKennungenAutoren.length === 0)
                        "
                        label="Der Baueinheit zugeordnete Autoren auswählen/abwählen"
                        v-model="selectModelAutorenAusgewaehlteBaueinheit"
                        :options="
                          selectFilterOptionsAutorenAusgewaehlteBaueinheit
                        "
                        option-value="benutzerKennung"
                        emit-value
                        stack-label
                        use-chips
                        :multiple="true"
                        options-selected-class="text-primary"
                        options-dense
                        use-input
                        input-debounce="0"
                        @new-value="
                          createSelectValueAutorenAusgewaehlteBaueinheit
                        "
                        @filter="
                          selectFilterFunctionAutorenAusgewaehlteBaueinheit
                        "
                        bottom-slots
                        @focus="
                          showHintSelectAutorenAusgewaehlteBaueinheit = true
                        "
                        @blur="
                          showHintSelectAutorenAusgewaehlteBaueinheit = false
                        "
                      >
                        <!-- Zu den Icons siehe https://quasar.dev/vue-components/select#Decorators - erfordert "bottom-slots" Prop am q-select  -->
                        <template
                          v-slot:append
                          v-if="selectModelAutorenAusgewaehlteBaueinheit"
                        >
                          <q-icon name="search" @click.stop />
                          <!-- NEU: Statt "clearable" Prop am q-select expliziter Cancel-Icon - erlaubt es, dessen Color zu setzen -->
                          <!-- Vorlage: https://quasar.dev/vue-components/select#Clearable -->
                          <q-icon
                            name="cancel"
                            @click.stop="
                              selectModelAutorenAusgewaehlteBaueinheit = []
                            "
                            class="cursor-pointer"
                            color="primary"
                          />
                          <!-- ACHTUNG: TODO - Muss oben leerer Array sein??? -->
                        </template>
                        <!-- <template v-slot:hint> -->
                        <!-- NEU: Hint nur anzeigen, wenn das q-select Fokus hat -->
                        <!-- Per v-if="showHintSelectAutorenAusgewaehlteBaueinheit" und native Vue Events: -->
                        <!-- @focus="showHintSelectAutorenAusgewaehlteBaueinheit=true" -->
                        <!-- @blur="showHintSelectAutorenAusgewaehlteBaueinheit=false" -->
                        <template
                          v-slot:hint
                          v-if="showHintSelectAutorenAusgewaehlteBaueinheit"
                        >
                          <ul class="q-pl-xs">
                            <li>
                              <strong>Filtern:</strong> Die Benutzerkennung
                              (z.B. "bob.baumeistern@kurz-fischer.de") oder die
                              Benutzerrolle (z.B."Mitarbeiter, "Redakteur")
                              eines Autors als Filtertext in das Eingabefeld
                              eingeben. Auch unvollständige Angaben (z.B.
                              "Musterm") sind möglich. Dies filtert die im
                              Dropdown-Menü angezeigten Optionen.
                            </li>
                            <li>
                              <strong>Auswählen:</strong> Der ausgewählten
                              Baueinheit zugeordnete Autoren im Dropdown-Menü
                              auswählen.
                            </li>
                            <li>
                              <strong>Abwählen:</strong> Ausgewählte Autoren
                              können mit
                              <q-icon
                                name="cancel"
                                color="primary"
                              />&nbsp;abgewählt werden.
                            </li>
                            <li>
                              Zum
                              <strong>Speichern:</strong> Unten Schaltfläche
                              "Speichern" drücken.
                            </li>
                          </ul>
                          <!-- <br /> <br /> <br /> -->
                          <!-- TODO: Um vertikalen Scrollbalken zu verhindern, funktioniert nicht -->
                        </template>
                        <template v-slot:selected-item="scope">
                          <q-chip
                            removable
                            dense
                            @remove="scope.removeAtIndex(scope.index)"
                            :tabindex="scope.tabindex"
                            color="primary"
                            text-color="white"
                            class="q-ma-xs shadow-4"
                          >
                            <!-- ALT: -->
                            <!-- {{ scope.opt }} -->
                            <!-- ACHTUNG - hier NICHT: scope.opt.benutzerKennung !!! -->
                            <!-- ACHTUNG: Bzgl. Sanitization wird hier für die Anzeige im q-chip kein v-html verwendet, sondern wie unten bei den Options nur Moustaches -->
                            <!-- NEU: Long Label Truncation, mit Tooltip der vollen Bezeichnung, mittels spezieller CSS Class "ellipsis": -->
                            <!-- Damit Truncation für lange Texte an QChip - Vorlage: https://quasar.dev/vue-components/chip#Example--Long-label-truncation -->
                            <div class="ellipsis">
                              {{ scope.opt }}
                              <q-tooltip
                                :delay="1000"
                                :offset="[0, 10]"
                                max-width="500px"
                                content-class="bg-secondary text-white text-caption shadow-4"
                                >{{ scope.opt }}</q-tooltip
                              >
                            </div>
                          </q-chip>
                        </template>
                        <template v-slot:option="scope">
                          <q-item
                            v-bind="scope.itemProps"
                            v-on="scope.itemEvents"
                          >
                            <!--
                                <q-item-section avatar>
                                  <q-icon :name="scope.opt.icon" />
                                </q-item-section>
                                -->
                            <q-item-section>
                              <q-item-label
                                v-html="scope.opt.benutzerKennung"
                              />
                              <q-item-label caption>{{
                                scope.opt.benutzerRolle
                              }}</q-item-label>
                            </q-item-section>
                          </q-item>
                        </template>
                        <!-- NEU: VSlot für externe Validation Errors: -->
                        <template v-slot:error>
                          Es muss mindestens ein Autor ausgewählt werden
                        </template>
                      </q-select>
                      <br />
                      <br />
                      <br />
                      <br />
                      <div v-if="localStore.state.debugMode">
                        <b>Interne Id der ausgewählten Bauinheit</b>
                        <br />
                        {{ selectedNodeTreeBaueinheiten._id }}
                      </div>
                    </div>
                  </div>
                  <q-separator />
                  <div class="row full-width q-pa-xs q-col-gutter-xs">
                    <!-- ALT: style="width: 90%" -->
                    <div class="col-md-4 col-12">
                      <q-btn
                        dense
                        :disable="
                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                        "
                        color="positive"
                        glossy
                        class="stretch full-width"
                        style="height: 100%"
                        type="submit"
                        @click="
                          updateAngabenZurBaueinheitAusgewaehlteBaueinheit()
                        "
                        label="Angaben zur Baueinheit speichern"
                        no-caps
                      />
                    </div>
                    <div class="col-md-4 col-12">
                      <q-btn
                        dense
                        :disable="
                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                        "
                        color="deep-orange"
                        class="stretch full-width"
                        style="height: 100%"
                        text-color="white"
                        glossy
                        label="Eingaben auf Originalwerte zurücksetzen"
                        no-caps
                        @click="
                          resetAngabenZurBaueinheitAusgewaehlteBaueinheit()
                        "
                      />
                    </div>
                  </div>
                </q-card>
              </q-tab-panel>
              <!-- ------------------------------------------------------------------------------------------------------------------------------- -->
              <q-tab-panel name="beschreibungTabBaueinheiten">
                <q-card class="q-pa-xs">
                  <!-- TODO: width justieren, früher 1200px, jetzt (besser) 1300px -->
                  <!-- ALT: style="min-width: 1200px" -->
                  <!-- NEU: style="min-wdith: 1300px" -->
                  <!-- Mit 1300px kein horizontaler Scrollbalken, auch wenn linker und rechter Drawer offen sind -->
                  <!-- ACHTUNG: Durch "autogrow" am QInput-Feld ändert sich sowohl Höhe als auch Breite dieses Panels abhängig vom Feldinhalt!!! -->
                  <div v-if="selectedNodeTreeBaueinheiten != null">
                    <p class="text-h6" v-if="$q.screen.gt.sm">
                      Beschreibung für die im Bauvorhabenbaum ausgewählte
                      Baueinheit
                      <strong
                        >"{{
                          selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                        }}"</strong
                      >
                    </p>
                    <p class="text-subtitle1" v-else>
                      Beschreibung für die im Bauvorhabenbaum ausgewählte
                      Baueinheit
                      <strong
                        >"{{
                          selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                        }}"</strong
                      >
                    </p>
                    <!-- Test mit Markdown Editor für Vue, Vue Wrapper für TOAST UI Editor, -->
                    <!-- https://github.com/nhn/toast-ui.vue-editor -->
                    <!-- Funktioniert nicht, Icons werden nicht angezeigt, zerschossenes Layout des Editors!!! -->
                    <!-- Eventuell Konflikt mit Quasar? -->
                    <!--
                    <div>
                      <markdownEditor
                        v-model="selectedNodeTreeBaueinheiten.baueinheitsBeschreibung"
                        :options="markdownEditorOptions"
                        previewStyle="vertical"
                        mode="markdown"
                        height="600px"
                      >
                      </markdownEditor>
                    </div>
                    -->
                    <!-- Test mit q-input und q-markdown: -->
                    <div class="row full-width q-pa-xs q-col-gutter-xs">
                      <div class="col-md-6 col-12">
                        <strong>Eingabe (im Markdown-Format)</strong>
                        <br />
                        <!-- ACHTUNG: no-html wegen Security!!! -->
                        <!-- ACHTUNG: Tests ergeben, dass bei q-input standout="..." die Textfarbe immer weiß ist, -->
                        <!-- auch wenn standout="bg-green-1 text-black" angegeben wird!!! -->
                        <!-- Textfarbe weiß ist aber bei Hintergrundfarbe green-1 (sollte gleich wie in fachlicher Hilfe sein) nicht lesbar! -->
                        <!-- Deshalb das q-input Feld auf q-input square umgestellt, color="green-1" beeinflusst den Strich unten -->
                        <!-- wenn das Feld im Fokus ist -->
                        <q-input
                          :disable="
                            !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                          "
                          v-model="
                            selectedNodeTreeBaueinheiten.baueinheitsBeschreibung
                          "
                          square
                          dense
                          type="textarea"
                          color="green-1"
                          bg-color="green-1"
                          debounce="300"
                          autofocus
                          autogrow
                          no-html
                        >
                        </q-input>
                      </div>
                      <!-- Ende linke Spalte -->
                      <div class="col-md-6 col-12">
                        <strong
                          >Formatierte Ausgabe (Vorschau fachliche
                          Hilfe):</strong
                        >
                        <br />
                        <q-list dense>
                          <q-item dense class="bg-green-1">
                            <q-markdown
                              :src="
                                selectedNodeTreeBaueinheiten.baueinheitsBeschreibung
                              "
                            />
                          </q-item>
                        </q-list>
                      </div>
                      <!-- TODO: Löschen Baueinheitsbeschreibung??? -->
                    </div>
                    <div class="row full-width q-pa-xs q-col-gutter-xs">
                      <div class="col-md-3 col-12">
                        <!-- ALT: url="http://localhost:4444/upload/" -->
                        <!-- NEU: :url="computeUploadURL" // computed Property -->
                        <!-- :factory="uploadFile" mit neuer Factory Function uploadFile, die den JWT Header übermittelt wie in den sonstigen Axios API Calls -->
                        <!-- ALT: style="max-width: 255px" oder style="width: 90%" -->
                        <q-uploader
                          :disable="
                            !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                          "
                          square
                          class="stretch full-width"
                          :factory="uploadFile"
                          ref="uploaderBaueinheitsBeschreibung"
                          :url="computeUploadURL"
                          label="Bild hochladen für internen Link"
                          accept=".jpg, .png, .tif, .gif"
                          color="light-green"
                          text-color="white"
                          @uploaded="
                            displayLinkForUploadedFileUploaderBaueinheitsBeschreibung
                          "
                          :multiple="false"
                        />
                      </div>
                      <div
                        class="col-3"
                        v-if="uploadDoneBaueinheitsBeschreibung"
                      >
                        <strong>Interner Link für hochgeladenes Bild:</strong>
                        <br />
                        {{ internerLinkAusUploadBaueinheitsBeschreibung }}
                        <br />
                        <br />
                        <!-- ACHTUNG: Am folgenden q-btn kann type="submit" bleiben, da nicht Teil eines q-forms!!! -->
                        <!-- ALT:  style="width: 90%" -->
                        <q-btn
                          dense
                          :disable="
                            !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                          "
                          class="stretch full-width"
                          color="secondary"
                          glossy
                          type="submit"
                          @click="
                            copyToClipboardBaueinheitsBeschreibung(
                              internerLinkAusUploadBaueinheitsBeschreibung
                            )
                          "
                          label="Link in die Zwischenablage kopieren"
                          no-caps
                        />
                        <div
                          v-if="copyToClipboardDoneBaueinheitsBeschreibung"
                          class="text-caption"
                        >
                          Zum Einfügen des Bildes in die Beschreibung nun diesen
                          Link mit Strg+V in den Markdown oben einfügen.
                          Anschließend Linkbezeichnung und Linkanzeigetext
                          anpassen.
                        </div>
                      </div>
                    </div>
                    <!-- -------------------------------------------------------------------------- -->
                    <div class="row full-width q-pa-xs q-col-gutter-xs">
                      <!-- NEU: q-select zur Auswahl von Sonderzeichen auch hier an der Baueinheitsbeschreibung! -->
                      <div class="col-md-6 col-12">
                        <b
                          >Sonderzeichen im Markdown-Format in obiges
                          Eingabefeld einfügen:</b
                        >
                        <div class="text-caption">
                          Im folgenden Dropdown-Menü ein Sonderzeichen
                          auswählen. Dabei wird dessen-Formatierung in die
                          Zwischenablage kopiert. Diese mit Strg+V an der
                          gewünschten Cursorposition in obiges Eingabefeld
                          einfügen.
                        </div>
                        <q-select
                          dense
                          :disable="
                            !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                          "
                          square
                          bg-color="teal-2"
                          standout="bg-teal-4 text-black"
                          input-class="text-white"
                          filled
                          options-dense
                          :multiple="false"
                          v-model="selectModelSonderzeichenBaueinheit"
                          :options="selectOptionsSonderzeichen"
                          stack-label
                          label="Sonderzeichen - per Dropdown-Menü (rechts) auswählen"
                          :display-value="
                            `${
                              selectModelSonderzeichenBaueinheit
                                ? selectModelSonderzeichenBaueinheit.label
                                : 'Kein Sonderzeichen ausgewählt'
                            }`
                          "
                          :display-value-sanitize="false"
                          @input="
                            copyToClipboardSonderzeichenBaueinheit(
                              selectModelSonderzeichenBaueinheit.value
                            )
                          "
                        >
                          <template v-slot:append>
                            <q-icon
                              v-if="selectModelSonderzeichenBaueinheit != null"
                              class="cursor-pointer"
                              name="clear"
                              @click.stop="
                                selectModelSonderzeichenBaueinheit = null
                              "
                            ></q-icon>
                          </template>
                        </q-select>
                        <!-- Selbstgemachter Hint unter dem q-select: -->
                        <div
                          v-if="copyToClipboardDoneSonderzeichenBaueinheit"
                          class="text-caption"
                        >
                          Die Formatierung für das ausgewählte Sonderzeichen mit
                          Strg+V an der gewünschten Position in obige
                          Markdown-Felder einfügen
                        </div>
                      </div>
                    </div>
                    <!-- -------------------------------------------------------------------------- -->
                    <q-separator />
                    <div class="row full-width q-pa-xs q-col-gutter-xs">
                      <!-- ALT: style="width: 90%" -->
                      <div class="col-md-3 col-12">
                        <!-- ACHTUNG: Am folgenden q-btn kann type="submit" bleiben, da nicht Teil eines q-forms!!! -->
                        <!-- ALT:  style="width: 90%" -->
                        <q-btn
                          dense
                          :disable="
                            !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                          "
                          color="positive"
                          glossy
                          class="stretch full-width"
                          style="height: 100%"
                          type="submit"
                          @click="
                            updateBaueinheitsBeschreibungAusgewaehlteBaueinheit()
                          "
                          label="Beschreibung für Baueinheit speichern"
                          no-caps
                        />
                      </div>
                      <div class="col-md-3 col-12">
                        <!-- ALT:  style="width: 90%" -->
                        <q-btn
                          dense
                          :disable="
                            !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                          "
                          color="deep-orange"
                          glossy
                          class="stretch full-width"
                          style="height: 100%"
                          text-color="white"
                          @click="
                            resetBaueinheitsBeschreibungAusgewaehlteBaueinheit()
                          "
                          label="Eingaben auf Originalwerte zurücksetzen"
                          no-caps
                        />
                      </div>
                    </div>
                    <!-- <div class="col-md-6 col-12"></div> -->
                  </div>
                </q-card>
              </q-tab-panel>
              <!-- ----------------------------------------------------------------------------------------------------------------------- -->
              <!-- ================================================================================================== -->
              <!-- ACHTUNG: Hier class="q-pa-xs" oder "q-pa-none" zur Kontrolle des Abstands zwischen den Tableisten  -->
              <!-- ================================================================================================== -->
              <q-tab-panel
                class="q-pa-xs"
                name="baueigenschaftenTabBaueinheiten"
              >
                <!--
                localStore.state.debugMode:
                {{ localStore.state.debugMode }}
                <br />
                -->
                <div v-if="localStore.state.debugMode">
                  selectedKeyTreeBaueinheiten:
                  {{ selectedKeyTreeBaueinheiten }}
                  <br />
                  nothingSelectedInTableBaueigenschaften:
                  {{ nothingSelectedInTableBaueigenschaften }}
                  <br />
                  selectedRowsTableBaueigenschaften:
                  {{ selectedRowsTableBaueigenschaften }}
                  <br />
                  <br />
                  <q-separator />
                  <br />
                </div>
                <!-- ALT: -->
                <!--
                    class="text-grey-10 bg-grey-2"
                    active-color="primary"
                    indicator-color="primary"
                    narrow-indicator
                  -->
                <!-- =================================================================================================== -->
                <!-- ACHTUNG: class="q-pa-xs" oder "q-pa-none" kontrolliert Breite der Tableiste!                        -->
                <!-- =================================================================================================== -->
                <q-tabs
                  mobile-arrows
                  dense
                  class="q-pa-none text-black bg-grey-4 full-width"
                  active-color="primary"
                  active-bg-color="white"
                  content-class="text-h7"
                  v-model="tabBaueigenschaften"
                  align="left"
                  @input="changeAngezeigtesTabBaueigenschaften($event)"
                >
                  <!-- in $event steht der Name des Zieltabs -->
                  <q-tab
                    name="uebersichtTabBaueigenschaften"
                    label="Übersicht aller Baueigenschaften"
                    no-caps
                  />
                  <q-tab
                    name="beschreibungTabBaueigenschaften"
                    :disable="nothingSelectedInTableBaueigenschaften"
                    label="Beschreibung für ausgewählte Baueigenschaft"
                    no-caps
                  />
                  <q-tab
                    name="auswahlTabBaueigenschaften"
                    :disable="nothingSelectedInTableBaueigenschaften"
                    label="Details zur ausgewählten Baueigenschaft"
                    no-caps
                  />
                  <!-- HINWEIS: Für nicht berechtigte Benutzer wird das gesamte Tab für die Neuanlage einer Baueigenschaft disabled: -->
                  <q-tab
                    :disable="
                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                        !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                    "
                    name="neuTabBaueigenschaften"
                    label="Neuanlage einer Baueigenschaft"
                    no-caps
                  />
                </q-tabs>
                <q-tab-panels v-model="tabBaueigenschaften" animated>
                  <q-tab-panel
                    class="q-pa-xs"
                    name="uebersichtTabBaueigenschaften"
                  >
                    <!-- NEU: style="max-width: 1990px" -->
                    <!-- ALT: style="max-width: 1800px" -->
                    <!-- Mit diesem Wert kommt bei geschlossenem rechten Drawer beim Zuschalten von Spalten KEIN 2. Scrollbalken! -->
                    <!-- Bei offenem rechtem Drawer kommt dann allerdings ein 2. Scrollbalken unten -->
                    <!-- Mit diesem "Kompromisswert" wird die Spalte "Aufzählungswert" bei splitterModel 18 noch mit angezeigt bei offenem Drawer -->
                    <!-- ALT: style="max-width: 1550px" -->
                    <!-- Mit diesem Wert auch kein doppelter Scrollbar bei offenem rechtem Drawer! -->
                    <!--      Aber die Table wird dann sehr schmal! -->
                    <!-- ALT: style="max-width: 1930px" -->
                    <!-- Dies war der testweise eingestellte Wert über längere Zeit -->
                    <div class="q-pa-none">
                      <!-- ALT: style="max-width: 1990px" -->
                      <!-- TODO: Mit min-width und max-width von diesem div am q-tab-panel und dem am q-splitter    -->
                      <!-- und evtl. auch an dem div um den q-tree muss noch experimentiert werden!!!               -->
                      <!-- Diese beeinflussen die Scrollbalken unten - dabei 2 parallele Scrollbalken vermeiden!!!  -->
                      <!-- HINWEIS: Dieses div zwischen q-tab-panel und q-table ist WICHTIG, falls die Table in     -->
                      <!--          ein Splitter-Model (hier im rechten Panel) eingebettet ist                      -->
                      <!-- ACHTUNG: Nur mit diesem style="max-width: XXXXpx" lassen sich 2 Scrollbalken unten       -->
                      <!--          im rechten Panel wenigstens einigermaßen vermeiden (allerdings, wenn der        -->
                      <!--          rechte Drawer angezeigt wird, nur mit sehr kleinem Wert XXXX!!!)                -->
                      <q-table
                        ref="tableBaueigenschaften"
                        v-if="selectedNodeTreeBaueinheiten != null"
                        :title="titleTableBaueigenschaften"
                        :rows="selectedNodeTreeBaueinheiten.baueigenschaften"
                        :columns="columnsTableBaueigenschaften"
                        row-key="_id"
                        :filter="filterTableBaueigenschaften"
                        :visible-columns="visibleColumnsTableBaueigenschaften"
                        rows-per-page-label="Einträge pro Seite"
                        v-model.pagination="paginationTableBaueigenschaften"
                        :pagination-label="getPaginationLabel"
                        :rows-per-page-options="[
                          5,
                          10,
                          15,
                          20,
                          25,
                          30,
                          35,
                          40,
                          0
                        ]"
                        :selection="selectionModeTableBaueigenschaften"
                        v-model:selected="selectedRowsTableBaueigenschaften"
                        :selected-rows-label="
                          getSelectedStringTableBaueigenschaften
                        "
                        dense
                        separator="cell"
                        v-bind:class="{
                          stickyColumnsTable2HeaderLines: $q.screen.gt.sm
                        }"
                      >
                        <!-- ACHTUNG: Sticky Column funktioniert nur auf großen Bildschirmen - auf mobilen Bildschirmen funktioniert damit das horizontale Scrolling der QTable nicht! -->
                        <!-- LÖSUNG (#378): Per v-bind mit Bedingung $q.screen.gt.sm die sticky Column nur auf nicht kleinen Bildschirmen! -->
                        <!-- Vorlage: https://vuejs.org/v2/guide/class-and-style.html -->
                        <!-- Dazu musste allerdings die CSS Class sticky-columns-table-... (kebab-case) umbenannt werden nach -->
                        <!-- stickyColumnsTable... (camelCase) -->
                        <!-- ACHTUNG: Separator-Bug in Quasar, https://github.com/quasarframework/quasar/issues/5374 - fixed in 1.2.6  -->
                        <!-- ACHTUNG: Selection="multiple" erfordert speziellen Code für die erste Checkbox-Spalte bei -->
                        <!-- Verwendung des Header Slots (q-th) unten!!! -->
                        <template v-slot:top="props">
                          <div
                            class="row full-width q-table__title text-body2 q-col-gutter-xs q-pa-none"
                          >
                            <!-- HINWEIS: Diese Classes heissen anscheinend tatsächlich q-table__title, q-table__top, etc. -->
                            <div class="col-md-2 col-12 q-pl-none">
                              <q-input
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                debounce="300"
                                color="primary"
                                v-model="filterTableBaueigenschaften"
                              >
                                <template v-slot:append>
                                  <q-icon name="search" />
                                </template>
                              </q-input>
                            </div>
                            <div
                              v-if="selectedNodeTreeBaueinheiten != null"
                              class="col-md-9 col-12"
                            >
                              <div class="text-h6" v-if="$q.screen.gt.sm">
                                Baueigenschaften an der im Bauvorhabenbaum
                                ausgewählten Baueinheit
                                <strong
                                  >"{{
                                    selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                                  }}"</strong
                                >
                              </div>
                              <div class="text-subtitle1" v-else>
                                Baueigenschaften an der im Bauvorhabenbaum
                                ausgewählten Baueinheit
                                <strong
                                  >"{{
                                    selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                                  }}"</strong
                                >
                              </div>
                            </div>
                            <div class="col-md-1 col-12">
                              <!-- ALT: class="absolute-top-right" -->
                              <!-- Button wurde leider früher eventuell vom rechten Drawer verdeckt!!! -->
                              <!-- Daher als Workaround ersetzt durch class="float-left" -->
                              <!-- Nun funktioniert wieder class="float-right" -->
                              <q-btn
                                class="float-right"
                                flat
                                round
                                dense
                                :icon="
                                  props.inFullscreen
                                    ? 'fullscreen_exit'
                                    : 'fullscreen'
                                "
                                @click="props.toggleFullscreen"
                                no-caps
                              />
                            </div>
                            <div class="row full-width q-col-gutter-xs q-pa-xs">
                              <div class="col-md-2 col-12">
                                <q-toggle
                                  dense
                                  label="Aktivierungszustand"
                                  v-model="aktivierungsMerkmaleAnzeigen"
                                  @input="toggleSpaltenAktivierungsMerkmale()"
                                />
                              </div>
                              <div class="col-md-2 col-12">
                                <q-toggle
                                  dense
                                  label="Kennwertbezogene Angaben"
                                  v-model="kennwertbezogeneAngabenAnzeigen"
                                  @input="
                                    toggleSpaltenKennwertbezogeneAngaben()
                                  "
                                />
                              </div>
                              <div class="col-md-2 col-12">
                                <q-toggle
                                  dense
                                  label="Wertbezogene Angaben"
                                  v-model="wertbezogeneAngabenAnzeigen"
                                  @input="toggleSpaltenWertbezogeneAngaben()"
                                />
                              </div>
                              <div class="col-md-2 col-12">
                                <q-toggle
                                  dense
                                  label="Wertbezogene Merkmale"
                                  v-model="wertbezogeneMerkmaleAnzeigen"
                                  @input="toggleSpaltenWertbezogeneMerkmale()"
                                />
                              </div>
                              <div class="col-md-2 col-12">
                                <q-toggle
                                  dense
                                  label="Typbezogene Angaben"
                                  v-model="weitereTypbezogeneAngabenAnzeigen"
                                  @input="
                                    toggleSpaltenWeitereTypbezogeneAngaben()
                                  "
                                />
                              </div>
                              <div class="col-md-2 col-12">
                                <!-- NEU: "Schutzkategorien" am UI umbenannt in "Fachliche Rubriken" -->
                                <!-- NEU - #401: Umbenannt in "Fachliche Kategorien" (mit Rubriken als weitere Einteilung) -->
                                <q-toggle
                                  dense
                                  label="Fachliche Kategorien und Rubriken"
                                  v-model="schutzKategorienAnzeigen"
                                  @input="toggleSpaltenSchutzKategorien()"
                                />
                              </div>
                            </div>
                          </div>
                        </template>
                        <!-- ============================================================================================================================ -->
                        <!-- NEU: Customized Table Header, mit <q-th> selbst generiert -->
                        <!-- Sample: https://codepen.io/mickey58/pen/XWWVEEN -->
                        <!-- Man kann damit eine neue obere Header-Zeile erzeugen zur Gruppierung von Spalten mit Kategorieüberschriften -->
                        <!-- in einer neu hinzugefügten ersten Header-Zeile -->
                        <!-- Leider funktioniert es zunächst nicht so wie im Sample, sondern die Kategorieüberschriften wurden -->
                        <!-- alle in die 3. Spalte (über "Obligatorisch") appended, nicht als separate Spalten. -->
                        <!-- Dies passierte auch, wenn man die class="stickyColumnsTable2HeaderLines" an der q-table abschaltete. -->
                        <!-- Anderes Sample: https://forum.quasar-framework.org/topic/2818/solved-how-to-make-a-q-table-with-multiple-headers/19 -->
                        <!-- Schlägt <div> vor wie in https://jsfiddle.net/v09hbkwa/, probiert, hilft nicht -->
                        <!-- Die Ursache obigen Problems war die Steuerung über v-ifs an <div>s, diese funktionniert nicht!!! -->
                        <!-- Die v-ifs müssen direkt an den <q-th>s sein!!! -->

                        <!-- ACHTUNG: Damit erscheint die bei selection="multiple" von Quasar normalerweise generierte -->
                        <!-- Checkbox für "(De-)Select All" nicht mehr automatisch! Diese muss dann im Template unten explizit -->
                        <!-- generiert werden in der zweiten Header-Zeile, erste Spalte. -->
                        <template v-slot:header="props">
                          <!-- <div v-if localStore.state.debugMode> -->
                          <!--   props: {{props}} -->
                          <!-- </div> -->
                          <!-- 1. Header-Zeile -->
                          <q-tr>
                            <!-- Für Column-Alignment notwendig: <q-th> für die Zelle über der erste Checkbox-Spalte: -->
                            <q-th auto-width>
                              Auswahl
                              <!-- War früher leer, um Platz zu sparen! -->
                              <!-- <div v-if localStore.state.debugMode> -->
                              <!--   props.cols.length: {{props.cols.length}} -->
                              <!-- </div> -->
                            </q-th>
                            <!-- Für die Zelle über der fixen zweiten Bezeichnungsspalte -->
                            <q-th auto-width align="center" color="primary"
                              >Bezeichnung der Baueigenschaft</q-th
                            >
                            <!-- Achtung: Mit <div v-if=..." funktioniert die folgende Steuerung NICHT!!! -->
                            <!-- Die v-ifs müssen direkt an q-th sein!!! -->
                            <!-- NEU: Mit Wegfall von "obligatorisch" und "aktivierbar" ist colspan="1" statt "3" -->
                            <!-- NEU: Spaltenüberschrift "Akivierungzustand" statt "Aktivierungsmerkmale" -->
                            <q-th
                              auto-width
                              v-if="aktivierungsMerkmaleAnzeigen"
                              colspan="1"
                              align="center"
                              >Aktivierungszustand</q-th
                            >
                            <!-- ALT: Kennwertbezogene Angaben waren nested innerhalb der wertbezogenen Angaben -->
                            <!-- Dies führte bei den neue eingeführten Kategorieüberschriften in der ersten Header-Zeile dann zu Fehlern bei diversen -->
                            <!-- Sonderfällen, falls wertbezogene und kennwertbezogene Angaben beide ausgeschaltet wurden, -->
                            <!-- oder wertbezogene Angaben ausgeschaltet wurden, während kennwertbezogene Angaben noch an waren -->
                            <!-- Dann blieben falsche Überschriften stehen, selbst wenn man an den v-ifs doppelte -->
                            <!-- Kombinationen der beiden abprüft -->
                            <!-- NEU: Kennwertbezogene Angaben vor die wertbezogenen Angaben verschoben -->
                            <!-- NEU: colspan="4" statt "3" wegen Hinzunahme von Spalte "Formel" nach "Operator" -->
                            <q-th
                              auto-width
                              v-if="kennwertbezogeneAngabenAnzeigen"
                              colspan="4"
                              align="center"
                              >Kennwertbezogene Angaben zur Baueigenschaft</q-th
                            >
                            <!-- NEU: Im folgenden <q-th colspan="11"> statt <q-th colspan="9"> wegen Hinzunahme zweier Spalten für Tageszeit1/2 -->
                            <!-- ACHTUNG: Die colspan hier ist unabhängig von der colspan der Spalten davor! -->
                            <q-th
                              auto-width
                              v-if="wertbezogeneAngabenAnzeigen"
                              colspan="11"
                              align="center"
                              >Wertbezogene Angaben zur Baueigenschaft (falls
                              aktiviert und definiert an der ausgewählten
                              Baueinheit)</q-th
                            >
                            <!-- NEU - #514 - colspan="5" statt "7" wegen 2 nach typbezogenen Angaben verschobenen Feldern systemdefiniertNichtBenutzerdefiniert, sollwertNichtIstwert) -->
                            <q-th
                              auto-width
                              v-if="wertbezogeneMerkmaleAnzeigen"
                              colspan="5"
                              align="center"
                              >Wertbezogene Merkmale der Baueigenschaft (falls
                              aktiviert an der ausgewählten Baueinheit)</q-th
                            >
                            <!-- NEU - #514 - colspan="6" statt "3" wegen 3 zusätzlichen Feldern (baueigenschaftsAnzeigeText, systemdefiniertNichtBenutzerdefiniert, sollwertNichtIstwert) -->
                            <q-th
                              auto-width
                              v-if="weitereTypbezogeneAngabenAnzeigen"
                              colspan="6"
                              align="center"
                              >Typbezogene Angaben zur Baueigenschaft</q-th
                            >
                            <!-- NEU: Im folgenden <q-th colspan="11"> statt <q-th colspan="9"> wegen Hinzunahme zweier Spalten für Brandschutz und Nachhaltigkeit -->
                            <!-- NEU: Weitere 8 Spalten hinzugenommen => 19 statt 11 -->
                            <!-- NEU: "Schutzkategorien" am UI umbenannt in "Fachliche Rubriken" -->
                            <!-- NEU: colspan="35" statt "19" wegen Hinzunahme von 16 zusätzlichen Rubriken in #515 -->
                            <!-- NEU: Für #401 werden 33 "alte" Spalten benötigt ("Materialeigenschaften" und "Nachhaltigkeit" entfallen) plus 59 "neue" = 92 -->
                            <!-- Diese werden in Kategorien unterteilt: -->
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="4"
                              align="center"
                              >Fachliche Kategorie: Struktur</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="5"
                              align="center"
                              >Fachliche Kategorie: Wirtschaft</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="7"
                              align="center"
                              >Fachliche Kategorie: Umgebung</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="15"
                              align="center"
                              >Fachliche Kategorie: Gebäudetechnik</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="3"
                              align="center"
                              >Fachliche Kategorie: Geometrie</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="4"
                              align="center"
                              >Fachliche Kategorie: Statik</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="1"
                              align="center"
                              >Fachliche Kategorie: Konstruktion</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="4"
                              align="center"
                              >Fachliche Kategorie: Bautenschutz</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="1"
                              align="center"
                              >Fachliche Kategorie: Feuchteschutz</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="2"
                              align="center"
                              >Fachliche Kategorie: Wärmeschutz</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="3"
                              align="center"
                              >Fachliche Kategorie: Akustik</q-th
                            >
                             <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="3"
                              align="center"
                              >Fachliche Kategorie: Schwingungs- und Erschütterungsschutz</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="1"
                              align="center"
                              >Fachliche Kategorie: Brandschutz</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="4"
                              align="center"
                              >Fachliche Kategorie: Sicherheit</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="2"
                              align="center"
                              >Fachliche Kategorie: Gebrauchstauglichkeit</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="3"
                              align="center"
                              >Fachliche Kategorie: Gesundheit</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="4"
                              align="center"
                              >Fachliche Kategorie: Ressourcen</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="4"
                              align="center"
                              >Fachliche Kategorie: Bautechnik</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="20"
                              align="center"
                              >Fachliche Kategorie: Verwendung</q-th
                            >
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="2"
                              align="center"
                              >Fachliche Kategorie: Sonstiges</q-th
                            >
                            <!-- ---------------------------------------------------------------------------------------------------------------------------------- -->
                            <!-- ALT: Fachliche Rubriken vor #401 -->
                            <!--
                            <q-th
                              auto-width
                              v-if="schutzKategorienAnzeigen"
                              colspan="35"
                              align="center"
                              >Typbezogene fachliche Rubriken zur
                              Baueigenschaft</q-th
                            >
                            -->
                            <!-- ---------------------------------------------------------------------------------------------------------------------------------- -->
                          </q-tr>
                          <!-- 2. Header-Zeile, diese funktionierte im Gegensatz zur ersten sofort tadellos, da ohne v-ifs -->
                          <q-tr :props="props">
                            <!-- Erste Spalte, reserviert für Checkboxes: -->
                            <q-th auto-width>
                              <!-- Checkbox für "Select/Deselect All" bei selection="multiple", muss explizit generiert werden -->
                              <!-- TODO: Sollte "-" anzeigen, wie Quasar es selbst macht??? -->
                              <q-checkbox
                                v-if="
                                  selectionModeTableBaueigenschaften ===
                                    'multiple'
                                "
                                v-model="props.selected"
                                dense
                              />
                              <!-- TODO: Hier eventuell zusätzlich einbauen: -->
                              <!-- Sort-Möglichkeit nach selected/deselected bei Selection="multiple", über zusätzliche -->
                              <!-- "virtual" Column -->
                              <!-- Siehe https://forum.quasar-framework.org/topic/4602/qtable-question-sort-by-selected-deselected-rows/11 -->
                              <!-- sowie selbst erstellte Vorlage auf https://codepen.io/mickey58/pen/XWWVEEN -->
                              <!-- HINWEIS: Quasar erzeugt und rotiert Sort internen Icon q-table__sort-icon (= die "Up/Down" Arrows) -->
                              <!-- per CSS und handled Events darauf - das ist nicht so leicht zu kopieren: -->
                              <!-- https://github.com/quasarframework/quasar/blob/dev/ui/src/components/table/QTable.styl -->
                            </q-th>
                            <!-- Nun die Zellen für die Überschriften der normalen Table-Spalten erzeugen. -->
                            <!-- Diese werden offenbar automatisch von Quasar zusätzlich befüllt mit den Up/Down-Arrows für "sortable" Spalten  -->
                            <q-th
                              v-for="col in props.cols"
                              :key="col.name"
                              :props="props"
                              :auto-width="true"
                            >
                              <!-- Folgender Code, um die Baueigenschaftsbezeichnungsspalte optisch hervorzuheben, bringt leider die Column-Höhe durcheinander - auskommentiert: -->
                              <!--
                                  <div v-if="col.label=='Baueigenschaftsbezeichnung'" class="text-red">{{col.label}}</div>
                                  <div v-else>{{col.label}}</div>
                              -->
                              {{ col.label }}
                            </q-th>
                          </q-tr>
                        </template>
                        <!-- /v-slot:header="props" -->
                        <!-- ============================================================================================================================ -->
                        <!-- Es folgt der Code für den Table Body: -->
                        <template v-slot:body="props">
                          <q-tr :props="props">
                            <!-- Tests für die Belegung der props am v-slot: -->
                            <!-- Auf nested Properties kann (sofern nicht undefined!) wie folgt zugegriffen werden: -->
                            <!-- props.row.typbezogeneBaueigenschaft.bauinformation.bauinformationsBezeichnung: -->
                            <!-- {{props.row.bauinformation.typbezogeneBaueigenschaft.bauinformationsBezeichnung }} -->
                            <!-- props.selected: {{props.selected}} -->
                            <!-- props.selected ist "true" bzw. "false" für selektierte/deselektierte Rows in der q-table -->
                            <q-td :auto-width="true">
                              <!-- props.selected: {{props.selected}} -->
                              <!-- Es folgt die Checkbox in erster q-table-Spalte für Selektion/Deselektion von Rows -->
                              <!-- (dies wird bei Tables OHNE v-slots bei selection="single" bzw. "multiple" automatisch von Quasar hinzugefügt) -->
                              <q-checkbox
                                v-model="props.selected"
                                color="primary"
                                dense
                              />
                            </q-td>
                            <!-- #328 TODO XXXXXX -->
                            <!-- NEU (Quasar 1.15.15): Hier experimentelles :class an q-td, um gerade und ungerade Zeilen der QTable unterschiedlich einzufärben: -->
                            <!-- Überschreibt allerdings die Hintergrundfarbe der Key-Spalte für die Bezeichnungen, welche in <style> per CSS auf Beige gesetzt wird! -->
                            <!-- Daher weiter unten neue Prop class="my-key-column-in-tables" am <div> für diese Spalte, welches diese Färbung wiederherstellt, -->
                            <!-- allerdings nur für den inneren <div>-Teil, nicht für die ganze Zelle! -->
                            <q-td
                              :auto-width="true"
                              v-for="col in columnsTableBaueigenschaften"
                              :key="col.name"
                              :props="props"
                              :class="
                                props.rowIndex % 2 == 1
                                  ? 'bg-grey-1'
                                  : 'bg-white'
                              "
                            >
                              <!-- {{ props }} -->
                              <!-- Von q-td, enthält rowIndex (ganz hinten), welcher in :class verwendet wird zur Unterscheidung gerader/ungerader Zeilen -->
                              <!-- =================================================================================================================================== -->
                              <!-- START CODE FÜR KONTEXTMENÜ für Rechtsklick-Aktionen auf einer Spalte/Zeile in der QTable -->
                              <!-- Diese Kontextmenüs waren ursprünglich nur für die Spalten, die in booleanFieldsTypbezogen und booleanFieldsWertbezogen enthalten sind, -->
                              <!-- später auch für die Spalte für die Baueigenschaftsbezeichnung definiert, nun diese zentral hier für alle Spalten definiert: -->
                              <!-- TODO: Man könnte später selektiv auch noch andere Aktionen anbieten je nach Spalte/Zeile, z.B. auf den Link-Spalten -->
                              <!-- Dabei ist die (per Maus angewählte) Spalte in col.name, die Zeile in props.row enthalten, siehe Debug Info Kontextmenü unten -->
                              <!-- ================================================================================================================================ -->
                              <q-menu touch-position context-menu>
                                <q-list
                                  dense
                                  style="min-width: 100px"
                                  v-model="props.row[col.name]"
                                >
                                  <!--
                                      <div v-if="localStore.state.debugMode">
                                        Debug-Info Kontextmenü:
                                        <q-separator />
                                        props.row: {{props.row}}
                                        <q-separator />
                                        col (Table Column Definition, per v-for): {{col}}
                                        <q-separator />
                                        col.name: {{col.name}}
                                        <q-separator />
                                        col.field: {{col.field}}
                                        <q-separator />
                                        Bisheriger Wert der Zelle: {{col.label}}: {{props.row[col.field]}}
                                        <q-separator />
                                        props.selected: {{props.selected}}
                                        <q-separator />
                                      </div>
                                      -->
                                  <!-- ACHTUNG: Der 2. Parameter von toggleBooleanFieldTableBaueigenschaften() muss hier speziell auf 'aktiviertNichtDeaktiviert' gesetzt werden! -->
                                  <!-- TODO XXXXXX: Hier für das Kontextmenü zum Bearbeiten abhängig von der Benutzerrolle unterschiedliche Labels -->
                                  <!-- anzeigen (bei fehlenden Autorenrechten: "...auswählen und anzeigen", sonst: "...auswählen und bearbeiten" ) -->
                                  <q-item
                                    clickable
                                    v-close-popup
                                    @click="
                                      bearbeiteEigenschaftAusContextMenuTableBaueigenschaften(
                                        props
                                      )
                                    "
                                  >
                                    <q-item-section>
                                      Baueigenschaft auswählen und
                                      anzeigen/bearbeiten
                                    </q-item-section>
                                  </q-item>
                                  <q-item
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    clickable
                                    v-close-popup
                                    @click="
                                      toggleBooleanFieldTableBaueigenschaften(
                                        props.row,
                                        'aktiviertNichtDeaktiviert'
                                      )
                                    "
                                  >
                                    <q-item-section>
                                      Baueigenschaft auswählen und
                                      aktivieren/deaktivieren
                                    </q-item-section>
                                  </q-item>
                                  <q-item
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                        !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                    "
                                    clickable
                                    v-close-popup
                                    @click="
                                      selectedRowsTableBaueigenschaften[0] =
                                        props.row;
                                      ausgewaehlteBaueigenschaft = props.row;
                                      deleteSelectedBaueigenschaftDialog = true;
                                    "
                                  >
                                    <q-item-section
                                      >Baueigenschaft auswählen und im
                                      Bauvorhabenbaum löschen</q-item-section
                                    >
                                  </q-item>
                                  <q-separator />
                                  <q-item
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                        !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                    "
                                    clickable
                                    v-close-popup
                                    @click="
                                      changeAngezeigtesTabBaueigenschaften(
                                        'neuTabBaueigenschaften'
                                      )
                                    "
                                  >
                                    <q-item-section
                                      >Baueigenschaft im Bauvorhabenbaum neu
                                      anlegen
                                    </q-item-section>
                                  </q-item>
                                  <!--
                                    <q-separator />
                                    <q-item clickable v-close-popup>
                                      <q-item-section>Weitere Aktion</q-item-section>
                                    </q-item>
                                    <q-item-section side>
                                      <q-icon name="keyboard_arrow_right" />
                                    </q-item-section>
                                  -->
                                </q-list>
                              </q-menu>
                              <!-- ENDE CODE FÜR KONTEXTMENÜ -->
                              <!-- ====================================================================================================================== -->
                              <!-- NEU: Die typbezogenen Felder einheit, symbol, operator (sowie NEU: formel) werden als q-markdown Felder benutzt, nicht -->
                              <!-- als gewöhnliche Textfelder -->
                              <!-- Geht einher mit Änderungen der Eingabemasken für diese Felder (mit Markdown Preview und Dropdown-Select-Menü für Sonderzeichen) -->
                              <!-- ACHTUNG: Erfordert spezielle CSS class="height-small", sonst wird wegen dieser Felder die Zeilenhöhe in der Table größer als bei den anderen Zeilen!!! -->
                              <!-- ACHTUNG: Wenn dieser Code enabled ist, müssen in der Definition des Arrays textFieldsTypbezogen diese Felder, der sonst -->
                              <!--          die Anzeige dieser Felder als normale Textfelder steuert, auskommentiert werden! -->
                              <div
                                class="height-small"
                                v-if="col.name === 'einheit'"
                              >
                                <!-- Code für Sniff Test mit v-html anstatt q-markdown - erlaubt dann (nur) HTML Tags, kein Markdown, muss aber wohl sanitized werden? -->
                                <!--
                                    <pre v-html="props.row.typbezogeneBaueigenschaft
                                          .einheit"></pre>
                                    -->
                                <!-- ACHTUNG: Hier wird für :src statt der Lambda-Funktion col.field(props.row) für nested Fields direkt das nested Feld angezogen - -->
                                <!-- siehe Erläuterungen dazu weiter unten -->
                                <q-markdown
                                  :src="
                                    props.row.typbezogeneBaueigenschaft.einheit
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                />
                              </div>
                              <!-- ---------------------------------------------------------------------------------------------------- -->
                              <!-- ACHTUNG: Hier überall v-else-if statt v-if verwendet, da performanter und die v-ifs exklusiv sind!!! -->
                              <!-- ACHTUNG: Hier wird für :src statt der Lambda-Funktion col.field(props.row) für nested Fields direkt das nested Feld angezogen - -->
                              <!-- siehe Erläuterungen dazu weiter unten -->
                              <div
                                class="height-small"
                                v-else-if="col.name === 'symbol'"
                              >
                                <q-markdown
                                  :src="
                                    props.row.typbezogeneBaueigenschaft.symbol
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                />
                              </div>
                              <!-- ---------------------------------------------------------------------------------------------------- -->
                              <!-- ACHTUNG: Hier überall v-else-if statt v-if verwendet, da performanter und die v-ifs exklusiv sind!!! -->
                              <!-- ACHTUNG: Hier wird für :src statt der Lambda-Funktion col.field(props.row) für nested Fields direkt das nested Feld angezogen - -->
                              <!-- siehe Erläuterungen dazu weiter unten -->
                              <div
                                class="height-small"
                                v-else-if="col.name === 'operator'"
                              >
                                <q-markdown
                                  :src="
                                    props.row.typbezogeneBaueigenschaft.operator
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                />
                              </div>
                              <!-- ---------------------------------------------------------------------------------------------------- -->
                              <!-- NEU: Spalte für Formel hier zusätzlich aufgenommen -->
                              <!-- ACHTUNG: Hier überall v-else-if statt v-if verwendet, da performanter und die v-ifs exklusiv sind!!! -->
                              <!-- ACHTUNG: Hier wird für :src statt der Lambda-Funktion col.field(props.row) für nested Fields direkt das nested Feld angezogen - -->
                              <!-- siehe Erläuterungen dazu weiter unten -->
                              <div
                                class="height-small"
                                v-else-if="col.name === 'formel'"
                              >
                                <q-markdown
                                  :src="
                                    props.row.typbezogeneBaueigenschaft.formel
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                />
                              </div>
                              <!-- ================================================================================================================= -->
                              <!-- Hier zunächst die Anzeige der booleanFields steuern, weitere Fields folgen weiter unten -->
                              <!-- NEU: Hier testweise indeterminate an der q-checkbox eingeführt, wird auf jeden Fall gebraucht für die Checkbox -->
                              <!-- für den Wertetyp "Wahrheitswert" - FUNKTIONIERT! Bei "null" wird waagrechter Strich angezeigt-->
                              <!-- Es folgt <div> für booleanFieldsTypbezogen:                                                          -->
                              <!-- ---------------------------------------------------------------------------------------------------- -->
                              <!-- ACHTUNG: Hier überall v-else-if statt v-if verwendet, da performanter und die v-ifs exklusiv sind!!! -->
                              <div
                                v-else-if="
                                  booleanFieldsTypbezogen.includes(col.name)
                                "
                              >
                                <!-- Zunächst Checkbox zur Anzeige des Boolean-Feldinhalts: -->
                                <!-- ACHTUNG: Hier Aufruf der Lambda-Funktion field() für nested Fields notwendig, siehe Erläuterungen dazu weiter oben im Code: -->
                                <q-checkbox
                                  color="grey-9"
                                  :disable="!popupEditEnabled"
                                  toggle-indeterminate
                                  :value="col.field(props.row)"
                                  dense
                                />
                              </div>
                              <!-- /booleanFieldsTypbezogen -->
                              <!-- ---------------------------------------------------------------------------------------------------- -->
                              <!-- Es folgt <div> für booleanFieldsWertbezogen: -->
                              <!-- ---------------------------------------------------------------------------------------------------- -->
                              <!-- ACHTUNG: Hier überall v-else-if statt v-if verwendet, da performanter und die v-ifs exklusiv sind!!! -->
                              <div
                                v-else-if="
                                  booleanFieldsWertbezogen.includes(col.name)
                                "
                              >
                                <!-- Zunächst Checkbox zur Anzeige des Boolean-Feldinhalts: -->
                                <q-checkbox
                                  color="grey-9"
                                  :disable="!popupEditEnabled"
                                  toggle-indeterminate
                                  :value="props.row[col.field]"
                                  dense
                                />
                              </div>
                              <!-- /booleanFieldsTypbezogen -->
                              <!-- ================================================================================================================================== -->
                              <!-- Nun Anzeige der (ersten) Spalte für die Baueigenschaftsbezeichnng steuern - dies wurde hier ursprünglich separat gehandled, -->
                              <!-- weil darauf ein Kontextmenü definiert war - dieses ist jetzt zentral oben definiert für alle Spalten - seither -->
                              <!-- wird das separate Handling für die Spalte baueigenschaftsBezeichnung eigentlich nicht mehr benötigt, sie könnte -->
                              <!-- wieder wie die übrigen textFieldsTypbezogen behandelt werden. Für zukünftige Erweiterungen, die die erste Spalte -->
                              <!-- gesondert behandeln, den Code so belassen. -->
                              <!-- ACHTUNG: Die Abfrage unten muss "col.name === 'baueigenschaftsBezeichnung' lauten, nicht "col.name = 'baueigenschaftsBezeichnung', -->
                              <!--          sonst kommen obskure Fehler "duplicate Keys detected" -->
                              <!-- ACHTUNG: Wenn dieser Code enabled ist, muss baueigenschaftsBezeichnung unten aus dem Array textFieldsTypbezogen herausgenommen werden! -->
                              <!-- ACHTUNG: Ob man in den Abfragen hier v-else-if verwendet oder v-if scheint egal zu sein!!! v-else-if dürfte performanter sein, und -->
                              <!--          korrekt, da die v-if-Abfragen exklusiv sind, daher überall v-else-if gewählt -->
                              <!-- Start originaler Code ohne Kontextmenü für textFieldsTypbezogen - auskommentiert: -->
                              <!-- {{ col.field(props.row) }} -->
                              <!-- Ende originaler Code -->
                              <!-- Start neuer Code zur Anzeige der baueigenschaftsBezeichnung - dieser ist nach Rückbau des Kontextmenüs wieder wie der originale! -->
                              <!-- -------------------------------------------------------------------------------------------------------------------------------- -->
                              <!-- ACHTUNG: Hier überall v-else-if statt v-if verwendet, da performanter und die v-ifs exklusiv sind!!! -->
                              <!-- NEU: In Kombination mit unterschiedlicher Färbung gerader/ungerader Zeilen in QTable hier neuer style -->
                              <!-- notwendig, um die Key-Spalte beige einzufärben (vorher wurde dies durch sticky Column Definition in <style> -->
                              <!-- eingefärbt, diese wird überschrieben durch die unterschiedliche Färbung für die Rows oben -->
                              <div
                                v-else-if="
                                  col.name === 'baueigenschaftsBezeichnung'
                                "
                                class="my-key-column-in-tables"
                              >
                                <!-- Hier den Wert des Felds baueigenschaftsBezeichnung anzeigen:  -->
                                <!-- ACHTUNG: Hier Aufruf der Lambda-Funktion field() für nested Fields notwendig, siehe Erläuterungen dazu unten: -->
                                {{ col.field(props.row) }}
                                <!-- {{ props.row.typbezogeneBaueigenschaft.baueigenschaftsBezeichnung }} -->
                                <!-- Äquivalent, siehe Kommentare unten -->
                                <!-- =============================================================================================================================== -->
                                <!-- HINWEISE zum Handling von nested vs. flat Fields in QTables: -->
                                <!-- Für das nested Field typbezogeneBaueigenschaft.baueigenschaftsBezeichnung gilt: -->
                                <!-- In columnsTableBaueigenschaften unten im Skript-Teil wird dafür festgelegt, per: -->
                                <!-- field: row => row.typbezogeneBaueigenschaft.baueigenschaftsBezeichnung -->
                                <!-- field() ist dabei eine (Lambda-)Function! Sie hat als Argument das Objekt row und liefert den aktuellen Wert des Feldes zurück -->
                                <!-- col.field() erlaubt also den Zugriff auf die verschachtelten Felder auf ähnliche Art wie auf die Felder, die nicht nested sind! -->
                                <!-- ACHTUNG: Der folgende Ausdruck ist dann ein Funktionsaufruf der Funktion field() mit der aktuellen Row, -->
                                <!-- wurde so bereits weiter unten im Code so verwendet: -->
                                <!-- {{ col.field(props.row) }} -->
                                <!-- Stattdessen könnte man auch schreiben: -->
                                <!-- {{ props.row.typbezogeneBaueigenschaft.baueigenschaftsBezeichnung }} -->
                                <!-- Andere Props: -->
                                <!-- {{ props.row[col.field] }} zeigt bei normalen, nicht genesteten und nicht per Lambda-Funktion definierten Feldern den Wert dieses Feldes an -->
                                <!-- col.name === 'baueigenschaftsBezeichnung' (wird oben im v-if/v-else-if verwendet -->
                                <!-- col.value === 'Baueigenschaftsname' (Beispiel) - funktioniert nur bei nicht nested Fields!!! -->
                                <!-- =============================================================================================================================== -->
                              </div>
                              <!-- /div für Handling der Column baueigenschaftsBezeichnung -->
                              <!-- ---------------------------------------------------------------------------------------------------- -->
                              <!-- Es folgen die Columns für die Textfelder - ACHTUNG: baueigenschaftsBezeichnung wurde herausgenommen aus textFieldsTypbezogen!!! -->
                              <!-- ---------------------------------------------------------------------------------------------------- -->
                              <!-- ACHTUNG: Hier überall v-else-if statt v-if verwendet, da performanter und die v-ifs exklusiv sind!!! -->
                              <div
                                v-else-if="
                                  textFieldsWertbezogen.includes(col.name)
                                "
                              >
                                {{ props.row[col.field] }}
                              </div>
                              <div
                                v-else-if="
                                  textFieldsTypbezogen.includes(col.name)
                                "
                              >
                                <!-- ACHTUNG: Hier Aufruf der Lambda-Funktion field() für nested Fields notwendig, siehe Erläuterungen dazu weiter oben im Code: -->
                                {{ col.field(props.row) }}
                                <!-- ============================================================================================================================ -->
                                <!-- ❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌ -->
                                <!-- ACHTUNG: An dieser Stelle folgt DISABLED CODE für spezielles Handling von nested Text Fields    -->
                                <!-- Dies waren in älterer Version des Codes die Felder -->
                                <!-- typbezogeneBaueigenschaft.bauinformation.bauinformationsBezeichnung und -->
                                <!-- typbezogeneBaueigenschaft.bauinformation.bauinformationsTyp -->
                                <!-- ACHTUNG: Diese sind nur populiert, wenn die bauinformation nicht undefined oder null ist -->
                                <!-- In den Testdaten kommen aktuell beide Fälle vor!!! -->
                                <!-- Diese Fälle wurden hier im Template mit v-if-Logik abgefangen -->
                                <!-- Die Spezialbehandlung dieser beiden Felder für die Anzeige der Bauinformation ist nicht mehr notwendig, seit -->
                                <!-- diese Felder per field: row => weiter unten gegen undefined und null gesondert behandelt werden. -->
                                <!--                                                    START DISABLED CODE FÜR NESTED TEXT FIELDS                                              -->
                                <div v-if="false">
                                  <!-- Dadurch disabled! -->
                                  <!-- ACHTUNG: Dieser Code zur speziellen Behandlung der Felder für die Bauinformation (die undefined oder null sein kann) -->
                                  <!-- ist aktuell disabled zugunsten der Behandlung gegen undefined und null per field: row => weiter unten!!! -->
                                  <div
                                    v-if="
                                      props.row.typbezogeneBaueigenschaft
                                        .bauinformation !== undefined &&
                                        props.row.typbezogeneBaueigenschaft
                                          .bauinformation !== null
                                    "
                                  >
                                    <!-- Code zum Handeln der Felder bauinformationsBezeichnung und bauinformationsTyp: -->
                                    <!-- Referenziert aktuell die nested Felder, nicht mehr die (temporär) flachen Felder -->
                                    <!-- NEU: Hier bauinformationsAnzeigeText statt bauinformationsBezeichnung anzeigen: -->
                                    <div
                                      v-if="
                                        col.name ===
                                          'bauinformationsAnzeigeText'
                                      "
                                    >
                                      <div
                                        v-if="
                                          props.row.typbezogeneBaueigenschaft
                                            .bauinformation
                                        "
                                      >
                                        <!-- NEU: Hier bauinformationsAnzeigeText statt bauinformationsBezeichnung anzeigen: -->
                                        {{
                                          props.row.typbezogeneBaueigenschaft
                                            .bauinformation
                                            .bauinformationsAnzeigeText
                                        }}
                                      </div>
                                      <div v-else>-</div>
                                      <!-- NEU: "-" anzeigen wie bei anderen Textfeldern, falls das Feld leer ist -->
                                    </div>
                                    <div v-else>
                                      <div
                                        v-if="col.name === 'bauinformationsTyp'"
                                      >
                                        <div
                                          v-if="
                                            props.row.typbezogeneBaueigenschaft
                                              .bauinformation
                                          "
                                        >
                                          {{
                                            props.row.typbezogeneBaueigenschaft
                                              .bauinformation.bauinformationsTyp
                                          }}
                                        </div>
                                        <div v-else>-</div>
                                        <!-- NEU: "-" anzeigen wie bei anderen Textfeldern, falls das Feld leer ist -->
                                      </div>
                                      <div v-else>
                                        <!-- Andere textFields Columns außer obigen nested Properties für Bauinformation: -->
                                        <!-- Im Folgenden zunächst spezieller Code für ein q-select zur Anzeige mehrerer Werte bei Selection "multiple" für Aufzählungswert, statt eines -->
                                        <!-- normalen q-input Feldes. -->
                                        <!-- Zunächst getestet mit Testdaten testModelAufzaehlungswert und testOptionsAufzaehlungswert:und - funktioniert, auch dense -->
                                        <!-- Alternativ könnte man hier auch q-chips verwenden zur Anzeige multipler selektierter Werte -->
                                        <!-- Diese brauchen aber mehr horizontalen und eventuell auch vertikalen Platz (könnten dann "dense" verhindern)  -->
                                        <!-- Dann implementiert mit v-model="props.row[col.name]" und zunächst leeren :options -->
                                        <!-- HINWEIS: Wenn das q-select entfernt wird und der Aufzählungwert als normales Textfeld behandelt wird, -->
                                        <!-- werden mittels des {{ props.row[col.name] }} die Aufzählungswerte im Format ["AA, "AAA", ...] angezeigt -->
                                        <!-- Platzhalter zum Anfang Auskommentieren, falls kein q-select für Aufzählungswert -->
                                        <div
                                          v-if="col.name === 'aufzaehlungsWert'"
                                          align="right"
                                        >
                                          <q-select
                                            v-model="props.row[col.name]"
                                            dense
                                            square
                                            :multiple="true"
                                            hide-bottom-space
                                            class="font-size-small"
                                            :disable="!popupEditEnabled"
                                          />
                                        </div>
                                        <!-- Platzhalter zum Ende Auskommentieren, falls kein q-select für Aufzählungswert -->
                                        <!-- Platzhalter zum Anfang Auskommentieren, falls kein q-select für Aufzählungswert -->
                                        <div v-else>
                                          <!-- Platzhalter zum Ende Auskommentieren, falls kein q-select für Aufzählungswert -->
                                          <div
                                            v-if="
                                              col.name ===
                                                'baueigenschaftsBezeichnung'
                                            "
                                          >
                                            <div
                                              v-if="
                                                props.row[
                                                  'typbezogeneBaueigenschaft'
                                                ]
                                              "
                                            >
                                              {{
                                                props.row
                                                  .typbezogeneBaueigenschaft
                                                  .baueigenschaftsBezeichnung
                                              }}
                                            </div>
                                          </div>
                                          <div v-else>
                                            <div v-if="props.row[col.name]">
                                              {{ props.row[col.name] }}
                                              <!-- Nun, falls Inhalt vorhanden, ganz profan den Inhalt des Textfeldes anzeigen -->
                                              <!-- Gilt für alle "normalen" Textfelder -->
                                            </div>
                                            <div v-else>-</div>
                                          </div>
                                          <!-- "-" anzeigen, falls das Feld leer ist -->
                                          <!-- Platzhalter zum Anfang Auskommentieren, falls kein q-select für Aufzählungswert -->
                                        </div>
                                        <!-- Platzhalter zum Ende Auskommentieren, falls keine q-select für Aufzählungswert -->
                                        <!-- ACHTUNG: "-" wird benötigt, damit die Popups auf leeren Felder funktionieren!!! -->
                                      </div>
                                    </div>
                                  </div>
                                  <div v-else>
                                    <!-- Nun den Fall handeln, dass bauinformation undefined oder null ist -->
                                    <!-- ACHTUNG: Dies galt, wie Tests zeigen, bei der temporären Umstellung, wo die Unterfelder von bauinformation keine nested Properties in -->
                                    <!-- typbezogeneBaueigenschaften mehr waren, -->
                                    <!-- offensichtlich NIE MEHR, da in diesem Fall das Feld bauinformation gar nicht mehr vorkam, sondern nur (falls definiert) dessen Unterfelder -->

                                    <!-- Im Folgenden zunächst spezieller Code für q-select zur Anzeige mehrere Werte bei Selection "multiple" für Aufzählungswert -->
                                    <!-- Zunächst getestet mit Testdaten testModelAufzaehlungswert und testOptionsAufzaehlungswert:und - funktioniert, auch dense -->
                                    <!-- Alternativ könnte man hier auch q-chips verwenden zur Anzeige multipler selektierter Werte -->
                                    <!-- Diese brauchen aber mehr horizontalen und eventuell auch vertikalen Platz (könnten dann "dense" verhindern)  -->
                                    <!-- Dann implementiert mit v-model="props.row[col.name]" und zunächst leeren :options -->

                                    <!-- HINWEIS: Wenn das q-select entfernt wird und der Aufzählungwert als normales Textfeld behandelt wird, -->
                                    <!-- werden mittels des {{ props.row[col.name] }} die Aufzählungswerte im Format ["AA, "AAA", ...] angezeigt -->
                                    <!-- Platzhalter zum Anfang Auskommentieren, falls kein q-select für Aufzählungswert -->
                                    <div
                                      v-if="col.name === 'aufzaehlungsWert'"
                                      align="right"
                                    >
                                      <q-select
                                        v-model="props.row[col.name]"
                                        dense
                                        square
                                        :multiple="true"
                                        hide-bottom-space
                                        class="font-size-small"
                                        :disable="!popupEditEnabled"
                                      />
                                    </div>
                                    <!-- Platzhalter zum Ende Auskommentieren, falls kein q-select für Aufzählungswert -->
                                    <!-- Platzhalter zum Anfang Auskommentieren, falls kein q-select für Aufzählungswert -->
                                    <div v-else>
                                      <!-- Platzhalter zum Ende Auskommentieren, falls kein q-select für Aufzählungswert -->
                                      <div v-if="props.row[col.name]">
                                        {{ props.row[col.name] }}
                                        <!-- Falls Inhalt vorhanden, ganz profan den Inhalt des Textfeldes anzeigen -->
                                      </div>
                                      <div v-else>-</div>
                                      <!-- Platzhalter zum Anfang Auskommentieren, falls kein q-select für Aufzählungswert -->
                                    </div>
                                    <!-- Platzhalter zum Ende Auskommentieren, falls keine q-select für Aufzählungswert -->
                                    <!-- ACHTUNG: "-" wird benötigt, damit die Popups auf leeren Felder funktionieren!!! -->
                                  </div>
                                </div>
                                <!--                                       ENDE DISABLED CODE FÜR NESTED TEXT FIELDS                                                -->
                                <!-- ❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌❌ -->
                              </div>
                              <!-- /textFields -->
                              <!-- Weiter geht es mit dem Handling der numerischen und der weiteren Spalten, auch hier stets mit v-else-if: -->
                              <div v-else-if="numericFields.includes(col.name)">
                                <div>
                                  {{ props.row[col.name] }}
                                </div>
                              </div>
                              <!-- /numericFields -->
                              <div v-else-if="dateFields.includes(col.name)">
                                <div>
                                  {{ formatDate(props.row[col.name]) }}
                                </div>
                              </div>
                              <!-- /dateFields -->
                              <div v-else-if="timeFields.includes(col.name)">
                                <div>
                                  {{ formatTime(props.row[col.name]) }}
                                </div>
                              </div>
                              <!-- /timeFields -->
                              <div
                                v-else-if="
                                  selectFieldsWertbezogen.includes(col.name)
                                "
                              >
                                <q-select
                                  v-model="props.row[col.name]"
                                  :options="optionsWertetypBaueigenschaft"
                                  :value="props.row[col.field]"
                                  dense
                                  square
                                  :multiple="true"
                                  hide-bottom-space
                                  class="font-size-small"
                                  :disable="!popupEditEnabled"
                                />
                                <!-- HINWEISE:
                                    Leider erhöht das q-select für die Anzeige des Wertetyps leicht die Zeilenhöhe (testbar durch Ab/Anschalten der wertbezogenen Angaben)
                                    class="fonts-size-small" - macht die Options im Aufzählungswert kleiner, die Zeilenhöhe bleibt jedoch leicht erhöht im Vergleich zu Table ohne q-select
                                    Es gibt noch weitere CSS Styles, mit denen man beipielsweise den Font beeinflussen könnte- per Tests leider OHNNE Einfluss auf die Zeilenhöhe:
                                      class="height-1rem"
                                      popup-content-class="font-size-small"
                                      options-selected-class="font-size-small"
                                      options-dense
                                      input-class="font-size-small"
                                    -->
                              </div>
                              <!-- /aufzaehlungsWert-Spalte -->
                              <div
                                v-else-if="
                                  selectFieldsTypbezogen.includes(col.name)
                                "
                              >
                                <q-select
                                  :value="col.field(props.row)"
                                  dense
                                  square
                                  :multiple="true"
                                  hide-bottom-space
                                  class="font-size-small"
                                  :disable="!popupEditEnabled"
                                />
                              </div>
                              <!-- /werteTyp-Spalte -->
                            </q-td>
                          </q-tr>
                        </template>
                      </q-table>
                    </div>
                    <!-- <br /> -->
                    <!-- <div class="q-pa-xs q-gutter-xs"> -->
                    <!-- Row für Buttons auf selektierten Items in q-table: -->
                    <!-- ============= ACHTUNG: Hier q-col-gutter-xs, sonst Spillover!!! =======================-->
                    <!-- ALT: -->
                    <!-- v-if="$q.screen.gt.xs" -->
                    <div class="flex row full-width q-pa-xs q-col-gutter-xs">
                      <div class="col-md-3 col-12 text-caption">
                        Aktionen für Baueigenschaften
                        {{ displayRightArrow }}
                        <br />
                        <!-- &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -->
                        Mit
                        <q-checkbox
                          v-model="alwaysOn"
                          disable
                          dense
                          color="primary"
                        />
                        in der ersten Spalte Baueigenschaft auswählen.
                        Alternativ mit rechter Maustaste Kontextmenü aufrufen.
                        <!-- <br />&nbsp; <br /> -->
                      </div>
                      <div class="col-md-3 col-12">
                        <!-- DONE: Hier für den Button zum Bearbeiten abhängig von der Benutzerrolle unterschiedliche Labels -->
                        <!-- anzeigen (bei fehlenden Autorenrechten: "Baueigenschaft anzeigen", sonst: "Baueigenschaft bearbeiten" ) -->
                        <!-- ALT: style="width:90%" -->
                        <q-btn
                          dense
                          class="stretch full-width"
                          :label="
                            computeLabelButtonBaueigenschaftAnzeigenOderBearbeiten
                          "
                          color="secondary"
                          glossy
                          no-caps
                          :disable="nothingSelectedInTableBaueigenschaften"
                          @click="
                            changeAngezeigtesTabBaueigenschaften(
                              'auswahlTabBaueigenschaften'
                            )
                          "
                        />
                      </div>
                      <!-- ALT: style="width:90%" class="q-mr-sm" -->
                      <div class="col-md-3 col-12">
                        <q-btn
                          dense
                          class="stretch full-width"
                          :disable="
                            nothingSelectedInTableBaueigenschaften ||
                              !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                              !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                          "
                          label="Baueigenschaft im Bauvorhabenbaum löschen"
                          color="negative"
                          glossy
                          no-caps
                          @click="deleteSelectedBaueigenschaftDialog = true"
                        />
                        <!-- ALT (ohne Confirmation Dialog): @click="deleteSelectedBaueigenschaft()"-->
                        <!-- <q-separator vertical inset /> -->
                        <!-- TODO: QSeparator funktioniert nicht, evtl. mit q-toolbar probieren: https://quasar.dev/vue-components/separator -->
                      </div>
                      <!-- ALT: style="width:90%" class="q-mr-sm" -->
                      <div class="col-md-3 col-12">
                        <q-btn
                          dense
                          :disable="
                            !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                              !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                          "
                          label="Baueigenschaft im Bauvorhabenbaum neu anlegen"
                          class="stretch full-width"
                          glossy
                          color="green-8"
                          @click="
                            changeAngezeigtesTabBaueigenschaften(
                              'neuTabBaueigenschaften'
                            )
                          "
                          no-caps
                        ></q-btn>
                      </div>
                    </div>
                    <!-- NEU: Dialog für Confirmation des Löschens einer Baueigenschaft: -->
                    <q-dialog
                      v-if="selectedRowsTableBaueigenschaften.length > 0"
                      v-model="deleteSelectedBaueigenschaftDialog"
                    >
                      <!-- =========================================================================== -->
                      <!-- ACHTUNG: Für die Formatierung in diesem QDialog ist aktuell nur eine QCard, -->
                      <!-- kein div-Wrapper und kein QForm erforderlich!                               -->
                      <!-- =========================================================================== -->
                      <q-card>
                        <q-card-section>
                          <div class="row full-width q-pa-xs">
                            <q-avatar
                              icon="warning"
                              color="negative"
                              text-color="white"
                              style="margin-left: auto;margin-right: auto;"
                            />
                          </div>
                          <!-- ------------------------------------------------------------------------------------------------ -->
                          <!-- HINWEIS: style="margin-left: auto;margin-right: auto;" am q-avatar in Verbindung mit div-Wrapper -->
                          <!--          für Centering des Avatars, siehe                                                        -->
                          <!--          https://forum.quasar-framework.org/topic/6109/align-to-center-within-grid-column/3      -->
                          <!-- ------------------------------------------------------------------------------------------------ -->
                          <div class="row full-width q-pt-md">
                            <span class="q-pa-none">
                              Soll die Baueigenschaft
                              <b>
                                >"{{
                                  selectedRowsTableBaueigenschaften[0]
                                    .typbezogeneBaueigenschaft
                                    .baueigenschaftsBezeichnung
                                }}"</b
                              >
                              wirklich gelöscht werden?
                            </span>
                          </div>
                        </q-card-section>
                        <!-- ALT: -->
                        <!-- <q-card-actions align="right"> -->
                        <!-- NEU: Buttons, die sich stretchen - erfordert Wrapper-div -->
                        <q-card-actions>
                          <div class="row full-width q-col-gutter-xs q-pa-xs">
                            <div class="col-6">
                              <q-btn
                                class="stretch full-width"
                                style="height: 100%"
                                glossy
                                label="Abbrechen"
                                color="positive"
                                no-caps
                                v-close-popup
                              />
                            </div>
                            <div class="col-6">
                              <!-- NEU - #395: Delete der wertbezogenen BEg erfolgt nur im Bauvorhabenbaum, -->
                              <!-- Dies wird über Parameter-Default wertBezogeneBaueigenschaftenLoeschenInBaumTyp = "Bauvorhabenbaum" gesteuert -->
                              <q-btn
                                class="stretch full-width"
                                style="height: 100%"
                                glossy
                                label="Löschen"
                                color="negative"
                                @click="deleteSelectedBaueigenschaft()"
                                v-close-popup
                                no-caps
                              />
                            </div>
                          </div>
                          <!-- ACHTUNG: Bei @click="method()" unbedingt "()"" hinter "method" angeben, sonst passiert gar nichts!!! -->
                          <!-- ANDERERSEITS: @click="handleClick" und @click="handleClick()" sind äquivalent laut https://flaviocopes.com/vue-events/ -->
                        </q-card-actions>
                      </q-card>
                    </q-dialog>
                  </q-tab-panel>
                  <!-- ---------------------------------------------------------------------------------------------------------------------------- -->
                  <q-tab-panel
                    class="q-pa-xs"
                    name="auswahlTabBaueigenschaften"
                  >
                    <div v-if="localStore.state.debugMode">
                      ausgewaehlteBaueigenschaft:
                      {{ ausgewaehlteBaueigenschaft }}
                      <br />
                      <!-- lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"} -->
                      lazy: {{ $refs.treeBaueinheiten.lazy }}
                      <q-separator />
                      <br />
                    </div>
                    <q-form class="q-pa-none" v-if="ausgewaehlteBaueigenschaft">
                      <!-- <div style="min-width: 1000px"> -->
                      <div>
                        <!-- ACHTUNG: Dieses div mit style="min-width:" ist unbedingt notwendig hinter dem q-form, um dessen Größe zu definieren!!! -->
                        <!-- Sonst macht es sich automatisch klein!!! -->
                        <!-- *** =================================================================================================================== -->
                        <!-- HINWEIS: Der folgende Code war temporär inaktiviert per v-if="false" (bis ca. Zeile 2500+ ) -->
                        <!--          War ersetzt durch Kindkomponente BaueigenschaftBearbeitung (baustoffe-baueigenschaft-bearbeitung.vue) -->
                        <!--          Diese jedoch wieder entfernt und den Inline Code reaktiviert, da die Komponente nur einmal aufgerufen wurde -->
                        <!-- ----------------------------------------------------------------------------------------------------------------------- -->
                        <!-- DONE: Folgenden Code disabled, weil die Kindkomponente hier entfernt wurde: -->
                        <!--
                        <div v-if="localStore.state.debugMode">
                          Komponente BaueinheitenBaueigenschaftBearbeitung:
                          <p>
                            Prop
                            selectModelBauinformationAusgewaehlteBaueigenschaft:
                            {{ dataSelectModelBauinformation }}
                            {{ dataAusgewaehlteBauinformation }}
                          </p>
                          <p>
                            Prop (Kopie) ausgewaehlteBaueigenschaft:
                            {{ ausgewaehlteBaueigenschaft }}
                          </p>
                        </div>
                        -->
                        <div v-if="localStore.state.debugMode">
                          TODO XXXXXX: Ermögliche variablen MessageText im
                          global-Store: Folgende Baueinheiten müssen aktiviert
                          werden:
                          {{
                            hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
                          }}
                          <q-separator />
                          <br />
                        </div>
                        <!-- ALT: div mit style="min-width:" ist unbedingt notwendig hinter dem q-form, um dessen Größe zu definieren!!! -->
                        <!-- Sonst macht es sich automatisch klein!!! -->
                        <div class="q-pb-sm text-h6" v-if="$q.screen.gt.sm">
                          Details zur ausgewählten Baueigenschaft
                          <strong
                            >"{{
                              ausgewaehlteBaueigenschaft
                                .typbezogeneBaueigenschaft
                                .baueigenschaftsBezeichnung
                            }}"</strong
                          >
                        </div>
                        <div class="q-pb-sm text-subtitle1" v-else>
                          Details zur ausgewählten Baueigenschaft
                          <strong
                            >"{{
                              ausgewaehlteBaueigenschaft
                                .typbezogeneBaueigenschaft
                                .baueigenschaftsBezeichnung
                            }}"</strong
                          >
                        </div>
                        <div
                          class="row full-width items-start q-pa-xs q-col-gutter-xs inset-shadow"
                        >
                          <!-- ACHTUNG: Hier q-col-gutter-xs, nicht q-gutter-xs, sonst wird die letzte Column gewrapped!!! -->
                          <div class="col-md-3 col-12">
                            <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst Layout der Spalte nicht dense!!! -->
                            <div>
                              <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                              <b
                                >Typbezogene Angaben zur Baueigenschaft
                                (systemweit gültig)</b
                              >
                            </div>
                            <br />
                            <div>
                              <b
                                >Festlegung der Bezeichnung der
                                Baueigenschaft</b
                              >
                            </div>
                            <div>
                              <!-- Erstes q-input hat Testcode zur Nutzung von rules: -->
                              <!-- TODO XXXXXX: Änderung der Baueigenschaftsbezeichung ist aktuell noch disabled!!! -->
                              <q-input
                                :disable="
                                  true ||
                                    !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                    !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                "
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  ausgewaehlteBaueigenschaft
                                    .typbezogeneBaueigenschaft
                                    .baueigenschaftsBezeichnung
                                "
                                lazy-rules
                                :rules="[
                                  v => !!v || 'Bezeichnung ist erforderlich',
                                  v =>
                                    (v && v.length <= 200) ||
                                    'Bezeichnung darf höchstens 200 Zeichen lang sein'
                                ]"
                                label="Bezeichnung"
                                hint="Eindeutige Bezeichnung für die Baueigenschaft"
                                hide-hint
                              />
                            </div>
                            <br />
                            <!-- ACHTUNG: Dieses <br /> sorgt für gleichmäßge vertikale Ausrichtung der Eingabefelder auf dieser Maske!!! -->
                            <q-separator />
                            <div>
                              <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                              <b
                                >Weitere typbezogene Angaben zur
                                Baueigenschaft</b
                              >
                            </div>
                            <!-- <br /> -->
                            <!-- =============================================================================================== -->
                            <!-- ACHTUNG: Die beiden folgenden divs sind unbedingt notwendig, sonst funktioniert Layout NICHT!!! -->
                            <div class="col-md-3 col-12">
                              <div class="q-col-gutter-xs">
                                <!-- ============================================================================================= -->
                                <!-- NEU: #514/515 - q-input-Feld für baueigenschaftsAnzeigeText -->
                                <q-input
                                  :disable="
                                    !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                      !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                  "
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="
                                    ausgewaehlteBaueigenschaft
                                      .typbezogeneBaueigenschaft
                                      .baueigenschaftsAnzeigeText
                                  "
                                  label="Anzeigetext"
                                  hint="Anzeigetext für die Baueigenschaft, z.B. 'Schallschutzklasse'"
                                  hide-hint
                                />
                                <!-- ============================================================================================= -->
                                <q-input
                                  :disable="
                                    !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                      !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                  "
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="
                                    ausgewaehlteBaueigenschaft
                                      .typbezogeneBaueigenschaft
                                      .baueigenschaftsBemerkung
                                  "
                                  label="Bemerkung"
                                  hint="Bemerkung für die Baueigenschaft, z.B. 'Neu angelegt für Türen'"
                                  hide-hint
                                  autogrow
                                />
                              </div>
                              <!-- Kindkomponente zur Auswahl der Referenz auf eine Bauinformation für die Baueigenschaft -->
                              <!-- ALT: Separate Komponente - disabled -->
                              <!--
                                    <BauinformationAuswahl
                                      :selectModelBauinformationAusgewaehlteBaueigenschaft="
                                        ausgewaehlteBaueigenschaft
                                          .typbezogeneBaueigenschaft
                                          .bauinformation
                                      "
                                      :selectOptionsBauinformationenAusgewaehlteBaueigenschaft="
                                        selectOptionsBauinformationenAusgewaehlteBaueigenschaft
                                      "
                                      @selectValueChange="
                                        selectHandlerBauinformationAusgewaehlteBaueigenschaft(
                                          $event
                                        )
                                      "
                                    />
                                    -->
                              <!-- NEU: Inline Code wie im Tab "Neu": -->
                              <div>
                                <q-badge
                                  v-if="localStore.state.debugMode"
                                  color="secondary"
                                  multi-line
                                >
                                  selectModelBauinformationAusgewaehlteBaueigenschaft:
                                  <br />
                                  {{
                                    selectModelBauinformationAusgewaehlteBaueigenschaft
                                  }}
                                </q-badge>
                                <q-select
                                  dense
                                  :disable="
                                    !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                      !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                  "
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  input-class="text-white"
                                  filled
                                  v-model="
                                    selectModelBauinformationAusgewaehlteBaueigenschaft
                                  "
                                  :options="
                                    selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft
                                  "
                                  option-value="bauinformationsBezeichnung"
                                  :multiple="false"
                                  label="Zugeordnete Bauinformation auswählen/abwählen"
                                  stack-label
                                  use-chips
                                  options-selected-class="text-primary"
                                  options-dense
                                  use-input
                                  input-debounce="0"
                                  @new-value="
                                    createSelectValueBauinformationenAusgewaehlteBaueigenschaft
                                  "
                                  @filter="
                                    selectFilterFunctionBauinformationenAusgewaehlteBaueigenschaft
                                  "
                                  bottom-slots
                                  @focus="
                                    showHintSelectBauinformationenAusgewaehlteBaueigenschaft = true
                                  "
                                  @blur="
                                    showHintSelectBauinformationenAusgewaehlteBaueigenschaft = false
                                  "
                                >
                                  <!-- TODO: style="width: 720px" -->
                                  <!-- Zu den Icons siehe https://quasar.dev/vue-components/select#Decorators - erfordert "bottom-slots" Prop am q-select  -->
                                  <template v-slot:append>
                                    <q-icon name="search" @click.stop />
                                    <!-- Statt "clearable" Prop am q-select expliziter Cancel-Icon - erlaubt es, dessen Color zu setzen -->
                                    <!-- Vorlage: https://quasar.dev/vue-components/select#Clearable -->
                                    <!-- ALT: Am folgenden template v-if="selectModelBauinformationAusgewaehlteBaueigenschaft" -->
                                    <!-- ACHTUNG: Da selectModelBauinformationAusgewaehlteBaueigenschaft ein Objekt, kein Array ist, -->
                                    <!-- muss es auf null oder {} resetted werden, nicht auf [] -->
                                    <q-icon
                                      name="cancel"
                                      @click.stop="
                                        selectModelBauinformationAusgewaehlteBaueigenschaft = null
                                      "
                                      class="cursor-pointer"
                                      color="primary"
                                    />
                                  </template>
                                  <template
                                    v-slot:hint
                                    v-if="
                                      showHintSelectBauinformationenAusgewaehlteBaueigenschaft
                                    "
                                  >
                                    <ul class="q-pl-xs">
                                      <li>
                                        <strong>Filtern:</strong> Eine
                                        Bauinformationsbezeichnung (z.B. "Norm >
                                        DIN > EN > 13164") oder einen
                                        Bauinformationsanzeigetext (z.B.
                                        "Datenblatt") als Filtertext in das
                                        Eingabefeld eingeben. Auch
                                        unvollständige Angaben (z.B. "Datenbl")
                                        sind möglich. Dies filtert die im
                                        Dropdown-Menü angezeigten Optionen.
                                      </li>
                                      <li>
                                        <strong>Auswählen:</strong> Eine der
                                        ausgewählten Baueigenschaft zugeordnete
                                        Bauinformation im Dropdown-Menü
                                        auswählen.
                                      </li>
                                      <li>
                                        <strong>Abwählen:</strong> Die
                                        ausgewählte Bauinformation kann mit
                                        <q-icon
                                          name="cancel"
                                          color="primary"
                                        />&nbsp;abgewählt werden.
                                      </li>
                                      <li>
                                        <strong>Speichern:</strong>
                                        Unten Schaltfläche "Speichern" drücken.
                                      </li>
                                    </ul>
                                    <!-- <br /> <br /> <br /> -->
                                    <!-- TODO: Um vertikalen Scrollbalken zu verhindern, funktioniert nicht -->
                                  </template>
                                  <template v-slot:selected-item="scope">
                                    <q-chip
                                      removable
                                      dense
                                      @remove="scope.removeAtIndex(scope.index)"
                                      :tabindex="scope.tabindex"
                                      color="primary"
                                      text-color="white"
                                      class="q-ma-xs shadow-4"
                                    >
                                      <!-- ALT: -->
                                      <!-- {{ scope.opt.bauinformationsBezeichnung }} -->
                                      <!-- NEU: Long Label Truncation, mit Tooltip der vollen Bezeichnung, mittels spezieller CSS Class "ellipsis": -->
                                      <!-- Damit Truncation für lange Texte an QChip - Vorlage: https://quasar.dev/vue-components/chip#Example--Long-label-truncation -->
                                      <div class="ellipsis">
                                        {{
                                          scope.opt.bauinformationsBezeichnung
                                        }}
                                        <q-tooltip
                                          :delay="1000"
                                          :offset="[0, 10]"
                                          max-width="500px"
                                          content-class="bg-secondary text-white text-caption shadow-4"
                                          >{{
                                            scope.opt.bauinformationsBezeichnung
                                          }}</q-tooltip
                                        >
                                      </div>
                                      <!-- <q-avatar color="secondary" text-color="white" :icon="scope.opt.icon" /> -->
                                      <!-- scope.opt.bauinformationsBezeichnung -->
                                    </q-chip>
                                  </template>
                                  <template v-slot:option="scope">
                                    <q-item
                                      v-bind="scope.itemProps"
                                      v-on="scope.itemEvents"
                                    >
                                      <q-item-section>
                                        <q-item-label
                                          v-html="
                                            scope.opt.bauinformationsBezeichnung
                                          "
                                        />
                                        <!-- NEU: Hier bauinformationsAnzeigeText statt bauinformationsTyp anzeigen: -->
                                        <q-item-label caption>{{
                                          scope.opt.bauinformationsAnzeigeText
                                        }}</q-item-label>
                                      </q-item-section>
                                    </q-item>
                                  </template>
                                </q-select>
                              </div>
                              <!-- /q-select für Referenz auf Bauinformation -->
                              <!-- Platz für Hint schaffen: -->
                              <br />
                              <br />
                              <br />
                              <br />
                              <br />
                              <!-- =================================================================== -->
                              <!-- NEU: #514/515: -->
                              <div class="row q-col-gutter-xs inset-shadow">
                                <b>Typbezogene Merkmale der Baueigenschaft</b>
                              </div>
                              <!-- ------------------------------------------------------------------- -->
                              <div class="text-caption">
                                <div class="row full-width q-pa-xs">
                                  <div class="col-6">
                                    <q-toggle
                                      :disable="
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                          !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                      "
                                      dense
                                      v-model="
                                        ausgewaehlteBaueigenschaft
                                          .typbezogeneBaueigenschaft
                                          .systemdefiniertNichtBenutzerdefiniert
                                      "
                                      label="Ist im System vordefiniert, nicht benutzerdefiniert"
                                    />
                                  </div>
                                  <div class="col-6">
                                    <q-toggle
                                      :disable="
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                          !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                      "
                                      dense
                                      v-model="
                                        ausgewaehlteBaueigenschaft
                                          .typbezogeneBaueigenschaft
                                          .sollwertNichtIstwert
                                      "
                                      label="Definiert Sollwerte, nicht Istwerte"
                                    />
                                  </div>
                                </div>
                              </div>
                              <!-- =================================================================== -->
                              <!-- ALT - ohne QExpansionItem: -->
                              <!--
                              <div class="row q-col-gutter-xs inset-shadow">
                                <b
                                  >Zuordnung der Baueigenschaft zu
                                  fachlichen Rubriken</b
                                >
                              </div>
                              -->
                              <!-- ------------------------- -->
                              <!-- NEU - mit QExpansionItem: -->
                              <br />
                              <q-expansion-item
                                expand-separator
                                :default-opened="false"
                                dense
                                header-class="bg-white text-bold inset-shadow q-gutter-xs"
                                label="Zuordnung zu fachlichen Kategorien und Rubriken"
                              >
                                <!-- -------------------------------------------------------------------------------------- -->
                                <div class="text-caption">
                                  <!-- NEU - #401: -->
                                  <!--
                                  ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                              .fachlicheKategorien:
                                  {{
                                    ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                              .fachlicheKategorien
                                  }}
                                  -->
                                  <div
                                    class="row full-width q-pa-xs"
                                    v-for="kategorie in optionsFachlicheKategorienBaueigenschaften"
                                    :key="kategorie.ueberschriftKategorie"
                                  >
                                    <div class="col-5">
                                      <b
                                        >{{ kategorie.ueberschriftKategorie }}
                                      </b>
                                    </div>
                                    <div class="col-7">
                                      <q-option-group
                                        type="checkbox"
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .fachlicheKategorien
                                        "
                                        :options="kategorie.optionsKategorie"
                                        bg-color="teal-2"
                                        standout="bg-teal-4 text-black"
                                        square
                                        dense
                                      >
                                      </q-option-group>
                                    </div>
                                    <q-separator class="row full-width" />
                                  </div>
                                </div>
                                <!-- -------------------------------------------------------------------------------------- -->
                                <!-- #401 - alte Schutzkategorien (ersetzt durch neue fachliche Kategorien/Rubriken), disabled: -->
                                <!--
                                <div class="text-caption">
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .projektManagement
                                        "
                                        label="Projektmanagement"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft.recht
                                        "
                                        label="Recht"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft.geografie
                                        "
                                        label="Geografie"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .geoPolitik
                                        "
                                        label="Geopolitik"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .infrastruktur
                                        "
                                        label="Infrastruktur"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .umweltUndKlima
                                        "
                                        label="Umwelt und Klima"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .hydroGeologie
                                        "
                                        label="Hydrogeologie"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft.geometrie
                                        "
                                        label="Geometrie"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .konstruktion
                                        "
                                        label="Konstruktion"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .lastAnnahmen
                                        "
                                        label="Lastannahmen"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .nutzungsUndBetriebsZeiten
                                        "
                                        label="Nutzungs- und Betriebszeiten"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft.raumKlima
                                        "
                                        label="Raumklima"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .beleuchtung
                                        "
                                        label="Beleuchtung"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .schallSchutz
                                        "
                                        label="Schallschutz"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .raumAkustik
                                        "
                                        label="Raumakustik"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .wärmeSchutz
                                        "
                                        label="Wärmeschutz"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .energieEinsparung
                                        "
                                        label="Energieeinsparung"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .standSicherheit
                                        "
                                        label="Standsicherheit"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .gebrauchsTauglichkeit
                                        "
                                        label="Gebrauchstauglichkeit"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .verkehrsSicherheit
                                        "
                                        label="Verkehrssicherheit"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .barriereFreiheit
                                        "
                                        label="Barrierefreiheit"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .brandSchutz
                                        "
                                        label="Brandschutz"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .feuchteSchutz
                                        "
                                        label="Feuchteschutz"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .korrosionsSchutz
                                        "
                                        label="Korrosionsschutz"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .abdichtungsTechnik
                                        "
                                        label="Abdichtungstechnik"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .chemischerHolzSchutz
                                        "
                                        label="Holzschutz"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .gesundheitUndHygiene
                                        "
                                        label="Gesundheit und Hygiene"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .schadstoffSchutz
                                        "
                                        label="Schadstoffschutz"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .umweltVerträglichkeit
                                        "
                                        label="Umweltverträglichkeit"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft.ökoBilanz
                                        "
                                        label="Ökobilanz"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .nachhaltigkeit
                                        "
                                        label="Nachhaltigkeit"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .materialEigenschaften
                                        "
                                        label="Materialeigenschaften"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft.sonstiges
                                        "
                                        label="Sonstiges"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .baueigenschaftsProfile
                                        "
                                        label="Baueigenschaftsprofile"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        :disable="
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                            !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                        "
                                        dense
                                        v-model="
                                          ausgewaehlteBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .bauinformationsProfile
                                        "
                                        label="Bauinformationsprofile"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                </div>
                                -->
                              </q-expansion-item>
                            </div>
                          </div>
                          <!-- =================================================================== -->
                          <div class="col-md-3 col-12">
                            <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst Layout der Spalte nicht dense!!! -->
                            <div>
                              <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                              <b
                                >Angaben zum Wertetyp der Baueigenschaft
                                (systemweit gültig)</b
                              >
                            </div>
                            <br />
                            <b>Festlegung des Wertetyps</b>
                            <!-- TODO XXXXX: Wertetyp darf aktuell nicht geändert werden, daher disabled -->
                            <q-select
                              :disable="
                                true ||
                                  !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                  !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                              "
                              square
                              bg-color="teal-2"
                              standout="bg-teal-4 text-black"
                              input-class="text-white"
                              dense
                              v-model="
                                ausgewaehlteBaueigenschaft
                                  .typbezogeneBaueigenschaft.werteTyp
                              "
                              label="Wertetyp"
                              hint="Auszuwählender Typ für die Werte der Eigenschaft, z.B. 'Datumswert'"
                              hide-hint
                              :options="optionsWertetypBaueigenschaft"
                              options-dense
                            />
                            <br />
                            <!-- ACHTUNG: Dieses <br /> sorgt für gleichmäßge vertikale Ausrichtung der Eingabefelder auf dieser Maske!!! -->
                            <q-separator />
                            <div>
                              <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                              <b>
                                Angaben zum Wertetyp 'Kennwert/Kennwertepaar'</b
                              >
                            </div>
                            <!-- <br /> -->
                            <!-- ========================================================================================================================= -->
                            <!-- NEU: Hier MarKdown Enablement für Felder symbol, einheit, operator, formel: -->
                            <div class="q-col-gutter-xs">
                              <q-input
                                :disable="
                                  disabledFieldsAusgewaehlteBaueigenschaft.symbol ||
                                    !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                    !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                "
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  ausgewaehlteBaueigenschaft
                                    .typbezogeneBaueigenschaft.symbol
                                "
                                label="Symbol (Markdown-Format)"
                                hint="Symbol, z.B. 'λ'"
                                hide-hint
                              />
                            </div>
                            <div class="row full-width q-col-gutter-xs">
                              <!-- <br /> -->
                              <div class="col-4">
                                <small>Formatiertes Symbol:</small>
                              </div>
                              <div class="col-8">
                                <q-markdown
                                  :src="
                                    ausgewaehlteBaueigenschaft
                                      .typbezogeneBaueigenschaft.symbol
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                ></q-markdown>
                              </div>
                            </div>
                            <br />
                            <div class="q-col-gutter-xs">
                              <q-input
                                :disable="
                                  disabledFieldsAusgewaehlteBaueigenschaft.einheit ||
                                    !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                "
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  ausgewaehlteBaueigenschaft
                                    .typbezogeneBaueigenschaft.einheit
                                "
                                label="Einheit (Markdown-Format)"
                                hint="Einheit, z.B. 'W/(mK)'"
                                hide-hint
                              />
                            </div>
                            <div class="row full-width q-col-gutter-xs">
                              <div class="col-4">
                                <small>Formatierte Einheit:</small>
                              </div>
                              <div class="col-8">
                                <q-markdown
                                  :src="
                                    ausgewaehlteBaueigenschaft
                                      .typbezogeneBaueigenschaft.einheit
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                ></q-markdown>
                              </div>
                            </div>
                            <br />
                            <!-- --------------------------------------------------------------------------------------- -->
                            <!-- NEU: #514, Operator in typbezogenen Feldern wird nicht mehr unterstützt, daher disabled -->
                            <!--
                            <div class="q-col-gutter-xs">
                              <q-input
                                :disable="
                                  disabledFieldsAusgewaehlteBaueigenschaft.operator ||
                                    !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                    !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                "
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  ausgewaehlteBaueigenschaft
                                    .typbezogeneBaueigenschaft.operator
                                "
                                label="Operator (Markdown-Format)"
                                hint="Operator, z.B. '<' oder '≤'"
                                hide-hint
                              />
                            </div>
                            <div class="row full-width q-col-gutter-xs">
                              <br />
                              <div class="col-4">
                                <small>Formatierter Operator:</small>
                              </div>
                              <div class="col-8">
                                <q-markdown
                                  :src="
                                    ausgewaehlteBaueigenschaft
                                      .typbezogeneBaueigenschaft.operator
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                ></q-markdown>
                              </div>
                            </div>
                            <br />
                            -->
                            <!-- --------------------------------------------------------------------------------------- -->
                            <div class="q-col-gutter-xs">
                              <q-input
                                :disable="
                                  disabledFieldsAusgewaehlteBaueigenschaft.formel ||
                                    !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                    !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                                "
                                autogrow
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  ausgewaehlteBaueigenschaft
                                    .typbezogeneBaueigenschaft.formel
                                "
                                label="Formel (Markdown-Format)"
                                :hint="hintFuerFormelMitSonderzeichen"
                                hide-hint
                              />
                            </div>
                            <div class="row full-width q-col-gutter-xs">
                              <!-- <br /> -->
                              <div class="col-4">
                                <small>Formatierte Formel:</small>
                              </div>
                              <div class="col-8">
                                <q-markdown
                                  :src="
                                    ausgewaehlteBaueigenschaft
                                      .typbezogeneBaueigenschaft.formel
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                ></q-markdown>
                              </div>
                            </div>
                            <br />
                            <!-- NEU: q-select zur Auswahl von Sonderzeichen -->
                            <b
                              >Sonderzeichen im Markdown-Format in obige Felder
                              einfügen:</b
                            >
                            <div class="text-caption">
                              Im folgenden Dropdown-Menü ein Sonderzeichen
                              auswählen. Dabei wird dessen-Formatierung in die
                              Zwischenablage kopiert. Diese mit Strg+V an der
                              gewünschten Cursorposition in obige Felder
                              einfügen.
                            </div>
                            <q-select
                              dense
                              :disable="
                                disabledFieldsAusgewaehlteBaueigenschaft.formel ||
                                  !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                  !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                              "
                              square
                              bg-color="teal-2"
                              standout="bg-teal-4 text-black"
                              input-class="text-white"
                              filled
                              options-dense
                              :multiple="false"
                              v-model="
                                selectModelSonderzeichenAusgewaehlteBaueigenschaft
                              "
                              :options="selectOptionsSonderzeichen"
                              stack-label
                              label="Sonderzeichen - per Dropdown-Menü (rechts) auswählen"
                              :display-value="
                                `${
                                  selectModelSonderzeichenAusgewaehlteBaueigenschaft
                                    ? selectModelSonderzeichenAusgewaehlteBaueigenschaft.label
                                    : 'Kein Sonderzeichen ausgewählt'
                                }`
                              "
                              :display-value-sanitize="false"
                              @input="
                                copyToClipboardSonderzeichenAusgewaehlteBaueigenschaft(
                                  selectModelSonderzeichenAusgewaehlteBaueigenschaft.value
                                )
                              "
                            >
                              <template v-slot:append>
                                <q-icon
                                  v-if="
                                    selectModelSonderzeichenAusgewaehlteBaueigenschaft !=
                                      null
                                  "
                                  class="cursor-pointer"
                                  name="clear"
                                  @click.stop="
                                    selectModelSonderzeichenAusgewaehlteBaueigenschaft = null
                                  "
                                ></q-icon>
                              </template>
                            </q-select>
                            <!-- Selbstgemachter Hint unter dem q-select: -->
                            <div
                              v-if="
                                copyToClipboardDoneSonderzeichenAusgewaehlteBaueigenschaft
                              "
                              class="text-caption"
                            >
                              Die Formatierung für das ausgewählte Sonderzeichen
                              mit Strg+V an der gewünschten Position in obige
                              Markdown-Felder einfügen
                            </div>
                            <!-- Ende neuer Code für symbol, einheit, operator, formel als Markdown -->
                            <!-- ========================================================================================================================= -->
                            <div>
                              <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                              <br />
                              <br />
                              <b>Angaben zum Wertetyp 'Aufzählungswert'</b>
                              <br />
                              <div class="text-caption">
                                Reserviert für die Definition der selektierbaren
                                Optionen für den Wertetyp 'Aufzählungswert'
                                (TBD)
                              </div>
                            </div>
                          </div>
                          <!-- /col, 2. Spalte -->
                          <!-- 3. Spalte: -->
                          <div class="col-md-6 col-12">
                            <!-- NEU: Code nur noch mit q-radios für aktiviert/deaktiviert - aktiviert bedeutet "im Pfad aktiviert" -->
                            <div
                              class="row q-col-gutter-xs inset-shadow-3 q-pb-md"
                            >
                              <b
                                >Aktivierungszustand der Baueigenschaft an der
                                ausgewählten Baueinheit im Bauvorhabenbaum</b
                              >
                              <div class="col-6">
                                <!-- @input="handleAktivierung(true)" -->
                                <q-radio
                                  :disable="
                                    !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                  "
                                  color="accent"
                                  class="text-accent"
                                  dense
                                  v-model="
                                    ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert
                                  "
                                  :val="true"
                                  label="Aktiviert (an der ausgewählten Baueinheit sowie an allen Elternbaueinheiten bis zur Wurzelbaueinheit)"
                                  @input="handleAktivierung(true)"
                                />
                              </div>
                              <div class="col-6">
                                <!-- @input="handleAktivierung(false)" -->
                                <q-radio
                                  :disable="
                                    !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                  "
                                  dense
                                  color="primary"
                                  v-model="
                                    ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert
                                  "
                                  :val="false"
                                  label="Deaktiviert (an der ausgewählten Baueinheit sowie an allen direkten und indirekten Kindbaueinheiten)"
                                  @input="handleAktivierung(false)"
                                />
                              </div>
                              <!-- Die folgenden divs sind notwendig, um Abstand zwischen den q-radios für Aktivierungszustand und den Zeilen darunter zu bekommen, -->
                              <!-- insbesondere wenn die Fensterbreite schmal ist - sonst ragt der Label-Text an den q-radios in die Zeilen darunter -->
                              <!--
                                  <div class="row">
                                  <br />
                                </div>
                                -->
                            </div>
                            <!-- ALT: Alter Code für q-radios mit deaktiviert/lokal aktiviert/im Pfad aktiviert/aktiverbar - disabled -->
                            <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst Layout der Spalte nicht dense!!! -->
                            <!-- Nun zuerst eine Row durchgehend für Aktvierungsmerkmale -->
                            <!--
                                    <div class="row full-width q-col-gutter-xs inset-shadow-3">
                                      <b
                                        >Aktivierungsmerkmale der Baueigenschaft an der ausgewählten Baueinheit
                                        im Bauvorhabenbaum</b
                                      >
                                      <div class="row q-col-gutter-xs">
                                        <div class="col-6 q-col-gutter-xs">
                                          <div class="row q-col-gutter-xs">
                                    -->
                            <!-- ACHTUNG: Die Änderungen von ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert müssen hier invertiert erfolgen, -->
                            <!-- weil handleAKtivierung es so erwartet!!! -->
                            <!--
                                    <q-radio
                                      dense
                                      color="primary"
                                      v-model="aktivierungsMerkmaleAusgewaehlteBaueigenschaft"
                                      val="deaktiviert"
                                      @input="handleAktivierung(false)"
                                      label="Deaktiviert"
                                    />
                                    -->
                            <!--
                                    </div>
                                    <div class="row q-col-gutter-xs">
                                    -->
                            <!-- ACHTUNG: Die Änderungen von ausgewwaehlteBaueigenschaft.aktiviertNichtDeaktiviert müssen hier invertiert erfolgen, -->
                            <!-- weil handleAKtivierung es so erwartet!!! -->
                            <!--
                                    <q-radio
                                      dense
                                      color="accent"
                                      class="text-accent"
                                      v-model="aktivierungsMerkmaleAusgewaehlteBaueigenschaft"
                                      val="lokalAktiviert"
                                      @input="handleAktivierung(true)"
                                      label="Lokal aktiviert (an der ausgewählten Baueinheit im Bauvorhabenbaum)"
                                    />
                                    -->
                            <!--
                                    </div>
                                    <div class="row q-col-gutter-xs">
                                    -->
                            <!-- TODO: Hier vorläufig selber Handler wie für lokale Aktivierung -->
                            <!-- Braucht aber eigenen Handler, der Aktivierung im Pfad auslöst! -->
                            <!-- ACHTUNG: Die Änderungen von ausgewwaehlteBaueigenschaft.aktiviertNichtDeaktiviert müssen hier invertiert erfolgen, -->
                            <!-- weil handleAKtivierung es so erwartet!!! -->
                            <!--
                                    <q-radio
                                      dense
                                      color="primary"
                                      class="text-accent"
                                      v-model="aktivierungsMerkmaleAusgewaehlteBaueigenschaft"
                                      val="imPfadAktiviert"
                                      @input="handleAktivierung(true)"
                                      label="Im Pfad aktiviert (an der ausgewählten Baueinheit und an allen direkten und indirekten Elternbaueinheiten bis zur Wurzelbaueinheit im Bauvorhabenbaum)"
                                    />
                                    -->
                            <!--
                                  </div>
                                  <br />
                                  </div>
                                  <div class="col-6">
                                  -->
                            <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst Layout der Spalte nicht dense!!! -->
                            <!--
                                        <div class="row q-col-gutter-xs">
                                          <q-space />
                                          <br />
                                          <br />
                                          <br />
                                        </div>
                                        <div class="row q-col-gutter-xs">
                                          <q-space />
                                        </div>
                                        <div class="row q-col-gutter-xs">
                                          <q-radio
                                            dense
                                            label="Lokal aktivierbar (systemverwaltet)"
                                            :disable="true"
                                            v-model="ausgewaehlteBaueigenschaft.aktivierbar"
                                            :val="true"
                                            @input="ausgewaehlteBaueigenschaft.aktivierbar = true"
                                          />
                                        </div>
                                        -->
                            <!--
                                          <div>
                                            <q-toggle
                                              :value="
                                                ausgewaehlteBaueigenschaft.obligatorischNichtOptional
                                              "
                                              label="Obligatorisch"
                                              @input="obligatorischHandler()"
                                            />
                                          </div>
                                        -->
                            <!--
                                      </div>
                                    </div>
                                    -->
                            <!-- Nun eine Row mit 2 Columns für wertebezogene Angaben und wertbezogene Merkmale: -->
                            <div
                              class="row full-width q-col-gutter-xs inset-shadow"
                            >
                              <!-- Erste Column für wertbezogene Angaben: -->
                              <div class="col-md-6 col-12">
                                <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst Layout der Spalte nicht dense!!! -->
                                <div>
                                  <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                                  <b
                                    >Wertbezogene Angaben (gemäß Wertetyp) zur
                                    aktivierten Baueigenschaft an der
                                    ausgewählten Baueinheit
                                  </b>
                                  <br />
                                  <br />
                                </div>
                                <div>
                                  <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                                  <b>Kennwert/Kennwertepaar</b>
                                </div>
                                <div class="q-col-gutter-xs">
                                  <q-input
                                    :disable="
                                      disabledFieldsAusgewaehlteBaueigenschaft.kennWert1 ||
                                        disableWerteFelder ||
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft.kennWert1
                                    "
                                    type="number"
                                    label="Kennwert 1"
                                    hint="Numerischer Wert, z.B. '3,14'"
                                    hide-hint
                                  />
                                </div>
                                <div class="q-col-gutter-xs">
                                  <q-input
                                    :disable="
                                      disabledFieldsAusgewaehlteBaueigenschaft.kennWert2 ||
                                        disableWerteFelder ||
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft.kennWert2
                                    "
                                    type="number"
                                    label="Kennwert 2"
                                    hint="Numerischer Wert, z.B. '5000'"
                                    hide-hint
                                  />
                                </div>
                                <div>
                                  <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                                  <b>Datumswert/Datumswertepaar</b>
                                </div>
                                <div class="q-col-gutter-xs">
                                  <q-input
                                    :disable="
                                      disabledFieldsAusgewaehlteBaueigenschaft.datumsWert1 ||
                                        disableWerteFelder ||
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft.datumsWert1
                                    "
                                    label="Datumswert 1"
                                    stack-label
                                    hint="Datum im Format 'tt.mm.jjjj', z.B. '01.12.2019'"
                                    hide-hint
                                    type="date"
                                  >
                                    <!-- ------------------------------------------------------------------------------------------------------------------------------------------------------ -->
                                    <!-- Testcode für Quasar q-date, vorläufig wieder disabeld zugunsten von alternativem native Date (Browser Date Picker) an q-input-Feldern -->
                                    <!-- für Datumswert1/2 mittels type="date" -->
                                    <!-- mask="####-##-##" -->
                                    <!-- Für Verwendung als Property an diesen q-input Feldern, zusammen mit dem q-date Date Picker für Datumswert1 unten -->
                                    <!-- TODO: Mask Properties ausprobieren am q-input (z.B. mask="####-##-##") und am q-date (z.B. mask="YYYY-MM-DD" oder 'DD.MM.YYYY', mit funktionierender Kombination -->
                                    <!-- Das Datumsfeld kommt im Mongoose Format aus der Datenbank (UTC, YYYY-MM-DDTHH:MM:SS.000Z -->
                                    <!-- In der QTable Feldern wird es aktuell mit formatDate nach YYYY-MM-DD bzw. neuerdings mit Quasar Date Util nach DD.MM.YYYY konvertiert -->
                                    <!-- Es wird in diversen Funktionen unten bereits umformatiert in das Format 'DD.MM.YYYY', in ausgewaehlteBaueigenschaft.datumsWert1/2 -->
                                    <!-- und neueBaueigenschaft.datumsWert1/2 -->
                                    <!-- In den q-input Feldern wird es alternativ aktuell mittels type="date" auf den Browser Date Picker geleitet. -->
                                    <!-- Allerdings dürfen diese q-input Felder dann keine autogrow Prop haben!!!  -->
                                    <!-- Es folgt der Testcode für q-date: -->
                                    <!-- :locale="dateLocale" -->
                                    <!-- Prop von q-date - nicht notwendig, wenn in quasar.conf.js lang: "de" als Quasar language gesetzt wird -->
                                    <!--
                                            <template v-slot:append>
                                              <q-icon
                                                name="event"
                                                class="cursor-pointer"
                                              >
                                                <q-popup-proxy
                                                  ref="qDateProxyDatumsWert1AusgewaehlteBaueigenschaft"
                                                  transition-show="scale"
                                                  transition-hide="scale"
                                                >
                                                  <q-date
                                                    v-model="
                                                      ausgewaehlteBaueigenschaft.datumsWert1
                                                    "
                                                    @input="
                                                      () =>
                                                        $refs.qDateProxyDatumsWert1AusgewaehlteBaueigenschaft.hide()
                                                    "
                                                    mask="DD.MM.YYYY"
                                                  />
                                                </q-popup-proxy>
                                              </q-icon>
                                            </template>
                                            -->
                                  </q-input>
                                </div>
                                <div class="q-col-gutter-xs">
                                  <q-input
                                    :disable="
                                      disabledFieldsAusgewaehlteBaueigenschaft.datumsWert2 ||
                                        disableWerteFelder ||
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft.datumsWert2
                                    "
                                    label="Datumswert 2"
                                    stack-label
                                    hint="Datum im Format 'tt.mm.jjjj', z.B. '31.12.2020"
                                    hide-hint
                                    type="date"
                                  />
                                </div>
                                <!-- Testfeld für native Date, siehe https://quasar.dev/vue-components/input#Example--Input-types -->
                                <!-- ACHTUNG: Dieser type="date" funktioniert ursprünglich NICHT an den q-input Feldern für Datumwwerte (diese sind Mongoose Dates) -->
                                <!-- oder Bezeichnungswerte (diese sind Strings) -->
                                <!-- Grund: autogrow Property am q-input war t in Konflikt mit Property type="date" - autogrow muss entfernt werden bei type="date" -->
                                <!-- ACHTUNG: q-input darf bei type="date" keine autogrow Property enthalten!!! -->
                                <!--
                                        <div>
                                        <b>Testfeld für native Date</b>
                                        <q-input square
                                            bg-color="teal-2"
                                            standout="bg-teal-4 text-black"
                                            dense
                                            v-model="dateTest"
                                            type="date"
                                            hint="Native Date">
                                          </q-input>
                                        </div>
                                        <br />
                                        -->
                                <div>
                                  <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                                  <b>Tageszeitwert/Tageszeitwertepaar</b>
                                  <!-- NEU -->
                                </div>
                                <div class="q-col-gutter-xs">
                                  <q-input
                                    :disable="
                                      disabledFieldsAusgewaehlteBaueigenschaft.tagesZeitWert1 ||
                                        disableWerteFelder ||
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft.tagesZeitWert1
                                    "
                                    label="Tageszeitwert 1"
                                    stack-label
                                    hint="Uhrzeit im 24-Stunden-Format 'hh:mm', z.B. '08:00'"
                                    hide-hint
                                    type="time"
                                  >
                                  </q-input>
                                </div>
                                <div class="q-col-gutter-xs">
                                  <q-input
                                    :disable="
                                      disabledFieldsAusgewaehlteBaueigenschaft.tagesZeitWert2 ||
                                        disableWerteFelder ||
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft.tagesZeitWert2
                                    "
                                    label="Tageszeitwert 2"
                                    stack-label
                                    hint="Uhrzeit im 24-Stunden-Format 'hh:nn', z.B. '18:00'"
                                    hide-hint
                                    type="time"
                                  />
                                </div>
                                <div>
                                  <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                                  <b>Bezeichnungswert/Bezeichnungswertepaar</b>
                                </div>
                                <div class="q-col-gutter-xs">
                                  <q-input
                                    :disable="
                                      disabledFieldsAusgewaehlteBaueigenschaft.bezeichnungsWert1 ||
                                        disableWerteFelder ||
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    type="date"
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft.bezeichnungsWert1
                                    "
                                    label="Bezeichnungswert 1"
                                    hint="Frei wählbare Bezeichnung, z.B. 'Gültig ab'"
                                    hide-hint
                                    autogrow
                                  />
                                </div>
                                <div class="q-col-gutter-xs">
                                  <q-input
                                    :disable="
                                      disabledFieldsAusgewaehlteBaueigenschaft.bezeichnungsWert2 ||
                                        disableWerteFelder ||
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft.bezeichnungsWert2
                                    "
                                    label="Bezeichnungswert 2"
                                    hint="Frei wählbare Bezeichnung, z.B. 'Gültig bis'"
                                    hide-hint
                                    autogrow
                                  />
                                </div>
                                <div class="row full-width q-pa-none">
                                  <div class="col-3">
                                    <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                                    <b>Wahrheitswert</b>
                                  </div>
                                  <div class="col-9 text-caption">
                                    <!-- NEU in Quasar 1.8: Zustand des q-toggles ist neutrales "indeterminate" bei Wert "null", mit Prop toggle-indeterminate -->
                                    <q-toggle
                                      dense
                                      :disable="
                                        disabledFieldsAusgewaehlteBaueigenschaft.wahrheitsWert ||
                                          disableWerteFelder ||
                                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                      "
                                      v-model="
                                        ausgewaehlteBaueigenschaft.wahrheitsWert
                                      "
                                      toggle-indeterminate
                                      label="unzutreffend/undefiniert/zutreffend"
                                    />
                                  </div>
                                </div>
                                <br />
                                <div>
                                  <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                                  <b>Aufzählungswert</b>
                                  <!-- ALT: Kindkomponente, disabled -->
                                  <!-- Aufruf einer separaten Vue-Komponente für das QSelect Handling der Aufzählungswerte -->
                                  <!--
                                          <AufzaehlungsWerteAuswahl
                                            :ausgewaehlteBaueigenschaft="
                                              ausgewaehlteBaueigenschaft
                                            "
                                            :disableProp="
                                              disabledFieldsAusgewaehlteBaueigenschaft.aufzählungsWert ||
                                                disableWerteFelder
                                            "
                                          />
                                          -->
                                  <!-- NEU: Kindkomponente disabled zugunsten von Inline Code: -->
                                  <q-select
                                    dense
                                    :disable="
                                      disabledFieldsAusgewaehlteBaueigenschaft.aufzaehlungsWert ||
                                        disableWerteFelder ||
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    input-class="text-white"
                                    filled
                                    v-model="
                                      ausgewaehlteBaueigenschaft.aufzaehlungsWert
                                    "
                                    :options="
                                      selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft
                                    "
                                    @filter="
                                      selectFilterFunctionAufzaehlungswertAusgewaehlteBaueigenschaft
                                    "
                                    :multiple="true"
                                    label="Optionen für den Aufzählungswert auswählen"
                                    stack-label
                                    use-chips
                                    options-selected-class="text-primary"
                                    options-dense
                                    use-input
                                    input-debounce="0"
                                    bottom-slots
                                    @focus="
                                      showHintSelectAufzaehlungswertAusgewaehlteBaueigenschaft = true
                                    "
                                    @blur="
                                      showHintSelectAufzaehlungswertAusgewaehlteBaueigenschaft = false
                                    "
                                  >
                                    <!-- TODO: style="width: 720px" -->
                                    <!-- Zu den Icons siehe https://quasar.dev/vue-components/select#Decorators - erfordert "bottom-slots" Prop am q-select  -->
                                    <template v-slot:append>
                                      <q-icon name="search" @click.stop />
                                      <!-- NEU: Statt "clearable" Prop am q-select expliziter Cancel-Icon - erlaubt es, dessen Color zu setzen -->
                                      <!-- Vorlage: https://quasar.dev/vue-components/select#Clearable -->
                                      <!-- ACHTUNG: Hier ist das QSelect Model ausgewaehlteBaueigenschaft.aufzaehlungsWert, -->
                                      <!-- NICHT selectModelAufzaehlungswertAusgewaehlteBaueigenschaft, wie bei der Neuanlage!!! -->
                                      <!-- Deshalb muss auch dieses auf null gesetzt werden!!! -->
                                      <q-icon
                                        @click.stop="
                                          ausgewaehlteBaueigenschaft.aufzaehlungsWert = null
                                        "
                                        name="cancel"
                                        class="cursor-pointer"
                                        color="primary"
                                      />
                                      <!-- ACHTUNG: TODO - Muss oben leerer Array sein???  -->
                                    </template>
                                    <!-- Den folgenden VSlot für den Hint disabled, da er viel vertikalen Platz brauchte -->
                                    <!-- ACHTUNG: Der Text im Hint ist für den QSelect-Modus "Auswählen von Optionen" (d.h. nicht "New Value Mode" wie bei Neuanlage) -->
                                    <!--
                                      <template
                                        v-slot:hint
                                        v-if="
                                          showHintSelectAufzaehlungswertAusgewaehlteBaueigenschaft
                                        "
                                      >
                                        <ul class="q-pl-xs" v-else>
                                          <li>
                                            <strong>Auswählen</strong> von Optionen für den
                                            Aufzählungswert: Diese im Dropdown-Menü auswählen.
                                            Es können eine einzelne oder mehrere Optionen ausgewählt werden.
                                          </li>
                                          <li>
                                            <strong>Filtern:</strong> Einen Filtertext in das
                                            Eingabefeld eingeben. Auch unvollständige Angaben sind
                                            möglich. Dies filtert die im Dropdown-Menü angezeigten
                                            Optionen.
                                          </li>
                                          <li>
                                            <strong>Abwählen:</strong> Zur Liste der Optionen
                                            hinzugefügte Optionen können mit
                                            <q-icon name="cancel" color="primary" />&nbsp;abgewählt
                                            werden.
                                          </li>
                                          <li>
                                            Zum
                                            <strong>Speichern:</strong> Unten Schaltfläche "Baueigenschaft speichern"
                                            drücken.
                                          </li>
                                        </ul>
                                      </template>
                                      -->
                                    <!-- Es folgt der v-slot zur Anzeige des q-chips für eine ausgewählte Option: -->
                                    <template v-slot:selected-item="scope">
                                      <!-- scope: {{scope}} -->
                                      <!-- scope ist hier ein Objekt, das einen selektierten Optionswert repräsentiert, welcher per q-chip angezeigt wird -->
                                      <!-- Dieses besteht aus den Feldern scope.index, .opt, .sanitize, .selected und .tabindex -->
                                      <q-chip
                                        removable
                                        dense
                                        @remove="
                                          scope.removeAtIndex(scope.index)
                                        "
                                        :tabindex="scope.tabindex"
                                        color="primary"
                                        text-color="white"
                                        class="q-ma-xs shadow-4"
                                      >
                                        <!-- ALT: -->
                                        <!-- {{ scope.opt.valueAufzaehlungswert }} -->
                                        <!-- ALT - TODO bei option-value="valueAufzaehlungswert" -->
                                        <!-- <q-avatar color="secondary" text-color="white" :icon="scope.opt.icon" /> -->
                                        <!-- ALT -->
                                        <!-- ALT: -->
                                        <!-- {{ scope.opt }} -->
                                        <!-- ACHTUNG: Bzgl. Sanitization wird hier für die Anzeige im q-chip kein v-html verwendet, sondern wie unten bei den Options nur Moustaches -->
                                        <!-- NEU: Long Label Truncation, mit Tooltip der vollen Bezeichnung, mittels spezieller CSS Class "ellipsis": -->
                                        <!-- Damit Truncation für lange Texte an QChip - Vorlage: https://quasar.dev/vue-components/chip#Example--Long-label-truncation -->
                                        <div class="ellipsis">
                                          {{ scope.opt }}
                                          <q-tooltip
                                            :delay="1000"
                                            :offset="[0, 10]"
                                            max-width="500px"
                                            content-class="bg-secondary text-white text-caption shadow-4"
                                            >{{ scope.opt }}</q-tooltip
                                          >
                                        </div>
                                      </q-chip>
                                    </template>
                                    <!-- Es folgt der v-slot zur Anzeige der Options im Dropdown-Menü -->
                                    <template v-slot:option="scope">
                                      <!-- scope: {{scope}} -->
                                      <!-- scope ist hier das Objekt für einen Optionswert im Dropdown-Menü -->
                                      <!-- Dieses besteht aus den Feldern scope.index, .opt, .sanitize, .selected, .focused, .itemProps (Unterobjekt) und .itemEvents (Unterobjekt) -->
                                      <!-- Angezeigt wird aktuell nur scopt.opt, per v-html - das ist der Inhalt des Textfelds für den Optionswert -->
                                      <!-- ACHTUNG: Die Werte für die Options des Felds Aufzaehlungswert müssen sanitized werden, da er vom User definiert/eingegeben wird!!! -->
                                      <q-item
                                        v-bind="scope.itemProps"
                                        v-on="scope.itemEvents"
                                      >
                                        <!-- avatar section - funktioniert nur, falls ein Feld icon für die Option definiert ist -->
                                        <!--
                                          <q-item-section avatar>
                                          <q-icon :name="scope.opt.icon" />
                                          </q-item-section>
                                          -->
                                        <q-item-section>
                                          <!-- TODO bei option-value="valueAufzaehlungswert": -->
                                          <!-- scope.opt.valueAufzaehlungswert-->
                                          <!-- TODO: Sanitization der durch den User eingegebenen Option-Werte -->
                                          <!-- HINWEIS: Wenn im Folgenden v-html am q-item-label verwendet wird, wird der Inhalt des Felds scope.opt als HTML im Dropdown-Menü ausgegegaben -->
                                          <!-- <q-item-label v-html="scope.opt" /> -->
                                          <!-- Beispiel für eine solche "HTML-Option" (eingeben im Input-Feld des q-selects): <strong>xxl</strong> -->
                                          <!-- Dann muss die Benutzereingabe dafür auf jeden Fall sanitized werden -->
                                          <!-- Wenn nur {{ scope.opt }} am q-item-label ausgegeben wird, wird scope.opt nicht als HTML interpretiert -->
                                          <!-- Dann ist eine Sanitization vermutlich weniger kritisch -->
                                          <!-- Dies gilt auch für die q-chips oben, die die ausgewählten Options anzeigen -->
                                          <!-- ACHTUNG: Automatische Sanitization durch Quasar mit den Props options-sanitize und diplay-value-sanitize am q-select -->
                                          <!-- wird laut https://quasar.dev/vue-components/select#Sanitization nur unterstützt, wenn man NICHT wie hier der Fall -->
                                          <!-- den option v-slot bzw. die selected oder selected-item v-slots verwendet!!! -->
                                          <!-- Daher müsste für eine automatische Sanitzation durch Quasar mit diesen Props am q-select das q-select umgestellt werden -->
                                          <!-- auf eine Variante ohne v-slots. Die v-slots werden aktuell verwendet für das Einfügen des Search-Icons und das Ein-/Ausblenden -->
                                          <!-- der Hints bei Fokus. -->
                                          <q-item-label>{{
                                            scope.opt
                                          }}</q-item-label>
                                          <!-- ALT: Gefährlichere Variante: -->
                                          <!-- <q-item-label v-html="scope.opt" /> -->
                                          <!-- <q-item-label caption>{{ scope.opt.bauinformationsTyp }}</q-item-label> -->
                                        </q-item-section>
                                      </q-item>
                                    </template>
                                  </q-select>
                                  <!-- /q-select für Aufzählungswert -->
                                  <!-- Platz für Hint schaffen: -->
                                  <!-- ACHTUNG: Sonst erscheint vertikaler Scrollbalken, wenn das QSelect Fokus hat! -->
                                  <!-- Disabled, wie den Hint selbst -->
                                  <!--
                                    <br />
                                    <br />
                                    <br />
                                    <br />
                                    <br />
                                    <br />
                                    -->
                                </div>
                              </div>
                              <!-- /col, 3. Spalte -->
                              <!-- 4. Spalte:      -->
                              <!-- ACHTUNG: 4. Spalte darf nur col-3 sein, wenn oben q-col-gutter-xs, nicht q-gutter-xs, sonst Column Wrapping! Workaround: col-3 -->
                              <div class="col-md-6 col-12">
                                <!-- ACHTUNG: Hier kein q-col-gutter-xs, sonst Layout der Spalte nicht dense!!! -->
                                <div>
                                  <b
                                    >Wertbezogene Merkmale zur aktivierten
                                    Baueigenschaft an der ausgewählten
                                    Baueinheit im Bauvorhabenbaum</b
                                  >
                                </div>
                                <br />
                                <div>
                                  <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                                  <b>Systemverwaltete wertbezogene Merkmale</b>
                                </div>
                                <!-- HINWEIS: definiertNichtUndefiniert ist systemverwaltet (:disable=true), nciht benutzerverwaltet-->
                                <div>
                                  <q-toggle
                                    :value="
                                      istDefiniertAusgewaehlteBaueigenschaft
                                    "
                                    label="Werte sind in definiertem Zustand"
                                    :disable="true"
                                  />
                                </div>
                                <div>
                                  <q-toggle
                                    v-model="
                                      ausgewaehlteBaueigenschaft.ererbtNichtGesetzt
                                    "
                                    label="Werte sind von der Elternbaueinheit ererbt"
                                    :disable="true"
                                  />
                                </div>
                                <!-- NEU - #514: Merkmal verschoben von wertbezogenen nach typbezogenen Feldern, daher hier disabled -->
                                <!--
                                <div>
                                  <q-toggle
                                    v-model="
                                      ausgewaehlteBaueigenschaft.systemdefiniertNichtBenutzerdefiniert
                                    "
                                    label="Werte sind vom System vorgegeben (d.h. nicht vom Benutzer eingegeben)"
                                    :disable="true"
                                  />
                                </div>
                                -->
                                <div>
                                  <q-toggle
                                    v-model="
                                      ausgewaehlteBaueigenschaft.systemberechnetNichtSystemgesetzt
                                    "
                                    label="Werte sind vom System berechnet (d.h. nicht vom Benutzer eingegeben)"
                                    :disable="true"
                                  />
                                </div>
                                <br />
                                <div>
                                  <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                                  <b
                                    >Benutzerverwaltete wertbezogene Merkmale</b
                                  >
                                </div>
                                <div>
                                  <q-toggle
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    v-model="
                                      ausgewaehlteBaueigenschaft.vererbtAnKindknnoten
                                    "
                                    label="Werte werden vererbt an direkte und indirekte Kindknoten (stets der Fall im Baustoffbaum)"
                                  />
                                </div>
                                <!-- NEU - #514: Merkmal verschoben von wertbezogenen nach typbezogenen Feldern, daher hier disabled -->
                                <!--
                                <div>
                                  <q-toggle
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    v-model="
                                      ausgewaehlteBaueigenschaft.sollwertNichtIstwert
                                    "
                                    label="Werte sind Sollwerte, nicht Istwerte"
                                  />
                                </div>
                                -->
                                <div>
                                  <!-- TODO: q-select für Gütebewertung -->
                                  <!-- NEU - #300: Disabling des Felds, wenn die Werte der Baueigenschaft undefiniert sind -->
                                  <!-- hide-hint dabei entfernt -->
                                  <q-select
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                        !istDefiniertAusgewaehlteBaueigenschaft
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    input-class="text-white"
                                    dense
                                    v-model="
                                      ausgewaehlteBaueigenschaft.güteBewertung
                                    "
                                    label="Gütebewertung für die Werte der Baueigenschaft"
                                    hint="Auswählbare Einschätzung der Güte der Werte der Baueigenschaft, in drei farblich bezeichneten Gütestufen, z.B. 'gelb'.
                                      Nur gültig für Werte in definiertem Zustand.
                                    "
                                    :options="optionsGueteBewertung"
                                    options-dense
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <q-separator />
                        <!-- Es folgend die Buttons unter dem q-form: -->
                        <div class="row full-width q-pa-xs q-col-gutter-xs">
                          <div class="col-md-3 col-12">
                            <!-- NEU: Fix 22.05.2020 - type="submit" entfernt, da sonst q-form einen Fehler beim @submit Event auslöst, der zum Logout führt! -->
                            <q-btn
                              class="stretch full-width"
                              style="height: 100%"
                              :disable="
                                !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                              "
                              color="positive"
                              glossy
                              @click="updateAusgewaehlteBaueigenschaft()"
                              label="Ausgewählte Baueigenschaft speichern"
                              no-caps
                            />
                          </div>
                          <div class="col-md-3 col-12">
                            <q-btn
                              class="stretch full-width"
                              style="height: 100%"
                              :disable="
                                !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                              "
                              color="deep-orange"
                              glossy
                              text-color="white"
                              @click="resetAusgewaehlteBaueigenschaft()"
                              label="Eingaben auf Originalwerte zurücksetzen"
                              no-caps
                            />
                          </div>
                        </div>
                        <!-- /row, 1. Zeile -->
                        <!--------------------------------------------------------------------------------------------------------------------------------->
                        <!-- Komponente q-separator als sichtbare Trennung  -->
                        <!-- <q-separator /> -->
                      </div>
                    </q-form>
                    <!-- für Bearbeitung von in q-table ausgewählter Baueigenschaft -->
                  </q-tab-panel>
                  <!-- ------------------------------------------------------------------------------------------------------------------------------- -->
                  <!-- NEU: Tab für Bearbeitung BaueigenschaftsBeschreibung (Markdown) der ausgewählten Baueigenchaft        -->
                  <!-- ------------------------------------------------------------------------------------------------------------------------------- -->
                  <!-- ACHTUNG: v-if="ausgewaehlteBaueigenschaft" UNBEDINGT notwendig am q-tab-panel oder div, sonst TypeError: Cannot read property -->
                  <!-- 'baueigenschaftsBeschreibung' of null", und es kommt dann GAR KEIN Tab hoch für Baueigenschaften rechts vom Splitter!!! -->
                  <!-- TODO: XXXXXX Initialisierung des Tab Panels, momentan wird (vermutlich) selber Code ausgeführt wie für Tab Auswahl, siehe -->
                  <!-- setTabBaueigenschaften -->
                  <q-tab-panel
                    class="q-pa-xs"
                    name="beschreibungTabBaueigenschaften"
                    v-if="ausgewaehlteBaueigenschaft"
                  >
                    <q-card class="q-pa-xs">
                      <!-- TODO: width justieren, früher 1200px, jetzt (besser) 1300px -->
                      <!-- ALT: style="min-width: 1200px" -->
                      <!-- NEU: style="min-wdith: 1100px" -->
                      <!-- Mit 1300px kein horizontaler Scrollbalken, auch wenn linker und rechter Drawer offen sind -->
                      <!-- ACHTUNG: Durch "autogrow" am QInput-Feld ändert sich sowohl Höhe als auch Breite dieses Panels abhängig vom Feldinhalt!!! -->
                      <div class="q-pa-xs">
                        <div v-if="localStore.state.debugMode">
                          ausgewaehlteBaueigenschaft:
                          {{ ausgewaehlteBaueigenschaft }}
                          <q-separator />
                        </div>
                        <div
                          v-if="
                            ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft
                              .baueigenschaftsBezeichnung != null
                          "
                        >
                          <p class="text-h6" v-if="$q.screen.gt.sm">
                            Beschreibung für ausgewählte Baueigenschaft
                            <strong
                              >"{{
                                ausgewaehlteBaueigenschaft
                                  .typbezogeneBaueigenschaft
                                  .baueigenschaftsBezeichnung
                              }}"</strong
                            >
                          </p>
                          <p class="text-subtitle1" v-else>
                            Beschreibung für ausgewählte Baueigenschaft
                            <strong
                              >"{{
                                ausgewaehlteBaueigenschaft
                                  .typbezogeneBaueigenschaft
                                  .baueigenschaftsBezeichnung
                              }}"</strong
                            >
                          </p>
                        </div>
                        <!-- Felder für das Editieren des Markdowns mit q-input und q-markdown: -->
                        <div class="row full-width q-pa-xs q-col-gutter-xs">
                          <div class="col-md-6 col-12">
                            <strong>Eingabe (im Markdown-Format)</strong>
                            <!-- ACHTUNG: no-html wegen Security!!! -->
                            <!-- ACHTUNG: Tests ergeben, dass bei q-input standout="..." die Textfarbe immer weiß ist, -->
                            <!-- auch wenn standout="bg-green-1 text-black" angegeben wird!!! -->
                            <!-- Textfarbe weiß ist aber bei Hintergrundfarbe green-1 (sollte gleich wie in fachlicher Hilfe sein) nicht lesbar! -->
                            <!-- Deshalb das q-input Feld auf q-input square umgestellt, color="green-1" beeinflusst den Strich unten -->
                            <!-- wenn das Feld im Fokus ist -->
                            <q-input
                              :disable="
                                !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                  !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                              "
                              v-model="
                                ausgewaehlteBaueigenschaft
                                  .typbezogeneBaueigenschaft
                                  .baueigenschaftsBeschreibung
                              "
                              square
                              dense
                              type="textarea"
                              color="green-1"
                              bg-color="green-1"
                              debounce="300"
                              autofocus
                              autogrow
                              no-html
                            >
                            </q-input>
                          </div>
                          <div class="col-md-6 col-12">
                            <strong
                              >Formatierte Ausgabe (Vorschau fachliche
                              Hilfe):</strong
                            >
                            <q-list dense>
                              <q-item dense class="bg-green-1">
                                <q-markdown
                                  :src="
                                    ausgewaehlteBaueigenschaft
                                      .typbezogeneBaueigenschaft
                                      .baueigenschaftsBeschreibung
                                  "
                                />
                              </q-item>
                            </q-list>
                          </div>
                        </div>
                        <div class="row full-width q-pa-xs q-col-gutter-xs">
                          <div class="col-md-3 col-12">
                            <!-- ALT: url="http://localhost:4444/upload/" -->
                            <!-- NEU: :url="computeUploadURL" // computed Property -->
                            <!-- :factory="uploadFile" mit neuer Factory Function uploadFile, die den JWT Header übermittelt wie in den sonstigen Axios API Calls -->
                            <!-- ALT: style="max-width: 255px" bzw. style="width: 90%" -->
                            <q-uploader
                              :disable="
                                !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                  !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                              "
                              square
                              class="stretch full-width"
                              :factory="uploadFile"
                              ref="uploaderBaueigenschaftsBeschreibung"
                              :url="computeUploadURL"
                              label="Bild hochladen für internen Link"
                              accept=".jpg, .png, .tif, .gif"
                              color="light-green"
                              text-color="white"
                              @uploaded="
                                displayLinkForUploadedFileUploaderBaueigenschaftsBeschreibung
                              "
                              :multiple="false"
                            />
                          </div>
                          '
                          <div
                            class="col-md-3 col-12"
                            v-if="uploadDoneBaueigenschaftsBeschreibung"
                          >
                            <strong
                              >Interner Link für hochgeladenes Bild:</strong
                            >
                            <br />
                            {{
                              internerLinkAusUploadBaueigenschaftsBeschreibung
                            }}
                            <br />
                            <br />
                            <!-- ACHTUNG: Am folgenden q-btn kann type="submit" bleiben, da nicht Teil eines q-forms!!! -->
                            <q-btn
                              dense
                              :disable="
                                !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                  !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                              "
                              color="secondary"
                              style="width: 90%"
                              glossy
                              class="stretch full-width"
                              type="submit"
                              @click="
                                copyToClipboardBaueigenschaftsBeschreibung(
                                  internerLinkAusUploadBaueigenschaftsBeschreibung
                                )
                              "
                              label="Link in die Zwischenablage kopieren"
                              no-caps
                            />
                            <div
                              v-if="
                                copyToClipboardDoneBaueigenschaftsBeschreibung
                              "
                              class="text-caption"
                            >
                              Zum Einfügen des Bildes in die Beschreibung nun
                              diesen Link mit Strg+V in den Markdown oben
                              einfügen. Anschließend Linkbezeichnung und
                              Linkanzeigetext anpassen.
                            </div>
                          </div>
                        </div>
                        <q-separator />
                        <div class="row full-width q-pa-xs q-col-gutter-xs">
                          <div class="col-md-3 col-12">
                            <!-- ACHTUNG: Am folgenden q-btn kann type="submit" bleiben, da nicht Teil eines q-forms!!! -->
                            <!-- ALT: style="width: 90%" -->
                            <q-btn
                              :disable="
                                !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                  !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                              "
                              color="positive"
                              glossy
                              class="stretch full-width"
                              style="height: 100%"
                              type="submit"
                              @click="
                                updateBaueigenschaftsBeschreibungAusgewaehlteBaueigenschaft()
                              "
                              label="Beschreibung für Baueigenschaft speichern"
                              no-caps
                            />
                          </div>
                          <div class="col-md-3 col-12">
                            <q-btn
                              :disable="
                                !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten ||
                                  !benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten
                              "
                              color="deep-orange"
                              glossy
                              class="stretch full-width"
                              style="height: 100%"
                              text-color="white"
                              @click="
                                resetBaueigenschaftsBeschreibungAusgewaehlteBaueigenschaft()
                              "
                              label="Eingaben auf Originalwerte zurücksetzen"
                              no-caps
                            />
                          </div>
                        </div>
                        <!-- TODO: Löschen Baueigenschaftsbeschreibung??? -->
                      </div>
                    </q-card>
                  </q-tab-panel>
                  <!-- ----------------------------------------------------------------------------------------------------- -->
                  <q-tab-panel class="q-pa-xs" name="neuTabBaueigenschaften">
                    <!-- HINWEIS: Für nicht berechtigte Benutzer wird das gesamte Tab für die Neuanlage einer Baueigenschaft disabled -->
                    <!-- Daher ist es hier NICHT notwendig, die einzelnen Felder innerhalb des Tabs ebenfalls zu disablen abhängig von -->
                    <!-- der Benutzerberechtigung (mit :disable="!benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten") -->
                    <div v-if="localStore.state.debugMode">
                      neueBaueigenschaft:
                      {{ neueBaueigenschaft }}
                      <q-separator />
                      <br />
                    </div>
                    <q-form class="q-pa-none">
                      <!-- Für Neuanlage von Baueigenschaft -->
                      <!-- ALT: style="min-width: 1000px" -->
                      <div class="q-pb-sm text-h6" v-if="$q.screen.gt.sm">
                        Neuanlage einer Baueigenschaft im Bauvorhabenbaum
                      </div>
                      <div class="q-pb-sm text-subtitle1" v-else>
                        Neuanlage einer Baueigenschaft im Bauvorhabenbaum
                      </div>
                      <!-- <br /> -->
                      <div
                        class="row full-width items-start q-pa-xs q-col-gutter-xs inset-shadow"
                      >
                        <!-- ACHTUNG: Hier q-col-gutter-xs, nicht q-gutter-xs, sonst wird die letzte Column gewrapped!!! -->
                        <div class="col-md-3 col-12">
                          <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst Layout der Spalte nicht dense!!! -->
                          <div>
                            <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                            <b
                              >Typbezogene Angaben zur Baueigenschaft
                              (systemweit gültig)</b
                            >
                          </div>
                          <br />
                          <div>
                            <b>Festlegung der Bezeichnung der Baueigenschaft</b>
                          </div>
                          <!-- ACHTUNG: Das folgende <div> darf KEIN class="q-col-gutter-xs" haben!!! -->
                          <div>
                            <div>
                              <!-- Erstes q-input hat Testcode zur Nutzung von rules: -->
                              <q-input
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  neueBaueigenschaft.typbezogeneBaueigenschaft
                                    .baueigenschaftsBezeichnung
                                "
                                lazy-rules
                                :rules="[
                                  v =>
                                    (v != null && v !== '') ||
                                    'Bezeichnung ist erforderlich',
                                  v =>
                                    (v && v.length <= 200) ||
                                    'Bezeichnung darf höchstens 200 Zeichen lang sein'
                                ]"
                                label="Bezeichnung"
                                hint="Eindeutige Bezeichnung für die Baueigenschaft"
                                hide-hint
                              />
                            </div>
                            <br />
                            <!-- ACHTUNG: Dieses <br /> sorgt für gleichmäßge vertikale Ausrichtung der Eingabefelder auf dieser Maske!!! -->
                            <q-separator />
                            <div>
                              <b
                                >Weitere typbezogene Angaben zur
                                Baueigenschaft</b
                              >
                            </div>
                            <!-- <br /> -->
                            <div>
                              <!-- ============================================================================================= -->
                              <!-- NEU: #514/515 - q-input-Feld für baueigenschaftsAnzeigeText -->
                              <q-input
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  neueBaueigenschaft.typbezogeneBaueigenschaft
                                    .baueigenschaftsAnzeigeText
                                "
                                label="Anzeigetext"
                                hint="Anzeigetext für die Baueigenschaft, z.B. 'Schallschutzklasse'"
                                hide-hint
                              />
                              <!-- ============================================================================================== -->
                              <q-input
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  neueBaueigenschaft.typbezogeneBaueigenschaft
                                    .baueigenschaftsBemerkung
                                "
                                label="Bemerkung"
                                hint="Bemerkung für die Baueigenschaft, z.B. 'Neu angelegt für Türen'"
                                hide-hint
                                autogrow
                              />
                            </div>
                            <div>
                              <q-badge
                                v-if="localStore.state.debugMode"
                                color="secondary"
                                multi-line
                              >
                                selectModelBauinformationNeueBaueigenschaft:
                                <br />
                                {{
                                  selectModelBauinformationNeueBaueigenschaft
                                }}
                              </q-badge>
                              <q-select
                                dense
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                input-class="text-white"
                                filled
                                v-model="
                                  selectModelBauinformationNeueBaueigenschaft
                                "
                                :options="
                                  selectFilterOptionsBauinformationenNeueBaueigenschaft
                                "
                                option-value="bauinformationsBezeichnung"
                                :multiple="false"
                                label="Zugeordnete Bauinformation auswählen/abwählen"
                                stack-label
                                use-chips
                                options-selected-class="text-primary"
                                options-dense
                                use-input
                                input-debounce="0"
                                @new-value="
                                  createSelectValueBauinformationenNeueBaueigenschaft
                                "
                                @filter="
                                  selectFilterFunctionBauinformationenNeueBaueigenschaft
                                "
                                bottom-slots
                                @focus="
                                  showHintSelectBauinformationenNeueBaueigenschaft = true
                                "
                                @blur="
                                  showHintSelectBauinformationenNeueBaueigenschaft = false
                                "
                              >
                                <!-- TODO: style="width: 720px" -->
                                <!-- Zu den Icons siehe https://quasar.dev/vue-components/select#Decorators - erfordert "bottom-slots" Prop am q-select  -->
                                <template v-slot:append>
                                  <q-icon name="search" @click.stop />
                                  <!-- Statt "clearable" Prop am q-select expliziter Cancel-Icon - erlaubt es, dessen Color zu setzen -->
                                  <!-- Vorlage: https://quasar.dev/vue-components/select#Clearable -->
                                  <!-- ALT: Am folgenden template v-if="selectModelBauinformationNeueBaueigenschaft" -->
                                  <!-- ACHTUNG: Da selectModelBauinformationNeueBaueigenschaft ein Objekt, kein Array ist, -->
                                  <!-- muss es auf null oder {} resetted werden, nicht auf [] -->
                                  <q-icon
                                    name="cancel"
                                    @click.stop="
                                      selectModelBauinformationNeueBaueigenschaft = null
                                    "
                                    class="cursor-pointer"
                                    color="primary"
                                  />
                                </template>
                                <template
                                  v-slot:hint
                                  v-if="
                                    showHintSelectBauinformationenNeueBaueigenschaft
                                  "
                                >
                                  <ul class="q-pl-xs">
                                    <li>
                                      <strong>Filtern:</strong> Eine
                                      Bauinformationsbezeichnung (z.B. "Norm >
                                      DIN > EN > 13164") oder einen
                                      Bauinformationsanzeigetext (z.B.
                                      "Datenblatt") als Filtertext in das
                                      Eingabefeld eingeben. Auch unvollständige
                                      Angaben (z.B. "Datenbl") sind möglich.
                                      Dies filtert die im Dropdown-Menü
                                      angezeigten Optionen.
                                    </li>
                                    <li>
                                      <strong>Auswählen:</strong> Eine der neuen
                                      Baueigenschaft zugeordnete Bauinformation
                                      im Dropdown-Menü auswählen.
                                    </li>
                                    <li>
                                      <strong>Abwählen:</strong> Die ausgewählte
                                      Bauinformation kann mit
                                      <q-icon
                                        name="cancel"
                                        color="primary"
                                      />&nbsp;abgewählt werden.
                                    </li>
                                    <li>
                                      <strong>Speichern:</strong> Unten
                                      Schaltfläche "Speichern" drücken.
                                    </li>
                                  </ul>
                                  <!-- <br /> <br /> <br /> -->
                                  <!-- TODO: Um vertikalen Scrollbalken zu verhindern, funktioniert nicht -->
                                </template>
                                <template v-slot:selected-item="scope">
                                  <q-chip
                                    removable
                                    dense
                                    @remove="scope.removeAtIndex(scope.index)"
                                    :tabindex="scope.tabindex"
                                    color="primary"
                                    text-color="white"
                                    class="q-ma-xs shadow-4"
                                  >
                                    <!-- ALT: -->
                                    <!-- {{ scope.opt.bauinformationsBezeichnung }} -->
                                    <!-- NEU: Long Label Truncation, mit Tooltip der vollen Bezeichnung, mittels spezieller CSS Class "ellipsis": -->
                                    <!-- Damit Truncation für lange Texte an QChip - Vorlage: https://quasar.dev/vue-components/chip#Example--Long-label-truncation -->
                                    <div class="ellipsis">
                                      {{ scope.opt.bauinformationsBezeichnung }}
                                      <q-tooltip
                                        :delay="1000"
                                        :offset="[0, 10]"
                                        max-width="500px"
                                        content-class="bg-secondary text-white text-caption shadow-4"
                                        >{{
                                          scope.opt.bauinformationsBezeichnung
                                        }}</q-tooltip
                                      >
                                    </div>
                                    <!-- <q-avatar color="secondary" text-color="white" :icon="scope.opt.icon" /> -->
                                    <!-- scope.opt.bauinformationsBezeichnung -->
                                  </q-chip>
                                </template>
                                <template v-slot:option="scope">
                                  <q-item
                                    v-bind="scope.itemProps"
                                    v-on="scope.itemEvents"
                                  >
                                    <q-item-section>
                                      <q-item-label
                                        v-html="
                                          scope.opt.bauinformationsBezeichnung
                                        "
                                      />
                                      <!-- NEU: Hier bauinformationsAnzeigeText statt bauinformationsTyp anzeigen: -->
                                      <q-item-label caption>{{
                                        scope.opt.bauinformationsAnzeigeText
                                      }}</q-item-label>
                                    </q-item-section>
                                  </q-item>
                                </template>
                              </q-select>
                              <!-- /q-select für Referenz auf Bauinformation -->
                              <!-- Platz für Hint schaffen: -->
                              <br />
                              <br />
                              <br />
                              <br />
                              <br />
                              <!-- =================================================================== -->
                              <!-- NEU: #514/515: -->
                              <div class="row q-col-gutter-xs inset-shadow">
                                <b>Typbezogene Merkmale der Baueigenschaft</b>
                              </div>
                              <!-- ------------------------------------------------------------------- -->
                              <div class="text-caption">
                                <div class="row full-width q-pa-xs">
                                  <div class="col-md-6 col-12">
                                    <q-toggle
                                      dense
                                      v-model="
                                        neueBaueigenschaft
                                          .typbezogeneBaueigenschaft
                                          .systemdefiniertNichtBenutzerdefiniert
                                      "
                                      label="Ist im System vordefiniert, nicht benutzerdefiniert"
                                    />
                                  </div>
                                  <div class="col-md-6 col-12">
                                    <q-toggle
                                      dense
                                      v-model="
                                        neueBaueigenschaft
                                          .typbezogeneBaueigenschaft
                                          .sollwertNichtIstwert
                                      "
                                      label="Definiert Sollwerte, nicht Istwerte"
                                    />
                                  </div>
                                </div>
                              </div>
                              <!-- =================================================================== -->
                              <!-- ALT - ohne QExpansionItem: -->
                              <!--
                              <div class="row q-col-gutter-xs inset-shadow">
                                <b
                                  >Zuordnung der Baueigenschaft zu
                                  fachlichen Rubriken</b
                                >
                              </div>
                              -->
                              <!-- ------------------------- -->
                              <!-- NEU - mit QExpansionItem: -->
                              <br />
                              <q-expansion-item
                                expand-separator
                                :default-opened="false"
                                dense
                                header-class="bg-white text-bold inset-shadow q-gutter-xs"
                                label="Zuordnung zu fachlichen Kategorien und Rubriken"
                              >
                                <!-- -------------------------------------------------------------------------------------- -->
                                <div class="text-caption">
                                  <!-- NEU - #401: -->
                                  <!--
                                  neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                              .fachlicheKategorien:
                                  {{
                                    neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                              .fachlicheKategorien
                                  }}
                                  -->
                                  <div
                                    class="row full-width q-pa-xs"
                                    v-for="kategorie in optionsFachlicheKategorienBaueigenschaften"
                                    :key="kategorie.ueberschriftKategorie"
                                  >
                                    <div class="col-5">
                                      <b
                                        >{{ kategorie.ueberschriftKategorie }}
                                      </b>
                                    </div>
                                    <div class="col-7">
                                      <q-option-group
                                        type="checkbox"
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .fachlicheKategorien
                                        "
                                        :options="kategorie.optionsKategorie"
                                        bg-color="teal-2"
                                        standout="bg-teal-4 text-black"
                                        square
                                        dense
                                      >
                                      </q-option-group>
                                    </div>
                                    <q-separator class="row full-width" />
                                  </div>
                                </div>
                                <!-- -------------------------------------------------------------------------------------- -->
                                <!-- #401 - alte Schutzkategorien (ersetzt durch neue fachliche Kategorien/Rubriken), disabled: -->
                                <!--
                                <div class="text-caption">
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .projektManagement
                                        "
                                        label="Projektmanagement"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft.recht
                                        "
                                        label="Recht"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft.geografie
                                        "
                                        label="Geografie"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .geoPolitik
                                        "
                                        label="Geopolitik"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .infrastruktur
                                        "
                                        label="Infrastruktur"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .umweltUndKlima
                                        "
                                        label="Umwelt und Klima"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .hydroGeologie
                                        "
                                        label="Hydrogeologie"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft.geometrie
                                        "
                                        label="Geometrie"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .konstruktion
                                        "
                                        label="Konstruktion"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .lastAnnahmen
                                        "
                                        label="Lastannahmen"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .nutzungsUndBetriebsZeiten
                                        "
                                        label="Nutzungs- und Betriebszeiten"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft.raumKlima
                                        "
                                        label="Raumklima"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .beleuchtung
                                        "
                                        label="Beleuchtung"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .schallSchutz
                                        "
                                        label="Schallschutz"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .raumAkustik
                                        "
                                        label="Raumakustik"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .wärmeSchutz
                                        "
                                        label="Wärmeschutz"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .energieEinsparung
                                        "
                                        label="Energieeinsparung"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .standSicherheit
                                        "
                                        label="Standsicherheit"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .gebrauchsTauglichkeit
                                        "
                                        label="Gebrauchstauglichkeit"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .verkehrsSicherheit
                                        "
                                        label="Verkehrssicherheit"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .barriereFreiheit
                                        "
                                        label="Barrierefreiheit"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .brandSchutz
                                        "
                                        label="Brandschutz"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .feuchteSchutz
                                        "
                                        label="Feuchteschutz"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .korrosionsSchutz
                                        "
                                        label="Korrosionsschutz"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .abdichtungsTechnik
                                        "
                                        label="Abdichtungstechnik"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .chemischerHolzSchutz
                                        "
                                        label="Holzschutz"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .gesundheitUndHygiene
                                        "
                                        label="Gesundheit und Hygiene"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .schadstoffSchutz
                                        "
                                        label="Schadstoffschutz"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .umweltVerträglichkeit
                                        "
                                        label="Umweltverträglichkeit"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft.ökoBilanz
                                        "
                                        label="Ökobilanz"
                                      />
                                    </div>
                                  </div>
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .nachhaltigkeit
                                        "
                                        label="Nachhaltigkeit"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .materialEigenschaften
                                        "
                                        label="Materialeigenschaften"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft.sonstiges
                                        "
                                        label="Sonstiges"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                  <div class="row full-width q-pa-xs">
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .baueigenschaftsProfile
                                        "
                                        label="Baueigenschaftsprofile"
                                      />
                                    </div>
                                    <div class="col-6">
                                      <q-toggle
                                        dense
                                        v-model="
                                          neueBaueigenschaft
                                            .typbezogeneBaueigenschaft
                                            .bauinformationsProfile
                                        "
                                        label="Bauinformationsprofile"
                                      />
                                    </div>
                                  </div>
                                  <q-separator />
                                </div>
                                -->
                              </q-expansion-item>
                            </div>
                          </div>
                        </div>
                        <!-- =================================================================== -->
                        <div class="col-md-3 col-12">
                          <div>
                            <!--- /col, 1. Spalte  -->
                            <!-- 2. Spalte: -->
                            <div>
                              <b
                                >Angaben zum Wertetyp der Baueigenschaft
                                (systemweit gültig)</b
                              >
                            </div>
                            <br />
                            <div>
                              <b>Festlegung des Wertetyps</b>
                            </div>
                            <div>
                              <q-select
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                input-class="text-white"
                                dense
                                v-model="
                                  neueBaueigenschaft.typbezogeneBaueigenschaft
                                    .werteTyp
                                "
                                label="Wertetyp"
                                hint="Auszuwählender Typ für die Werte der Eigenschaft, z.B. 'Datumswert'"
                                hide-hint
                                :options="optionsWertetypBaueigenschaft"
                                options-dense
                              />
                            </div>
                            <br />
                            <!-- ACHTUNG: Dieses <br /> sorgt für gleichmäßge vertikale Ausrichtung der Eingabefelder auf dieser Maske!!! -->
                            <q-separator />
                            <div>
                              <b
                                >Angaben zum Wertetyp
                                'Kennwert'/'Kennwertepaar'</b
                              >
                            </div>
                            <!-- <br /> -->
                            <!-- ========================================================================================================================= -->
                            <!-- NEU: Hier MarKdown Enablement für Felder symbol, einheit, operator, formel: -->
                            <!-- ACHTUNG: Im Gegensatz zu ausgewaehlteBaueigenschaft ist neueBaueigenschaft FLACH, daher -->
                            <!--          NICHT neueBaueigenschaft.typbezogeneBaueigenschaft.symbol/eineit/operator/formel sondern neueBaueigenschaft.symbol/eineit/operator/formel -->
                            <div class="q-col-gutter-xs">
                              <q-input
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  neueBaueigenschaft.typbezogeneBaueigenschaft
                                    .symbol
                                "
                                label="Symbol (Markdown-Format)"
                                hint="Symbol, z.B. 'λ'"
                                hide-hint
                                :disable="
                                  disabledFieldsNeueBaueigenschaft.symbol
                                "
                              />
                            </div>
                            <div class="row full-width q-col-gutter-xs">
                              <br />
                              <div class="col-4">
                                <small>Formatiertes Symbol:</small>
                              </div>
                              <div class="col-8">
                                <q-markdown
                                  :src="
                                    neueBaueigenschaft.typbezogeneBaueigenschaft
                                      .symbol
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                ></q-markdown>
                              </div>
                            </div>
                            <br />
                            <div class="q-col-gutter-xs">
                              <q-input
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  neueBaueigenschaft.typbezogeneBaueigenschaft
                                    .einheit
                                "
                                label="Einheit (Markdown-Format)"
                                hint="Einheit, z.B. 'W/(mK)'"
                                hide-hint
                                :disable="
                                  disabledFieldsNeueBaueigenschaft.einheit
                                "
                              />
                            </div>
                            <div class="row full-width q-col-gutter-xs">
                              <!-- <br /> -->
                              <div class="col-4">
                                <small>Formatierte Einheit:</small>
                              </div>
                              <div class="col-8">
                                <q-markdown
                                  :src="
                                    neueBaueigenschaft.typbezogeneBaueigenschaft
                                      .einheit
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                ></q-markdown>
                              </div>
                            </div>
                            <br />
                            <!-- --------------------------------------------------------------------------------------- -->
                            <!-- NEU: #514, Operator in typbezogenen Feldern wird nicht mehr unterstützt, daher disabled -->
                            <!--
                            <div class="q-col-gutter-xs">
                              <q-input
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  neueBaueigenschaft.typbezogeneBaueigenschaft
                                    .operator
                                "
                                label="Operator (Markdown-Format)"
                                hint="Operator, z.B. '<' oder '≤'"
                                hide-hint
                                :disable="
                                  disabledFieldsNeueBaueigenschaft.operator
                                "
                              />
                            </div>
                            <div class="row full-width q-col-gutter-xs">
                              <div class="col-4">
                                <small>Formatierter Operator:</small>
                              </div>
                              <div class="col-8">
                                <q-markdown
                                  :src="
                                    neueBaueigenschaft.typbezogeneBaueigenschaft
                                      .operator
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                ></q-markdown>
                              </div>
                            </div>
                            <br />
                            -->
                            <!-- --------------------------------------------------------------------------------------- -->
                            <div class="q-col-gutter-xs">
                              <q-input
                                autogrow
                                square
                                bg-color="teal-2"
                                standout="bg-teal-4 text-black"
                                dense
                                v-model="
                                  neueBaueigenschaft.typbezogeneBaueigenschaft
                                    .formel
                                "
                                label="Formel (Markdown-Format)"
                                :hint="hintFuerFormelMitSonderzeichen"
                                hide-hint
                                :disable="
                                  disabledFieldsNeueBaueigenschaft.formel
                                "
                              />
                            </div>
                            <div class="row full-width q-col-gutter-xs">
                              <!-- <br /> -->
                              <div class="col-4">
                                <small>Formatierte Formel:</small>
                              </div>
                              <div class="col-8">
                                <q-markdown
                                  :src="
                                    neueBaueigenschaft.typbezogeneBaueigenschaft
                                      .formel
                                  "
                                  :no-blockquote="true"
                                  :no-abbreviation="true"
                                  :no-breaks="true"
                                  :no-container="true"
                                  :no-deflist="true"
                                  :no-footnote="true"
                                  :no-highlight="true"
                                  :no-image="true"
                                  :no-insert="true"
                                  :no-line-numbers="true"
                                  :no-link="true"
                                  :no-linkify="true"
                                  :no-tasklist="true"
                                  :no-typographer="true"
                                ></q-markdown>
                              </div>
                            </div>
                            <br />
                            <!-- NEU: q-select zur Auswahl von Sonderzeichen -->
                            <b
                              >Sonderzeichen im Markdown-Format in obige Felder
                              einfügen:</b
                            >
                            <div class="text-caption">
                              Im folgenden Dropdown-Menü ein Sonderzeichen
                              auswählen. Dabei wird dessen-Formatierung in die
                              Zwischenablage kopiert. Diese mit Strg+V an der
                              gewünschten Cursorposition in obige Felder
                              einfügen.
                            </div>
                            <q-select
                              dense
                              square
                              bg-color="teal-2"
                              standout="bg-teal-4 text-black"
                              input-class="text-white"
                              filled
                              options-dense
                              :multiple="false"
                              v-model="
                                selectModelSonderzeichenNeueBaueigenschaft
                              "
                              :options="selectOptionsSonderzeichen"
                              stack-label
                              label="Sonderzeichen - per Dropdown-Menü (rechts) auswählen"
                              :display-value="
                                `${
                                  selectModelSonderzeichenNeueBaueigenschaft
                                    ? selectModelSonderzeichenNeueBaueigenschaft.label
                                    : 'Kein Sonderzeichen ausgewählt'
                                }`
                              "
                              :display-value-sanitize="false"
                              @input="
                                copyToClipboardSonderzeichenNeueBaueigenschaft(
                                  selectModelSonderzeichenNeueBaueigenschaft.value
                                )
                              "
                              :disable="
                                disabledFieldsNeueBaueigenschaft.sonderzeichen
                              "
                            >
                              <template v-slot:append>
                                <q-icon
                                  v-if="
                                    selectModelSonderzeichenNeueBaueigenschaft !=
                                      null
                                  "
                                  class="cursor-pointer"
                                  name="clear"
                                  @click.stop="
                                    selectModelSonderzeichenNeueBaueigenschaft = null
                                  "
                                ></q-icon>
                              </template>
                            </q-select>
                            <!-- Selbstgemachter Hint unter dem q-select: -->
                            <div
                              v-if="
                                copyToClipboardDoneSonderzeichenNeueBaueigenschaft
                              "
                              class="text-caption"
                            >
                              Die Formatierung für das ausgewählte Sonderzeichen
                              mit Strg+V an der gewünschten Position in obige
                              Markdown-Felder einfügen
                            </div>
                            <!-- Ende neuer Code für symbol, einheit, operator, formel als Markdown -->
                            <!-- ========================================================================================================================= -->
                            <div>
                              <br />
                              <br />
                              <b>Angaben zum Wertetyp 'Aufzählungswert'</b>
                              <br />
                              <div class="text-caption">
                                Reserviert für die Definition der selektierbaren
                                Optionen für den Wertetyp 'Aufzählungswert'
                                (TBD)
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-6">
                          <div
                            class="row q-col-gutter-xs inset-shadow-3 q-pb-md"
                          >
                            <b
                              >Aktivierungszustand der Baueigenschaft an der
                              ausgewählten Baueinheit im Bauvorhabenbaum</b
                            >
                            <div class="col-6">
                              <q-radio
                                color="accent"
                                class="text-accent"
                                dense
                                v-model="
                                  neueBaueigenschaft.aktiviertNichtDeaktiviert
                                "
                                :val="true"
                                label="Aktiviert (an der ausgewählten Baueinheit sowie an allen Elternbaueinheiten bis zur Wurzelbaueinheit)"
                              />
                            </div>
                            <div class="col-6">
                              <q-radio
                                dense
                                color="primary"
                                v-model="
                                  neueBaueigenschaft.aktiviertNichtDeaktiviert
                                "
                                :val="false"
                                label="Deaktiviert (an der ausgewählten Baueinheit sowie an allen direkten und indirekten Kindbaueinheiten)"
                              />
                            </div>
                            <!-- Die folgenden divs sind notwendig, um Abstand zwischen den q-radios für Aktivierungszustand und den Zeilen darunter zu bekommen, -->
                            <!-- insbesondere wenn die Fensterbreite schmal ist - sonst ragt der Label-Text an den q-radios in die Zeilen darunter -->
                            <!--
                              <div class="row">
                              <br />
                            </div>
                            -->
                          </div>
                          <div
                            class="row full-width q-col-gutter-xs inset-shadow"
                          >
                            <div class="col-md-6 col-12">
                              <div>
                                <b
                                  >Wertbezogene Angaben (gemäß Wertetyp) zur
                                  aktivierten Baueigenschaft an der ausgewählten
                                  Baueinheit
                                </b>
                              </div>
                              <br />
                              <b>Kennwert/Kennwertepaar</b>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.kennWert1"
                                  type="number"
                                  label="Kennwert 1"
                                  hint="Numerischer Wert, z.B. '3,14'"
                                  hide-hint
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.kennWert1
                                  "
                                />
                              </div>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.kennWert2"
                                  type="number"
                                  label="Kennwert 2"
                                  hint="Numerischer Wert, z.B. '5000"
                                  hide-hint
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.kennWert2
                                  "
                                />
                              </div>
                              <b>Datumswert/Datumswertepaar</b>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.datumsWert1"
                                  label="Datumswert 1"
                                  stack-label
                                  hint="Datum im Format 'tt.mmm.jjjj', z.B. '01.12.2019'"
                                  hide-hint
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.datumsWert1
                                  "
                                  type="date"
                                />
                              </div>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.datumsWert2"
                                  label="Datumswert 2"
                                  stack-label
                                  hint="Datum im Format 'tt.mm.jjjj', z.B. '31.12.2020'"
                                  hide-hint
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.datumsWert2
                                  "
                                  type="date"
                                />
                              </div>
                              <b>Tageszeitwert/Tageszeitwertepaar</b>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.tagesZeitWert1"
                                  label="Tageszeitwert 1"
                                  stack-label
                                  hint="Uhrzeit im 24-Stunden-Format 'hh:mm' z.B. '08:00'"
                                  hide-hint
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.tagesZeitWert1
                                  "
                                  type="time"
                                />
                              </div>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.tagesZeitWert2"
                                  label="Tageszeitwert 2"
                                  stack-label
                                  hint="Uhrzeit im 24-Stunden-Format'hh:mm', z.B. '18:00'"
                                  hide-hint
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.tagesZeitWert2
                                  "
                                  type="time"
                                />
                              </div>
                              <b>Bezeichnungswert/Bezeichnugswertepaar</b>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.bezeichnungsWert1"
                                  label="Bezeichnungswert 1"
                                  hint="Frei wählbare Bezeichnung, z.B. 'Gültig ab'"
                                  hide-hint
                                  autogrow
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.bezeichnungsWert1
                                  "
                                />
                              </div>
                              <div>
                                <q-input
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  dense
                                  v-model="neueBaueigenschaft.bezeichnungsWert2"
                                  label="Bezeichnungswert 2"
                                  hint="Frei wählbare Bezeichnung, z.B. 'Gültig bis'"
                                  hide-hint
                                  autogrow
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.bezeichnungsWert2
                                  "
                                />
                              </div>
                              <div class="row full-width q-pa-none">
                                <div class="col-3">
                                  <!-- ACHTUNG: Hier kein q-col-gutter-xs am div, sonst falscher Textumbruch, wenn das Main Window eng gezoomed wird!!! -->
                                  <b>Wahrheitswert</b>
                                </div>
                                <div class="col-9 text-caption">
                                  <!-- NEU in Quasar 1.8: Zustand des q-toggles ist neutrales "indeterminate" bei Wert "null", mit Prop toggle-indeterminate -->
                                  <q-toggle
                                    dense
                                    :disable="
                                      disabledFieldsNeueBaueigenschaft.wahrheitsWert
                                    "
                                    v-model="neueBaueigenschaft.wahrheitsWert"
                                    toggle-indeterminate
                                    label="unzutreffend/undefiniert/zutreffend"
                                  />
                                </div>
                              </div>
                              <br />
                              <div>
                                <b>Aufzählungswert</b>
                              </div>
                              <div>
                                <!-- Verworfen: Hier statt Inline Code die Kindkomponente baustoffe-baueigenschaft-aufzaehlungs-werte-auswahl aufrufen??? -->
                                <q-badge
                                  v-if="localStore.state.debugMode"
                                  color="secondary"
                                  multi-line
                                >
                                  selectModelAufzaehlungswertNeueBaueigenschaft:
                                  <br />
                                  {{
                                    selectModelAufzaehlungswertNeueBaueigenschaft
                                  }}
                                  <br />
                                  selectOptionsAufzaehlungswertNeueBaueigenschaft:
                                  <br />
                                  {{
                                    selectOptionsAufzaehlungswertNeueBaueigenschaft
                                  }}
                                  <br />
                                  selectFilterOptionsAufzaehlungswertNeueBaueigenschaft:
                                  <br />
                                  {{
                                    selectFilterOptionsAufzaehlungswertNeueBaueigenschaft
                                  }}
                                </q-badge>
                                <q-select
                                  dense
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  input-class="text-white"
                                  filled
                                  v-model="
                                    selectModelAufzaehlungswertNeueBaueigenschaft
                                  "
                                  :options="
                                    selectFilterOptionsAufzaehlungswertNeueBaueigenschaft
                                  "
                                  @filter="
                                    selectFilterFunctionAufzaehlungswertNeueBaueigenschaft
                                  "
                                  @new-value="
                                    createSelectValueAufzaehlungswertNeueBaueigenschaft
                                  "
                                  :multiple="true"
                                  label="Mögliche Optionen für den Aufzählungswert eingeben"
                                  stack-label
                                  use-chips
                                  options-selected-class="text-primary"
                                  options-dense
                                  use-input
                                  input-debounce="0"
                                  bottom-slots
                                  @focus="
                                    showHintSelectAufzaehlungswertNeueBaueigenschaft = true
                                  "
                                  @blur="
                                    showHintSelectAufzaehlungswertNeueBaueigenschaft = false
                                  "
                                  :disable="
                                    disabledFieldsNeueBaueigenschaft.aufzaehlungsWert
                                  "
                                >
                                  <!-- TODO: style="width: 720px" -->
                                  <!-- Zu den Icons siehe https://quasar.dev/vue-components/select#Decorators - erfordert "bottom-slots" Prop am q-select  -->
                                  <template v-slot:append>
                                    <q-icon name="search" @click.stop />
                                    <q-icon
                                      name="cancel"
                                      @click.stop="
                                        selectModelAufzaehlungswertNeueBaueigenschaft = []
                                      "
                                      class="cursor-pointer"
                                      color="primary"
                                    />
                                    <!-- ACHTUNG: TODO - Muss oben leerer Array sein???  -->
                                  </template>
                                  <!-- Den folgenden VSlot für den Hint disabled, da er viel vertikalen Platz brauchte -->
                                  <!--
                                  <template
                                    v-slot:hint
                                    v-if="
                                      showHintSelectAufzaehlungswertNeueBaueigenschaft
                                    "
                                  >
                                    <ul class="q-pl-xs">
                                      <li>
                                        <strong>Hinzufügen</strong> von
                                        möglichen Optionen für den
                                        Aufzählungswert: Die gewünschte
                                        Bezeichnung für eine Option in das
                                        Eingabefeld eingeben und durch Drücken
                                        der Eingabetaste zur Liste der Optionen
                                        hinzufügen. Beispiele: "xs", "s", "m",
                                        "l", "xl", "xxl" (jeweils mittels
                                        Eingabetaste zur Liste der Optionen
                                        hinzufügen)
                                      </li>
                                      <li>
                                        <strong>Filtern:</strong> Einen
                                        Filtertext in das Eingabefeld eingeben.
                                        Auch unvollständige Angaben sind
                                        möglich. Dies filtert die im
                                        Dropdown-Menü angezeigten Optionen.
                                      </li>
                                      <li>
                                        <strong>Abwählen:</strong> Zur Liste der
                                        Optionen hinzugefügte Optionen können
                                        mit
                                        <q-icon
                                          name="cancel"
                                          color="primary"
                                        />&nbsp;abgewählt werden.
                                      </li>
                                      <li>
                                        <strong>Auswählen:</strong>
                                        Bereits abgewählte Optionen verbleiben
                                        im Dropdown-Menü und können dort erneut
                                        ausgewählt werden
                                      </li>
                                      <li>
                                        Zum
                                        <strong>Speichern:</strong> Unten
                                        Schaltfläche "Speichern" drücken.
                                      </li>
                                    </ul>
                                  </template>
                                  -->
                                  <!-- Es folgt der v-slot zur Anzeige des q-chips für eine ausgewählte Option: -->
                                  <template v-slot:selected-item="scope">
                                    <!-- <div v-if="localStore.state.debugMode"> -->
                                    <!--   scope: {{scope}} -->
                                    <!-- </div> -->
                                    <!-- scope ist hier ein Objekt, das einen selektierten Optionswert repräsentiert, welcher per q-chip angezeigt wird -->
                                    <!-- Dieses besteht aus den Feldern scope.index, .opt, .sanitize, .selected und .tabindex -->
                                    <q-chip
                                      removable
                                      dense
                                      @remove="scope.removeAtIndex(scope.index)"
                                      :tabindex="scope.tabindex"
                                      color="primary"
                                      text-color="white"
                                      class="q-ma-xs shadow-4"
                                    >
                                      <!-- ALT: -->
                                      <!-- {{ scope.opt.valueAufzaehlungswert }} -->
                                      <!-- ALT - TODO bei option-value="valueAufzaehlungswert" -->
                                      <!-- <q-avatar color="secondary" text-color="white" :icon="scope.opt.icon" /> -->
                                      <!-- ALT -->
                                      <!-- ALT: -->
                                      <!-- {{ scope.opt }} -->
                                      <!-- ACHTUNG: Bzgl. Sanitization wird hier für die Anzeige im q-chip kein v-html verwendet, sondern wie unten bei den Options nur Moustaches -->
                                      <!-- NEU: Long Label Truncation, mit Tooltip der vollen Bezeichnung, mittels spezieller CSS Class "ellipsis": -->
                                      <!-- Damit Truncation für lange Texte an QChip - Vorlage: https://quasar.dev/vue-components/chip#Example--Long-label-truncation -->
                                      <div class="ellipsis">
                                        {{ scope.opt }}
                                        <q-tooltip
                                          :delay="1000"
                                          :offset="[0, 10]"
                                          max-width="500px"
                                          content-class="bg-secondary text-white text-caption shadow-4"
                                          >{{ scope.opt }}</q-tooltip
                                        >
                                      </div>
                                    </q-chip>
                                  </template>
                                  <!-- Es folgt der v-slot zur Anzeige der Options im Dropdown-Menü -->
                                  <template v-slot:option="scope">
                                    <q-item
                                      v-bind="scope.itemProps"
                                      v-on="scope.itemEvents"
                                    >
                                      <q-item-section>
                                        <q-item-label>{{
                                          scope.opt
                                        }}</q-item-label>
                                      </q-item-section>
                                    </q-item>
                                  </template>
                                </q-select>
                                <!-- /q-select für Aufzählungswert -->
                                <!-- Platz für Hint schaffen: -->
                                <!-- ACHTUNG: Sonst erscheint vertikaler Scrollbalken, wenn das QSelect Fokus hat! -->
                                <!-- Disabled, wie den Hint selbst -->
                                <!--
                                <br />
                                <br />
                                <br />
                                <br />
                                <br />
                                <br />
                                -->
                              </div>
                            </div>
                            <!-- /col, 3. Spalte -->
                            <!-- 4. Spalte:       -->
                            <!-- ACHTUNG: 3. Spalte darf nur col-4 sein, wenn oben q-col-gutter-xs, nicht q-gutter-xs, sonst Column Wrapping! Workaround: col-3 -->
                            <div class="col-md-6 col-12">
                              <div>
                                <b
                                  >Wertbezogene Merkmale der aktivierten
                                  Baueigenschaft an der ausgewählten Baueinheit
                                  im Bauvorhabenbaum</b
                                >
                              </div>
                              <br />
                              <div>
                                <b>Systemverwaltete wertbezogene Merkmale</b>
                              </div>
                              <div>
                                <!-- HINWEIS: definiertNichtUndefiniert ist systemverwaltet (:disable=true), nciht benutzerverwaltet-->
                                <q-toggle
                                  :value="istDefiniertNeueBaueigenschaft"
                                  label="Werte sind in definiertem Zustand"
                                  :disable="true"
                                />
                              </div>
                              <div>
                                <q-toggle
                                  v-model="
                                    neueBaueigenschaft.ererbtNichtGesetzt
                                  "
                                  label="Werte sind vom Eltenknoten ererbt"
                                  :disable="true"
                                />
                              </div>
                              <!-- NEU - #514: Merkmal verschoben von wertbezogenen nach typbezogenen Feldern, daher hier disabled -->
                              <!--
                              <div>
                                <q-toggle
                                  v-model="
                                    neueBaueigenschaft.systemdefiniertNichtBenutzerdefiniert
                                  "
                                  label="Werte sind vom System vorgegeben (d.h. nicht vom Benutzer eingegeben)"
                                  :disable="true"
                                />
                              </div>
                              -->
                              <div>
                                <q-toggle
                                  v-model="
                                    neueBaueigenschaft.systemberechnetNichtSystemgesetzt
                                  "
                                  label="Werte sind vom System berechnet (d.h. nicht vom Benutzer eingegeben)"
                                  :disable="true"
                                />
                              </div>
                              <br />
                              <div>
                                <b>Benutzerverwaltete wertbezogene Merkmale</b>
                              </div>
                              <div>
                                <q-toggle
                                  v-model="
                                    neueBaueigenschaft.vererbtAnKindknoten
                                  "
                                  label="Werte werden vererbt an direkte und indirekte Kindknoten (stets der Fall im Bauvorhabenbaum)"
                                />
                              </div>
                              <!-- NEU - #514: Merkmal verschoben von wertbezogenen nach typbezogenen Feldern, daher hier disabled -->
                              <!--
                              <div>
                                <q-toggle
                                  v-model="
                                    neueBaueigenschaft.sollwertNichtIstwert
                                  "
                                  label="Werte sind Sollwerte, nicht Istwerte"
                                />
                              </div>
                              -->
                              <div>
                                <!-- TODO: q-select für Gütebewertung -->
                                <q-select
                                  square
                                  bg-color="teal-2"
                                  standout="bg-teal-4 text-black"
                                  input-class="text-white"
                                  dense
                                  v-model="neueBaueigenschaft.güteBewertung"
                                  label="Gütebewertung für die Werte der Baueigenschaft"
                                  hint="Auswählbare Einschätzung der Güte des Werts der Baueigenschaft, in drei farblich bezeichneten Gütestufen, z.B. 'gelb'"
                                  hide-hint
                                  :options="optionsGueteBewertung"
                                  options-dense
                                />
                              </div>
                              <div class="q-pl-sm text-caption">
                                <b>Hinweise:</b> Im Auswahlfeld
                                <b>"Aufzählungswert"</b> in der dritten Spalte
                                unten können die möglichen Optionen, die eine
                                Baueigenschaft des Wertetyps "Aufzählungswert"
                                annehmen kann, festgelegt werden:
                                <ul class="q-pl-sm">
                                  <li>
                                    <b>Hinzufügen</b>
                                    von möglichen Optionen: Die gewünschte
                                    Bezeichnung für eine Option in das
                                    Eingabefeld eingeben und durch Drücken der
                                    Eingabetaste zur Liste der Optionen
                                    hinzufügen.
                                    <!-- Beispiele: "xs", "s", "m", "l",
                                    "xl", "xxl" (jeweils ohne Anführungszeichen
                                    in das Eingabefeld eingeben und mittels
                                    Eingabetaste zur Liste der Optionen
                                    hinzufügen)
                                    -->
                                  </li>
                                  <li>
                                    <b>Filtern:</b>
                                    Einen Filtertext in das Eingabefeld
                                    eingeben. Auch unvollständige Angaben sind
                                    möglich. Dies filtert die im Dropdown-Menü
                                    angezeigten Optionen.
                                  </li>
                                  <li>
                                    <b>Abwählen:</b> Zur Liste hinzugefügte
                                    Optionen können mit
                                    <q-icon
                                      name="cancel"
                                      color="primary"
                                    />&nbsp;abgewählt werden.
                                  </li>
                                  <li>
                                    <b>Auswählen:</b>
                                    Abgewählte Optionen verbleiben im
                                    Dropdown-Menü und können dort erneut
                                    ausgewählt werden.
                                  </li>
                                  <li>
                                    Zum
                                    <b>Speichern:</b>
                                    Schaltfläche "Neue Baueigenschaft speichern"
                                    drücken.
                                  </li>
                                </ul>
                              </div>
                            </div>
                          </div>
                        </div>
                        <!-- /col, 4. Spalte-->
                      </div>
                      <q-separator />
                      <!-- Es folgend die Buttons unter dem q-form: -->
                      <div class="row full-width q-pa-xs q-col-gutter-xs">
                        <div class="col-md-3 col-12">
                          <!-- NEU: Fix 22.05.2020 - type="submit" entfernt, da sonst q-form einen Fehler beim @submit Event auslöst, der zum Logout führt! -->
                          <!-- ALT: style="width: 90%" -->
                          <q-btn
                            class="stretch full-width"
                            style="height: 100%"
                            color="positive"
                            glossy
                            label="Neue Baueigenschaft speichern"
                            no-caps
                            @click="createNeueBaueigenschaft()"
                          />
                        </div>
                        <div class="col-md-3 col-12">
                          <!-- ALT: style="width: 90%" -->
                          <q-btn
                            class="stretch full-width"
                            style="height: 100%"
                            color="deep-orange"
                            glossy
                            text-color="white"
                            label="Eingaben auf Originalwerte zurücksetzen"
                            no-caps
                            @click="resetNeueBaueigenschaft()"
                          />
                        </div>
                        <!--
                              <q-btn
                                color="negative"
                                glossy
                                label="Löschen"
                                no-caps
                              />
                              -->
                      </div>
                    </q-form>
                  </q-tab-panel>
                </q-tab-panels>
                <!-- /Panels unter "Baueigenschaften" -->
              </q-tab-panel>
              <!-- ------------------------------------------------------------------------------------------------------------------- -->
              <!-- Es folgen die weiteren Panels in der oberen Panel-Leiste -->
              <!-- ================================================================================================== -->
              <!-- ACHTUNG: Hier class="q-pa-xs" oder "q-pa-none" zur Kontrolle des  Abstands zwischen den Tableisten -->
              <!-- ================================================================================================== -->
              <q-tab-panel
                class="q-pa-xs"
                name="baueigenschaftsProfilFormulareTabBaueinheiten"
              >
                <q-card>
                  <!-- ALT: -->
                  <!--
                      class="text-grey-10 bg-grey-2"
                      active-color="primary"
                      indicator-color="primary"
                    -->
                  <!-- =================================================================================================== -->
                  <!-- ACHTUNG: class="q-pa-xs" oder "q-pa-none" kontrolliert Breite der Tableiste!                        -->
                  <!-- =================================================================================================== -->
                  <q-tabs
                    mobile-arrows
                    class="q-pa-none text-black bg-grey-4 full-width"
                    active-color="primary"
                    active-bg-color="white"
                    content-class="text-h7"
                    dense
                    v-model="tabBaueigenschaftsProfilFormulare"
                    align="left"
                  >
                    <!-- HINWEIS: Folgendes Tab umbenannt von "angabenBauvorhabenTabBaueinheiten" nach "previewBauvorhabenProfilFormularTabBaueinheiten": -->
                    <!-- DISABLED: -->
                    <!--
                    <q-tab
                      name="previewBauvorhabenProfilFormularTabBaueinheiten"
                      label="Bauvorhaben (Preview)"
                      no-caps
                      :disable="
                        !alleBaueigenschaftenSindAktiviertBauvorhabenAusgewaehlteBaueinheit ||
                          wurzelKnotenBauvorhabenBaum
                      "
                    />
                    -->
                    <!-- NEU: Selektives Enabling/Disabling in Abhängigkeit von Profilaktivierung: -->
                    <!-- :disable="!istAktiviertBaueigenschaftsProfilAnSelectedNode('Baueinheit > Bauvorhaben')" -->
                    <q-tab
                      :disable="
                        !selectedNodeTreeBaueinheitenIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                          'Baueinheit > Bauvorhaben'
                        )
                      "
                      name="bauvorhabenProfilFormularTabBaueinheiten"
                      label="Bauvorhaben"
                      no-caps
                    />
                    <q-tab
                      :disable="
                        !istAktiviertBaueigenschaftsProfilAnSelectedNode(
                          'Baueinheit > Standort'
                        )
                      "
                      name="standortProfilFormularTabBaueinheiten"
                      label="Standort"
                      no-caps
                    />
                    <q-tab
                      :disable="
                        !selectedNodeTreeBaueinheitenIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                          'Baueinheit > Gebäude'
                        )
                      "
                      name="gebaeudeProfilFormularTabBaueinheiten"
                      label="Gebäude"
                      no-caps
                    />
                    <!-- ACHTUNG: "Geschoss" war früher disabled, da noch kein Profilformular dafür! -->
                    <!-- Zukünftig: :disable = "!selectedNodeTreeBaueinheitenIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst('Baueinheit > Geschoss')" -->
                    <q-tab
                      :disable="
                        !selectedNodeTreeBaueinheitenIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                          'Baueinheit > Geschoss'
                        )
                      "
                      name="geschossProfilFormularTabBaueinheiten"
                      label="Geschoss"
                      no-caps
                    />
                    <!-- ALT: "Baueinheit > Raum" war disabled, da noch kein Profilformular dafür! -->
                    <!-- TODO XXXXXX - #502: Tab "Raum" testweise enabled auch für 2 weitere Raumprofilvarianten -->
                    <q-tab
                      :disable="
                        !selectedNodeTreeBaueinheitenIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                          'Baueinheit > Raum'
                        ) &&
                          !selectedNodeTreeBaueinheitenIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                            'Baueinheit > Raum > Wohnen > Flur in der Wohnung'
                          ) &&
                          !selectedNodeTreeBaueinheitenIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                            'Baueinheit > Raum > Wohnen > Abstellraum in der Wohnung'
                          )
                      "
                      name="raumProfilFormularTabBaueinheiten"
                      label="Raum"
                      no-caps
                    />
                    <q-tab
                      :disable="
                        !selectedNodeTreeBaueinheitenIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                          'Baueinheit > Boden'
                        )
                      "
                      name="bodenProfilFormularTabBaueinheiten"
                      label="Boden (Preview)"
                      no-caps
                    />
                    <!-- DISABLED: -->
                    <!--
                    <q-tab
                      name="vorlauefigesBodenaufbauProfilFormularTabBaueinheiten"
                      v-if="showPreviewBodenaufbau"
                      label="Bodenaufbau (Preview)"
                      no-caps
                    />
                    -->
                    <!--
                    <q-tab
                      :disable="
                        !istAktiviertBaueigenschaftsProfilAnSelectedNode(
                          'Bodenaufbau (ALT)'
                        )
                      "
                      name="bodenaufbauProfilFormularTabBaueinheiten"
                      label="Bodenaufbau (ALT)"
                      no-caps
                    />
                    -->
                    <q-tab
                      :disable="
                        !istAktiviertBaueigenschaftsProfilAnSelectedNode(
                          'Baueinheit > Bodenaufbau'
                        )
                      "
                      name="bodenaufbauProfilFormularTabBaueinheiten"
                      label="Bodenaufbau"
                      no-caps
                    />
                    <!-- ACHTUNG: "Wandaufbau" ist bisher disabled, da noch kein Profilformular dafür! -->
                    <q-tab
                      disable
                      name="wandaufbauProfilFormularTabBaueinheiten"
                      label="Wandaufbau"
                      no-caps
                    />
                    <q-tab
                      :disable="
                        !istAktiviertBaueigenschaftsProfilAnSelectedNode(
                          'Baueinheit > Schicht'
                        )
                      "
                      name="schichtProfilFormularTabBaueinheiten"
                      label="Schicht"
                      no-caps
                    />
                    <!-- HINWEIS: Dieses Tab nach hinten verschoben - wird eher von Administratoren verwendet werden -->
                    <!-- TODO XXXXXX: Das Tab eventuell mit v-if verstecken, falls kein Administrator -->
                    <q-tab
                      name="generischesProfilFormularTabBaueinheiten"
                      label="Profile"
                      no-caps
                    />
                    <!-- NEU: Tab für Auswertungen (Reporting), u.a. mit Excel-Download -->
                    <q-tab
                      name="auswertungenTabBaueinheiten"
                      label="Auswertungen"
                      no-caps
                    />
                  </q-tabs>
                  <!-- ----------------------------------------------------------------------------------------------------------------------- -->
                  <!-- NEU: "keep-alive" für ALLE Baueigenschaftsprofilformulare!!! -->
                  <!-- TODO #283 Speicherbedarf beobachten! -->
                  <q-tab-panels
                    keep-alive
                    v-model="tabBaueigenschaftsProfilFormulare"
                    animated
                  >
                    <!-- ALT: Für Stefans Komponente für Bodenaufbau: -->
                    <!--
                    <q-tab-panel
                      class="q-pa-xs"
                      name="bodenaufbauProfilFormularTabBaueinheiten"
                    >
                      <baueinheitBodenaufbauBaueigenschaftsProfilFormular
                        :treeNodes="nodesTreeBaueinheiten"
                        :currentlySelectedNode="selectedNodeTreeBaueinheiten"
                        @changeTabRequest="
                          selectedKeyTreeBaueinheiten = $event._id;
                          tabBaueigenschaftsProfilFormulare =
                            'schichtProfilFormularTabBaueinheiten';
                        "
                        @deleteSchichtRequest="
                          selectedKeyTreeBaueinheiten = $event._id;
                          deleteSelectedBaueinheitDialog = true;
                        "
                        @createSchichtRequest="createNewBaueinheitDialog = true"
                        @refresh-request-baueigenschafts-profil="
                          refreshTreeBaueinheiten()
                        "
                        :benutzerDarfBearbeitenSelectedNode="
                          benutzerDarfBearbeitenSelectedNodeTreeBaueinheiten
                        "
                        @loadChildrenRequest="
                          $refs.treeBaueinheiten.setExpanded(
                            selectedNodeTreeBaueinheiten._id,
                            true
                          )
                        "
                      />
                    </q-tab-panel>
                    -->
                    <!-- ================================================================================================== -->
                    <!-- ACHTUNG: Hier class="q-pa-xs" oder "q-pa-none" zur Kontrolle des  Abstands zwischen den Tableisten -->
                    <!-- ================================================================================================== -->
                    <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
                    <q-tab-panel
                      name="generischesProfilFormularTabBaueinheiten"
                      class="q-pa-xs"
                    >
                      <generischesBaueigenschaftsProfilFormular
                        profilBezeichnung="Allgemein > Test > Wertetypen"
                        baum="Bauvorhabenbaum"
                        :nodes="nodesTreeBaueinheiten"
                        :selectedNode="selectedNodeTreeBaueinheiten"
                        :benutzerDarfBearbeitenSelectedNode="
                          benutzerDarfBearbeitenSelectedNodeTreeBaueinheiten
                        "
                        @refresh-request-baueigenschafts-profil="
                          reloadTreeWrapper()
                        "
                      />
                    </q-tab-panel>
                    <!-- ================================================================================================== -->
                    <!-- ACHTUNG: Hier class="q-pa-xs" oder "q-pa-none" zur Kontrolle des  Abstands zwischen den Tableisten -->
                    <!-- ================================================================================================== -->
                    <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
                    <!-- NEU: Tab für Auswertungen, u.a. mit Excel-Download -->
                    <q-tab-panel
                      name="auswertungenTabBaueinheiten"
                      class="q-pa-xs"
                    >
                      <div class="row full-width">
                        <div class="col-12 text-h6" v-if="$q.screen.gt.sm">
                          Auswertungen an der Baueinheit
                          <strong
                            >"{{
                              selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                            }}"</strong
                          >
                        </div>
                        <div class="col-12 text-subtitle1" v-else>
                          Auswertungen an der Baueinheit
                          <strong
                            >"{{
                              selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                            }}"</strong
                          >
                        </div>
                      </div>
                      <br />
                      <!-- ---------------------------------------------------------------------------------------------------- -->
                      <div class="row full-width q-col-gutter-xs">
                        <div class="col-md-4 col-12">
                          <b
                            >Excel-Arbeitsmappe mit fachlicher Planung
                            (Preview)</b
                          >
                          <br />
                          <b>Hinweis:</b>
                          Die hier generierte Excel-Arbeitsmappe enthält aktuell
                          nur exemplarisch die Planung für "Raum" > "Feuchte".
                          Weitere Inhalte sind in späteren Ausbaustufen geplant.
                        </div>
                        <div class="col-md-4 col-12">
                          <!-- NEU: Buttons für Excel-Arbeitsmappen-Erzeugung und -Download -->
                          <!--      Diese sind für #507, vorläufig hier eingefügt           -->
                          <q-btn
                            dense
                            :disable="
                              selectedNodeTreeBaueinheiten === undefined ||
                                selectedNodeTreeBaueinheiten === null ||
                                selectedNodeTreeBaueinheiten.baumKnotenTyp ===
                                  'Wurzelknoten' ||
                                selectedNodeTreeBaueinheiten.baumKnotenTyp ===
                                  'Bauvorlagenunterbaumwurzelknoten' ||
                                selectedNodeTreeBaueinheiten.baueinheitsBezeichnung.startsWith(
                                  'Bauprojekte'
                                )
                            "
                            class="stretch full-width"
                            color="blue-grey-7"
                            text-color="white"
                            glossy
                            @click="createExcelSheetFachlichePlanung()"
                            label="Excel-Arbeitsmappe mit fachlicher Planung erzeugen"
                            no-caps
                          />
                        </div>
                        <div class="col-md-4 col-12">
                          <q-btn
                            dense
                            :disable="false"
                            :href="
                              getPfadDownloadBaueigenschaftsProfilFormulareAnBaueinheit
                            "
                            type="a"
                            target="_blank"
                            color="deep-purple-7"
                            class="stretch full-width"
                            text-color="white"
                            glossy
                            label="Excel-Arbeitsmappe mit fachlicher Planung herunterladen"
                            no-caps
                          />
                        </div>
                      </div>
                      <br />
                      <!-- ---------------------------------------------------------------------------------------------------- -->
                      <div class="row full-width q-col-gutter-xs">
                        <div class="col-md-4 col-12">
                          <b>Excel-Arbeitsmappe mit Bauteilkatalog (Preview)</b>
                          <br />
                          <b>Hinweis:</b>
                          Die hier generierte Excel-Arbeitsmappe enthält aktuell
                          nur exemplarisch den strukturellen Aufbau der
                          ausgewählten Baueinheit, sowie Auszüge aus der
                          fachlichen Planung für Räume, Bodenaufbauten und
                          Schichten. Weitere Inhalte sind in späteren
                          Ausbaustufen geplant.
                        </div>
                        <div class="col-md-4 col-12">
                          <!-- NEU: Buttons für Excel-Arbeitsmappen-Erzeugung und -Download -->
                          <!--      Diese sind für #507, vorläufig hier eingefügt           -->
                          <q-btn
                            dense
                            :disable="
                              selectedNodeTreeBaueinheiten === undefined ||
                                selectedNodeTreeBaueinheiten === null
                            "
                            class="stretch full-width"
                            color="blue-grey-7"
                            text-color="white"
                            glossy
                            @click="submitExportBauteilkatalogAnBaueinheit"
                            label="Excel-Arbeitsmappe mit Bauteilkatalog erzeugen"
                            no-caps
                          />
                        </div>
                        <div class="col-md-4 col-12">
                          <q-btn
                            dense
                            :disable="false"
                            :href="getPfadExportBauteilkatalogAnBaueinheit"
                            type="a"
                            target="_blank"
                            color="deep-purple-7"
                            class="stretch full-width"
                            text-color="white"
                            glossy
                            label="Excel-Arbeitsmappe mit Bauteilkatalog herunterladen"
                            no-caps
                          />
                        </div>
                      </div>
                      <br />
                      <q-separator />
                      <div class="row full-width">
                        Zur Erzeugung einer Arbeitsmappe zuerst die linke
                        Schaltfläche drücken.
                        <br />Nach erfolgreicher Erzeugung der Arbeitsmappe zum
                        Herunterladen dann die rechte Schaltfläche drücken.
                        <br />Die heruntergeladene Arbeitsmappe kann mit
                        Microsoft Excel geöffnet werden.
                      </div>
                    </q-tab-panel>
                    <!-- ------------------------------------------------------------------------------------------------------------------------------------------ -->
                    <!-- Preview-Profilformular für "Bauvorhaben (Preview)", mittlerweile abgelöst durch baueinheit-bauvorhaben-baueigenschafts-profil-formular.vue.vue, disabled: -->
                    <!-- ALT: -->
                    <!--
                      :disable="
                        !alleBaueigenschaftenSindAktiviertBauvorhabenAusgewaehlteBaueinheit ||
                          wurzelKnotenBauvorhabenBaum
                      "
                    -->
                    <q-tab-panel
                      v-if="false"
                      name="previewBauvorhabenProfilFormularTabBaueinheiten"
                      class="q-pa-xs"
                      :disable="true"
                    >
                      <!-- q-dialog für Hinweis, dass eine Geolokation einzugeben ist -->
                      <!-- // ACHTUNG: q-dialog muss stets lokal zu dem q-tab-panel definiert sein, in dem er per v-model aktiviert wird, sonst passiert nichts!!! -->
                      <q-dialog
                        v-model="
                          confirmHinweisEingebenGeolokationBauvorhabenAusgewaehlteBaueinheit
                        "
                        persistent
                      >
                        <q-card>
                          <q-card-section class="row items-center">
                            <q-avatar
                              icon="notification_important"
                              color="warning"
                              text-color="white"
                            />
                            <span class="q-ml-sm">
                              Bitte eine Geolokation (geografische Länge und
                              Breite) eingeben
                            </span>
                          </q-card-section>
                          <q-card-actions align="right">
                            <q-btn
                              glossy
                              label="Weiter"
                              color="secondary"
                              no-caps
                              v-close-popup
                            />
                            <!-- ACHTUNG: Bei @click="method()" unbedingt "()"" hinter "method" angeben, sonst passiert gar nichts!!! -->
                            <!-- ANDERERSEITS: @click="handleClick" und @click="handleClick()" sind äquivalent laut https://flaviocopes.com/vue-events/ -->
                            <!-- ACHTUNG: Offenbar muss das v-model this.confirmHinweisEingebenGeolokationBauvorhabenAusgewaehlteBaueinheit nicht auf false zurückgesetzt werden!!! -->
                          </q-card-actions>
                        </q-card>
                      </q-dialog>
                      <!--
                          bauvorhabenAusgewaehlteBaueinheit:
                          {{ bauvorhabenAusgewaehlteBaueinheit }}
                          -->
                      <!-- <q-form v-if="bauvorhabenAusgewaehlteBaueinheit"> -->
                      <q-form>
                        <div class style="max-width: 1300px">
                          <!-- ACHTUNG: Dieses div mit style="min-width:" ist unbedingt notwendig hinter dem q-form, um dessen Größe zu definieren!!! -->
                          <!-- Sonst macht es sich automatisch klein!!! -->
                          <div class="text-h6" v-if="$q.screen.gt.sm">
                            Angaben zum ausgewählten Bauvorhaben
                            {{
                              selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                            }}
                          </div>
                          <div class="text-subtitle1" v-else>
                            Angaben zum ausgewählten Bauvorhaben
                            {{
                              selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                            }}
                          </div>
                          <br />
                          <!--
                              <br />
                              <div>Selektierte Eigenschaft: {{ ausgewählteBauphysikalischeEigenschaft }}</div>
                              -->
                          <!--
                              <div>_id selektierte Eigenschaft: {{ ausgewählteBauphysikalischeEigenschaft._id }}</div>
                              -->
                          <!--
                              <br />
                              -->
                          <div
                            class="row full-width items-start q-col-gutter-xs"
                          >
                            <!-- ACHTUNG: Hier q-col-gutter-xs, nicht q-gutter-xs, sonst wird die letzte Column gewrapped!!! -->
                            <div
                              class="row full-width items-start q-col-gutter-xs"
                            >
                              <div class="col-4">
                                <div>
                                  <b>Projektbezogene Angaben</b>
                                </div>
                                <div>
                                  <!-- Erstes q-input hat Testcode zur Nutzung von rules: -->
                                  <q-input
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      bauvorhabenAusgewaehlteBaueinheit[0]
                                        .werteFeldInhalt
                                    "
                                    lazy-rules
                                    :rules="[
                                      v =>
                                        !!v || 'Bezeichnung ist erforderlich',
                                      v =>
                                        (v && v.length <= 200) ||
                                        'Bezeichnung darf höchstens 200 Zeichen lang sein'
                                    ]"
                                    label="Bezeichnung"
                                    hint="Frei wählbare Bezeichnung"
                                    hide-hint
                                  />
                                </div>
                                <div>
                                  <!-- ALT (Test): v-model="selectModelBauwerksZuordnungen" -->
                                  <!-- NEU: v-model="bauvorhabenAusgewaehlteBaueinheithaben[1].werteFeldInhalt" -->
                                  <!-- (generisches Wertefeld, in diesem speziellen Fall für Werte des Aufzählungswerts) -->
                                  <!-- ACHTUNG/TODO: XXXXXX - damit dürfte wahrscheinlich nur Einfachauswahl möglich sein!!! -->
                                  <q-select
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      bauvorhabenAusgewaehlteBaueinheit[1]
                                        .werteFeldInhalt
                                    "
                                    label="Bauwerkszuordnung"
                                    hint="Bauwerkszuordnung nach Bauwerkszuordnungskatalog, z.B. '1000 - Parlament, Gericht, Verwaltung'"
                                    hide-hint
                                    :multiple="false"
                                    :options="
                                      selectFilterOptionsBauwerksZuordnungen
                                    "
                                    options-dense
                                    options-selected-class="text-primary"
                                    use-input
                                    @new-value="
                                      createValueSelectOptionsBauwerksZuordnungen
                                    "
                                    @filter="
                                      selectFilterFunctionBauwerksZuordnungen
                                    "
                                  />
                                  <!-- :disable="disabledFields.bauvorhabenTyp" -->
                                </div>
                                <div>
                                  <q-select
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      bauvorhabenAusgewaehlteBaueinheit[2]
                                        .werteFeldInhalt
                                    "
                                    label="Art"
                                    hint="Art des Bauvorhabens, z.B. 'Neubau', 'Umbau', etc."
                                    hide-hint
                                    :options="selectOptionsArtBauvorhaben"
                                    options-dense
                                  />
                                  <!-- :disable="disabledFields.bauvorhabenTyp" -->
                                </div>
                                <div v-if="localStore.state.debugMode">
                                  TODOs:
                                  <ul>
                                    <li>
                                      Projektnummer (String)
                                    </li>
                                    <li>
                                      Beauftragter Leistungsumfang (=
                                      bauphysikalische Kategorien)
                                    </li>
                                    <li>
                                      TBD: VOB (Abrechnungsinformationen)
                                    </li>
                                    <li>Datumsfelder</li>
                                    <ul>
                                      <li>Projektbeginn (Plandatum)</li>
                                      <li>Projektbeginn (Istdatum)</li>
                                      <li>Projektende (Plandatum)</li>
                                      <li>Projektende (Istdatum)</li>
                                      <li>Baubeginn (Plandatum)</li>
                                      <li>Baubeginn (Istdatum)</li>
                                      <li>Bezugsfertigkeit (Plandatum)</li>
                                      <li>Bezugsfertigkeit (Istdatum)</li>
                                      <li>Fertigstellung (Plandatum)</li>
                                      <li>Fertigstellung (Istdatum)</li>
                                      <li>
                                        Gewährleistungsbeginn (Plandatum)
                                      </li>
                                      <li>
                                        Gewährleistungsbeginn (Istdatum)
                                      </li>
                                      <li>Gewährleistungsende (Plandatum)</li>
                                      <li>Gewährleistungsende (Istdatum)</li>
                                    </ul>
                                    <li>
                                      TBD: Zusätzlich zur Bauwerkszuordnung
                                      grundstücksbezogener
                                      Nutzungsartenschlüssel:
                                      <ul>
                                        <li>
                                          z.B. nach Nutzungsartenerlass des
                                          Landes Brandenburg:
                                          https://www.oebvi-schroeder.de/wissen/nutzung.html
                                        </li>
                                        <li>
                                          z.B. nach Liegenschaftskataster des
                                          Landes Baden-Württemberg:
                                          https://www.statistik-bw.de/BevoelkGebiet/GebietFlaeche/GB-FlNutzung-AdV.jsp
                                        </li>
                                      </ul>
                                    </li>
                                    <li>
                                      Eventuell Unter-Tabs statt Spalten in
                                      diesem Tab?
                                    </li>
                                  </ul>
                                </div>
                              </div>
                              <!--- /col, 1. Spalte  -->
                              <!-- 2. Spalte -->
                              <div class="col-4">
                                <div>
                                  <b>Standortbezogene Angaben</b>
                                </div>
                                <div
                                  class="row q-col-gutter-lg justify-between"
                                >
                                  <!-- Zwischenzeile 2-spaltig -->
                                  <div class="col-9">
                                    <q-input
                                      :disable="
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                      "
                                      square
                                      bg-color="teal-2"
                                      standout="bg-teal-4 text-black"
                                      dense
                                      v-model="
                                        bauvorhabenAusgewaehlteBaueinheit[3]
                                          .werteFeldInhalt
                                      "
                                      label="Straße"
                                      hint="Text, z.B. 'Schloßallee'"
                                      hide-hint
                                      autogrow
                                    />
                                  </div>
                                  <div class="col-3">
                                    <q-input
                                      :disable="
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                      "
                                      square
                                      bg-color="teal-2"
                                      standout="bg-teal-4 text-black"
                                      dense
                                      v-model="
                                        bauvorhabenAusgewaehlteBaueinheit[4]
                                          .werteFeldInhalt
                                      "
                                      label="Hausnummer"
                                      hint="Text, z.B. '5','10a"
                                      hide-hint
                                      autogrow
                                    />
                                  </div>
                                </div>
                                <!-- Zwischenzeile -->
                                <div
                                  class="row q-col-gutter-lg justify-between"
                                >
                                  <!-- Zwischenzeile 2-spaltig -->
                                  <div class="col-3">
                                    <q-input
                                      :disable="
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                      "
                                      square
                                      bg-color="teal-2"
                                      standout="bg-teal-4 text-black"
                                      dense
                                      v-model="
                                        bauvorhabenAusgewaehlteBaueinheit[5]
                                          .werteFeldInhalt
                                      "
                                      label="Postleitzahl"
                                      hint="Text, z.B. '71364'"
                                      hide-hint
                                      autogrow
                                    />
                                  </div>
                                  <!-- NEU: v-model="bauvorhabenAusgewaehlteBaueinheit[1].werteFeldInhalt" -->
                                  <!-- ALT (temporär für Test mit reaktivem Feld über computed getter/setter): v-model="computeOrtsBezeichnungBaueigenschaft" -->
                                  <!-- ACHTUNG: Dies erfordert debounce="1000", sonst wird die Baueigenschaft bei jedem Keystroke per computed setter aktualisiert! -->
                                  <!-- debounce="1000" -->
                                  <div class="col-9">
                                    <q-input
                                      :disable="
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                      "
                                      square
                                      bg-color="teal-2"
                                      standout="bg-teal-4 text-black"
                                      dense
                                      v-model="
                                        bauvorhabenAusgewaehlteBaueinheit[6]
                                          .werteFeldInhalt
                                      "
                                      label="Ort"
                                      hint="Text, z.B. 'Stuttgart'"
                                      hide-hint
                                      autogrow
                                    />
                                  </div>
                                </div>
                                <!-- /Zwischenzeile -->
                                <div>
                                  <!-- TODO: XXXXXX - Hier q-select statt q-input, analog zum q-select für die Bauwerkszuordnung oben -->
                                  <q-input
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      bauvorhabenAusgewaehlteBaueinheit[7]
                                        .werteFeldInhalt
                                    "
                                    label="Bundesland"
                                    hint="Bundesland, z.B. 'Baden-Württemberg','Nordrhein-Westfalen'"
                                    hide-hint
                                    autogrow
                                  />
                                </div>
                                <div>
                                  <!-- TODO: XXXXXX - Hier q-select statt q-input, analog zum q-select für die Bauwerkszuordnung oben -->
                                  <q-input
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      bauvorhabenAusgewaehlteBaueinheit[8]
                                        .werteFeldInhalt
                                    "
                                    label="Land"
                                    hint="Land, z.B. 'Deutschland', 'Österreich', 'Schweiz'"
                                    hide-hint
                                    autogrow
                                  />
                                </div>
                                <div v-if="localStore.state.debugMode">
                                  TODOs:
                                  <ul>
                                    <li>
                                      Rechtswert, Hochwert: Berechenbar aus
                                      geografischen Koordinaten nach Gauß-Krüger
                                    </li>
                                    <li>
                                      Schneelastzone, Windlastzone,
                                      Erdbebenzone: Anzeigbar mit Schaltfläche
                                      unten links
                                    </li>
                                    <li>
                                      Sommerklimaregion: Nach DIN 4108-2 (Karte)
                                    </li>
                                    <li>
                                      Schlagregenbeanspruchungszone: Nach DIN
                                      4108-3 (Karte)
                                    </li>
                                    <li>
                                      Radon-Exposition: Nach BFS (Karten für Im
                                      Boden/Im Freien/In Innenräumen)
                                    </li>
                                    <li>
                                      Hinweis: Diese Attribute könnten alle auch
                                      bauphysikalische Eigenschaften sein am
                                      BVB-Wurzelknoten!
                                    </li>
                                  </ul>
                                </div>
                              </div>
                              <!-- /1. Zeile -->
                              <!-- /col, 2. Spalte -->
                              <!-- 3. Spalte       -->
                              <!-- ACHTUNG: 3. Spalte darf nur col-4 sein, wenn oben q-col-gutter-xs, nicht q-gutter-xs, sonst Column Wrapping! Workaround: col-3 -->
                              <div class="col-4">
                                <div class="row items-start q-col-gutter-xs">
                                  <b>Projektbeteiligte</b>
                                </div>
                                <div>
                                  <q-input
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      bauvorhabenAusgewaehlteBaueinheit[9]
                                        .werteFeldInhalt
                                    "
                                    label="Bauherr"
                                    hint="Bauherr, z.B. 'Stadt Stuttgart'"
                                    hide-hint
                                  />
                                </div>
                                <div>
                                  <q-input
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      bauvorhabenAusgewaehlteBaueinheit[10]
                                        .werteFeldInhalt
                                    "
                                    label="Architekt"
                                    hint="Architekt, z.B. 'Behnisch Architekten'"
                                    hide-hint
                                  />
                                </div>
                                <div>
                                  <q-input
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      bauvorhabenAusgewaehlteBaueinheit[11]
                                        .werteFeldInhalt
                                    "
                                    label="Bauträger"
                                    hint="Bauträger, z.B. 'Projektbau Pfleiderer'"
                                    hide-hint
                                  />
                                </div>
                                <div>
                                  <q-input
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      bauvorhabenAusgewaehlteBaueinheit[12]
                                        .werteFeldInhalt
                                    "
                                    label="Bauunternehmen"
                                    hint="Bauunternehmen, z.B. 'STRABAG'"
                                    hide-hint
                                  />
                                </div>
                                <div>
                                  <q-input
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      bauvorhabenAusgewaehlteBaueinheit[13]
                                        .werteFeldInhalt
                                    "
                                    label="Fachingenieur für Baustatik"
                                    hint="Fachingenieur für Baustatik, z.B. 'Fischer Baustatik'"
                                    hide-hint
                                  />
                                </div>
                                <div>
                                  <q-input
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      bauvorhabenAusgewaehlteBaueinheit[14]
                                        .werteFeldInhalt
                                    "
                                    label="Fachingenieur für Brandschutz"
                                    hint="Fachingenieur für Brandschutz, z.B. 'TRIAS Brandschutzplanung'"
                                    hide-hint
                                  />
                                </div>
                                <div v-if="localStore.state.debugMode">
                                  TODO: Kontakte/Firmen verwalten
                                </div>
                              </div>
                              <!-- /col, 3. Spalte-->
                            </div>
                            <!-- /row, 1. Zeile -->
                            <div
                              class="row full-width items-start q-col-gutter-xs"
                            >
                              <!-- 2. Zeile -->
                              <div class="col-4">
                                <!-- 1. Spalte - aktuell leer -->
                              </div>
                              <!-- /1. Spalte -->
                              <div class="col-4">
                                <!-- 2. Spalte -->
                                <div>
                                  <b>Geografische Koordinaten</b>
                                </div>
                                <div
                                  class="row q-col-gutter-lg justify-between"
                                >
                                  <!-- Zwischenzeile 2-spaltig -->
                                  <div class="col-6">
                                    <q-input
                                      :disable="
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                      "
                                      square
                                      bg-color="teal-2"
                                      standout="bg-teal-4 text-black"
                                      dense
                                      v-model="
                                        bauvorhabenAusgewaehlteBaueinheit[15]
                                          .werteFeldInhalt
                                      "
                                      label="Geografische Breite"
                                      hint="Geografischer Breitengrad - Dezimalgrad zwischen 0° und 360° (N), z.B. '48.883139'"
                                      hide-hint
                                      autogrow
                                    />
                                  </div>
                                  <div class="col-6">
                                    <q-input
                                      :disable="
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                      "
                                      square
                                      bg-color="teal-2"
                                      standout="bg-teal-4 text-black"
                                      dense
                                      v-model="
                                        bauvorhabenAusgewaehlteBaueinheit[16]
                                          .werteFeldInhalt
                                      "
                                      label="Geografische Länge"
                                      hint="Geografischer Längengrad - Dezimalgrad zwischen 0° und 360° (E), z.B. '9.387734'"
                                      hide-hint
                                      autogrow
                                    />
                                  </div>
                                </div>
                                <!-- /Zwischenzeile -->
                                <div>
                                  <q-input
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      bauvorhabenAusgewaehlteBaueinheit[17]
                                        .werteFeldInhalt
                                    "
                                    label="Google Maps Plus Code"
                                    hint="Google Maps Plus Code (6 oder 7 Buchstaben und Ziffern, Leerzeichen, Ortsname), z.B. 'V9GQ+CM Winnenden'"
                                    hide-hint
                                    autogrow
                                  />
                                </div>
                                <div>
                                  <q-input
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    dense
                                    v-model="
                                      bauvorhabenAusgewaehlteBaueinheit[18]
                                        .werteFeldInhalt
                                    "
                                    label="Geografische Höhe"
                                    hint="Geografische Höhe (in Metern über Normallnull), z.B. '284'"
                                    hide-hint
                                    autogrow
                                  />
                                </div>
                              </div>
                              <!-- /2. Spalte -->
                              <div class="col-4">
                                <!-- 3. Spalte -->
                                <div><br /></div>
                                <div class="row">
                                  <q-btn
                                    class="col-9 stretch"
                                    label="Geo-Codes aus Adresse ermitteln"
                                    color="light-blue"
                                    glossy
                                    no-caps
                                    @click="
                                      geoCodeBauvorhabenAusgewaehlteBaueinheit()
                                    "
                                  />
                                </div>
                                <div class="row">
                                  <br />
                                  <br />
                                  <br />
                                  <br />
                                </div>
                                <div class="row">
                                  <q-btn
                                    class="col-9 stretch"
                                    label="Höhe aus Koordinaten ermitteln"
                                    color="light-blue"
                                    glossy
                                    no-caps
                                    @click="
                                      getElevationBauvorhabenAusgewaehlteBaueinheit()
                                    "
                                  />
                                </div>
                              </div>
                              <!-- /3. Spalte -->
                            </div>
                            <!-- /2. Zeile -->
                          </div>
                          <!--------------------------------------------------------------------------------------------------------------------------------->
                          <!-- Buttons unter q-form: -->
                          <!-- Komponente q-separator als sichtbare Trennung zwischen q-tree und den Schaltflächen darunter (q-btns) -->
                          <q-separator />
                          <div class="row q-pa-xs q-col-gutter-xs">
                            <!-- <div v-if="$q.screen.gt.xs"> -->
                            <!-- 1. Zeile -->
                            <div class="col-3">
                              <!-- NEU: Fix 22.05.2020 - type="submit" entfernt, da sonst q-form einen Fehler beim @submit Event auslöst, der zum Logout führt! -->
                              <q-btn
                                class="stretch full-width"
                                style="height: 100%"
                                :disable="
                                  !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                "
                                color="positive"
                                glossy
                                label="Angaben zum Bauvorhaben speichern"
                                no-caps
                                @click="
                                  updateBauvorhabenAusgewaehlteBaueinheit()
                                "
                              />
                            </div>
                            <div class="col-3">
                              <!-- NEU: Fix 22.05.2020 - type="submit" entfernt, da sonst q-form einen Fehler beim @submit Event auslöst, der zum Logout führt! -->
                              <!-- TODO XXXXXX - "Abbrechen" ist aktuell ohne Implementierung!!! -->
                              <q-btn
                                class="stretch full-width"
                                style="height: 100%"
                                :disable="
                                  !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                "
                                color="deep-orange"
                                glossy
                                label="Eingaben auf Originalwerte zurücksetzen"
                                no-caps
                              />
                            </div>
                            <!-- </div> -->
                          </div>
                          <!-- /1. Zeile -->
                          <div class="row q-pa-xs q-col-gutter-xs">
                            <!-- 2. Zeile -->
                            <div class="col-3">
                              <q-btn
                                class="stretch full-width"
                                :href="
                                  computeURLDlubalMitKoordinatenBauvorhabenAusgewaehlteBaueinheit
                                "
                                type="a"
                                target="_blank"
                                label="Lastzonen mit Koordinaten öffnen"
                                color="purple-4"
                                glossy
                                no-caps
                                :disable="
                                  computeCheckAufKoordinatenBauvorhabenAusgewaehlteBaueinheit
                                "
                              />
                            </div>
                            <div class="col-3">
                              <q-btn
                                class="stretch full-width"
                                :href="
                                  computeURLGoogleMapsMitKoordinatenBauvorhabenAusgewaehlteBaueinheit
                                "
                                type="a"
                                target="_blank"
                                label="Google Maps mit Koordinaten öffnen"
                                color="pink"
                                glossy
                                no-caps
                                :disable="
                                  computeCheckAufKoordinatenBauvorhabenAusgewaehlteBaueinheit
                                "
                              />
                            </div>
                            <div class="col-3">
                              <q-btn
                                class="stretch full-width"
                                :href="
                                  computeURLGoogleMapsMitPlusCodeBauvorhabenAusgewaehlteBaueinheit
                                "
                                type="a"
                                target="_blank"
                                label="Google Maps mit Plus Code öffnen"
                                color="light-green"
                                glossy
                                no-caps
                                :disable="
                                  computeCheckAufPlusCodeBauvorhabenAusgewaehlteBaueinheit
                                "
                              />
                            </div>
                            <div class="col-3">
                              <q-btn
                                class="stretch full-width"
                                :href="
                                  computeURLOpenTopoMapMitKoordinatenBauvorhabenAusgewaehlteBaueinheit
                                "
                                type="a"
                                target="_blank"
                                label="OpenTopoMap mit Koordinaten öffnen"
                                color="brown"
                                glossy
                                no-caps
                                :disable="
                                  computeCheckAufKoordinatenBauvorhabenAusgewaehlteBaueinheit
                                "
                              />
                            </div>
                          </div>
                          <!--
                        <div ref="target">{{ updateStatus }}</div>
                        --></div>
                      </q-form>
                      <!-- /Bauvorhaben (Preview) -->
                    </q-tab-panel>
                    <!-- ================================================================================================== -->
                    <!-- ACHTUNG: Hier class="q-pa-xs" oder "q-pa-none" zur Kontrolle des  Abstands zwischen den Tableisten -->
                    <!-- ================================================================================================== -->
                    <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
                    <q-tab-panel
                      name="bauvorhabenProfilFormularTabBaueinheiten"
                      class="q-pa-xs"
                    >
                      <baueinheitBauvorhabenBaueigenschaftsProfilFormular
                        profilBezeichnung="Baueinheit > Bauvorhaben"
                        :nodes="nodesTreeBaueinheiten"
                        :selectedNode="selectedNodeTreeBaueinheiten"
                        :benutzerDarfBearbeitenSelectedNode="
                          benutzerDarfBearbeitenSelectedNodeTreeBaueinheiten
                        "
                        @refresh-request-baueigenschafts-profil="
                          reloadTreeWrapper()
                        "
                      />
                    </q-tab-panel>
                    <!-- ================================================================================================== -->
                    <!-- ACHTUNG: Hier class="q-pa-xs" oder "q-pa-none" zur Kontrolle des  Abstands zwischen den Tableisten -->
                    <!-- ================================================================================================== -->
                    <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
                    <q-tab-panel
                      name="standortProfilFormularTabBaueinheiten"
                      class="q-pa-xs"
                    >
                      <baueinheitStandortBaueigenschaftsProfilFormular
                        profilBezeichnung="Baueinheit > Standort"
                        :nodes="nodesTreeBaueinheiten"
                        :selectedNode="selectedNodeTreeBaueinheiten"
                        :benutzerDarfBearbeitenSelectedNode="
                          benutzerDarfBearbeitenSelectedNodeTreeBaueinheiten
                        "
                        @refresh-request-baueigenschafts-profil="
                          reloadTreeWrapper()
                        "
                      />
                    </q-tab-panel>
                    <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
                    <!-- ================================================================================================== -->
                    <!-- ACHTUNG: Hier class="q-pa-xs" oder "q-pa-none" zur Kontrolle des  Abstands zwischen den Tableisten -->
                    <!-- ================================================================================================== -->
                    <q-tab-panel
                      name="gebaeudeProfilFormularTabBaueinheiten"
                      class="q-pa-xs"
                    >
                      <baueinheitGebaeudeBaueigenschaftsProfilFormular
                        profilBezeichnung="Baueinheit > Gebäude"
                        :nodes="nodesTreeBaueinheiten"
                        :selectedNode="selectedNodeTreeBaueinheiten"
                        :benutzerDarfBearbeitenSelectedNode="
                          benutzerDarfBearbeitenSelectedNodeTreeBaueinheiten
                        "
                        @refresh-request-baueigenschafts-profil="
                          reloadTreeWrapper()
                        "
                      />
                    </q-tab-panel>
                    <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
                    <q-tab-panel
                      name="geschossProfilFormularTabBaueinheiten"
                      class="q-pa-xs full-width"
                    >

                    <computedWithSideEffect/>
                    <!--
                    VUE 3
                    -->
                    <!--
                      <baueinheitGeschossBaueigenschaftsProfilFormular
                        profilBezeichnung="Baueinheit > Geschoss"
                        :nodes="nodesTreeBaueinheiten"
                        :selectedNode="selectedNodeTreeBaueinheiten"
                        :benutzerDarfBearbeitenSelectedNode="
                          benutzerDarfBearbeitenSelectedNodeTreeBaueinheiten
                        "
                        @refresh-request-baueigenschafts-profil="
                          reloadTreeWrapper()
                        "
                      />
                      -->
                    </q-tab-panel>
                    <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
                    <!-- NEU: -->
                    <q-tab-panel
                      name="raumProfilFormularTabBaueinheiten"
                      class="q-pa-xs full-width"
                    >
                    <!--
                      <baueinheitRaumBaueigenschaftsProfilFormular
                        profilBezeichnung="Baueinheit > Raum"
                        :nodes="nodesTreeBaueinheiten"
                        :selectedNode="selectedNodeTreeBaueinheiten"
                        :benutzerDarfBearbeitenSelectedNode="
                          benutzerDarfBearbeitenSelectedNodeTreeBaueinheiten
                        "
                        @refresh-request-baueigenschafts-profil="
                          reloadTreeWrapper()
                        "
                      />
                      -->
                    </q-tab-panel>
                    <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
                    <!-- NEU: -->
                    <q-tab-panel
                      name="bodenProfilFormularTabBaueinheiten"
                      class="q-pa-xs full-width"
                    >
                      <!-- NEU: Hier das layoutgesteuerte generische Profilformular für "Baueiheit > Boden" anzeigen -->
                      <layoutGesteuertesGenerischesBaueigenschaftsProfilFormular
                        profilBezeichnung="Baueinheit > Boden"
                        baum="Bauvorhabenbaum"
                        :nodes="nodesTreeBaueinheiten"
                        :selectedNode="selectedNodeTreeBaueinheiten"
                        :benutzerDarfBearbeitenSelectedNode="
                          benutzerDarfBearbeitenSelectedNodeTreeBaueinheiten
                        "
                        @refresh-request-baueigenschafts-profil="
                          reloadTreeWrapper()
                        "
                      />
                    </q-tab-panel>
                    <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
                    <!-- ================================================================================================== -->
                    <!-- ACHTUNG: Hier class="q-pa-xs" oder "q-pa-none" zur Kontrolle des  Abstands zwischen den Tableisten -->
                    <!-- ================================================================================================== -->
                    <q-tab-panel
                      name="schichtProfilFormularTabBaueinheiten"
                      class="q-pa-xs"
                    >
                      <!-- NEU: Profilformular für "Schicht" hier im Modus "readonly" aufrufen - Eingaben für Schichten müssen im Profilformular "Bodenaufbau" erfolgen! -->
                      <baueinheitSchichtBaueigenschaftsProfilFormular
                        profilBezeichnung="Baueinheit > Schicht"
                        :nodes="nodesTreeBaueinheiten"
                        :selectedNode="selectedNodeTreeBaueinheiten"
                        :benutzerDarfBearbeitenSelectedNode="
                          benutzerDarfBearbeitenSelectedNodeTreeBaueinheiten
                        "
                        :profilFormularIstReadonly="true"
                        @refresh-request-baueigenschafts-profil="
                          reloadTreeWrapper()
                        "
                      />
                    </q-tab-panel>
                    <q-tab-panel
                      name="bodenaufbauProfilFormularTabBaueinheiten"
                      class="q-pa-xs"
                    >
                      <!-- ALT: deleteBaueinheitDialog statt deleteSelectedBaueinheitDialog, bekommt in $event den zu löschenden Node -->
                      <!-- Löschte zwar die Schicht, aber erfordert auf jeden Fall einen Refresh des Bodenaufbaus, -->
                      <!-- NEU: Daher hier disabled und lokal in der Komponente für das Baueigenschaftsprofilformular "Bodenaufbau" erledigt - -->
                      <!-- Änderungen dort markiert mit #253 -->
                      <!--
                        @deleteSchichtRequest="
                          zuLoeschenderNodeTreeBaueinheiten = $event;
                          deleteBaueinheitDialog = true;
                        "
                      -->
                      <!-- ACHTUNG: Hier Fix für #358: @refresh-request-baueigenschafts-profil="reloadTreeWrapper('Nicht optimiert')" statt "...reloadTreeWrapper()" -->
                      <baueinheitBodenaufbauBaueigenschaftsProfilFormular
                        :treeNodes="nodesTreeBaueinheiten"
                        :currentlySelectedNode="selectedNodeTreeBaueinheiten"
                        @changeTabRequest="
                          selectedKeyTreeBaueinheiten = $event._id;
                          tabBaueigenschaftsProfilFormulare =
                            'schichtProfilFormularTabBaueinheiten';
                        "
                        v-model:idCurrentlySelectedSchicht="
                          localStore.state.selectionInBodenaufbau
                        "
                        @create-schicht-request="handleCreateSchicht($event)"
                        @refresh-request-with-callback-for-selected-schicht="
                          handleRefreshWithCallBack($event)
                        "
                        @refresh-request-baueigenschafts-profil="
                          reloadTreeWrapper()
                        "
                        @delete-refresh-request-baueigenschafts-profil="
                          reloadTreeWrapper('Nicht optimiert')
                        "
                        :benutzerDarfBearbeitenSelectedNode="
                          benutzerDarfBearbeitenSelectedNodeTreeBaueinheiten
                        "
                        @loadChildrenRequest="
                          $refs.treeBaueinheiten.setExpanded(
                            selectedNodeTreeBaueinheiten._id,
                            true
                          )
                        "
                      />
                    </q-tab-panel>
                    <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
                    <!-- ACHTUNG: Der folgende Code für den Bodenaufbau ist nur Mockup, ohne Backend-Anbindung: -->
                    <!-- ================================================================================================== -->
                    <!-- ACHTUNG: Hier class="q-pa-xs" oder "q-pa-none" zur Kontrolle des  Abstands zwischen den Tableisten -->
                    <!-- ================================================================================================== -->
                    <q-tab-panel
                      name="vorlauefigesBodenaufbauProfilFormularTabBaueinheiten"
                      v-if="showPreviewBodenaufbau"
                      class="q-pa-xs"
                      style="max-width: 500px"
                    >
                      <div>
                        <q-toolbar class="bg-brown-6 text-white shadow-2">
                          <div v-if="$q.screen.gt.xs" class="row full-width">
                            <div class="col-6 text-justify">
                              <q-toolbar-title>Bodenaufbau</q-toolbar-title>
                            </div>
                            <div class="col-6">
                              <div class="row text-bold">
                                Gesamtschichtdicke (mm):
                                {{ computeSchichtDicke }}
                              </div>
                              <div
                                class="row"
                                v-if="indexOfSelectedArrayElement + 1"
                              >
                                Ausgewählte Schicht:
                                {{ indexOfSelectedArrayElement + 1 }}
                              </div>
                            </div>
                          </div>
                        </q-toolbar>
                        <!-- Zu Indexes in v-fors auf Array siehe  https://stackoverflow.com/questions/49675988/how-to-get-the-v-for-index-in-vue-js -->
                        <div
                          v-for="(schicht, index) in schichtAufbau"
                          :key="schicht.id"
                        >
                          <q-list bordered>
                            <q-expansion-item
                              class="q-my-sm bg-brown-1 text-black"
                              header-class="q-my-sm bg-brown-1 text-black"
                              expand-separator
                              group="accordion-all"
                              :label="schicht.bezeichnung"
                              :icon="iconArray[index].icon"
                              @click="indexOfSelectedArrayElement = index"
                            >
                              <!--
                                <q-item-section avatar>
                                  <q-avatar color="primary" text-color="white">
                                    {{ schicht.id }}
                                  </q-avatar>
                                </q-item-section>
                                -->
                              <q-card
                                class="my-card-schicht bg-brown-1 text-black"
                              >
                                <q-card-section>
                                  <strong
                                    >Schichtbezeichnung:
                                    {{ schicht.bezeichnung }}
                                  </strong>
                                  <p>
                                    Index:
                                    {{ index }}
                                  </p>
                                  <q-input
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    v-model="schicht.dicke"
                                    label="Schichtdicke (mm)"
                                    autogrow
                                  >
                                  </q-input>
                                  <br />
                                  <q-input
                                    square
                                    bg-color="teal-2"
                                    standout="bg-teal-4 text-black"
                                    v-model="schicht.element"
                                    label="Element von"
                                    autogrow
                                  >
                                  </q-input>
                                  <!-- Element von: {{ schicht.element }} -->
                                </q-card-section>
                              </q-card>
                              <!--
                            <q-item-section>
                              <q-item-label>{{
                                schicht.bezeichnung
                              }}</q-item-label>
                              <q-item-label caption lines="1"
                                >Schichtdicke (mm):
                                {{ schicht.dicke }}</q-item-label
                              >
                            </q-item-section>
                            -->
                              <!--
                            <q-item-section side>
                              <q-icon name="chat_bubble" color="green" />
                            </q-item-section>
                            -->
                            </q-expansion-item>
                          </q-list>
                        </div>
                        <br />
                        <br />
                        <div v-if="$q.screen.gt.xs" class="row full-width">
                          <div class="col-4 text-caption">
                            Aktionen für ausgewählte Schicht&nbsp;
                            {{ displayRightArrow }}
                          </div>
                          <div class="col-4">
                            <q-btn
                              label="Schicht nach unten"
                              color="secondary"
                              glossy
                              @click="moveSchichtNachUnten()"
                              no-caps
                            />
                          </div>
                          <div class="col-4">
                            <q-btn
                              label="Schicht nach oben"
                              color="accent"
                              glossy
                              @click="moveSchichtNachOben()"
                              no-caps
                            />
                          </div>
                        </div>
                      </div>
                    </q-tab-panel>
                  </q-tab-panels>
                </q-card>
              </q-tab-panel>
              <!-- ------------------------------------------------------------------------------------------------------------------- -->
              <q-tab-panel
                name="zugeordneteBaustoffeTabBaueinheiten"
                class="q-pa-xs"
              >
                <q-card class="q-pa-xs">
                  <!-- ALT ((Baustoffe): -->
                  <!-- Das Tab "Zugeordnete Baustoffe" nur anzeigen, wenn der ausgewählte Baustoff kein Rohstoff ist, per computed Property: -->
                  <!-- <div v-if="!selectedKeyTreeBaueinheitenIstImRohstoffunterbaum"> -->
                  <!-- NEU (Baueinheiten): Das Tab "Zugeordnete Baustoffe" immer anzeigen zur Auswahl/Abwahl von zugeordneten Baustoffen " -->
                  <!-- NEU: Umfangreiche Debug-Info (Ausgabe von nodesTreeBaustoffe) ausgelagert in separates Tab debugZugeordneteBaustoffeTabBaueinheiten -->
                  <!-- Hier werden nur noch die weniger Platz verbrauchenden Debug-Infos angezeigt -->
                  <div v-if="localStore.state.debugMode" class="text-caption">
                    selectedKeyTreeBaueinheiten:
                    {{ selectedKeyTreeBaueinheiten }}
                    <br />
                    selectedKeyTreeBaustoffe:
                    {{ selectedKeyTreeBaustoffe }}
                    <br />
                    expandedKeysTreeBaustoffe:
                    {{ expandedKeysTreeBaustoffe }}
                    <br />
                    tickedKeysTreeBaustoffe:
                    {{ tickedKeysTreeBaustoffe }}
                    <br />
                    <q-separator />
                    selectedNodeTreeBaueinheiten.zugeordneteBaustoffe:
                    <!-- ALT: -->
                    <!-- {{ selectedNodeTreeBaueinheiten.zugeordneteBaustoffe }} -->
                    <!-- NEU: -->
                    <pre v-html="stringifyZugeordneteBaustoffe"></pre>
                    <q-separator />
                  </div>
                  <div v-if="true">
                    <div v-if="selectedNodeTreeBaueinheiten != null">
                      <div class="text-h6 q-pa-xs" v-if="$q.screen.gt.sm">
                        Zugeordnete Baustoffe an der im Bauvorhabenbaum
                        ausgewählten Baueinheit
                        <strong
                          >"{{
                            selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                          }}"</strong
                        >
                      </div>
                      <div class="text-subtitle1 q-pa-xs" v-else>
                        Zugeordnete Baustoffe an der im Bauvorhabenbaum
                        ausgewählten Baueinheit
                        <strong
                          >"{{
                            selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                          }}"</strong
                        >
                      </div>
                    </div>
                    <q-separator />
                    <!-- <div class="q-pa-xs" style="max-width: 1500px"> -->
                    <!-- HINWEIS: Dieses div zwischen q-tab-panel und q-table ist WICHTIG! -->
                    <!-- ALT: <div class="q-gutter-sm" style="max-width: 1500px"> -->
                    <!-- ALT: :data="dataTableBauinformationen" -->
                    <!-- </div> -->
                    <!-- Hier testweise QHierarchy Quasar Extension zur Anzeige der zugeordneten Baustoffe -->
                    <!-- Kann Hierarchie darstellen, bei QTree Tick Strategy "strict" (wo auch Verzweigungsknoten im Rohstoffunterbaum tickable sind, -->
                    <!-- allerdings schlecht unterscheidbar, was ticked war, und was nur ein Elternknoten im Rohstoffunterbaum ist -->
                    <!-- Die Frage ist, ob man für die QHierarchy trotzdem die Bezeichnungsspalte per SASS anders färben kann und sticky Columns dafür haben kann -->
                    <!-- Vermutlich ja, mit entsprechender CSS ähnlich wie für QTable Bauinformationen, siehe dort class="stickyColumnsTable1HeaderLines" -->
                    <!-- Allerdings nicht getestet, under the Covers benutzt QTable eine QMarkupTable, wie man im Source Code auf GitHub sehen kann -->
                    <!-- ACHTUNG: QHierarchy braucht für sortable Columns ein Feld sortable=true in seiner Column Definition!!! -->
                    <!-- Daneben gibt es ein Feld filterable: true !!! -->
                    <!-- Die Column Definition dafür ist relativ statisch, daher kein Problem, diese Felder so anzugeben -->
                    <!--
                      <q-hierarchy
                        ref="hierarchyBaustoffe"
                        :columns=columnsHierarchyBaustoffe
                        :data=dataHierarchyBaustoffe
                        dense
                      >
                      </q-hierarchy> -->
                    <!-- Weitere Alternative: QTable wie bei zugeordnete Bauinformationen, kann allerdings die Hierarchie nicht darstellen -->
                    <!--    Eventuell ohne separate Slots für Header und Body, da keine Toggles für dynamische Spalten notwendig sind -->
                    <!-- Weitere Alternative: Den QTree zur Auswahl der Baustoffe auch gleich zur permanenten Anzeige der zugeordneten Baustoffe verwenden -->
                    <!-- Abwägung der Alternativen in Methode loadTreeBaustoffe() unten-->
                    <!-- --------------------------------------------------------------------------------------------------------------- -->
                    <!-- NEU: QSplitter mit QTree links und Platz zur Anzeige eines Profilformulars für den ausgewählten Baustoff links: -->
                    <!-- --------------------------------------------------------------------------------------------------------------- -->
                    <q-splitter
                      v-model="splitterModelTreeBaustoffe"
                      :limits="[0, 100]"
                    >
                      <template v-slot:before>
                        <!-- Es folgt nun ein QTree zur kombinierten Auswahl UND Anzeige der zugeordneten Baustoffe: -->
                        <!-- ACHTUNG: default-expand-all funktioniert nur beim allerersten Rendern, wenn die Nodes nicht assigned sind -->
                        <!-- Siehe https://stackoverflow.com/questions/56125406/default-expand-all-doesnt-work-for-q-tree-vue-js -->
                        <!-- Lösung: Dynamisch den Tree expandieren in loadTreeBaustoffe() - siehe Hinweise dort -->
                        <!-- ACHTUNG: Erst die Angabe einer tick-strategy sorgt dafür, dass automatisch Checkboxes für das Ticking im Header erscheinen -->
                        <!-- Die vorher selbst eingefügten q-checkboxes sind dann überflüssig, diese disabled!!! -->
                        <div class="row full-width q-pa-xs q-col-gutter-xs">
                          <q-expansion-item
                            label="Kurzanleitung"
                            expand-separator
                            default-closed
                            dense
                            class="stretch full-width"
                            header-class="
                            bg-grey-4 text-black text-bold shadow-2
                          "
                          >
                            <div
                              class="q-pa-xs"
                              v-if="selectedNodeTreeBaueinheiten != null"
                            >
                              Um planerisch zu erfassen, welche
                              <strong>Baustoffe</strong> für den Bau der links
                              im Bauvorhabenbaum ausgewählten Baueinheit
                              <strong
                                >"{{
                                  selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                                }}"</strong
                              >
                              geeignet sind, können Sie in diesem Formular der
                              ausgewählten Baueinheit bestimmte
                              <strong>Baustoffe</strong> aus dem unten
                              angezeigten
                              <strong>Baustoffbaum</strong>
                              zuordnen:
                              <ul>
                                <li>
                                  Zunächst für die links im Bauvorhabenbaum
                                  ausgewählte Baueinheit alle
                                  <strong>zugeordneten Baustoffe</strong> im
                                  Baustoffbaum unten
                                  <strong>zuordnen</strong> bzw.
                                  <strong>abwählen</strong> mit Checkboxen
                                  <q-checkbox
                                    v-model="alwaysOn"
                                    disable
                                    dense
                                    color="primary"
                                  />
                                  bzw.
                                  <q-checkbox
                                    v-model="alwaysOff"
                                    disable
                                    dense
                                    color="primary"
                                  />.
                                </li>
                                <li>
                                  Dann für einen mit Checkbox
                                  <q-checkbox
                                    v-model="alwaysOn"
                                    disable
                                    dense
                                    color="primary"
                                  />
                                  zugeordneten Baustoff diesen ggf. per Klick
                                  auf das graue Dreieck links von dieser
                                  Checkbox
                                  <strong>expandieren</strong>
                                </li>
                                <li>
                                  Dann für den jeweiligen ausgewählten
                                  zugeordneten Baustoff in seiner Unterzeile für
                                  die Angaben zum Baustoff in der Baueinheit
                                  ("Anteil in Baueinheit:") jeweils per Klick
                                  mit der
                                  <strong>linken Maustaste</strong> ein
                                  <strong>Popup-Formular</strong> aufrufen
                                </li>
                                <li>
                                  In diesem Popup-Formular die zugehörigen
                                  <strong
                                    >Angaben zum Baustoff in der Baueinheit
                                    ändern</strong
                                  >
                                </li>
                                <li>
                                  Im Popup-Formular die geänderten Angaben
                                  mittels der Schaltfläche
                                  <strong>"Angaben zuweisen"</strong>
                                  aktualisieren oder das Popup-Formular mittels
                                  der Schaltfläche
                                  <strong>"Abbrechen"</strong>
                                  schließen
                                </li>
                                <li>
                                  Anschließend mit der Schaltfläche
                                  <strong>"Zuordnungen speichern"</strong> alle
                                  geänderten Auswahlen der zugeordneten
                                  Baustoffe und die eingegebenen Angaben zu
                                  diesen Baustoffen in der Baueinheit
                                  <strong>speichern</strong>
                                </li>
                                <li>
                                  Alternativ mit der Schaltfläche
                                  <strong
                                    >"Eingaben zurücksetzen/Baum neu
                                    laden"</strong
                                  >
                                  alle geänderten Auswahlen der zugeordneten
                                  Baustoffe und die eingegebenen Angaben zu
                                  diesen Baustoffen in der Baueinheit auf die
                                  bisherigen, unveränderten Originalwerte aus
                                  der Datenbank
                                  <strong>zurücksetzen</strong>
                                </li>
                                <li>
                                  Mit einem Linksklick auf die Bezeichnung eines
                                  Baustoffs im Baustoffbaum unten können rechts
                                  dessen
                                  <strong>fachliche Daten</strong> im Tab
                                  <b>"Details zum ausgewählten Baustoff"</b>
                                  angezeigt werden. Der rechts angezeigte
                                  Baustoff wird dabei im Baustoffbaum
                                  <span
                                    style="color: #ffffff; background-color: #1976d2"
                                  >
                                    <strong>
                                      farblich markiert
                                    </strong>
                                  </span>
                                </li>
                                <li>
                                  <b>Zusammenfassend:</b> Mittels Checkboxen
                                  <q-checkbox
                                    v-model="alwaysOn"
                                    disable
                                    dense
                                    color="primary"
                                  />
                                  im Baustoffbaum (unten) markierte Baustoffe
                                  werden der ausgewählten Baueinheit im
                                  Bauvorhabenbaum (links)
                                  <b>planerisch zugeordnet.</b> Der
                                  <span
                                    style="color: #ffffff; background-color: #1976d2"
                                  >
                                    <strong>
                                      &nbsp;farblich markierte&nbsp;
                                    </strong> </span
                                  >&nbsp; Baustoff im Baustoffbaum ist der
                                  aktuell zur <b>Anzeige</b> im Tab
                                  <b>"Details zum ausgewählten Baustoff"</b>
                                  ausgewählte Baustoff.
                                </li>
                                <li>
                                  Im rechten Tab <b>"Baustoffe filtern"</b> kann
                                  nach geeigneten Baustoffen im Baustoffbaum
                                  <b>gesucht</b> und der Baustoffbaum mit den
                                  Ergebnissen der Suche <b>gefiltert</b> werden.
                                </li>
                              </ul>
                            </div>
                          </q-expansion-item>
                        </div>
                        <div class="row full-width q-pa-xs q-col-gutter-xs">
                          <div class="col-md-3 col-12">
                            <!-- ALT: style="width:90%" -->
                            <q-input
                              class="stretch full-width"
                              ref="filterTreeBaustoffe"
                              v-model="filterTreeBaustoffe"
                              bg-color="teal-2"
                              standout="bg-teal-4 text-black"
                              square
                              dense
                              debounce="300"
                              color="primary"
                            >
                              <template v-slot:append>
                                <q-icon name="search" />
                                <q-icon
                                  v-if="filterTreeBaustoffe !== ''"
                                  name="clear"
                                  class="cursor-pointer"
                                  @click="resetFilterTreeBaustoffe"
                                />
                              </template>
                            </q-input>
                          </div>
                          <div class="col-md-4 col-12">
                            <!-- ACHTUNG: Am folgenden q-btn kann type="submit" bleiben, da nicht Teil eines q-forms!!! -->
                            <!-- ALT: style="width:90%" -->
                            <q-btn
                              class="stretch full-width"
                              :disable="
                                !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                              "
                              color="positive"
                              glossy
                              type="submit"
                              @click="
                                updateZugeordneteBaustoffeAusgewaehlteBaueinheit()
                              "
                              label="Zuordnungen speichern"
                              no-caps
                            />
                          </div>
                          <div class="col-md-5 col-12">
                            <!-- ACHTUNG: An den folgenden q-btns kann type="submit" bleiben, da nicht Teil eines q-forms!!! -->
                            <!-- ALT: style="width:90%" -->
                            <q-btn
                              :disable="
                                !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                              "
                              class="stretch full-width"
                              color="deep-orange"
                              glossy
                              text-color="white"
                              @click="
                                resetZugeordneteBaustoffeAusgewaehlteBaueinheit()
                              "
                              label="Eingaben zurücksetzen/Baum neu laden"
                              no-caps
                            />
                          </div>
                        </div>
                        <q-separator />

                        <q-scroll-area style="height: 1200px">
                          <!-- ACHTUNG: Für selektive Expansion nur der ticked Nodes darf -->
                          <!-- default-expand-all NICHT als Prop spezifiziert werden! -->
                          <q-tree
                            dense
                            tick-strategy="strict"
                            ref="treeBaustoffe"
                            :nodes="nodesTreeBaustoffe"
                            node-key="_id"
                            label-key="baustoffBezeichnung"
                            v-model:selected="selectedKeyTreeBaustoffe"
                            v-model:expanded="expandedKeysTreeBaustoffe"
                            v-model:ticked="tickedKeysTreeBaustoffe"
                            selected-color="white bg-primary shadow-2"
                            :filter="filterTreeBaustoffe"
                            no-nodes-label="Keine Baustoffe vorhanden"
                            no-results-label="Keine Baustoffe erfüllen die Filterbedingungen"
                          >
                            <template v-slot:default-header="prop">
                              <!-- ACHTUNG: Geändert von v-slot:default-header="{ node }" -->
                              <!-- ---------------------------------------------------------------------------------------------------------- -->
                              <!-- Code für Popup Menüs, aktuell nicht verwendet: -->
                              <!-- <div class="row items-center" @click.stop> -->
                              <!-- Für q-popup-edit oder q-menu mit context-menu prop, stoppt die normale Knotenselektion mit linker Maustaste! -->
                              <!-- Hat aber keinen Einfluss auf Knotenselektion per Kontextmenü mit @click=selectedKeyTreeBaueinheiten = prop.node._id, diese wirft -->
                              <!-- Fehler, dass prop und key nicht definiert sind - allerdings wird ja node.baueinheitsBezeichnung weiter unten verwendet wird und ist -->
                              <!-- somit definiert. Mit entsprechendem @click=selectedKeyTreeBaueinheiten = node._id gelingt die Knoten-Selektion per Kontextmenü dann doch! -->
                              <!-- Context Menu: -->
                              <!-- ACHTUNG: Context Menus vorläufig disabled für Tree Baustoffe: -->
                              <!--
                                <q-menu touch-position context-menu>
                                  <q-list dense style="min-width: 100px">
                                    <q-item clickable v-close-popup
                                      @click="selectedKeyTreeBaueinheiten = node._id">
                                      <q-item-section>Baueinheit auswählen</q-item-section>
                                    </q-item>
                                    <q-item clickable
                                      @click="selectedKeyTreeBaueinheiten = node._id; createNewBaueinheitDialog = true">
                                      <q-item-section
                                        >Baueinheit auswählen und Kindbaueinheit neu anlegen</q-item-section
                                      >
                                    </q-item>
                                    <q-item clickable
                                      @click="selectedKeyTreeBaueinheiten = node._id; deleteSelectedBaueinheitDialog = true">
                                      <q-item-section>Baueinheit auswählen und löschen</q-item-section>
                                    </q-item>
                                    <q-separator />
                                    <q-item clickable v-close-popup>
                                      <q-item-section>Baueinheit auswählen und umbenennen (TODO)</q-item-section>
                                    </q-item>
                                    -->
                              <!--
                                      <q-item-section side>
                                        <q-icon name="keyboard_arrow_right" />
                                      </q-item-section>
                                    -->
                              <!-- ACHTUNG/TODO: Bei den Aktionen im Kontextmenü -->
                              <!-- kann nicht einfach z.B. per @click="deleteSelectedBaueinheitDialog = true -->
                              <!-- statt v-close-popup dieselben @click-Funktionen wie für die Buttons -->
                              <!-- getriggered werden, da diese auf der selektierten Baueinheit arbeiten -->
                              <!-- Stattdessen muss erst die selektierte Baueinheit geändert werden, dann -->
                              <!-- können diese Aktionen getriggered werden -->
                              <!-- Laut https://forum.quasar-framework.org/topic/3010/q-tree-q-context-menu -->
                              <!-- sollte dazu das Kontextmenü an den q-tree Body Slot attached werden -->
                              <!-- Mittels prop.node._id oder node._id oder node.key (?) kann man den zugehörigen -->
                              <!-- Node ermitteln und diesen dann selektieren über eine Zuweisung -->
                              <!-- @click=selectedKeyTreeBaueinheiten = prop.node._id im  -->
                              <!-- Body Slot von q-tree (sehe unten) den Node neu selektieren auf den per Kontextmenü ausgewählten Node -->
                              <!-- Versuch am Header Slot: Bringt mit selber Zuweisung Fehler "prop" is not defined... -->
                              <!-- Am Header Slot funktioniert es dann aber doch noch mit @click="selectedKeyTreeBaueinheiten = node._id" -->
                              <!-- Dies kann dann einfach konkateniert werden mit denselben v-model Aktionen, die auch in den Buttons darüber verwendet werden, -->
                              <!-- z.B. @click="selectedKeyTreeBaueinheiten = node._id; createNewBaueinheitDialog = true" -->
                              <!--
                                </q-list>
                                </q-menu>
                                -->
                              <!-- /Context Menu -->
                              <!-- ---------------------------------------------------------------------------------------------------------- -->
                              <div class="row items-center">
                                <!-- Nachfolgend testweise Checkbox eingefügt für Ticking eines Nodes: -->
                                <!-- Wieder disabled, unnötig, wenn eine tick-strategy als Prop angegeben wird -->
                                <!-- ACHTUNG: Ändert NICHT von selbst per v-model den Inhalt von tickedKeysTreeBaustoffe, -->
                                <!-- sondern nur mit der Funktion am @input!!! Es stellte sich heraus, dass das v-model prop.node.ticked völlig unabhängig -->
                                <!-- vom Quasar Ticking ist (auf dem so definierten und hinzugefügten Feld "ticked" in den nodes in nodesTreeBaustoffe) -->
                                <!-- während das Quasar Ticking ausschließlich auf dem Array tickedKeysTreeBaustoffe arbeitet!!! -->
                                <!--
                                  <q-checkbox
                                    :toggle-indeterminate="false"
                                    v-model="prop.node.ticked"
                                    @input="prop.node.ticked  || prop.node.ticked !== undefined ? $refs.treeBaustoffe.setTicked(prop.node._id, false) : $refs.treeBaustoffe.setTicked(prop.node._id, true)"
                                  />
                                  -->
                                <div
                                  v-if="
                                    prop.node.baumKnotenTyp === 'Blattknoten'
                                  "
                                >
                                  <!-- ACHTUNG: Geändert von "node.baumKnotenTyp ==="" -->
                                  <q-icon
                                    name="eco"
                                    color="green"
                                    size="28px"
                                    class="q-mr-sm"
                                  ></q-icon>
                                  <!-- Quasar Font Weights per class="text-weight-*": Siehe https://quasar.dev/style/typography#Font-Weights -->
                                  <span class="text-weight-regular">
                                    {{ prop.node.baustoffBezeichnung }}
                                    <!-- ACHTUNG: Geändert von "node.baueinheitsBezeichnung ==="" -->
                                  </span>
                                </div>
                                <div v-else>
                                  <!-- Wurzel- und Verzweigungsknoten -->
                                  <q-icon
                                    name="account_tree"
                                    color="orange"
                                    size="28px"
                                    class="q-mr-sm"
                                  ></q-icon>
                                  <!-- Quasar Font Weights per class="text-weight-*": Siehe https://quasar.dev/style/typography#Font-Weights -->
                                  <span class="text-weight-medium">
                                    {{ prop.node.baustoffBezeichnung }}
                                    <!-- ACHTUNG: Geändert von "node.baueinheitsBezeichnung ==="" -->
                                  </span>
                                </div>
                              </div>
                              <!--  </div> -->
                              <!-- Für auskommentiertes <div> oben -->
                            </template>
                            <!-- Body-Slot mit Kontextmenü - auskommentiert, da der Body Slot auch ohne Inhalt unnötigen Platz verbraucht -->
                            <!-- Kontextmenü, das den Knoten neu selektiert, hier im Body - nach einigen Versuchen nun auch oben im Header,-->
                            <!-- allerdings dort mit @click="selectedKeyTreeBaueinheiten = node._id" statt hier ... = prop.node._id" !!! -->
                            <!--
                              <template v-slot:default-body="prop">
                                <div class="row items-center @click.stop">
                                  {{ prop.node.baumKnotenTyp }}
                                <q-menu touch-position context-menu>
                                    <q-list dense style="min-width: 100px">
                                      <q-item clickable @click="selectedKeyTreeBaueinheiten = prop.node._id">
                                        <q-item-section>Knoten selektieren</q-item-section>
                                      </q-item>
                                      </q-list>
                                  </q-menu>
                                </div>
                              </template>
                              -->
                            <!-- ------------------------------------------------------------------------------------------------------------------------------ -->
                            <!-- Body-Slot mit Popupmenü zur Anzeige und zum Editing erweiterter Felder bei ticked Nodes                                        -->
                            <!-- ACHTUNG: Das Popupmmenü arbeitet auf den 3 erweiterten Feldern per prop.node.anteil/symbol/einheitVonBaustoffInBaueinheit.     -->
                            <!--          Diese Felder sind bei bereits vorher getickten Nodes vorhanden. Bei neu getickten Nodes fügt sie Quasar per prop.node -->
                            <!--          NEU dem jeweiligen Knoten im verschachtelten Array selectedNodeTreeBaueinheiten.zugeordneteBaustoffe hinzu, wie man     -->
                            <!--          es im Debug Mode in obiger Anzeige für selectedNodeTreeBaueinheiten.zugeordneteBaustoffe oben im Tab "Zugeordnete         -->
                            <!--          Baustoffe" mitverfolgen kann - sonst würde dieser Code nicht funktionieren!                                           -->
                            <!-- ACHTUNG: Hier zusätzliches v-if, da sonst Fehler im Log, z.B. nach allererster Auswahl des Tabs "Zugeordnete Baustoffe":         -->
                            <!-- TypeError: Cannot read property 'isTicked' of undefined"                                                                       -->
                            <!-- ------------------------------------------------------------------------------------------------------------------------------ -->
                            <template v-slot:default-body="prop">
                              <div v-if="$refs.treeBaustoffe !== undefined">
                                <!-- ALT:
                                <div class="row items-center @click.stop" v-if="$refs.treeBaustoffe.isTicked(prop.node._id)">
                                -->
                                <!-- -->
                                <div
                                  class="row items-center"
                                  v-if="
                                    $refs.treeBaustoffe.isTicked(prop.node._id)
                                  "
                                >
                                  <!-- -->
                                  <!-- {{ prop.node.baumKnotenTyp }} -->
                                  <!-- War nur Test -->
                                  Anteil in Baueinheit:
                                  {{ prop.node.anteilVonBaustoffInBaueinheit }}
                                  {{ prop.node.symbolVonBaustoffInBaueinheit }}
                                  <!-- {{ Object.isFrozen(prop.node)}} -->
                                  <!-- Für Test von #107 -->
                                  <!-- {{ prop.node.einheitVonBaustoffInBaueinheit }} -->
                                  <!-- ACHTUNG: Enter und Esc Keys schließen das Popup - dies ist z.B. mit @keyup.enter.stop am q-input verhinderbar, siehe -->
                                  <!--          https://quasar.dev/vue-components/popup-edit#Textarea-%2F-QEditor -->
                                  <!-- ACHTUNG: Erste Variante mit v-model am q-popup-edit: v-model="prop.node.anteilVonBaustoffInBaueinheit" - dann gibt es folgendes -->
                                  <!-- PROBLEM [GELÖST MIT ALTERNATIVE 4 UNTEN]: Die Aktualisierung der oben mit {{ }} angezeigten Felder nach deren Änderung im q-popup-edit -->
                                  <!--          erfolgt nach dem Verlassen des q-popup-edits per Button erst, nachdem man woanders hin im Baum geklickt hat!!! -->
                                  <!-- Eventuell selbes Problem wie bei https://github.com/quasarframework/quasar/issues/5000 -->
                                  <!-- Vorgeschlagene Lösung dort: Wrapper Component around q-popup-edit that (only) onSave emits input event, dass sich sein v-model-Feld (value) -->
                                  <!-- geändert hat - methods: { onSave(value) { this.$emit('input', value) } }-->
                                  <!-- value ist dabei eine prop der Wrapper-Komponente, an diese muüsste z.B. prop.node.baueinheitsBezeichnung übergeben werden -->
                                  <!-- Zu evaluieren, wie das mit mehreren Input-Feldern ginge - eventuell müsste die prop dann ein Objekt aus den 3 Feldern sein? -->

                                  <!-- Alternativen: -->
                                  <!-- 1. [FAIL] value (ohne : davor - FALSCH - siehe 4.) statt v-model mit doNothingListener für @input Event! -->
                                  <!--    value="prop.node.anteilVonBaustoffInBaueinheit" @input="doNothing()" -->
                                  <!--    Bewirkt aber keine Besserung!!! Variante: Eventuell $nextTick() statt doNothing? Nicht probiert! -->
                                  <!-- 2. [FAIL] Test mit v-model="prop.node" statt "prop.node.anteilVonBaustoffInBaueinheit"-->
                                  <!---   Bewirkt auch keine Besserung -->
                                  <!-- 3. [PARTIAL SUCCESS] v-model="prop.node" mit @save="$nextTick(() => {$refs.treeBaustoffe.expandAll()})" -->
                                  <!--    Refreshed wie gewünscht den Baustoffbaum MIT den geänderten Werten, allerdings NUR für das erste der 3 Felder! -->
                                  <!--    Expandiert den Baum aber auch gleich - das dürfte allerdings kein Problem sein, da er wegen des Tickings besser immer expandiert seine sollte -->
                                  <!-- 4. [SUCCESS] :value="prop.node" mit @save="$nextTick(() => {$refs.treeBaustoffe.expandAll()})": -->
                                  <!--    Refreshed wie gewünscht den Baustoffbaum MIT den geänderten Werten, für ALLE der 3 Felder! -->
                                  <!--    Expandiert den Baum aber auch gleich - das dürfte allerdings kein Problem sein, da er wegen des Tickings besser immer expandiert seine sollte -->
                                  <!--    Dazu noch zusätzliche Events @before-show und @cancel eingebaut, die die alten Werte speichern und ggf. das model auf diese zurücksetzen -->

                                  <!-- PROBLEM: An den Buttons für das q-popup-edit gibt es leider keine no-caps und glossy Props wie an regulären q-btn Buttons!!! -->
                                  <!-- Siehe auch: https://forum.quasar-framework.org/topic/2916/popup-edit-save-cancel/7 zum Verhalten von q-popup-edit -->
                                  <!-- Siehe auch Feature Request: https://github.com/quasarframework/quasar/issues/6325 - Antwort: Reguläre Buttons verwendbar -->

                                  <!-- 5. TODO: Daher weitere Alternative evaluieren, um reguläre q-btns verwenden zu können: Dies geht wohl nur in Verbindung mit "Default scoped slot" -->
                                  <!-- mit Parametern, siehe Sample auf https://quasar.dev/vue-components/popup-edit#Default-scoped-slot -->
                                  <!-- ACHTUNG: Das Sample dort ist für EIN q-input Feld, hier wird es aber für DREI benötigt! -->
                                  <!-- Die Schwierigkeit dabei ist, dass das Sample den v-slot:after mit in das (EINE) q-input integriert! Das geht mit DREI q-inputs so nicht!!! -->
                                  <!-- Es kommen mit v-slot:after ähnliche Vue-Fehler wie bei https://stackoverflow.com/questions/43370275/vue-named-slots-do-not-work-when-wrapped -->
                                  <!-- ACHTUNG: Per Antworten auf https://github.com/quasarframework/quasar/issues/6325 -->
                                  <!-- a) Keinen v-slot:after verwenden, sondern die neuen q-btns direkt nach den q-inputs mit einfachem div einfügen, -->
                                  <!--    siehe https://github.com/quasarframework/quasar/issues/6325 -->
                                  <!-- b) Die cancel und save Methoden können nicht customized werden, die eine resetted den Input, die andere saved ihn -->

                                  <!-- ACHTUNG: Sicherheitshalber dabei besser die Reset-Aktionen bei @cancel wie bisher belasssen - @cancel wird laut API Doku aufgerufen, wenn User -->
                                  <!-- außerhalb des q-popup-edits klickt!!! -->

                                  <!-- Variiertes Codepen Sample mit Custom Buttons an den q-inputs und am q-popup-edit unten mit Default scoped Slot Parameters am v-slot. -->
                                  <!-- https://codepen.io/pdanpdan/pen/poJJbmp?editors=1010 -->
                                  <!-- Doku dafür: https://quasar.dev/vue-components/popup-edit#Default-scoped-slot -->

                                  <!-- Versuche mit regulären Buttons statt der durch die buttons Prop am q-popup-edit erzeugten Buttons: -->
                                  <!-- Am Submit-Button dann idealerweise selbe Aktion wie beim @save am q-popup-edit plus Call von $refs.popupEditTreeBaustoffe.set(); (zum Closen) -->
                                  <!-- Am Reset-Button dnann idealerweise selbe Aktion wie beim @cancel am q-popup-edit plus Call von $refs.popupEditTreeBaustoffe.cancel(); (zum Closen) -->

                                  <!-- Es bleibt jedoch unklar, wie man bei Alternative 5 überhaupt die vordefinierten Methoden set und cancel erweitert - ein Versuch, stattdessen andersnamige Funktionen -->
                                  <!-- dafür einzusetzen, scheitert mit undefined-Fehlern. Wird bestätigt durch Antwort b) oben. Das Resetten auf die alten Werte wie bisher geht dann wohl so nicht mehr! -->

                                  <!-- Alternative 5 erscheint insgesamt sehr komplex, daher vorläufig zurückgestellt. -->
                                  <!-- ALT: -->
                                  <!--
                                      @save="
                                        $nextTick(() => {
                                          $refs.treeBaustoffe.expandAll();
                                        })
                                      "
                                    -->
                                  <!-- ------------------------------------------------------------------------------------------------------------------------- -->
                                  <!-- Im folgenden diverser Testcode gegen im April 2020 auftretenden Reactivty Fehler am QPopupEdit im Baustoffbaum/Rohstoffunterbaum in -->
                                  <!-- baueinheiten.vue/baustoffe.vue -->
                                  <!-- Durch diesem Fehler funktionierte das Editing per q-popup-edits gar nicht mehr! -->
                                  <!-- Die Root Cause dafür war das Nicht-reaktive Hinzufügen der erweiterten Felder für die Angaben zum Baustoff in der Baueinheit -->
                                  <!-- in loadTreeBaustoffe/Rohstoffe() - dort gefixed -->
                                  <!-- Aktuelle Varianten: -->
                                  <!-- :value="prop.node" statt v-model="prop.node" - ist egal -->
                                  <!-- @save="savePopupEditTreeBaustoffe()" - siehe unten -->
                                  <!-- NEU: @save-Methode nach Vorlage auf https://codepen.io/metalsadman/pen/RmKeWL -->
                                  <!-- @save="(newValue, oldValue) => { savePopupEditTreeBaustoffe(newValue, oldValue, prop.node, 'anteilVonBaustoffInBaueinheit') }" -->
                                  <!-- Der 4. Parameter war nur zu Testzwecken, entfernt -->
                                  <!-- Diese @save-Methode wird verwendet für verzögertes reaktives Save der 3 erweiterten Felder nach prop.node/treeBaustoffe -->
                                  <!-- Dies wurde aus Performance-Gründen eingeführt -->
                                  <!-- Bei direktem reaktiven Update der 3 Felder im Node bzw. Tree dauert bei großem Baum jeder Keystroke im q-input sehr lange! -->
                                  <!-- Daher versucht, dass die q-inputs per v-model nun auf Variablen tempAnteil/Symbol/EinheitVonBaustoffInBaueinheit arbeiten statt direkt reaktiv auf -->
                                  <!-- prop.node.anteil/symbol/einheitVonBaustoffInBaueinheit -->
                                  <!-- Erst bei @save im q-popup-edit wurden diese Werte gesaved in die Datenbank -->
                                  <!-- Funktionierte aber zuerst nicht, weil damit die @save-Methode gar nicht aufgerufen wurde! -->
                                  <!-- ACHTUNG: @save-Methode am q-popup-edit wird NUR aufgerufen, wenn das v-model sich geändert hat!!! -->
                                  <!-- Siehe https://forum.quasar-framework.org/topic/2916/popup-edit-save-cancel/11                     -->
                                  <!-- In der neuen Variante für #107, wo nodesTreeBaustoffe per Object.freeze eingefroren wurde, -->
                                  <!-- wird @save bei v-model="props.node" am q-popup-edit daher gar nicht mehr aufgerufen,       -->
                                  <!-- und musste daher umgestellt werden auf neues Objekt tempValuesPopupEditTreeBaustoffe!      -->
                                  <!-- Statdessen debounce=1000 (ms) an den q-inputs eingeführt, um Blockieren der Eingabe zu verhindern -->
                                  <!-- ------------------------------------------------------------------------------------------------------------------------ -->
                                  <!-- HINWEIS zur @cancel-Methode unten, bei direkten reaktiven Updates ohne verzögertes Save beim @save-Event: -->
                                  <!-- Dafür sind in data() Variablen oldValueAnteil/Symbol/EinheitVonBaustoffInBaueinheit definiert -->
                                  <!-- Mit dem versuchsweisen verzögerten Update wurde temporär diese @cancel-Methode disabled, da dabei die Daten ohne save nicht geändert weerden -->
                                  <!-- Disabled Variante mit v-model auf temp-Variablen: -->
                                  <!--
                                    @before-show="
                                      anteilVonBaustoffInBaueinheit =
                                        prop.node.anteilVonBaustoffInBaueinheit;
                                      symbolVonBaustoffInBaueinheit =
                                        prop.node.symbolVonBaustoffInBaueinheit;
                                      einheitVonBaustoffInBaueinheit =
                                        prop.node.einheitVonBaustoffInBaueinheit;
                                    "
                                    @cancel="
                                      prop.node.anteilVonBaustoffInBaueinheit = oldValueAnteilVonBaustoffInBaueinheit;
                                      prop.node.symbolVonBaustoffInBaueinheit = oldValueSymbolVonBaustoffInBaueinheit;
                                      prop.node.einheitVonBaustoffInBaueinheit = oldValueEinheitVonBaustoffInBaueinheit;
                                    "
                                  -->
                                  <!-- ================================================================================= -->
                                  <!-- NEU: #107                                                                         -->
                                  <!-- QPopupEdit arbeitet nicht mehr direkt auf v-model="prop.node" (dieses kann nicht  -->
                                  <!-- mehr reaktiv geändert werden wegen Object.freeze), sondern auf einem eigenen,     -->
                                  <!-- neuen v-model, Objekt tempValuesPopupEditTreeBaustoffe!                           -->
                                  <!-- Dieses wird in @before-show initialisiert und in @save nach prop.node übertragen! -->
                                  <!-- ACHTUNG: Auch die v-models der q-inputs unten mussten entsprechend geändert werden-->
                                  <!-- ================================================================================= -->
                                  <!-- In der neuen Variante für #107, wo nodesTreeBaustoffe per Object.freeze eingefroren wurde, -->
                                  <!-- wird @save bei v-model="props.node" am q-popup-edit daher gar nicht mehr aufgerufen,       -->
                                  <!-- und musste daher umgestellt werden auf neues Objekt tempValuesPopupEditTreeBaustoffe!      -->
                                  <q-popup-edit
                                    :disable="
                                      !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                    "
                                    ref="popupEditTreeBaustoffe"
                                    touch-position
                                    v-model="tempValuesPopupEditTreeBaustoffe"
                                    title="Angaben zum Baustoff in Baueinheit ändern"
                                    :cover="false"
                                    buttons
                                    glossy
                                    no-caps
                                    label-set="Angaben zuweisen"
                                    label-cancel="Abbrechen"
                                    @before-show="
                                      tempValuesPopupEditTreeBaustoffe[
                                        'anteilVonBaustoffInBaueinheit'
                                      ] =
                                        prop.node.anteilVonBaustoffInBaueinheit;
                                      tempValuesPopupEditTreeBaustoffe[
                                        'symbolVonBaustoffInBaueinheit'
                                      ] =
                                        prop.node.symbolVonBaustoffInBaueinheit;
                                      tempValuesPopupEditTreeBaustoffe[
                                        'einheitVonBaustoffInBaueinheit'
                                      ] =
                                        prop.node.einheitVonBaustoffInBaueinheit;
                                    "
                                    @save="
                                      (newValue, oldValue) => {
                                        savePopupEditTreeBaustoffe(
                                          newValue,
                                          oldValue,
                                          prop.node
                                        );
                                      }
                                    "
                                  >
                                    <div v-if="localStore.state.debugMode">
                                      prop.node:
                                      {{ prop.node }}
                                      <br />
                                      <br />
                                    </div>
                                    Baueinheitsbezeichnung:
                                    {{
                                      selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                                    }}
                                    <br />
                                    Baustoffbezeichnung:
                                    {{ prop.node.baustoffBezeichnung }}
                                    <br />
                                    <br />
                                    <!-- ================================================================================== -->
                                    <!-- ALT: Testcode gegen Reactivity Fehler beim Editing in den QInputs im QPopupEdit    -->
                                    <!-- Varianten:                                                                         -->
                                    <!-- Aktuell disabled:                                                                  -->
                                    <!--   @input="setAnteilVonBaustoffInBaueinheitAusInputFeld" - wird nicht mehr benötigt -->
                                    <!--      War temporär hinzugefügt am ersten q-input:                                   -->
                                    <!--   @change="changeInputPopupEditTreeBaustoffe();                                    -->
                                    <!--   bzw. von Vorlage: https://codepen.io/metalsadman/pen/OJJVGKr:                    -->
                                    <!--   @change="v => { prop.node.anteilVonBaustoffInBaueinheit = v.target.value }"      -->
                                    <!-- Enabled: type="number" am ersten q-input-Feld                                      -->
                                    <!-- ursprüngliches v-model=prop.node.anteilVonBaustoffInBaueinheit                     -->
                                    <!-- ================================================================================== -->
                                    <!-- NEU: # 107 - die q-inputs arbeiten nun wie das q-popup-edit auf temporären, eigenen-->
                                    <!-- v-models, nicht mehr auf prop.node.anteilVonBaustoffInBaueinheit etc.              -->
                                    <!-- ================================================================================== -->
                                    <q-input
                                      :disable="
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                      "
                                      debounce="1000"
                                      type="number"
                                      v-model="
                                        tempValuesPopupEditTreeBaustoffe[
                                          'anteilVonBaustoffInBaueinheit'
                                        ]
                                      "
                                      label="Anteil des Baustoffs in der Baueinheit"
                                      square
                                      bg-color="teal-2"
                                      standout="bg-teal-4 text-black"
                                      dense
                                      autofocus
                                      hint="Zahl, z.B. '50'"
                                      hide-hint
                                    />
                                    <q-input
                                      :disable="
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                      "
                                      debounce="1000"
                                      v-model="
                                        tempValuesPopupEditTreeBaustoffe[
                                          'symbolVonBaustoffInBaueinheit'
                                        ]
                                      "
                                      label="Symbol für den Anteil des Baustoffs in der Baueinheit"
                                      square
                                      bg-color="teal-2"
                                      standout="bg-teal-4 text-black"
                                      dense
                                      hint="Symbol, z.B. '%'"
                                      hide-hint
                                    />
                                    <q-input
                                      :disable="
                                        !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                                      "
                                      debounce="1000"
                                      v-model="
                                        tempValuesPopupEditTreeBaustoffe[
                                          'einheitVonBaustoffInBaueinheit'
                                        ]
                                      "
                                      label="Einheit für den Anteil des Baustoffs in der Baueinheit"
                                      square
                                      bg-color="teal-2"
                                      standout="bg-teal-4 text-black"
                                      dense
                                      hint="Einheitsbezeichnung z.B. 'Prozent'"
                                      hide-hint
                                    />
                                    <!--
                                    <div>
                                      {{prop.node.anteilVonBaustoffInBaueinheit}}
                                      </div>
                                    -->
                                  </q-popup-edit>
                                  <!--
                                    <q-menu touch-position context-menu>
                                      <q-list dense style="min-width: 100px">
                                        <q-item clickable @click="showBenutzerNachrichtFunktionNichtVerfuegbar()">
                                          <q-item-section>Zugeordneten Baustoff für Baueinheit editieren (TODO)</q-item-section>
                                        </q-item>
                                        </q-list>
                                    </q-menu>
                                    -->
                                  <!-- -->
                                </div>
                                <!-- -->
                              </div>
                            </template>
                          </q-tree>
                        </q-scroll-area>
                      </template>
                      <template v-slot:after>
                        <!-- NEU: Unter-Tabs -->
                        <!-- @input="initialisiereAusgewaehltesTabZugeordneteBaustoffe" -->
                        <q-tabs
                          mobile-arrows
                          class="q-pa-none text-black bg-grey-4 full-width"
                          active-color="primary"
                          active-bg-color="white"
                          content-class="text-h7"
                          dense
                          align="left"
                          v-model="tabZugeordneteBaustoffe"
                        >
                          <q-tab
                            name="detailsTabZugeordneteBaustoffe"
                            label="Details zum ausgewählten Baustoff"
                            v-model="tabZugeordneteBaustoffe"
                            no-caps
                            :disable="!selectedKeyTreeBaustoffe"
                          >
                          </q-tab>
                          <q-tab
                            name="filterTabZugeordneteBaustoffe"
                            label="Baustoffe filtern"
                            v-model="tabZugeordneteBaustoffe"
                            no-caps
                          >
                          </q-tab>
                        </q-tabs>
                        <!-- ACHTUNG: Hier keep-alive enabled - scheint zu funktionieren! -->
                        <q-tab-panels
                          v-model="tabZugeordneteBaustoffe"
                          keep-alive
                          animated
                        >
                          <q-tab-panel
                            name="detailsTabZugeordneteBaustoffe"
                            class="q-pa-xs"
                            :disable="!selectedKeyTreeBaustoffe"
                          >
                            <q-card class="q-pa-xs">
                              <!-- ALT: -->
                              <!-- Reserviert für die Anzeige von <strong>fachlichen Daten</strong> zum links ausgewählten Baustoff -->
                              <!-- NEU: Hier soll künftig ein Profilformular für den links ausgewählten Baustoff angezeigt werden -->
                              <!-- Vorläufig eine read-only-Version des generischen Profilformulars anzeigen -->
                              <!-- In der Prop selectedKey wird der Key (_id) des ausgewählten Knotens im Baustoffbaum übergeben -->
                              <!-- Dessen Werte werden in der Komponente vom Backend geholt und angezeigt -->
                              <!-- ---------------------------------------------------------------------------------------------------------------------- -->
                              <!-- NEU: Nach dem Übertragen von Werten aus Baustoff an ausgewählte Baueinheit ("Hochzeit") per Button -->
                              <!--      löst die Komponente nun auch einen Refresh Request Event aus, bei dem der nicht optimierte Refresh erfolgen muss! -->
                              <!-- ---------------------------------------------------------------------------------------------------------------------- -->
                              <!-- Bisher: -->
                              <readOnlyGenerischesBaueigenschaftsProfilFormular
                                v-if="true && selectedKeyTreeBaustoffe"
                                profilBezeichnung="Baustoff > Estrich"
                                baum="Baustoffbaum"
                                :selectedKey="selectedKeyTreeBaustoffe"
                                :selectedNodeTreeBaueinheiten="
                                  selectedNodeTreeBaueinheiten
                                "
                                @refresh-request-baueigenschafts-profil="
                                  reloadTreeWrapper('Nicht optimiert')
                                "
                              />
                              <!-- NEU: Sniff Test für readonly-Version des layoutgesteuerten Formulars -->
                              <!-- Wird enabled, indem obiges v-if auf false gesetzt wird               -->
                              <layoutGesteuertesGenerischesBaueigenschaftsProfilFormular
                                v-else
                                profilBezeichnung="Baustoff > Estrich"
                                baum="Baustoffbaum"
                                :nodes="nodesTreeBaustoffe"
                                :selectedNode="selectedNodeTreeBaustoffe"
                                :benutzerDarfBearbeitenSelectedNode="false"
                                @refresh-request-baueigenschafts-profil="
                                  reloadTreeWrapper()
                                "
                                :readonlyAusZugeordneteBaustoffeBaueinheit="
                                  true
                                "
                              />
                            </q-card>
                          </q-tab-panel>
                          <q-tab-panel
                            name="filterTabZugeordneteBaustoffe"
                            class="q-pa-xs"
                            v-if="false"
                          >
                            <q-card class="q-pa-xs">
                              <!-- NEU: Hier soll künftig ein Profilformular zum Filtern in den Baustoffen angezeigt werden -->
                              <!-- Vorläufig eine Filter-Version der obigen read-only-Version des generischen Profilformulars anzeigen -->
                              <!-- ACHTUNG: In der Prop selectedKey wird der Key (_id) des ausgewählten Knotens im BAUVORHABENBAUM (z.B. einer Schicht) übergeben, -->
                              <!-- für den späteren Zugriff auf Sollwerte an der Baueinheit zum Filtern in Baustoffen -->
                              <!-- TODO XXXXXX -->
                              <!-- WORKAROUND für keyWurzelBaustoffbaum: Da Baustoffbaum in baueinheiten.vue auf der zweiten Ebene beginnt, Zugriff auf Wurzelknoten per parent-Feld!!! -->
                              <filterGenerischesBaueigenschaftsProfilFormular
                                profilBezeichnung="Baustoff > Estrich"
                                baum="Baustoffbaum"
                                :selectedNodeTreeBaueinheiten="
                                  selectedNodeTreeBaueinheiten
                                "
                                :selectedKeyTreeBaustoffe="
                                  selectedKeyTreeBaustoffe
                                "
                                :selectedNodeTreeBaustoffe="
                                  selectedNodeTreeBaustoffe
                                "
                                :keyWurzelBaustoffbaum="
                                  nodesTreeBaustoffe[0].parent
                                "
                                @refresh-request-tree-baustoffe="
                                  loadFilteredTreeBaustoffe($event)
                                "
                              />
                            </q-card>
                          </q-tab-panel>
                          <q-tab-panel
                            name="filterTabZugeordneteBaustoffe"
                            class="q-pa-xs"
                            v-else
                          >
                            <q-card class="q-pa-xs">
                              <!-- NEU: Hier soll künftig ein Profilformular zum Filtern in den Baustoffen angezeigt werden -->
                              <!-- Vorläufig eine Filter-Version der obigen read-only-Version des generischen Profilformulars anzeigen -->
                              <!-- ACHTUNG: In der Prop selectedKey wird der Key (_id) des ausgewählten Knotens im BAUVORHABENBAUM (z.B. einer Schicht) übergeben, -->
                              <!-- für den späteren Zugriff auf Sollwerte an der Baueinheit zum Filtern in Baustoffen -->
                              <!-- TODO XXXXXX -->
                              <!-- WORKAROUND für keyWurzelBaustoffbaum: Da Baustoffbaum in baueinheiten.vue auf der zweiten Ebene beginnt, Zugriff auf Wurzelknoten per parent-Feld!!! -->
                              <baueinheitZugeordneteBaustoffeFilterBaueigenschaftsProfilFormular
                                profilBezeichnung="Baustoff > Filter > Estrich"
                                baum="Baustoffbaum"
                                :selectedNodeTreeBaueinheiten="
                                  selectedNodeTreeBaueinheiten
                                "
                                :selectedKeyTreeBaustoffe="
                                  selectedKeyTreeBaustoffe
                                "
                                :selectedNodeTreeBaustoffe="
                                  selectedNodeTreeBaustoffe
                                "
                                :keyWurzelBaustoffbaum="
                                  nodesTreeBaustoffe[0].parent
                                "
                                @refresh-request-tree-baustoffe="
                                  loadFilteredTreeBaustoffe($event)
                                "
                              />
                            </q-card>
                          </q-tab-panel>
                        </q-tab-panels>
                      </template>
                    </q-splitter>
                  </div>
                </q-card>
              </q-tab-panel>
              <!-- ------------------------------------------------------------------------------------------------------------------- -->
              <!-- Es folgen die weiteren Panels in der oberen Panel-Leiste -->
              <q-tab-panel
                name="zugeordneteBauinformationenTabBaueinheiten"
                class="q-pa-xs"
              >
                <!--***===================================== Start Code aus Bauinformationen.vue ========================================-->
                <div>
                  <!--
                      Zugeordnete Bauinformationen:
                      {{selectedNodeTreeBaueinheiten.zugeordneteBauinformationen}}
                      -->
                  <!-- q-dialog für Hinweis, dass erst eine Bauinformation auszuwählen ist                                     -->
                  <!-- // ACHTUNG: q-dialog muss stets lokal zu dem q-tab-panel definiert sein, in dem er per v-model aktiviert wird, sonst passiert nichts!!! -->
                  <q-dialog
                    v-model="confirmHinweisAuswaehlenBauinformationAusQTable"
                    persistent
                  >
                    <q-card>
                      <q-card-section class="row items-center">
                        <q-avatar
                          icon="notification_important"
                          color="warning"
                          text-color="white"
                        />
                        <span class="q-ml-sm">
                          Bitte eine Bauinformation in der ersten Spalte mit
                          <q-checkbox
                            v-model="alwaysOn"
                            disable
                            dense
                            color="primary"
                          />&nbsp;auswählen
                        </span>
                      </q-card-section>
                      <q-card-actions align="right">
                        <q-btn
                          glossy
                          label="Weiter"
                          color="secondary"
                          no-caps
                          v-close-popup
                        />
                        <!-- ACHTUNG: Bei @click="method()" unbedingt "()"" hinter "method" angeben, sonst passiert gar nichts!!! -->
                        <!-- ANDERERSEITS: @click="handleClick" und @click="handleClick()" sind äquivalent laut https://flaviocopes.com/vue-events/ -->
                        <!-- ACHTUNG: Offenbar muss das v-model this.confirmHinweisAuswaehlenBauinformationAusQTable nicht auf false zurückgesetzt werden!!! -->
                      </q-card-actions>
                    </q-card>
                  </q-dialog>
                  <!-- q-dialog für Hinweis, dass eine Bauinformation mit internem Link auszuwählen ist                                     -->
                  <!-- // ACHTUNG: q-dialog muss stets lokal zu dem q-tab-panel definiert sein, in dem er per v-model aktiviert wird, sonst passiert nichts!!! -->
                  <q-dialog
                    v-model="
                      confirmHinweisAuswaehlenBauinformationAusQTableMitInternemLink
                    "
                    persistent
                  >
                    <q-card>
                      <q-card-section class="row items-center">
                        <q-avatar
                          icon="notification_important"
                          color="warning"
                          text-color="white"
                        />
                        <span class="q-ml-sm">
                          Bitte eine Bauinformation in der ersten Spalte mit
                          <q-checkbox
                            v-model="alwaysOn"
                            disable
                            dense
                            color="secondary"
                          />&nbsp;auswählen, die einen Link in Spalte 'Interner
                          Link' enthält
                        </span>
                      </q-card-section>
                      <q-card-actions align="right">
                        <q-btn
                          glossy
                          label="Weiter"
                          color="primary"
                          no-caps
                          v-close-popup
                        />
                        <!-- ACHTUNG: Bei @click="method()" unbedingt "()"" hinter "method" angeben, sonst passiert gar nichts!!! -->
                        <!-- ANDERERSEITS: @click="handleClick" und @click="handleClick()" sind äquivalent laut https://flaviocopes.com/vue-events/ -->
                        <!-- ACHTUNG: Offenbar muss das v-model this.confirmHinweisAuswaehlenBauinformationAusQTable nicht auf false zurückgesetzt werden!!! -->
                      </q-card-actions>
                    </q-card>
                  </q-dialog>
                  <!-- q-dialog für Hinweis, dass eine Bauinformation mit externem Link auszuwählen ist                                     -->
                  <!-- // ACHTUNG: q-dialog muss stets lokal zu dem q-tab-panel definiert sein, in dem er per v-model aktiviert wird, sonst passiert nichts!!! -->
                  <q-dialog
                    v-model="
                      confirmHinweisAuswaehlenBauinformationAusQTableMitExternemLink
                    "
                    persistent
                  >
                    <q-card>
                      <q-card-section class="row items-center">
                        <q-avatar
                          icon="notification_important"
                          color="warning"
                          text-color="white"
                        />
                        <span class="q-ml-sm">
                          Bitte eine Bauinformation in der ersten Spalte mit
                          <q-checkbox
                            v-model="alwaysOn"
                            disable
                            dense
                            color="secondary"
                          />&nbsp;auswählen, die einen Link in Spalte 'Externer
                          Link' enthält
                        </span>
                      </q-card-section>
                      <q-card-actions align="right">
                        <q-btn
                          glossy
                          label="Weiter"
                          color="primary"
                          no-caps
                          v-close-popup
                        />
                        <!-- ACHTUNG: Bei @click="method()" unbedingt "()"" hinter "method" angeben, sonst passiert gar nichts!!! -->
                        <!-- ANDERERSEITS: @click="handleClick" und @click="handleClick()" sind äquivalent laut https://flaviocopes.com/vue-events/ -->
                        <!-- ACHTUNG: Offenbar muss das v-model this.confirmHinweisAuswaehlenBauinformationAusQTable nicht auf false zurückgesetzt werden!!! -->
                      </q-card-actions>
                    </q-card>
                  </q-dialog>
                  <!-- ------------------------------------------------------------------------------------------ -->
                  <!-- <div class="q-pa-xs" style="max-width: 1550px"> -->
                  <div class="q-pa-xs">
                    <!-- HINWEIS: Dieses div zwischen q-tab-panel und q-table ist WICHTIG, falls die Table in     -->
                    <!--          ein Splitter-Model (hier im rechten Panel) eingebettet ist                      -->
                    <!-- ALT: <div class="q-gutter-sm" style="max-width: 1500px"> -->
                    <!-- ALT: :data="dataTableBauinformationen" -->
                    <div v-if="localStore.state.debugMode">
                      Zugeordnete Bauinformationen:
                      {{
                        selectedNodeTreeBaueinheiten.zugeordneteBauinformationen
                      }}
                      <q-separator />
                      <br />
                    </div>
                    <!-- ACHTUNG: selectedNodeTreeBaueinheiten ist computed: !!! -->
                    <!-- NEU: Erste Spalte zur Selektion von Zeilen mit color="primary" (blau statt grau) -->
                    <q-table
                      color="primary"
                      title="Zugeordnete Bauinformationen: Normen, Vorschriften, Richtlinien, Zulassungen, Nachweise, Datenblätter, etc."
                      rows-per-page-label="Einträge pro Seite"
                      dense
                      row-key="_id"
                      :rows="
                        selectedNodeTreeBaueinheiten.zugeordneteBauinformationen
                      "
                      :columns="columnsTableBauinformationen"
                      :visible-columns="visibleColumnsTableBauinformationen"
                      v-model:pagination="paginationTableBauinformationen"
                      :pagination-label="getPaginationLabel"
                      :rows-per-page-options="[
                        5,
                        10,
                        15,
                        20,
                        25,
                        30,
                        35,
                        40,
                        0
                      ]"
                      selection="single"
                      v-model:selected="selectedRowsTableBauinformationen"
                      :selected-rows-label="
                        getSelectedStringTableBauinformationen
                      "
                      :filter="filterTableBauinformationen"
                      v-bind:class="{
                        stickyColumnsTable1HeaderLine: $q.screen.gt.sm
                      }"
                    >
                      <!-- ACHTUNG: Sticky Column funktioniert nur auf großen Bildschirmen - auf mobilen Bildschirmen funktioniert damit das horizontale Scrolling der QTable nicht! -->
                      <!-- LÖSUNG (#378): Per v-bind mit Bedingung $q.screen.gt.sm die sticky Column nur auf nicht kleinen Bildschirmen! -->
                      <!-- Vorlage: https://vuejs.org/v2/guide/class-and-style.html -->
                      <!-- Dazu musste allerdings die CSS Class sticky-columns-table-... (kebab-case) umbenannt werden nach -->
                      <!-- stickyColumnsTable... (camelCase) -->

                      <!-- NEU: class="stickyColumnsTable1HeaderLine" enthält CSS für sticky Columns, braucht SASS Preprocessor -->
                      <!-- Siehe Hinweise dazu ganz unten in <style>-Sektion -->
                      <!-- ACHTUNG: row-key muss gesetzt sein, wenn Selection verwendet wird (Checkboxes pro Tabellenzeile, links) -->

                      <!-- table-class="table-class" -->
                      <!-- CSS zum Test von eigener CSS auf Table, vorläufig auskommentiert -->

                      <!-- ACHTUNG: title oben in q-table wird überdeckt von v-slot:top? Daher eigenes div mit Titel unten -->
                      <!-- ACHTUNG: div mit v-if hier nicht erlaubt, <template v-slot:> muss Root Level in der receiving Component sein!!! -->

                      <!-- Der folgende <template v-slot:> Teil inklusive v-model, das :visible-columns in q-table oben referenziert,-->
                      <!-- ist für die Selektion der sichtbaren q-table Spalten per Toggles -->
                      <template v-slot:top="props">
                        <!------------------------------------------------------------------------------------------->
                        <!-- ALT: Erst neues div mit v-if="selectedKey" hier probiert, funktioniert aber nicht     -->
                        <!-- für alle Teile der komplexen Tabelle mit eigenem v-model und q-select!!!              -->
                        <!-- v-if="selectedKey" an q-tab-panel oben scheint dagegen zu funktionieren!!!            -->
                        <!------------------------------------------------------------------------------------------->
                        <div class="row full-width">
                          <div
                            class="col-md-6 col-12 text-h6"
                            v-if="$q.screen.gt.sm"
                          >
                            <!-- NEU: col-6 statt col-8 wegen Platzbedarf für weitern Toggle für Anzeigetext -->
                            Zugeordnete Bauinformationen an der Baueinheit
                            <strong
                              >"{{
                                selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                              }}"</strong
                            >
                          </div>
                          <div class="col-md-6 col-12 text-subtitle1" v-else>
                            <!-- NEU: col-6 statt col-8 wegen Platzbedarf für weitern Toggle für Anzeigetext -->
                            Zugeordnete Bauinformationen an der Baueinheit
                            <strong
                              >"{{
                                selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                              }}"</strong
                            >
                          </div>
                          <!--
                              <div class="col-4 subtitle-2 text-left">
                                (Normen, Vorschriften, Richtlinien, Zulassungen,
                                Nachweise, Datenblätter, ...)
                              </div>
                              -->
                          <!-- <div> {{visibleColumnsTableBauinformationen}} </div> -->
                          <!-- Ursprünglich für die "multiplen" "Keine/Alle Normkategorien" "Wenige/Viele Spalten" Toggles (falsch!!!): -->
                          <!--   @input="toggleAllNormkategorien" und  -->
                          <!--   value="toggleAllNormkategorienState"  -->
                          <!--   In Verbindung mit Inversion von toggleAllNormkategorienState am Ende von toggleAllNormkategorien -->
                          <!-- Damit wurde dann zwar der Array korrekt gesteuert, aber es erfolgte kein "Ticking" des Toggles! -->
                          <!-- Per https://forum.quasar-framework.org/topic/4373/how-to-use-q-toggle-with-input-and-value-rather-than-v-model/5 ersetzt durch v-model -->
                          <!-- sollte stattdessen verwendet werden:     -->
                          <!--   @input="toggleAllNormkategorien" und   -->
                          <!--   v-model="toggleAllNormkategorienState" -->
                          <!--   Funktioniert aber nur, wenn am Ende von toggleAllNormkategorien toggleAllNormkategorien NICHT invertiert wird! -->
                          <div class="col-md-2 col-6 text-body2">
                            <q-toggle
                              dense
                              v-model="visibleColumnsTableBauinformationen"
                              val="bauinformationsAnzeigeText"
                              label="Anzeigetext"
                            />
                          </div>
                          <div class="col-md-2 col-6 text-body2">
                            <q-toggle
                              dense
                              label="Keine/Alle Normkategorien"
                              v-model="toggleAllNormkategorienState"
                              @input="toggleAllNormkategorien"
                              ref="toggleAllNormkategorien"
                              color="info"
                            />
                          </div>
                          <div class="col-md-2  col-6 text-body2">
                            <q-toggle
                              dense
                              label="Wenige/Viele Spalten"
                              v-model="toggleAllColumnsState"
                              @input="toggleAllColumns"
                              ref="toggleAllColumns"
                              color="secondary"
                            />
                          </div>
                          <div class="col-md-2 col-6">
                            <!-- Weiterer Toggle Button für Fullscreen-Darstellung von q-table -->
                            <!-- Verschoben von ursprünglicher Position nach q-select in diese erste Zeile von q-toggles -->
                            <q-btn
                              flat
                              round
                              dense
                              :icon="
                                props.inFullscreen
                                  ? 'fullscreen_exit'
                                  : 'fullscreen'
                              "
                              @click="props.toggleFullscreen"
                              class="absolute-top-right"
                              no-caps
                            />
                          </div>
                          <!-- ALT: q-button, damit musste toggleAllNormkategorienState in toggleNormkategorien invertiert werden!!!
                              <div class="col-2">
                                <q-btn
                                  label="Normkategorien ein/aus"
                                  dense
                                  v-model="toggleAllNormkategorienState"
                                  @click="toggleNormkategorien"
                                  no-caps
                                />
                              </div>
                              -->
                        </div>
                        <!-- HINWEIS: Hier ursprünglich class="col-2" statt "row" -->
                        <!-- <q-space /> -->
                        <!-- ALT: -->
                        <!-- v-if="$q.screen.gt.xs" -->
                        <div class="row full-width">
                          <!----------------------------------------------------------------------------------------->
                          <!-- Alignment der Toggles in Spalten statt "wilder" Position  mit <q-space /> daszwichen-->
                          <!-- nach Tipp auf https://forum.quasar-framework.org/topic/4254/how-to-align-the-q-toggles-that-control-q-table-column-visibility/2 -->
                          <!-- Flex Row mit 6 even Columns, class="col-2" pro Spalte, d.h. 2/12 des Platzes        -->
                          <!-- Hinweis: class="row full-width" ist dabei wichtig, sonst funktioniert es nicht!     -->
                          <!-- Siehe https://quasar.dev/layout/grid/introduction-to-flexbox                        -->
                          <!-- sowie https://quasar.dev/layout/grid/flex-playground                                -->
                          <!-- TODO: Alternativ auch QSelect Dropdown oder QMenu mit QToggles als Items möglich    -->
                          <!-- Sample dafür auf https://0ybb3.sse.codesandbox.io/table-extensions/custom-header    -->
                          <!-- Zusätzlich: Gemeinsamer Button für alle bauphysikalischen Schutzkategorien, s.u.    -->
                          <!----------------------------------------------------------------------------------------->
                          <!-- <q-toggle v-model="visibleColumnsTableBauinformationen" val="name" label="Name" />  -->
                          <!-- HINWEIS: Die Spalte mit dem Key kann/sollte nicht ausgeblendet werden!              -->
                          <!----------------------------------------------------------------------------------------->
                          <!-- TODO: q-toggle Size verkleinern mit style="transform: scale(0.9, 0.9);"             -->
                          <!-- Dieses Style Property unmittelbar an q-toggle anhängen, ohne weitere CSS in <style> -->
                          <!-- Siehe https://github.com/quasarframework/quasar/issues/2833                         -->
                          <!-- Verkleinert auch den Label-Text mit                                                 -->
                          <!-- Hinweis: Bezeichnung kann nicht ausgeblendet werden, Toggle dafür kann entfallen    -->
                          <!-- Stattdessen q-input Feld für Filter auf q-table an erster Stelle eingefügt          -->
                          <div class="col-md-2 col-12">
                            <!--
                                <q-toggle
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="bauinformationsBezeichnung"
                                  label="Bezeichnung"
                                />
                                -->
                            <q-input
                              class="q-pr-sm"
                              square
                              bg-color="teal-2"
                              standout="bg-teal-4 text-black"
                              dense
                              debounce="300"
                              color="primary"
                              v-model="filterTableBauinformationen"
                            >
                              <template v-slot:append>
                                <q-icon name="search" />
                              </template>
                            </q-input>
                          </div>
                          <!-- NEU: Toggle für Spalte Autoren, dadurch verschieben sich die weiteren Toggles nach rechts bzw. in die nächste Spalte: -->
                          <div class="col-md-2 col-6">
                            <q-toggle
                              dense
                              v-model="visibleColumnsTableBauinformationen"
                              val="benutzerKennungenAutoren"
                              label="Autoren"
                            />
                          </div>
                          <div class="col-md-2 col-6">
                            <q-toggle
                              dense
                              v-model="visibleColumnsTableBauinformationen"
                              val="bauinformationsTyp"
                              label="Typ"
                            />
                          </div>
                          <div class="col-md-2 col-6">
                            <q-toggle
                              dense
                              v-model="visibleColumnsTableBauinformationen"
                              val="bauinformationsBemerkung"
                              label="Bemerkung"
                            />
                          </div>
                          <div class="col-md-2 col-6">
                            <q-toggle
                              dense
                              v-model="visibleColumnsTableBauinformationen"
                              val="herausgeberGeografie"
                              label="Geografie"
                            />
                          </div>
                          <div class="col-md-2 col-6">
                            <q-toggle
                              dense
                              v-model="visibleColumnsTableBauinformationen"
                              val="herausgeberInstitution"
                              label="Institution"
                            />
                          </div>
                        </div>
                        <!-- <q-space /> -->
                        <!-- 2. Toggles-Zeile: -->
                        <!-- ALT: -->
                        <!-- v-if="$q.screen.gt.xs" -->
                        <div class="row full-width">
                          <!-- ---------------------------------------------------------------------------------------- -->
                          <!-- NEU: Toggles für mehrere, inhaltlich zusammengehörende Spalten (dadurch weniger Toggles) -->
                          <div class="col-md-2 ">
                            <!-- Leerspalte unter Filterfeld -->
                          </div>
                          <div class="col-md-2 col-6">
                            <q-toggle
                              dense
                              v-model="visibleColumnsTableBauinformationen"
                              val="herausgeberBezeichnung"
                              label="Herausgeber"
                            />
                          </div>
                          <div class="col-md-2 col-6">
                            <q-toggle
                              dense
                              v-model="regionenAnzeigen"
                              @input="toggleSpaltenRegionen"
                              label="Regionen"
                              ref="toggleRegionenAnzeigen"
                            />
                          </div>
                          <div class="col-md-2 col-6">
                            <q-toggle
                              dense
                              v-model="gueltigkeitAnzeigen"
                              @input="toggleSpaltenGueltigkeit"
                              label="Gültigkeit"
                              ref="toggleGueltigkeitAnzeigen"
                            />
                          </div>
                          <div class="col-md-2 col-6">
                            <q-toggle
                              dense
                              v-model="normTypenAnzeigen"
                              @input="toggleSpaltenNormTypen"
                              label="Normtypen"
                              ref="toggleNormTypenAnzeigen"
                            />
                          </div>
                          <div class="col-md-2 col-6">
                            <q-toggle
                              dense
                              v-model="linksAnzeigen"
                              @input="toggleSpaltenLinks"
                              label="Links"
                              ref="toggleLinksAnzeigen"
                            />
                          </div>
                          <!-- ALT: Toggles für einzelne Spalten - disabled  -->
                          <!--
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="herausgeberBundeslandDeutschland"
                                  label="Bundesland (D)"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="herausgeberBundeslandÖsterreich"
                                  label="Bundesland (AU)"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="herausgeberKantonSchweiz"
                                  label="Kanton (CH)"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="gültigkeitsDatumVon"
                                  label="Gültig von"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="gültigkeitsDatumBis"
                                  label="Gültig bis"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="normTypDIN"
                                  label="Normtyp (DIN)"
                                />
                              </div>
                              -->
                        </div>
                        <!-- <q-space /> -->
                        <!-- /2. Toggles-Zeile: -->
                        <!-- 3. Toggles-Zeile: -->
                        <!-- ALT (Einzel-Toggles) - disabled -->
                        <!--
                            <div v-if="$q.screen.gt.xs" class="row full-width">
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="normTypÖNORM"
                                  label="Normtyp (ÖNORM)"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="normTypSN"
                                  label="Normtyp (SN)"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="normTypEN"
                                  label="Normtyp (EN)"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="normTypISO"
                                  label="Normtyp (ISO)"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="externerLink"
                                  label="Externer Link"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="internerLink"
                                  label="Interner BIM.click-Link"
                                />
                              </div>
                            </div>
                            -->
                        <!-- /3. Toggles-Zeile: -->
                        <!-- <q-space /> -->
                        <div v-if="$q.screen.gt.xs" class="row full-width">
                          <!-- Die einzelnen Toggles für Normkategorien im Folgenden ausgeblendet -->
                          <!-- 1) Es sind sonst zu viele Toggles -->
                          <!-- 2) Die einzelnen Toggles funktionieren nicht im Zusammenspiel mit dem gemeinsamen Schalter für alle -->
                          <!--
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="grundNorm"
                                  label="Grundnorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="terminologieNorm"
                                  label="Terminologienorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="prüfNorm"
                                  label="Prüfnorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="produktNorm"
                                  label="Produktnorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  dense
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="verfahrensNorm"
                                  label="Verfahrensnorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="dienstleistungsNorm"
                                  label="Dienstleistungsnorm"
                                />
                              </div>
                            </div>
                            <div v-if="$q.screen.gt.xs" class="row full-width">
                              <div class="col-2">
                                <q-toggle
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="schnittstellenNorm"
                                  label="Schnittstellensnorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="deklarationsNorm"
                                  label="Deklarationsnorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="fachbereichsNorm"
                                  label="Fachbereichsnorm"
                                />
                              </div>
                              <div class="col-2">
                                <q-toggle
                                  v-model="visibleColumnsTableBauinformationen"
                                  val="werkNorm"
                                  label="Werknorm"
                                />
                              </div>
                              <div class="col-2">
                              </div>
                              -->
                        </div>
                        <!-- <q-space /> -->
                        <!------------------------------------------------------------------------------------------------------------------------------->
                        <!-- q-select, um abhängig von Toggles die Tabelle nur mit den ausgewählten Spalten anzuzeigen                                 -->
                        <!-- ACHTUNG: Funktionsweise von q-select muss noch genauer erforscht werden                                                   -->
                        <!-- Durch das v-else am Anfang scheint es ein unsichtbares Dropdown Select-Menü zu sein!                                      -->
                        <!-- Durch das emit-value und map-options scheinen die Toggle-Werte auf visibleColumnsTableBauinformationen gemapped zu werden  -->
                        <!-- Siehe auch https://quasar.dev/vue-components/select, dort QSelect API ganz unten                                          -->
                        <!------------------------------------------------------------------------------------------------------------------------------->
                        <q-select
                          v-else
                          v-model="visibleColumnsTableBauinformationen"
                          multiple
                          borderless
                          dense
                          options-dense
                          :display-value="$q.lang.table.columns"
                          emit-value
                          map-options
                          :options="columns"
                          option-value="name"
                          style="min-width: 150px"
                        />
                      </template>
                      <!-- /template v-slot-->
                      <!-- ========================================================================================================================================= -->
                      <!-- START neuer Code für Enablement eines Kontextmenüs auf den Tabellenzeilen/-spalten -->
                      <!-- Vorlage dafür ist in bauinformationen.vue -->
                      <!-- Dazu willkürlich die zweite Spalte als v-slot definiert und das Kontextmenü darunter definiert -->
                      <!-- Enabled erstaunlicherweise das Kontextmenü auf ALLEN Spalten!!! -->
                      <!-- ACHTUNG: Im Zuge von #382 hier Fehler festgestellt, dass die Kontextmenüs nicht mehr korrekt angezeigt werden, wenn -->
                      <!-- oben per QToggle z.B. der bauinformationsTyp ausgeblendet wird! -->
                      <!-- Daher bauinformationsTyp durch bauinformationsBezeichnung ersetzt (erste Spalte, diese wird nie ausgeblendet), dann funktionierten -->
                      <!-- die Kontextmenüs wieder! -->
                      <!-- TODO XXXXXX: -->
                      <!-- Der Template-Code für diese QTable hier ist allerdings alt und schlecht, er sollte überarbeitet werden z.B. nach der Vorlage -->
                      <!-- der QTable mit Kontextmenps in uebersicht-tab-baueigenschaften.vue -->
                      <!-- ========================================================================================================================================= -->
                      <template
                        v-slot:body-cell-bauinformationsBezeichnung="props"
                      >
                        <!-- NEU: #382 - ALT: v-slot:body-cell-bauinformationsTyp -->
                        <q-td :props="props">
                          {{ props.row["bauinformationsBezeichnung"] }}
                          <!-- NEU: #382 - ALT: bauinformationsTyp -->
                          <!-- q-td mit {{ }} ist notwendig, sonst wird für diese Spalte kein Wert angezeigt!!! -->
                        </q-td>
                        <!-- =================================================================================================================================== -->
                        <!-- START CODE FÜR KONTEXTMENÜ für Rechtsklick-Aktionen auf einer Spalte/Zeile in der QTable -->
                        <!-- Dabei ist die Zeile in props.rows enthalten, siehe Debug Info Kontextmenü unten -->
                        <!-- Zugriff auf Columns in diesem Fall ist möglich wie oben: props.row["bauinformationsTyp"], allerdings ist ides statisch, nicht in Abhängigkeit von Mausposition   -->
                        <!-- ================================================================================================================================ -->
                        <q-menu touch-position context-menu>
                          <!-- HINWEIS: v-model="props.row['bauinformationsTyp']" am <q-list> entfernt, unnötig oder gar falsch! -->
                          <q-list dense style="min-width: 100px">
                            <div v-if="localStore.state.debugMode">
                              Debug-Info Kontextmenü:
                              <q-separator />
                              props.row: {{ props.row }}
                              <q-separator />
                              props.selected: {{ props.selected }}
                              <!-- ACHTUNG: props.selected ist UNDEFINED - anders als in den QTables für Baueigenschaften in baustoffe.vue und baueinheiten.vue!!! -->
                              <q-separator />
                            </div>
                            <!-- NEU: Hier dedizierte neue Funktion oeffneExternenLinkAusgewaehlteBauinformationAusQTable()}zum Öffnen des externen Links: -->
                            <!-- ACHTUNG: selectedRowsTableBauinformationen = props.row als erste Aktion bei @click unten funktioniert so NICHT!!! -->
                            <!--          Es macht zwar die Zuweisung wie gewünscht, aber die selected Row in der QTable wird dadurch alleine noch nicht reaktiv geändert! -->
                            <!--          Erst reaktives push auf den Array führt dazu, dass die selected Row updated wird (sichtbar durch checked Checkmark in der ersten Spalte der QTable) -->
                            <!-- HINWEIS: In den QTables für die Baueigenschaften in baustoffe.vue und baueinheiten.vue!!! wird die Row einfach per props.selected = true neu ausgewählt, -->
                            <!--          dies funktioniert hier in der bzgl. VSlots anders aufgebauten QTable für Bauinformationen so nicht, props.selected ist UNDEFINED (siehe oben) -->
                            <!-- HINWEIS: Die Abfrage if (selectedRowsTableBauinformationen[0].externerLink == null) ist auch true, wenn das Feld undefined ist (nicht der Fall bei === null) -->
                            <!-- NEU: Disabling, wenn Link nicht vorhanden ist. ACHTUNG: Link ist undefined, wenn nicht vorhanden, daher Prüfung auf "==null -->
                            <q-item
                              :disable="
                                props.row.externerLink == null ||
                                  props.row.externerLink === ''
                              "
                              clickable
                              v-close-popup
                              @click="
                                selectedRowsTableBauinformationen = [];
                                selectedRowsTableBauinformationen.push(
                                  props.row
                                );
                                checkAusgewaehlteBauinformationAusQTableAufExternenLink();
                                if (
                                  selectedRowsTableBauinformationen[0]
                                    .externerLink == null
                                ) {
                                  confirmHinweisAuswaehlenBauinformationAusQTableMitExternemLink = true;
                                } else {
                                  oeffneExternenLinkAusgewaehlteBauinformationAusQTable();
                                }
                              "
                            >
                              <q-item-section
                                >Bauinformation auswählen und externen Link
                                öffnen</q-item-section
                              >
                            </q-item>
                            <!-- ------------------------------------------------------------------------------------------------ -->
                            <!-- NEU: Kontextmenü zum Öffnen eines OneDrive-Links: -->
                            <q-item
                              :disable="
                                props.row.oneDriveLink == null ||
                                  props.row.oneDriveLink === ''
                              "
                              clickable
                              v-close-popup
                              @click="
                                selectedRowsTableBauinformationen = [];
                                selectedRowsTableBauinformationen.push(
                                  props.row
                                );
                                checkAusgewaehlteBauinformationAusQTableAufOneDriveLink();
                                if (
                                  selectedRowsTableBauinformationen[0]
                                    .oneDriveLink == null
                                ) {
                                  confirmHinweisAuswaehlenBauinformationAusQTableMitOneDriveLink = true;
                                } else {
                                  oeffneOneDriveLinkAusgewaehlteBauinformationAusQTable();
                                }
                              "
                            >
                              <q-item-section
                                >Bauinformation auswählen und OneDrive-Link
                                öffnen</q-item-section
                              >
                            </q-item>
                            <!-- ACHTUNG: selectedRowsTableBauinformationen = props.row als erste Aktion bei @click unten funktioniert so NICHT!!! -->
                            <!--          Es macht zwar die Zuweisung wie gewünscht, aber die selected Row in der QTable wird dadurch alleine noch nicht reaktiv geändert! -->
                            <!--          Erst reaktives push auf den Array führt dazu, dass die selected Row updated wird (sichtbar durch checked Checkmark in der ersten Spalte der QTable) -->
                            <!-- HINWEIS: In den QTables für die Baueigenschaften in baustoffe.vue und baueinheiten.vue!!! wird die Row einfach per props.selected = true neu ausgewählt, -->
                            <!--          dies funktioniert hier in der bzgl. VSlots anders aufgebauten QTable für Bauinformationen so nicht, props.selected ist UNDEFINED (siehe oben) -->
                            <!-- ACHTUNG: Die Logik für internen Link hier ist anders als für externen Link oben, die check-Funktion öffnet ggf. gleich den internen Link: -->
                            <!-- ACHTUNG: Dies funktioniert aktuell nur für Links zu "frisch" hochgeladenen Dokumenten -->
                            <!--          Es entspricht dem Button "Internen Link öffnen (Cloud)"                         -->
                            <!-- NEU: Disabling, wenn Link nicht vorhanden ist. ACHTUNG: Link ist undefined, wenn nicht vorhanden, daher Prüfung auf "==null -->
                            <q-item
                              :disable="
                                props.row.internerLink == null ||
                                  props.row.internerLink === ''
                              "
                              clickable
                              v-close-popup
                              @click="
                                selectedRowsTableBauinformationen = [];
                                selectedRowsTableBauinformationen.push(
                                  props.row
                                );
                                checkAusgewaehlteBauinformationAusQTableAufInternenLink();
                              "
                            >
                              <q-item-section
                                >Bauinformation auswählen und internen Link
                                öffnen</q-item-section
                              >
                            </q-item>
                            <!--
                                  <q-separator />
                                  <q-item clickable v-close-popup>
                                    <q-item-section>Weitere Aktion</q-item-section>
                                  </q-item>
                                  <q-item-section side>
                                    <q-icon name="keyboard_arrow_right" />
                                  </q-item-section>
                                -->
                          </q-list>
                        </q-menu>
                        <!-- ENDE CODE FÜR KONTEXTMENÜ -->
                      </template>
                      <!-- =================================================================================================================================== -->
                      <!-- START spezieller Testcode mit v-slot für Spalte "Autoren" - dort (disabled) QSelect statt regulärem Textfeld -->
                      <!-- Wenn dieser Code disabled wird, werden die Autoren in einem regulären Textfeld angezeigt! -->
                      <template
                        v-slot:body-cell-benutzerKennungenAutoren="props"
                      >
                        <q-td :props="props">
                          <q-select
                            :value="props.row.benutzerKennungenAutoren"
                            :options="props.row.benutzerKennungenAutoren"
                            options-dense
                            dense
                            :multiple="true"
                            hide-bottom-space
                            class="font-size-small"
                            :disable="true"
                          />
                        </q-td>
                      </template>
                      <!-- ----------------------------------------------------------------------------------------- -->
                      <!-- Alternativer Test-code, der nur die ersten 3 Array-Elemente ausgibt -->
                      <!-- Funktioniert per Test auch bei leerem Array-Feld -->
                      <!-- Wenn dieser Code disabled wird, werden die Autoren in einem regulären Textfeld angezeigt! -->
                      <!--
                      <template v-slot:body-cell-benutzerKennungenAutoren="props">
                        <q-td :props="props">
                          {{ props.row.benutzerKennungenAutoren[0] }}
                          {{ props.row.benutzerKennungenAutoren[1] }}
                          {{ props.row.benutzerKennungenAutoren[2] }}
                        </q-td>
                      </template>
                      -->
                      <!-- ========================================================================================================================================= -->
                      <!-- Es geht weiter mit altem Code zur speziellen Formatierung der Boolean-Spalten für den Normtyp mit Checkboxen: -->
                      <!----------------------------------------------------------------------------------------------------------------------------------------------->
                      <!-- Vorschlag aus https://forum.quasar-framework.org/topic/4127/how-to-display-and-maybe-later-edit-checkboxes-for-boolean-values-in-qtable/2 -->
                      <!-- Nested, disabled q-checkbox Konponente in den "Boolean" Spalten - theoretisch bessere Lösung als simples format mit Unicode               -->
                      <!----------------------------------------------------------------------------------------------------------------------------------------------->
                      <!-- Temporär auskommentiert, weil mit den q-checkboxes und q-toggles die Zeilenhöhe größer wird -->
                      <!-- Mittels style="transform: scale(0.7,0.7);" (bei q-toggles) -->
                      <!-- bzw.    style="transform: scale(0.7);" (bei q-checkboxes) -->
                      <!-- lässt sich zwar per CSS die Größe verkleinern, aber die Zeilenhöhe von q-table bleibt davon leider unberührt!!! -->
                      <!-- Ein CSS height Attribut an q-td hat per Test auch keinen Einfluss: <q-td :props="props" style="{height: '40px'}"> -->
                      <!-- LÖSUNG/WICHTIG: "dense" Property an q-checkbox auch für die erste Spalte zur Selektion einer Row führt schließlich zu "dense" q-table Rows!!! -->
                      <template v-slot:body-cell-grundNorm="props">
                        <q-td :props="props" :auto-width="true">
                          <q-checkbox
                            v-model="props.row.grundNorm"
                            disable
                            dense
                            color="grey-9"
                          />
                        </q-td>
                      </template>
                      <template v-slot:body-cell-terminologieNorm="props">
                        <q-td :props="props" :auto-width="true">
                          <q-checkbox
                            v-model="props.row.terminologieNorm"
                            disable
                            dense
                            color="grey-9"
                          />
                        </q-td>
                      </template>
                      <template v-slot:body-cell-prüfNorm="props">
                        <q-td :props="props" :auto-width="true">
                          <q-checkbox
                            v-model="props.row.prüfNorm"
                            disable
                            dense
                            color="grey-9"
                          />
                        </q-td>
                      </template>
                      <template v-slot:body-cell-produktNorm="props">
                        <q-td :props="props" :auto-width="true">
                          <q-checkbox
                            v-model="props.row.produktNorm"
                            disable
                            dense
                            color="grey-9"
                          />
                        </q-td>
                      </template>
                      <template v-slot:body-cell-verfahrensNorm="props">
                        <q-td :props="props" :auto-width="true">
                          <q-checkbox
                            v-model="props.row.verfahrensNorm"
                            disable
                            dense
                            color="grey-9"
                          />
                        </q-td>
                      </template>
                      <template v-slot:body-cell-dienstleistungsNorm="props">
                        <q-td :props="props" :auto-width="true">
                          <q-checkbox
                            v-model="props.row.dienstleistungsNorm"
                            disable
                            dense
                            color="grey-9"
                          />
                        </q-td>
                      </template>
                      <template v-slot:body-cell-schnittstellenNorm="props">
                        <q-td :props="props" :auto-width="true">
                          <q-checkbox
                            v-model="props.row.schnittstellenNorm"
                            disable
                            dense
                            color="grey-9"
                          />
                        </q-td>
                      </template>
                      <template v-slot:body-cell-deklarationsNorm="props">
                        <q-td :props="props" :auto-width="true">
                          <q-checkbox
                            v-model="props.row.deklarationsNorm"
                            disable
                            dense
                            color="grey-9"
                          />
                        </q-td>
                      </template>
                      <template v-slot:body-cell-fachbereichsNorm="props">
                        <q-td :props="props" :auto-width="true">
                          <q-checkbox
                            v-model="props.row.fachbereichsNorm"
                            disable
                            dense
                            color="grey-9"
                          />
                        </q-td>
                      </template>
                      <template v-slot:body-cell-werkNorm="props">
                        <q-td :props="props" :auto-width="true">
                          <q-checkbox
                            v-model="props.row.werkNorm"
                            disable
                            dense
                            color="grey-9"
                          />
                        </q-td>
                      </template>
                    </q-table>
                  </div>
                  <div
                    class="row full-width q-pb-none q-pl-xs q-pr-xs q-pt-xs q-col-gutter-xs"
                  >
                    <div class="col-md-4 col-12 text-caption">
                      Aktionen für Bauinformationen &nbsp;
                      {{ displayRightArrow }}
                      <br />
                      <!-- &nbsp; -->
                      Mit &nbsp;
                      <q-checkbox
                        v-model="alwaysOn"
                        disable
                        dense
                        color="primary"
                      />
                      in erster Spalte Bauinformation auswählen. Alternativ mit
                      rechter Maustaste Kontextmenü aufrufen.
                    </div>
                    <div class="col-md-2 col-12">
                      <!-- NEU: class="stretch full-width" -->
                      <!-- ALT: style="width: 90%" -->
                      <q-btn
                        :href="getSelectedExternerLinkTableBauinformationen"
                        type="a"
                        target="_blank"
                        class="stretch full-width"
                        label="Externen Link öffnen"
                        color="purple-4"
                        glossy
                        no-caps
                        @click="
                          checkAusgewaehlteBauinformationAusQTableAufExternenLink()
                        "
                        :disable="computeExternerLinkTableBauinformationen"
                      />
                    </div>
                    <div class="col-md-2 col-12">
                      <!-- NEU: class="stretch full-width" -->
                      <!-- ALT: style="width: 90%" -->
                      <q-btn
                        :href="getSelectedOneDriveLinkTableBauinformationen"
                        type="a"
                        target="_blank"
                        class="stretch full-width"
                        label="OneDrive-Link öffnen"
                        color="light-blue-7"
                        glossy
                        no-caps
                        @click="
                          checkAusgewaehlteBauinformationAusQTableAufOneDriveLink()
                        "
                        :disable="computeOneDriveLinkTableBauinformationen"
                      />
                    </div>
                    <div class="col-md-2 col-12">
                      <!-- NEU: Für Heroku Upload/Download -->
                      <!-- Kein :href="getSelectedInternerAusgewaehlteBauinformationen" mehr, sondern Anzeige des internen Links mit in die @click-Methode verlagert -->
                      <!-- ALT: class="stretch full-width" -->
                      <!-- NEU: style="width: 90%" -->
                      <q-btn
                        type="a"
                        target="_blank"
                        class="row stretch full-width"
                        label="Internen BIM.click-Link öffnen"
                        color="light-green"
                        glossy
                        no-caps
                        @click="
                          checkAusgewaehlteBauinformationAusQTableAufInternenLink()
                        "
                        :disable="computeInternerLinkTableBauinformationen"
                      />
                    </div>
                    <!-- ALT: -->
                    <!--
                    <div class="col-2">
                      <q-btn
                        :href="getSelectedInternerLinkTableBauinformationen"
                        type="a"
                        target="_blank"
                        label="Internen Link öffnen"
                        color="light-green"
                        glossy
                        no-caps
                        @click="
                          checkAusgewaehlteBauinformationAusQTableAufInternenLink()
                        "
                        :disable="computeSelectedRowsTableBauinformationen"
                      />
                    </div>
                    -->
                    <div class="col-md-2 col-12">
                      <!-- ALT: class="stretch full-width" -->
                      <!-- NEU: style="width: 90%" -->
                      <q-btn
                        :href="getSelectedInternerLinkTableBauinformationen"
                        type="a"
                        target="_blank"
                        class="row stretch full-width"
                        label="Internen BIM.click-Link öffnen (Test)"
                        color="light-green"
                        glossy
                        no-caps
                        :disable="computeInternerLinkTableBauinformationen"
                      >
                        <q-tooltip
                          :delay="1000"
                          :offset="[0, 10]"
                          max-width="500px"
                          content-class="bg-secondary text-white text-caption shadow-4"
                        >
                          Nur für Tests mit statisch im Download-Verzeichnis
                          gespeicherten Dateien (an Stelle der Schaltfläche
                          daneben)
                        </q-tooltip>
                      </q-btn>
                    </div>
                  </div>
                  <q-separator />
                  <div
                    class="row full-width q-pt-xs q-pl-xs q-pr-xs q-pb-xs q-col-gutter-xs"
                  >
                    <!--
                    <div class="col-3">
                    </div>
                    -->
                    <div class="col-md-8 col-12">
                      <q-badge
                        v-if="localStore.state.debugMode"
                        color="secondary"
                        multi-line
                      >
                        selectModelBauinformationenAusgewaehlteBaueinheit:
                        {{ selectModelBauinformationenAusgewaehlteBaueinheit }}
                      </q-badge>
                      <!-- TODO: input-debounce-Wert justieren, siehe https://quasar.dev/vue-components/input#Debouncing-model -->
                      <!-- ACHTUNG: Ohne option-value="bauinformationsBezeichnung" wird erwartet, dass in den Options eine -->
                      <!-- Property namens "value" vorhanden ist, die dann als Wert für die ausgewählte Option genommen wird!!! -->
                      <!-- In den Testdaten (const selectBauinformationenOptions) war eine solche Property ursprünglich vorhanden, -->
                      <!-- nicht aber in den Bauinformationen selbst -->
                      <!-- Daher funktionierte dieser Testcode ursprünglich auch ohne option-value="bauinformationsBezeichnung"!!! -->
                      <!-- Mittlerweile value: auch in selectBauinformationenOptions auskommentiert und -->
                      <!-- option-value="bauinformationsBezeichnung" unten hinzugefügt -->
                      <!-- ACHTUNG: Das q-select standout Attribut hier verhält sich etwas anders als die sonstigen standouts an q-inputs -->
                      <!-- Daher standout="bg-teal-4 text-black" plus input-class="text-white" -->

                      <!-- ACHTUNG: @new-value="createSelectValueBauinformationenAusgewaehlteBaueigenschaft" -->
                      <!--          OHNE "()" beim Funktionsaufruf, sonst mysteriöser Fehler: -->
                      <!--          "[Vue warn]: Error in v-on handler: 'TypeError: Cannot read property 'length' of undefined' -->
                      <!--          Ohne "()" bedeutet, dass die nativen Parameter des @new-value Events verwendet werden beim -->
                      <!--          Aufruf der Funktion, siehe -->
                      <!-- https://forum.quasar-framework.org/topic/4696/solved-error-in-q-select-with-filtering-and-adding-to-menu-aka-to-use-or-not-to-use/4 -->
                      <!-- ================================================================================================================== -->
                      <!-- ALT: style="width:80%"                                                                                             -->
                      <!--      Verhinderte in früherer Version, dass das QSelect mit QButton rechts über die QTable hinausragt               -->
                      <!-- ACHTUNG: War aber die Ursache von Problemen zusammen mit dem "Speichern"-Button im After-VSlot                     -->
                      <!--          Daher dieses entfernt, und das ganze QSelect zusammen mit dem "Speichern"-Button in eigene Row verschoben -->
                      <!-- ================================================================================================================== -->
                      <!-- TODO #257: Eines der disables hier warf Vue Warning "vue.runtime.esm.js?5593:619 [Vue warn]: -->
                      <!--            Invalid prop: type check failed for prop "disable". Expected Boolean, got String with value "" -->
                      <!--            Es handelte sich nicht um das :disable am q-select hier, sondern um das am q-btn weiter unten!!! -->
                      <!--            Ursache war disable statt :disable, fixed -->
                      <q-select
                        dense
                        :disable="
                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                        "
                        square
                        bg-color="teal-2"
                        standout="bg-teal-4 text-black"
                        input-class="text-white"
                        filled
                        v-model="
                          selectModelBauinformationenAusgewaehlteBaueinheit
                        "
                        :options="
                          selectFilterOptionsBauinformationenAusgewaehlteBaueinheit
                        "
                        option-value="bauinformationsBezeichnung"
                        label="Der Baueinheit zugeordnete Bauinformationen auswählen/abwählen"
                        stack-label
                        use-chips
                        :multiple="true"
                        options-selected-class="text-primary"
                        options-dense
                        use-input
                        input-debounce="0"
                        @new-value="
                          createSelectValueBauinformationenAusgewaehlteBaueinheit
                        "
                        @filter="
                          selectFilterFunctionBauinformationenAusgewaehlteBaueinheit
                        "
                        bottom-slots
                        @focus="
                          showHintSelectBauinformationenAusgewaehlteBaueinheit = true
                        "
                        @blur="
                          showHintSelectBauinformationenAusgewaehlteBaueinheit = false
                        "
                      >
                        <!-- Zu den Icons siehe https://quasar.dev/vue-components/select#Decorators - erfordert "bottom-slots" Prop am q-select  -->
                        <template
                          v-slot:append
                          v-if="
                            selectModelBauinformationenAusgewaehlteBaueinheit
                          "
                        >
                          <q-icon name="search" @click.stop />
                          <!-- NEU: Statt "clearable" Prop am q-select expliziter Cancel-Icon - erlaubt es, dessen Color zu setzen -->
                          <!-- Vorlage: https://quasar.dev/vue-components/select#Clearable -->
                          <q-icon
                            name="cancel"
                            @click.stop="
                              selectModelBauinformationenAusgewaehlteBaueinheit = []
                            "
                            class="cursor-pointer"
                            color="primary"
                          />
                          <!-- ACHTUNG: TODO - Muss oben leerer Array sein??? -->
                        </template>
                        <template v-slot:after>
                          <!-- Ursprünglich war hier der Button "Speichern" im After-VSlot des QSelects, diesen verschoben im Code nach unten -->
                        </template>
                        <!-- <template v-slot:hint> -->
                        <!-- NEU: Hint nur anzeigen, wenn das q-select Fokus hat -->
                        <!-- Per v-if="showHintSelectBauinformationenAusgewaehlteBaueinheit" und native Vue Events: -->
                        <!-- @focus="showHintSelectBauinformationenAusgewaehlteBaueinheit=true" -->
                        <!-- @blur="showHintSelectBauinformationenAusgewaehlteBaueinheit=false" -->
                        <template
                          v-slot:hint
                          v-if="
                            showHintSelectBauinformationenAusgewaehlteBaueinheit
                          "
                        >
                          <ul class="q-pl-xs">
                            <li>
                              <strong>Filtern:</strong> Eine
                              Bauinformationsbezeichnung (z.B. "Norm > DIN > EN
                              > 13164") oder einen Bauinformationsanzeigetext
                              (z.B. "Datenblatt") als Filtertext in das
                              Eingabefeld eingeben. Auch unvollständige Angaben
                              (z.B. "Datenbl") sind möglich. Dies filtert die im
                              Dropdown-Menü angezeigten Optionen.
                            </li>

                            <li>
                              <strong>Auswählen:</strong> Der ausgewählten
                              Baueinheit zugeordnete Bauinformationen im
                              Dropdown-Menü auswählen.
                            </li>
                            <li>
                              <strong>Abwählen:</strong> Ausgewählte
                              Bauinformationen können mit
                              <q-icon
                                name="cancel"
                                color="primary"
                              />&nbsp;abgewählt werden.
                            </li>
                            <li>
                              Zum
                              <strong>Speichern:</strong> Schaltfläche
                              "Zugeordnete Bauinformationen speichern" drücken.
                            </li>
                          </ul>
                          <!-- <br /> <br /> <br /> -->
                          <!-- TODO: Um vertikalen Scrollbalken zu verhindern, funktioniert nicht -->
                        </template>
                        <template v-slot:selected-item="scope">
                          <q-chip
                            removable
                            dense
                            @remove="scope.removeAtIndex(scope.index)"
                            :tabindex="scope.tabindex"
                            color="primary"
                            text-color="white"
                            class="q-ma-xs shadow-4"
                          >
                            <!-- ALT: -->
                            <!-- {{ scope.opt.bauinformationsBezeichnung }} -->
                            <!-- NEU: Long Label Truncation, mit Tooltip der vollen Bezeichnung, mittels spezieller CSS Class "ellipsis": -->
                            <!-- Damit Truncation für lange Texte an QChip - Vorlage: https://quasar.dev/vue-components/chip#Example--Long-label-truncation -->
                            <div class="ellipsis">
                              {{ scope.opt.bauinformationsBezeichnung }}
                              <q-tooltip
                                :delay="1000"
                                :offset="[0, 10]"
                                max-width="500px"
                                content-class="bg-secondary text-white text-caption shadow-4"
                                >{{
                                  scope.opt.bauinformationsAnzeigeText
                                }}</q-tooltip
                              >
                            </div>
                            <!-- <q-avatar color="secondary" text-color="white" :icon="scope.opt.icon" /> -->
                            <!-- scope.opt.bauinformationsBezeichnung -->
                          </q-chip>
                        </template>

                        <template v-slot:option="scope">
                          <q-item
                            v-bind="scope.itemProps"
                            v-on="scope.itemEvents"
                          >
                            <!--
                                <q-item-section avatar>
                                  <q-icon :name="scope.opt.icon" />
                                </q-item-section>
                                -->
                            <q-item-section>
                              <q-item-label
                                v-html="scope.opt.bauinformationsBezeichnung"
                              />
                              <!-- NEU: Hier bauinformationsAnzeigeText statt bauinformationsTyp anzeigen: -->
                              <q-item-label caption>{{
                                scope.opt.bauinformationsAnzeigeText
                              }}</q-item-label>
                            </q-item-section>
                          </q-item>
                        </template>
                      </q-select>
                    </div>
                    <div class="col-md-4 col-12">
                      <!-- ACHTUNG: Am folgenden q-btn kann type="submit" bleiben, da nicht Teil eines q-forms!!! -->
                      <!-- Fehler #257: Eines der disables hier warf Vue Warning "vue.runtime.esm.js?5593:619 [Vue warn]: -->
                      <!--              Invalid prop: type check failed for prop "disable". Expected Boolean, got String with value "" -->
                      <!--              Es handelte sich nicht um das :disable am q-select oben, sondern um das am q-btn hier!!! -->
                      <!--              Ursache war disable statt :disable, fixed -->
                      <q-btn
                        class="stretch full-width"
                        :disable="
                          !benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
                        "
                        color="positive"
                        glossy
                        type="submit"
                        @click="
                          submitZugeordneteBauinformationenAusgewaehlteBaueinheit()
                        "
                        label="Zugeordnete Bauinformationen speichern"
                        no-caps
                      />
                    </div>
                  </div>
                  <!-- Eventuelle 2. Zeile mit Buttons, aktuell disabled -->
                  <!--
                      <div v-if="$q.screen.gt.xs" class="row full-width">
                        <div class="col-2"></div>
                        <div class="col-2"></div>
                        <div class="col-2"></div>
                        <div class="col-2"></div>
                        <div class="col-2"></div>
                        <div class="col-2"></div>
                      </div>
                      -->
                </div>
                <br />
                <br />
                <br />
                <!-- TODO: Workaround, um vertikalen Scrollbalken zu verhindern -->
                <!--***===================================== Ende Code aus Bauinformationen.vue ========================================-->
              </q-tab-panel>
              <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
              <!-- ================================================================================================== -->
              <!-- ACHTUNG: Hier class="q-pa-xs" oder "q-pa-none" zur Kontrolle des  Abstands zwischen den Tableisten -->
              <!-- ================================================================================================== -->
              <!-- NEU - QTabPanel für Bauinformationsprofile an Baueinheit: -->
              <q-tab-panel
                name="bauinformationsProfileTabBaueinheiten"
                class="q-pa-xs"
              >
                <!-- ============================================================================================================================= -->
                <!-- ACHTUNG: NEU - Für #505 könnte hier in diesem Fall refreshTreeBaueiheiten(true) aufgerufen (neuer optionaler Boolean-Parameter, -->
                <!-- welcher die Neubestimmung der Unter-Tabs für das Tab "Baueigenschaftsprofilformulare" nach einer Profilaktivierung auslöst!!! -->
                <!-- Per Tests allerdings unnötig, daher disabled -->
                <bauinformationsProfileTabBaustoffeUndBaueinheiten
                  :node="selectedNodeTreeBaueinheiten"
                  modus="Baueinheit"
                  @refresh-request-bauinformations-profil="reloadTreeWrapper()"
                />
                <!-- ALT: refreshRequest -->
              </q-tab-panel>
              <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
              <!-- ================================================================================================== -->
              <!-- ACHTUNG: Hier class="q-pa-xs" oder "q-pa-none" zur Kontrolle des  Abstands zwischen den Tableisten -->
              <!-- ================================================================================================== -->
              <q-tab-panel
                name="baueigenschaftsProfileTabBaueinheiten"
                class="q-pa-xs"
              >
                <!-- ============================================================================================================================= -->
                <!-- ACHTUNG: NEU - Für #505 könnte hier in diesem Fall refreshTreeBaueiheiten(true) aufgerufen (neuer optionaler Boolean-Parameter, -->
                <!-- welcher die Neubestimmung der Unter-Tabs für das Tab "Baueigenschaftsprofilformulare" nach einer Profilaktivierung auslöst!!! -->
                <!-- Per Tests allerdings unnötig, daher disabled -->
                <baueigenschaftsProfileTabBaustoffeUndBaueinheiten
                  :node="selectedNodeTreeBaueinheiten"
                  modus="Baueinheit"
                  @refresh-request-baueigenschafts-profil="reloadTreeWrapper()"
                />
                <!-- ALT: refreshRequest -->
              </q-tab-panel>
              <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
              <q-tab-panel
                class="q-pa-xs"
                name="layoutGesteuertesGenerischesProfilFormularTabBaueinheiten"
              >
                <!-- NEU: Hier testweise das layoutgesteuerte generische Profilformular anzeigen -->
                <!-- Die Prop für die Profilbezeichnung kann hier variiert werden für das anzuzeigende Profil, z.B. profilBezeichnung="Baueinheit > Raum", etc. -->
                <layoutGesteuertesGenerischesBaueigenschaftsProfilFormular
                  profilBezeichnung="Baueinheit > Bauvorhaben"
                  baum="Bauvorhabenbaum"
                  :nodes="nodesTreeBaueinheiten"
                  :selectedNode="selectedNodeTreeBaueinheiten"
                  :benutzerDarfBearbeitenSelectedNode="
                    benutzerDarfBearbeitenSelectedNodeTreeBaueinheiten
                  "
                  @refresh-request-baueigenschafts-profil="reloadTreeWrapper()"
                />
              </q-tab-panel>
              <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
              <q-tab-panel name="debugBauvorhabenBaumTabBaueinheiten">
                <div>
                  <q-btn
                    label="Test Button"
                    glossy
                    no-caps
                    @click="wechselndeTestMethode()"
                  />
                </div>
                <br />
                <div v-if="localStore.state.debugMode">
                  selectedKeyTreeBaueinheiten:
                  {{ selectedKeyTreeBaueinheiten }}
                  <br />
                  <br />
                  expandedKeysTreeBaueinheiten:
                  {{ expandedKeysTreeBaueinheiten }}
                  <br />
                  <br />
                  $refs.treeBaueinheiten.lazy:
                  {{ $refs.treeBaueinheiten.lazy }}
                  <!-- lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"} -->
                  <br />
                  <br />
                  <q-separator />
                  <br />
                  selectedNodeTreeBaueinheiten (computed):
                  <!-- NEU - Formatierung mit stringify -->
                  <!-- Vorlage: https://stackoverflow.com/questions/45539735/prettify-json-string-vuejs2-webpack -->
                  <!-- Erfordert Vue v-html und computed Property, die JSON.stringify aufruft! -->
                  <pre v-html="stringifySelectedNodeTreeBaueinheiten"></pre>
                  <!-- ALT: -->
                  <!-- {{ selectedNodeTreeBaueinheiten }} -->
                </div>
              </q-tab-panel>
              <!-- --------------------------------------------------------------------------------------------------------------------------------- -->
              <q-tab-panel name="debugZugeordneteBaustoffeTabBaueinheiten">
                <div v-if="localStore.state.debugMode">
                  <!-- NEU - Formatierung teilweise mit stringify -->
                  <!-- Vorlage: https://stackoverflow.com/questions/45539735/prettify-json-string-vuejs2-webpack -->
                  <!-- Erfordert Vue v-html und computed Property, die JSON.stringify aufruft! -->
                  selectedKeyTreeBaueinheiten:
                  {{ selectedKeyTreeBaueinheiten }}
                  <br />
                  <br />
                  selectedKeyTreeBaustoffe:
                  {{ selectedKeyTreeBaustoffe }}
                  <br />
                  <br />
                  expandedKeysTreeBaustoffe:
                  {{ expandedKeysTreeBaustoffe }}
                  <br />
                  <br />
                  tickedKeysTreeBaustoffe:
                  {{ tickedKeysTreeBaustoffe }}
                  <br />
                  <br />
                  <q-separator />
                  <br />
                  selectedNodeTreeBaueinheiten.zugeordneteBaustoffe:
                  <!-- ALT: -->
                  <!-- {{ selectedNodeTreeBaueinheiten.zugeordneteBaustoffe }} -->
                  <!-- NEU: -->
                  <pre v-html="stringifyZugeordneteBaustoffe"></pre>
                  <q-separator />
                  <br />
                  nodesTreeBaustoffe:
                  <!-- ALT: -->
                  <!-- {{ nodesTreeBaustoffe }} -->
                  <!-- NEU: -->
                  <pre v-html="stringifyNodesTreeBaustoffe"></pre>
                  <!-- dataHierarchyBaustoffe - disabled, nur für QHierarchy:-->
                  <!--
                    <br />
                    <br />
                    dataHierarchyBaustoffe:
                    {{ dataHierarchyBaustoffe}}
                    -->
                </div>
              </q-tab-panel>
            </q-tab-panels>
            <!-- </q-card> -->
          </div>
          <div v-else>
            <q-card class="q-pa-sm">
              <ul>
                <li>
                  Bitte links im Bauvorhabenbaum eine
                  <strong>Baueinheit</strong> (d.h. einen
                  <strong>Knoten</strong> im Baum)
                  <strong>auswählen.</strong>
                </li>
                <li>
                  Dazu mit der linken Maustaste bzw. dem Finger auf das graue
                  Dreieck an einer Baueinheit klicken, um deren Knoten im Baum
                  <strong>auf- bzw. zuzuklappen.</strong>
                </li>
                <li>
                  Um eine bestimmte Baueinheit <strong>auszuwählen,</strong> mit
                  der linken Maustaste bzw. dem Finger auf deren farbiges Icon
                  oder deren Text klicken.
                </li>
                <li>
                  Die so <strong>ausgewählte Baueinheit</strong> wird dann an
                  deren Knoten im Baum
                  <span style="color: #ffffff; background-color: #1976d2">
                    <strong> &nbsp;farblich markiert.&nbsp; </strong>
                  </span>
                </li>
                <li>
                  Zusätzlich werden dann hier rechts vom Bauvorhabenbaum alle
                  relevanten <strong>Planungsinformationen</strong> für die
                  ausgewählte Baueinheit angezeigt.
                </li>
                <li>
                  Mit der rechten Maustaste bzw. durch Drücken mit dem Finger
                  kann ein <strong>Kontextmenü</strong> für eine Baueinheit im
                  Baum angezeigt werden. Dies muss nicht die ausgewählte
                  Baueinheit sein.
                </li>
                <li>
                  <strong>Hinweis:</strong> Die
                  <strong>anteilige Breite</strong> der Anzeige für den
                  Bauvorhabenbaum links und die Planungsinformationen rechts
                  kann durch Ziehen der senkrechten Trennlinie mit der linken
                  Maustaste bzw. dem Finger nach links oder rechts angepasst
                  werden.
                </li>
              </ul>
            </q-card>
          </div>
        </template>
      </q-splitter>
    </div>
    <!--</q-card> -->
    <!-- Verworfenener Dialog
    <q-dialog v-if="selectedNodeTreeBaueinheiten" v-model="addBaueigenschaftDialog">
      <q-card>
        <q-card-section>
          <div>Bitte die Bezeichnung der neuen Eigenschaft eingeben:</div>
          <q-input label="Baueigenschaftsbezeichnung" v-model="eigenschaftName" />
          <q-input label="Kennwert 1" v-model="eigenschaftKennwert1" />
        </q-card-section>

        <q-card-actions align="right">
          <q-btn flat label="Abbrechen" color="primary" no-caps v-close-popup />
          <q-btn
            flat
            label="Baueigenschaft anlegen"
            color="primary"
            @click="addBaueigenschaft()"
            no-caps
          />
        </q-card-actions>
      </q-card>
    </q-dialog>
    !-->
    <!-- ---------------------------------------------------------------------------------- -->
    <!-- NEU: Dialog für Umbenennung (Renaming) der Bezeichnung der ausgewählten Baueinheit: -->
    <q-dialog
      v-if="selectedNodeTreeBaueinheiten"
      v-model="renameSelectedBaueinheitDialog"
    >
      <!-- NEU: Quasar Internal Validation hier an diesem q-dialog angewendet - kann auch auf Forms angewendet werden! -->
      <!-- Siehe weitere Kommentare beim Dialog für Erzeugung einer neuen Baueinheit unten -->
      <div>
        <!-- WICHTIG: div-Wrapper für q-form!!! -->
        <q-form
          ref="formUmbenennenBaueinheitDialog"
          @submit="renameBaueinheit"
          @reset="resetRenameBaueinheit"
        >
          <!-- Für Validation, erfordert dieses q-form mit div-Wrapper inside q-dialog, das sonst überflüssig wäre -->
          <q-card>
            <q-card-section>
              <div>
                Bitte die neue Bezeichnung für die Baueinheit
                <strong
                  >"{{
                    selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                  }}"</strong
                >
                im Bauvorhabenbaum eingeben:
                <br />
                <br />
              </div>
              <q-input
                autofocus
                square
                bg-color="teal-2"
                standout="bg-teal-4 text-black"
                dense
                :clearable="true"
                :rules="[
                  v =>
                    v !== selectedNodeTreeBaueinheiten.baueinheitsBezeichnung ||
                    'Alte und neue Bezeichnung müssen unterschiedlich sein',
                  v =>
                    (v != null && v !== '') || 'Bezeichnung ist erforderlich',
                  v =>
                    (v.length > 0 && v.length <= 200) ||
                    'Bezeichnung darf höchstens 200 Zeichen lang sein'
                ]"
                lazy-rules
                hint="Unter den Geschwisterbaueinheiten im Bauvorhabenbbaum eindeutige Bezeichnung für die Baueinheit"
                hide-hint
                label="Bezeichnung der Baueinheit"
                v-model="geaenderteBezeichnungBaueinheit"
                @focus="
                  geaenderteBezeichnungBaueinheit =
                    selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                "
              />
            </q-card-section>
            <!-- ALT: align="right" -->
            <q-card-actions>
              <div class="row full-width q-col-gutter-xs q-pa-xs">
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    label="Abbrechen"
                    color="negative"
                    no-caps
                    v-close-popup
                  />
                </div>
                <!-- ACHTUNG: q-btn type="reset" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="reset"
                    label="Zurücksetzen"
                    color="deep-orange"
                    text-color="white"
                    no-caps
                  />
                </div>
                <!-- ACHTUNG: q-btn type="submit" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-6">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="submit"
                    label="Baueinheitsbezeichnung speichern"
                    color="positive"
                    no-caps
                  />
                </div>
              </div>
            </q-card-actions>
          </q-card>
        </q-form>
        <!-- Für Form Validation Tests statt q-dialog -->
      </div>
    </q-dialog>
    <!-- /Dialog für Umbenennung der ausgewählten Baueinheit -->
    <!-- -------------------------------------------------- -->
    <q-dialog
      v-if="selectedNodeTreeBaueinheiten"
      v-model="createNewBaueinheitDialog"
    >
      <!-- NEU: Quasar Internal Validation hier an diesem q-dialog angewendet - kann auch auf Forms angewendet werden! -->
      <!-- (Siehe https://quasar.dev/vue-components/input#Validation: Dort mit HTML <form> !!!) -->
      <!-- Siehe https://quasar.dev/vue-components/form#Usage: Dort mit <q-form> !!! -->

      <!-- HINWEISE für Validation: -->
      <!-- Speziell für Validation innerhalb von q-dialogs muss Folgendes beachtet werden: -->
      <!-- 1. ACHTUNG: Es muss ein <q-form> zwischen <q-dialog> und <q-card> eingefügt werden - Validation erfordert zwingend q-form!!! -->
      <!-- 2. ACHTUNG: Das <q-form> muss durch ein <div> gewrapped werden!!! Siehe Note auf https://quasar.dev/vue-components/dialog -->
      <!-- 3. <q-form @submit="createChildBaueinheit"> -->
      <!-- 4. <q-btn type="submit" -->
      <!-- 5. <q-form ref="formNeueBaueinheitDialog"> - damit kann in Methode manuell Validation und Reset Validation für das Feld ausgelöst werden, z.B. per: -->
      <!--     this.$refs.formNeueBaueinheitDialog.validate() -->
      <!--     this.$refs.formNeueBaueinheitDialog.resetValidation() -->
      <!-- 6. Das :clearable="true" am q-input erscheint nur, wenn das Feld schon gefüllt ist mit Input -->
      <!-- 7. Zusätzlich kann man selbst das Form/Feld zurücksetzen, durch den hinzugefügten Reset Button mit Methode, die resetValidation() auslöst:-->
      <!--    <q-btn type="reset"> und <q-form @reset="resetCreateChildBaueinheit" -->
      <!--    Ähnliches (ref plus Methode resetValidation() gibt es für q-input, siehe https://quasar.dev/vue-components/input#Validation -->
      <!-- 8. Die eigentlichen Validation Rules per rules=... am q-input spezifizieren -->

      <div>
        <!-- WICHTIG: div-Wrapper für q-form!!! -->
        <q-form
          ref="formNeueBaueinheitDialog"
          @submit="createChildBaueinheit"
          @reset="resetCreateChildBaueinheit"
        >
          <!-- Für Validation, erfordert dieses q-form mit div-Wrapper inside q-dialog, das sonst überflüssig wäre -->
          <q-card>
            <q-card-section>
              <div>
                Bitte die gewünschte Baueinheitsbezeichnung für die neue
                Kindbaueinheit der Baueinheit
                <strong
                  >"{{
                    selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                  }}"</strong
                >
                im Bauvorhabenbaum eingeben:
                <br />
                <br />
              </div>
              <q-input
                autofocus
                square
                bg-color="teal-2"
                standout="bg-teal-4 text-black"
                dense
                :clearable="true"
                :rules="[
                  v =>
                    (v != null && v !== '') || 'Bezeichnung ist erforderlich',
                  v =>
                    (v.length > 0 && v.length <= 200) ||
                    'Bezeichnung darf höchstens 200 Zeichen lang sein'
                ]"
                lazy-rules
                hint="Unter den Geschwisterbaueinheiten im Bauvorhabenbaum eindeutige Bezeichnung für die neue Kindbaueinheit"
                hide-hint
                label="Bezeichnung der neuen Kindbaueinheit"
                v-model="bezeichnungNeueBaueinheit"
              />
            </q-card-section>
            <q-card-actions>
              <div class="row full-width q-col-gutter-xs q-pa-xs">
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    label="Abbrechen"
                    color="negative"
                    no-caps
                    v-close-popup
                  />
                </div>
                <!-- ACHTUNG: q-btn type="reset" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="reset"
                    label="Zurücksetzen"
                    color="deep-orange"
                    text-color="white"
                    no-caps
                  />
                </div>
                <!-- ACHTUNG: q-btn type="submit" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-6">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="submit"
                    label="Kindbaueinheit neu anlegen"
                    color="positive"
                    no-caps
                  />
                </div>
              </div>
            </q-card-actions>
          </q-card>
        </q-form>
        <!-- Für Form Validation Tests statt q-dialog -->
      </div>
    </q-dialog>
    <!-- --------------------------------------------------------------------------------------------------------------- -->
    <!-- NEU: QDialog für Anlegen Kindbaueinheit mit anschließender Aktivierung des Baueigenschaftsprofils "Baueinheit > Bauvorhaben" -->
    <q-dialog
      v-if="selectedNodeTreeBaueinheiten"
      v-model="createNewBaueinheitMitBauvorhabenProfilAktivierungDialog"
    >
      <!-- NEU: Quasar Internal Validation hier an diesem q-dialog angewendet - kann auch auf Forms angewendet werden! -->
      <!-- (Siehe https://quasar.dev/vue-components/input#Validation: Dort mit HTML <form> !!!) -->
      <!-- Siehe https://quasar.dev/vue-components/form#Usage: Dort mit <q-form> !!! -->

      <!-- HINWEISE für Validation: -->
      <!-- Speziell für Validation innerhalb von q-dialogs muss Folgendes beachtet werden: -->
      <!-- 1. ACHTUNG: Es muss ein <q-form> zwischen <q-dialog> und <q-card> eingefügt werden - Validation erfordert zwingend q-form!!! -->
      <!-- 2. ACHTUNG: Das <q-form> muss durch ein <div> gewrapped werden!!! Siehe Note auf https://quasar.dev/vue-components/dialog -->
      <!-- 3. <q-form @submit="createChildBaueinheit"> -->
      <!-- 4. <q-btn type="submit" -->
      <!-- 5. <q-form ref="formNeueBaueinheitDialog"> - damit kann in Methode manuell Validation und Reset Validation für das Feld ausgelöst werden, z.B. per: -->
      <!--     this.$refs.formNeueBaueinheitDialog.validate() -->
      <!--     this.$refs.formNeueBaueinheitDialog.resetValidation() -->
      <!-- 6. Das :clearable="true" am q-input erscheint nur, wenn das Feld schon gefüllt ist mit Input -->
      <!-- 7. Zusätzlich kann man selbst das Form/Feld zurücksetzen, durch den hinzugefügten Reset Button mit Methode, die resetValidation() auslöst:-->
      <!--    <q-btn type="reset"> und <q-form @reset="resetCreateChildBaueinheit" -->
      <!--    Ähnliches (ref plus Methode resetValidation() gibt es für q-input, siehe https://quasar.dev/vue-components/input#Validation -->
      <!-- 8. Die eigentlichen Validation Rules per rules=... am q-input spezifizieren -->

      <div>
        <!-- WICHTIG: div-Wrapper für q-form!!! -->
        <q-form
          ref="formNeueBaueinheitMitBauvorhabenProfilAktivierung"
          @submit="createChildBaueinheitMitBauvorhabenProfilAktivierung"
          @reset="resetCreateChildBaueinheitMitBauvorhabenProfilAktivierung"
        >
          <!-- Für Validation, erfordert dieses q-form mit div-Wrapper inside q-dialog, das sonst überflüssig wäre -->
          <q-card>
            <q-card-section>
              <div>
                Bitte die gewünschte Baueinheitsbezeichnung für die neue
                Kindbaueinheit der Baueinheit
                <strong
                  >"{{
                    selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                  }}"</strong
                >
                im Bauvorhabenbaum eingeben:
                <br />
                <br />
              </div>
              <q-input
                autofocus
                square
                bg-color="teal-2"
                standout="bg-teal-4 text-black"
                dense
                :clearable="true"
                :rules="[
                  v =>
                    (v != null && v !== '') || 'Bezeichnung ist erforderlich',
                  v =>
                    (v.length > 0 && v.length <= 200) ||
                    'Bezeichnung darf höchstens 200 Zeichen lang sein'
                ]"
                lazy-rules
                hint="Unter den Geschwisterbaueinheiten im Bauvorhabenbaum eindeutige Bezeichnung für die neue Kindbaueinheit"
                hide-hint
                label="Bezeichnung der neuen Kindbaueinheit"
                v-model="bezeichnungNeueBaueinheit"
              />
            </q-card-section>
            <q-card-actions>
              <div class="row full-width q-col-gutter-xs q-pa-xs">
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    label="Abbrechen"
                    color="negative"
                    no-caps
                    v-close-popup
                  />
                </div>
                <!-- ACHTUNG: q-btn type="reset" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="reset"
                    label="Zurücksetzen"
                    color="deep-orange"
                    text-color="white"
                    no-caps
                  />
                </div>
                <!-- ACHTUNG: q-btn type="submit" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-6">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="submit"
                    label="Kindbaueinheit neu anlegen und Profil für 'Bauvorhaben' dort aktivieren"
                    color="positive"
                    no-caps
                  />
                </div>
              </div>
            </q-card-actions>
          </q-card>
        </q-form>
        <!-- Für Form Validation Tests statt q-dialog -->
      </div>
    </q-dialog>
    <!-- --------------------------------------------------------------------------------------------------------------- -->
    <!-- NEU: QDialog für Anlegen Kindbaueinheit mit anschließender Aktivierung des Baueigenschaftsprofils "Baueinheit > Standort" -->
    <q-dialog
      v-if="selectedNodeTreeBaueinheiten"
      v-model="createNewBaueinheitMitStandortProfilAktivierungDialog"
    >
      <!-- NEU: Quasar Internal Validation hier an diesem q-dialog angewendet - kann auch auf Forms angewendet werden! -->
      <!-- (Siehe https://quasar.dev/vue-components/input#Validation: Dort mit HTML <form> !!!) -->
      <!-- Siehe https://quasar.dev/vue-components/form#Usage: Dort mit <q-form> !!! -->

      <!-- HINWEISE für Validation: -->
      <!-- Speziell für Validation innerhalb von q-dialogs muss Folgendes beachtet werden: -->
      <!-- 1. ACHTUNG: Es muss ein <q-form> zwischen <q-dialog> und <q-card> eingefügt werden - Validation erfordert zwingend q-form!!! -->
      <!-- 2. ACHTUNG: Das <q-form> muss durch ein <div> gewrapped werden!!! Siehe Note auf https://quasar.dev/vue-components/dialog -->
      <!-- 3. <q-form @submit="createChildBaueinheit"> -->
      <!-- 4. <q-btn type="submit" -->
      <!-- 5. <q-form ref="formNeueBaueinheitDialog"> - damit kann in Methode manuell Validation und Reset Validation für das Feld ausgelöst werden, z.B. per: -->
      <!--     this.$refs.formNeueBaueinheitDialog.validate() -->
      <!--     this.$refs.formNeueBaueinheitDialog.resetValidation() -->
      <!-- 6. Das :clearable="true" am q-input erscheint nur, wenn das Feld schon gefüllt ist mit Input -->
      <!-- 7. Zusätzlich kann man selbst das Form/Feld zurücksetzen, durch den hinzugefügten Reset Button mit Methode, die resetValidation() auslöst:-->
      <!--    <q-btn type="reset"> und <q-form @reset="resetCreateChildBaueinheit" -->
      <!--    Ähnliches (ref plus Methode resetValidation() gibt es für q-input, siehe https://quasar.dev/vue-components/input#Validation -->
      <!-- 8. Die eigentlichen Validation Rules per rules=... am q-input spezifizieren -->

      <div>
        <!-- WICHTIG: div-Wrapper für q-form!!! -->
        <q-form
          ref="formNeueBaueinheitMitStandortProfilAktivierung"
          @submit="createChildBaueinheitMitStandortProfilAktivierung"
          @reset="resetCreateChildBaueinheitMitStandortProfilAktivierung"
        >
          <!-- Für Validation, erfordert dieses q-form mit div-Wrapper inside q-dialog, das sonst überflüssig wäre -->
          <q-card>
            <q-card-section>
              <div>
                Bitte die gewünschte Baueinheitsbezeichnung für die neue
                Kindbaueinheit der Baueinheit
                <strong
                  >"{{
                    selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                  }}"</strong
                >
                im Bauvorhabenbaum eingeben:
                <br />
                <br />
              </div>
              <q-input
                autofocus
                square
                bg-color="teal-2"
                standout="bg-teal-4 text-black"
                dense
                :clearable="true"
                :rules="[
                  v =>
                    (v != null && v !== '') || 'Bezeichnung ist erforderlich',
                  v =>
                    (v.length > 0 && v.length <= 200) ||
                    'Bezeichnung darf höchstens 200 Zeichen lang sein'
                ]"
                lazy-rules
                hint="Unter den Geschwisterbaueinheiten im Bauvorhabenbaum eindeutige Bezeichnung für die neue Kindbaueinheit"
                hide-hint
                label="Bezeichnung der neuen Kindbaueinheit"
                v-model="bezeichnungNeueBaueinheit"
              />
            </q-card-section>
            <q-card-actions>
              <div class="row full-width q-col-gutter-xs q-pa-xs">
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    label="Abbrechen"
                    color="negative"
                    no-caps
                    v-close-popup
                  />
                </div>
                <!-- ACHTUNG: q-btn type="reset" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="reset"
                    label="Zurücksetzen"
                    color="deep-orange"
                    text-color="white"
                    no-caps
                  />
                </div>
                <!-- ACHTUNG: q-btn type="submit" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-6">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="submit"
                    label="Kindbaueinheit neu anlegen und Profil für 'Standort' dort aktivieren"
                    color="positive"
                    no-caps
                  />
                </div>
              </div>
            </q-card-actions>
          </q-card>
        </q-form>
        <!-- Für Form Validation Tests statt q-dialog -->
      </div>
    </q-dialog>
    <!-- --------------------------------------------------------------------------------------------------------------- -->
    <!-- NEU: QDialog für Anlegen Kindbaueinheit mit anschließender Aktivierung des Baueigenschaftsprofils "Baueinheit > Gebäude" -->
    <q-dialog
      v-if="selectedNodeTreeBaueinheiten"
      v-model="createNewBaueinheitMitGebaeudeProfilAktivierungDialog"
    >
      <!-- NEU: Quasar Internal Validation hier an diesem q-dialog angewendet - kann auch auf Forms angewendet werden! -->
      <!-- (Siehe https://quasar.dev/vue-components/input#Validation: Dort mit HTML <form> !!!) -->
      <!-- Siehe https://quasar.dev/vue-components/form#Usage: Dort mit <q-form> !!! -->

      <!-- HINWEISE für Validation: -->
      <!-- Speziell für Validation innerhalb von q-dialogs muss Folgendes beachtet werden: -->
      <!-- 1. ACHTUNG: Es muss ein <q-form> zwischen <q-dialog> und <q-card> eingefügt werden - Validation erfordert zwingend q-form!!! -->
      <!-- 2. ACHTUNG: Das <q-form> muss durch ein <div> gewrapped werden!!! Siehe Note auf https://quasar.dev/vue-components/dialog -->
      <!-- 3. <q-form @submit="createChildBaueinheit"> -->
      <!-- 4. <q-btn type="submit" -->
      <!-- 5. <q-form ref="formNeueBaueinheitDialog"> - damit kann in Methode manuell Validation und Reset Validation für das Feld ausgelöst werden, z.B. per: -->
      <!--     this.$refs.formNeueBaueinheitDialog.validate() -->
      <!--     this.$refs.formNeueBaueinheitDialog.resetValidation() -->
      <!-- 6. Das :clearable="true" am q-input erscheint nur, wenn das Feld schon gefüllt ist mit Input -->
      <!-- 7. Zusätzlich kann man selbst das Form/Feld zurücksetzen, durch den hinzugefügten Reset Button mit Methode, die resetValidation() auslöst:-->
      <!--    <q-btn type="reset"> und <q-form @reset="resetCreateChildBaueinheit" -->
      <!--    Ähnliches (ref plus Methode resetValidation() gibt es für q-input, siehe https://quasar.dev/vue-components/input#Validation -->
      <!-- 8. Die eigentlichen Validation Rules per rules=... am q-input spezifizieren -->

      <div>
        <!-- WICHTIG: div-Wrapper für q-form!!! -->
        <q-form
          ref="formNeueBaueinheitMitGebaeudeProfilAktivierung"
          @submit="createChildBaueinheitMitGebaeudeProfilAktivierung"
          @reset="resetCreateChildBaueinheitMitGebaeudeProfilAktivierung"
        >
          <!-- Für Validation, erfordert dieses q-form mit div-Wrapper inside q-dialog, das sonst überflüssig wäre -->
          <q-card>
            <q-card-section>
              <div>
                Bitte die gewünschte Baueinheitsbezeichnung für die neue
                Kindbaueinheit der Baueinheit
                <strong
                  >"{{
                    selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                  }}"</strong
                >
                im Bauvorhabenbaum eingeben:
                <br />
                <br />
              </div>
              <q-input
                autofocus
                square
                bg-color="teal-2"
                standout="bg-teal-4 text-black"
                dense
                :clearable="true"
                :rules="[
                  v =>
                    (v != null && v !== '') || 'Bezeichnung ist erforderlich',
                  v =>
                    (v.length > 0 && v.length <= 200) ||
                    'Bezeichnung darf höchstens 200 Zeichen lang sein'
                ]"
                lazy-rules
                hint="Unter den Geschwisterbaueinheiten im Bauvorhabenbaum eindeutige Bezeichnung für die neue Kindbaueinheit"
                hide-hint
                label="Bezeichnung der neuen Kindbaueinheit"
                v-model="bezeichnungNeueBaueinheit"
              />
            </q-card-section>
            <q-card-actions>
              <div class="row full-width q-col-gutter-xs q-pa-xs">
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    label="Abbrechen"
                    color="negative"
                    no-caps
                    v-close-popup
                  />
                </div>
                <!-- ACHTUNG: q-btn type="reset" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="reset"
                    label="Zurücksetzen"
                    color="deep-orange"
                    text-color="white"
                    no-caps
                  />
                </div>
                <!-- ACHTUNG: q-btn type="submit" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-6">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="submit"
                    label="Kindbaueinheit neu anlegen und Profil für 'Gebäude' dort aktivieren"
                    color="positive"
                    no-caps
                  />
                </div>
              </div>
            </q-card-actions>
          </q-card>
        </q-form>
        <!-- Für Form Validation Tests statt q-dialog -->
      </div>
    </q-dialog>
    <!-- --------------------------------------------------------------------------------------------------------------- -->
    <!-- NEU: QDialog für Anlegen Kindbaueinheit mit anschließender Aktivierung des Baueigenschaftsprofils "Baueinheit > Geschoss" -->
    <q-dialog
      v-if="selectedNodeTreeBaueinheiten"
      v-model="createNewBaueinheitMitGeschossProfilAktivierungDialog"
    >
      <!-- NEU: Quasar Internal Validation hier an diesem q-dialog angewendet - kann auch auf Forms angewendet werden! -->
      <!-- (Siehe https://quasar.dev/vue-components/input#Validation: Dort mit HTML <form> !!!) -->
      <!-- Siehe https://quasar.dev/vue-components/form#Usage: Dort mit <q-form> !!! -->

      <!-- HINWEISE für Validation: -->
      <!-- Speziell für Validation innerhalb von q-dialogs muss Folgendes beachtet werden: -->
      <!-- 1. ACHTUNG: Es muss ein <q-form> zwischen <q-dialog> und <q-card> eingefügt werden - Validation erfordert zwingend q-form!!! -->
      <!-- 2. ACHTUNG: Das <q-form> muss durch ein <div> gewrapped werden!!! Siehe Note auf https://quasar.dev/vue-components/dialog -->
      <!-- 3. <q-form @submit="createChildBaueinheit"> -->
      <!-- 4. <q-btn type="submit" -->
      <!-- 5. <q-form ref="formNeueBaueinheitDialog"> - damit kann in Methode manuell Validation und Reset Validation für das Feld ausgelöst werden, z.B. per: -->
      <!--     this.$refs.formNeueBaueinheitDialog.validate() -->
      <!--     this.$refs.formNeueBaueinheitDialog.resetValidation() -->
      <!-- 6. Das :clearable="true" am q-input erscheint nur, wenn das Feld schon gefüllt ist mit Input -->
      <!-- 7. Zusätzlich kann man selbst das Form/Feld zurücksetzen, durch den hinzugefügten Reset Button mit Methode, die resetValidation() auslöst:-->
      <!--    <q-btn type="reset"> und <q-form @reset="resetCreateChildBaueinheit" -->
      <!--    Ähnliches (ref plus Methode resetValidation() gibt es für q-input, siehe https://quasar.dev/vue-components/input#Validation -->
      <!-- 8. Die eigentlichen Validation Rules per rules=... am q-input spezifizieren -->

      <div>
        <!-- WICHTIG: div-Wrapper für q-form!!! -->
        <q-form
          ref="formNeueBaueinheitMitGeschossProfilAktivierung"
          @submit="createChildBaueinheitMitGeschossProfilAktivierung"
          @reset="resetCreateChildBaueinheitMitGeschossProfilAktivierung"
        >
          <!-- Für Validation, erfordert dieses q-form mit div-Wrapper inside q-dialog, das sonst überflüssig wäre -->
          <q-card>
            <q-card-section>
              <div>
                Bitte die gewünschte Baueinheitsbezeichnung für die neue
                Kindbaueinheit der Baueinheit
                <strong
                  >"{{
                    selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                  }}"</strong
                >
                im Bauvorhabenbaum eingeben:
                <br />
                <br />
              </div>
              <q-input
                autofocus
                square
                bg-color="teal-2"
                standout="bg-teal-4 text-black"
                dense
                :clearable="true"
                :rules="[
                  v =>
                    (v != null && v !== '') || 'Bezeichnung ist erforderlich',
                  v =>
                    (v.length > 0 && v.length <= 200) ||
                    'Bezeichnung darf höchstens 200 Zeichen lang sein'
                ]"
                lazy-rules
                hint="Unter den Geschwisterbaueinheiten im Bauvorhabenbaum eindeutige Bezeichnung für die neue Kindbaueinheit"
                hide-hint
                label="Bezeichnung der neuen Kindbaueinheit"
                v-model="bezeichnungNeueBaueinheit"
              />
            </q-card-section>
            <q-card-actions>
              <div class="row full-width q-col-gutter-xs q-pa-xs">
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    label="Abbrechen"
                    color="negative"
                    no-caps
                    v-close-popup
                  />
                </div>
                <!-- ACHTUNG: q-btn type="reset" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="reset"
                    label="Zurücksetzen"
                    color="deep-orange"
                    text-color="white"
                    no-caps
                  />
                </div>
                <!-- ACHTUNG: q-btn type="submit" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-6">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="submit"
                    label="Kindbaueinheit neu anlegen und Profil für 'Geschoss' dort aktivieren"
                    color="positive"
                    no-caps
                  />
                </div>
              </div>
            </q-card-actions>
          </q-card>
        </q-form>
        <!-- Für Form Validation Tests statt q-dialog -->
      </div>
    </q-dialog>
    <!-- --------------------------------------------------------------------------------------------------------------- -->
    <!-- NEU: QDialog für Anlegen Kindbaueinheit mit anschließender Aktivierung des Baueigenschaftsprofils "Baueinheit > Raum" -->
    <q-dialog
      v-if="selectedNodeTreeBaueinheiten"
      v-model="createNewBaueinheitMitRaumProfilAktivierungDialog"
    >
      <!-- NEU: Quasar Internal Validation hier an diesem q-dialog angewendet - kann auch auf Forms angewendet werden! -->
      <!-- (Siehe https://quasar.dev/vue-components/input#Validation: Dort mit HTML <form> !!!) -->
      <!-- Siehe https://quasar.dev/vue-components/form#Usage: Dort mit <q-form> !!! -->

      <!-- HINWEISE für Validation: -->
      <!-- Speziell für Validation innerhalb von q-dialogs muss Folgendes beachtet werden: -->
      <!-- 1. ACHTUNG: Es muss ein <q-form> zwischen <q-dialog> und <q-card> eingefügt werden - Validation erfordert zwingend q-form!!! -->
      <!-- 2. ACHTUNG: Das <q-form> muss durch ein <div> gewrapped werden!!! Siehe Note auf https://quasar.dev/vue-components/dialog -->
      <!-- 3. <q-form @submit="createChildBaueinheit"> -->
      <!-- 4. <q-btn type="submit" -->
      <!-- 5. <q-form ref="formNeueBaueinheitDialog"> - damit kann in Methode manuell Validation und Reset Validation für das Feld ausgelöst werden, z.B. per: -->
      <!--     this.$refs.formNeueBaueinheitDialog.validate() -->
      <!--     this.$refs.formNeueBaueinheitDialog.resetValidation() -->
      <!-- 6. Das :clearable="true" am q-input erscheint nur, wenn das Feld schon gefüllt ist mit Input -->
      <!-- 7. Zusätzlich kann man selbst das Form/Feld zurücksetzen, durch den hinzugefügten Reset Button mit Methode, die resetValidation() auslöst:-->
      <!--    <q-btn type="reset"> und <q-form @reset="resetCreateChildBaueinheit" -->
      <!--    Ähnliches (ref plus Methode resetValidation() gibt es für q-input, siehe https://quasar.dev/vue-components/input#Validation -->
      <!-- 8. Die eigentlichen Validation Rules per rules=... am q-input spezifizieren -->

      <div>
        <!-- WICHTIG: div-Wrapper für q-form!!! -->
        <q-form
          ref="formNeueBaueinheitMitRaumProfilAktivierung"
          @submit="createChildBaueinheitMitRaumProfilAktivierung"
          @reset="resetCreateChildBaueinheitMitRaumProfilAktivierung"
        >
          <!-- Für Validation, erfordert dieses q-form mit div-Wrapper inside q-dialog, das sonst überflüssig wäre -->
          <q-card>
            <q-card-section>
              <div>
                Bitte die gewünschte Baueinheitsbezeichnung für die neue
                Kindbaueinheit der Baueinheit
                <strong
                  >"{{
                    selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                  }}"</strong
                >
                im Bauvorhabenbaum eingeben:
                <br />
                <br />
              </div>
              <q-input
                autofocus
                square
                bg-color="teal-2"
                standout="bg-teal-4 text-black"
                dense
                :clearable="true"
                :rules="[
                  v =>
                    (v != null && v !== '') || 'Bezeichnung ist erforderlich',
                  v =>
                    (v.length > 0 && v.length <= 200) ||
                    'Bezeichnung darf höchstens 200 Zeichen lang sein'
                ]"
                lazy-rules
                hint="Unter den Geschwisterbaueinheiten im Bauvorhabenbaum eindeutige Bezeichnung für die neue Kindbaueinheit"
                hide-hint
                label="Bezeichnung der neuen Kindbaueinheit"
                v-model="bezeichnungNeueBaueinheit"
              />
            </q-card-section>
            <q-card-actions>
              <div class="row full-width q-col-gutter-xs q-pa-xs">
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    label="Abbrechen"
                    color="negative"
                    no-caps
                    v-close-popup
                  />
                </div>
                <!-- ACHTUNG: q-btn type="reset" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="reset"
                    label="Zurücksetzen"
                    color="deep-orange"
                    text-color="white"
                    no-caps
                  />
                </div>
                <!-- ACHTUNG: q-btn type="submit" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-6">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="submit"
                    label="Kindbaueinheit neu anlegen und Profil für 'Raum' dort aktivieren"
                    color="positive"
                    no-caps
                  />
                </div>
              </div>
            </q-card-actions>
          </q-card>
        </q-form>
        <!-- Für Form Validation Tests statt q-dialog -->
      </div>
    </q-dialog>
    <!-- --------------------------------------------------------------------------------------------------------------- -->
    <!-- NEU: QDialog für Anlegen Kindbaueinheit mit anschließender Aktivierung des Baueigenschaftsprofils "Baueinheit > Raum" -->
    <q-dialog
      v-if="selectedNodeTreeBaueinheiten"
      v-model="createNewBaueinheitMitBodenaufbauProfilAktivierungDialog"
    >
      <!-- NEU: Quasar Internal Validation hier an diesem q-dialog angewendet - kann auch auf Forms angewendet werden! -->
      <!-- (Siehe https://quasar.dev/vue-components/input#Validation: Dort mit HTML <form> !!!) -->
      <!-- Siehe https://quasar.dev/vue-components/form#Usage: Dort mit <q-form> !!! -->

      <!-- HINWEISE für Validation: -->
      <!-- Speziell für Validation innerhalb von q-dialogs muss Folgendes beachtet werden: -->
      <!-- 1. ACHTUNG: Es muss ein <q-form> zwischen <q-dialog> und <q-card> eingefügt werden - Validation erfordert zwingend q-form!!! -->
      <!-- 2. ACHTUNG: Das <q-form> muss durch ein <div> gewrapped werden!!! Siehe Note auf https://quasar.dev/vue-components/dialog -->
      <!-- 3. <q-form @submit="createChildBaueinheit"> -->
      <!-- 4. <q-btn type="submit" -->
      <!-- 5. <q-form ref="formNeueBaueinheitDialog"> - damit kann in Methode manuell Validation und Reset Validation für das Feld ausgelöst werden, z.B. per: -->
      <!--     this.$refs.formNeueBaueinheitDialog.validate() -->
      <!--     this.$refs.formNeueBaueinheitDialog.resetValidation() -->
      <!-- 6. Das :clearable="true" am q-input erscheint nur, wenn das Feld schon gefüllt ist mit Input -->
      <!-- 7. Zusätzlich kann man selbst das Form/Feld zurücksetzen, durch den hinzugefügten Reset Button mit Methode, die resetValidation() auslöst:-->
      <!--    <q-btn type="reset"> und <q-form @reset="resetCreateChildBaueinheit" -->
      <!--    Ähnliches (ref plus Methode resetValidation() gibt es für q-input, siehe https://quasar.dev/vue-components/input#Validation -->
      <!-- 8. Die eigentlichen Validation Rules per rules=... am q-input spezifizieren -->

      <div>
        <!-- WICHTIG: div-Wrapper für q-form!!! -->
        <q-form
          ref="formNeueBaueinheitMitBodenaufbauProfilAktivierung"
          @submit="createChildBaueinheitMitBodenaufbauProfilAktivierung"
          @reset="resetCreateChildBaueinheitMitBodenaufbauProfilAktivierung"
        >
          <!-- Für Validation, erfordert dieses q-form mit div-Wrapper inside q-dialog, das sonst überflüssig wäre -->
          <q-card>
            <q-card-section>
              <div>
                Bitte die gewünschte Baueinheitsbezeichnung für die neue
                Kindbaueinheit der Baueinheit
                <strong
                  >"{{
                    selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
                  }}"</strong
                >
                im Bauvorhabenbaum eingeben:
                <br />
                <br />
              </div>
              <q-input
                autofocus
                square
                bg-color="teal-2"
                standout="bg-teal-4 text-black"
                dense
                :clearable="true"
                :rules="[
                  v =>
                    (v != null && v !== '') || 'Bezeichnung ist erforderlich',
                  v =>
                    (v.length > 0 && v.length <= 200) ||
                    'Bezeichnung darf höchstens 200 Zeichen lang sein'
                ]"
                lazy-rules
                hint="Unter den Geschwisterbaueinheiten im Bauvorhabenbaum eindeutige Bezeichnung für die neue Kindbaueinheit"
                hide-hint
                label="Bezeichnung der neuen Kindbaueinheit"
                v-model="bezeichnungNeueBaueinheit"
              />
            </q-card-section>
            <q-card-actions>
              <div class="row full-width q-col-gutter-xs q-pa-xs">
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    label="Abbrechen"
                    color="negative"
                    no-caps
                    v-close-popup
                  />
                </div>
                <!-- ACHTUNG: q-btn type="reset" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-3">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="reset"
                    label="Zurücksetzen"
                    color="deep-orange"
                    text-color="white"
                    no-caps
                  />
                </div>
                <!-- ACHTUNG: q-btn type="submit" für obige Form Validation mit q-form! -->
                <!--  -->
                <div class="col-6">
                  <q-btn
                    class="stretch full-width"
                    style="height: 100%"
                    glossy
                    type="submit"
                    label="Kindbaueinheit neu anlegen und Profil für 'Bodenaufbau' dort aktivieren"
                    color="positive"
                    no-caps
                  />
                </div>
              </div>
            </q-card-actions>
          </q-card>
        </q-form>
        <!-- Für Form Validation Tests statt q-dialog -->
      </div>
    </q-dialog>
    <!-- -------------------------------------------------------------------------------- -->
    <!-- QDialog zum Löschen der selektierten Baueinheit                                  -->
    <q-dialog
      v-if="selectedNodeTreeBaueinheiten"
      v-model="deleteSelectedBaueinheitDialog"
    >
      <!-- =========================================================================== -->
      <!-- ACHTUNG: Für die Formatierung in diesem QDialog ist aktuell nur eine QCard, -->
      <!-- kein div-Wrapper und kein QForm erforderlich!                               -->
      <!-- =========================================================================== -->
      <q-card>
        <q-card-section>
          <div class="row full-width q-pa-xs">
            <q-avatar
              icon="warning"
              color="negative"
              text-color="white"
              style="margin-left: auto;margin-right: auto;"
            />
          </div>
          <!-- ------------------------------------------------------------------------------------------------ -->
          <!-- HINWEIS: style="margin-left: auto;margin-right: auto;" am q-avatar in Verbindung mit div-Wrapper -->
          <!--          für Centering des Avatars, siehe                                                        -->
          <!--          https://forum.quasar-framework.org/topic/6109/align-to-center-within-grid-column/3      -->
          <!-- ------------------------------------------------------------------------------------------------ -->
          <div class="row full-width q-pt-md">
            <span class="q-pa-none">
              Soll die Baueinheit
              <b>"{{ selectedNodeTreeBaueinheiten.baueinheitsBezeichnung }}"</b>
              und alle ihre Kindbaueinheiten wirklich gelöscht werden?
            </span>
          </div>
        </q-card-section>
        <!-- ALT: -->
        <!-- <q-card-actions align="right"> -->
        <!-- NEU: Buttons, die sich stretchen - erfordert Wrapper-div -->
        <q-card-actions>
          <div class="row full-width q-col-gutter-xs q-pa-xs">
            <div class="col-6">
              <q-btn
                class="stretch full-width"
                style="height: 100%"
                glossy
                label="Abbrechen"
                color="positive"
                no-caps
                v-close-popup
              />
            </div>
            <div class="col-6">
              <q-btn
                class="stretch full-width"
                style="height: 100%"
                glossy
                label="Löschen"
                color="negative"
                @click="deleteSelectedBaueinheit()"
                v-close-popup
                no-caps
              />
            </div>
          </div>
          <!-- ACHTUNG: Bei @click="method()" unbedingt "()"" hinter "method" angeben, sonst passiert gar nichts!!! -->
          <!-- ANDERERSEITS: @click="handleClick" und @click="handleClick()" sind äquivalent laut https://flaviocopes.com/vue-events/ -->
        </q-card-actions>
      </q-card>
    </q-dialog>
    <!-- ------------------------------------------------------------------------------------------- -->
    <!-- NEU: Selber Dialog, der aber nicht den selected Node löscht, sondern einen in der Variablen -->
    <!--      zuLoeschenderNodeTreeBaueinheiten zwischengespeicherten Node:                          -->
    <q-dialog
      v-if="zuLoeschenderNodeTreeBaueinheiten"
      v-model="deleteBaueinheitDialog"
    >
      <!-- =========================================================================== -->
      <!-- ACHTUNG: Für die Formatierung in diesem QDialog ist aktuell nur eine QCard, -->
      <!-- kein div-Wrapper und kein QForm erforderlich!                               -->
      <!-- =========================================================================== -->
      <q-card>
        <q-card-section>
          <div class="row full-width q-pa-xs">
            <q-avatar
              icon="warning"
              color="negative"
              text-color="white"
              style="margin-left: auto;margin-right: auto;"
            />
          </div>
          <!-- ------------------------------------------------------------------------------------------------ -->
          <!-- HINWEIS: style="margin-left: auto;margin-right: auto;" am q-avatar in Verbindung mit div-Wrapper -->
          <!--          für Centering des Avatars, siehe                                                        -->
          <!--          https://forum.quasar-framework.org/topic/6109/align-to-center-within-grid-column/3      -->
          <!-- ------------------------------------------------------------------------------------------------ -->
          <div class="row full-width q-pt-md">
            <span class="q-pa-none">
              Soll die Baueinheit
              <b
                >"{{
                  zuLoeschenderNodeTreeBaueinheiten.baueinheitsBezeichnung
                }}"</b
              >
              und alle ihre Kindbaueinheiten wirklich gelöscht werden?
            </span>
          </div>
        </q-card-section>
        <!-- ALT: -->
        <!-- <q-card-actions align="right"> -->
        <!-- NEU: Buttons, die sich stretchen - erfordert Wrapper-div -->
        <q-card-actions>
          <div class="row full-width q-col-gutter-xs q-pa-xs">
            <div class="col-6">
              <q-btn
                class="stretch full-width"
                style="height: 100%"
                glossy
                label="Abbrechen"
                color="positive"
                no-caps
                v-close-popup
              />
            </div>
            <div class="col-6">
              <q-btn
                class="stretch full-width"
                style="height: 100%"
                glossy
                label="Löschen"
                color="negative"
                @click="deleteBaueinheit(zuLoeschenderNodeTreeBaueinheiten)"
                v-close-popup
                no-caps
              />
            </div>
          </div>
          <!-- ACHTUNG: Bei @click="method()" unbedingt "()"" hinter "method" angeben, sonst passiert gar nichts!!! -->
          <!-- ANDERERSEITS: @click="handleClick" und @click="handleClick()" sind äquivalent laut https://flaviocopes.com/vue-events/ -->
        </q-card-actions>
      </q-card>
    </q-dialog>
    <!-- Verworfener Dialog, Probleme
    <q-dialog v-model="parentPropertyDeaktiviert">
      <q-card>
        <q-card-section>
          <div class="text-h6">Vorgang nicht möglich</div>
        </q-card-section>

        <q-card-section>
          Die Eigenschaft ist im Elternknoten deaktiviert und kann daher nicht
          aktiviert werden.
        </q-card-section>

        <q-card-actions align="right">
          <q-btn flat label="OK" color="primary" no-caps v-close-popup />
        </q-card-actions>
      </q-card>
    </q-dialog>
    -->
  </q-page>
</template>

<script>
"strict mode";
//***=====================================================================================================================================
//---------------------------------------------------------------------------------------------------------------------------------------
// Auskommentiertes konstantes Objekt, da durch Variable ersetzt, die mit ALLEN Bauinformationen als QSelect Options geladen wird:
/* const selectOptionsBauinformationenAusgewaehlteBaueinheit = [
  // Simulierte Optionen für QSelect zur Auswahl von Bauinformationen
  // TODO: selectOptionsBauinformationenAusgewaehlteBaueinheit muss später aus Datenbank geladen werden mit den entsprechenden Daten für ALLE Bauinformationen
  // Es könnte, falls das zuviele Werte sind, auch schon beim initialen Laden zusätzlich gefiltert werden
  // (z.B. über Toggles auf den Enum-Werten für bauinformationsTyp)
  // Design für zugeordnete Bauinformationen:
  // - Halte Array von Referenzen auf zugeordnete Bauinformationen im Mongoose Model der Baueinheit:
  //   bauinformationen: [BauinformationSchema]
  // - Hole diese zugeordneten Bauinformationen schon populiert mit der Baueinheit aus der Datenbank (analog zu Baueigenschaften)
  // - Zeige diese Bauinformationen in q-table im Tab "Zugeordnete Bauinformationen" an, selbes Layout wie die q-table in "Bauinformationen"
  // - Lade selectOptionsBauinformationenAusgewaehlteBaueinheit mit den bereits selektierten Bauinformationen für das q-select aus diesem Array (Bezeichnung/Typ)
  // - Lade selectModelBauinformationenAusgewaehlteBaueinheit per Backend Call, der Bezeichnung und Typ von allen Bauinformationen aus der Datenbank liest
  // - Nach Ende der Selektion/Deselektion in q-select (dafür im V-Slot "after" oder alternativ "append" einen QButton mit type="submit"
  //   und label="Speichern" hinzugefügt, der bei @click eine Methode submitZugeordneteBauinformationenAusgewaehlteBaueinheit ruft,
  //   siehe https://quasar.dev/vue-components/select#Slots-with-QBtn-type-%E2%80%9Csubmit%E2%80%9D):
  //   -- Update des Arrays von Referenzen auf zugeordnete Bauinformationen der Baueinheit per Backend/Mongoose Call in der Datenbank mit den aktuell selektierten Referenzen
  //   -- Neu-Laden der Baueinheit bzw. der populierten zugeordneten Bauinformationen
  //   -- Refresh der q-table im Tab "Zugeordnete Bauinformationen"
  {
    bauinformationsBezeichnung: "13164",
    bauinformationsTyp: "Norm",
    value: "13164", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "13165",
    bauinformationsTyp: "Norm",
    value: "13165",
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "13166",
    bauinformationsTyp: "Norm",
    value: "13166", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "13786",
    bauinformationsTyp: "Norm",
    value: "13786", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "18319",
    bauinformationsTyp: "Norm",
    value: "18319", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "18336",
    bauinformationsTyp: "Norm",
    value: "18336", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "2602",
    bauinformationsTyp: "Norm",
    value: "2602", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "4150-1",
    bauinformationsTyp: "Norm",
    value: "4150-1", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "4150-2",
    bauinformationsTyp: "Norm",
    value: "4150-2", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "4150-3",
    bauinformationsTyp: "Norm",
    value: "4150-3", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "ArbStättV",
    bauinformationsTyp: "Verordnung",
    value: "ArbStättV",
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "Beton-Estrich",
    bauinformationsTyp: "Datenblatt",
    value: "Beton-Estrich", // TODO: Könnte auch _id aus der Datenbank sein???
    disable: false,
    ion: "map" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "EnEV",
    bauinformationsTyp: "Verordnung",
    value: "EnEV",
    disable: false,
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "Erdbebenzonen und Untergrundklassen",
    bauinformationsTyp: "Technische Baubestimmung (TB)",
    value: "Erdbebenzonen und Untergrundklassen",
    disable: false,
    icon: "golf_course" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "LBO",
    bauinformationsTyp: "Gesetz",
    value: "LBO",
    disable: false,
    icon: "casino" // Aus Vorlage, wird aktuell nicht verwendet
  },
  {
    bauinformationsBezeichnung: "Z-1-2-193",
    value: "Z-1-2-193",
    disable: false,
    bauinformationsTyp: "Verordnung",
    icon: "mail" // Aus Vorlage, wird aktuell nicht verwendet
  }
];
*/

const sleepTime = 2000; // Millisekunden
function sleep(milliseconds) {
  // Hilsfunktion für sleep unten
  return new Promise(resolve => setTimeout(resolve, milliseconds));
}
//-------------------------------------------------------------------------------------------------------------------------------
// NEU: Konstanten für Tests Kontexthilfe
// TODO: Auslagern in JS Datei
//-------------------------------------------------------------------------------------------------------------------------------
const CONTEXT_HELP_BAUEINHEITEN_BAUEIGENSCHAFTEN_NEU = 100; // TODO - nur für Test Kontexthilfe mit Markdown
const CONTEXT_HELP_BAUEINHEITEN_BAUEIGENSCHAFTEN_AUSWAHL = 50; // TODO - nur für Test Kontexthilfe mit Markdown
//-------------------------------------------------------------------------------------------------------------------------------
// NEU: Import Context from quasar.conf.js:
// Muss nicht importiert werden? Z.B. kann auf process.env.API auch so zugegriffen werden!
// Siehe https://quasar.dev/quasar-cli/quasar-conf-js
// Siehe https://quasar.dev/quasar-cli/cli-documentation/handling-process-env - process.env.API in ctx enthält API URL
// import { ctx } from "./../../quasar.conf";
//-------------------------------------------------------------------------------------------------------------------------------
// NEU: Imports für Enums zur Verwaltung der Benutzernachrichten (QNotify Message im Footer)
// ACHTUNG: Dabei kein require, sondern import, sonst undefined Fehler beim Zugriff!!!
import BenutzerNachrichten from "../modules/benutzer-nachrichten.js";
import BenutzerNachrichtenTypen from "../modules/benutzer-nachrichten-typen.js";
import BauwerksZuordnungen from "../modules/bauwerks-zuordnungen.js"; // NEU: Für "Angaben zum Bauvorhaben"
//-------------------------------------------------------------------------------------------------------------------------------
// NEU - #401: Für q-option-group-basierende Anzeige der neuen fachlichen Kategorien/Rubriken von Baueigenschaften:
import OptionsFachlicheKategorienBaueigenschaften from "../modules/options-fachliche-kategorien-baueigenschaften";
//-------------------------------------------------------------------------------------------------------------------------------
// Imports für Kindkomponenten:
import BaueigenschaftsProfileTabBaustoffeUndBaueinheiten from "../components/baueigenschafts-profile-tab-baustoffe-und-baueinheiten";
import BauinformationsProfileTabBaustoffeUndBaueinheiten from "../components/bauinformations-profile-tab-baustoffe-und-baueinheiten"; // NEU
import GenerischesBaueigenschaftsProfilFormular from "../components/generisches-baueigenschafts-profil-formular";
import ReadOnlyGenerischesBaueigenschaftsProfilFormular from "../components/read-only-generisches-baueigenschafts-profil-formular"; // NEU: Zur Anzeige von Baustoffdaten
import FilterGenerischesBaueigenschaftsProfilFormular from "../components/filter-generisches-baueigenschafts-profil-formular"; // NEU: Zur Anzeige von Baustoffdaten
import BaueinheitZugeordneteBaustoffeFilterBaueigenschaftsProfilFormular from "../components/baueinheit-zugeordnete-baustoffe-filter-baueigenschafts-profil-formular"; // NEU: Layoutgesteuertes Filterformular
import LayoutGesteuertesGenerischesBaueigenschaftsProfilFormular from "../components/layout-gesteuertes-generisches-baueigenschafts-profil-formular"; // NEU
import BaueinheitBauvorhabenBaueigenschaftsProfilFormular from "../components/baueinheit-bauvorhaben-baueigenschafts-profil-formular.vue"; // NEU: Spezifisches Baueigenschaftsprofilformular für Bauvorhaben
import BaueinheitStandortBaueigenschaftsProfilFormular from "../components/baueinheit-standort-baueigenschafts-profil-formular"; // NEU: Spezifisches Baueigenschaftsprofilformular für Standort
import BaueinheitGebaeudeBaueigenschaftsProfilFormular from "../components/baueinheit-gebaeude-baueigenschafts-profil-formular"; // NEU: Spezifisches Baueigenschaftsprofilformular für Gebäude
// VUE 3 
import BaueinheitGeschossBaueigenschaftsProfilFormular from "../components/baueinheit-geschoss-baueigenschafts-profil-formular"; // NEU: Spezifisches Baueigenschaftsprofilformular für Geschoss
// VUE 3 import BaueinheitRaumBaueigenschaftsProfilFormular from "../components/baueinheit-raum-baueigenschafts-profil-formular"; // NEU: Spezifisches Baueigenschaftsprofilformular für Raum
// import BaueinheitBodenaufbauBaueigenschaftsProfilFormular from "../components/baueinheit-bodenaufbau-baueigenschafts-profil-formular.vue"; // ALT
import BaueinheitSchichtBaueigenschaftsProfilFormular from "../components/baueinheit-schicht-baueigenschafts-profil-formular"; // NEU: Spezifisches Baueigenschaftsprofilformular für Schicht
import BaueinheitBodenaufbauBaueigenschaftsProfilFormular from "../components/baueinheit-bodenaufbau-baueigenschafts-profil-formular"; // NEU
import ComputedWithSideEffect from "../components/ComputedWithSideEffect.vue"
// import entwurfSchichtaufbau from "../components/entwurf-schichtaufbau"; // Terminologie?!? ALT: Wird nicht mehr verwendet
// import BaueigenschaftBearbeitung from "../components/baustoffe-baueigenschaft-bearbeitung"; // ALT: Wird nicht mehr verwendet
// import BaueinheitenigenschaftNeuanlage from "../components/baustoffe-baueigenschaft-neuanlage"; // Wird nicht verwendet
// import AufzaehlungsWerteAuswahl from "../components/baustoffe-baueigenschaft-aufzaehlungs-werte-auswahl"; // Wird nicht mehr verwendet
// import BauinformationAuswahl from "../components/baustoffe-baueigenschaft-bauinformation-auswahl"; // Wird nicht mehr verwendet
// import PopUpMenuTableBaueigenschaftenen from "../components/pop-up-menu-table-baueigenschaften"
//-------------------------------------------------------------------------------------------------------------------------------
// NEU: Import für global Store
// Für globale Daten, die zwischen MyLayout.vue und anderen Vue-Komponenten geshared werden
// Siehe https://medium.com/fullstackio/managing-state-in-vue-js-23a0352b1c87
import { globalStore } from "../modules/global-store";
//-------------------------------------------------------------------------------------------------------------------------------
// NEU: Imports für Quasar Utilities
// Quasar Date Utils, siehe https://quasar.dev/quasar-utils/date-utils
// Quasar Copy to Clipboard, siehe https://quasar.dev/quasar-utils/other-utils#Copy-to-Clipboard
import { date, copyToClipboard, Loading, QSpinnerGears, Notify } from "quasar"; // NEU: Loading, QSpinnerGears, Notify für Spinner Gears, z.B. in loadTreeBaustoffe()
//-------------------------------------------------------------------------------------------------------------------------------
// NEU: Markdown Editor für Beschreibungen (nur Test - wieder disabled, wegen Problemen):
// import { Editor } from "@toast-ui/vue-editor"; // NEU: Markdown Editor, siehe https://github.com/nhn/toast-ui.vue-editor
// Installation mit: bimclickfrontend> npm install --save @toast-ui/vue-editor
//-------------------------------------------------------------------------------------------------------------------------------
// Neu: Imports und Konstanten für Funktionen im Tab "Angaben zum Bauvorhaben"
const selectOptionsArtBauvorhaben = ["Neubau", "Umbau", "Sanierung", "Abriss"];
//-------------------------------------------------------------------------------------------------------------------------------
// NEU: Folgender Array definiert die Hierarchie der Baueigenschaftsprofile, links im Array entspricht "oben", rechts "unten"
// Wird verwendet zur Tab-Steuerung
const hierarchieAllerBaueigenschaftsProfile = [
  "Baueinheit > Bauvorhaben",
  // "Bauvorhaben (Preview)", // ALT - deprecated
  "Baueinheit > Standort",
  "Baueinheit > Gebäude",
  "Baueinheit > Geschoss",
  "Baueinheit > Raum",
  "Baueinheit > Bodenaufbau", // NEU
  // "Bodenaufbau (NEU)", //ALT
  // "Schichtaufbau", // ALT
  "Baueinheit > Wandaufbau",
  "Baueinheit > Schicht"
  // "Allgemein > Test > Wertetypen", // Darf hier nicht enthalten sein, denn es gibt dafür kein Profilformular!
];
//------------------------------------------------------------------------------------------------------------------------------
// import Vue from "vue/dist/vue.js"; // NEU: Für Geocoder
// import Geocoder from "@pderas/vue2-geocoder"; // NEU: Für Geocoding (Bestimmung von geografischen Koordinaten aus Adresse über Google Maps API)
// import * as VueGoogleMaps from "vue2-google-maps";
// NEU: Für Package vue2-google-maps,https://github.com/xkjyeah/vue-google-maps/blob/vue2/README.md - zurückgestellt
//-------------------------------------------------------------------------------------------------------------------------------

export default {
  //***================================================================================================================================
  components: {
    computedWithSideEffect: ComputedWithSideEffect,
    // Verwendete Vue-Komponenten:
    // NEU: Kindkomponenten disabled!
    baueigenschaftsProfileTabBaustoffeUndBaueinheiten: BaueigenschaftsProfileTabBaustoffeUndBaueinheiten,
    bauinformationsProfileTabBaustoffeUndBaueinheiten: BauinformationsProfileTabBaustoffeUndBaueinheiten, // NEU
    generischesBaueigenschaftsProfilFormular: GenerischesBaueigenschaftsProfilFormular,
    readOnlyGenerischesBaueigenschaftsProfilFormular: ReadOnlyGenerischesBaueigenschaftsProfilFormular, // NEU - zur Anzeige von Baustoffdaten
    filterGenerischesBaueigenschaftsProfilFormular: FilterGenerischesBaueigenschaftsProfilFormular, // NEU - zurm Filtern nach Baustoffdaten
    baueinheitZugeordneteBaustoffeFilterBaueigenschaftsProfilFormular: BaueinheitZugeordneteBaustoffeFilterBaueigenschaftsProfilFormular, // NEU: Layoutgesteuertes Filterformular
    layoutGesteuertesGenerischesBaueigenschaftsProfilFormular: LayoutGesteuertesGenerischesBaueigenschaftsProfilFormular, // NEU
    baueinheitBauvorhabenBaueigenschaftsProfilFormular: BaueinheitBauvorhabenBaueigenschaftsProfilFormular, // NEU: Spezifisches Baueigenschaftsprofilformular für Bauvorhaben
    baueinheitStandortBaueigenschaftsProfilFormular: BaueinheitStandortBaueigenschaftsProfilFormular, // NEU: Spezifisches Baueigenschaftsprofilformular für Standort
    baueinheitGebaeudeBaueigenschaftsProfilFormular: BaueinheitGebaeudeBaueigenschaftsProfilFormular, // NEU: Spezifisches Baueigenschaftsprofilformular für Gebäude
    // VUE 3 
    baueinheitGeschossBaueigenschaftsProfilFormular: BaueinheitGeschossBaueigenschaftsProfilFormular, // NEU: Spezifisches Baueigenschaftsprofilformular für Geschoss
    // baueinheitRaumBaueigenschaftsProfilFormular: BaueinheitRaumBaueigenschaftsProfilFormular, // NEU: Spezifisches Baueigenschaftsprofilformular für Geschoss
    baueinheitBodenaufbauBaueigenschaftsProfilFormular: BaueinheitBodenaufbauBaueigenschaftsProfilFormular, // NEU: Stefans Komponente für den Bodenaufbau
    baueinheitSchichtBaueigenschaftsProfilFormular: BaueinheitSchichtBaueigenschaftsProfilFormular // NEU: Spezifisches Baueigenschaftsprofilformular für Schicht
    // bodenaufbauDevelopmentFormular: BodenaufbauDevelopmentFormular, // ALT
    // AufzaehlungsWerteAuswahl: AufzaehlungsWerteAuswahl // Vue-Komponente zum QSelect Handling der Aufzählungswerte
    // BauinformationAuswahl: BauinformationAuswahl // Vue-Komponente zum QSelect Handling der Auswahl einer Bauinformation für eine Baueigenschaft
    // BaueigenschaftBearbeitung: BaueigenschaftBearbeitung // Vue-Komponente für die Bearbeitung einer Baueigenschaft - wird nicht mehr verwendet
    // BaueigenschaftNeuanlage, // Vue-Komponente für die Neuanalge einer Baueigenschaft - wird aktuell nicht verwendet
    // markdownEditor: Editor // NEU: Markdown Editor, https://github.com/nhn/toast-ui.vue-editor - bisher nur Test
    // PopUpMenuTableBaueigenschaftenen: PopUpMenuTableBaueigenschaftenen
  },
  name: "Baueinheiten", // Vue Component Name - ACHTUNG - dabei beachten:
  // Exkurs zu Vue Component Names:
  // 1. Auf Groß-/Kleinschreibung achten
  // 2. Zwei Varianten möglich, siehe https://vuejs.org/v2/guide/components-registration.html
  //    Wir verwenden, weil Quasar es auch so macht, PascalCase für den Komponentennamen
  // 3. Der Component Name muss nicht mit dem gewählten File Name der Komponente übereinstimmen. Wir befolgen dafür folgende Namenskonvention:
  //    Component Name der Komponente:           ComponentName  in PascalCase (Großbuchstaben am Anfang aller Worte)
  //    Entsprechender File Name der Komponente: component-name in kebab-case (nur Kleinbuchstaben, mit Strichen getrennt)
  // 4. Der File Name der Komponente wird in routes.js referenziert - dort werden File Names von Komponenten zu Route Names und Route Pfaden zugeordnet!
  // 5. In MyLayout werden in den q-route-tabs nur Route Names referenziert, nicht Component Names!
  // 6. Wenn eine Komponente per components: andere Komponenten verwendet, werden diese zunächst importiert mit ihren File Names, und dann
  //    beliebig lokal benannt (dies sollte auch wieder obige Namenskonvention für die beiden beteiligten Namen folgen) - Beispiel:
  //    import ImportBaueigenschaftBearbeitung from "../components/baustoffe-baueigenschaft-bearbeitung"; // dabei beliebiger Name für den Import
  //    Danach in data():
  //    BaueigenschaftBearbeitung: ImportBaueigenschaftBearbeitung, // Lokaler Name für die verwendete Komponente, damit kann sie im Template
  //    dann per <BaueigenschaftBearbeitung> angesprochen werden, z.B.:
  //    <div> <BaueigenschaftBearbeitung :bearbeiteteBaueigenschaft="ausgewaehlteBaueigenschaft"> ... </div>
  //    Dabei erfolgen per :prop="xyz" Bindungen für deren Props.
  // 7. Im Template können Komponenten dann mit ihrem hier deklarierten Namen angesprochen werden per <ComponentName>
  // 8. Wenn man den Quasar Befehl quasar new page NewComponent benutzt, legt dieser ein File mit demselbern Namen NewComponent.vue an -
  //    dieses dann manuell umbenennen in new-component.vue, um obige Namenskonvention einzuhalten!
  //***================================================================================================================================
  data() {
    return {
      optionsFachlicheKategorienBaueigenschaften: OptionsFachlicheKategorienBaueigenschaften, // NEU - #401
      waitingForBewegeZweigBaueinheitAgendaJobComplete: false, // Merker für Timeout beim Warten auf Socket Event bewegeZweigBaueinheitAgendaJobComplete
      idZielElternKnoten: null, // NEU: Für Bewegen von Zweigen mit Agenda Job, hier wird der Zielelternknoten gemerkt
      tabZugeordneteBaustoffe: "detailsTabZugeordneteBaustoffe",
      //-------------------------------------------------------------------------------------------------------------------------------
      pfadExportBauteilkatalogAnBaueinheit: "", // NEU: Pfad für Downnload von Excel-Datei für Bauteilkatalog
      pfadDownloadBaueigenschaftsProfilFormulareAnBaueinheit: "", // NEU: Pfad für Downnload von Excel-Datei für Baueigenschaftsprofilformulare
      // selectedNodeTreeBaueinheiten: null, // NEU - war computed(), nach data() verschoben wegen Timing-Problem - wieder rückgängig gemacht
      zuLoeschenderNodeTreeBaueinheiten: null, // NEU: Variable, um einen per Kontextmenü bestimmten zu löschenden Node im Tree zwischenzuspeichern
      // NEU: Variablen für QSelect zur Auswahl von Sonderzeichen (für Markdown)
      showPreviewBodenaufbau: false,
      copyToClipboardDoneSonderzeichenAusgewaehlteBaueigenschaft: false, // NEU: Für Anzeige Hint unter QSelect für Auswahl Sonderzeichen im Tab "Baueigenschaften > Details zur ausgewählten Baueigenschaft"
      copyToClipboardDoneSonderzeichenNeueBaueigenschaft: false, // NEU: Für Anzeige Hint unter QSelect für Auswahl Sonderzeichen im Tab "Baueigenschaften > Neuanlage einer Baueigenschaft"
      copyToClipboardDoneSonderzeichenBaueinheit: false, // NEU: Für Anzeige Hint unter QSelect für Auswahl Sonderzeichen im Tab "Baueinheitsbeschreibung"
      hintFuerFormelMitSonderzeichen:
        "Formel, z.B. 'a" +
        "\u2080" +
        " = 10" +
        "\u207B\u00B3" +
        "m/s" +
        "\u00B2" +
        "'",
      // Dies ist eine Beispielformel mit ausgewählten Unicode-Zeichen für Hochstellungen, da hier in JS-Strings dafür keine HTML-Tags <sup> ... </sup> verwendbar sind!
      selectModelSonderzeichenAusgewaehlteBaueigenschaft: null, // Hält Objekt mit dem ausgewählten Sonderzeichen, Format {label, value} für QSelect im Tab "Baueigenschaften > Details zur ausgewählten Baueigenschaft"
      selectModelSonderzeichenNeueBaueigenschaft: null, // Hält Objekt mit dem ausgewählten Sonderzeichen, Format {label, value} im Tab "Baueigenschaften > Neuanlage einer Baueigenschaft"
      selectModelSonderzeichenBaueinheit: null, // NEU: Hält Objekt mit dem ausgewählten Sonderzeichen, Format {label, value} im Tab "Baueinheitsbeschreibung"
      // Nun gemeinsame QSelect Options für alle obigen QSelect Models:
      selectOptionsSonderzeichen: require("../modules/select-options-sonderzeichen")
        .selectOptionsSonderzeichen, // NEU: Select Options aus separater Datei laden
      //-------------------------------------------------------------------------------------------------------------------------------
      // NEU: Variable, die die id des Wurzelknotens deszu verschiebenden oder kopierenden Zweigs im Bauvorhabenbaum enthält - wird per Kontextmenü gesetzt
      idWurzelZuBewegenderZweig: null,

      //-------------------------------------------------------------------------------------------------------------------------------
      // NEU: Variablen für Funktionen im Tab "Angaben zum Bauvorhaben"

      // Testdaten für q-select zur Auswahl der Bauwerkzuordnung
      // ALT:
      // selectModelBauwerksZuordnungen: "9810 - Gebäude mit büroartiger Nutzung", // Model, enthält das aktuell im QSelect selektierte Objekt
      // NEU: Ersetzt durch v-model="bauvorhabenAusgewaehlteBaueinheit[1].werteFeldInhalt" // generisches Wertefeld, hier für Bauwerkszuordnung
      selectOptionsBauwerksZuordnungen: BauwerksZuordnungen, // Konstante aus include File oben
      selectFilterOptionsBauwerksZuordnungen: BauwerksZuordnungen, // Initialisieren mit denselben Werten wie in den select Options

      // Testdaten für q-select zur Auswahl der Art des Bauvorhabens
      selectOptionsArtBauvorhaben: selectOptionsArtBauvorhaben, // Konstante oben

      // Zentraler Array für Hierarchie der Baueigenschaftsprofile:
      hierarchieAllerBaueigenschaftsProfile: hierarchieAllerBaueigenschaftsProfile, // Konstante oben

      // NEU: Array für Angaben zum Bauvorhaben (an der ausgewählten Baueinheit)
      // Disabled, für altes Formular "Bauvorhaben (Preview)" - ersetzt durch Profilformular "Bauvorhaben" (Vue-Komponente)
      // Hinweis: Die Inhalte für die korrespondierenden Wertefelder (bezeichnungsWert1, aufzaehlungsWert, kennWert1) werden im Feld werteFeldInhalt gespeichert.
      // Sie sind hier jeweils mit Testwerten befüllt, werden aber in der
      // Methode loadBauvorhabenAusgewaehlteBaueinheit mit dem aktuellen Wert aus der Datenbank aktualisiert.
      // Das QForm im Tab "Angaben zum Bauvorhaben" arbeitet auf den Objekten in diesem Array!
      // Dabei muss die Position jedes Objekts im Array (hilfsweise hier im Feld indexArrayBauvorhabenAusgewaehlteBaueinheit mit deklariert zur
      // leichteren Referenzierung im Template) immer dieselbe sein!
      // Da der Array nicht dynamisch um Objekte erweitert wird, ist dies gewährleistet!
      /*
      bauvorhabenAusgewaehlteBaueinheit: [
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 0,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung: "Bauvorhaben: Bezeichnung Bauvorhaben",
          werteTyp: "Bezeichnungswert",
          werteFeldInhalt: "Paradies-Umbau"
        },
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 1,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung:
            "Bauvorhaben: Auswahl Bauwerkszuordnungen",
          werteTyp: "Aufzählungswert",
          werteFeldInhalt: "1000 - Parlament, Gericht, Verwaltung"
        },
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 2,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung: "Bauvorhaben: Auswahl Arten Bauvorhaben",
          werteTyp: "Aufzählungswert",
          werteFeldInhalt: "Umbau"
        },
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 3,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung: "Bauvorhaben: Bezeichnung Straße",
          werteTyp: "Bezeichnungswert",
          werteFeldInhalt: "Brückenstraße"
        },
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 4,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung: "Bauvorhaben: Bezeichnung Hausnummer",
          werteTyp: "Bezeichnungswert",
          werteFeldInhalt: "9"
        },
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 5,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung: "Bauvorhaben: Bezeichnung Postleitzahl",
          werteTyp: "Bezeichnungswert",
          werteFeldInhalt: "71364"
        },
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 6,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung: "Bauvorhaben: Bezeichnung Ort",
          werteTyp: "Bezeichnungswert",
          werteFeldInhalt: "Winnenden"
        },
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 7,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung:
            "Bauvorhaben: Auswahl Bundesländer Deutschland",
          werteTyp: "Aufzählungswert",
          werteFeldInhalt: "Baden-Württtemberg"
        },
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 8,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung: "Bauvorhaben: Auswahl Länder DACH",
          werteTyp: "Aufzählungswert",
          werteFeldInhalt: "Deutschland"
        },
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 9,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung: "Bauvorhaben: Bezeichnung Bauherr",
          werteTyp: "Bezeichnungswert",
          werteFeldInhalt: "Paradies GmbH"
        },
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 10,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung: "Bauvorhaben: Bezeichnung Architekt",
          werteTyp: "Bezeichnungswert",
          werteFeldInhalt: "Behnisch Architekten"
        },
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 11,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung: "Bauvorhaben: Bezeichnung Bauträger",
          werteTyp: "Bezeichnungswert",
          werteFeldInhalt: "Projektbau Pfleiderer"
        },
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 12,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung: "Bauvorhaben: Bezeichnung Bauunternehmen",
          werteTyp: "Bezeichnungswert",
          werteFeldInhalt: "STRABAG"
        },
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 13,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung:
            "Bauvorhaben: Bezeichnung Fachingenieur für Baustatik",
          werteTyp: "Bezeichnungswert",
          werteFeldInhalt: "Müller Statik"
        },
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 14,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung:
            "Bauvorhaben: Bezeichnung Fachingenieur für Brandschutz",
          werteTyp: "Bezeichnungswert",
          werteFeldInhalt: "Meier Brandschutz"
        },
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 15,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung:
            "Bauvorhaben: Kennwert geografische Breite",
          werteTyp: "Kennwert",
          werteFeldInhalt: 48.87619
        }, // K&F Geolocation
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 16,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung:
            "Bauvorhaben: Kennwert geografische Länge",
          werteTyp: "Kennwert",
          werteFeldInhalt: 9.389161
        }, // K&F Geolocation
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 17,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung:
            "Bauvorhaben: Bezeichnung Google Maps Plus Code",
          werteTyp: "Bezeichnungswert",
          werteFeldInhalt: "V9GQ+CM Winnenden"
        }, // K&F Plus Code
        {
          indexArrayBauvorhabenAusgewaehlteBaueinheit: 18,
          indexArrayBaueigenschaftenAusgewaehlteBaueinheit: null,
          idBaueigenschaft: null,
          baueigenschaftsBezeichnung: "Bauvorhaben: Kennwert geografische Höhe",
          werteTyp: "Kennwert",
          werteFeldInhalt: 284
        } // K&F Höhe über NN in m
      ],
      */
      // confirmHinweisEingebenGeolokationBauvorhabenAusgewaehlteBaueinheit: false,

      //-------------------------------------------------------------------------------------------------------------------------------
      // NEU: Variablen für Funktionen im Tab "Schichtaufbau"

      schichtDicke: 0, // Wird aktuell nicht benutzt
      indexOfSelectedArrayElement: undefined, // Speichert Index des selektierten Array Elements
      iconArray: [
        // Speichert Icons für bis zu 9 Schichten
        {
          id: 1,
          icon: "img:statics/icons/icon-number-one.png"
        },
        {
          id: 2,
          icon: "img:statics/icons/icon-number-two.png"
        },
        {
          id: 3,
          icon: "img:statics/icons/icon-number-three.png"
        },
        {
          id: 4,
          icon: "img:statics/icons/icon-number-four.png"
        },
        {
          id: 5,
          icon: "img:statics/icons/icon-number-five.png"
        },
        {
          id: 6,
          icon: "img:statics/icons/icon-number-six.png"
        },
        {
          id: 7,
          icon: "img:statics/icons/icon-number-seven.png"
        },
        {
          id: 8,
          icon: "img:statics/icons/icon-number-eight.png"
        },
        {
          id: 9,
          icon: "img:statics/icons/icon-number-nine.png"
        }
      ],
      schichtAufbau: [
        {
          id: 1,
          bezeichnung: "Bodenbelag",
          dicke: 10,
          element: "Fußboden"
        },
        {
          id: 2,
          bezeichnung: "Kleber",
          dicke: 5,
          element: "Fußboden"
        },
        {
          id: 3,
          bezeichnung: "Dichtschlämme",
          dicke: 100,
          element: "Fußboden"
        },
        {
          id: 4,
          bezeichnung: "Estrich",
          dicke: 3,
          element: "Fußboden"
        },
        {
          id: 5,
          bezeichnung: "Trennschicht",
          dicke: 50,
          element: "Fußboden"
        },
        {
          id: 6,
          bezeichnung: "Trittschalldämmung",
          dicke: 5,
          element: "Fußboden"
        },
        {
          id: 7,
          bezeichnung: "Wärmedämmung",
          dicke: 30,
          element: "Fußboden"
        },
        {
          id: 8,
          bezeichnung: "Rohboden", // DONE #302 - NEU: War ALT: "Unterdecke"
          dicke: 5,
          element: "Rohboden" // DONE #302 - NEU: War ALT: "Unterdecke"
        },
        {
          id: 9,
          bezeichnung: "Unterboden", // DONE #302 - NEU: War ALT: "Unterdecke"
          dicke: 300,
          element: "Unterboden" // DONE #302 - NEU: War ALT: "Unterdecke"
        }
      ],

      //-------------------------------------------------------------------------------------------------------------------------------
      disableWerteFelder: false,
      suppressNotificationNeuTabBaueigenschaften: true, // Disabled bei Bedarf die Notifications (z.B. bei Öffnen des Tabs "Neu")

      zugeordneteBauinformationAusgewaehlteBaueigenschaft: {
        // TODO XXXXXX -Wird aktuell nicht mehr verwendet???
        bauinformationId: null,
        bauinformationsTyp: null,
        bauinformationsAnzeigeText: null, // NEU
        bauinformationsBezeichnung: null
      },
      /*
      disabledFieldsNeueBaueigenschaft: {
        kennWert1: true,
        kennWert2: true,
        datumsWert1: true,
        datumsWert2: true,
        tagesZeitWert1: true, // NEU
        tagesZeitWert2: true, // NEU
        bezeichnungsWert1: true,
        bezeichnungsWert2: true,
        aufzaehlungsWert: true,
        wahrheitsWert: true,
        symbol: true,
        einheit: true,
        operator: true,
        formel: true, // NEU
        sonderzeichen: true // NEU
      },
      */

      // Objekt, das die Werte der Baueigenschaft an der im Pfad obersten Elternbaueinheit MIT definierten Werten enthält, sowie weitere Informationen:
      hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung: {
        ausgewaehlteBaueigenschaftIstDirektAktivierbar: true,
        ausgewaehlteBaueigenschaftKannEigeneWerteDefinieren: true,
        relevanteKennwerte: {}
      },

      // Nur für Tests mit Markdown Editor - disabled:
      /*
      markdownEditorOptions: { // Markdown Editor, siehe https://github.com/nhn/toast-ui.vue-editor
        minHeight: "600px",
        language: "de_DE",
        useCommandShortcut: true,
        useDefaultHTMLSanitizer: true,
        usageStatistics: false,
        hideModeSwitch: false,
        toolbarItems: [
          "heading",
          "bold",
          "italic",
          "strike",
          "divider",
          "hr",
          "quote",
          "divider",
          "ul",
          "ol",
          "task",
          "indent",
          "outdent",
          "divider",
          "table",
          "image",
          "link",
          "divider",
          "code",
          "codeblock"
        ]
      },
      */
      uploadDoneBaueinheitsBeschreibung: false, // NEU: Für Anzeige interner Link in Baueinheitsbeschreibung nach Upload
      uploadDoneBaueigenschaftsBeschreibung: false, // NEU: Für Anzeige interner Link in Baueigenschaftsbeschreibung nach Upload
      copyToClipboardDoneBaueinheitsBeschreibung: false, // NEU: Für Anzeige Hint unter Button für CopytoClipboard für internen Link in Baueinheitsbeschreibung
      copyToClipboardDoneBaueigenschaftsBeschreibung: false, // NEU: Für Anzeige Hint unter Button für CopytoClipboard für internen Link in Baueigenschaftsbeschreibung
      internerLinkAusUploadBaueinheitsBeschreibung: "", // NEU: Für Anzeige interner Link nach Uplooad Images für Baueinheitsbeschreibung
      internerLinkAusUploadBaueigenschaftsBeschreibung: "", // NEU: Für Anzeige interner Link nach Uplooad Images für Baueigenschaftsbeschreibung

      localStore: globalStore, // NEU: lokales reaktives Objekt für Pendant aus global Store, enthält localStore.state.debugMode u.v.m.

      // Folgende Variable dateTest ist ein Testfeld für native Date Handling mit type="date" - siehe dazu das Test-q-input-feld oben im Template für die ausgewählte Baueigenschaft
      // Quasar Native Date Handling ist hier dokumentiert: // https://quasar.dev/vue-components/input#Example--Input-types

      // 1. Test mit native JS Date als Input:
      // dateTest: new Date("1991-02-27"), // JS Date gemöß https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date - funktioniert NICHT, Vue Warning:
      // "The specified value value "Wed Feb 27 1991 01:00:00 GMT+0100 (Mitteleurop\u00E4ische Normalzeit)" does not conform to the required format, "yyyy-MM-dd".""

      // 2. Tests mit Strings als Input:
      // dateTest: "", // - FUNKTIONIERT, zeigt Browser Date Picker mit leerem Datum an!
      // dateTest: "27.02.1991", // - funktioniert NICHT, kein Browser Date Picker, da falsches Date Format für Date Picker!!!
      // dateTest: "1991-02-27", // - FUNKTIONIERT am Testfeld für type="date"!!!

      // 3. Tests mit Quasar Date Util zur Generierung des Inputs:
      // dateTest: date.formatDate("27.02.1991", "YYYY-MM-DD"), // - Nutzt Quasar Utils, funktioniert NICHT, vermutlich falsches Input-Format für Quasar Date Util formatDate!!!
      // dateTest: date.formatDate("27.02.1991", "DD.MM.YYYY"), // - Nutzt Quasar Date Utils, funktioniert NICHT, vermutlich falsches Input-Format für Quasar DAte Util formatDate,
      // und "DD.MM.YYYY ist FALSCHES Date Format für Browser Date Picker!!!
      // dateTest: date.formatDate("1991-02-27", "YYYY-MM-DD"), // - Nutzt Quasar Date Utils, FUNKTIONIERT - "YYYY-MM-DD" ist KORREKTES Date Format für Browser Date Picker!

      // Fazit: Man muss also das Mongoose Date im v-model in einen String im Format "YYYY-MM-DD" umwandeln, z.B. mit eigener formatDate Funktion hier, die die Quasar Date Utils verwendet!!!
      // Mit diesem Format funktioniert dann der Browser Date Picker (nur getestet mit Chrome)!
      // Dies so eingebaut in resetAusgewaehlteBaueigenschaft und andere Funktionen in baueinheiten.vue, inklusive Rückverwandlung in das von Mongoose erwartete
      // Format "YYYY-MM-DD" in updateAusgewaehlteBaueigenschaft
      // Damit funktionieren dann die q-input Felder DatumsWert1 und DatumwsWert 2 mit type="date", was den Browser Date Picker ansteuert
      // Alternativ könnte auch Quasar QDate als Date Picker verwendet werden - siehe dazu Testcode oben im Template
      //----------------------------------------------------------------------------------------------------------------------------

      // Diverse Daten für den q-tree für die Baueinheiten und diverse andere Konstanten und Steuerungen für Dialoge:
      popupEditEnabled: false, // Für Test von Popup Editing in QTable
      alwaysOn: true, // Für Checkbox in statischem Textfeld zur Erklärung der Button-Aktionen auf der QTable
      alwaysOff: false, // Dito
      displayRightArrow: "\u2192", // Konstante für Rechtspfeil, in Moustaches {{displayRightArrow}} oben benutzt

      // v-models für Dialogsteuerungen:
      deleteBaueinheitDialog: false, // NEU: Für Steuerung Dialog mit Warnung bei Löschen einer Baueinheit
      deleteSelectedBaueinheitDialog: false, // Für Steuerung Dialog mit Warnung bei Löschen einer Baueinheit
      renameSelectedBaueinheitDialog: false, // NEU: Für Steuerung Dialog für Umbenennung einer Baueinheit
      geaenderteBezeichnungBaueinheit: null, // Für das Bezeichnungsfeld in diesem Dialog
      createNewBaueinheitDialog: false, // Für Steuerung Dialog zur Neuanalage einer Baueinheit
      createNewBaueinheitMitBauvorhabenProfilAktivierungDialog: false, // NEU: Für Steuerung Dialog zur Neuanalage einer Baueinheit mit Baueigenschaftsprofilaktivierung für Profil "Baueinheit > Bauvorhaben"
      createNewBaueinheitMitStandortProfilAktivierungDialog: false, // NEU: Für Steuerung Dialog zur Neuanalage einer Baueinheit mit Baueigenschaftsprofilaktivierung für Profil "Baueinheit > Standort"
      createNewBaueinheitMitGebaeudeProfilAktivierungDialog: false, // NEU: Für Steuerung Dialog zur Neuanalage einer Baueinheit mit Baueigenschaftsprofilaktivierung für Profil "Baueinheit > Gebäude"
      createNewBaueinheitMitGeschossProfilAktivierungDialog: false, // NEU: Für Steuerung Dialog zur Neuanalage einer Baueinheit mit Baueigenschaftsprofilaktivierung für Profil "Baueinheit > Geschoss"
      createNewBaueinheitMitRaumProfilAktivierungDialog: false, // NEU: Für Steuerung Dialog zur Neuanalage einer Baueinheit mit Baueigenschaftsprofilaktivierung für Profil "Baueinheit > Raum"
      createNewBaueinheitMitBodenaufbauProfilAktivierungDialog: false, // NEU: Für Steuerung Dialog zur Neuanalage einer Baueinheit mit Baueigenschaftsprofilaktivierung für Profil "Baueinheit > Bodenaufbau"
      bezeichnungNeueBaueinheit: null, // Für das Bezeichnungsfeld in diesem Dialog
      deleteSelectedBaueigenschaftDialog: false, // Für Steuerung Dialog mit Warnung bei Löschen einer Baueigenschaft

      /* dateLocale: {
        // Locale für q-date
        // Nicht notwendig, wenn in quasar.conf.js lang: "de" als Quasar language gesetzt wird
        // Starting with Sunday
        days: 'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),
        daysShort: 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
        months: 'Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
        monthsShort: 'Jan_Feb_Mär_Apr_Mai_Jun_Jul_Aug_Sep_Okt_Nov_Dez'.split('_'),
        firstDayOfWeek: 1
      },
      */

      //----------------------------------------------------------------------------------------------------------------------------
      // Neue dedizierte v-models für die beiden q-tab-panels mit q-forms für Baueigenschaften
      // Erstes q-tab-panel hält die Übersicht der Baueigenschaften in q-table
      // Zweites q-tab-panel mit q-form für die im ersten q-tabl-panel ausgewählte Baueigenschaft:
      // Benutzt zunächst leeres Objekt, um die in der q-table ausgewählte Baueigenschaft anzuzeigen,
      // v-model für q-form im Tab "auswahlTabBaueigenschaften"
      // ACHTUNG: {} ist nicht dasselbe wie undefined, nur bei undefined wird per v-if das Tab ausgeblendet!!!
      ausgewaehlteBaueigenschaft: null,

      // Drittes q-tab-panel mit q-form für neue Baueigenschaft:
      neueBaueigenschaft: {
        typbezogeneBaueigenschaft: "Kennwert" // Erforderlich, sonst Fehler!!!
      }, // Objekt, um neue Eigenschaft anzulegen, v-model für q-form im Tab "Neu"
      // ACHTUNG: {} ist nicht dasselbe wie undefined, nur bei undefined wird per v-if das Tab ausgeblendet!!!

      leereBaueigenschaft: {
        // ACHTUNG: Vue kann nicht ohne Weiteres Konstanten in data() deklarieren! Müssten in externe Files ausgelagert oder lokal mit const deklariert werden
        // Siehe https://github.com/vuejs/vue/issues/6004
        // Objekt, mit dem neue Baueigenschaft initialisiert und resetted wird
        // ACHTUNG: Diese Werte müssen die Mongoose Validation bestehen bei Save in die Datenbank!
        // Zu beachtende Regeln für Mongoose Validation: required-Felder müssen vorhanden und gesetzt sein
        // null heisst ein Feld ist vorhanden, aber nicht gesetzt
        // enum-Felder dürfen nur null sein, wenn in enum-Definition null dabei ist!
        // Mongoose Validation Fehler kommen als Error 500 vom Mongoose Call (z.B. save()) zurück
        // Return Parameter error.message enthält dabei die Error Message, ggf. im Controller loggen!
        baueigenschaftsBezeichnung: "",
        // obligatorischNichtOptional: false, // ACHTUNG: Es mus false (Boolean) heißen, nicht "false" (String)!!! NEU: Obligatorisch wird nicht mehr unterstützt

        baueigenschaftsAnzeigeText: null, // NEU: #514
        aktivierbar: false,
        aktiviertNichtDeaktiviert: false,

        baueigenschaftsBemerkung: null,
        bauinformation: null, // TODO

        werteTyp: "Kennwert",
        kennWert1: null,
        kennWert2: null,
        //-------------------------------------------------------------------------------------------------------------------------------------------------------
        // ALT: Initialisierung der folgenden 4 typbezogenen Felder (für Wertetyp "kennWert" bzw. "kennWertePaar" mit null - disabled:
        /*
        symbol: null,
        einheit: null,
        operator: null,
        formel: null, // NEU
        */
        //-------------------------------------------------------------------------------------------------------------------------------------------------------
        // NEU: Diese 4 typbezogenen Felder (für Wertetyp "kennWert" bzw. "kennWertePaar" enthalten Markdown - wenn sie mit null initialisiert werden,
        // wirft Vue bzw. q-markdown Fehler im Tab "Übersicht" - daher mit leerem String "" initialisiert, wie auch schon in baueigenschaften.model im Backend!
        symbol: "",
        einheit: "",
        operator: "", // TODO XXXXXX - #514
        formel: "", // NEU
        //--------------------------------------------------------------------------------------------------------------------------------------------------------
        datumsWert1: null,
        datumsWert2: null,
        tagesZeitWert1: null, // NEU
        tagesZeitWert2: null, // NEU
        bezeichnungsWert1: null,
        bezeichnungsWert2: null,
        aufzaehlungsWert: [], // ACHTUNG: Muss hier ein (leerer) Array sein für Aufnahme der im Tab "Neu" angelegten QSelect Options!!!
        // TODO: Eventuell anders im Tab "Auswahl", wo dieses Feld den tatsächlich ausgewählte Option aufnehmen muss und dann ein Objekt oder String sein kann
        wahrheitsWert: false,
        typbezogeneBaueigenschaft: {
          werteTyp: "Kennwert",
          //========================================= TODO XXXXXX #401 ========================================
          // Im Rahmen von #401 gefunden:
          // Fehlen hier nicht typbezogene Felder, z.B. selektierbareOptionenAufzaehlungswert?
          // Die fachlichen Kategorien/Rubriken alle hier in typbezogeneBaueigenschaft rein verschoben - diese waren vorher auf der Ebene darüber!
          // #401 - alte Schutzkategorien (ersetzt durch neue fachliche Kategorien/Rubriken), disabled:
          /*
          schallSchutz: false,
          wärmeSchutz: false,
          brandSchutz: false,
          raumAkustik: false,
          feuchteSchutz: false,
          chemischerHolzSchutz: false,
          abdichtungsTechnik: false,
          korrosionsSchutz: false,
          schadstoffSchutz: false,
          ökoBilanz: false,
          nachhaltigkeit: false,
          // NEU - zusätzliche Kategorien:
          energieEinsparung: false,
          gebrauchsTauglichkeit: false,
          standSicherheit: false,
          verkehrsSicherheit: false,
          barriereFreiheit: false,
          gesundheitUndHygiene: false,
          umweltVerträglichkeit: false,
          sonstiges: false,
          // NEU: #514/515
          recht: false,
          geografie: false,
          infrastruktur: false,
          geoPolitik: false,
          projektManagement: false,
          umweltUndKlima: false,
          hydroGeologie: false,
          geometrie: false,
          konstruktion: false,
          nutzungsUndBetriebsZeiten: false,
          beleuchtung: false,
          raumKlima: false,
          lastAnnahmen: false,
          materialEigenschaften: false,
          baueigenschaftsProfile: false,
          bauinformationsProfile: false,
          */
          // NEU - #401
          fachlicheKategorien: []
        },
        ererbtNichtGesetzt: false,
        systemdefiniertNichtBenutzerdefiniert: false /* Geändert MS */, // TODO XXXXXX - #514
        systemberechnetNichtSystemgesetzt: false,

        definiertNichtUndefiniert: false,
        vererbtAnKindknoten: false,
        sollwertNichtIstwert: false, // TODO XXXXXX - #514
        güteBewertung: "gelb"
      },

      //----------------------------------------------------------------------------------------------------------------------------
      // Daten für den q-splitter und die q-tab-panels für Baueinheiten und deren Baueigenschaften:
      //----------------------------------------------------------------------------------------------------------------------------
      splitterModel: this.$q.screen.gt.sm ? 18 : 36, // TODO: Wert justieren, um Scrollbalken unten zu vermeiden!!!
      splitterModelTreeBaustoffe: 45, // TODO: Wert justieren, um Scrollbalken unten zu vermeiden!!!
      tabBaueinheiten: "strukturierungsAngabenTabBaueinheiten", // Initialisieren statt null, damit kein leeres Tab angezeigt wird
      tabBaueigenschaften: "uebersichtTabBaueigenschaften", // Initialisieren statt null, damit kein leeres Tab angezeigt wird
      tabBaueigenschaftsProfilFormulare:
        "generischesProfilFormularTabBaueinheiten", // Initialisieren statt null, damit kein leeres Tab angezeigt wird

      //----------------------------------------------------------------------------------------------------------------------------
      // Daten für den q-tree für Baueinheiten:
      //----------------------------------------------------------------------------------------------------------------------------
      nodesTreeBaueinheiten: [], // :nodes v-model für den QTree für Baueinheiten
      selectedKeyTreeBaueinheiten: null, // Key, d.h. _id des ausgewählten Knotens im QTree für Baueinheiten
      expandedKeysTreeBaueinheiten: [],
      // HINWEIS: Im QTree für Baueinheiten ist bisher kein tickedKeysTreeBaueinheiten: [], deklariert, da Ticking dort aktuell nicht verwendet wird!
      filterTreeBaueinheiten: "", // NEU: Filter

      //----------------------------------------------------------------------------------------------------------------------------
      // Daten für die q-forms für Baueigenschaften:
      //----------------------------------------------------------------------------------------------------------------------------
      optionsAufzählungsWert: [
        // Options für dynamisches q-select für Wertetyp "Aufzählungswert"
        // TODO: Noch zu implementieren
      ],
      optionsGueteBewertung: ["grün", "gelb", "rot", null],

      //----------------------------------------------------------------------------------------------------------------------------
      // NEU: Daten für den q-tree für Auswahl zugeordneter Baustoffe im Tab "Zugeordnete Baustoffe" für Baueinheiten:
      //----------------------------------------------------------------------------------------------------------------------------
      nodesTreeBaustoffe: [], // :nodes v-model für den QTree für Baustoffe
      selectedKeyTreeBaustoffe: null, // Key, d.h. _id des ausgewählten Knotens im QTree für Baustoffe
      expandedKeysTreeBaustoffe: [], // HINWEIS: Nicht in data() deklariert im QTree für Baustoffe, nur :expanded.sync="expandedKeysTreeBaustoffe" !
      tickedKeysTreeBaustoffe: [], // HINWEIS: Nicht in data() deklariert im QTree für Baustoffe, nur :ticked.sync="tickedKeysTreeBaustoffe" !
      filterTreeBaustoffe: "", // Filter
      // NEU: Für #107 disabled
      // Variablen zum Zwischenspeichern der alten Werte werden nicht mehr benötigt, weil Popup-Edit-interne Logik das Zurücksetzen intern regelt
      // (Werte werden beim @cancel-Event am linken Button des QPopupEdit automatisch auf tempValuesPopupEditTreeBaustoffe, das v-model in diesem Fall, zurückgesetzt)
      /*
      oldValueAnteilVonBaustoffInBaueinheit: null, // Variable zum Merken der alten Werte der 3 erweiterten Felder im Baustoffbaum, wird von q-popup-edit verwendet
      oldValueSymbolVonBaustoffInBaueinheit: null, // Variable zum Merken der alten Werte der 3 erweiterten Felder im Baustoffbaum, wird von q-popup-edit verwendet
      oldValueEinheitVonBaustoffInBaueinheit: null, // Variable zum Merken der alten Werte der 3 erweiterten Felder im Baustoffbaum, wird von q-popup-edit verwendet
      */
      // NEU: #107
      // Variante mit temp-Variablen statt direkter Operation der q-inputs im q-popup-edit auf prop.node von treeBaustoffe
      // Grund: Mit Object.freeze aus Performance-Gründen für treeBaustoffe kann prop.node nicht mehr direkt reaktiv updated werden!
      tempValuesPopupEditTreeBaustoffe: {
        anteilVonBaustoffInBaueinheit: null, // Variable zum Merken der Werte der 3 erweiterten Felder im Baustoffbaum, wird von q-popup-edit verwendet
        symbolVonBaustoffInBaueinheit: null, // Variable zum Merken der Werte der 3 erweiterten Felder im Baustoffbaum, wird von q-popup-edit verwendet
        einheitVonBaustoffInBaueinheit: null // Variable zum Merken der Werte der 3 erweiterten Felder im Baustoffbaum, wird von q-popup-edit verwendet
      },
      //----------------------------------------------------------------------------------------------------------------------------
      // NEU: Daten für die q-hierarchy für zugeordneteBaustoffe - nur testweise benutzt - disabled:
      //----------------------------------------------------------------------------------------------------------------------------
      // dataHierarchyBaustoffe: [],
      /*
      columnsHierarchyBaustoffe: [
        {
          name: "baustoffBezeichnung",
          label: "Baustoffbezeichnung",
          field: "baustoffBezeichnung",
          align: "left",
          sortable: true,
          filterable: true,
        },
        {
          name: "baumKnotenTyp",
          label: "Baumknotentyp",
          field: "baumKnotenTyp",
          align: "right",
          sortable: true,
          filterable: true
        }
      ],
      */

      //----------------------------------------------------------------------------------------------------------------------------
      // Daten für die q-table für Baueigenschaften:
      //----------------------------------------------------------------------------------------------------------------------------
      dataTableBaueigenschaften: [], // ACHTUNG/TODO: dataTableBaueigenschaften wird aktuell nicht als v-model der q-table für die
      // Baueigenschaften verwendet - stattdessen ist das v-model aktuell selectedNodeTreeBaueinheiten.baueigenschaften!!!

      // ACHTUNG: Für separate Panels zur Bearbeitung/Neuanlage von Eigenschaften sollte man auf einem separaten
      // v-model arbeiten, sonst kommt Vue/Quasar leicht durcheinander!!!
      // Dafür gibt es schon eine computed: Funktion ausgewaehlteBaueigenschaft

      selectedRowsTableBaueigenschaften: [], // Selected Rows in der q-table für die Baueigenschaften

      selectionModeTableBaueigenschaften: "single", // "single" oder "multiple"
      // NEU: Musste als reactive Property :selection="selectionModeTableBaueigenschaften" definiert werden
      // statt simpler selection="single" Property an q-table, damit sie z.B. mittels
      // selectionModeTableBauEigenschften="single" referenziert
      // werden kann von q-checkbox für (De-)Select All in der ersten Spalte, zweite Header-Zeile

      paginationTableBaueigenschaften: {
        sortBy: "baueigenschaftsBezeichnung", // HINWEIS: Hier stand ursprünglich nur "Name"!!!
        // Es sollte aber laut q-table API Doc ein Column name (from colummn definition)" sein!!!
        descending: false,
        page: 1,
        rowsPerPage:
          globalStore.state.einstellungenBenutzer.tablesPaginationRowsPerPage // NEU - einstellbarer Wert
        // rowsPerPage: 25, // ALT
        // rowsNumber: xx if getting data from a server
        // rowsNumber ist laut https://quasar.dev/vue-components/table#Pagination nur relevant bei Server Side Pagination!!!
        // Dann müsste rowsNumber mit dem aktuellen Wert der Zeilen in der q-table für die Baueigenschaften initialisiert und ggf. updated werden,
        // z.B. in computed: selectedNodeTreeBaueinheiten (wird aufgerufen, wenn sich der selected Node im Bauvorhabenbaum ändert)
        // unter Verwendung von selectedNodeTreeBaueinheiten.baueigenschaften.length, wenn dieses initialisiert und geändert wird
      },

      columnsTableBaueigenschaften: [
        // Spalten für QTable - die Reihenfolge hier bestimmt die Reihenfolge am UI,
        // unabhängig davon, welche Spalten per visibleColumnsTableBaueigenschaften sichtbar sind
        {
          // Baueigenschaftsbezeichnung: Immer sichtbar!
          name: "baueigenschaftsBezeichnung",
          label: "Bezeichnung der Baueigenschaft",
          // field: row => row.name, // ACHTUNG: Geändert für neue Version mit v-slot für Header (q-th)
          field: row =>
            // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
            // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
            row.typbezogeneBaueigenschaft.baueigenschaftsBezeichnung,
          // format: val => `${val}`,
          align: "left",
          sortable: true
        },
        // Aktivierungsmerkmale:
        // NEU: Obligatorisch wird nicht mehr unterstützt
        /*
        {
          name: "obligatorischNichtOptional",
          label: "Obligatorisch",
          field: "obligatorischNichtOoptional",
          align: "center",
          sortable: true
        },
        */
        // NEU: Aktivierbar wird nicht mehr angezeigt
        // Da Aktivierung jetzt stets im gesamten Pfad erfolgt, wird "aktivierbar", welches anzeigte, ob eine Baueigenschaft lokal aktivierbar war,
        // nicht mehr notwendig
        /*
        {
          name: "aktivierbar",
          label: "Aktivierbar",
          field: "aktivierbar",
          align: "center",
          sortable: true
        },
        */
        {
          name: "aktiviertNichtDeaktiviert",
          label: "Aktiviert an Baueinheit?",
          field: "aktiviertNichtDeaktiviert",
          align: "center",
          sortable: true
        },
        // Kennwertbezogene Angaben
        // ALT: Direkt hinter den Kennwerten eingeblendet, um häufiges nach rechts scrollen zu verhindern!
        // In Konflikt mit dem neuen multiplen Header aus zwei Zeilen mit "Oberspalten" und "Unterspalten"
        // NEU: Kennwertbezogene Angaben vor die wertbezogenen Angaben verschoben
        {
          name: "symbol",
          label: "Symbol",
          field: row => row.typbezogeneBaueigenschaft.symbol,
          sortable: true
        },
        {
          name: "einheit",
          label: "Einheit",
          field: row => row.typbezogeneBaueigenschaft.einheit,
          align: "right",
          sortable: true
        },
        {
          name: "operator",
          label: "Operator",
          field: row => row.typbezogeneBaueigenschaft.operator,
          sortable: true
        },
        {
          // NEU:
          name: "formel",
          label: "Formel",
          field: row => row.typbezogeneBaueigenschaft.formel,
          sortable: true
        },
        {
          name: "werteTyp",
          label: "Wertetyp", // NEU
          field: row => row.typbezogeneBaueigenschaft.werteTyp,
          align: "left",
          sortable: true
        },
        // Wertbezogene Angaben:
        {
          name: "kennWert1",
          label: "Kennwert 1",
          field: "kennWert1",
          sortable: true
        },
        {
          name: "kennWert2",
          label: "Kennwert 2",
          field: "kennWert2",
          sortable: true
        },
        {
          name: "datumsWert1",
          label: "Datum 1",
          field: "datumsWert1",
          sortable: true,
          format: val => this.formatDate(val)
        },
        {
          name: "datumsWert2",
          label: "Datum 2",
          field: "datumsWert2",
          sortable: true,
          format: val => this.formatDate(val)
        },
        {
          name: "tagesZeitWert1", // NEU
          label: "Tageszeit 1",
          field: "tagesZeitWert1",
          sortable: true,
          format: val => this.formatTime(val)
        },
        {
          name: "tagesZeitWert2", // NEU
          label: "Tageszeit 2",
          field: "tagesZeitWert2",
          sortable: true,
          format: val => this.formatTime(val)
        },
        {
          name: "bezeichnungsWert1",
          label: "Bezeichnung 1",
          field: "bezeichnungsWert1",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Bezeichnungne hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "bezeichnungsWert2",
          label: "Bezeichnung 2",
          field: "bezeichnungsWert2",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Bezeichnungen hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "wahrheitsWert",
          label: "Wahrheitswert",
          field: "wahrheitsWert",
          align: "center",
          sortable: true
        },
        {
          name: "aufzaehlungsWert",
          label: "Aufzählungswert",
          field: "aufzaehlungsWert",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Aufzählungswerte hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        // Wertbezogene Merkmale:
        {
          name: "definiertNichtUndefiniert",
          label: "Definierte Werte?",
          field: "definiertNichtUndefiniert",
          align: "center",
          sortable: true
        },
        {
          name: "ererbtNichtGesetzt",
          label: "Werte ererbt von Elternbaueinheit?",
          field: "ererbtNichtGesetzt",
          align: "center",
          sortable: true
        },
        // NEU - #514 - das nächste Merkmal ist nicht mehr wertbezogen, sondern typbezogen, daher hier disabled!
        /*
        {
          name: "systemdefiniertNichtBenutzerdefiniert",
          label: "Systemdefiniert",
          field: "systemdefiniertNichtBenutzerdefiniert",
          align: "center",
          sortable: true
        },
        */
        {
          name: "systemberechnetNichtSystemgesetzt",
          label: "Werte systemberechnet?",
          field: "systemberechnetNichtSystemgesetzt",
          align: "center",
          sortable: true
        },
        {
          // NEU - fehlte (Fehler)
          name: "vererbtAnKindknoten",
          label: "Werte weitervererbt an Kindbaueinheiten?",
          field: "vererbtAnKindknoten",
          align: "center",
          sortable: true
        },
        // NEU - #514 - das nächste Merkmal ist nicht mehr wertbezogen, sondern typbezogen, daher hier disabled!
        /*
        {
          name: "sollwertNichtIstwert",
          label: "Sollwert",
          field: "sollwertNichtIstwert",
          align: "center",
          sortable: true
        },
        */
        {
          name: "güteBewertung",
          label: "Gütebewertung",
          field: "güteBewertung",
          align: "center",
          sortable: true
          // TODO: Gütebewertung wird aktuell nicht korrekt angezeigt!!! (Bug)
        },
        // Typbezogene Angaben:
        {
          name: "baueigenschaftsAnzeigeText", // NEU: #514:
          label: "Anzeigetext zur Baueigenschaft",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.baueigenschaftsAnzeigeText,
          align: "left",
          sortable: true
        },
        {
          name: "baueigenschaftsBemerkung",
          label: "Bemerkung zur Baueigenschaft",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.baueigenschaftsBemerkung,
          align: "left",
          sortable: true,
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Bemerkungen hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "systemdefiniertNichtBenutzerdefiniert", // NEU: #514:
          label: "Ist systemdefiniert?",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.systemdefiniertNichtBenutzerdefiniert,
          align: "center",
          sortable: true,
          type: "toggle" // Triggert Anzeige von Checkbox statt "true"/"false"
        },
        {
          name: "sollwertNichtIstwert", // NEU: #514:
          label: "Repräsentiert Sollwerte?",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.sollwertNichtIstwert,
          align: "center",
          sortable: true,
          type: "toggle" // Triggert Anzeige von Checkbox statt "true"/"false"
        },
        {
          name: "bauinformationsAnzeigeText", // NEU: Hier bauinformationsAnzeigeText statt bauinformationsTyp anzeigen
          label: "Zugehörige Bauinformation", // NEU
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.bauinformation !== undefined && // NEU: Zusätzlich eingefügt, sonst undefined Fehler beim Rendern der QTable!!!
            row.typbezogeneBaueigenschaft.bauinformation !== null
              ? row.typbezogeneBaueigenschaft.bauinformation
                  .bauinformationsAnzeigeText
              : null,
          // field: row => row.bauinformation.bauinformationsAnzeigeText, // Auskommentiert wegen flacher Objekte seit 12.12.19
          // ACHTUNG: Nested Property, funktioniert in q-table mit v-slots für Body nur mit speziellem Code unten!!
          // ACHTUNG: Das Feld musste zusätzlich in den Array textFields aufgenommen werden, um per v-slot angezeigt zu werden
          align: "left",
          sortable: true
        },
        {
          name: "bauinformationsTyp",
          label: "Bauinformationstyp",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.bauinformation !== undefined && // NEU: Zusätzlich eingefügt, sonst undefined Fehler beim Rendern der QTable!!!
            row.typbezogeneBaueigenschaft.bauinformation !== null
              ? row.typbezogeneBaueigenschaft.bauinformation.bauinformationsTyp
              : null,
          // field: row => row.bauinformation.bauinformationsTyp,
          // ACHTUNG: Nested Property, funktioniert in q-table mit v-slots für Body nur mit speziellem Code unten!!
          // ACHTUNG: Das Feld musste zusätzlich in den Array textFields aufgenommen werden, um per v-slot angezeigt zu werden
          align: "left",
          sortable: true
        },
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        // ALT: Schutzkategorien/fachliche Rubriken
        // NEU - #401: Neue fachliche Kategorien/Rubriken, wie in options-fachliche-kategorien-baueigenschaften.js definiert
        {
          name: "strukturAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Struktur > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "strukturEinordnung", // NEU: #514/515
          align: "center",
          label: "Einordnung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Struktur > Einordnung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "strukturZusammensetzung", // NEU: #514/515
          align: "center",
          label: "Zusammensetzung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Struktur > Zusammensetzung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "strukturProfilzuordnung", // NEU: #514/515
          align: "center",
          label: "Profilzuordnung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Struktur > Profilzuordnung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wirtschaftAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Wirtschaft > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wirtschaftHandel", // NEU: #514/515
          align: "center",
          label: "Handel", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Wirtschaft > Handel"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wirtschaftProjektsteuerung", // NEU: #514/515
          align: "center",
          label: "Projektsteuerung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Wirtschaft > Projektsteuerung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wirtschaftRecht", // NEU: #514/515
          align: "center",
          label: "Recht", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Wirtschaft > Recht"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wirtschaftKosten", // NEU: #514/515
          align: "center",
          label: "Kosten", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Wirtschaft > Kosten"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umgebungAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Umgebung > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umgebungGeografie", // NEU: #514/515
          align: "center",
          label: "Geografie", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Umgebung > Geografie"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umgebungGeopolitik", // NEU: #514/515
          align: "center",
          label: "Geopolitik", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Umgebung > Geopolitik"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umgebungInfrastruktur", // NEU: #514/515
          align: "center",
          label: "Infrastruktur", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Umgebung > Infrastruktur"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umgebungUmwelt", // NEU: #514/515
          align: "center",
          label: "Umwelt", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Umgebung > Umwelt"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umgebungKlima", // NEU: #514/515
          align: "center",
          label: "Klima", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Umgebung > Klima"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umgebungHydrogeologie", // NEU: #514/515
          align: "center",
          label: "Hydrogeologie", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Umgebung > Hydrogeologie"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikWasserUndAbwasser", // NEU: #514/515
          align: "center",
          label: "Wasser und Abwasser", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Wasser und Abwasser"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikHeizung", // NEU: #514/515
          align: "center",
          label: "Heizung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Heizung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikKühlung", // NEU: #514/515
          align: "center",
          label: "Kühlung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Kühlung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikLüftung", // NEU: #514/515
          align: "center",
          label: "Lüftung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Lüftung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikElektrik", // NEU: #514/515
          align: "center",
          label: "Elektrik", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Elektrik"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikKommunikation", // NEU: #514/515
          align: "center",
          label: "Kommunikation", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Kommunikation"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikBeförderung", // NEU: #514/515
          align: "center",
          label: "Beförderung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Beförderung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikTechnikFürSpezifischeNutzungen", // NEU: #514/515
          align: "center",
          label: "Technik für spezifische Nutzungen", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Technik für spezifischeNutzungen"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikAutomation", // NEU: #514/515
          align: "center",
          label: "Automation", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Automation"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikNutzungsUndBetriebszeiten", // NEU: #514/515
          align: "center",
          label: "Nutzungs- und Betriebszeiten", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Nutzungs- und Betriebszeiten"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikRaumklima", // NEU: #514/515
          align: "center",
          label: "Raumklima", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Raumklima"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikBeleuchtung", // NEU: #514/515
          align: "center",
          label: "Beleuchtung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Beleuchtung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikBeschattung", // NEU: #514/515
          align: "center",
          label: "Beschattung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Beschattung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebäudetechnikBelichtung", // NEU: #514/515
          align: "center",
          label: "Belichtung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebäudetechnik > Belichtung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "geometrieAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Geometrie > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "geometrieMaße", // NEU: #514/515
          align: "center",
          label: "Maße", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Geometrie > Maße"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "geometrieMengen", // NEU: #514/515
          align: "center",
          label: "Mengen", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Geometrie > Mengen"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "statikAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Statik > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "statikLasten", // NEU: #514/515
          align: "center",
          label: "Lasten", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Statik > Lasten"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "statikStandsicherheit", // NEU: #514/515
          align: "center",
          label: "Standsicherheit", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Statik > Standsicherheit"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "statikFestigkeit", // NEU: #514/515
          align: "center",
          label: "Festigkeit", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Statik > Festigkeit"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        //-
        {
          name: "konstruktionAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Konstruktion > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautenschutzAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautenschutz > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautenschutzAbdichtungstechnik", // NEU: #514/515
          align: "center",
          label: "Abdichtungstechnik", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautenschutz > Abdichtungstechnik"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautenschutzKorrosionsschutz", // NEU: #514/515
          align: "center",
          label: "Korrosionsschutz", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautenschutz > Korrosionsschutz"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautenschutzHolzschutz", // NEU: #514/515
          align: "center",
          label: "Holzschutz", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautenschutz > Holzschutz"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
         {
          name: "feuchteschutzAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Feuchteschutz > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wärmeschutzAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Wärmeschutz > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wärmeschutzEnergiebedarf", // NEU: #514/515
          align: "center",
          label: "Energiebedarf", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Wärmeschutz > Energiebedarf"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "akustikAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Akustik > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "akustikSchallschutz", // NEU: #514/515
          align: "center",
          label: "Schallschutz", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Akustik > Schallschutz"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "akustikRaumakustik", // NEU: #514/515
          align: "center",
          label: "Raumakustik", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Akustik > Raumakustik"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
         {
          name: "schwingungsUndErschütterungsschutzAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Schwingungs- und Erschütterungsschutz > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "schwingungsUndErschütterungsschutzSchwingungen", // NEU: #514/515
          align: "center",
          label: "Schwingungen", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Schwingungs- und Erschütterungsschutz > Schwingungen"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
         {
          name: "schwingungsUndErschütterungsschutzErschütterungen", // NEU: #514/515
          align: "center",
          label: "Erschütterungen", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Schwingungs- und Erschütterungsschutz > Erschütterungen"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "brandschutzAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Brandschutz > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        // ALT - entfernt:
        /*
        {
          name: "brandschutzBlitzschutz", // NEU: #514/515
          align: "center",
          label: "Blitzschutz", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Brandschutz > Blitzschutz"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        */
        {
          name: "sicherheitAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Sicherheit > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "sicherheitVerkehrssicherheit", // NEU: #514/515
          align: "center",
          label: "Verkehrssicherheit", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Sicherheit > Verkehrssicherheit"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "sicherheitBarrierefreiheit", // NEU: #514/515
          align: "center",
          label: "Barrierefreiheit", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Sicherheit > Barrierefreiheit"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "sicherheitElektrischeSicherheit", // NEU: #514/515
          align: "center",
          label: "Elektrische Sicherheit", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Sicherheit > Elektrische Sicherheit"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebrauchstauglichkeitAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebrauchstauglichkeit > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebrauchstauglichkeitBehaglichkeit", // NEU: #514/515
          align: "center",
          label: "Behaglichkeit", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gebrauchstauglichkeit > Behaglichkeit"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gesundheitAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gesundheit > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gesundheitSchadstoffschutz", // NEU: #514/515
          align: "center",
          label: "Schadstoffschutz", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gesundheit > Schadstoffschutz"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gesundheitRadonschutz", // NEU: #514/515
          align: "center",
          label: "Radonschutz", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Gesundheit > Radonschutz"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "ressourcenAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Ressourcen > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "ressourcenUmweltverträglichkeit", // NEU: #514/515
          align: "center",
          label: "Umweltverträglichkeit", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Ressourcen > Umweltverträglichkeit"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "ressourcenÖkobilanz", // NEU: #514/515
          align: "center",
          label: "Ökobilanz", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Ressourcen > Ökobilanz"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "ressourcenLebenszyklus", // NEU: #514/515
          align: "center",
          label: "Lebenszyklus", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Ressourcen > Lebenszyklus"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautechnikAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautechnik > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautechnikBauablauf", // NEU: #514/515
          align: "center",
          label: "Bauablauf", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautechnik > Bauablauf"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautechnikZeitbedarf", // NEU: #514/515
          align: "center",
          label: "Zeitbedarf", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautechnik > Zeitbedarf"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bautechnikWinterbau", // NEU: #514/515
          align: "center",
          label: "Winterbau", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Bautechnik > Winterbau"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungHerkunft", // NEU: #514/515
          align: "center",
          label: "Herkunft", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Herkunft"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungQualität", // NEU: #514/515
          align: "center",
          label: "Qualität", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Qualität"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungHerstellung", // NEU: #514/515
          align: "center",
          label: "Herstellung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Herstellung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungVerpackung", // NEU: #514/515
          align: "center",
          label: "Verpackung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Verpackung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungLieferung", // NEU: #514/515
          align: "center",
          label: "Lieferung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Lieferung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungLagerung", // NEU: #514/515
          align: "center",
          label: "Lagerung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Lagerung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungVerarbeitung", // NEU: #514/515
          align: "center",
          label: "Verarbeitung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Verarbeitung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungAnwendung", // NEU: #514/515
          align: "center",
          label: "Anwendung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Anwendung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungMontage", // NEU: #514/515
          align: "center",
          label: "Montage", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Montage"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungVerbrauch", // NEU: #514/515
          align: "center",
          label: "Verbrauch", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Verbrauch"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungNachbehandlung", // NEU: #514/515
          align: "center",
          label: "Nachbehandlung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Nachbehandlung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungBetrieb", // NEU: #514/515
          align: "center",
          label: "Betrieb", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Betrieb"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungBenutzung", // NEU: #514/515
          align: "center",
          label: "Benutzung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Benutzung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungReinigung", // NEU: #514/515
          align: "center",
          label: "Reinigung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Reinigung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungPflege", // NEU: #514/515
          align: "center",
          label: "Pflege", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Pflege"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungWartung", // NEU: #514/515
          align: "center",
          label: "Wartung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Wartung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungDemontage", // NEU: #514/515
          align: "center",
          label: "Demontage", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Demontage"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungWiederverwertung", // NEU: #514/515
          align: "center",
          label: "Wiederverwertung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Recyclilng"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verwendungEntsorgung", // NEU: #514/515
          align: "center",
          label: "Entsorgung", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Verwendung > Entsorgung"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "sonstigesAllgemein", // NEU: #514/515
          align: "center",
          label: "Allgemein", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Sonstiges > Allgemein"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "sonstigesTest", // NEU: #514/515
          align: "center",
          label: "Test", // Rubrik - Unterüberschrift in 2. Header-Zeile, die Kategorie wird in der ersten Header-Zeile angezeigt
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row =>
            row.typbezogeneBaueigenschaft.fachlicheKategorien.includes(
              "Sonstiges > Test"
            ), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.rubrikXyz, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        }
        // ----------------------------------------------------------------------------------------------------------------------------------
        // ALT: Struktur vor #401 (alte fachliche Rubriken)
        /*
        {
          name: "projektManagement", // NEU: #514/515
          align: "center",
          label: "Projektmanagement",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.fachlicheKategorien.includes("Wirtschaft > Projektsteuerung"), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.recht, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "recht", // NEU: #514/515
          align: "center",
          label: "Recht",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.fachlicheKategorien.includes("Wirtschaft > Recht"), // NEU - #401
          // field: row => row.typbezogeneBaueigenschaft.recht, // ALT
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "geografie", // NEU: #514/515
          align: "center",
          label: "Geografie",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.geografie,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "geoPolitik", // NEU: #514/515
          align: "center",
          label: "Geopolitik",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.geoPolitik,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "infrastruktur", // NEU: #514/515
          align: "center",
          label: "Infrastruktur",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.infrastruktur,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umweltUndKlima", // NEU: #514/515
          align: "center",
          label: "Umwelt und Klima",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.umweltUndKlima,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "hydroGeologie", // NEU: #514/515
          align: "center",
          label: "Hydrogeologie",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.hydroGeologie,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "geometrie", // NEU: #514/515
          align: "center",
          label: "Geometrie",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.geometrie,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "konstruktion", // NEU: #514/515
          align: "center",
          label: "Konstruktion",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.konstruktion,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "lastAnnahmen", // NEU: #514/515
          align: "center",
          label: "Lastannahmen",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.lastAnnahmen,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "nutzungsUndBetriebsZeiten", // NEU: #514/515
          align: "center",
          label: "Nutzungs- und Betriebszeiten",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.nutzungsUndBetriebsZeiten,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "raumKlima", // NEU: #514/515
          align: "center",
          label: "Raumklima",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.raumKlima,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "beleuchtung", // NEU: #514/515
          align: "center",
          label: "Beleuchtung",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.beleuchtung,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "schallSchutz",
          align: "center",
          label: "Schallschutz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.schallSchutz,
          // format: val => this.displayCheckMark(val),
          // Erste simple Lösung mit Unicode Checkmarks statt q-checkbox, wieder entfernt
          sortable: true,
          type: "toggle"
        },
        {
          name: "raumAkustik",
          align: "center",
          label: "Raumakustik",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.raumAkustik,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "wärmeSchutz",
          align: "center",
          label: "Wärmeschutz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.wärmeSchutz,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle" // Selbsterstelltes Feld um die Anzeige in der qTable zu steuern
        },
        {
          name: "energieEinsparung",
          align: "center",
          label: "Energieeinsparung",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.energieEinsparung,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle" // Selbsterstelltes Feld um die Anzeige in der qTable zu steuern
        },
        {
          name: "standSicherheit",
          align: "center",
          label: "Standsicherheit",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.standSicherheit,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "verkehrsSicherheit",
          align: "center",
          label: "Verkehrssicherheit",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.verkehrsSicherheit,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gebrauchsTauglichkeit",
          align: "center",
          label: "Gebrauchstauglichkeit",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.gebrauchsTauglichkeit,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "barriereFreiheit",
          align: "center",
          label: "Barrierefreiheit",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.barriereFreiheit,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "brandSchutz",
          align: "center",
          label: "Brandschutz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.brandSchutz,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "feuchteSchutz",
          align: "center",
          label: "Feuchteschutz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.feuchteSchutz,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "abdichtungsTechnik",
          align: "center",
          label: "Abdichtungstechnik",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.abdichtungsTechnik,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "korrosionsSchutz",
          align: "center",
          label: "Korrosionsschutz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.korrosionsSchutz,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "chemischerHolzSchutz",
          align: "center",
          label: "Holzschutz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.chemischerHolzSchutz,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "gesundheitUndHygiene",
          align: "center",
          label: "Gesundheit und Hygiene",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.gesundheitUndHygiene,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "schadstoffSchutz",
          align: "center",
          label: "Schadstoffschutz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.schadstoffSchutz,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "umweltVerträglichkeit",
          align: "center",
          label: "Umweltverträglichkeit",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.umweltVerträglichkeit,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "ökoBilanz",
          align: "center",
          label: "Ökobilanz",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.ökoBilanz,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "nachhaltigkeit",
          align: "center",
          label: "Nachhaltigkeit",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.nachhaltigkeit,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "materialEigenschaften", // NEU: #514/515
          align: "center",
          label: "Materialeigenschaften",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.materialEigenschaften,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "sonstiges",
          align: "center",
          label: "Sonstiges",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.sonstiges,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "baueigenschaftsProfile", // NEU: #514/515
          align: "center",
          label: "Baueigenschaftsprofile",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.baueigenschaftsProfile,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        },
        {
          name: "bauinformationsProfile", // NEU: #514/515
          align: "center",
          label: "Bauinformationsprofile",
          // ACHTUNG: "field" wurde früher gar nicht genutzt, stattdessen wurden die Felder per v-slots gesteuert!
          // HINWEIS: row => Lambda-Funktion, sucht nach nested Field (andere Felder sind meistens flat)
          field: row => row.typbezogeneBaueigenschaft.bauinformationsProfile,
          // format: val => this.displayCheckMark(val),
          sortable: true,
          type: "toggle"
        }
        */
      ],

      filterTableBaueigenschaften: null, // Filter für die Tabelle der Baueigenschaften

      optionsWertetypBaueigenschaft: [
        // Mögliche Optionen für den Wertetyp einer Baueigenschaft (für Dropdown-Menü)
        "Kennwert",
        "Kennwertepaar",
        "Datumswert",
        "Datumswertepaar",
        "Tageszeitwert", // NEU
        "Tageszeitwertepaar", // NEU
        "Bezeichnungswert",
        "Bezeichnungswertepaar",
        "Wahrheitswert",
        "Aufzählungswert"
      ],

      titleTableBaueigenschaften: "Eigenschaften von ",

      testModelAufzaehlungswert: ["CCC", "BBB-", "AA", "AAA", "AAA+"], // TODO: Selektierte Options für Aufzählungswert aus der Datenbank laden und per q-select anzeigen

      testOptionsAufzaehlungswert: [
        "D",
        "RD",
        "C",
        "CC",
        "CCC",
        "B-",
        "B",
        "B+",
        "BB-",
        "BB",
        "BB+",
        "BBB-",
        "BBB",
        "BBB+",
        "A-",
        "A",
        "A+",
        "AA-",
        "AA",
        "AA+",
        "AAA"
      ], // DONE: Selektierte Options für Aufzählungswert aus der Datenbank holen und per q-select anzeigen

      // Arrays, welche die Anzeige von Spalten in der QTable abhängig vom Typ steuern:
      // TODO: Sonderbehandlung von selectFields??? (aufzaehlungsWert, bauinformation)
      numericFields: ["kennWert1", "kennWert2"],

      textFields: [
        "baueigenschaftsBezeichnung",
        "baueigenschaftsAnzeigeText", // NEU: #514
        "symbol",
        "einheit",
        "baueigenschaftsBemerkung",
        // "bauinformationsBezeichnung", // ALT
        "bauinformationsAnzeigeText", // NEU - statt bauinformationsBezeichnung!
        "bauinformationsTyp", // NEU - nested Property
        "bezeichnungsWert1",
        "bezeichnungsWert2",
        "aufzaehlungsWert", // TODO: aufzaehlungsWert temporär als Textfeld
        "operator", // TODO XXXXXX: #514'
        "formel", // NEU
        "güteBewertung" // TODO: güteBewertung temporär als Textfeld
      ],

      dateFields: ["datumsWert1", "datumsWert2"],
      // TODO: selectFields implementieren (q-select)
      // selectFields: ["aufzaehlungsWert", "güteBewertung"],

      timeFields: ["tagesZeitWert1", "tagesZeitWert2"], // NEU

      typbezogeneBaueigenschaftFelder: [
        // ACHTUNG: Wird aktuell nicht verwendet!!!
        "baueigenschaftsBezeichnung",
        // #401 - alte Schutzkategorien (ersetzt durch neue fachliche Kategorien/Rubriken), disabled:
        /*
        "schallSchutz",
        "wärmeSchutz",
        "brandSchutz",
        "raumAkustik",
        "feuchteSchutz",
        "chemischerHolzSchutz",
        "abdichtungsTechnik",
        "korrosionsSchutz",
        "schadstoffSchutz",
        "ökoBilanz",
        "nachhaltigkeit",
        // NEU:
        "energieEinsparung",
        "gebrauchsTauglichkeit",
        "standSicherheit",
        "verkehrsSicherheit",
        "barriereFreiheit",
        "gesundheitUndHygiene",
        "umweltVerträglichkeit",
        "sonstiges",
        // NEU: #514/515
        "recht",
        "geografie",
        "infrastruktur",
        "geoPolitik",
        "projektManagement",
        "umweltUndKlima",
        "hydroGeologie",
        "geometrie",
        "konstruktion",
        "nutzungsUndBetriebsZeiten",
        "beleuchtung",
        "raumKlima",
        "lastAnnahmen",
        "materialEigenschaften",
        "baueigenschaftsProfile",
        "bauinformationsProfile",
        */
        // NEU - #401:
        "strukturAllgemein",
        "strukturEinordnung",
        "strukturZusammensetzung",
        "strukturProfilzuordnung",
        "wirtschaftAllgemein",
        "wirtschaftHandel",
        "wirtschaftProjektsteuerung",
        "wirtschaftRecht",
        "wirtschaftKosten", // NEU
        "umgebungAllgemein",
        "umgebungGeografie",
        "umgebungGeopolitik",
        "umgebungInfrastruktur",
        "umgebungUmwelt",
        "umgebungKlima",
        "umgebungHydrogeologie",
        "gebäudetechnikAllgemein", // NEU
        "gebäudetechnikWasserUndAbwasser", // NEU
        "gebäudetechnikHeizung", // NEU
        "gebäudetechnikKühlung", // NEU
        "gebäudetechnikLüftung", // NEU
        "gebäudetechnikElektrik", // NEU
        "gebäudetechnikKommunikation", // NEU
        "gebäudetechnikBeförderung", // NEU
        "gebäudetechnikTechnikFürSpezifischeNutzungen",
        "gebäudetechnikAutomation", // NEU
        "gebäudetechnikNutzungsUndBetriebszeiten", // NEU
        "gebäudetechnikRaumklima", // NEU
        "gebäudetechnikBeleuchtung", // NEU
        "gebäudetechnikBeschattung", // NEU
        "gebäudetechnikBelichtung", // NEU
        "geometrieAllgemein",
        "geometrieMaße",
        "geometrieMengen",
        "statikAllgemein",
        "statikLasten",
        "statikStandsicherheit",
        "statikFestigkeit",
        "konstruktionAllgemein",
        "bautenschutzAllgemein", // NEU
        "bautenschutzAbdichtungstechnik", // NEU
        "bautenschutzKorrosionsschutz", // NEU
        "bautenschutzHolzschutz", // NEU
        "feuchteschutzAllgemein",
        "wärmeschutzAllgemein",
        "wärmeschutzEnergiebedarf",
        "akustikAllgemein", // NEU
        "akustikSchallschutz", // NEU
        "akustikRaumakustik", // NEU
        "schwingungsUndErschütterungsschutzAllgemein", // NEU
        "schwingungsUndErschütterungsschutzSchwingungen", // NEU
        "schwingungsUndErschütterungsschutzErschütterungen", // NEU
        "brandschutzAllgemein",
        // "brandschutzBlitzschutz", // ALT - entfernt!
        "sicherheitAllgemein",
        "sicherheitVerkehrssicherheit",
        "sicherheitBarrierefreiheit",
        "sicherheitElektrischeSicherheit",
        "gebrauchstauglichkeitAllgemein",
        "gebrauchstauglichkeitBehaglichkeit",
        "gesundheitAllgemein",
        "gesundheitSchadstoffschutz",
        "gesundheitRadonschutz",
        "ressourcenAllgemein",
        "ressourcenUmweltverträglichkeit",
        "ressourcenÖkobilanz",
        "ressourcenLebenszyklus",
        "bautechnikAllgemein",
        "bautechnikBauablauf",
        "bautechnikZeitbedarf",
        "bautechnikWinterbau",
        "verwendungAllgemein",
        "verwendungHerkunft",
        "verwendungQualität",
        "verwendungHerstellung",
        "verwendungVerpackung",
        "verwendungLieferung",
        "verwendungLagerung",
        "verwendungVerarbeitung",
        "verwendungAnwendung",
        "verwendungMontage",
        "verwendungVerbrauch",
        "verwendungNachbehandlung",
        "verwendungBetrieb",
        "verwendungBenutzung",
        "verwendungReinigung",
        "verwendungPflege",
        "verwendungWartung",
        "verwendungDemontage",
        "verwendungWiederverwertung",
        "verwendungEntsorgung",
        "sonstigesAllgemein",
        "sonstigesTest"
      ],

      booleanFields: [
        // "obligatorischNichtOptional", // NEU: Obligatorisch wird nicht mehr unterstützt
        "aktiviertNichtDeaktiviert",
        "aktivierbar",
        //===============================================
        "definiertNichtUndefiniert",
        "ererbtNichtGesetzt",
        "systemdefiniertNichtBenutzerdefiniert",
        "systemberechnetNichtSystemgesetzt",
        "vererbtAnKindknoten", // NEU: Fehlte (Fehler)
        "sollwertNichtIstwert",
        //===============================================
        // #401 - alte Schutzkategorien (ersetzt durch neue fachliche Kategorien/Rubriken), disabled:
        /*
        "schallSchutz",
        "wärmeSchutz",
        "brandSchutz",
        "raumAkustik",
        "feuchteSchutz",
        "chemischerHolzSchutz",
        "abdichtungsTechnik",
        "korrosionsSchutz",
        "schadstoffSchutz",
        "ökoBilanz",
        // NEU:
        "energieEinsparung",
        "gebrauchsTauglichkeit",
        "standSicherheit",
        "verkehrsSicherheit",
        "barriereFreiheit",
        "gesundheitUndHygiene",
        "umweltVerträglichkeit",
        "sonstiges",
        // NEU: #514/515
        "recht",
        "geografie",
        "infrastruktur",
        "geoPolitik",
        "projektManagement",
        "umweltUndKlima",
        "hydroGeologie",
        "geometrie",
        "konstruktion",
        "nutzungsUndBetriebsZeiten",
        "beleuchtung",
        "raumKlima",
        "lastAnnahmen",
        "materialEigenschaften",
        "baueigenschaftsProfile",
        "bauinformationsProfile",
        */
        //===============================================
        "wahrheitsWert",
        //==============================================
        // NEU - #401:
        "strukturAllgemein",
        "strukturEinordnung",
        "strukturZusammensetzung",
        "strukturProfilzuordnung",
        "wirtschaftAllgemein",
        "wirtschaftHandel",
        "wirtschaftProjektsteuerung",
        "wirtschaftRecht",
        "wirtschaftKosten", // NEU
        "umgebungAllgemein",
        "umgebungGeografie",
        "umgebungGeopolitik",
        "umgebungInfrastruktur",
        "umgebungUmwelt",
        "umgebungKlima",
        "umgebungHydrogeologie",
        "gebäudetechnikAllgemein", // NEU
        "gebäudetechnikWasserUndAbwasser", // NEU
        "gebäudetechnikHeizung", // NEU
        "gebäudetechnikKühlung", // NEU
        "gebäudetechnikLüftung", // NEU
        "gebäudetechnikElektrik", // NEU
        "gebäudetechnikKommunikation", // NEU
        "gebäudetechnikBeförderung", // NEU
        "gebäudetechnikTechnikFürSpezifischeNutzungen",
        "gebäudetechnikAutomation", // NEU
        "gebäudetechnikNutzungsUndBetriebszeiten", // NEU
        "gebäudetechnikRaumklima", // NEU
        "gebäudetechnikBeleuchtung", // NEU
        "gebäudetechnikBeschattung", // NEU
        "gebäudetechnikBelichtung", // NEU
        "geometrieAllgemein",
        "geometrieMaße",
        "geometrieMengen",
        "statikAllgemein",
        "statikLasten",
        "statikStandsicherheit",
        "statikFestigkeit",
        "konstruktionAllgemein",
        "bautenschutzAllgemein", // NEU
        "bautenschutzAbdichtungstechnik", // NEU
        "bautenschutzKorrosionsschutz", // NEU
        "bautenschutzHolzschutz", // NEU
        "feuchteschutzAllgemein",
        "wärmeschutzAllgemein",
        "wärmeschutzEnergiebedarf",
        "akustikAllgemein", // NEU
        "akustikSchallschutz", // NEU
        "akustikRaumakustik", // NEU
        "schwingungsUndErschütterungsschutzAllgemein", // NEU
        "schwingungsUndErschütterungsschutzSchwingungen", // NEU
        "schwingungsUndErschütterungsschutzErschütterungen", // NEU
        "brandschutzAllgemein",
        // "brandschutzBlitzschutz", // ALT - entfernt!
        "sicherheitAllgemein",
        "sicherheitVerkehrssicherheit",
        "sicherheitBarrierefreiheit",
        "sicherheitElektrischeSicherheit",
        "gebrauchstauglichkeitAllgemein",
        "gebrauchstauglichkeitBehaglichkeit",
        "gesundheitAllgemein",
        "gesundheitSchadstoffschutz",
        "gesundheitRadonschutz",
        "ressourcenAllgemein",
        "ressourcenUmweltverträglichkeit",
        "ressourcenÖkobilanz",
        "ressourcenLebenszyklus",
        "bautechnikAllgemein",
        "bautechnikBauablauf",
        "bautechnikZeitbedarf",
        "bautechnikWinterbau",
        "verwendungAllgemein",
        "verwendungHerkunft",
        "verwendungQualität",
        "verwendungHerstellung",
        "verwendungVerpackung",
        "verwendungLieferung",
        "verwendungLagerung",
        "verwendungVerarbeitung",
        "verwendungAnwendung",
        "verwendungMontage",
        "verwendungVerbrauch",
        "verwendungNachbehandlung",
        "verwendungBetrieb",
        "verwendungBenutzung",
        "verwendungReinigung",
        "verwendungPflege",
        "verwendungWartung",
        "verwendungDemontage",
        "verwendungWiederverwertung",
        "verwendungEntsorgung",
        "sonstigesAllgemein",
        "sonstigesTest"
      ],

      booleanFieldsWertbezogen: [
        "aktiviertNichtDeaktiviert",
        "aktivierbar",
        "definiertNichtUndefiniert",
        "ererbtNichtGesetzt",
        // "systemdefiniertNichtBenutzerdefiniert", // NEU: #514
        "systemberechnetNichtSystemgesetzt",
        "vererbtAnKindknoten", // NEU: Fehlte (Fehler)
        // "sollwertNichtIstwert", // NEU: #514

        "wahrheitsWert"
      ],
      selectFieldsTypbezogen: ["werteTyp"],
      selectFieldsWertbezogen: ["aufzaehlungsWert"],
      textFieldsTypbezogen: [
        "baueigenschaftsAnzeigeText", // NEU: #514
        // "bauinformationsBezeichnung", // ALT
        "bauinformationsAnzeigeText", // NEU - statt bauinformationsBezeichnung!
        "bauinformationsTyp",
        "baueigenschaftsBemerkung"
        // "baueigenschaftsBezeichnung" // Hinweis: Auszukommentieren, wenn die Spalte im Template mit Kontextmenü enabled und gesondert behandelt wird!!!
        // "symbol", // Hinweis: Auszukommentieren für q-markdown für dieses Feld!
        // "einheit", // Hinweis: Auszukommentieren für q-markdown für dieses Feld!
        // "operator" // Hinweis: Auszukommentieren für q-markdown für dieses Feld!
        // "formel" // NEU - Hinweis: Auszukommentieren q-markdown für dieses Feld!
      ],
      booleanFieldsTypbezogen: [
        "systemdefiniertNichtBenutzerdefiniert", // NEU: #514
        "sollwertNichtIstwert", // NEU: #514
        // #401 - alte Schutzkategorien (ersetzt durch neue fachliche Kategorien/Rubriken), disabled:
        /*
        "schallSchutz",
        "wärmeSchutz",
        "brandSchutz",
        "raumAkustik",
        "feuchteSchutz",
        "chemischerHolzSchutz",
        "abdichtungsTechnik",
        "korrosionsSchutz",
        "schadstoffSchutz",
        "ökoBilanz",
        "nachhaltigkeit",
        // NEU:
        "energieEinsparung",
        "gebrauchsTauglichkeit",
        "standSicherheit",
        "verkehrsSicherheit",
        "barriereFreiheit",
        "gesundheitUndHygiene",
        "umweltVerträglichkeit",
        "sonstiges",
        // NEU: #514/515
        "recht",
        "geografie",
        "infrastruktur",
        "geoPolitik",
        "projektManagement",
        "umweltUndKlima",
        "hydroGeologie",
        "geometrie",
        "konstruktion",
        "nutzungsUndBetriebsZeiten",
        "beleuchtung",
        "raumKlima",
        "lastAnnahmen",
        "materialEigenschaften",
        "baueigenschaftsProfile",
        "bauinformationsProfile",
        */
        //===================================================
        // NEU - #401:
        "strukturAllgemein",
        "strukturEinordnung",
        "strukturZusammensetzung",
        "strukturProfilzuordnung",
        "wirtschaftAllgemein",
        "wirtschaftHandel",
        "wirtschaftProjektsteuerung",
        "wirtschaftRecht",
        "wirtschaftKosten", // NEU
        "umgebungAllgemein",
        "umgebungGeografie",
        "umgebungGeopolitik",
        "umgebungInfrastruktur",
        "umgebungUmwelt",
        "umgebungKlima",
        "umgebungHydrogeologie",
        "gebäudetechnikAllgemein", // NEU
        "gebäudetechnikWasserUndAbwasser", // NEU
        "gebäudetechnikHeizung", // NEU
        "gebäudetechnikKühlung", // NEU
        "gebäudetechnikLüftung", // NEU
        "gebäudetechnikElektrik", // NEU
        "gebäudetechnikKommunikation", // NEU
        "gebäudetechnikBeförderung", // NEU
        "gebäudetechnikTechnikFürSpezifischeNutzungen",
        "gebäudetechnikAutomation", // NEU
        "gebäudetechnikNutzungsUndBetriebszeiten", // NEU
        "gebäudetechnikRaumklima", // NEU
        "gebäudetechnikBeleuchtung", // NEU
        "gebäudetechnikBeschattung", // NEU
        "gebäudetechnikBelichtung", // NEU
        "geometrieAllgemein",
        "geometrieMaße",
        "geometrieMengen",
        "statikAllgemein",
        "statikLasten",
        "statikStandsicherheit",
        "statikFestigkeit",
        "konstruktionAllgemein",
        "bautenschutzAllgemein", // NEU
        "bautenschutzAbdichtungstechnik", // NEU
        "bautenschutzKorrosionsschutz", // NEU
        "bautenschutzHolzschutz", // NEU
        "feuchteschutzAllgemein",
        "wärmeschutzAllgemein",
        "wärmeschutzEnergiebedarf",
        "akustikAllgemein", // NEU
        "akustikSchallschutz", // NEU
        "akustikRaumakustik", // NEU
        "schwingungsUndErschütterungsschutzAllgemein", // NEU
        "schwingungsUndErschütterungsschutzSchwingungen", // NEU
        "schwingungsUndErschütterungsschutzErschütterungen", // NEU
        "brandschutzAllgemein",
        // "brandschutzBlitzschutz", // ALT - entfernt!
        "sicherheitAllgemein",
        "sicherheitVerkehrssicherheit",
        "sicherheitBarrierefreiheit",
        "sicherheitElektrischeSicherheit",
        "gebrauchstauglichkeitAllgemein",
        "gebrauchstauglichkeitBehaglichkeit",
        "gesundheitAllgemein",
        "gesundheitSchadstoffschutz",
        "gesundheitRadonschutz",
        "ressourcenAllgemein",
        "ressourcenUmweltverträglichkeit",
        "ressourcenÖkobilanz",
        "ressourcenLebenszyklus",
        "bautechnikAllgemein",
        "bautechnikBauablauf",
        "bautechnikZeitbedarf",
        "bautechnikWinterbau",
        "verwendungAllgemein",
        "verwendungHerkunft",
        "verwendungQualität",
        "verwendungHerstellung",
        "verwendungVerpackung",
        "verwendungLieferung",
        "verwendungLagerung",
        "verwendungVerarbeitung",
        "verwendungAnwendung",
        "verwendungMontage",
        "verwendungVerbrauch",
        "verwendungNachbehandlung",
        "verwendungBetrieb",
        "verwendungBenutzung",
        "verwendungReinigung",
        "verwendungPflege",
        "verwendungWartung",
        "verwendungDemontage",
        "verwendungWiederverwertung",
        "verwendungEntsorgung",
        "sonstigesAllgemein",
        "sonstigesTest"
      ],

      textFieldsWertbezogen: [
        "bezeichnungsWert1",
        "bezeichnungsWert2",
        "güteBewertung"
      ],
      visibleColumnsTableBaueigenschaften: [
        "baueigenschaftsBezeichnung", // Immer visible

        // Aktivierungsmerkmale:
        // "obligatorischNichtOptional", NEU: Obligatorisch wird nicht mehr unterstützt
        // "aktivierbar", NEU: Aktivierbar wird nicht mehr angezeigt, wird mit Aktivierung im Pfad nicht mehr benötigt
        "aktiviertNichtDeaktiviert",

        // Kennwertbezogene Angaben - anfangs nicht visible:
        /*
        "einheit",
        "symbol",
        "operator",
        "formel" // NEU
        */

        // Wertbezogene Angaben:
        "werteTyp",
        "kennWert1",
        "kennWert2",
        "datumsWert1",
        "datumsWert2",
        "tagesZeitWert1", // NEU
        "tagesZeitWert2", // NEU
        "bezeichnungsWert1",
        "bezeichnungsWert2",
        "aufzaehlungsWert",
        "wahrheitsWert"

        // Wertbezogene Merkmale - anfangs nicht visible:
        /*
        // "systemdefiniertNichtBenutzerdefiniert", // NEU: #514
        "ererbtNichtGesetzt",
        "definiertNichtUndefiniert",
        "systemberechnetNichtSystemgesetzt",
        // "sollwertNichtIstwert", // NEU: #514
        "güteBewertung"
        */

        // Weitere fachliche Angaben - anfangs nicht visible:
        /*
        "baueigenschaftsAnzeigeText", // NEU: #514
        "systemdefiniertNichtBenutzerdefiniert", // NEU: #514
        "baueigenschaftsBemerkung",
        "sollwertNichtIstwert", // NEU: #514
        "bauinformationsBezeichnung",
        "bauinformationsTyp",
        */

        // Schutzkategorien - anfangs nicht visible:
        /*
        "schallSchutz",
        "wärmeSchutz",
        "brandSchutz",
        "raumAkustik",
        "feuchteSchutz",
        "chemischerHolzSchutz",
        "abdichtungsTechnik",
        "korrosionsSchutz",
        "schadstoffSchutz",
        "ökoBilanz",
        "nachhaltigkeit"
         // NEU:
        "energieEinsparung",
        "gebrauchsTauglichkeit",
        "standSicherheit",
        "verkehrsSicherheit",
        "barriereFreiheit",
        "gesundheitUndHygiene",
        "umweltVerträglichkeit",
        "sonstiges",
        // NEU: #514/515
        "recht",
        "geografie",
        "infrastruktur",
        "geoPolitik",
        "projektManagement",
        "umweltUndKlima",
        "hydroGeologie",
        "geometrie",
        "konstruktion",
        "nutzungsUndBetriebsZeiten",
        "beleuchtung",
        "raumKlima",
        "lastAnnahmen",
        "materialEigenschaften",
        "baueigenschaftsProfile",
        "bauinformationsProfile",
        */
      ],

      aktivierungsMerkmaleAnzeigen: true,
      aktivierungsMerkmaleArray: [
        // "obligatorischNichtOptional", // NEU: Obligatorisch wird nicht mehr unterstützt
        "aktiviertNichtDeaktiviert",
        "aktivierbar"
      ],

      weitereTypbezogeneAngabenAnzeigen: false,
      weitereTypbezogeneAngabenArray: [
        "baueigenschaftsAnzeigeText", // NEU: #514
        "baueigenschaftsBemerkung",
        "systemdefiniertNichtBenutzerdefiniert", // NEU: #514
        "sollwertNichtIstwert", // NEU: #514
        // "bauinformationsBezeichnung", // ALT
        "bauinformationsAnzeigeText", // NEU - statt bauinformationsBezeichnung!
        "bauinformationsTyp"
      ],

      wertbezogeneAngabenAnzeigen: true,
      wertbezogeneAngabenArray: [
        "werteTyp",
        "kennWert1",
        "kennWert2",
        "datumsWert1",
        "datumsWert2",
        "tagesZeitWert1", // NEU
        "tagesZeitWert2", // NEU
        "bezeichnungsWert1",
        "bezeichnungsWert2",
        "aufzaehlungsWert",
        "wahrheitsWert"
      ],

      kennwertbezogeneAngabenAnzeigen: false,
      kennwertbezogeneAngabenArray: ["einheit", "symbol", "operator", "formel"], // NEU: "formel"

      wertbezogeneMerkmaleAnzeigen: false,
      wertbezogeneMerkmaleArray: [
        // "systemdefiniertNichtBenutzerdefiniert", // NEU: #514
        "ererbtNichtGesetzt",
        "definiertNichtUndefiniert",
        "systemberechnetNichtSystemgesetzt",
        "vererbtAnKindknoten", // NEU: Fehlte (Fehler)
        // "sollwertNichtIstwert", // NEU: #514
        "güteBewertung"
      ],

      // HINWEIS: "Schutzkategorien" wurden am UI umbenannt in "fachliche Rubriken"
      schutzKategorienAnzeigen: false,
      schutzKategorienArray: [
        // #401 - alte Schutzkategorien (ersetzt durch neue fachliche Kategorien/Rubriken), disabled:
        /*
        "schallSchutz",
        "wärmeSchutz",
        "brandSchutz",
        "raumAkustik",
        "feuchteSchutz",
        "chemischerHolzSchutz",
        "abdichtungsTechnik",
        "korrosionsSchutz",
        "schadstoffSchutz",
        "ökoBilanz",
        "nachhaltigkeit",
        // NEU:
        "energieEinsparung",
        "gebrauchsTauglichkeit",
        "standSicherheit",
        "verkehrsSicherheit",
        "barriereFreiheit",
        "gesundheitUndHygiene",
        "umweltVerträglichkeit",
        "sonstiges",
        // NEU: #514/515
        "recht",
        "geografie",
        "infrastruktur",
        "geoPolitik",
        "projektManagement",
        "umweltUndKlima",
        "hydroGeologie",
        "geometrie",
        "konstruktion",
        "nutzungsUndBetriebsZeiten",
        "beleuchtung",
        "raumKlima",
        "lastAnnahmen",
        "materialEigenschaften",
        "baueigenschaftsProfile",
        "bauinformationsProfile",
        */
        //=======================================================
        // NEU - #401:
        "strukturAllgemein",
        "strukturEinordnung",
        "strukturZusammensetzung",
        "strukturProfilzuordnung",
        "wirtschaftAllgemein",
        "wirtschaftHandel",
        "wirtschaftProjektsteuerung",
        "wirtschaftRecht",
        "wirtschaftKosten", // NEU
        "umgebungAllgemein",
        "umgebungGeografie",
        "umgebungGeopolitik",
        "umgebungInfrastruktur",
        "umgebungUmwelt",
        "umgebungKlima",
        "umgebungHydrogeologie",
        "gebäudetechnikAllgemein", // NEU
        "gebäudetechnikWasserUndAbwasser", // NEU
        "gebäudetechnikHeizung", // NEU
        "gebäudetechnikKühlung", // NEU
        "gebäudetechnikLüftung", // NEU
        "gebäudetechnikElektrik", // NEU
        "gebäudetechnikKommunikation", // NEU
        "gebäudetechnikBeförderung", // NEU
        "gebäudetechnikTechnikFürSpezifischeNutzungen",
        "gebäudetechnikAutomation", // NEU
        "gebäudetechnikNutzungsUndBetriebszeiten", // NEU
        "gebäudetechnikRaumklima", // NEU
        "gebäudetechnikBeleuchtung", // NEU
        "gebäudetechnikBeschattung", // NEU
        "gebäudetechnikBelichtung", // NEU
        "geometrieAllgemein",
        "geometrieMaße",
        "geometrieMengen",
        "statikAllgemein",
        "statikLasten",
        "statikStandsicherheit",
        "statikFestigkeit",
        "konstruktionAllgemein",
        "bautenschutzAllgemein", // NEU
        "bautenschutzAbdichtungstechnik", // NEU
        "bautenschutzKorrosionsschutz", // NEU
        "bautenschutzHolzschutz", // NEU
        "feuchteschutzAllgemein",
        "wärmeschutzAllgemein",
        "wärmeschutzEnergiebedarf",
        "akustikAllgemein", // NEU
        "akustikSchallschutz", // NEU
        "akustikRaumakustik", // NEU
        "schwingungsUndErschütterungsschutzAllgemein", // NEU
        "schwingungsUndErschütterungsschutzSchwingungen", // NEU
        "schwingungsUndErschütterungsschutzErschütterungen", // NEU
        "brandschutzAllgemein",
        // "brandschutzBlitzschutz", // ALT - entfernt!
        "sicherheitAllgemein",
        "sicherheitVerkehrssicherheit",
        "sicherheitBarrierefreiheit",
        "sicherheitElektrischeSicherheit",
        "gebrauchstauglichkeitAllgemein",
        "gebrauchstauglichkeitBehaglichkeit",
        "gesundheitAllgemein",
        "gesundheitSchadstoffschutz",
        "gesundheitRadonschutz",
        "ressourcenAllgemein",
        "ressourcenUmweltverträglichkeit",
        "ressourcenÖkobilanz",
        "ressourcenLebenszyklus",
        "bautechnikAllgemein",
        "bautechnikBauablauf",
        "bautechnikZeitbedarf",
        "bautechnikWinterbau",
        "verwendungAllgemein",
        "verwendungHerkunft",
        "verwendungQualität",
        "verwendungHerstellung",
        "verwendungVerpackung",
        "verwendungLieferung",
        "verwendungLagerung",
        "verwendungVerarbeitung",
        "verwendungAnwendung",
        "verwendungMontage",
        "verwendungVerbrauch",
        "verwendungNachbehandlung",
        "verwendungBetrieb",
        "verwendungBenutzung",
        "verwendungReinigung",
        "verwendungPflege",
        "verwendungWartung",
        "verwendungDemontage",
        "verwendungWiederverwertung",
        "verwendungEntsorgung",
        "sonstigesAllgemein",
        "sonstigesTest"
      ],

      formatDate: function(val) {
        //--------------------------------------------------------------------------------------------------------------------
        // Helper function for Date Formatting
        // ACHTUNG: Funktion wird oben im Template verwendet, in Methoden wird meist date.formatDate direkt aus den Quasar Date Utilities gerufen!
        // ACHTUNG: Helper Funktionen, die nicht auf Variablen in data() operieren, können in data () deklariert werden!
        // Sonst müssen sie nach methods: verschoben werden!
        // Die Mongoose Dates werden in Quasar z.B. so dargestellt: 2020-12-04T00:00:00.000Z
        // Siehe https://stackoverflow.com/questions/7443142/how-do-i-format-dates-from-mongoose-in-node-js
        // Die bessere Lösung scheint die JS Library Momentjs zu sein (var moment : require('moment'), läuft in Node und Browser)
        // Mongoose kann anscheinend nur Dates mit Time: https://stackoverflow.com/questions/7443142/how-do-i-format-dates-from-mongoose-in-node-js
        // Auch hier wird Momentjs empfohlen: https://stackoverflow.com/questions/53932266/how-to-convert-date-format-in-nodejs-using-mongoose
        //--------------------------------------------------------------------------------------------------------------------
        if (typeof val === "undefined" || val === null || val === "") {
          return;
        }
        // Ursprüngliche Variante mit eigener simpler Formatierung per Substring aus obigem Mongoose Format, das die ersten 10 Spalten abschneidet:
        // var yyyymmdd = val.substring(0, 10);
        // return yyyymmdd;

        // Stattdessen Quasar Date Utils (per obigem import { date } from 'quasar') benutzen:
        return date.formatDate(val, "DD.MM.YYYY"); // Wandelt das Datum in deutsches Format um
      },

      formatTime: function(val) {
        //--------------------------------------------------------------------------------------------------------------------
        // Helper function for Time of Day Formatting
        // ACHTUNG: Funktion wird oben im Template verwendet, in Methoden wird meist date.formatDate direkt aus den Quasar Date Utilities gerufen!
        // ACHTUNG: Helper Funktionen, die nicht auf Variablen in data() operieren, können in data () deklariert werden!
        // Sonst müssen sie nach methods: verschoben werden!
        // Die Time of Days werden am Backend abgelegt als Strings im Format: "hh:mm" (war ursprünglich "hhmm")
        // Diese Fuktion formatiert sie um nach: "hh:mm"
        // Aktuell muss keine Umformatierung erfolgen!!!
        //--------------------------------------------------------------------------------------------------------------------
        if (typeof val === "undefined" || val === null || val === "") {
          return;
        }
        // return val.substring(0, 2) + ":" + val.substring(2, 4);
        return val;
      },

      //----------------------------------------------------------------------------------------------------------------------
      // Es folgen die data()-Definitionen für die q-table im Tab "Zugeordnete Bauinformationen"
      // NEU: Sichtbare Spalten werden per q-toggles gesteuert
      // btnClickCounter: 1, // Für gemeinsames Togglen aller Normkategorien - ALT, nicht mehr verwendet
      //----------------------------------------------------------------------------------------------------------------------
      dataTableBauinformationen: [], // Array für die eigentlichen Bauinformationen (vom Backend)
      filterTableBauinformationen: null, // NEU: Für die Filterung
      // NEU: Pagination Objekt für Steuerung, muss im Template oben mit ".sync" Modifier verwendet werden: :pagination.sync="pagniationTableBauinformationen"
      paginationTableBauinformationen: {
        sortBy: "bauinformationsBezeichnung", // (initiale) Sortierungsspalte, erwartet einen Column Name aus der Column Definition der q-table
        descending: false, // Sortierungsreihenfolge
        page: 1, // Initial gezeigte Page
        rowsPerPage:
          globalStore.state.einstellungenBenutzer.tablesPaginationRowsPerPage // NEU - einstellbarer Wert
        // rowsPerPage: 30, // ALT
        // rowsNumber: xx if getting data from a server
      },
      // reloadTableBauinformationen: false, // Wird verwendet zusammen mit :loading, um die Tabelle neu zu laden, aktuell disabled

      selectedRowsTableBauinformationen: [], // Array, der die mit den Checkboxes in der ersten Spalte der q-table selektierten Rows enthält
      // HINWEIS: Dieser diente per selectedRowsTableBauinformationen[0] ursprünglich auch als v-model für die q-form im zweiten Tab.
      // Wenn dort Felder verändert wurden, änderten sich diese auch automatisch synchron in der q-table! (D.h. er ist v-model für q-table und q-form)
      // ACHTUNG: Dies führte allerdings zu Komplikationen beim Canceln - dann können Inkonsistenzen zwischen q-table und q-form zu
      // Problemen führen, z.B. konnte q-form im zweiten q-tab-panel nach eineme Cancel nicht mehr per q-input mit neuen Werten aktualisiert werden,
      // sondern erst nach einem "Zwischenstopp" (mit Re-Rendering) im ersten q-tab-panel mit der q-table
      // Daher sollten die Tabs jeweils alle dedizierte v-models haben.
      // Das v-model des zweiten Tabs muss ggf. über einen programmatisch zu verwaltenden selectedIndex (indexOf im Array mit _id)
      // mit der in der q-table ausgewählten Row "assoziiert" werden.

      visibleColumnsTableBauinformationen: [
        // Array, der die sichtbaren Columns in q-table über ein v-model steuert
        "bauinformationsBezeichnung",
        "bauinformationsTyp",
        "benutzerKennungenAutoren", // NEU
        "bauinformationsAnzeigeText", // NEU
        "bauinformationsBemerkung",
        "herausgeberGeografie",
        "herausgeberInstitution",
        "herausgeberBezeichnung",
        "herausgeberBundeslandDeutschland",
        "herausgeberBundeslandÖsterreich",
        "herausgeberKantonSchweiz",
        "gültigkeitsDatumVon",
        "gültigkeitsDatumBis",
        "normTypDIN",
        "normTypÖNORM",
        "normTypSN",
        "normTypEN",
        "normTypISO",
        "externerLink",
        "oneDriveLink", // NEU
        "internerLink"
        /*
        "grundNorm",
        "terminologieNorm",
        "prüfNorm",
        "produktNorm",
        "verfahrensNorm",
        "dienstleistungsNorm",
        "schnittstellenNorm",
        "deklarationsNorm",
        "fachbereichsNorm",
        "werkNorm"
        */
      ],

      //--------------------------------------------------------------------------------------------------------------------
      // Boolean-Variablen für die beiden "besonderen" Toggles rechts oben:
      toggleAllNormkategorienState: false, // Für gemeinsames Togglen aller Normkategorien, anfangs keine Normkategorien, d.h. false
      toggleAllColumnsState: true, // Für gemeinsames Togglen aller Spalten, anfangs alle außer Normkategorien, d.h. true

      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Variablen für Toggling der Sichtbarkeit von MEHREREN gemeinsamen Spalten in der QTable für die Bauinformationen
      // HINWEIS: Die 5 Toggles für das Toggling der EINZELNEN Spalten Autoren, Typ, Bemerkung, Geografie, Institution
      //          funktionieren anders, nämlich direkt auf dem Array visibleColumnsTableBauinformationen als v-model plus val Prop!!!
      // Siehe https://quasar.dev/vue-components/toggle#Array-model und https://quasar.dev/vue-components/toggle#QToggle-API
      regionenAnzeigen: true,
      regionenArray: [
        "herausgeberBundeslandDeutschland",
        "herausgeberBundeslandÖsterreich",
        "herausgeberKantonSchweiz"
      ],

      gueltigkeitAnzeigen: true,
      gueltigkeitArray: ["gültigkeitsDatumVon", "gültigkeitsDatumBis"],

      normTypenAnzeigen: true,
      normTypenArray: [
        "normTypDIN",
        "normTypÖNORM",
        "normTypSN",
        "normTypEN",
        "normTypISO"
      ],

      linksAnzeigen: true,
      linksArray: ["internerLink", "externerLink", "oneDriveLink"],
      //----------------------------------------------------------------------------------------------------------------------
      // ACHTUNG: Helper Funktionen, die nicht auf Variablen in data() operieren, können hier in data () deklariert werden!
      // Sonst müssen sie nach methods: verschoben werden!
      //----------------------------------------------------------------------------------------------------------------------
      displayCheckMark: function(val) {
        //--------------------------------------------------------------------------------------------------------------------
        // Helper function for Boolean val to display checkmarks instead of "true" or "false"
        // Wird aktuell nicht mehr benutzt, stattdessen werden Quasar QCheckboxes benutzt.
        // Diese triggern allerdings eine etwas größere Zeilenhöhe (unschön) - daher doch wieder displayCheckmark verwendet
        //--------------------------------------------------------------------------------------------------------------------
        if (val) {
          // return "\u2611";  // Unicode ballot box with check
          return "\u2705"; // Unicode white heavy check mark
        } else {
          return "\u2610"; // Unicode ballot box unchecked
          // return "\u2612"; // Unicode ballot box with cross
          // return "\u274C"; // Unicode cross mark
        }
      },

      //-----------------------------------------------------------------------------------------------------------------------
      columnsTableBauinformationen: [
        // Spaltendefinitionen für q-table für zugeordnete Bauinformationen
        {
          name: "bauinformationsBezeichnung",
          required: true,
          label: "Bezeichnung der Bauinformation",
          align: "left",
          field: row => row.bauinformationsBezeichnung,
          format: val => `${val}`,
          //--------------------------------------------------------------------------------------------------------------------
          //Aus der QTable Doc:
          // (optional) you can format the data with a function: format: (val, row) => `${val}%`
          // Anderes Beispiel: format: val => date.formatDate(val, ‘DD-MM-YYYY’)
          // Es können auch Funktionen (mit .this !!!) aufgerufen werden:
          // format: (val) => this.displayCheckMark(val) mit val: Boolean
          //--------------------------------------------------------------------------------------------------------------------
          sortable: true
          // Auch hier können Funktionen verwendet werden:
          // sortable: true, sort: (a, b) => parseInt(a, 10) - parseInt(b, 10)
        },
        {
          name: "bauinformationsAnzeigeText", // NEU
          align: "left",
          label: "Anzeigetext für die Bauinformation",
          field: "bauinformationsAnzeigeText",
          sortable: true
        },
        {
          name: "benutzerKennungenAutoren",
          align: "left",
          label: "Autoren",
          field: "benutzerKennungenAutoren",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell viele Benutzerkennungen hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "bauinformationsTyp",
          align: "left",
          label: "Typ",
          field: "bauinformationsTyp",
          sortable: true
        },
        {
          name: "bauinformationsBemerkung",
          align: "left",
          label: "Bemerkung zur Bauinformation",
          field: "bauinformationsBemerkung",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Bemerkungen hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "herausgeberGeografie",
          align: "left",
          label: "Geografie",
          field: "herausgeberGeografie",
          sortable: true
        },
        {
          name: "herausgeberInstitution",
          align: "left",
          label: "Institution",
          field: "herausgeberInstitution",
          sortable: true
        },
        {
          name: "herausgeberBezeichnung",
          align: "left",
          label: "Herausgeber",
          field: "herausgeberBezeichnung",
          sortable: true
        },
        {
          name: "herausgeberBundeslandDeutschland",
          align: "left",
          label: "Bundesland (D)",
          field: "herausgeberBundeslandDeutschland",
          sortable: true
        },
        {
          name: "herausgeberBundeslandÖsterreich",
          align: "center",
          label: "Bundesland (AU)",
          field: "herausgeberBundeslandÖsterreich",
          sortable: true
        },
        {
          name: "herausgeberKantonSchweiz",
          align: "left",
          label: "Kanton (CH)",
          field: "herausgeberKantonSchweiz",
          sortable: true
        },
        {
          name: "gültigkeitsDatumVon",
          align: "left",
          label: "Gültig von",
          field: "gültigkeitsDatumVon",
          format: val => this.formatDate(val),
          sortable: true
        },
        {
          name: "gültigkeitsDatumBis",
          align: "left",
          label: "Gültig bis",
          field: "gültigkeitsDatumBis",
          format: val => this.formatDate(val),
          sortable: true
        },
        {
          name: "normTypDIN",
          align: "left",
          label: "Normtyp (DIN)",
          field: "normTypDIN",
          sortable: true
        },
        {
          name: "normTypÖNORM",
          align: "center",
          label: "Normtyp (ÖNORM)",
          field: "normTypÖNORM",
          sortable: true
        },
        {
          name: "normTypSN",
          align: "center",
          label: "Normtyp (SN)",
          field: "normTypSN",
          sortable: true
        },
        {
          name: "normTypEN",
          align: "left",
          label: "Normtyp (EN)",
          field: "normTypEN",
          sortable: true
        },
        {
          name: "normTypISO",
          align: "left",
          label: "Normtyp (ISO)",
          field: "normTypISO",
          sortable: true
        },
        {
          name: "externerLink",
          align: "left",
          label: "Externer Link",
          field: "externerLink",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Links hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "oneDriveLink",
          align: "left",
          label: "OneDrive-Link",
          field: "oneDriveLink",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Links hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "internerLink",
          align: "left",
          label: "Interner BIM.click-Link",
          field: "internerLink",
          sortable: true,
          // format: (val, row) => `${val}%` // Hilft nicht, die Länge zu truncaten
          // style: "width: 1200" // Hat keine Auswirkung!
          //===========================================================================================================================================
          // NEU: Column Width für potentiell lange Links hier begrenzen, Vorlage: https://codepen.io/metalsadman/pen/XWXVNoZ
          // format: val => `${val}`, // NEU - nicht notwendig
          classes: "ellipsis", // NEU - unbedingt notwendig, um Text abzuschneiden mit "..." hinten, ohne das ragt dieser nach rechts ins nächste Feld!
          style: "max-width: 600px", // NEU
          headerStyle: "max-width: 600px" // NEU
          //===========================================================================================================================================
        },
        {
          name: "grundNorm",
          align: "center",
          label: "Grundnorm",
          field: "grundNorm",
          // format: val => this.displayCheckMark(val), // Alternative Lösung mit Unicode Checkmarks statt q-checkboxes
          sortable: true
        },
        {
          name: "terminologieNorm",
          align: "center",
          label: "Terminologienorm",
          field: "terminologieNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "prüfNorm",
          align: "center",
          label: "Prüfnorm",
          field: "prüfNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "produktNorm",
          align: "center",
          label: "Produktnorm",
          field: "produktNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "verfahrensNorm",
          align: "center",
          label: "Verfahrensnorm",
          field: "verfahrensNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "dienstleistungsNorm",
          align: "center",
          label: "Dienstleistungsnorm",
          field: "dienstleistungsNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "schnittstellenNorm",
          align: "center",
          label: "Schnittstellennorm",
          field: "schnittstellenNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "deklarationsNorm",
          align: "center",
          label: "Deklarationsnorm",
          field: "deklarationsNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "fachbereichsNorm",
          align: "center",
          label: "Fachbereichsnorm",
          field: "fachbereichsNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        },
        {
          name: "werkNorm",
          align: "center",
          label: "Werknorm",
          field: "werkNorm",
          // format: val => this.displayCheckMark(val),
          sortable: true
        }
      ],

      //-------------------------------------------------------------------------------------------------------------------------------
      // TODO - Variable für eventuelle spätere Selektion von Zeilen in der QTable für die zugeordneten Bauinformationen:
      selectedKeyTableBauinformationen: null, // NEU: Hält _id einer ausgewählten Zeile, muss bei QTable erst z.B. mit Computed Property
      // aus selectedRowsTableBauinformationen extrahiert werden (:selected.sync="selectedRowsTableBauinformationen")
      // selectedRowsTableBauinformationen ist allerdings bei multipler Selection ein Array mit evtl. mehreren Bauinformationen
      // Die Daten der selektierten Rows der q-table liegen im oben schon definierten Array selectedRowsTableBaubestimmmungen

      //--------------------------------------------------------------------------------------------------------------------------------
      // Daten für q-select für der ausgewählten Baueinheit zugeordnete Autoren (Tab "Angaben zur Baueinheit"/früher "Strukturierungsangaben")
      //--------------------------------------------------------------------------------------------------------------------------------
      selectOptionsAutorenAusgewaehlteBaueinheit: [], // Array, um Autoren aufzunehmen als Options im QSelect
      // selectOptionsAutorenAusgewaehlteBaueinheit wird entweder, bei leerem Array-Feld benutzerKennungenAutoren am Elternknoten
      // aus der Datenbank geladen werden mit den entsprechenden Daten für ALLE Autoren (= Benutzer)
      // oder (andernfalls) mit den Autoren aus dem Feld benutzerKennungenAutoren im Elternknoten der ausgewählten Baueinheit
      // Wird im Template nicht direkt referenziert, sondern dient zur Initialisierung von selectFilterOptionsAutorenAusgewaehlteBaueinheit
      // Es könnte, falls das zuviele Werte sind, auch schon beim initialen Laden zusätzlich gefiltert werden
      // (z.B. mit Toggles auf der Benutzerrolle)
      selectModelAutorenAusgewaehlteBaueinheit: [], // Model, enthält die aktuell im QSelect selektierten Objekte in einem Array
      // ACHTUNG: Muss ein Array sein bei Selection multiple bzw. :multiple=true!!!
      // Wird im Template referenziert per v-model="selectModelAutorenAusgewaehlteBaueinheit" -->
      selectFilterOptionsAutorenAusgewaehlteBaueinheit: [], // Gefilterte Options, enthält die aktuell im QSelect Dropdown zur Auswahl
      // stehenden gefilterten Objekte in einem Array - mit Filterung gemäß https://quasar.dev/vue-components/select#Example--Filtering-and-adding-to-menu
      // Wird im Template referenziert per :options="selectFilterOptionsAutorenAusgewaehlteBaueinheit"
      // Wird anfangs initialisiert mit Werten aus selectOptionsAutorenAusgewaehlteBaueinheit
      showHintSelectAutorenAusgewaehlteBaueinheit: false, // NEU: Hint am q-select nur anzeigen, wenn das q-select Fokus hat -->

      //--------------------------------------------------------------------------------------------------------------------------------
      // Steuerungen für q-dialogs, die bei Aktionen auf der q-table für die zugeordneten Bauinformationen verwendet werden:
      confirmHinweisAuswaehlenBauinformationAusQTable: false, // v-model für q-dialog bei Anwahl Tab Auswahl oder mit Buttons ohne selektierte Baubestimmmung im Tab Übersicht
      confirmHinweisAuswaehlenBauinformationAusQTableMitInternemLink: false, // v-model für q-dialog bei Anwahl Button "Internen Link öffnen" ohne Auswahl selektierte Baubestimmmung mit internem Link
      confirmHinweisAuswaehlenBauinformationAusQTableMitExternemLink: false, // v-model für q-dialog bei Anwahl Button "Externen Link öffnen" ohne Auswahl selektierte Baubestimmmung mit externem Link

      //--------------------------------------------------------------------------------------------------------------------------------
      // Daten für q-select unter q-table für zugeordnete Bauinformationen in der ausgewählten Baueinheit (Tab "Zugeordnete Bauinformationen")
      //(zu unterscheiden von zugeordneteer Bauinformation in Baueigenschaft)
      //--------------------------------------------------------------------------------------------------------------------------------
      selectOptionsBauinformationenAusgewaehlteBaueinheit: [], // Array, um ALLE Bauinformationen aufzunehmen als Options im QSelect
      // selectOptionsBauinformationenAusgewaehlteBaueinheit wird aus der Datenbank geladen werden mit den entsprechenden Daten für ALLE Bauinformationen
      // Wird im Template nicht direkt referenziert, sondern dient zur Initialisierung von selectFilterOptionsBauinformationenAusgewaehlteBaueinheit
      // Es könnte, falls das zuviele Werte sind, auch schon beim initialen Laden zusätzlich gefiltert werden
      // (z.B. mit Toggles auf den Enum-Werten für den bauinformationsTyp)
      selectModelBauinformationenAusgewaehlteBaueinheit: [], // Model, enthält die aktuell im QSelect selektierten Objekte in einem Array
      // ACHTUNG: Muss ein Array sein bei Selection multiple bzw. :multiple=true!!!
      // Wird im Template referenziert per v-model="selectModelBauinformationenAusgewaehlteBaueinheit" -->
      selectFilterOptionsBauinformationenAusgewaehlteBaueinheit: [], // Gefilterte Options, enthält die aktuell im QSelect Dropdown zur Auswahl
      // stehenden gefilterten Objekte in einem Array - mit Filterung gemäß https://quasar.dev/vue-components/select#Example--Filtering-and-adding-to-menu
      // Wird im Template referenziert per :options="selectFilterOptionsBauinformationenAusgewaehlteBaueinheit"
      // Wird anfangs initialisiert mit Werten aus selectOptionsBauinformationenAusgewaehlteBaueinheit
      showHintSelectBauinformationenAusgewaehlteBaueinheit: false, // NEU: Hint am q-select nur anzeigen, wenn das q-select Fokus hat -->

      //---------------------------------------------------------------------------------------------------------------------------------
      // Daten für q-select für zugeordnete Bauinformationen in ausgewählter Baueigenschaft (Tab "Auswahl")
      //(zu unterscheiden von zugeordneten Bauinformationen in Baueinheit)
      //---------------------------------------------------------------------------------------------------------------------------------
      selectOptionsBauinformationenAusgewaehlteBaueigenschaft: [], // Array, um ALLE Bauinformationen aufzunehmen als Options im QSelect
      // selectOptionsBauinformationenAusgewaehlteBaueigenschaft wird aus der Datenbank geladen werden mit den entsprechenden Daten für ALLE Bauinformationen
      // Wird im Template nicht direkt referenziert, sondern dient zur Initialisierung von selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft
      // Es könnte, falls das zuviele Werte sind, auch schon beim initialen Laden zusätzlich gefiltert werden
      // (z.B. mit Toggles auf den Enum-Werten für den bauinformationsTyp)
      selectModelBauinformationAusgewaehlteBaueigenschaft: {}, // Model, enthält das aktuell im QSelect selektierte Objekt
      // ACHTUNG: Darf kein Array sein bei Selection :multiple=false, auch wenn die Doku dafür vage ist ("can be anything (string, Object, ...)")
      // Wird im Template referenziert per v-model="selectModelBauinformationAusgewaehlteBaueigenschaft" -->
      selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft: [], // Gefilterte Options, enthält die aktuell im QSelect Dropdown zur Auswahl
      // stehenden gefilterten Objekte in einem Array - mit Filterung gemäß https://quasar.dev/vue-components/select#Example--Filtering-and-adding-to-menu
      // Wird im Template referenziert per :options="selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft"
      // Wird anfangs initialisiert mit Werten aus selectOptionsBauinformationenAusgewaehlteBaueigenschaft
      showHintSelectBauinformationenAusgewaehlteBaueigenschaft: false, // NEU: Hint am q-select nur anzeigen, wenn das q-select Fokus hat -->

      //---------------------------------------------------------------------------------------------------------------------------------
      // Daten für q-select für zugeordnete Bauinformationen in neuer Baueigenschaft (Tab "Neu")
      //(zu unterscheiden von zugeordneten Bauinformationen in Baueinheit)
      //---------------------------------------------------------------------------------------------------------------------------------
      selectOptionsBauinformationenNeueBaueigenschaft: [], // Array, um ALLE Bauinformationen aufzunehmen als Options im QSelect
      // selectOptionsBauinformationenAusgewaehlteBaueigenschaft wird aus der Datenbank geladen werden mit den entsprechenden Daten für ALLE Bauinformationen
      // Wird im Template nicht direkt referenziert, sondern dient zur Initialisierung von selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft
      // Es könnte, falls das zuviele Werte sind, auch schon beim initialen Laden zusätzlich gefiltert werden
      // (z.B. mit Toggles auf den Enum-Werten für den bauinformationsTyp)
      selectModelBauinformationNeueBaueigenschaft: {}, // Model, enthält das aktuell im QSelect selektierte Objekt
      // ACHTUNG: Darf kein Array sein bei Selection :multiple=false, auch wenn die Doku dafür vage ist ("can be anything (string, Object, ...)")
      // Wird im Template referenziert per v-model="selectModelBauinformationNeueBaueigenschaft" -->
      selectFilterOptionsBauinformationenNeueBaueigenschaft: [], // Gefilterte Options, enthält die aktuell im QSelect Dropdown zur Auswahl
      // stehenden gefilterten Objekte in einem Array - mit Filterung gemäß https://quasar.dev/vue-components/select#Example--Filtering-and-adding-to-menu
      // Wird im Template referenziert per :options="selectFilterOptionsBauinformationenNeueBaueigenschaft"
      // Wird anfangs initialisiert mit Werten aus selectOptionsBauinformationenNeueBaueigenschaft
      showHintSelectBauinformationenNeueBaueigenschaft: false, // NEU: Hint am q-select nur anzeigen, wenn das q-select Fokus hat -->

      //----------------------------------------------------------------------------------------------------------------------------------
      // Daten für q-select für Aufzählungswert in ausgewählter Baueigenschaft (Tab "Auswahl")
      //----------------------------------------------------------------------------------------------------------------------------------
      selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft: [], // Array, um ALLE definierten Optionen aufzunehmen als Options im QSelect
      // Anfangs leer!!! Nach Definition gefüllt mit den validen Optionen für den Aufzählungstyp, muss in Datenbank abgespeichert werden
      // und bei der weiteren Anzeige der Optionen für den Aufzählungswerts im q-select im Tab "Auswahl" dann verwendet werden.
      // Wird im Template nicht direkt referenziert, sondern dient zur Initialisierung von selectFilterOptionsAufzaehlungswerAusgewaehlteeBaueigenschaft
      selectModelAufzaehlungswertAusgewaehlteBaueigenschaft: [], // Model, enthält die aktuell im QSelect selektierten Werte in einem Array
      // ACHTUNG: Muss Array sein bei Selection :multiple=true
      // ACHTUNG: Wird im Template aktuell referenziert per v-model="selectModelAufzaehlungswertAusgewaehlteBaueigenschaft" -->
      // TODO: Alternativ könnte das v-model auch neueBaueigenschaft.aufzaehlungsWert sein, siehe Template oben!!!  -->
      selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft: [], // Gefilterte Options, enthält die aktuell im QSelect Dropdown zur Auswahl
      // stehenden gefilterten Objekte - mit Filterung gemäß https://quasar.dev/vue-components/select#Example--Filtering-and-adding-to-menu
      // Wird im Template referenziert per :options="selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft"
      // Wird anfangs initialisiert mit Werten aus selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft
      showHintSelectAufzaehlungswertAusgewaehlteBaueigenschaft: false, // NEU: Hint am q-select nur anzeigen, wenn das q-select Fokus hat -->

      //----------------------------------------------------------------------------------------------------------------------------------
      // Daten für q-select für Aufzählungswert in neuer Baueigenschaft (Tab "Neu")
      //----------------------------------------------------------------------------------------------------------------------------------
      selectOptionsAufzaehlungswertNeueBaueigenschaft: [], // Array, um ALLE definierten Optionen aufzunehmen als Options im QSelect
      // Anfangs leer!!! Nach Definition gefüllt mit den validen Optionen für den Aufzählungstyp, muss in Datenbank abgespeichert werden
      // und bei der weiteren Anzeige der Optionen für den Aufzählungswerts im q-select im Tab "Auswahl" dann verwendet werden.
      // Wird im Template nicht direkt referenziert, sondern dient zur Initialisierung von selectFilterOptionsAufzaehlungswertNeueBaueigenschaft
      selectModelAufzaehlungswertNeueBaueigenschaft: [], // Model, enthält die aktuell im QSelect selektierten Werte in einem Array
      // ACHTUNG: Muss Array sein bei Selection :multiple=true
      // ACHTUNG: Wird im Template aktuell referenziert per v-model="selectModelAufzaehlungswertNeueBaueigenschaft" -->
      // TODO: Alternativ könnte das v-model auch neueBaueigenschaft.aufzaehlungsWert sein, siehe Template oben!!!  -->
      selectFilterOptionsAufzaehlungswertNeueBaueigenschaft: [], // Gefilterte Options, enthält die aktuell im QSelect Dropdown zur Auswahl
      // stehenden gefilterten Objekte - mit Filterung gemäß https://quasar.dev/vue-components/select#Example--Filtering-and-adding-to-menu
      // Wird im Template referenziert per :options="selectFilterOptionsAufzaehlungswertNeueBaueigenschaft"
      // Wird anfangs initialisiert mit Werten aus selectOptionsAufzaehlungswertNeueBaueigenschaft
      showHintSelectAufzaehlungswertNeueBaueigenschaft: false // NEU: Hint am q-select nur anzeigen, wenn das q-select Fokus hat -->
    };
  }, // /data()

  //***=====================================================================================================================================
  methods: {
    updateBenutzer: function(newValueForSelectedKeyTreeBaueinheiten) {
      //--------------------------------------------------------------------------------------------------------------------
      // Hilfsfunktion: Macht einen Update der Benutzereinstellungen des Benutzers
      // Vorlage: einstellungen.updateBenutzer()
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In updateBenutzer()");
      console.log(
        "globalStore.state.anmeldeDatenBenutzer.idBenutzer: ",
        globalStore.state.anmeldeDatenBenutzer.idBenutzer
      );
      const apiRoute =
        process.env.API +
        "/Benutzer/" +
        globalStore.state.anmeldeDatenBenutzer.idBenutzer;
      this.$axios
        .put(apiRoute, {
          // Schickt einen Put-Request an das Backend für Update des Benutzers
          // Die folgenden Felder werden nicht aktualisiert und können weggelassen werden:
          /*
        tablesPaginationRowsPerPage: this.localStore.state
          .einstellungenBenutzer.tablesPaginationRowsPerPage, // Das oben im Form per QSelect abgeänderte Feld
        // NEU: Zusätzlich das Feld farbSchema mitgeschicken:
        farbSchema: this.localStore.state
          .einstellungenBenutzer.farbSchema, // Das oben im Form per QSelect abgeänderte Feld
        // NEU: Zusätzlich das Feld treesWerteVererbungVorhandeneWerteUeberschreibenMitWertenAusEingefuegtemZweig mitschicken:
        treesWerteVererbungVorhandeneWerteUeberschreibenMitWertenAusEingefuegtemZweig: this
          .localStore.state.einstellungenBenutzer
          .treesWerteVererbungVorhandeneWerteUeberschreibenMitWertenAusEingefuegtemZweig,
          // NEU: Für #262 7usätzlich das Feld vorgabeWerteUeberschreibenVorhandeneWerte mitschicken:
        vorgabeWerteUeberschreibenVorhandeneWerte: this
          .localStore.state.einstellungenBenutzer
          .vorgabeWerteUeberschreibenVorhandeneWerte,
        */
          // Den Wert von selectedKeyTreeBaueinheiten aktualisieren aus dem neuen Wert im watch()
          selectedKeyTreeBaueinheiten: newValueForSelectedKeyTreeBaueinheiten // NEU: #400
          // selectedKeyTreeBaustoffe:
          // newValueForSelectedKeyTreeBaustoffe, // NEU: #400
        })
        .then(response => {
          // Was im Erfolgsfall zu tun ist:
          console.log(
            "Erfolg aus $axios.put, response.status: ",
            response.status
          ); // Status loggen
          // ACHTUNG: Die Aktualisierung von selectedKeyTreeBaueinheiten im local Storage und global Store wird außerhalb dieser Funktion erledigt!
          // Bei Erfolg hier keine Benutzernachricht, da sie stören würde (Speicherung soll im Hintergrund passieren)
        })
        .catch(error => {
          // Was im Fehlerfall zu tun ist:
          console.log("Error aus $axios.put, error: ", error); // Error loggen
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BENUTZER_AENDERUNG_FEHLER
          );
        });
    },

    //--------------------------------------------------------------------------------------------------------------------------------------------
    handleSocketTimeout: function(error) {
      // Funktion, die bei Socket Timeout ausgeführt wird
      console.log("In handleSocketTimeout(): Socket Timeout wurde ausgelöst");
      console.log("error: ", error);
      Loading.hide(); // ACHTUNG: Spinner Gears hiden, sonst kann der Button in der folgenden Benutzernachricht nicht gedrückt werden!
      globalStore.showBenutzerAktion(
        // Hier Benutzeraktion mit Refresh!
        BenutzerNachrichten.BAUSTOFF_ODER_BAUEINHEIT_ZWEIG_BEWEGEN_ZEITUEBERSCHREITUNG_AKTION, // Benutzernachricht mit Aktion für Refresh-Button
        true // NEU: Hier ignorierenNichtErlauben per 2. Parameter
      );
    },

    handleBewegeZweigMitAgendaJob: async function(data, room) {
      // ACHTUNG: Muss async sein, wegen await unten!
      // NEU: Erwartet room als zweiten Parameter (= id von Agenda Job vom Backend) für leave Room
      // Funktion, die bei $socket.on Event ausgeführt wird, wenn Agenda Job am Backend complete ist (#354)
      console.log(
        "In handleBewegeZweigMitAgendaJob: Socket-Nachricht empfangen vom Backend - Agenda Job complete"
      );
      console.log("data: ", data);
      // In data.id steckte beim Testjob agendaTestJob die id aus Agenda am Backend, die als Bezeichnung vom Server beim emit Socket für
      // den client-spezifischen Room für genau diesen Agenda Job verwendet wird!
      // Im weiteren Ausbau können hier weiter Daten kommen, z.B. ob Job auf Heroku von Agenda erfolgreich oder mit Fehler completed wurde
      // Die Auslagerung in Agenda Jobs dient der Vermeidung von H12/H13 Timeout Fehlern, die auf Heroku automatisch nach 30 Sekunden ausgelöst werden.
      // Hier soll im Gefolge dann z.B. ein Refresh Event (z.B. in baueinheiten.vue, baustoffe.vue oder datenaustausch.vue) ausgelöst werden, z.B.
      // nach Verschieben von Zweigen in den Bäumen, oder nach Import
      //-------------------------------------------------------------------------------------------------------------------------------------
      // Hier nun verzögert die Aktionen nach Kopieren/Verschieben eines Zweigs ausführen, die bisher direkt nach der ersten Request-Response
      // ausgeführt wurden:
      Loading.hide(); // Spinner beenden
      // Hier Unterscheidung Kopieren/Verschieben, kann z.B. aus result entnommen werden (sonst müsste es zwischengespeichert werden in data())
      if (data.result.body.kopierenNichtVerschieben) {
        // Kopieren
        if (data.result.status === 200) {
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEINHEIT_ZWEIG_KOPIEREN_ERFOLG
          );
        } else {
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEINHEIT_ZWEIG_KOPIEREN_FEHLER
          );
        }
      } else {
        // Verschieben
        if (data.result.status === 200) {
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEINHEIT_ZWEIG_VERSCHIEBEN_ERFOLG
          );
        } else {
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEINHEIT_ZWEIG_VERSCHIEBEN_FEHLER
          );
        }
      }
      //----------------------------------------------------------------------------------------------------------------------------------------
      // Socket Cleanup-Aktionen:
      // NEU: Den $socket.on("bewegeZweigBaueinheitAgendaJobComplete") abschalten bis zum nächsten Bewegen!
      this.$socket.off("bewegeZweigBaueinheitAgendaJobComplete"); // Invalidiert den $socket.on("bewegeZweigBaueinheitAgendaJobComplete")!
      // HINWEIS: Wird mit $socket.once wahrscheinlich nicht benötigt, sicherheitshalber aber belassen!
      // NEU: Leave Room - hilft aber auch nichts gegen die Timeouts nach erfolgreicher Completion!
      this.$socket.emit("leaveRoomForAgendaJob", {
        room
      });
      this.waitingForBewegeZweigBaueinheitAgendaJobComplete = false; // NEU - Wird für Socket Timeout Steuerung benötigt
      //-----------------------------------------------------------------------------------------------------------------------------------------
      // Nun den Refresh auslösen:
      //----------------------------------------------------------------------------------------------------------------------------------------
      // this.refreshTreeBaueinheiten(); // ALT: Nun den gesamten Baum neu laden mit dieser speziellen Funktion
      //---------------------------------------------------------------------------------------------------------
      // NEU: #111 - Zielelternknoten des bewegten Zweigs expandieren - NACH await des Refreshs des Baums.
      // HINWEIS: Da der Refresh asynchron abläuft, ist await notwendig!
      console.log(
        "idWurzelZuBewegenderZweig: ",
        this.idWurzelZuBewegenderZweig
      );
      console.log("idZielElternKnoten: ", this.idZielElternKnoten);
      console.log("Vor await reloadTreeWrapper('Nicht optimiert')");
      await this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
      // ACHTUNG: Hier TypeError: this.reloadTreeWrapper is not a function bei Ausführung nach Socket-Event!!!
      //          Lösung: Deklaration von handleBewegeZweigMitAgendaJob() mit Arrow Function mit (data) => ... für korrektes this-Handling in this.$socket.once/on
      console.log("Nach await reloadTreeWrapper('Nicht optimiert')");
      this.idWurzelZuBewegenderZweig = null; // Zurücksetzen, sonst wird weiter das Icon für "markiert" angezeigt
      // ACHTUNG: Dieses Zurücksetzen als Fix für #325 von Position NACH dem Aufruf VOR den Aufruf von reloadTreeWrapper() verschoben!
      //=====================================================================================================================================
      this.$refs.treeBaueinheiten.setExpanded(this.idZielElternKnoten, true); // TODO XXXXXX Fehlerfall abhandeln!
      // ACHTUNG: TODO XXXXXX für #354
      // Hier kommt es manchmal zu undefined-Warnings im Log z.B. bei Zugriff auf das lazy-Flag des zu expandierenden Knotens
      // Ursache ist vermutlich, dass die Refresh-Funktionen nicht korrekt arbeiten bzgl. await (returnen nicht immer Promises?)
      // und der Refresh noch nicht vollständig sein kann, bevor das setExpanded ausgeführt wird!
      // Dieses Problem müsste auch beim bisherigen Refresh ohne Agenda Job, der direkt nach Response auf Request ausgeführt wird, auftreten!
      //=====================================================================================================================================
      // this.idWurzelZuBewegenderZweig = null; // Zurücksetzen, sonst wird weiter das Icon für "markiert" angezeigt
      // Ursprüngliche Position des Zurücksetzens vor der Verschiebung als Fix für #325!
    },

    /*
    runAgendaTask: function() {
      // Testfunktion für Agenda Test - verlagert nach verwaltung.vue, Test Area 16
      this.$axios
        .get(
          process.env.API +
            "/Baueinheiten/Agenda/"
        )
        .then(response => {
          console.log("Agenda:", response)
        })
    },
    */
    handleCreateSchicht: function(eventArgs) {
      console.log("In handleCreateSchicht mit eventArgs:", eventArgs);
      var idCreatedSchicht;
      this.$axios
        .post(
          process.env.API +
            "/Baueinheiten/Schichtaufbau/" +
            eventArgs.idElternknoten,
          { bezeichnung: eventArgs.gewuenschteBezeichnungNeueSchicht }
        )
        .then(response => {
          // Es kommt in data der neu angelegte Schichtknoten zurück
          // console.log("response: ", response)
          idCreatedSchicht = response.data._id;
          /*
          this.selectedNodeTreeBaueinheiten.children.push(
            response.data // Den neue angelegten Schichtknoten in den Array der Kinder pushen
          ); // Wird vom optimierten Refresh benötigt, damit dieser den neuen Knoten mit lädt!
          */
        })
        .then(_ => this.reloadTreeWrapper("Nicht optimiert")) // NEU: Wurde bisher ohne Parameter aufgerufen, dadurch optimierter Refresh!
        // Als Workaround für #358 wird hier die nicht optimierte Version aufgerufen.
        .then(_ => {
          console.log("Ausgewaehlte Schicht:", idCreatedSchicht);
          eventArgs.callback(idCreatedSchicht);
        });
    },

    submitExportBauteilkatalogAnBaueinheit: function() {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Funktion, um Export von Bauteilkatalog für die im Bauvorhabenbaum ausgewählte Baueinheit zu submitten
      // Wird durch Button im Tab "Auswertungen" aufgerufen.
      // Vorlage: Entsprechende Funktion in daten-austausch.vue
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In submitExportBauteilkatalogAnBaueinheit()");
      // ACHTUNG: /Baueinheiten//Bauteilkatalog/Export führt dagegen zu 404 Fehler, API wird nicht gefunden!
      const apiRoute =
        process.env.API +
        "/Baueinheiten/" +
        this.selectedKeyTreeBaueinheiten +
        "/Bauteilkatalog/Export";
      this.$axios
        .get(/* url */ apiRoute)
        .then(response => {
          console.log("response.data: ");
          console.log(response.data);
          this.pfadExportBauteilkatalogAnBaueinheit = response.data;
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEINHEIT_BAUTEILKATALOG_EXPORT_ERFOLG
          );
        })
        .catch(error => {
          console.log(
            "Fehler bei Export von Bauteilkatalog an Baueinheit - error:",
            error
          );
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEINHEIT_BAUTEILKATALOG_EXPORT_FEHLER
          );
        });
    },

    createExcelSheetFachlichePlanung: function() {
      //--------------------------------------------------------------------------------------------------------------------------
      // NEU: Funktion, um XLSX-Worksheet für fachliche Planung herunterzuladen für die selektierte Baueinheit
      console.log("In createExcelSheetFachlichePlanung()");
      if (this.selectedKeyTreeBaueinheiten != null) {
        console.log("baueinheitsBezeichnung und _id: ");
        console.log({
          baueinheitsBezeichnung: this.selectedNodeTreeBaueinheiten
            .baueinheitsBezeichnung, // Das ist die Bezeichnung der ausgewählten Baueinheit, dessen Beschreibung zurückgesetzt werden soll
          _id: this.selectedKeyTreeBaueinheiten // Das ist die id der ausgewählten Baueinheit, wird als req.params.id in Request URL eingefügt
        });
        const apiRoute =
          process.env.API +
          "/Baueinheiten/" +
          this.selectedKeyTreeBaueinheiten +
          "/Baueigenschaftsprofilformulare/Export";
        this.$axios
          .get(/* url */ apiRoute) // Schickt einen Get-Request an das Backend für Lesen der Felder für Baueinheit mit _id
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log(
              "Erfolg aus $axios.get, response.status: ",
              response.status
            ); // Status loggen
            console.log("response: ", response);
            this.pfadDownloadBaueigenschaftsProfilFormulareAnBaueinheit =
              response.data;
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_BAUEIGENSCHAFTSPROFILFORMULARE_EXPORT_ERFOLG
            );
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.get, err: ", error); // Status loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_BAUEIGENSCHAFTSPROFILFORMULARE_EXPORT_FEHLER
            );
          });
      }
    },

    showZugeordneteBaueigenschaftsProfileAusgewaehlteBaueinheit: function(
      node
    ) {
      // NEU: Funktion, die für Tooltip-Anzeige am Knoten im Tree die aktivierten Baueigenschaftsprofile am übergebenen node im Baum anzeigt:
      // Verwandle zuerst diesen Array of Objects [ {"baueigenschaftsProfilBezeichnung: ": "Baueinheit > Bauvorhaben"}, .., {}] in einen einfachen Array of Properties
      // Vorlage: https://stackoverflow.com/questions/19590865/from-an-array-of-objects-extract-value-of-a-property-as-array
      //=============================================================================================================================================
      // NEU: Zusätzlich im Rahmen von #272/#505 die Profile aus der Menge der zugeordneten Profile herausfiltern, für die der node der unterste Knoten ist,
      // ah dem das jeweilige Profil aktiviert ist - um zu vermeiden, dass User versehentlich "zu weit oben" im Baum
      // mit einem Profilformular editieren und damit die Knoten darunter per Vererbung versehentlich ändern
      //=============================================================================================================================================
      // Verwandle nun diesen Array of Objects [ {"baueigenschaftsProfilBezeichnung: ": "Baueinheit > Bauvorhaben"}, .., {}] in einen einfachen Array of (String) Properties
      // Vorlage: https://stackoverflow.com/questions/19590865/from-an-array-of-objects-extract-value-of-a-property-as-array
      let aktivierteBaueigenschaftsProfilBezeichnungenOriginal = node.zugeordneteBaueigenschaftsProfile.map(
        obj =>
          obj.referenzAufBaueigenschaftsProfil.baueigenschaftsProfilBezeichnung // NEU: Für #272/#515
      );
      /*
      console.log(
        "aktivierteBaueigenschaftsProfilBezeichnungenOriginal: ",
        aktivierteBaueigenschaftsProfilBezeichnungenOriginal
      );
      */
      // ---------------------------------------------------------------------------------------------------------------------------------
      // NEU - #502:
      // Für die Unterstützung von unterschiedlichen Raum-Nutzungsprofilen, deren Bezeichnung per Konvention stets "Baueinheit > Raum > ..." lautet,
      // muss hier eine Umwandlung erfolgen, die diese Profile alle nach "Baueinheit > Raum" ändert für den nachfolgenden Filter-Vergleich:
      // Vorlage: https://stackoverflow.com/questions/34925609/javascript-map-method-on-array-of-string-elements
      var gemerkteRaumProfilBezeichnung = "Baueinheit > Raum"; // Initialisierung für die gemerkte Raumprofilbezeichnung, Teil des Quick Fixes weiter unten
      let aktivierteBaueigenschaftsProfilBezeichnungen = aktivierteBaueigenschaftsProfilBezeichnungenOriginal.map(
        function(ele) {
          if (ele.startsWith("Baueinheit > Raum > ")) {
            gemerkteRaumProfilBezeichnung = ele; // Für Quick Fix weiter unten hier die ggf. nach "Baueinheit > Raum" geänderte Raumprofilbezeichnung "Baueinheit > Raum > ..." merken
            return "Baueinheit > Raum";
          } else {
            return ele;
          }
        }
      );
      /*
      console.log(
        "aktivierteBaueigenschaftsProfilBezeichnungen nach map: ",
        aktivierteBaueigenschaftsProfilBezeichnungen
      );
      */
      // ---------------------------------------------------------------------------------------------------------------------------------
      // Filtere nun aus dem zentralen Array hierarchieAllerBaueigenschaftsProfile die an node aktivierten Profile heraus (unter Beibehaltung der Reihenfolge)
      // Vorlage: https://stackoverflow.com/questions/19957348/remove-all-elements-contained-in-another-array
      let hierarchieAktivierterBaueigenschaftsProfile = this.hierarchieAllerBaueigenschaftsProfile.filter(
        // Konstanter Array hierarchieAllerBaueigenschaftsProfile definiert die Hierarchie der Baueigenschaftsprofile, links im Array entspricht "oben", rechts "unten"
        ele => aktivierteBaueigenschaftsProfilBezeichnungen.includes(ele)
      );
      /*
      console.log(
        "hierarchieAktivierterBaueigenschaftsProfile: ",
        hierarchieAktivierterBaueigenschaftsProfile
      );
      */
      // Nun zusätzlich im Rahmen von #272/#515 nur die Profile aus diesem Array herausfiltern, für die der Node der unterste Knoten
      // im Pfad ist, an dem das jeweilige Profil aktiviert ist. Dafür neue Funktion
      // nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(node, baueigenschaftsProfilBezeichnung)
      // Also weiteren Array filter mit dieser Funktion:
      //=========================================================================================================================================
      // ACHTUNG - #502 TODO XXXXXX: Hier ähnlicher Fehler im Kontext von Baueigenschaftsprofilvarianten für #502 wie in
      // getTabVonHierarchischOberstemProfilFormularInAktiviertenBaueigenschaftsProfilen() - siehe Kommentare dort!
      // hierarchieAktivierterBaueigenschaftsProfile enthält nach obigem erstem Fix für #502 auch hier nur "Baueinheit > Raum", während die Funktion
      // nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst auf "Baueinheit > Raum > Wohnen > Flur in der Wohnung" basiert (das korrekt
      // aktivierte Profil vom Backend, das im Array zugeordneteBaueigenchaftsProfile steht).
      // Daher liefert die folgende filter-Funktion in diesem Fall keinen Match zurück, was dazu führt, dass fälschlich keine Profile als unterste erkannt werden,
      // insbesondere nicht "Baueinheit > Raum > Wohnen > Flur in der Wohnung"
      // Quick Fix dafür: Statt "Baueinheit > Raum" die oben gemerkte Bezeichnung des Raumprofils nehmen, für alle anderen Profile den Filtervergleich belassen
      //=========================================================================================================================================
      let untersteAktivierteBaueigenschaftsProfile = hierarchieAktivierterBaueigenschaftsProfile.filter(
        ele =>
          this.nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
            node,
            ele === "Baueinheit > Raum" ? gemerkteRaumProfilBezeichnung : ele // #502 - Quick Fix, siehe Kommentare oben, zeigt allerdings für alle Raumprofile einfach "Baueinheit > Raum" an!
          )
      );
      /*
      console.log(
        "untersteAktivierteBaueigenschaftsProfile: ",
        untersteAktivierteBaueigenschaftsProfile
      );
      */
      if (untersteAktivierteBaueigenschaftsProfile.length === 0) return "Keine";
      else {
        return untersteAktivierteBaueigenschaftsProfile
          .toString()
          .replace(/Baueinheit > /g, "") // NEU: Für #375 - Präfix "Baueinheit > " an allen Profilen hier im Tooltip entfernen
          .replace(/,/g, ", "); // Replace all occurences of  ", " by ", " - jeweils ein Blank nach den Kommas einfügen
        // https://stackoverflow.com/questions/5865257/finding-a-substring-and-inserting-another-string
      }
    },

    doNothing: function() {
      //------------------------------------------------------------------------------------------------------------------------------
      // Funktion doNothing
      // @input Test-Methode für q-popup-edit mit value Prop - tut nichts
    },

    //-------------------------------------------------------------------------------------------------------------------------------
    // Funktion wechselndeTestMethode
    // Testmethode, wird im Tab "Sonstiges" über Button aufgerufen
    //------------------------------------------------------------------------------------------------------------------------------
    wechselndeTestMethode: function() {
      // Test, ob Baueigenschaft mit bekannter baueigenschaftsBezeichnung im Array der Baueigenschaften ist, per some:
      // Siehe https://stackoverflow.com/questions/143847/best-way-to-find-if-an-item-is-in-a-javascript-array
      // ACHTUNG: Some liefert nur Boolean zurück (Test, ob enthalten)!!!
      // ACHTUNG: Bei Mongoose/MongoDB id Vergleichen equals verwenden, nicht "===" - siehe
      //          https://stackoverflow.com/questions/11637353/comparing-mongoose-id-and-strings/37421766
      console.log("In wechselndeTestMethode()");
      if (
        this.selectedNodeTreeBaueinheiten.baueigenschaften.some(
          item =>
            item.typbezogeneBaueigenschaft.baueigenschaftsBezeichnung ===
            "Herstellerlangbezeichnung (Beispiel)"
        )
      ) {
        console.log("Baueigenschaft gefunden!");
      }
      // Zugriff auf die Baueigenschaft mit bekannter baueigenschaftsBezeichnung im Array der Baueigenschaften per findIndex:
      // Siehe https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex
      var i = this.selectedNodeTreeBaueinheiten.baueigenschaften.findIndex(
        item =>
          item.typbezogeneBaueigenschaft.baueigenschaftsBezeichnung ===
          "Herstellerlangbezeichnung (Beispiel)"
      );
      console.log("Index i: ", i);
      // Reaktive Änderungen im Array können, müssen aber per Test nicht per $set erfolgen: Funktioniert!
      this.$set(
        this.selectedNodeTreeBaueinheiten.baueigenschaften[i],
        "bezeichnungsWert1",
        "Neu: ABC"
      );
      console.log(
        "selectedNodeTreeBaueinheiten.baueigenschaften[",
        i,
        "].bezeichnungsWert1: ",
        this.selectedNodeTreeBaueinheiten.baueigenschaften[i].bezeichnungsWert1
      );
      // Weitere normale Zugriffe auf Felder der Eigenschaft mit diesem Index i:
      // this.selectedNodeTreeBaueinheiten.baueigenschaften[i].typbezogeneBaueigenschaft.baueigenschaftsBezeichnung = "Projektbezeichnung" // Besser nicht ändern...
      // this.selectedNodeTreeBaueinheiten.baueigenschaften[i].typbezogeneBaueigenschaft.werteTyp = "Bezeichnungswert" // Besser nicht ändern...
      this.selectedNodeTreeBaueinheiten.baueigenschaften[i].bezeichnungsWert2 =
        "Neu: XYZ"; // Funktioniert auch! Also nicht unbedingt per $set nötig!
      console.log(
        "selectedNodeTreeBaueinheiten.baueigenschaften[",
        i,
        "].bezeichnungsWert2: ",
        this.selectedNodeTreeBaueinheiten.baueigenschaften[i].bezeichnungsWert2
      );
      // HINWEIS: Im Tab "Baueigenschaften/Übersicht" werden diese geänderten Werte auch angezeigt, selbst wenn die betreffende Baueigenschaft
      // vorher nicht aktiviert wurde, egal ob mit $set oder ohne gesetzt.
      // Das v-model für die dortige q-table ist selectedNodeTreeBaueinheiten.baueigenschaften.
    },

    //==========================================================================================================================
    istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst: function(
      node, // Parameter: Der im Bauvorhabenbaum ausgewählte Knoten (Verweis auf Baueinheit)
      baueigenschaftsProfilBezeichnung, // Bezeichnung eines Profils
      modus // String-Parameter zur Fallunterscheidung, ob Aufruf aus Kontextmenü zur "Aktivierung am Knoten" oder "Aktivierung am Kindknoten" - siehe Kommentare unten
    ) {
      // NEU: Funktion, um zu bestimmen, ob das per Parameter übergebene Baueigenschaftsprofil im Pfad aufwärts inklusive des per Parameter node
      // übergebenen Knotens bereits aktiviert ist (liefert true oder false zurück)
      // Im Rahmen von #278 wurde noch die Zusatzbedingung eingebaut, dass der Node der unterste im Pfad sein muss, an dem das Profil aktiviert ist
      //--------------------------------------------------------------------------------------------------------------------------------------------
      // Die Funktion prüft, ob das per Parameter übergebene Baueigenschaftsprofil an einem Knoten im Pfad einschließlich des per Parameter Node übergebenen
      // Knotens aufwärts bereits aktiviert ist - das kann, muss aber nicht am direkten Elternknoten der Fall sein!
      // WICHTIG: Den Wurzelknoten und den Knoten "Bauprojekte" vor dieser Prüfung aus dem Pfad entfernen, da dort i.a. alle Profile aktiviert sind.
      // Der Fall, dass eine Baueigenschaft am Knoten selbst bzw. bei Aktivierung von Kindknoten am neuen Elternknoten aktiviert ist, wird bereits jetzt in der disable-Prüfung
      // ausgeschlossen am disable mit einer separaten Funktion - diese Funktion wird dann nicht mehr benötigt, da der Fall hier mit eingeschlossen ist.
      // Dafür muss allerdings der Knoten selbst mit in die Prüfung einbezogen werden (darf nicht weggesliced werden).
      // ÜBERLEGUNG: Dies erlaubt sowohl, dass "Baueinheit > Standort" am obersten Knoten aktiviert wird, als auch "Baueinheit > Bauvorhaben" - darunter kann dann
      // jeweils "Baueinheit > Bauvorhaben" oder "Baueinheit > Standort" aktiviert werden.
      //=============================================================================================================================================
      // ACHTUNG - FEHLER/TODO XXXXXX #277: Die Logik dieser Funktion funktioniert zwar auf einem einzelnen Pfad, verhindert aber an Geschwisterknoten
      //           die Profilaktivierung, da nach Aktivierung eines Profils in einem Geschwisterknoten dieses Profil auch im Pfad aller Geschwisterknoten
      //           aktiviert ist und dann das Profil an diesen für die Aktivierung disabled wird!!! Tritt z.B. auf, wenn man einen Kindknoten für "Standort"
      //           anlegt und anschließend das Profil "Baueinheit > Standort" an einem Geschwisterknoten, an dem das Profil noch nicht aktiviert ist, aktivieren will.
      //           Daher diese Funktion einstweilen wieder disabled und durch einfache Prüfung ersetzt, ob das Profil am jeweiligen Node schon aktiviert
      //           ist oder nicht.
      // LÖSUNG:   Zusätzlich mit Funktion nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(node, baueigenschaftsProfilBezeichnung)
      //           oder dem zugehörigen Flag am Node prüfen, ob der gefundene Knoten, an dem das Profil im Pfad weiter oben aktiviert ist, der unterste Knoten ist, an dem das Profil
      //           aktiviert ist - wenn ja true zurückliefern (Profil ist weiter oben "echt" schon aktiviert), wenn nein "false" zurückliefern,
      //           so dass das Profil am Node aktiviert werden darf (der in diesem Fall z.B. ein Geschwisterknoten eines Nodes sein könnte, an dem
      //           das Profil schon aktiviert wurde).
      // ACHTUNG:  Der Bauvorhabenbaumwurzelknoten und dessen direkten Unterknoten "Bauvorlagen" und "Bauprojekte" haben am Anfang eine vorläufige
      //           Spezialbehandlung returnen, sonst kann man dort keine Aktivierungen machen und keine Kindbaueinheiten anlegen mit Profilaktivierung
      //           TODO XXXXXXX - dies muss noch besser gelöst werden, genauere Unterscheidungen nach Benutzerrolle, etc.
      //=============================================================================================================================================
      // AUSBAUSTUFE: (Optionale) "Erzwingung" einer bestimmten Hierarchie der Aktivierung der Baueigenschaftsprofile?
      //=============================================================================================================================================
      // ACHTUNG: Funktion muss den Pfad von unten nach oben durchlaufen. Da in path der Wurzelknoten vorne steht, muss dieser reversed werden.
      // ACHTUNG: Zur korrekten Funktion mussste am Backend in baueinheiten.controller.js, readKindKnotenBaueinheit() der Array
      // zugeordneteBaueigenschaftsProfile mit dem Feld baueigenschaftsProfilBezeichnung erst populiert werden!
      //=============================================================================================================================================
      var enableLogging = false;
      function extendedLog(args) {
        if (enableLogging) {
          console.log(args);
        }
      }

      extendedLog(
        "In istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst()"
      );
      extendedLog(
        "Parameter baueigenschaftsProfilBezeichnung: ",
        baueigenschaftsProfilBezeichnung
      );
      extendedLog("node.baueinheitsBezeichnung: ", node.baueinheitsBezeichnung);
      // Zunächst gesonderte Behandlung der systemseitigen oberen Knoten im Bauvorhabenbaum:
      if (node.baueinheitsBezeichnung.startsWith("Bauprojekte")) {
        // TODO XXXXXX #264: Der Code hier für den Unterbaum für "Bauprojekte" ist vorläufig!!!
        extendedLog(
          "Node Bauprojekteunterbaumwurzelknoten gesondert behandeln"
        );
        if (
          this.localStore.state.anmeldeDatenBenutzer.benutzerRolle ===
          "Mitarbeiter"
        ) {
          if (modus === "Aktivierung am Kindknoten") {
            extendedLog(
              "Vor Return false für Aktivierung am neu anzulegenden Kindknoten unter Node Bauprojekteunterbaumwurzelknoten durch Mitarbeiter aus istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst()"
            );
            return false; // Am neuen Kindknoten dürfen die Profile aktiviert werden durch Mitarbeiter, nicht an diesen Knoten selbst - TODO XXXXXX - vorläufiger Code
          } else {
            extendedLog(
              "Vor Return true für Aktivierung am Node Bauprojekteunterbaumwurzelknoten selbst durch Mitarbeiter aus istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst()"
            );
            return true; // Keine Aktivierung durch Mitarbeiter an diesen Knoten selbst
          }
        } else {
          // Admin, darf vorläufig sowohl am Knoten als auch am neu angelegten Kindknoten aktivieren
          extendedLog(
            "Vor Return false für Aktivierung am Kindknoten unter Node Bauprojekteunterbaumwurzelknoten durch Mitarbeiter aus istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst()"
          );
          return false; // Am neuen Kindknoten dürfen die Profile aktiviert werden durch Mitarbeiter, nicht an diesen Knoten selbst - TODO XXXXXX - vorläufiger Code
        }
      }
      if (node.baumKnotenTyp === "Bauvorlagenunterbaumwurzelknoten") {
        // TODO XXXXXX - der Code hier für den Unterbaum für "Vorlagen" ist vorläufig!!!
        extendedLog(
          "Node Bauvorlagenunterbaumwurzelknoten gesondert behandeln"
        );
        if (
          this.localStore.state.anmeldeDatenBenutzer.benutzerRolle ===
          "Mitarbeiter"
        ) {
          extendedLog(
            "Vor Return true für Aktivierungen am oder unter dem Node Bauvorlagenunterbaumwurzelknoten durch Mitarbeiter aus istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst()"
          );
          return true; // Keine Aktivierung durch Mitarbeiter am oder unter diesem Knoten
        } else {
          // Admin, darf vorläufig sowohl am Knoten als auch am neu angelegten Kindknoten aktivieren
          extendedLog(
            "Vor Return false für Aktivierung am oder unter dem Node Bauvorlagenunterbaumwurzelknoten durch Aministratoren aus istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst()"
          );
          return false;
        }
      }
      if (node.baumKnotenTyp === "Wurzelknoten") {
        // TODO XXXXXX - der Code hier für Bauvorhabenbaumwurzelknoten ist vorläufig!!!
        extendedLog("Node Bauvorlagenbaumwurzelknoten gesondert behandeln");
        if (
          this.localStore.state.anmeldeDatenBenutzer.benutzerRolle ===
          "Mitarbeiter"
        ) {
          extendedLog(
            "Vor Return true für Aktivierungen am oder unter dem Node Bauvorhabenbaumwurzelknoten durch Mitarbeiter aus istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst()"
          );
          return true; // Keine Aktivierungen durch Mitarbeiter an oder unter diesem  Knoten
        } else {
          // Admin, darf vorläufig sowohl am Knoten als auch am neu angelegten Kindknoten aktivieren
          extendedLog(
            "Vor Return false für Aktivierung am oder unter dem Node Bauvorhabenbaumwurzelknoten durch Aministratoren aus istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst()"
          );
          return false;
        }
      }
      //----------------------------------------------------------------------------------------
      // Für übrige, "normale" Knoten nun hier mit der eigentlichen Logik der Funktion weitermachen:
      extendedLog("Vor Ermittlung des Pfads für den Knoten");
      let idsImPfad = node.path.split("#"); // Array mit ids im Pfad
      extendedLog("idsImPfad: ", idsImPfad);
      if (idsImPfad.length <= 2) {
        // Funktion ist nur für Knoten unterhalb von "Bauprojekte" bzw. "Vorlagen für Bauprojekte" sinnvoll!
        return true; // Oberhalb dieser Knoten sollten Baueigenschaftsprofile als aktiviert gelten
        // TODO XXXXXX #335 - bei Einführung einer Strukturierungsebene unter "Bauprojekte" müsste diese Abfrage
        // in diesem Zweig "Bauprojekte" ggf. angepasst werden auf <= 3
      } else {
        // Array-Länge mindestens 3
        // ALT (disabled) Den Knoten selbst aus dem Pfad entfernen (letztes Element im Array):
        // idsImPfad = idsImPfad.slice(0, -1); // Siehe https://stackoverflow.com/questions/19544452/remove-last-item-from-array
        // extendedLog("idsImPfad nach slice():", idsImPfad);
        // Wurzelknoten steht vorn im Pfad! Daher nun den Array umdrehen:
        idsImPfad.reverse(); // Umgekehrte Reihenfolge!!!
        extendedLog("idsImPfad nach reverse():", idsImPfad);
        // Nun die letzten 2 Elemente aus dem Array entfernen (Wurzelknoten und Bauprojekt- bzw. Bauvorlagenunterbaumwurzelknoten)
        idsImPfad = idsImPfad.slice(0, -2); // Siehe https://stackoverflow.com/questions/19544452/remove-last-item-from-array
        extendedLog("idsImPfad nach slice():", idsImPfad);
        /*
        // ALT - kann durch obige Längenprüfung nicht mehr vorkommen - Array sollte nun mindestens Länge 1 haben, d.h. mindestens den node selbst enthalten
        if (idsImPfad == null) {
          extendedLog("Vor return false aus istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst() bei leerem Pfad");
          return false;
        }
        */
        let indexZugeordneteBaueigenschaftsProfile = null;
        let aktuellerNode = node;
        let profileImAktuellenNode =
          aktuellerNode.zugeordneteBaueigenschaftsProfile;
        for (let id of idsImPfad) {
          aktuellerNode = this.$refs.treeBaueinheiten.getNodeByKey(id);
          extendedLog(
            "Suche nach Knoten im Pfad, an dem das Profil aktiviert ist. Aktueller Node: ",
            aktuellerNode.baueinheitsBezeichnung
          );
          profileImAktuellenNode =
            aktuellerNode.zugeordneteBaueigenschaftsProfile; // ACHTUNG: BaueigenschaftsProfilBezeichnung muss populiert sein!!!
          extendedLog("profileImAktuellenNode: ", profileImAktuellenNode);
          /*
          if (profileImAktuellenNode.length > 0) {
            extendedLog("Check auf Population von baueigenschaftsProfilBezeichnung: ");
            // HINWEIS: Dieses Feld sollte bei korrektem Model und populates in den Controller-Methoden populiert sein, obwohhl das Feld im Brwoser Log
            // nur als object{..} angezeigt wird!!!
            extendedLog(profileImAktuellenNode[0].referenzAufBaueigenschaftsProfil.baueigenschaftsProfilBezeichnung);
          };
          */
          indexZugeordneteBaueigenschaftsProfile = profileImAktuellenNode.findIndex(
            arg =>
              arg.referenzAufBaueigenschaftsProfil
                .baueigenschaftsProfilBezeichnung ===
              baueigenschaftsProfilBezeichnung // NEU: Für #272/#515
            // Siehe https://stackoverflow.com/questions/7176908/how-to-get-index-of-object-by-its-property-in-javascript
          );
          extendedLog(
            "indexZugeordneteBaueigenschaftsProfile: ",
            indexZugeordneteBaueigenschaftsProfile
          );
          if (indexZugeordneteBaueigenschaftsProfile > -1) {
            extendedLog(
              "Suche erfolgreich: Profil ist am aktuellen Node im Pfad aktiviert"
            );
            // ALT:
            /*
            extendedLog(
              "Vor return true aus ist istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst()"
            );
            return true; // Profil ist im Pfad aktiviert, kann weiter oben wegen Aktivierungsregel nicht deaktiviert sein!
            // Daher Suche abbrechen und true zurückliefern
            */
            // NEU: Lösung für #278 - siehe Kommmentare oben:
            extendedLog(
              "Prüfen, ob aktueller Node der unterste Knoten ist, an dem das Profil aktiviert ist"
            );
            if (
              this.nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
                aktuellerNode,
                baueigenschaftsProfilBezeichnung
              )
            ) {
              extendedLog(
                "Prüfungsergebnis: true - vor Return true aus in istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst()"
              );
              return true;
            } else {
              // NICHT der unterste Knoten, z.B. der Fall, wenn schon Kindknoten existieren, an denen das Profil aktiviert ist
              extendedLog(
                "Prüfungsergebnis: false - Prüfen, ob es sich beim aktuellen Node um den zu prüfenden Knoten selbst handelt"
              );
              if (node._id === aktuellerNode._id) {
                // Dann true returnen, Profil ist bereis aktiviert
                extendedLog(
                  "Aktueller Node ist identisch mit zu prüfendem Node"
                );
                // In diesem Fall ist am aktuellen Node keine Aktivierung erlaubt, es muss also für die Aktivierung eines Profils
                // direkt am aktuellen Node dafür true returned werden
                // An einem neu anzulegenden Kindknoten (anderes Kontextmenü!) muss jedoch das Profil in diesem Fall
                // aktivierbar sein, denn es kann sich dort z.B. um die Aktivierung eines schon an einem
                // Geschwisterknoten aktivierten Profils handeln (z.B. "Baueinheit > Standort" unter "Baueinheit > Bauvorhaben")
                // Daher muss über zusätzlichen Parameter dieser Fall unterschieden werden:
                if (modus === "Aktivierung am Knoten") {
                  extendedLog(
                    "Aktivierung am Knoten - vor Return true aus in istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst()"
                  );
                  return true;
                } else {
                  // modus === "Aktivierung am Kindknoten"
                  extendedLog(
                    "Aktivierung am Kindknoten - vor Return false aus in istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst()"
                  );
                  return false;
                }
              } else {
                extendedLog(
                  "Aktueller Node ist höher im Pfad - vor Return false aus in istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst()"
                );
                return false;
              }
            }
          } else {
            // Profil nicht im Array
            extendedLog("Profil ist am aktuellen Node deaktiviert"); // Profil kann weiter oben im Pfad allerdings aktiviert sein!
            //===============================================================================================================
            // ACHTUNG: Deshalb muss in diesem Fall UNBEDINGT weitergesucht werden, weiter oben im Array!!!
            extendedLog(
              "Weitersuchen in Knoten weiter oben im Pfad in istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst()"
            );
            //===============================================================================================================
          }
        } // Alle Knoten im Pfad durchsucht, ohne da
        extendedLog(
          "Vor return false nach vollständiger Suche in istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst()"
        );
        return false; // Nun das Profil als deaktiviert melden
      }
    },

    //==========================================================================================================================
    //
    baueigenschaftsProfilIstAktiviertAnParentVonNodeTreeBaueinheiten: function(
      node, // Parameter: Der im Bauvorhabenbaum ausgewählte Knoten (Verweis auf Baueinheit)
      baueigenschaftsProfilBezeichnung // Bezeichnung eines Profils
    ) {
      // NEU: Funktion, um zu bestimmen, ob das per Parameter übergebene Baueigenschaftsprofil im Parent des über dem per Parameter node
      // übergebenen Knoten aktiviert ist (liefert true oder false zurück)
      //=============================================================================================================================================
      // ACHTUNG: Mit dieser Funktion kann bei Aktivierung von Knoten der Fall ermittelt werden, dass das Profil am Elternknoten schon
      // aktiviert ist per parent-Feld diese Prüfung machen.
      // ACHTUNG: Dies allein ist aber kein sinnvoler Grund, die Aktivierung des Profils zu verbieten, sondern es muss (mit
      //          erweiterter Funktion istAktiviertProfilAnNodeUndNodeIstUntersterImPfadAnDemProfilAktiviertIst() oben der gesamte Elternpfad überprüft werden)
      // ACHTUNG: Funktion liefert alleine keine sinnvolle Logik für das Disabling der Aktivierung von Profilen, daher wird sie nicht benutzt!
      //=============================================================================================================================================
      var enableLogging = false;
      function extendedLog(args) {
        if (enableLogging) {
          console.log(args);
        }
      }
      extendedLog(
        "In baueigenschaftsProfilIstAktiviertAnParentVonNodeTreeBaueinheiten"
      );
      extendedLog(
        "Parameter baueigenschaftsProfilBezeichnung: ",
        baueigenschaftsProfilBezeichnung
      );
      if (node.parent == null) {
        extendedLog(
          "Kein parent - vor return false aus baueigenschaftsProfilIstAktiviertAnParentVonNodeTreeBaueinheiten()"
        );
        return false;
      } // Kein Parent, also gilt Profil als deaktiviert, kann aktiviert werden
      let parent = this.$refs.treeBaueinheiten.getNodeByKey(node.parent); // node.parent hält id des Parents
      let profileImParentNode = parent.zugeordneteBaueigenschaftsProfile;
      extendedLog("profileImParentNode: ", profileImParentNode);
      let indexZugeordneteBaueigenschaftsProfile = profileImParentNode.findIndex(
        arg =>
          arg.referenzAufBaueigenschaftsProfil
            .baueigenschaftsProfilBezeichnung ===
          baueigenschaftsProfilBezeichnung // NEU: Für #272/#515
        // Siehe https://stackoverflow.com/questions/7176908/how-to-get-index-of-object-by-its-property-in-javascript
      );
      if (indexZugeordneteBaueigenschaftsProfile < -1) {
        extendedLog(
          "Vor return false aus baueigenschaftsProfilIstAktiviertAnParentVonNodeTreeBaueinheiten()"
        );
        return false; // Profil ist im Parent deaktiviert
      } else {
        extendedLog(
          "Vor return true aus baueigenschaftsProfilIstAktiviertAnParentVonNodeTreeBaueinheiten()"
        );
        return true; // Profil ist im Parent aktiviert
      }
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Funktionen zum Anwählen von Tabs für Baueigenschaftsprofilformulare
    //------------------------------------------------------------------------------------------------------------------------------

    selectedNodeTreeBaueinheitenIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst: function(
      // NEU: Funktion, die bestimmt, ob der selektierte Knoten im Baum der unterste Knoten im Pfad ist, an dem
      // das Baueigenschaftsprofil aktiviert ist. Dazu wird das im Rahmen von #272/#05 eingeführte Flag in
      // zugeordneteBaueigenschaftsprofile an der Relation zum zugeordneten Baueigenschaftsprofil benutzt
      // TODO XXXXXX/ACHTUNG: Muss eventuell angepasst werden für #502 (bzw. das Flag istUntersterKnoten...)
      // HINWEIS: Die Flags istUntersterKnoten... im Array zugeordneteBaueigenschaftsProfile enthalten die echten Raumprofilvarianten
      // (z.B. "Baueinheit > Raum > Wohnen > ...")
      baueigenschaftsProfilBezeichnung // String
    ) {
      let indexZugeordneteBaueigenschaftsProfile = this.selectedNodeTreeBaueinheiten.zugeordneteBaueigenschaftsProfile.findIndex(
        arg =>
          arg.referenzAufBaueigenschaftsProfil
            .baueigenschaftsProfilBezeichnung ===
          baueigenschaftsProfilBezeichnung // NEU: Für #272/#515
        // Siehe https://stackoverflow.com/questions/7176908/how-to-get-index-of-object-by-its-property-in-javascript
      );
      if (indexZugeordneteBaueigenschaftsProfile > -1) {
        if (
          this.selectedNodeTreeBaueinheiten.zugeordneteBaueigenschaftsProfile[
            indexZugeordneteBaueigenschaftsProfile
          ].istUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst
        ) {
          return true;
        } else {
          return false;
        }
      } else {
        return false;
      }
    },

    istAktiviertBaueigenschaftsProfilAnSelectedNode: function(
      baueigenschaftsProfilBezeichnung // String
    ) {
      // NEU: Für #505
      // Prüft, ob ein Baueigenschaftsprofil aktiviert ist an selectedNodeTreeBaueinheiten
      console.log(
        "In istAktiviertBaueigenschaftsProfilAnSelectedNode(baueigenschaftsProfilBezeichnung)"
      );
      console.log(
        "baueigenschaftsProfilBezeichnung: ",
        baueigenschaftsProfilBezeichnung
      );
      console.log(
        "selectedNodeTreeBaueinheiten.zugeordneteBaueigenschaftsProfile: ",
        this.selectedNodeTreeBaueinheiten.zugeordneteBaueigenschaftsProfile
      );
      // Folgender Schritt ist überflüssig - der betreffende Array enthält zwar _id-Felder, aber die nachfolgende map-Funktion funktioniert auch mit diesen!
      // Entferne zunächst die _id-Felder aus dem Array zugeordneteBaueigenschaftsProfile
      // Vorlage: https://stackoverflow.com/questions/18133635/remove-property-for-all-objects-in-array
      // let aktivierteBaueigenschaftsProfileOhneIds = this.selectedNodeTreeBaueinheiten.zugeordneteBaueigenschaftsProfile.forEach(function(v) { delete v._id });
      // console.log("aktivierteBaueigenschaftsProfileAnNodeOhneIds: ", aktivierteBaueigenschaftsProfileOhneIds);
      // ---------------------------------------------------------------------------------------------------------------------------------
      // Verwandle nun diesen Array of Objects [ {"baueigenschaftsProfilBezeichnung: ": "Baueinheit > Bauvorhaben"}, .., {}] in einen einfachen Array of Properties
      // Vorlage: https://stackoverflow.com/questions/19590865/from-an-array-of-objects-extract-value-of-a-property-as-array
      let aktivierteBaueigenschaftsProfilBezeichnungen = this.selectedNodeTreeBaueinheiten.zugeordneteBaueigenschaftsProfile.map(
        a => a.referenzAufBaueigenschaftsProfil.baueigenschaftsProfilBezeichnung // NEU: Für #272/#515
      );
      console.log(
        "aktivierteBaueigenschaftsProfilBezeichnungen: ",
        aktivierteBaueigenschaftsProfilBezeichnungen
      );
      // Prüfe nun, ob das übergebene Profil in diesem Array enthalten ist:
      return (
        aktivierteBaueigenschaftsProfilBezeichnungen.includes(
          baueigenschaftsProfilBezeichnung
        ) &&
        this.selectedNodeTreeBaueinheitenIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
          baueigenschaftsProfilBezeichnung
        )
      );
    },

    getTabVonHierarchischOberstemProfilFormularInAktiviertenBaueigenschaftsProfilen: function(
      node // Parameter: Der im Bauvorhabenbaum ausgewählte Knoten (Verweis auf Baueinheit)
    ) {
      // DONE: Unten Fehler #330 abgefangen
      // NEU: Für #505
      // Funktion, die die entsprechende Tab-Bezeichnung des hierarchisch obersten Baueigenschaftsprofilformulars zurückliefert in den an node
      // aktivierten Baueigenschaftsprofilen
      // Dazu werden die Baueigenschaftsprofile hierarchisch angeordnet im Array hierarchieAllerBaueigenschaftsProfile
      // Ein Baueigenschaftsprofil entspricht dabei eindeutig einem zugehörigen (spezifischen) Baueigenschaftsprofilformular mit derselben Bezeichnung
      console.log(
        "In getTabVonHierarchischOberstemProfilInAktiviertenBaueigenschaftsProfilen(node)"
      );
      console.log(
        "node.zugeordneteBaueigenschaftsProfile: ",
        node.zugeordneteBaueigenschaftsProfile
      );
      // NEU: Wenn keine Profile aktiviert sind, mit Benutzernachricht returnen
      // HINWEIS: Wird bei Aufruf aus dem Kontextmenü im Template bereits durch Disabling des Kontextmenüs abgefangen
      if (node.zugeordneteBaueigenschaftsProfile.length === 0) {
        if (
          this.tabBaueinheiten ===
          "baueigenschaftsProfilFormulareTabBaueinheiten"
        ) {
          // Nur, wenn das Tab bereits ausgewählt ist!
          // HINWEISE: Dies ist stets der Fall, wenn der Aufruf per @click im Kontextmenü erfolgt!
          //           Bei Aufruf bei Node-Wechsel im Baum, kann das eventuell nicht ausgewählt sein, und die Meldung wird dann unterdrückt.
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFTSPROFILFORMULAR_KEIN_PROFIL_AKTVIERT
          );
          // }
        }
        return null; // In diesem Fall kein Unter-Tab des Tabs "Baueigenschaftsprofilformular" anzeigen, da keines Sinn macht mangels Profilaktivierung
      }
      // ---------------------------------------------------------------------------------------------------------------------------------
      // Folgender Schritt ist überflüssig - der betreffende Array enthält zwar _id-Felder, aber die nachfolgende map-Funktion funktioniert auch mit diesen!
      // Entferne zunächst die _id-Felder aus dem Array zugeordneteBaueigenschaftsProfile
      // Vorlage: https://stackoverflow.com/questions/18133635/remove-property-for-all-objects-in-array
      // let aktivierteBaueigenschaftsProfileAnNodeOhneIds = node.zugeordneteBaueigenschaftsProfile.forEach(function(v) { delete v._id });
      // console.log("aktivierteBaueigenschaftsProfileAnNodeOhneIds: ", aktivierteBaueigenschaftsProfileAnNodeOhneIds);
      // ---------------------------------------------------------------------------------------------------------------------------------
      // Verwandle nun diesen Array of Objects [ {"baueigenschaftsProfilBezeichnung: ": "Baueinheit > Bauvorhaben"}, .., {}] in einen einfachen Array of (String) Properties
      // Vorlage: https://stackoverflow.com/questions/19590865/from-an-array-of-objects-extract-value-of-a-property-as-array
      let aktivierteBaueigenschaftsProfilBezeichnungenOriginal = node.zugeordneteBaueigenschaftsProfile.map(
        obj =>
          obj.referenzAufBaueigenschaftsProfil.baueigenschaftsProfilBezeichnung // NEU: Für #272/#515
      );
      console.log(
        "aktivierteBaueigenschaftsProfilBezeichnungenOriginal: ",
        aktivierteBaueigenschaftsProfilBezeichnungenOriginal
      );
      // ---------------------------------------------------------------------------------------------------------------------------------
      // NEU - #502:
      // Für die Unterstützung von unterschiedlichen Raum-Nutzungsprofilen, deren Bezeichnung per Konvention stets "Baueinheit > Raum > ..." lautet,
      // muss hier eine Umwandlung erfolgen, die diese Profile alle nach "Baueinheit > Raum" ändert für den nachfolgenden Filter-Vergleich:
      // Vorlage: https://stackoverflow.com/questions/34925609/javascript-map-method-on-array-of-string-elements
      var gemerkteRaumProfilBezeichnung = "Baueinheit > Raum"; // Initialisierung für die gemerkte Raumprofilbezeichnung, Teil des Quick Fixes weiter unten
      let aktivierteBaueigenschaftsProfilBezeichnungen = aktivierteBaueigenschaftsProfilBezeichnungenOriginal.map(
        function(ele) {
          if (ele.startsWith("Baueinheit > Raum > ")) {
            gemerkteRaumProfilBezeichnung = ele; // Für Quick Fix weiter unten hier die ggf. nach "Baueinheit > Raum" geänderte Raumprofilbezeichnung "Baueinheit > Raum > ..." merken
            return "Baueinheit > Raum";
          } else {
            return ele;
          }
        }
      );

      console.log(
        "aktivierteBaueigenschaftsProfilBezeichnungen nach map: ",
        aktivierteBaueigenschaftsProfilBezeichnungen
      );

      // ---------------------------------------------------------------------------------------------------------------------------------------------------------------
      // Filtere nun aus dem zentralen Array hierarchieAllerBaueigenschaftsProfile die an node aktivierten Profile heraus (unter Beibehaltung der Reihenfolge)
      // Vorlage: https://stackoverflow.com/questions/19957348/remove-all-elements-contained-in-another-array
      let hierarchieAktivierterBaueigenschaftsProfile = this.hierarchieAllerBaueigenschaftsProfile.filter(
        // Konstanter Array hierarchieAllerBaueigenschaftsProfile definiert die Hierarchie der Baueigenschaftsprofile, links im Array entspricht "oben", rechts "unten"
        ele => aktivierteBaueigenschaftsProfilBezeichnungen.includes(ele)
      );
      console.log(
        "hierarchieAktivierterBaueigenschaftsProfile: ",
        hierarchieAktivierterBaueigenschaftsProfile
      );
      // Nachdem der Fall, dass keine Profile aktiviert sind, oben schon abgefangen wurde, kann
      // dieser Array trotzdem noch leer sein, wenn obiger konstanter Array bestimmte am Knoten aktivierte Profile nicht enthält.
      // Dies könnte der Fall sein z.B. bei selbst erstellten Profilen.
      // Andernfalls ist hierarchieAktivierteBaueigenschaftsprofile[0] die Bezeichnung des hierarchisch obersten Baueigenschaftsprofils
      // Diese muss jetzt noch auf die entsprechende Tab-Bezeichnung des zugehörigen Profilformulars gemapped werden:
      //----------------------------------------------------------------------------------------------------------------------------------------------------------------
      // NEU: Fehler #330 hier gefixt durch zusätzliche Oder-Bedingung:
      // Wenn das hierarchisch oberste Profil zwar gefunden wurde, aber der aktuelle Knoten nicht der unterste Knoten ist, dan dem
      // dieses Profil aktiviert ist, ebenfalls das generische Profilformular anzeigen - dieser Fall kann z.B. auftreten, wenn
      // manuell das hierarchisch oberste Profil (z.B. "Baueinheit > Geschoss") am Knoten deaktiviert wurde, und dadurch "Baueinheit > Raum" zum
      // hierarchisch obersten Profil wird, welches aber an einem Knoten unterhalb des aktuellen Knotens aktiviert ist:
      // ==========================================================================================================================================================================
      // Quick Fix für #502 Problem unten, dass nach Wechsel des Raumprofils nicht mehr das Tab/Profilformular für "Baueinheit > Raum" angezeigt wurde:
      if (
        hierarchieAktivierterBaueigenschaftsProfile.length > 0 &&
        hierarchieAktivierterBaueigenschaftsProfile[0] ===
          "Baueinheit > Raum" && // ACHTUNG: Ohne diese Prüfung Regression-Fehler in automatischer Anzeige von anderen Profilformularen, z.B. "Baueinheit > Geschoss"
        gemerkteRaumProfilBezeichnung !== "Baueinheit > Raum"
      ) {
        hierarchieAktivierterBaueigenschaftsProfile[0] = gemerkteRaumProfilBezeichnung;
      }
      console.log(
        "hierarchieAktivierterBaueigenschaftsProfile[0]: ",
        hierarchieAktivierterBaueigenschaftsProfile[0]
      );
      // ===========================================================================================================================================================================
      if (
        hierarchieAktivierterBaueigenschaftsProfile.length === 0 ||
        // NEU: #330 abfangen:
        !this.nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(
          node,
          hierarchieAktivierterBaueigenschaftsProfile[0] // Enthält ohne obigen Quick Fix nur "Baueinheit > Raum", nicht z.B. "Baueinheit > Raum > Wohnen > Flur in der Wohnung", was aktiviert ist!
        )
        // ====================================================================================================================================
        // ACHTUNG: TODO XXXXXX - hier Problem im Kontext von #502: Bei der Auswahl des relevantesten Profils per Kontextmenü
        // für einen per spezieller Profilvariante aktivierten Raum (z.B. "Baueinheit > Raum > Wohnen > Flur in der Wohnung") wird NICHT auch das Profilformular
        // für "Baueinheit > Raum" angezeigt, sondern das generische Formular!
        // Die Ursache liegt oben in nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst() - diese Funktion
        // beruht auf den "echten" Raumprofilen (z.B. "Baueinheit > Raum > Wohnen > Flur in der Wohnung"), für die im Backend die Flags gesetzt werden, während
        // hierarchieAktivierterBaueigenschaftsProfile[0] nach obigem Fix für #502 nur noch "Baueinheit > Raum" enthält! Daher liefert diese Funktion dann hier
        // false zurück statt true (was notwendig wäre für die Anzeige des Raum-Profilformulars)
        // WORKAROUND: Als dirty quick Fix wird oben statt "Baueinheit > Raum" das wirklich aktivierte Raumprofil (z..B "Baueinheit > Raum > Wohnen > Flur in der Wohnung") gemerkt
        // und dann ggf. wieder in hierarchieAktivierterBaueigenschaftsProfile[0] eingefügt,
        // aber dieser Workaround erscheint fragil!
        // HINWEIS: Zusätzlich musste unten auch noch der switch im default-Teil angepasst werden!
        // HINWEIS: Wenn oben das || nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst() auskommentiert wird, wird korrekt
        //          das Profilformular für "Baueinheit > Raum" angezeigt (Indiz, dass dort die Ursache liegt, wie oben erklärt)
        // ACHTUNG: Es gibt in baueinheiten.vue noch mindestens eine vom selben Fehler betroffen Funktion
        //          showZugeordneteBaueigenschaftsProfileAusgewaehlteBaueinheit() - markiert mit #502, bisher nicht gefixt!
        //======================================================================================================================================
      ) {
        // if (hierarchieAktivierterBaueigenschaftsProfile.length === 0) { // ALT
        if (
          this.tabBaueinheiten ===
          "baueigenschaftsProfilFormulareTabBaueinheiten"
        ) {
          // Nur, wenn das Tab ausgewählt ist!
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFTSPROFILFORMULAR_NICHT_GEFUNDEN
          );
        }
        // };
        return "generischesProfilFormularTabBaueinheiten"; // In diesem Fall das generische Profilformular anzeigen,
        // mit Hinweis in der Benutzernachricht, dort manuell ein Profil auszuwählen.
      } else {
        switch (hierarchieAktivierterBaueigenschaftsProfile[0]) {
          case "Baueinheit > Bauvorhaben":
            if (
              this.tabBaueinheiten ===
              "baueigenschaftsProfilFormulareTabBaueinheiten"
            ) {
              // HINWEISE: Dies ist stets der Fall, wenn der Aufruf per @click im Kontextmenü erfolgt!
              //           Bei Aufruf bei Node-Wechsel im Baum, kann das eventuell nicht ausgewählt sein, und die Meldung wird dann unterdrückt.
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFILFORMULAR_BAUVORHABEN_ANZEIGE
              );
            }
            return "bauvorhabenProfilFormularTabBaueinheiten";
          case "Baueinheit > Standort":
            if (
              this.tabBaueinheiten ===
              "baueigenschaftsProfilFormulareTabBaueinheiten"
            ) {
              // HINWEISE: Dies ist stets der Fall, wenn der Aufruf per @click im Kontextmenü erfolgt!
              //           Bei Aufruf bei Node-Wechsel im Baum, kann das eventuell nicht ausgewählt sein, und die Meldung wird dann unterdrückt.
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFILFORMULAR_STANDORT_ANZEIGE
              );
            }
            return "standortProfilFormularTabBaueinheiten";
          case "Baueinheit > Gebäude":
            if (
              this.tabBaueinheiten ===
              "baueigenschaftsProfilFormulareTabBaueinheiten"
            ) {
              // HINWEISE: Dies ist stets der Fall, wenn der Aufruf per @click im Kontextmenü erfolgt!
              //           Bei Aufruf bei Node-Wechsel im Baum, kann das eventuell nicht ausgewählt sein, und die Meldung wird dann unterdrückt.
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFILFORMULAR_GEBAEUDE_ANZEIGE
              );
            }
            return "gebaeudeProfilFormularTabBaueinheiten";
          case "Baueinheit > Geschoss":
            if (
              this.tabBaueinheiten ===
              "baueigenschaftsProfilFormulareTabBaueinheiten"
            ) {
              // HINWEISE: Dies ist stets der Fall, wenn der Aufruf per @click im Kontextmenü erfolgt!
              //           Bei Aufruf bei Node-Wechsel im Baum, kann das eventuell nicht ausgewählt sein, und die Meldung wird dann unterdrückt.
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFILFORMULAR_GESCHOSS_ANZEIGE
              );
            }
            return "geschossProfilFormularTabBaueinheiten";
          case "Baueinheit > Raum": // ACHTUNG: #502 - funktioniert für Raumprofilvarianten ("Baueinheit > Raum > ...") alleine NICHT, erweitert im default-Teil unten!
            if (
              this.tabBaueinheiten ===
              "baueigenschaftsProfilFormulareTabBaueinheiten"
            ) {
              // HINWEISE: Dies ist stets der Fall, wenn der Aufruf per @click im Kontextmenü erfolgt!
              //           Bei Aufruf bei Node-Wechsel im Baum, kann das eventuell nicht ausgewählt sein, und die Meldung wird dann unterdrückt.
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFILFORMULAR_RAUM_ANZEIGE
              );
            }
            return "raumProfilFormularTabBaueinheiten";
          case "Baueinheit > Bodenaufbau":
            if (
              this.tabBaueinheiten ===
              "baueigenschaftsProfilFormulareTabBaueinheiten"
            ) {
              // HINWEISE: Dies ist stets der Fall, wenn der Aufruf per @click im Kontextmenü erfolgt!
              //           Bei Aufruf bei Node-Wechsel im Baum, kann das eventuell nicht ausgewählt sein, und die Meldung wird dann unterdrückt.
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFILFORMULAR_BODENAUFBAU_ANZEIGE // NEU
                // BenutzerNachrichten.BAUEIGENSCHAFTSPROFILFORMULAR_BODENAUFBAU_NEU_ANZEIGE // ALT
              );
            }
            return "bodenaufbauProfilFormularTabBaueinheiten"; // NEU
          /*
          // ALT:
          case "Schichtaufbau":
            if (
              this.tabBaueinheiten ===
              "baueigenschaftsProfilFormulareTabBaueinheiten"
            ) {
              // HINWEISE: Dies ist stets der Fall, wenn der Aufruf per @click im Kontextmenü erfolgt!
              //           Bei Aufruf bei Node-Wechsel im Baum, kann das eventuell nicht ausgewählt sein, und die Meldung wird dann unterdrückt.
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFILFORMULAR_SCHICHTAUFBAU_ANZEIGE
              );
            }
            return "bodenaufbauProfilFormularTabBaueinheiten"; // Wie bei 'Bodenaufbau' oben
          */
          case "Wandaufbau":
            if (
              this.tabBaueinheiten ===
              "baueigenschaftsProfilFormulareTabBaueinheiten"
            ) {
              // HINWEISE: Dies ist stets der Fall, wenn der Aufruf per @click im Kontextmenü erfolgt!
              //           Bei Aufruf bei Node-Wechsel im Baum, kann das eventuell nicht ausgewählt sein, und die Meldung wird dann unterdrückt.
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFILFORMULAR_WANDAUFBAU_ANZEIGE
              );
            }
            return "wandaufbauProfilFormularTabBaueinheiten";
          case "Baueinheit > Schicht":
            if (
              this.tabBaueinheiten ===
              "baueigenschaftsProfilFormulareTabBaueinheiten"
            ) {
              // HINWEISE: Dies ist stets der Fall, wenn der Aufruf per @click im Kontextmenü erfolgt!
              //           Bei Aufruf bei Node-Wechsel im Baum, kann das eventuell nicht ausgewählt sein, und die Meldung wird dann unterdrückt.
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFILFORMULAR_SCHICHT_ANZEIGE
              );
            }
            return "schichtProfilFormularTabBaueinheiten";
          default:
            // NEU: Für #502, Quick Fix - hier den Fall von Raumprofilvarianten auf "Baueinheit > Raum" mappen!
            if (
              hierarchieAktivierterBaueigenschaftsProfile[0].startsWith(
                "Baueinheit > Raum > "
              )
            ) {
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFILFORMULAR_RAUM_ANZEIGE
              );
              return "raumProfilFormularTabBaueinheiten";
            } else {
              // Dieser Fall sollte eigentlich nicht vorkommen, es sei denn es gibt einen Fehler im Aufbau des Arrays oder des Switches
              // In diesem Fall das generische Profilformular anzeigen
              // Diese Nachricht immer ausgeben!
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFILFORMULAR_NICHT_GEFUNDEN
              );
              return "generischesProfilFormularTabBaueinheiten";
            }
        }
      }
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // NEU: Funktionen, um zu bestimmen, ob ein Node der unterste Knoten ist, an dem ein Baueigenschaftsprofil aktiviert ist
    // TODO XXXXXX: Code Reuse, die unteren Funktionen zusammenführen zu erster ALLGEMEINER Funktion mit Parameter, welches Profil

    nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst: function(
      node,
      baueigenschaftsProfilBezeichnung
    ) {
      // NEU: Allgemeine Funktion, um festzustellen, ob ein per 2. Parameter baueigenschaftsProfilBezeichnung übergebenes Profil
      // am untersten Knoten im Pfad aktiviert ist, für die per 1. Parameter übergebenen node im Baum.
      // War ursprünglich nur Funktion, um festzustellen, ob ein BaueigenschaftsProfil überhaupt aktiviert ist an dem durch
      // den Parameter node übergebenen Knoten (Baueinheit im Bauvorhabenbaum)
      // NEU: Zusätzlich Prüfung, ob Profil am untersten Knoten im Pfad aktiviert ist (restriktiver) im Rahmen von #272/#505
      // Eingebaut 21.01.2021@sts, um eigene Logs noch zu erkennen
      var enableLogging = false;
      function extendedLog(args) {
        if (enableLogging) {
          console.log(args);
        }
      }

      extendedLog(
        "In nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst(node, baueigenschaftsProfilBezeichnung)"
      );
      extendedLog(
        "Parameter baueigenschaftsProfilBezeichnung: ",
        baueigenschaftsProfilBezeichnung
      );
      extendedLog(
        "node.zugeordneteBaueigenschaftsProfile: ",
        node.zugeordneteBaueigenschaftsProfile
      );
      let indexZugeordneteBaueigenschaftsProfile = node.zugeordneteBaueigenschaftsProfile.findIndex(
        arg =>
          arg.referenzAufBaueigenschaftsProfil
            .baueigenschaftsProfilBezeichnung ===
          baueigenschaftsProfilBezeichnung // NEU: Für #272/#515
        // Siehe https://stackoverflow.com/questions/7176908/how-to-get-index-of-object-by-its-property-in-javascript
      );
      if (indexZugeordneteBaueigenschaftsProfile > -1) {
        if (
          node.zugeordneteBaueigenschaftsProfile[
            indexZugeordneteBaueigenschaftsProfile
          ].istUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst
        ) {
          extendedLog(
            "Vor return true aus nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst()"
          );
          return true; // Profil ist am untersten Knoten im Pfad aktiviert
        } else {
          extendedLog(
            "Vor return false aus nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst()"
          );
          return false; // Profil ist nicht am untersten Knoten im Pfad aktiviert
        }
      } else {
        extendedLog(
          "Vor return true aus nodeIstUntersterKnotenImPfadAnDemBaueigenschaftsProfilAktiviertIst()"
        );
        return false; // Profil ist nicht aktiviert an Node
      }
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Funktionen zum Disablen/Enablen von Kontextmenüs für Knoten im Bauvorhabenbaum
    //------------------------------------------------------------------------------------------------------------------------------
    // ACHTUNG: Die folgende Funktion ist eine parametrisierte Version der nachfolgenden Einzelfunktionen, die dadurch obsolet sind!
    istAktiviertBaueigenschaftsProfilAnNode: function(
      node, // Parameter: Der im Bauvorhabenbaum ausgewählte Knoten (Verweis auf Baueinheit)
      baueigenschaftsProfilBezeichnung // Bezeichnung eines Profils
    ) {
      // NEU: Funktion, um festzustellen, ob ein BaueigenschaftsProfil (dessen Bezeichnung ist der 2. Parameter) aktiviert ist an
      // dem durch den Parameter node übergebenen Knoten (Baueinheit im Bauvorhabenbaum)
      console.log("In istAktiviertBaueigenschaftsProfilAnNode()");
      console.log(
        "Parameter baueigenschaftsProfilBezeichnung: ",
        baueigenschaftsProfilBezeichnung
      );
      console.log(
        "node.zugeordneteBaueigenschaftsProfile: ",
        node.zugeordneteBaueigenschaftsProfile
      );
      /*
      if (node.zugeordneteBaueigenschaftsProfile.length > 0) {
        console.log("Check auf Population von baueigenschaftsProfilBezeichnung: ")
        // HINWEIS: Dieses Feld sollte bei korrektem Model und populates in den Controller-Methoden populiert sein, obwohhl das Feld im Brwoser Log
        // nur als object{..} angezeigt wird!!!
        console.log(node.zugeordneteBaueigenschaftsProfile[0].referenzAufBaueigenschaftsProfil.baueigenschaftsProfilBezeichnung)
      };
      */
      if (
        node.zugeordneteBaueigenschaftsProfile.findIndex(
          arg =>
            arg.referenzAufBaueigenschaftsProfil
              .baueigenschaftsProfilBezeichnung ===
            baueigenschaftsProfilBezeichnung
        ) >
        // Siehe https://stackoverflow.com/questions/7176908/how-to-get-index-of-object-by-its-property-in-javascript
        -1
      ) {
        console.log(
          "Vor return true aus istAktiviertBaueigenschaftsProfilAnNode()"
        );
        return true;
      } else {
        console.log(
          "Vor return false aus istAktiviertBaueigenschaftsProfilAnNode()"
        );
        return false;
      }
    },

    //--------------------------------------------------------------------------------------------------------------------------------
    // Die folgenden Funktionen wurden durch obige parametrisierte Funktion ersetzt - disabled
    /*
    // Start obsoleter Code
    bauvorhabenBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten: function(
      node
    ) {
      // NEU: Funktion, um festzustellen, ob das BaueigenschaftsProfil "Baueinheit > Bauvorhaben" aktiviert ist an dem durch den Parameter node übergebenen
      // Knoten (Baueinheit im Bauvorhabenbaum)
      console.log(
        "In bauvorhabenBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten(node)"
      );
      console.log(
        "node.zugeordneteBaueigenschaftsProfile: ",
        node.zugeordneteBaueigenschaftsProfile
      );
      // if (node.zugeordneteBaueigenschaftsProfile.length > 0) {
      //  console.log("Check auf Population von baueigenschaftsProfilBezeichnung: ")
      //  // HINWEIS: Dieses Feld sollte bei korrektem Model und populates in den Controller-Methoden populiert sein, obwohhl das Feld im Brwoser Log
      //  // nur als object{..} angezeigt wird!!!
      //  console.log(node.zugeordneteBaueigenschaftsProfile[0].referenzAufBaueigenschaftsProfil.baueigenschaftsProfilBezeichnung)
      // };
      if (
        node.zugeordneteBaueigenschaftsProfile.findIndex(
          arg => arg.referenzAufBaueigenschaftsProfil.baueigenschaftsProfilBezeichnung === "Baueinheit > Bauvorhaben"
        ) >
        // Siehe https://stackoverflow.com/questions/7176908/how-to-get-index-of-object-by-its-property-in-javascript
        -1
      ) {
        console.log("Vor return true aus bauvorhabenBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten()");
        return true;
      } else {
        console.log("Vor return false aus bauvorhabenBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten()");
        return false;
      }
    },

    standortBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten: function(
      node
    ) {
      // NEU: Funktion, um festzustellen, ob das BaueigenschaftsProfil "Baueinheit > Standort" aktiviert ist an dem durch den Parameter node übergebenen
      // Knoten (Baueinheit im Bauvorhabenbaum)
      console.log(
        "In standortBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten(node)"
      );
      console.log(
        "node.zugeordneteBaueigenschaftsProfile: ",
        node.zugeordneteBaueigenschaftsProfile
      );
      if (
        node.zugeordneteBaueigenschaftsProfile.findIndex(
          arg => arg.referenzAufBaueigenschaftsProfil.baueigenschaftsProfilBezeichnung === "Baueinheit > Standort"
       ) >
        // Siehe https://stackoverflow.com/questions/7176908/how-to-get-index-of-object-by-its-property-in-javascript
        -1
      ) {
        console.log("Vor return true aus standortBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten()");
        return true;
      } else {
        console.log("Vor return false aus standortBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten()");
        return false;
      }
    },

    gebaeudeBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten: function(
      node
    ) {
      // NEU: Funktion, um festzustellen, ob das BaueigenschaftsProfil "Baueinheit > Gebäude" aktiviert ist an dem durch den Parameter node übergebenen
      // Knoten (Baueinheit im Bauvorhabenbaum)
      console.log(
        "In gebaeudeBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten(node)"
      );
      console.log(
        "node.zugeordneteBaueigenschaftsProfile: ",
        node.zugeordneteBaueigenschaftsProfile
      );
      if (
        node.zugeordneteBaueigenschaftsProfile.findIndex(
          arg => arg.referenzAufBaueigenschaftsProfil.baueigenschaftsProfilBezeichnung === "Baueinheit > Gebäude"
        ) >
        // Siehe https://stackoverflow.com/questions/7176908/how-to-get-index-of-object-by-its-property-in-javascript
        -1
      ) {
        console.log("Vor return true aus gebaeudeBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten()");
        return true;
      } else {
        console.log("Vor return false aus gebaeudeBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten()");
        return false;
      }
    },

    geschossBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten: function(
      node
    ) {
      // NEU: Funktion, um festzustellen, ob das BaueigenschaftsProfil "Baueinheit > Geschoss" aktiviert ist an dem durch den Parameter node übergebenen
      // Knoten (Baueinheit im Bauvorhabenbaum)
      console.log(
        "In geschossBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten(node)"
      );
      console.log(
        "node.zugeordneteBaueigenschaftsProfile: ",
        node.zugeordneteBaueigenschaftsProfile
      );
      if (
        node.zugeordneteBaueigenschaftsProfile.findIndex(
          arg => arg.referenzAufBaueigenschaftsProfil.baueigenschaftsProfilBezeichnung === "Baueinheit > Geschoss"
        ) >
        // Siehe https://stackoverflow.com/questions/7176908/how-to-get-index-of-object-by-its-property-in-javascript
        -1
      ) {
        console.log("Vor return true aus geschossBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten()");
        return true;
      } else {
        console.log("Vor return false aus geschossBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten()");
        return false;
      }
    },
    */
    // Ende obsoleter Code
    //------------------------------------------------------------------------------------------------------------------------------------

    benutzerDarfNeuanlegenKindKnotenOderMarkiertenZweigBewegenUnterNodeTreeBaueinheiten: function(
      node
    ) {
      // Funktion, um festzustellen, ob der angemeldete Benutzer unter einer durch den Parameter node übergebenen Knoten (Baueinheit
      // im Bauvorhabenbaum) einen neuen Kindknoten anlegen darf (per Kontextmenü).
      // Da dafür dieselbe Logik gilt, ist dieselbe Funktion auch anwendbar für das Verschieben/Kopieren von Zweigen
      // unter eine Baueinheit (per Kontextmenü)
      // ACHTUNG: Analoge Funktion benutzerDarfNeuanlegenKindKnotenUnterSelectedNodeTreeBaueinheiten für Button für das Anlegen
      // von Kindknoten ist in computed:, diese arbeitet auf selectedNodeTreeBaueinheiten (hat keinen Parameter node).
      /*
      console.log(
        "In benutzerDarfNeuanlegenKindKnotenOderMarkiertenZweigBewegenUnterNodeTreeBaueinheiten(node)"
      );
      */
      // console.log("localStore.state.anmeldeDatenBenutzer.benutzerRolle: ", this.localStore.state.anmeldeDatenBenutzer.benutzerRolle);
      if (
        this.localStore.state.anmeldeDatenBenutzer.benutzerRolle !==
        "Mitarbeiter"
      ) {
        // Benutzerrolle "Administrator" oder "Redakteur"
        return true;
      } else {
        // Benutzerrolle "Mitarbeiter"
        if (
          node.benutzerKennungenAutoren.includes(
            this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
          )
        ) {
          console.log(
            "Mitarbeiter ist Autor für übergebenen Knoten. " +
              "Mitarbeiter darf Kindknoten darunter anlegen oder markierten Zweig dorthin verschieben/kopieren."
          );
          return true;
        } else {
          // Mitarbeiter ist kein Autor für übergebenen Knoten! Dies inkludiert den Fall, dass benutzerKennungenAutoren leer ist!
          if (node.benutzerKennungenAutoren.length === 0) {
            // benutzerKennungenAutoren ist leerer Array
            //==========================================================================================
            // ACHTUNG: Leeren Array unbedingt mit array.length === 0 testen, nicht mit array === [] !!!
            //==========================================================================================
            console.log("node.benutzerKennungenAutoren ist leerer Array");
            console.log(
              "Mitarbeiter darf Kindknoten unter dem übergebenen Knoten anlegen oder markierten Zweig dorthin verschieben/kopieren."
            );
            return true;
            // Vorläufig: Mitarbeiter dürfen unter allen solchen Knoten mit leerem Array-Feld benutzerKennungenAutoren
            // Kindknoten anlegen (oder auch markierte Zweige dorthin bewegen) - also return true in diesem Fall
            //===================================================================================================================================
            // VORLÄUFIG VERWORFENE Idee: Stelle fest, ob dies der unterste Knoten im Pfad aufwärts mit leerem Array benutzerKennungenAutoren ist
            // Code dafür DISABLED!!!
            //===================================================================================================================================
            // VORLÄUFIG VERWORFENE Idee: Stelle fest, ob dies der unterste Knoten im Pfad aufwärts mit leerem Array benutzerKennungenAutoren ist
            // Code dafür DISABLED!!!
            // Wenn ja: return true (Neuanlage erlaubt), sonst: false (Neuanlage Kindknoten nicht erlaubt)
            // Idee: Dazu das parent-Feld benutzen - dieses enthält die Id des Elternknotens, wobei der Wurzelknoten KEIN parent-Field hat!
            // Hinweis: path-Feld enthält die Ids der Elternknoten vom Wurzelknoten an abwärts, eventuell (am Wurzelknoten) NUR die Id des Wurzelknotens
            // ACHTUNG: FEHLERHAFTER Algorithmus dafür (siehe Beschreibung unter FEHLER unten)
            // - Ermittle aus parent-Feld den Elternknoten des übergebenen Knotens
            // - Wenn kein Elternknoten: Der übergebene Knoten ist der unterste solche im Pfad (FALSCH: Kann Kinder haben)
            // - Andernfalls: Der übergebene Knoten ist nicht der unterste solche im Pfad (AUCH FALSCH)
            // - Hinweis: Wegen der im Design beschriebenen Vererbungsregel für Autoren muss der Elternknoten in letzterem Fall ebenfalls leeres
            //   Array-Feld für die Autoren haben! (RICHTIG)
            // FEHLERHAFTER CODE DISABLED:
            /*
            if (!node.hasOwnProperty("parent")) {
              // Es handelt sich also bei dem übergebenen Knoten mit leerem Array-Feld benutzerKennungenAutoren um den Wurzelknoten
              // In diesem Fall ist dies der unterste solche Knoten, also muss true returned werden
              console.log(
                "Übergebener Knoten ist Wurzelknoten mit leerem Array-Feld benutzerKennungenAutoren. " +
                "Mitarbeiter darf Kindknoten darunter anlegen oder markierten Zweig dorthin verschieben/kopieren."
              );
              return true;
            } else {
              // Der übergebene Knoten hat ein Parent. Wegen obiger Vererbungsregel muss in diesem Fall dessen Array-Feld benutzerKennungenAutoren ebenfalls leer sein
              // Zur Sicherheit hier console.log-Ausgabe dieses Array-Felds - Zugriff mit QTree-API getNodeByKey()
              console.log(
                "benutzerKennungenAutoren am Elternknoten des übergebenen Knotens: ",
                this.$refs.treeBaueinheiten.getNodeByKey(node.parent)
                  .benutzerKennungenAutoren
              );
              console.log(
                "ACHTUNG: Dieses Feld muss ein leerer Array sein, sonst liegt Inkonsistenz in benutzerBerechtigungen vor!"
              );
              console.log(
                "Übergebener Knoten hat Elternknoten mit ebenfalls leerem Array-Feld. " +
                "Mitarbeiter darf Kindknoten darunter anlegen oder markierten Zweig dorthin verschieben/kopieren."
              );
              // TODO XXXXXX: Folgende Logik ist FALSCH:
              // In diesem Fall ist dies also  der unterste Knoten mit leerem Array benutzerKennungenAutoren, also muss true returned werden
              return true;
              //============================================================================================================================
              // FEHLER:
              // Die Tatsache, dass der Elternknoten ebenfalls leeres Feld benutzerKennungenAutoren hat, heisst nicht, dass -->
              // es nicht noch (ggf. nicht einmal lazy geladene) Kindknoten mit leerem Array-Feld gibt, d.h. es muss sich keineswegs -->
              // um den untersten solchen Knoten handeln. Ob es sich um den untersten solchen Knoten handelt, könnte nur durch einen -->
              // Backend-Call ermittelt werden, der rekursiv solange die Kindknoten aus der Datenbank liest, bis keine mit leerem Array-Feld -->
              // mehr zu finden sind. Das ist Performance-sensitiv, da es ja für jeden geladenen Knoten im Baum ermittelt werden muss für -->
              // das richtige Disabling der Kontextmenüs. Eigentlich müsste dazu der ganze Bauvorhabenbaum gleich initial so geladen werden, dass alle
              // alle Zweige mit leerem Array-Feld bis zu den jeweils ersten Kindern mit nicht leerem Array-Feld geladen werden. -->
              // Dies wäre ein größerer Eingriff in das Design, der erst einmal vermieden werden sollte.
              // Einstweilen muss wohl die Logik so geändert werden, dass unter jedem Knoten mit leerem Array-Feld benutzerKennungenAutoren -->
              // ein Mitarbeiter Kindknoten anlegen darf, nicht nur unter den jeweils untersten in einem Zweig.
            }
            */
          } else {
            console.log(
              "Übergebener Knoten hat nicht leeres Array-Feld benutzerKennungenAutoren. " +
                "Mitarbeiter ist kein darin zugeordneter Autor. " +
                "Mitarbeiter darf keinen Kindknoten darunter anlegen und keinen markierten Zweig dorthin verschieben/kopieren."
            );
            return false;
          }
        }
      }
    },

    nodeTreeBaueinheitenIstImBauvorlagenunterbaum: function(node) {
      //----------------------------------------------------------------------------------------------------------------------------
      // Vorlage: selectedKeyTreeBaustoffeIstImRohstoffunterbaum in baustoffe.vue
      // Methode - berechnet, ob die per Parameter node übergebene Baueinheit im Bauvorlagenunterbaum ist (für Disabling von Kontextmenüs)
      //          Diese arbeitet auf Parameter node statt auf selectedKeyTreeBaueinheiten.
      //          Diese muss wegen Parameter in methods: definiert werden!
      // ACHTUNG: Analoge computed Property ist selectedKeyTreeBaueinheitenIstImBauvorlagenunterbaum() für Disabling von Buttons
      //----------------------------------------------------------------------------------------------------------------------------
      console.log("In nodeTreeBaueinheitenIstImBauvorlagenunterbaum()");
      // console.log("Parameter node: ", node);
      if (node !== undefined && node !== null) {
        if (node.baumKnotenTyp === "Wurzelknoten") {
          return false;
        }
        if (node.baumKnotenTyp === "Bauvorlagenunterbaumwurzelknoten") {
          return true;
        }
        // Ansonsten befinden wir uns irgendwo im Baum, und müssen den zweitobersten Knoten im Pfad von oben extrahieren, sofern dieser existiert,
        // und feststellen, ob das der Wurzelknoten des Bauvorlagenunterbaums ist:
        const arrayOfIdsInPath = node.path.split("#");
        console.log("arrayOfIdsInPath: ", arrayOfIdsInPath);
        if (arrayOfIdsInPath.length <= 2) {
          return false;
        } // Es handelt sich um einen Kindknoten von Baueinheiten (Wurzelknoten des Bauvorlagenunterbaums wurde oben schon ausgeschlossen)

        // Ansonsten handelt es sich um einen "tiefgelegenen" Kindknoten irgendwo im Baum (Bauvorhaben- oder Bauvorlagenteil)
        // Nun die id des zweitobersten Knotens im Pfad dieses Kindknotens hernehmen und für diese prüfen, ob dies die des Wurzelknotens des Bauvorlagenunterbaums ist
        // Dazu ausnutzen, dass ab dem Laden der zweiten Ebene des Bauvorlagenbaums in den Array nodesTreeBaueinheiten auch der Wurzelknoten
        // des Bauvorlagenunterbaums in das Frontend geladen ist - also kommt man ohn Backend Call aus - allerdings ist der Code dafür etwas tricky und abhängig
        // vom genauen Aufbau des Baums und den Bezeichnungen in baumKnotenTyp!

        // Der Bauvorlagenunterbaumwurzelknoten befindet sich in den children:[ {} ] des ersten Array-Elements (nodesTreeBaueinheiten[0].children) und hat u.a.
        // die Felder _id und baumKnotenTyp="Bauvorlagenunterbaumwwurzelknoten"
        // Die per filter im Unter-Array children gefundene _id des Bauvorlagenbaumwurzelknotens dann vergleichen mit der zweitobersten _id im Pfad (arrayOfIdsInPath[1])

        console.log(
          "Vor filter auf Suche nach Bauvorlagenunterbaumwurzelknoten!"
        );
        // console.log("nodesTreeBaueinheiten: ", this.nodesTreeBaueinheiten);
        console.log(
          "nodesTreeBaueinheiten[0].children: ",
          this.nodesTreeBaueinheiten[0].children
        );
        // ACHTUNG dabei: nodesTreeBaueinheiten ist ein Array aus verschachtelten Objekten UND auch children ist ein Array!
        const bauvorlagenunterbaumWurzelknoten = this.nodesTreeBaueinheiten[0].children.filter(
          element =>
            element.baumKnotenTyp === "Bauvorlagenunterbaumwurzelknoten"
        );
        // ACHTUNG: Resultat von filter ist wieder ein Array!!!
        if (
          bauvorlagenunterbaumWurzelknoten === null ||
          bauvorlagenunterbaumWurzelknoten.length > 2
        ) {
          console.log(
            "In nodeTreeBaueinheitenIstImBauvorlagenunterbaum() - Fehler beim Finden des Bauvorlagenunterbaumwurzelknotens per Filter im Bauvorlagenbaum!!!"
          );
          return false;
        }
        const idBauvorlagenunterbaumWurzelknoten =
          bauvorlagenunterbaumWurzelknoten[0]._id;
        console.log(
          "Nach filter - idBauvorlagenunterbaumWurzelknoten: ",
          idBauvorlagenunterbaumWurzelknoten
        );

        // Nun die id des potentiellen Bauvorlagenunterbaumwurzelknotens ermittteln, zum Vergleich mit der oben ermittelten _id des tatsächlichen:
        const idPotentiellerBauvorlagenunterbaumWurzelknoten =
          arrayOfIdsInPath[1]; // Dies ist die _id des zweitobersten Knotens im Pfad
        console.log(
          "idPotentiellerBauvorlagenunterbaumWurzelknoten: ",
          idPotentiellerBauvorlagenunterbaumWurzelknoten
        );

        // Nun vergleichen und Resultat zurückgeben:
        if (
          idPotentiellerBauvorlagenunterbaumWurzelknoten ===
          idBauvorlagenunterbaumWurzelknoten
        ) {
          return true;
        } else {
          return false;
        }
      } else {
        return false;
      } // Vue computed Funktion muss immer Wert zurückliefern!
    },

    benutzerDarfBearbeitenImBauvorlagenunterbaumNodeTreeBaueinheiten: function(
      node
    ) {
      // Funktion, um festzustellen, ob die per Parameter node übergebene Baueinheit im Bauvorlagenunterbaum liegt
      // Wenn ja, dürfen nur Administratoren und Redakteure diese bearbeiten
      // Dient zum Disabling der Kontextmenüs für Löschen oder Umbenennen
      // Wird auch für Disabling des Kontextmenüs für Neuanlage Kindknoten verwendet
      // ACHTUNG: Analoge Funktion für Buttons ist in computed:, diese arbeitet auf selectedNodeTreeBaueinheiten statt node

      // Stelle fest, ob die ausgewählte Baueinheit im Bauvorlagenunterbaum ist: Benutzt die obige Funktion
      if (!this.benutzerRolleIstMitarbeiter) {
        return true; // Administratoren und Redakteure dürfen alles!
      }
      // Sonst weitermachen, Benutzer ist Mitarbeiter:
      if (!this.nodeTreeBaueinheitenIstImBauvorlagenunterbaum(node)) {
        // Obige Funktion
        return true; // Nicht im Bauvorlagenunterbaum, in diesem Fall return true
        // (andere Funktionen liefern dann ggf. false, abhängig von benutzerKennungenAutoren)
      } else {
        // Ausgewählter Knoten ist im Bauvorhabenunterbaum, Mitarbeiter dürfen dort nicht bearbeiten
        return false;
      }
    },

    benutzerDarfBearbeitenNodeTreeBaueinheiten: function(node) {
      //---------------------------------------------------------------------------------------------------
      // Funktion, um festzustellen, ob der angemeldete Benutzer einen im Bauvorhabenbaum vorhandenen Node
      // bearbeiten darf (d.h. löschen oder umbenennen darf per Kontextmenü)
      // ACHTUNG: Funktion kann nicht computed sein, da sie Parameter node braucht!
      // console.log("In benutzerDarfBearbeitenNodeTreeBaueinheiten(node)");
      // console.log("localStore.state.anmeldeDatenBenutzer.benutzerRolle: ", this.localStore.state.anmeldeDatenBenutzer.benutzerRolle);
      if (node == null) {
        return false;
      } // Sonst TypeError: Cannot read property 'benutzerKennungenAutoren' of null!

      // Sonst weitermachen:
      if (
        this.localStore.state.anmeldeDatenBenutzer.benutzerRolle !==
        "Mitarbeiter"
      ) {
        // Benutzerrolle "Administrator" oder "Redakteur"
        return true;
      } else {
        // Benutzerrolle "Mitarbeiter"
        if (
          node.benutzerKennungenAutoren.includes(
            this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
          )
        ) {
          return true;
        } else {
          // Dies inkludiert den Fall, dass benutzerKennungenAutoren leer ist
          return false;
        }
      }
    },

    //======================================================================================================================================
    // NEU: Methoden für Kontextmenü zum Kopieren oder Verschieben eines vorher zum Verschieben oder Kopieren markierten Zweigs im Bauvorhabenbaum
    //--------------------------------------------------------------------------------------------------------------------------------

    collectIdsInChildrenOfWurzelZuBewegenderZweig: function(node, ids) {
      //---------------------------------------------------------------------------------------------------------------------
      // Rekursive Hilfsfunktion zum Sammeln der ids aller Nodes in children-Objekten in Variable idsImMarkiertenZweig
      console.log(
        "In rekursiver Hilfsfunktion collectIdsInChildrenOfWurzelZuBewegenderZweig()"
      );

      if (node.children !== undefined) {
        for (var i = 0; i < node.children.length; i++) {
          console.log("node.children[", i, "]._id: ", node.children[i]._id);
          ids.push(node.children[i]._id);
          this.collectIdsInChildrenOfWurzelZuBewegenderZweig(
            node.children[i],
            ids
          );
        }
      } // else {} // Keine children, return
    },

    knotenIstWurzelTreeBaueinheiten: function(idOfNode) {
      //----------------------------------------------------------------------------------------------------------------------------
      // NEU: Funktion, die berechnet, ob ein Knoten der Wurzelknoten im Bauvorhabenbaum ist
      // Parameter: idOfNode - key (id) des zu prüfenden Knotens
      // Könnte über fehlendes parent-Feld abgeprüft werden (Test auf Existenz wie
      // in knotenIstElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaueinheiten()
      // Performanter aber über Prüfung des Felds baumKnotenTyp
      //----------------------------------------------------------------------------------------------------------------------------
      // console.log("In knotenIstWurzelTreeBaueinheiten()"); // Disabled, da sehr oft aufgerufen im Log
      if (idOfNode !== undefined && idOfNode !== null) {
        // Ansonsten befindet sich der durch idOfNode identifizierte Knoten irgendwo im Baum, und wir müssen feststellen, ob
        // es sich um den Wurzelknoten handelt
        // Mittels QTree API getNodeByKey kann auf dessen Node inklusive seiner Kindknoten (im verschachtelten Unterfeld children) zugegriffen werden:
        const node = this.$refs.treeBaueinheiten.getNodeByKey(idOfNode);
        // ACHTUNG: node ist eine lokale Hilfsvariable, KEIN .this verwenden!!!
        // console.log("node: ", node); // ACHTUNG: Kein .this verwenden!
        if (
          node.baumKnotenTyp === "Wurzelknoten" ||
          node.baumKnotenTyp === "Bauvorlagenunterbaumwurzelknoten"
        ) {
          // NEU: Hier auch Bauvorlagenunterbaumwurzel disablen für Kopieren/Verschieben - die Knoten darunter können dagegen bewegt werden
          return true;
        } else {
          return false;
        }
      } else {
        return false;
      }
    },

    knotenIstElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaueinheiten: function(
      idOfNode
    ) {
      //----------------------------------------------------------------------------------------------------------------------------
      // NEU: Funktion, die berechnet, ob ein Knoten der Elternknoten des zum Bewegen (d.h. Verschieben oder Kopieren) markierten Zweig
      // im Bauvorhabenbaum ist
      // Parameter: idOfNode - key (id) des zu prüfenden Knotens
      //----------------------------------------------------------------------------------------------------------------------------
      // let idsImMarkiertenZweig = []; // Array zum Sammeln aller ids im markierten Zweig, lokale Variable, KEIN .this verwenden!!!
      console.log(
        "In knotenIstElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaueinheiten()"
      );
      if (
        idOfNode !== undefined &&
        idOfNode !== null &&
        this.idWurzelZuBewegenderZweig !== undefined &&
        this.idWurzelZuBewegenderZweig !== null
      ) {
        // Ansonsten befindet sich der durch idOfNode identifizierte Knoten irgendwo im Baum, und wir müssen zuerst den markierten Knoten identifizieren
        // Dieser wird in Variable idWurzelZuBewegenderZweig in data() gespeichert
        console.log(
          "idWurzelZuBewegenderZweig: ",
          this.idWurzelZuBewegenderZweig
        );

        // Mittels QTree API getNodeByKey kann auf dessen Node inklusive seiner Kindknoten (im verschachtelten Unterfeld children) zugegriffen werden:
        const wurzelZuBewegenderZweig = this.$refs.treeBaueinheiten.getNodeByKey(
          this.idWurzelZuBewegenderZweig
        );
        // ACHTUNG: wurzelZuBewegenderZweig ist eine lokale Hilfsvariable, KEIN .this verwenden!!!
        console.log("wurzelZuBewegenderZweig: ", wurzelZuBewegenderZweig); // ACHTUNG: Kein .this verwenden!

        // NEU: Test auf Existenz des parent-Felds (dieses ist bei Wurzelknoten nicht vorhanden, allerdings sollte Auswahl des Wurzelknotens für
        // Bewegen anderweitig unterbunden werden)
        if (
          wurzelZuBewegenderZweig.hasOwnProperty("parent") &&
          wurzelZuBewegenderZweig.parent !== null
        ) {
          const idOfElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaueinheiten =
            wurzelZuBewegenderZweig.parent;
          // console.log("idOfElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaueinheiten: , idOfElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaueinheiten");
          // console.log("idOfNode: ", idOfNode);
          // Nun feststellen, ob der zu prüfende Knoten idOfNode identisch ist mit diesem Elternknoten, und Resultat zurückgeben:
          if (
            idOfElternKnotenVonWurzelVonFuerBewegenMarkiertemZweigTreeBaueinheiten ===
            idOfNode // ACHTUNG: Kein .this verwenden!
          ) {
            return true;
          } else {
            return false;
          }
        } else {
          // Markierter Zweig ist Wurzelknoten, sollte unterbunden werden, allerdings hat dieser dann keinen Elternknoten, und damit
          // sollte false returned werden
          return false;
        }
      } else {
        return false; // Vue computed Funktion muss immer Wert zurückliefern!
      }
    },

    knotenIstImFuerBewegenMarkiertenZweigTreeBaueinheiten: function(idOfNode) {
      //----------------------------------------------------------------------------------------------------------------------------
      // NEU: Funktion, die berechnet, ob ein Knoten in dem zum Bewegen (d.h. Verschieben oder Kopieren) markierten Zweig im Bauvorhabenbaum ist
      // Parameter: idOfNode - key (id) des zu prüfenden Knotens
      //----------------------------------------------------------------------------------------------------------------------------
      let idsImMarkiertenZweig = []; // Array zum Sammeln aller ids im markierten Zweig, lokale Variable, KEIN .this verwenden!!!
      console.log("In knotenIstImFuerBewegenMarkiertenZweigTreeBaueinheiten()");
      if (
        idOfNode !== undefined &&
        idOfNode !== null &&
        this.idWurzelZuBewegenderZweig !== undefined &&
        this.idWurzelZuBewegenderZweig !== null
      ) {
        // Ansonsten befindet sich der durch idOfNode identifizierte Knoten irgendwo im Baum, und wir müssen zuerst den markierten Knoten identifizieren
        // Dieser wird in Variable idWurzelZuBewegenderZweig in data() gespeichert
        console.log(
          "idWurzelZuBewegenderZweig: ",
          this.idWurzelZuBewegenderZweig
        );
        // NEU: Zusätzliches Logging von $refs für Diagnose von Problem #325 - wurzelZuBewegenderZweig ist undefined:
        console.log("$refs.treeBaueinheiten: ", this.$refs.treeBaueinheiten); // Ist definiert per Log!
        // Mittels QTree API getNodeByKey kann auf dessen Node inklusive seiner Kindknoten (im verschachtelten Unterfeld children) zugegriffen werden:
        let wurzelZuBewegenderZweig = this.$refs.treeBaueinheiten.getNodeByKey(
          this.idWurzelZuBewegenderZweig
        ); // Problem #325: wurzelZuBewegenderZweig ist zum Zeitpunkt nach dem Bewegen offenbar undefined, trotz obiger Prüfung
        // this.idWurzelZuBewegenderZweig !== null - diese Variable wird am Ende von bewegeZweig() auf null gesetzt!
        // ACHTUNG: wurzelZuBewegenderZweig ist eine lokale Hilfsvariable, KEIN .this verwenden!!!
        // Das ggf. vorhandene Unterfeld children von wurzelZuBewegenderZweig ist ein verschachtelter Array aller Kinder des Wurzelknotens des markierten Zweigs,
        // potentiell auch leer, wenn der Wurzelknoten des markierten Zweigs keine Kindknoten hat
        console.log("wurzelZuBewegenderZweig: ", wurzelZuBewegenderZweig); // ACHTUNG: Kein .this verwenden!
        console.log(
          "Vor rekursiver Sammlung der ids in childrenOfWurzelZuBewegenderZweig()"
        );
        this.collectIdsInChildrenOfWurzelZuBewegenderZweig(
          wurzelZuBewegenderZweig,
          idsImMarkiertenZweig
        );
        // Rekursive Hilfsfunktion, sammelt ids aller Kinder im Array idsImMarkiertenZweig - wenn children leer ist, bleibt auch dieser Array leer!
        // Es muss nun idWurzelZuBewegenderZweig zusätzlich auf den Array gepushed werden:
        idsImMarkiertenZweig.push(this.idWurzelZuBewegenderZweig);
        console.log(
          "idsImMarkiertenZweig nach Rekursion: ",
          idsImMarkiertenZweig
        ); // ACHTUNG: Kein .this verwenden!

        // Nun mit Array-Funktion includes feststellen, ob der zu prüfende Knoten idOfNode in diesem Array ist, und Resultat zurückgeben:
        if (
          idsImMarkiertenZweig.includes(idOfNode) // ACHTUNG: Kein .this verwenden!
        ) {
          return true;
        } else {
          return false;
        }
      } else {
        return false;
      } // Vue computed Funktion muss immer Wert zurückliefern!
    },

    bewegeZweigMitAgendaJob: function(
      idZielElternKnoten,
      kopierenNichtVerschieben
    ) {
      //----------------------------------------------------------------------------------------------------------------------------------
      // NEU: Mit Agenda Job, #354
      // Funktion zum Verschieben oder Kopieren des vorher zum Verschieben oder Kopieren ausgewählten Zweigs unter einen neuen Elternknoten
      // Die id von dessen Wurzel wird gemerkt in der Variablen idWurzelZuBewegenderZweig
      // Parameter:
      // - idZielElternKnoten - id des neuen Elternknotens, unter dem der Zweig eingefügt werden soll
      // - kopierenNichtVerschieben: Boolean - zeigt an, ob der Zweig verschoben oder kopiert werden soll
      //   Wenn "false", wird der originale Zweig nach dem Einfügen unter dem neuen Elternknoten unter dem bisherigen Elternknoten gelöscht
      //----------------------------------------------------------------------------------------------------------------------------------
      const sleepTime = 2000; // Millisekunden
      function sleep(milliseconds) {
        // Hilsfunktion für sleep unten
        return new Promise(resolve => setTimeout(resolve, milliseconds));
      }
      //-------------------------------------------------------------------------------
      console.log("In bewegeZweigMitAgendaJob()");
      // NEU: idZielElternKnoten für späteren Refresh (Socket on-Funktion in mounted()) merken:
      this.idZielElternKnoten = idZielElternKnoten; // In data()
      const apiRoute =
        process.env.API +
        "/Baueinheiten/" +
        this.idWurzelZuBewegenderZweig +
        "/ZweigMitAgendaJob";
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      console.log("Vor Emit to leave room 'roomBauvorlagen'");
      this.$socket.emit("leaveRoom", {
        room: "roomBauvorlagen"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBauvorlagen'");
      //==========================================================================================================================================================================================================================================================================
      const ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt =
        this.localStore.state.einstellungenBenutzer
          .treesWerteVererbungVorhandeneWerteUeberschreibenMitWertenAusEingefuegtemZweig ===
        true; // ? true : false // Zum besseren Verständnis, aber eigentlich unnötig
      console.log(
        "Vor Aufruf von Axios put für Bewegen Zweig im Baum - Boolean-Wert im Body-Feld ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt: ",
        ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt
      );
      // ACHTUNG: Mit diesem Boolean-Wert gab es zuerst Probleme - die QRadio Buttons in einstellungen.vue zum Verstellen dieser Einstellung funktionierten ursprünglich nicht richtig mit Boolean-Werten
      //          Dort gefixed mit :val="true" bzw. "false" plus Konvertierung der Boolean-Werte aus dem Frontend in my-layout.vue und einstellungen.vue beim Speichern/Retrieve in Browser local Storage (welcher
      //          nur Strings, keine Booleans unterstützt). Nach diesen Fixes hier obige Abfrage auf ""=== true" eingesetellt und getestet -funktioniert!
      //==========================================================================================================================================================================================================================================================================
      this.$axios // Schickt einen Put-Request an das Backend für Baueinheiten, um den Zweig zu bewegen (ruft am Backend die Funktion bewegeZweigBaueinheit() auf)
        .put(apiRoute, {
          // body:
          idZielElternKnoten: idZielElternKnoten,
          kopierenNichtVerschieben: kopierenNichtVerschieben,
          eMailBenutzer: this.localStore.state.anmeldeDatenBenutzer
            .eMailBenutzer, // NEU: Benutzerkennung (E-Mail-Adresse) des angemeldeten Benutzers, für Weitervererbung Autoren
          benutzerRolle: this.localStore.state.anmeldeDatenBenutzer
            .benutzerRolle, // NEU: Benutzerrolle des angemeldeten Benutzers, für Weitervererbung Autoren
          // ALT (@sts):
          // ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt: this.localStore.state.verhaltenBeiVererbungskonfliktenBeiKopierenVerschiebenVonZweig === "ueberschreibeAnZielknoten" // ? true : false // Zum besseren Verständnis, aber eigentlich unnötig
          // NEU (@ms) - neue, in der Datenbank speicherbare Benutzereinstellung verwenden
          ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt: ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt // Die lokale Variable von oben
        })
        .then(async response => {
          // Hier async wegen await unten
          // Was im Erfolgsfall zu tun ist:
          console.log(
            "Erfolg aus $axios.put, response.status: ",
            response.status
          ); // Status loggen
          //-------------------------------------------------------------------------------------------------------------------------------------------
          // NEU - #354: Für Agenda Jobs am Backend, Listener für Web Sockets - Client hört damit auf Event "bewegeZweigBaueinheitAgendaJobComplete" vom Server:
          this.$socket.once("bewegeZweigBaueinheitAgendaJobComplete", data => {
            // NEU, statt generischem Socket Event "agendaTestJobComplete", um am Client komponentenspezifisch nur darauf reagieren zu können
            this.handleBewegeZweigMitAgendaJob(data, response.data.room); // Aufzurufende Funktion nach Bewegen von Zweigen
            // NEU: Mit $socket.once statt $socket.on (ist sicherer?)
            // ACHTUNG: Die aufzurufende Funktion muss mit arrow method "this" für Vue gebunden werden, sonst undefined-Fehler bei Ausführung!
            // data ist hierbei die Socket-Payload - auf diese wird in der Funktion handleBewegeZweigMitAgendaJob(data) zugegriffen!
            // Vorlage: https://stackoverflow.com/questions/61729677/referencing-a-vue-component-from-a-socket-function
            // HINWEIS: "bewegeZweigBaueinheitAgendaJobComplete" ist ein Socket Event, kein Room!
          });
          this.waitingForBewegeZweigBaueinheitAgendaJobComplete = true; // NEU, wird für den Timeout benötigt - siehe Kommentare unten
          //----------------------------------------------------------------------------------------------------------------------------------------
          // NEU (noch experimentell): Socket Timeout aufsetzen, um den Fall abzuhandeln, dass das Backend gar nicht mehr antwortet, z.B.
          // wegen Netzwerkproblemen etc.
          // Für socket.timeout: Siehe https://socket.io/docs/v4/client-api/#sockettimeoutvalue
          // https://stackoverflow.com/questions/9452085/how-do-i-set-a-socket-connection-timeout-in-node-js-http-client - es ist zusätzlich
          // $socket.end() oder $socket.destroy() notwendig im Handler!!! Aber diese gibt es gar nicht im socket.io V4 Client API!!!
          // Dafür gibt es $socket.off(eventName) - siehe https://socket.io/docs/v4/client-api/#socketoffeventname - diesen verwendet!
          // ACHTUNG: Der $socket.timeout Call war zunächst in mounted(), wo er aber Timeouts schon ohne $socket.emit aus bewegeZweigMitAgendaJob()
          // auslöste! D.h. er war nicht spezifisch für die emittierten Sockets aus bewegeZweigMitAgendaJob(), sondern auch für andere,
          // z.B. die Aktualisierungsnachrichten vom Backend. Daher testweise hierher verschoben unmittelbar vor den $socket.on, der
          // das Warten auslöst auf den Completion Event nach dem Verschiebens des Zweigs vom Backend.
          //----------------------------------------------------------------------------------------------------------------------------------------
          // ACHTUNG: $socket.timeout() erfordert mindestens socket.io V4, wir waren im Januar 2022 noch auf V2.3.0, wo es damit Compile-Fehler gab!
          // Abfrage der socket.io Version am Server mit:
          // bim-click-back-end> node
          // > require('socket.io/package').version
          // Siehe https://stackoverflow.com/questions/6655180/how-to-see-socket-io-version-on-node-js-npm-server/36356080#:~:text=just%20open%20node.,lot%20of%20information%20this%20way.
          //-----------------------------------------------------------------------------------------------------------------------------------------
          // Dazu war ein Upgrade auf Socket.io V4 notwendig:
          // Dafür am Frontend:
          // In package.json: "socket.io-client": "^2.4.1" ersetzen durch "socket.io-client": "^4.4.1",
          // bim-click-front-end> npm install socket.io-client // Siehe https://socket.io/docs/v4/client-installation/
          // bim-click-front-end> quasar dev --modern // Fresh Quasar Build!
          // Am Backend:
          // In package.json: "socket.io": "^2.4.1" ersetzen durch "socket.io": "^4.4.1",
          // bim-click-back-end> npm install socket.io // Siehe https://socket.io/docs/v4/server-installation/
          // ACHTUNG: Es kamen CORS Errors aus Socket http Requests im Frontend Browser Log nach dem Upgrade!!!
          // Dagegen musste in back-end-server.js, an const io = require("socket.io")(server) ein cors: { origin: '*'} hinzugefügt werden, siehe
          // https://stackoverflow.com/questions/59749021/socket-io-error-access-to-xmlhttprequest-has-been-blocked-by-cors-policy?rq=1
          //------------------------------------------------------------------------------------------------------------------------------------------
          // Der folgende $socket.timeout() müsste sich laut Doc auf die "subsequent Event Emission", d.h. auf $socket.emit(...) unten beziehen.
          // Dieses emit wird wohl hier gleich mit aufgesetzt, denn $socket.timeout() setzt lediglich einen "Modifier" dafür!
          // PROBLEM: Der Timeout wird auch ausgelöst (z.B. mit 60000 ms), nachdem die Completion erfolgreich war!!!
          // Dies tritt auch auf, wenn oben $socket.once statt .on verwendet wird!
          // Und auch ein $socket.emit("leaveRoomForAgendaJob") in handleBewegeZweigMitAgendaJob() hilft nicht, das zu verhindern!
          // Es ist auch egal, ob der $socket.timeout() vor dem obigen $socket.once/on ausgeführt wird oder danach.
          // Als einzige Lösung erscheint dann, dass man sich hier am Client in einer Variablen waitingForBewegeZweigBaueinheitAgendaJobComplete
          // merkt, dass auf "bewegeZweigBaueinheitAgendaJobComplete" Event gewartet wird.
          // Ist diese beim Auslösen des Timers false, muss man nichts tun, d.h. auch keine Benutzeraktion auslösen
          // Ist diese beim Auslösen des Timers true, ist es ein "echter Timeout", und man muss die Benutzeraktion mit Refresh Button auslösen
          // Wegen dieses Problems den Timeout einstweilen disabled und den normalen $socket.emit("joinRoomForAgendaJob") unten enabled:
          //
          this.$socket.timeout(10000).emit(
            "joinRoomForAgendaJob",
            {
              room: response.data.room
            },
            error => {
              // Mit socket.io Client V2 kommt hier "is not a function" im Browser Log!
              console.log("Socket Timeout wurde ausgelöst - error: ", error);
              console.log(
                "waitingForBewegeZweigBaueinheitAgendaJobComplete: ",
                this.waitingForBewegeZweigBaueinheitAgendaJobComplete
              );
              if (this.waitingForBewegeZweigBaueinheitAgendaJobComplete) {
                // Echter Timeout
                console.log(
                  "'Echter' Timeout - beende das Warten auf Event 'bewegeZweigBaueinheitAgendaJobComplete'"
                );
                this.$socket.off("bewegeZweigBaueinheitAgendaJobComplete"); // Invalidiert den $socket.on("bewegeZweigBaueinheitAgendaJobComplete")!
                // ACHTUNG: Wird wohl auch für $socket.once benötigt - nur wenn dieser Event tatsächlich gefired wird, wird er mit once
                //          wahrscheinlich eliminiert! In dem Fall hier wurde er aber noch gar nicht gefired!
                this.waitingForBewegeZweigBaueinheitAgendaJobComplete = false; // Nicht länger warten
                this.handleSocketTimeout(error); // Benutzeraktion mit Refresh Button auslösen
              } else {
                // 'Unechter Timeout, Bewegen ist schon beendet
                console.log("'Unechter' Timeout - nichts zu tun");
                // Do nothing
              }
            }
          );
          //
          //------------------------------------------------------------------------------------------------------------------------------------------
          // Joine einem Room, der die Bezeichnung der vom Server für diesen Client gesendeten Id trägt (eindeutig für jeden Agenda Job)
          // Besser als z.B. den Room per User Id zu identifizieren, da User mehrfach angelogt sein kann!!
          // ACHTUNG: Der Join für diesen Room am Server steckt in back-end-server, beim Aufsetzen auch anderer Rooms für Socket Nachrichten,
          // in dortigem on-Event-Handler für "joinRoomForAgendaJob"!
          // Damit wird schlußendlich die Socket-Rückmeldung vom Server empfangen! Diese wird vom Server (Backend) per
          // emit("bewegeZweigBaueinheitAgendaJobComplete") an den Room geschickt, dem der
          // Client (Frontend) mit diesem $socket.emit("joinRoomForAgendaJob") beigetreten ist.
          // Muss, wenn obiger $socket.timeout() enabled wird, disabled werden, da im obigen $socket.timeout() mit enthalten!
          /*
          this.$socket.emit("joinRoomForAgendaJob", {
            room: response.data.room
          });
          */
          //------------------------------------------------------------------------------------------------------------------------------------------
          if (kopierenNichtVerschieben) {
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_ZWEIG_KOPIEREN_IM_GANG
            );
          } else {
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_ZWEIG_VERSCHIEBEN_IM_GANG
            );
          }
          // Spinner anzeigen - wird bei Erhalt der Socket-Nachricht vom Server ausgeblendet per Loading.hide()
          Loading.show({
            spinner: QSpinnerGears
            // delay: 200 // ms, Default ist 500 ms, bevor Loading den Spinner zeigt
            // other props
          });
        })
        .catch(error => {
          //--------------------------------------------------------------------------------------------------------------------------------------------
          // ACHTUNG: Bei Exceptions im .then-Code NACH dem Empfang Response vom API wird ebenfalls dieser Catch-Block ausgeführt,
          // allerdings ist dann error.response undefined - deshalb unten vorsorglich noch Prüfungen dafür hier eingebaut!
          //-----------------------------------------------
          // Für #354: Hier zusätzliches Logging von error:
          console.log("In catch-Block von bewegeZweig(), error: ", error); // Auf Heroku muss dafür Console Logging in quasar.conf.js enabled werden!
          //-----------------------------------------------
          if (
            typeof error !==
              "undefined" /* Dieser undefined-Fall für error selbst sollte nie vorkommen */ &&
            typeof error.response !== "undefined" // Dieser undefined-Fall kann vorkommen! */
          ) {
            // Hier nun den Fall Status 403 abhandeln (Baustoffbezeichnung nicht eindeutig unter dem neuen Elternknoten)
            // Kommt nur vor, wenn 100-mal ein Zweig mit derselben Wurzel-Bezeichnung kopiert/verschoben wird,
            // da das Backend bei Namenskollisonen unter dem neuen Elternknoten ein eindeutiges Suffix " - Kopie (n)"
            // an die Bezeichnung anhängt, bis n=100 erreicht ist
            if (
              typeof error.response.status !== "undefined" &&
              error.response.status === 403
            ) {
              console.log(
                "Status 403 - es existiert unter der neuen Elternbaueinheit bereits eine Baueinheit mit derselben Bezeichnung wie die des Wurzelknotens des zu kopierenden/verschiebenden Zweigs"
              );
              if (kopierenNichtVerschieben) {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEINHEIT_ZWEIG_KOPIEREN_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
                );
              } else {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEINHEIT_ZWEIG_VERSCHIEBEN_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
                );
              }
              //-------------------------------------------------------------------------------------------------------------
              // NEU - #354: Versuchter Workaround gegen Heroku H12/H13 Fehler (Timeouts bei zu lang laufenden Requests) mit Status 503
              // Funktioniert aber so nicht, denn Heroku sendet bei diesem Fehler keine normale Response mit Status 503 auf den Request,
              // sondern schon der Axios Request Interceptor meldet einen sehr unspezifischen "Network Error".
              // Vorher taucht im Console Log (dieses dafür auf Heroku enablen) auch noch ein CORS Fehler auf:
              //   Access to XMLHttpRequest at 'https://bimclickserver.herokuapp.com/Baueinheiten/61447b1a58a0ea00169d7e3f/Zweig'
              //   from origin 'https://bimclick.herokuapp.com' has been blocked by CORS policy:
              //   No 'Access-Control-Allow-Origin' header is present on the requested resource.
              // Der Zugrif auf error und error.response.status im Catch-Block für die response hier ist somit in diesem Fall gar
              // nicht möglich, da nach dem
              // Response Interceptor Error der Catch-Block-Code hier in den else-Zweig unten läuft, wo error.response undefiniert ist
              // Ein Status 503 kann dort aber erst recht nicht abgefragt werden!
              // Siehe dazu auch: https://github.com/axios/axios/issues/1143
              // Daher diesen versuchten Workaround-Code hier wieder disabled
              // (stattdessen Workaround-Code im Axios Response Interceptor in axios.js, basierend auf error.message):
              /*
            } /* else if (error.response.status === 503) {
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_ZWEIG_BEWEGEN_TIMEOUT
              );
              //--------------------------------------------------------------------------------------------------------------
            */
            } else {
              // sonstiger Fehler, z.B. 500
              if (kopierenNichtVerschieben) {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEINHEIT_ZWEIG_KOPIEREN_FEHLER
                );
              } else {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEINHEIT_ZWEIG_VERSCHIEBEN_FEHLER
                );
              }
            }
          } else {
            console.log("error.response ist undefiniert");
            console.log("error: ", error);
            console.log("error.message: ", error.message);
            // Eine mögliche Ursache dafür: Fehler in refreshTreeBaueinheiten()")
            // Andere mögliche Ursache: Ggf. in axios.js gesetzter Axios Timeout am Frontend überschritten!
            // ACHTUNG: Im Axios Timeout-Fall wird Axios Response Interceptor gar nicht aufgerufen!
            // Weitere mögliche Ursache: H12/H13 Request Timeout Error am Backend auf Heroku!
            // ACHTUNG: In letzterem Fall müsste Axios Response Interceptor schon eine Benutzerwarnung ausgegeben haben!
            // Dieser Fall wird nämlich im Axios Response Interceptor per Abfrage auf error.message === "Network Error" abgefangen
            // Die folgenden Benutzer-Fehlermeldungen hier dann nur ausgeben, wenn NICHT ein Heroku Network Error vorliegt:
            if (
              error.message !== undefined &&
              error.message !== "Network Error"
            ) {
              if (kopierenNichtVerschieben) {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEINHEIT_ZWEIG_KOPIEREN_FEHLER
                );
              } else {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEINHEIT_ZWEIG_VERSCHIEBEN_FEHLER
                );
              }
            } else {
              console.log(
                "Network Error vom Heroku Backend (dort H12/H13 Timeout!"
              );
              // ACHTUNG: In diesem Fall müsste Axios Response Interceptor schon eine Benutzerwarnung ausgegeben haben!
            }
          }
        });
    },

    bewegeZweig: function(idZielElternKnoten, kopierenNichtVerschieben) {
      //----------------------------------------------------------------------------------------------------------------------------------
      // Funktion zum Verschieben oder Kopieren des vorher zum Verschieben oder Kopieren ausgewählten Zweigs unter einen neuen Elternknoten
      // Die id von dessen Wurzel wird gemerkt in der Variablen idWurzelZuBewegenderZweig
      // Parameter:
      // - idZielElternKnoten - id des neuen Elternknotens, unter dem der Zweig eingefügt werden soll
      // - kopierenNichtVerschieben: Boolean - zeigt an, ob der Zweig verschoben oder kopiert werden soll
      //   Wenn "false", wird der originale Zweig nach dem Einfügen unter dem neuen Elternknoten unter dem bisherigen Elternknoten gelöscht
      //----------------------------------------------------------------------------------------------------------------------------------
      const sleepTime = 2000; // Millisekunden
      function sleep(milliseconds) {
        // Hilsfunktion für sleep unten
        return new Promise(resolve => setTimeout(resolve, milliseconds));
      }
      //-------------------------------------------------------------------------------
      console.log("In bewegeZweig()");
      const apiRoute =
        process.env.API +
        "/Baueinheiten/" +
        this.idWurzelZuBewegenderZweig +
        "/Zweig";
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      console.log("Vor Emit to leave room 'roomBauvorlagen'");
      this.$socket.emit("leaveRoom", {
        room: "roomBauvorlagen"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBauvorlagen'");
      //==========================================================================================================================================================================================================================================================================
      const ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt =
        this.localStore.state.einstellungenBenutzer
          .treesWerteVererbungVorhandeneWerteUeberschreibenMitWertenAusEingefuegtemZweig ===
        true; // ? true : false // Zum besseren Verständnis, aber eigentlich unnötig
      console.log(
        "Vor Aufruf von Axios put für Bewegen Zweig im Baum - Boolean-Wert im Body-Feld ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt: ",
        ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt
      );
      // ACHTUNG: Mit diesem Boolean-Wert gab es zuerst Probleme - die QRadio Buttons in einstellungen.vue zum Verstellen dieser Einstellung funktionierten ursprünglich nicht richtig mit Boolean-Werten
      //          Dort gefixed mit :val="true" bzw. "false" plus Konvertierung der Boolean-Werte aus dem Frontend in my-layout.vue und einstellungen.vue beim Speichern/Retrieve in Browser local Storage (welcher
      //          nur Strings, keine Booleans unterstützt). Nach diesen Fixes hier obige Abfrage auf ""=== true" eingesetellt und getestet -funktioniert!
      //==========================================================================================================================================================================================================================================================================
      this.$axios // Schickt einen Put-Request an das Backend für Baueinheiten, um den Zweig zu bewegen (ruft am Backend die Funktion bewegeZweigBaueinheit() auf)
        .put(apiRoute, {
          // body:
          idZielElternKnoten: idZielElternKnoten,
          kopierenNichtVerschieben: kopierenNichtVerschieben,
          eMailBenutzer: this.localStore.state.anmeldeDatenBenutzer
            .eMailBenutzer, // NEU: Benutzerkennung (E-Mail-Adresse) des angemeldeten Benutzers, für Weitervererbung Autoren
          benutzerRolle: this.localStore.state.anmeldeDatenBenutzer
            .benutzerRolle, // NEU: Benutzerrolle des angemeldeten Benutzers, für Weitervererbung Autoren
          // ALT (@sts):
          // ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt: this.localStore.state.verhaltenBeiVererbungskonfliktenBeiKopierenVerschiebenVonZweig === "ueberschreibeAnZielknoten" // ? true : false // Zum besseren Verständnis, aber eigentlich unnötig
          // NEU (@ms) - neue, in der Datenbank speicherbare Benutzereinstellung verwenden
          ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt: ueberschreibeWerteBaueigenschaftenAnZielknotenBeiKonflikt // Die lokale Variable von oben
        })
        .then(async response => {
          // Hier async wegen await unten
          // Was im Erfolgsfall zu tun ist:
          console.log(
            "Erfolg aus $axios.put, response.status: ",
            response.status
          ); // Status loggen

          // NEU: Return-Parameter vom API für die id des neu erzeugten Wurzelknotens des kopierten/verschobenen Zweigs:
          console.log(
            "idNeueWurzelZuBewegenderZweig: ",
            response.data.idNeueWurzelZuBewegenderZweig
          );
          //=====================================================================================================================================
          // Alternative 1 - ENABLED: refreshTreeBaueinheiten() aufrufen
          // Funktionierte ursprünglich nicht immer zuverlässig, z.B. beim Verschieben eines Zweigs im Baum
          // Außerdem wird das Icon für den Baumknotentyp nach dem Verschieben eines Zweigs nicht aktualisiert (wenn er keine Geschwister hatte)
          // Zusätzlich zu erledigen bei dieser Alternative: Expandieren der Knoten im bewegten Zweig, siehe Code unten
          // Aktuell ist diese Alternative enabled - funktioniert stabil, Tests aller Kombinationen in Testmatrix in bim-click-design-internals.md
          // Z.B. frühere Restfehler:
          // - Der Baumknotentyp der Wurzel eines verschobenen Zweigs wird eventuell als Blatt statt als Verzweigung angezeigt
          // - Die eigentlich expandierbare Wurzel eines expandierten, kopierten Zweigs wird als nicht expandierbar angezeigt
          // Nach Refresh war der Baum aber stets in Ordnung!
          // Diese Fehler sind mittlerweile durch speziellen, neuen Code in refreshTreeBaueinheiten() gefixed!
          //----------------------------------------------------------------------------------------------------------------------------------------
          // this.refreshTreeBaueinheiten(); // ALT: Nun den gesamten Baum neu laden mit dieser speziellen Funktion
          //---------------------------------------------------------------------------------------------------------
          // NEU: #111 - Zielelternknoten des bewegten Zweigs expandieren - NACH await des Refreshs des Baums.
          // HINWEIS: Da der Refresh asynchron abläuft, ist await notwendig!
          console.log("Vor await reloadTreeWrapper('Nicht optimiert')");
          this.idWurzelZuBewegenderZweig = null; // Zurücksetzen, sonst wird weiter das Icon für "markiert" angezeigt
          // ACHTUNG: Dieses Zurücksetzen als Fix für #325 von Position NACH dem Aufruf VOR den Aufruf von reloadTreeWrapper() verschoben!
          await this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
          console.log("Nach await reloadTreeWrapper('Nicht optimiert')");
          this.$refs.treeBaueinheiten.setExpanded(idZielElternKnoten, true);
          // this.idWurzelZuBewegenderZweig = null; // Zurücksetzen, sonst wird weiter das Icon für "markiert" angezeigt
          // Ursprüngliche Position des Zurücksetzens vor der Verschiebung als Fix für #325!
          // UPDATE: Wieder hierher verschoben, sonst ist Aufruf von setExpanded(this.idZielElternKnoten) sinnlos!!!
          //------------------------------------------------------------------------------------------------------------------
          // ALT: Es folgen diverse experimentelle Versuche, die mangels obigem await reloadTreeWrapper('Nicht optimiert') diverse
          // Timing-Probleme hatten!
          // ACHTUNG: Erst NACH refreshTreeBaueinheiten() zurücksetzen - denn der bisherige Wert wird in refreshTreeBaueinheiten() gebraucht!!!
          // ACHTUNG: In früheren Codeständen musste dieses Reset von idWurzelZuBewegenderZweig unbedingt vor der dem Aktualisieren des Trees passieren, sonst failten
          // die auf idWurzelZubewebenderZweig im Template basierenden Funktionen zum Disabling von markierten
          // Knoten in den QTree Kontextmenüs (damit man nicht nach Knoten im markierten Zweig kopieren/verschieben kann)
          //------------------------------------------------------------------------------------------------------------------
          // Variante 1: expandedKeysTreeBaueinheiten verändern - disabled, da es nicht funktioniert
          // this.expandedKeysTreeBaueinheiten.push(idZielElternKnoten, response.data.idNeueWurzelZuBewegenderZweig);
          // Dies sollte zunächst nur den Elternknoten des verschobenen/kopierten Zweigs expandieren
          // Später auch noch den neuen Wurzelknoten des verschobenen/kopierten Zweigs hinzugefügt
          // ACHTUNG: Dies bewirkt allerdings leider für keinen der beiden Knoten eine Expansion, wahrscheinlich wegen Konflikt mit Lazy Loading
          // console.log("expandedKeysTreeBaueinheiten: ", this.expandedKeysTreeBaueinheiten);
          //-----------------------------------------------------------------------------------------------------------------------------------------
          // Variante 2 - aktuell ebenfalls disabled: Per QTree API setExpanded() aufrufen für bestimmte Knoten, z.B. den neuen Elternknoten
          // ACHTUNG: Funktioniert auf Heroku nur mit sehr langer Sleep-Zeit (mehrere Sekunden) - daher auch wieder disabled!!!
          // console.log("Vor sleep(sleepTime), um asynchrones Ende von refreshTreeBaueinheiten() abzuwarten - sleepTime: ", sleepTime, "ms");
          // await sleep(sleepTime); // ACHTUNG: Sleep erforderlich, da sonst wegen Noch-Nicht-Completion von refreshTreeBaueinheiten() oben Fehler im Log auftreten können, dass
          //                        // setExpanded() für Knoten gemacht wird, die noch nicht fertiggestellt sind bzgl. lazy-Flag!!!
          // this.$refs.treeBaueinheiten.getNodeByKey(idZielElternKnoten).lazy = true; // Sicherheitshalber - Flag lazy wird in refreshTreeBaueinheiten() auf true gesetzt!
          // ACHTUNG: Das Flag lazy wird auch in refreshTreeBaueinheiten() auf true gesetzt! Per Tests ist es hier für Knoten, die vor dem Bewegen Blattknoten waren,
          //          erst dann true, wenn refreshTreeBaueinheiten() vollständig durchgelaufen ist...was aktuell nur durch den Workaround mit sleep() erzielt wird.
          //          Falls refreshTreeBaueinheiten() noch asynchron aktiv ist, und den neuen Elternknoten noch nicht bearbeitet hat, wird hier lazy mit false
          //          angezeigt, d.h. der alte Werte!!! Daher wird es hier sicherheitshalber noch einmal auf true gesetzt!
          // console.log("Vor setExpanded() für neuen Zielelternknoten - lazy: ", this.$refs.treeBaueinheiten.getNodeByKey(idZielElternKnoten).lazy);
          // this.$refs.treeBaueinheiten.setExpanded(idZielElternKnoten, true); // Funktioniert nach den Tests (siehe Testmatrix in bim-click-design-internals.md),
          //                                                                    // allerdings auf Heroku nur mit sehr langer Sleep-Zeit (mehrere Sekunden)
          //------------------------------------------------------------------------------------------------------------------------------------------
          // Nun setExpanded() auch für den neuen Wurzelknoten des bewegten Zweigs aufrufen, um diesen zumindest auf der obersten Ebene zu expandieren
          // Funktionierte in ersten Code-Versionen noch nicht, funktioniert jetzt zwar meistens,  im Zusammenspiel mit überarbeiteter Methode refreshTreeBaueinheiten(),
          // die das lazy-Flag für den neu eingefügten Wurzelknoten des bewegten Zweigs korrekt setzt,
          // ist aber abhängig von der Länge des Sleep Timings und daher sehr fragil - daher einstweilen DISABLED!!!
          //============================================================================================================================================================
          // ACHTUNG: Bei zu kurzem Sleep ist im Log sichtbar, dass refreshTreeBaueinheiten() noch nicht fertig ist, es kommt dann ein Error, der durch setExpanded() ausgelöst ist:
          // "Error aus $axios.put, error:  "TypeError: Cannot read property 'lazy' of undefined"
          // bzw. durch den .catch ganz unten ein Error: TypeError: Cannot read property 'status' of undefined"
          // await sleep(sleepTime); // ACHTUNG: Sleep erforderlich, da sonst wegen Noch-Nicht-Completion von refreshTreeBaueinheiten() oben Fehler im Log auftreten können, dass
          // setExpanded() für Knoten gemacht wird, die noch nicht fertiggestellt sind bzgl. lazy-Flag!!!
          // this.$refs.treeBaueinheiten.getNodeByKey(idNeueWurzelZuBewegenderZweig).lazy = true; // Sicherheitshalber - Flag lazy wird in refreshTreeBaueinheiten() auf true gesetzt!
          // console.log("Vor setExpanded() für neue Wurzel des bewegten Zweigs - lazy: ", this.$refs.treeBaueinheiten.getNodeByKey(response.data.idNeueWurzelZuBewegenderZweig).lazy);
          // this.$refs.treeBaueinheiten.setExpanded(response.data.idNeueWurzelZuBewegenderZweig, true);
          //=====================================================================================================================================
          // Alternative 2 - DISABLED: nodesTreeBaueinheiten resetten und loadRootNodeTreeBaueinheiten() aufrufen
          // Diese Alternative funktioniert im Prinzip, aber nur mit fragilen Workarounds (Sleeps gegen Timing Probleme - siehe unten)
          // Aktuell disabled zugunsten von Alternative 1 oben
          // ------------------------------------------------------------------------------------------------------------------------------------
          // ====================================================================================================================================
          // Start Disabling von Alternative 2 per /* */
          // ====================================================================================================================================
          /*
          // Vorbereitendes Resetting diverser QTree-Variablen:
          this.nodesTreeBaueinheiten = []; // ACHTUNG: Ohne dieses Resetten von nodesTreeBaueinheiten werden nach dem loadRootNodeTreeBaueinheiten() gleich 2 Bauvorhabenbäume angezeigt - falsch!!!
          this.$refs.treeBaueinheiten.lazy = {}; // lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"}
          // Siehe https://forum.quasar-framework.org/topic/2460/qtree-reload-or-refresh-the-tree-lazy-loading-enabled/9
          // ACHTUNG: Ohne dieses Resetten von lazy wird nach dem loadRootNodeTreeBaueinheiten() nur der Wurzelknoten OHNE Expansionsmöglichkeit (d.h. ohne graues Dreieck mit Spitze nach unten) angezeigt - falsch!!!
          const oldExpandedKeysTreeBaueinheiten = this
            .expandedKeysTreeBaueinheiten; // Die alten expanded Keys hier merken
          let newExpandedKeysTreeBaueinheiten = oldExpandedKeysTreeBaueinheiten; // lokale Variable für die neuen expanded Keys
          // Die originalen expanded Keys nun resetten:
          this.expandedKeysTreeBaueinheiten = []; // Hält sonst noch die alten ids, die nach dem loadRootNodeTreeBaueinheiten() NICHT mehr expandiert sind, daher resetten
          // this.selectedKeyTreeBaueinheiten = null; // Unnötig, hält hat aber noch die alte id
          //--------------------------------------------------------------------------------------------------------------------------------------
          const reExpandierenTreeBaueinheiten = true; // Flag, das steuert, ob der Baum re-expandiert wird (experimentell, noch mit Timing Problemen)
          const sleepTime = 600; // Millisekunden Sleep Time, für Workaround
          //--------------------------------------------------------------------------------------------------------------------------------------
          // Experiment 3 (Variante der Alternative)
          // Im neu geladenem Baum den alten Array expandedKeysTreeBaueinheiten traversieren und diese Knoten alle expandieren per QTree API setExpanded()
          // ACHTUNG: Dies funktioniert nur, wenn KEIN Zweig verschoben wurde. Wenn ein Zweig verschoben wurde, werden für diesen die alten ids
          // am Backend gelöscht, und neue Knoten mit neuen ids erzeugt, die der QTree hier am Frontend noch nicht kennt.
          // Die ids von potentiell expandierten Knoten im alten Zweig können dabei noch in oldExpandedKeysTreeBaueinheiten sein. Das setExpanded() mit diesen ids
          // wirft dann die auch sonst wegen Timing Problemen mit den Quasar-Funktionen (z.B. auch getNodeByKey) auftretende Exception
          // "Cannot read property 'lazy' of undefined"!!!
          // Für diesen Fall muss der Array also vorher erst aufbereitet werden - die alten Knoten müssen ggf. entfernt werden, falls sie expandiert waren.
          // Dazu unten folgenden Algorithmus implementiert, um expandierte Knoten im zu bewegenden Zweig zu behandeln:
          // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
          // ACHTUNG: Die Reihenfolge im Array ist dabei wichtig - zumindest müssen wegen lazy Loading immer erst die Elternknoten eines Knotens expandiert worden sein, sonst
          //          kommen hier ebenfalls die merkwürdigen Fehler von setExpanded ("Cannot read property 'status' of undefined")
          // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
          // 1. Bei !kopierenNichtVerschieben (d.h. Verschieben):
          //    a) Die ids aller Knoten im zu bewegenden Zweig am Frontend ermitteln - diese können teilweise geladen oder expandiert gewesen sein oder auch nicht
          //       Dies geht mit rekursivem Traversal der children des Knotens mit idWurzelZuBewegenderZweig VOR dem Neu-Laden des Trees und Sammeln von deren ids
          //    b) Aus dem Array aller Knoten, die expandiert waren, die Knoten aus a) herausfiltern (d.h. sie daraus entfernen, wenn sie expandiert waren)
          // 2. In allen Fällen (Kopieren oder Verschieben):
          //    Zusätzliche Nodes pushen - ACHTUNG: Die Reihenfolge ist dabei wichtig!
          //    a) Den neuen Elternknoten des bewegten Zweigs hinzufügen (dieser kann, aber muss nicht expandiert gewesen sein!)
          //    b) Die id des neuen Wurzelknotens (aus API Call) zu oldExpandedKeysTreeBaueinheiten hinzufügen, damit dieser zunindest auf der obersten Ebene expandiert wird
          //    Hinweise:
          //    - Die Knoten auf dem Pfad bis einen Knoten über dem Elternknoten dieses Knoten müssen expandiert gewesen sein, sonst hätte man nicht den neuen Elternknoten auswählen können.
          //    - Es wäre zu komplex, auch noch die Pendants aller vorher expandierten Unterknoten festzustellen, und die daraus expandierten auch im neuen Zweig zu expandieren!
          //
          //=======================================================================================================================================
          // FAZIT: Der Code funktionierte ursprünglich bereis für kopierte Zweige, allerdings nur mit Workaround (Sleeps) wegen Timing-Problemen (siehe unten)
          // Mit obiger Erweiterung für das Neu-Setzen der expanded Nodes funktioniert es nun auch für verschobene Zweige!
          // TODO XXXXXX - Den Workaround (Sleeps) eliminieren, worst Case durch Fallback auf Alternative 1 (refreshTreeBaueinheiten())
          // Die Sleeps akkumulieren sich, je mehr expanded Nodes es gibt - beim Rerendering des Trees sieht man, dass das Rerendering nicht
          // auf einmal, sondern von oben nach unten passiert durch die Sleep-Unterbrechungen
          //=======================================================================================================================================
          console.log(
            "oldExpandedKeysTreeBaueinheiten: ",
            oldExpandedKeysTreeBaueinheiten
          );
          //----------------------------------------------------------------------------------------------------
          function sleep(milliseconds) {
            // Hilsfunktion für sleep unten
            return new Promise(resolve => setTimeout(resolve, milliseconds));
          }
          //----------------------------------------------------------------------------------------------------
          function collectIdsInChildrenOfWurzelZuBewegenderZweig(node, ids) {
            //---------------------------------------------------------------------------------------------------------------------
            // Rekursive Hilfsfunktion zum Sammeln der ids aller Nodes in children-Objekten eines Knotens node (1. Parameter) in
            // ids (2. Parameter ids - Referenz auf übergebenen Array)
            // Selber Code wie schon beim Markieren!
            console.log(
              "In rekursiver Hilfsfunktion collectIdsInChildrenOfWurzelZuBewegenderZweig()"
            );
            if (node.children !== undefined) {
              for (var i = 0; i < node.children.length; i++) {
                console.log(
                  "node.children[",
                  i,
                  "]._id: ",
                  node.children[i]._id
                );
                ids.push(node.children[i]._id);
                collectIdsInChildrenOfWurzelZuBewegenderZweig(
                  node.children[i],
                  ids
                );
              }
            } else {
              console.log(
                "Keine children geladen! Übergebener Array der ids bleibt unverändert"
              );
            } // ACHTUNG: Wenn der Node nicht expandiert war, sind die children NICHT definiert, d.h. geladen durch lazy Loading!
            // Dies kann schon beim ersten Aufruf der Fall sein, dann bleibt idsImVerschobenenZweig === []
          }
          //----------------------------------------------------------------------------------------------------
          function ermittleNewExpandedNodes() {
            // Hilsfunktion zur obigen Berechnung der neu zu expandierenden Nodes
            console.log("In ermittleNewExpandedNodes()");
            console.log("kopierenNichtVerschieben: ", kopierenNichtVerschieben);
            if (!kopierenNichtVerschieben) {
              // Step 1.a) oben: Sammeln aller ursprünglichen ids im bewegten (d.h. in diesem Fall verschobenen) Zweig
              let idsImVerschobenenZweig = []; // Array zum Sammeln aller ursprünglichen ids im bewegten Zweig, lokale Variable, KEIN .this verwenden!!!
              // Mittels QTree API getNodeByKey kann auf durch idWurzelZuBewegenderZweig identifizierten Wurzelknoten des zu bewegenden Zweigs inklusive
              // seiner Kindknoten im verschachtelten Unterfeld children) zugegriffen werden
              // ACHTUNG: Dies funktioniert in dieser Unterfunktion aber nur per vueInstance, nicht per .this!!! Dito der Zugriff auf idWurzelZuBewegenderZweig!
              let wurzelVerschobenerZweig = vueInstance.$refs.treeBaueinheiten.getNodeByKey(
                vueInstance.idWurzelZuBewegenderZweig
              ); // ACHTUNG: wurzelVerschobenerZweig ist eine lokale Hilfsvariable, KEIN .this verwenden!!!
              console.log(
                "vueInstance.idNeueWurzelZuBewegenderZweig: ",
                vueInstance.idWurzelZuBewegenderZweig
              );
              console.log("wurzelVerschobenerZweig: ", wurzelVerschobenerZweig);
              // Sicherheitshalber warten (Workaround) - wird aktuell nicht mehr gebraucht
              // Start disabled Code für Sleep
              // console.log("Vor sleep: ", sleepTime, "ms");
              // await sleep(sleepTime); // Millisekunden
              // console.log("Nach sleep: ", sleepTime, "ms");
              // console.log("wurzelVerschobenerZweig._id: ", wurzelVerschobenerZweig._id)
              // Ende disabled Code für Sleep
              collectIdsInChildrenOfWurzelZuBewegenderZweig(
                wurzelVerschobenerZweig,
                idsImVerschobenenZweig
              ); // Die (geladenen und evtl. expandierten) Kindknoten
              idsImVerschobenenZweig.push(
                vueInstance.idWurzelZuBewegenderZweig
              ); // Den originalen Wurzelknoten des verschobenen Zweigs noch hinzufügen
              console.log("idsImVerschobenenZweig: ", idsImVerschobenenZweig);
              // Step 1.b) oben: Nun diese herausfiltern aus dem Array der alten expandierten Nodes
              newExpandedKeysTreeBaueinheiten = oldExpandedKeysTreeBaueinheiten.filter(
                element => !idsImVerschobenenZweig.includes(element)
              ); // ACHTUNG: Hier ! notwendig zur Bildung der Schnittmenge der beiden Arrays!
              console.log(
                "Nach Filtern - newExpandedKeysTreeBaueinheiten: ",
                newExpandedKeysTreeBaueinheiten
              );
            } // else {} // Im Fall Kopieren ist hier nichts Spezielles zu tun
            // In beiden Fällen:
            // Step 2.a) oben - ACHTUNG: die Reihenfolge dieser beiden Pushs ist wichtig!
            console.log("Pushe zielElternknoten: ", idZielElternKnoten);
            newExpandedKeysTreeBaueinheiten.push(idZielElternKnoten);
            // Step 2.b) oben:
            console.log(
              "Pushe idNeueWurzelZuBewegenderZweig: ",
              response.data.idNeueWurzelZuBewegenderZweig
            );
            newExpandedKeysTreeBaueinheiten.push(
              response.data.idNeueWurzelZuBewegenderZweig
            );
            console.log(
              "Nach Push - newExpandedKeysTreeBaueinheiten: ",
              newExpandedKeysTreeBaueinheiten
            );
          }

          //------------------------------------------------------------------------------------------------------
          let vueInstance = this; // ACHTUNG: In der Funktion ermittleNewExpandedNodes() statt "this" verwenden
          // Notwendig, weil in function ermittleNewExpandedNodes "this" nicht wie gewohnt verwendbar ist
          // Nun diese Funktion aufrufen:
          ermittleNewExpandedNodes();
          //------------------------------------------------------------------------------------------------------
          //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
          // ACHTUNG: Das folgendes Reset muss unbedingt vor der Neu-Expansion des Trees passieren, sonst failen
          // die auf idWurzelZubewebenderZweig im Template basierenden Funktionen zum Disabling von markierten
          // Knoten in den QTree Kontextmenüs (damit man nicht nach Knoten im markierten Zweig kopieren/verschieben kann)
          this.idWurzelZuBewegenderZweig = null; // Zurücksetzen, sonst wird weiter das Icon für "markiert" angezeigt
          //------------------------------------------------------------------------------------------------------
          // Nun den QTree neu laden - ACHTUNG: Dies muss NACH dem Aufruf von ermittleNewExpandedNodes() passieren, da
          // die Funktion ggf. auf die Nodes des verschobenen Zweigs im alten Baum zugreift! Deren ids sind
          // nicht mehr gültig nach dem Verschieben!
          console.log("Vor await loadRootNodeTreeBaueinheiten()");
          await this.loadRootNodeTreeBaueinheiten();
          // NEU: Mit await und Promise based loadRootNodeTreeBaueinheiten, sonst laufen die Folgeaktionen unten in undefined Errors!
          console.log("Nach await loadRootNodeTreeBaueinheiten()");
          //------------------------------------------------------------------------------------------------------
          if (reExpandierenTreeBaueinheiten) {
            // Flag, das steuert, ob der Baum re-expandiert wird (experimentell, noch mit obigen Timing Problemen)
            for (var key of newExpandedKeysTreeBaueinheiten) {
              console.log("In Schleife für setExpanded - key: ", key);
              //----------------------------------------------------------------------------------------------------
              // Es folgt Code für Tests mit lazy-Objekt von q-tree - hat keinen Einfluss - daher disabled
              // Start disabled Code für Tests mit lazy-Objekt
              // if (this.$refs.treeBaueinheiten === undefined) {
              //   console.log("ACHTUNG: this.$refs.treeBaueinheiten ist undefined!")
              // }
              // // NEU: Test auf Existenz von lazy, sonst Fehler im Log "Cannot read property 'lazy' of undefined"
              // if (
              //   this.$refs.treeBaueinheiten.hasOwnProperty("lazy") &&
              //   this.$refs.treeBaueinheiten.lazy !== null
              // ) {
              //   console.log(
              //     "lazy vor setExpanded(key): ",
              //      this.$refs.treeBaueinheiten.lazy
              //   );
              // } else {
              //   console.log(
              //     "lazy vor setExpanded(key) ist undefined!"
              //   )
              // }
              // Ende disabled Code für Testss mit lazy-Objekt
              //-------------------------------------------------------------------------------------------------------
              // Es folgt Code für Variante mit Property node.lazy - hat keinen Einfluss - daher disabled
              // let node = this.$refs.treeBaueinheiten.getNodeByKey(key);
              // ACHTUNG: Dieser Call von getNodeByKey() hat selbes Timing-Problem wie Call von setExpanded() unten!!!
              // Bei Timing-Problem ist node dann null!!!
              // ACHTUNG: Funktioniert auch auf keinen Fall bei verschobenen Nodes, da diese neue ids bekommen!
              // console.log("this.$refs.treeBaueinheiten: ", this.$refs.treeBaueinheiten);
              // console.log("node: ", node); // ACHTUNG: Kann null sein wegen Timing-Problem!!!
              // node.lazy = true;
              // console.log("node.lazy für key: ", node.lazy);
              //--------------------------------------------------------------------------------------------------------
              // Nun den betreffenden Knoten im Baum per API-Call expandieren
              console.log("Vor setExpanded(key)");
              this.$refs.treeBaueinheiten.setExpanded(key, true);
              // ACHTUNG: Dieser Code kann ein Timing-Problem haben, weil setExpanded() under the Covers lazyLoadHandlingTreeBaueinheiten() triggered,
              // welche einen asynchronen Backend-Call macht, was länger dauern kann.
              // Im Log gibt es dann beim zweiten Aufruf in der Schleife im Log Fehler "Cannot read property 'lazy' of undefined",
              // weil der von lazyLoadHandling zu holende Kindknoten noch gar nicht definiert ist, weil lazyLoadHandlingTreeBaueinheitn noch nicht fertig ist.
              // HINWEIS: await vor dem Call nutzt hier auch nichts, weil dies Funktion keine Promise zurückliefert (getestet)!!!
              // Idee: Man könnte versuchen, die Completion mit einem in lazyLoadHandlingTreeBaueinheiten(), das nach Aufruf von done gefeuert wird, anzuzeigen,
              // und hier auf dieses Event zu warten - ist aber komplex
              //--------------------------------------------------------------------------------------------------------
              // Stattdessen temporär folgender Workaround gegen Timing-Probleme:
              // Sleeps - Dies sorgen dafür, dass das lazy Loading die Knoten während der Wartezeit befüllt
              console.log("Vor sleep: ", sleepTime, "ms");
              await sleep(sleepTime); // Millisekunden
              console.log("Nach sleep: ", sleepTime, "ms");
              //---------------------------------------------------------------------------------------------------------
              // Disabled Code folgt für Tests mit lazy-Objekt:
              // console.log(
              //   "lazy nach setExpanded(key): ",
              //   this.$refs.treeBaueinheiten.lazy
              // );
              // // Per Logs: setExpanded(key) verändert lazy nicht für bereits geladene Knoten - daher disabled
              // // delete this.$refs.treeBaueinheiten.lazy[key]; // Resetten des Elements im Objekt lazy - ACHTUNG - funktioniert so per Log nicht!!!
              // // console.log("lazy nach delete: ", this.$refs.treeBaueinheiten.lazy);
              //---------------------------------------------------------------------------------------------
            }
            //-----------------------------------------------------------------------------------------------------------
          } else {
            // Do nothing, Tree bleibt kollabiert
            // this.expandedKeysTreeBaueinheiten = newExpandedKeysTreeBaueinheiten; // Funktioniert so nicht, muss per setExpandedKey gesteuert werden, da lazy Loading
          }
          */
          // ====================================================================================================================================
          // Ende Disabling von Alternative 2 per /* */
          // ====================================================================================================================================
          //------------------------------------------------------------------------------------------------------------------------------------------
          if (kopierenNichtVerschieben) {
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_ZWEIG_KOPIEREN_ERFOLG
            );
          } else {
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_ZWEIG_VERSCHIEBEN_ERFOLG
            );
          }
        })
        .catch(error => {
          //--------------------------------------------------------------------------------------------------------------------------------------------
          // ACHTUNG: Bei Exceptions im .then-Code NACH dem Empfang Response vom API wird ebenfalls dieser Catch-Block ausgeführt,
          // allerdings ist dann error.response undefined - deshalb unten vorsorglich noch Prüfungen dafür hier eingebaut!
          //-----------------------------------------------
          // Für #354: Hier zusätzliches Logging von error:
          console.log("In catch-Block von bewegeZweig(), error: ", error); // Auf Heroku muss dafür Console Logging in quasar.conf.js enabled werden!
          //-----------------------------------------------
          if (
            typeof error !==
              "undefined" /* Dieser undefined-Fall für error selbst sollte nie vorkommen */ &&
            typeof error.response !== "undefined" // Dieser undefined-Fall kann vorkommen! */
          ) {
            // Hier nun den Fall Status 403 abhandeln (Baustoffbezeichnung nicht eindeutig unter dem neuen Elternknoten)
            // Kommt nur vor, wenn 100-mal ein Zweig mit derselben Wurzel-Bezeichnung kopiert/verschoben wird,
            // da das Backend bei Namenskollisonen unter dem neuen Elternknoten ein eindeutiges Suffix " - Kopie (n)"
            // an die Bezeichnung anhängt, bis n=100 erreicht ist
            if (
              typeof error.response.status !== "undefined" &&
              error.response.status === 403
            ) {
              console.log(
                "Status 403 - es existiert unter der neuen Elternbaueinheit bereits eine Baueinheit mit derselben Bezeichnung wie die des Wurzelknotens des zu kopierenden/verschiebenden Zweigs"
              );
              if (kopierenNichtVerschieben) {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEINHEIT_ZWEIG_KOPIEREN_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
                );
              } else {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEINHEIT_ZWEIG_VERSCHIEBEN_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
                );
              }
              //-------------------------------------------------------------------------------------------------------------
              // NEU - #354: Versuchter Workaround gegen Heroku H12/H13 Fehler (Timeouts bei zu lang laufenden Requests) mit Status 503
              // Funktioniert aber so nicht, denn Heroku sendet bei diesem Fehler keine normale Response mit Status 503 auf den Request,
              // sondern schon der Axios Request Interceptor meldet einen sehr unspezifischen "Network Error".
              // Vorher taucht im Console Log (dieses dafür auf Heroku enablen) auch noch ein CORS Fehler auf:
              //   Access to XMLHttpRequest at 'https://bimclickserver.herokuapp.com/Baueinheiten/61447b1a58a0ea00169d7e3f/Zweig'
              //   from origin 'https://bimclick.herokuapp.com' has been blocked by CORS policy:
              //   No 'Access-Control-Allow-Origin' header is present on the requested resource.
              // Der Zugrif auf error und error.response.status im Catch-Block für die response hier ist somit in diesem Fall gar
              // nicht möglich, da nach dem
              // Response Interceptor Error der Catch-Block-Code hier in den else-Zweig unten läuft, wo error.response undefiniert ist
              // Ein Status 503 kann dort aber erst recht nicht abgefragt werden!
              // Siehe dazu auch: https://github.com/axios/axios/issues/1143
              // Daher diesen versuchten Workaround-Code hier wieder disabled
              // (stattdessen Workaround-Code im Axios Response Interceptor in axios.js, basierend auf error.message):
              /*
            } /* else if (error.response.status === 503) {
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_ZWEIG_BEWEGEN_TIMEOUT
              );
              //--------------------------------------------------------------------------------------------------------------
            */
            } else {
              // sonstiger Fehler, z.B. 500
              if (kopierenNichtVerschieben) {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEINHEIT_ZWEIG_KOPIEREN_FEHLER
                );
              } else {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEINHEIT_ZWEIG_VERSCHIEBEN_FEHLER
                );
              }
            }
          } else {
            console.log("error.response ist undefiniert");
            console.log("error: ", error);
            console.log("error.message: ", error.message);
            // Eine mögliche Ursache dafür: Fehler in refreshTreeBaueinheiten()")
            // Andere mögliche Ursache: Ggf. in axios.js gesetzter Axios Timeout am Frontend überschritten!
            // ACHTUNG: Im Axios Timeout-Fall wird Axios Response Interceptor gar nicht aufgerufen!
            // Weitere mögliche Ursache: H12/H13 Request Timeout Error am Backend auf Heroku!
            // ACHTUNG: In letzterem Fall müsste Axios Response Interceptor schon eine Benutzerwarnung ausgegeben haben!
            // Dieser Fall wird nämlich im Axios Response Interceptor per Abfrage auf error.message === "Network Error" abgefangen
            // Die folgenden Benutzer-Fehlermeldungen hier dann nur ausgeben, wenn NICHT ein Heroku Network Error vorliegt:
            if (
              error.message !== undefined &&
              error.message !== "Network Error"
            ) {
              if (kopierenNichtVerschieben) {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEINHEIT_ZWEIG_KOPIEREN_FEHLER
                );
              } else {
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEINHEIT_ZWEIG_VERSCHIEBEN_FEHLER
                );
              }
            } else {
              console.log(
                "Network Error vom Heroku Backend (dort H12/H13 Timeout!"
              );
              // ACHTUNG: In diesem Fall müsste Axios Response Interceptor schon eine Benutzerwarnung ausgegeben haben!
            }
          }
        });
    },

    //======================================================================================================================================
    // NEU: Methoden für Funktionen im Tab "Angaben zum Bauvorhaben"
    // Disabled, ersetzt durch Baueigenschaftsprofilformular "Bauvorhaben" (Vue-Komponente)
    //--------------------------------------------------------------------------------------------------------------------------------
    /*
    geoCodeBauvorhabenAusgewaehlteBaueinheit: function() {
      /*
      //--------------------------------------------------------------------------------------------------------------------
        Funktion für Interaktion mit Google Maps API, um z.B. geografische Koordinaten aus Adresse zu ermitteln
        Siehe https://www.npmjs.com/package/@pderas/vue2-geocoder
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In geoCodeBauvorhabenAusgewaehlteBaueinheit(): ");

      Vue.use(Geocoder, {
        defaultCountryCode: null, // e.g. 'CA'
        defaultLanguage: null, // e.g. 'en'
        defaultMode: "address", // or 'lat-lng'
        googleMapsApiKey: "AIzaSyDc-aGRQJPB-rodG73Rl3pEcKRoJPPWpu4" // GOOGLE_MAPS_API_KEY - Google Maps API Key von michael.g.scheible@gmail.com
      });

      Vue.$geocoder.setDefaultMode("address"); // this is default
      // Vue.$geocoder.setDefaultCountryCode("DE"); // to limit results to one country

      var addressObj = {
        address_line_1:
          this.bauvorhabenAusgewaehlteBaueinheit[3].werteFeldInhalt + // Straße
          " " +
          this.bauvorhabenAusgewaehlteBaueinheit[4].werteFeldInhalt, // Hausnummer
        address_line_2: "",
        city: this.bauvorhabenAusgewaehlteBaueinheit[6].werteFeldInhalt // Ort
        // state: "CA", // province also valid
        // zip_code: "94043", // postal_code also valid
        // country: "United States"
      };

      Vue.$geocoder.send(addressObj, response => {
        console.log("response: ", response);
        var breite = response.results[0].geometry.location.lat;
        console.log("breite: ", breite);
        var laenge = response.results[0].geometry.location.lng;
        console.log("laenge: ", laenge);
        var plusCode = response.results[0].plus_code;
        console.log("plusCode: ", plusCode);
        this.bauvorhabenAusgewaehlteBaueinheit[15].werteFeldInhalt = breite; // geografische Breite
        this.bauvorhabenAusgewaehlteBaueinheit[16].werteFeldInhalt = laenge; // geografische Länge
        this.bauvorhabenAusgewaehlteBaueinheit[17].werteFeldInhalt =
          plusCode.compound_code; // Plus Code
        // ACHTUNG/TODO: XXXXXX - Plus Code mit compound_code kommt nicht immer zurück, ganz plusCode kann manchmal undefined sein!!!
        // https://sourcegraph.com/github.com/googlemaps/google-maps-services-go/-/blob/geocoding.go#L131:
        // Danach kommt plusCode mit global_code und (manchmal) compound_code zurück!
        // Bei Geocoding von Straße "Brückenstraße" und Ort "Winnenden" kommen beide Felder zurück:
        // plusCode: {compound_code: "V9GQ+GX Winnenden, Deutschland", global_code: "8FWFV9GQ+GX"}
      });
    },
    */

    //-------------------------------------------------------------------------------------------------------------------------------------------------
    // Funktion, um geografische Höhe zu bestimmen (per OpenRouteService.org)
    //-------------------------------------------------------------------------------------------------------------------------------------------------
    /*
    getElevationBauvorhabenAusgewaehlteBaueinheit: function() {
      const openRouteServiceAPIKey =
        "5b3ce3597851110001cf62485cdd93681af746a49659f597f4940dd6"; // API Key für OpenRouteService.org
      var url =
        "https://api.openrouteservice.org/elevation/point?" +
        "api_key=" +
        openRouteServiceAPIKey +
        "&geometry=" +
        this.bauvorhabenAusgewaehlteBaueinheit[16].werteFeldInhalt + // geografische Länge
        "," +
        this.bauvorhabenAusgewaehlteBaueinheit[15].werteFeldInhalt; // geografische Breite
      console.log("In getElevationBauvorhabenAusgewaehlteBaueinheit()");
      this.$axios.get(url).then(response => {
        console.log("response: ", response);
        console.log("response.data: ", response.data);
        console.log(
          "response.data.geometry.coordinates[2]",
          response.data.geometry.coordinates[2]
        );
        this.bauvorhabenAusgewaehlteBaueinheit[18].werteFeldInhalt = // geografische Höhe
          response.data.geometry.coordinates[2];
      });
    },
    */

    /*
    createValueSelectOptionsBauwerksZuordnungen(val, done) {
      //------------------------------------------------------------------------------------------------------------------
        Funktion für QSelect zur Auswahl der Bauwerkszuordnung
        Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      //------------------------------------------------------------------------------------------------------------------
      // Calling done(var) when new-value-mode is not set or "add", or done(var, "add") adds "var" content to the model
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "add-unique", or done(var, "add-unique") adds "var" content to the model
      // only if is not already set
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "toggle", or done(var, "toggle") toggles the model with "var" content
      // (adds to model if not already in the model, removes from model if already has it)
      // and it resets the input textbox to empty string
      // ----
      // If "var" content is undefined/null, then it doesn't tampers with the model
      // and only resets the input textbox to empty string

      console.log("In createValue - val: ", val);
      if (val.length > 1) {
        if (!this.selectOptionsBauwerksZuordnungen.includes(val)) {
          done(val, "toggle");
        }
      }
    },
    */

    selectFilterFunctionBauwerksZuordnungen(val, update) {
      /*------------------------------------------------------------------------------------------------------------------//
      Filter-Funktion für QSelect zur Auswahl von Bauwerkzuordnungen
      Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      Der Filter-String kann eingegeben werden zur Filterung auf der Bauwerkszuordnung (hier alles flache Arrays aus Strings)
      ohne dass die durch den Filter erfassten Objekte automatisch zum Menü selbst (d.h. zum selectOptionsBauinformationen)
      hinzugefügt werden
    //------------------------------------------------------------------------------------------------------------------*/
      update(() => {
        console.log(
          "In selectFilterFunctionBauwerksZuordnungen() für update - val: ",
          val
        ); // val ist der eingegebene Filter-String!
        if (val === "") {
          this.selectFilterOptionsBauwerksZuordnungen = this.selectOptionsBauwerksZuordnungen;
        } else {
          const needle = val.toLowerCase();
          //===============================================================================================================================
          // ACHTUNG: Der folgende Array-Filter mit needle funktioniert NICHT, wenn eines der beteiligten Felder undefined oder null ist!!!
          // Er wirft dann im Browser Log Fehler "Cannot read property 'toLowerCase' of undefined"
          // Daher sollten Filter nur auf Feldern definiert werden, die im Model required sind bzw. default: null haben!!!
          // Allerdings fixed der Fix für #268 unten die null- und undefined-Eventualitäten!!!
          //===============================================================================================================================
          this.selectFilterOptionsBauwerksZuordnungen = this.selectOptionsBauwerksZuordnungen.filter(
            // Array-Filter mit Arrow-Funktion:
            // Siehe https://medium.com/poka-techblog/simplify-your-javascript-use-map-reduce-and-filter-bd02c593cc2d
            // NEU: Abfrage gegen null und undefined (falls z.B. keine Options definiert sind):
            // v => v.toLowerCase().indexOf(needle) > -1 // ALT
            //=============================================================================================================================
            // ACHTUNG: Hier muss bei Verwendung von Objekten als Options unbedingt das Unterfeld v.subField angegeben werden!!!
            v => v != null && v.toLowerCase().indexOf(needle) > -1 // NEU
          );
          console.log(
            "selectFilterOptionsBauwerkzuordnungen: ",
            this.selectFilterOptionsBauwerksZuordnungen
          );
        }
      });
    },

    //======================================================================================================================================
    // Es folgen Funktionen für Tab "Bodenaufbau":
    moveSchichtNachUnten: function() {
      /*------------------------------------------------------------------------------------------------------------------//
      Funktion, um selektiertes Element im Array schichtAufbau um 1 nach unten zu verschieben
      https://stackoverflow.com/questions/49675988/how-to-get-the-v-for-index-in-vue-js
    //------------------------------------------------------------------------------------------------------------------*/
      this.schichtAufbau = this.moveItemInArrayFromIndexToIndex(
        this.schichtAufbau,
        this.indexOfSelectedArrayElement,
        this.indexOfSelectedArrayElement + 1
      );
      if (this.indexOfSelectedArrayElement === this.schichtAufbau.length - 1) {
        this.indexOfSelectedArrayElement = 0;
      } else {
        this.indexOfSelectedArrayElement += 1;
      }
    },

    moveSchichtNachOben: function() {
      /*------------------------------------------------------------------------------------------------------------------//
      Funktion, um selektiertes Element im Array schichtAufbau um 1 nach oben zu verschieben
      https://stackoverflow.com/questions/49675988/how-to-get-the-v-for-index-in-vue-js
    //------------------------------------------------------------------------------------------------------------------*/
      this.schichtAufbau = this.moveItemInArrayFromIndexToIndex(
        this.schichtAufbau,
        this.indexOfSelectedArrayElement,
        this.indexOfSelectedArrayElement - 1
      );
      if (this.indexOfSelectedArrayElement === 0) {
        this.indexOfSelectedArrayElement = this.schichtAufbau.length - 1;
      } else {
        this.indexOfSelectedArrayElement -= 1;
      }
    },
    /*------------------------------------------------------------------------------------------------------------------//
      Funktion, um Element in Array zu moven, immutable
      https://stackoverflow.com/questions/5306680/move-an-array-element-from-one-array-position-to-another
    //------------------------------------------------------------------------------------------------------------------*/
    moveItemInArrayFromIndexToIndex: function(array, fromIndex, toIndex) {
      if (fromIndex === toIndex) return array;

      // NEU: Circular Move - ACHTUNG: Diese Assignments müssen vor den const Deklarationen stehen!!!
      if (toIndex === -1) {
        toIndex = array.length - 1;
      }
      if (toIndex === array.length) {
        toIndex = 0;
      }

      const newArray = [...array];
      const target = newArray[fromIndex];
      const inc = toIndex < fromIndex ? -1 : 1;

      for (let i = fromIndex; i !== toIndex; i += inc) {
        newArray[i] = newArray[i + inc];
      }
      newArray[toIndex] = target;
      return newArray;
    },

    //======================================================================================================================================
    // Funktionen für zugeordnete Baustoffe in Baueinheiten (Tab "Zugeordnete Baustoffe")

    expandTickedNodesTreeBaustoffe() {
      //------------------------------------------------------------------------------------------------------------------------------
      // Expandiert die ticked Nodes im Baustoffbaum
      // HINWEIS: Bereits vorher expandierte Nodes bleiben davon unberührt expandiert!
      //------------------------------------------------------------------------------------------------------------------------------
      console.log("In expandTickedNodesTreeBaustoffe()");
      // Hier zunächst testweise hier versucht, die ticked Nodes zu expandieren, mittels:
      // for (var key of this.tickedKeysTreeBaustoffe) {
      //   this.$refs.treeBaustoffe.setExpanded(key, true);
      // };
      // ACHTUNG: Hier unbedingt for ... of zum Iterieren durch die Values, NICHT for ... in zum Iterieren durch die Props verwenden!!!
      // Siehe https://www.w3schools.com/jsref/jsref_forin.asp

      // Aber ACHTUNG: Diese Expansion der ticked Nodes funktioniert so NICHT ohne weiteres - es werden damit alle Nodes expandiert, nicht nur die getickten!

      // Zusätzlich daher folgendes versucht:
      // this.expandedKeysTreeBaustoffe = this.tickedKeysTreeBaustoffe; // ACHTUNG: Weist nur Pointer auf Array zu!
      // Dies funktioniert schon eher, aber es werden damit bei einem ersten Test gar keine Nodes expandiert
      // Vermutliche Ursache: Offensichtlich reicht es hier nicht aus, nur die getickten Knoten auf expandiert zu setzen,
      // sondern es müssen vermutlich deren Elternknoten im Pfad expandiert werden!
      // Diese sind verfügbar im Feld path, durch #-Trennzeichen separiert

      // Ab ca. Zeile 7100 existiert bereits Code (this.nodesTreeBaustoffe.forEach(function iter(a) {...), welcher rekursiv den Baustoffbaum durchwandert.
      // Dieser kann als Vorlage dienen, um die ticked Nodes im Array nodesTreeBaustoffe zu identifizieren, jeweils deren
      // path zu extrahieren, und die Elternknoten im Pfad in einen temporären Array zu pushen, der am Ende
      // alle zu expandierenden Knoten enthält (eventuell mit Duplikaten?!?).
      // Mit den dort enthaltenen keys=ids kann dann
      // - entweder die API-Funktion setExpanded(key, true) aufgerufen werden
      // - oder eine reaktive Zuweisung an expandedKeysTreeBaustoffe durchgeführt werden,
      // um schließlich genau die Eltern der ticked Nodes zu expandieren
      // HINWEIS: Die ticked Nodes müssen dabei gar nicht selbst expandiert werden, sondern nur deren Eltern im Pfad!!!
      //-------------------------------------------------------------------------------------------------------------------------------
      // Neue Variante:
      // Prüfe zunächst die Existenz von treeBautoffe:
      if (this.$refs.treeBaustoffe !== undefined) {
        // Gegen Fehler: Error in nextTick: "TypeError: Cannot read property 'getNodeByKey' of undefined"
        // bei Versuch mit $refs. unten auf noch nicht im DOM vorhandenen treeBaustoffe zuzugreifen
        // Passiert z.B., wenn das Tab "Zugeordnete Baustoffe" noch nie ausgewählt war
        // console.log("tickedKeysTreeRohstoffe: ", this.tickedKeysTreeRohstoffe);
        for (var key of this.tickedKeysTreeBaustoffe) {
          // Expandiert die Elternknoten von getickten Knoten
          // ACHTUNG: Hier unbedingt for ... of zum Iterieren durch die Values, NICHT for ... in zum Iterieren durch die Props verwenden!!!
          // Siehe https://www.w3schools.com/jsref/jsref_forin.asp
          var aktuellerNodeBaustoffe = this.$refs.treeBaustoffe.getNodeByKey(
            key
          );
          // console.log("aktuellerNodeBaustoffe.path:", aktuellerNodeBaustoffe.path);
          let pathAktuellerNodeBaustoffe = aktuellerNodeBaustoffe.path.split(
            "#"
          ); // Zerlegt den Pfad in einen Array der einzelnen Knoten im Pfad
          //------------------------------------------------------------------------------------------------------------------------------------------------
          // NEU:
          // Den Wurzelknoten sicherheitshalber jeweils entfernen (dies ist per Browser Console Logs immer der Wurzelknoten des Baustoffbaums, der aber hier
          // unter "Zugeordnete Baustoffe" gar nicht angezeigt wird - desen id ist aber im Feld "path" immer als erstes Element enthalten, das zweite ist
          // dann die id des betreffenden Knotens selbst!
          pathAktuellerNodeBaustoffe.shift();
          //------------------------------------------------------------------------------------------------------------------------------------------------
          // console.log("pathAktuellerNodeBaustoffe: ", pathAktuellerNodeBaustoffe);
          /*
          if (pathAktuellerNodeBaustoffe.length >= 2) {
            let idParentAktuellerNodeBaustoffe = pathAktuellerNodeBaustoffe[pathAktuellerNodeBaustoffe.length - 2]
            this.expandedKeysTreeBaustoffe.push(idParentAktuellerNodeBaustoffe)
          }
          */
          // Nun den Pfad ausklappen durch reaktiven Update von expandedKeysTreeBaustoffe:
          for (var pfadKey of pathAktuellerNodeBaustoffe) {
            if (
              this.expandedKeysTreeBaustoffe.find(arg => arg === pfadKey) ===
              undefined // true, wenn der pfadKey bereits in expandedKeysTreeRohstoffe enthalten ist
            ) {
              this.expandedKeysTreeBaustoffe.push(pfadKey); // Sonst den Knoten pfadKey auf den Array pushen
            }
          }
        }
      } else {
        console.log(
          "$refs.treeBaustoffe ist undefined - daher erfolgt das Expandieren der ticked Nodes erst bei Anwahl des Tabs 'Zugeordnete Baustoffe'!"
        );
      }
    },

    showBenutzerNachrichtZweigZumBewegenMarkiert: function() {
      //------------------------------------------------------------------------------------------------------------------------------b
      // Ruft globalStore.ShowBenutzerNachricht - da diese nicht direkt aus dem Template aufgerufen werden kann,
      // bzw. per localStore.showBenutzerNachricht() schon, aber nicht
      // mit dem Argument BenutzerNachrichten.BAUEINHEIT_ZWEIG_ZUM_BEWEGEN_MARKIERT
      globalStore.showBenutzerNachricht(
        BenutzerNachrichten.BAUEINHEIT_ZWEIG_ZUM_BEWEGEN_MARKIERT
      );
    },

    showBenutzerNachrichtFunktionNichtVerfuegbar: function() {
      //------------------------------------------------------------------------------------------------------------------------------b
      // Ruft globalStore.ShowBenutzerNachricht - da diese nicht direkt aus dem Template aufgerufen werden kann
      // bzw. per localStore.showBenutzerNachricht() schon, aber nicht
      // mit dem Argument BenutzerNachrichten.FUNKTION_NICHT_VERFUEGBAR
      globalStore.showBenutzerNachricht(
        BenutzerNachrichten.FUNKTION_NICHT_VERFUEGBAR
      );
    },

    setAnteilVonBaustoffInBaueinheitAusInputFeld(newValue) {
      //------------------------------------------------------------------------------------------------------------------------------
      // TODO YYYYYY - Testcode gegen temporäre Fehler beim Editing in den QInputs im QPopupEdit für zugeordnete Baustoffe einer Baueinheit
      // Funktion, die beim @input-Event auf dem ersten Input-Feld aufgerufen wird, innerhalb des QPopuEdits für das Editing
      // der erweiterten Angaben zum Baustoff in der Baueinheit
      // Parameter: newValue - enthält als Event Payload den neu vom Benutzer in das Input-Feld eingetragenen Wert
      // Setzt manuell die Prop auf den neuen Wert, nachdem es ohne @input-Event nicht funktionierte!
      // Der Grund ist vermutlich, dass hier im QPopupEdit ein Objekt mit mehreren Feldern editiert wird, die q-inputs aber immer
      // nur auf einem Teil-Feld arbeiten, und Vue dann nicht automatisch ein Rerendering der übergeordneten Komponente (QPopupEdit)
      // durchführt. Deshalb wird dieser Update hier manuell durchgeführt.
      // Der neue Wert wird sicherheitshalber per $set zugewiesen, nicht direkt.
      //------------------------------------------------------------------------------------------------------------------------------
      console.log("In setAnteilVonBaustoffInBaueinheit()");
      console.log("Parameter newValue: ", newValue);

      // List props of q-popup-edit:
      // console.log("All props of q-popup-edit: ", this.$refs.popupEditTreeBaustoffe.$props);
      // Aus Console Log: value.anteilVonBaustoffInBaueinheit ist die zu setzende Prop!
      console.log(
        "Bisheriger Wert der Prop value.anteilVonBaustoffInBaueinheit: ",
        this.$refs.popupEditTreeBaustoffe.$props.value
          .anteilVonBaustoffInBaueinheit
      );
      this.$set(
        this.$refs.popupEditTreeBaustoffe.$props.value,
        "anteilVonBaustoffInBaueinheit",
        newValue
      );
      console.log(
        "Neuer Wert der Prop value.anteilVonBaustoffInBaueinheit: ",
        this.$refs.popupEditTreeBaustoffe.$props.value
          .anteilVonBaustoffInBaueinheit
      );
    },

    changeInputPopupEditTreeBaustoffe() {
      // Wird aktuell nicht verwendet
      console.log("In changeInputPopupEditTreeBaustoffe()");
    },

    // Fehlversuch als Teil der Arbeiten zu #107, disabled:
    /*
    handleBlurInPopupEdit(node, wert) {
      // NEU 25.02.21 #107
      console.log("$refs:", this.$refs)
      console.log("In handleBlurInPopupEdit: ", wert)
      console.log("Vor $set");
      this.$set(node, "anteilVonBaustoffInBaueinheit", wert);
      // this.$refs.inputInPopUp.$forceUpdate()
      // this.$refs.popupEditTreeBaustoffe.$forceUpdate()
      this.$forceUpdate()
      // Funktioniert nicht:
      // this.$refs.popupEditTreeBaustoffe.hide()
      // this.$refs.popupEditTreeBaustoffe.show()
      console.log("Nach $set - node.anteilVonBaustoffInBaueinheit: ", node.anteilVonBaustoffInBaueinheit);
      this.$nextTick(() => {
        console.log("In $nextTick()");
      })
    },
    */

    savePopupEditTreeBaustoffe(newValue, oldValue, node) {
      // HINWEIS: Mit neuem Code für #107 werden Parameter newValue, oldValue nicht benötigt - siehe unten. Trotzdem belassen
      //--------------------------------------------------------------------------------------------------------------------------------
      // TODO YYYYYY [FIXED] - Funktion enthält Testcode gegen temporäre Fehler beim Editing in den QInputs im QPopupEdit für zugeordnete Baustoffe einer Baueinheit
      // Funktion, die bei Save des Popup Edits der zugeordneten Baustoffe der im Bauvorhabenbaum ausgewählten Baueinheit aufgerufen wird
      // War ursprünglich NoOp
      // Enthält aktuell testweise diverse disablete Aktionen, um den Fehler der nicht funktionierenden Input-Felder im QPopupEdit zu fixen
      // UPDATE: Dies Funktion wird nach Lösung des Fehlers (siehe unten) defacto NoOp
      //================================================================================================================================
      // Aktueller Stand des Fehlers am 29.94.2020:
      // 1. Mit dem Code unten am Save ($nextTick mit Dummy setTicked) werden die geänderten Input-Felder nach Drücken des Save-Buttons
      //    im Tree am Display korrekt angezeigt. Das heißt aber noch nicht, dass sie auch in nodesTreeBaustoffe aktuell sind, siehe unten!
      //    HINWEIS: Die Save-Methode am @save wird nur aufgerufen, wenn am q-popup-edit v-model="prop.node" oder :value="prop.node" gesetzt ist.
      //    Mit v-model="prop.node.anteilvonBaustoffInBaueinheit" oder :value="prop.node.anteilvonBaustoffInBaueinheit" wird die Save-
      //    Methode NICHT aufgerufen! Dies ist auch der Fall, wenn keine @change-Methode enabled ist am ersten q-input.
      // 2. In der aktuellen Save Methode mit setTicked kann es vorkommen, dass wenn man den ersten von 2 ticked Nodes per Popup Edit
      //    bearbeitet hat und danach mit Save das PopuEdit verlässt, dass der falsche, zweite ticked Node geticked wird - das ist
      //    ein Problem mit den Props am q-popup-edit (siehe weitere Kommentare dazu weiter unten)
      // 3. Allerdings werden aus unbekanntem Grund schon VOR dem Save die
      //    vom Benutzer geänderte Input-Feld-Werte NICHT in den Input-Feldern selbst und in der Debug Mode Anzeige von prop.node im
      //    q-popup-edit oben aktualisiert - FEHLER - hier gibt es nach wie vor ein Problem mit dem v-model
      // 4. Außerdem, nach "Speichern":
      //    - der Array selectedNodeTreeBaueinheiten.zugeordneteBaustoffe wird nach dem Speichern korrekt aktualisiert
      //    - der Array nodesTreeBaustoffe wird dagegen NICHT mit den aktuellen Werten aktualisiert - das scheint ein weiterer FEHLER  zu sein
      //     Erst nach einem Browser Refresh sind die Werte korrekt!
      // Weitere getestete Variationen:
      // - v-model/:value => Keine Besserung - v-model ist normalerweise richtig, :value verhindert Änderungen (???)
      // - @change-Event am ersten q-input - wird aufgerufen, die dortige Zuweisung scheint aber nicht zu funktionieren
      // - v-if für ticked Nodes only im Baustoffbaum: Temporär disabled => Keine Besserung
      // - v-model/:value für q-popup-edit und q-input identisch auf prop.node.anteilVonBaustoffInBaueinheit => Keine Besserung, @save
      //   wird nicht mehr aufgerufen
      // - Das zweite und dritte q-input temporär disabled => Keine Besserung
      // NEU: @save-Methode mit obigen Parametern, nach Vorlage auf https://codepen.io/metalsadman/pen/RmKeWL - diese getestet, wird aber mit
      // der folgenden Lösung aktuell nicht mehr gebraucht - machte vor #107 (Object.freeze für Performance eim Laden des Baustoffbaums)
      // nur noch ein Console Logging, mit #107 wieder Code dort (siehe Kommentare dort)
      //================================================================================================================================
      // URSACHE/LÖSUNG des QPopupEdit Editing Fehlers:
      // In loadTreeBaustoffe() war das Hinzufügen der erweiterten Felder nicht reaktiv - dies zerstörte die Reaktivität von treeBaustoffe
      // Dort den Code, der die erweiterten Felder in das Array hinzufügt, per $set reaktiv gemacht => Dann funktionieren die Editing
      // Funktionen im QPopupEdit ordnungsgemäß!!!
      //================================================================================================================================
      //--------------------------------------------------------------------------------------------------------------------------------
      console.log("In savePopupEditTreeBaustoffe()");
      /*
      console.log("Parameter newValue: ", newValue); // Ist Objekt vom Typ node!!! anteilVonBaustoffInBaueinheit hat darin den neuen, eingegebenen Wert
      console.log("Parameter oldValue: ", oldValue); // Ist Objekt vom Typ node!!! anteilVonBaustoffInBaueinheit hat darin den alten Wert
      */
      // Folgender 3. Parameter node ist bei v-model an den q-inputs dasselbe wie newValue
      // Bei :value an den q-inputs ist das der hier in der Methode upzudatende Node (übergeben als prop.node)
      // console.log("Parameter node: ", node); // Ist Objekt vom Typ node, erscheint bei v-model (nicht bei :value) im Log identisch mit newValue, wurde also bereits updated!!!
      // Folgende Statements waren für 4. Parameter fieldName, der z.B. testweise als "anteilVonBaustoffInBaueinheit" im Template übergeben werden konnte
      // Diesen wieder entfernt:
      /*
      console.log("Parameter fieldName: ", fieldName); // "anteilVonBaustoffInBaueinheit"
      console.log("node.fieldName vor Update: ", node[fieldName]); // alter Wert
      // node[fieldName] = newValue[fieldName]; // Ist eigentlich überflüssig, da Wert bereits auf newValue steht!
      console.log("node.fieldName nach Update: ", node[fieldName]); // neuer Wert
      */
      // Aus Performance-Gründen (langsame Eingabe in q-input-Felder insbesondere am großen Baustoffbaum in baueinheiten.vue)
      // temporär testweise jedoch :value statt v-model benutzt - dann sind hier in der save-Methode die neuen/geänderten Werte der 3
      // erweiterten Felder in den getickten Node (prop.node) innerhalb von treeBaustoffe zu übertragen
      // Folgender Code macht den Update in prop.node im Fall von Verwendung von :value an den q-inputs auf reaktive Art:
      // Funktionierte aber NICHT - auch nicht mit v-models an den q-inputs - da @save-Event nicht gefeuert wurde und die Methode gar nicht aufgerufen wurde!
      // Daher wieder disabled - stattdessen debounce=1000 (ms) an den q-input-Feldern, um Blockieren der Eingabe zu verhindern
      // Der Grund für diesen Fehler ist per https://forum.quasar-framework.org/topic/2916/popup-edit-save-cancel/11
      // vermutlich auch, dass beim Save am QPopupEdit die @save-Methode NUR aufgerufen wird, wenn sich die initialen Werte des v-models geändert haben

      //========================================================================================================================
      // NEU 25.02.2021 - #107
      // Nach Vorlagen von https://forum.quasar-framework.org/topic/2916/popup-edit-save-cancel/11 wird
      // beim Save am QPopupEdit die @save-Methode NUR aufgerufen, wenn sich die initialen Werte des v-models geändert haben
      // Daher kann das QPopupEdit nicht mehr, wie VOR #107, auf prop.node arbeiten (dieses kann mit Object.freeze() nicht mehr
      // reaktiv geändert werden), sondern auf einem eigenen, aus prop.node "kopierten", reaktiven Objekt!
      // Dieses wird (NEU) in @load intitialisiert mit den Werten aus prop.node
      // Beim Save findet nun hier die Rückwärts-Aktualisierung von prop.node statt, per $set.
      // HINWEIS: Beim Cancel ist nichts zu tun - dies wird von Quasar von selbst erledigt (ursprüngliche Werte der Variablen
      //          werden genommen)
      console.log("Vor $set für Aktualisierung von prop.node");
      this.$set(
        node,
        "anteilVonBaustoffInBaueinheit",
        this.tempValuesPopupEditTreeBaustoffe["anteilVonBaustoffInBaueinheit"]
      );
      this.$set(
        node,
        "symbolVonBaustoffInBaueinheit",
        this.tempValuesPopupEditTreeBaustoffe["symbolVonBaustoffInBaueinheit"]
      );
      this.$set(
        node,
        "einheitVonBaustoffInBaueinheit",
        this.tempValuesPopupEditTreeBaustoffe["einheitVonBaustoffInBaueinheit"]
      );
      console.log(
        "Nach $set - node.anteilVonBaustoffInBaueinheit: ",
        node.anteilVonBaustoffInBaueinheit
      );
      console.log(
        "Nach $set - node.symbolVonBaustoffInBaueinheit: ",
        node.symbolVonBaustoffInBaueinheit
      );
      console.log(
        "Nach $set - node.einheitVonBaustoffInBaueinheit: ",
        node.einheitVonBaustoffInBaueinheit
      );
      // ACHTUNG: Nur durch die folgenden QTree-API-Aufrufe wird nodesTreeBaustoffe (als Teil von #107 zur Performance-
      // Verbesserung beim Laden eigentlich eingefroren) reaktiv updated!!! (Fake-Unticken und Reticken dieses Nodes in nodesTreeBaustoffe!)
      this.$refs.treeBaustoffe.setTicked([node._id], false);
      this.$refs.treeBaustoffe.setTicked([node._id], true);
      // Die folgenden Parameter werden als Teil von #107 nicht mehr verwendet:
      // console.log("Parameter newValue: ", newValue); // Ist Objekt vom Typ node!!! anteilVonBaustoffInBaueinheit hat darin den neuen, eingegebenen Wert
      // console.log("Parameter oldValue: ", oldValue); // Ist Objekt vom Typ node!!! anteilVonBaustoffInBaueinheit hat darin den alten Wert
      //-------------------------------------------------------------------------------------------------------------------------
      // HINWEIS: Update von node ist normalerweise überflüssig bei direkter Verwendung von v-models auf prop.node an den q-input Feldern
      // $nextTick stellte sich als überflüssig heraus - disabled
      // this.$nextTick(() => {
      // console.log("In $nextTick()");
      // console.log("All props of q-popup-edit: ", this.$refs.popupEditTreeBaustoffe.$props);
      // Aus dem Console Log der $props: Unterfeld value in den Props hält das v-model, dieses ist als prop.node im Template deklariert
      // Auf dieses Unterfeld _id (für setTicked API-Funktion) wird unten per $props.value._id zugegriffen
      // console.log("this.$refs.popupEditTreeBaustoffe.$props.value._id: ", this.$refs.popupEditTreeBaustoffe.$props.value._id);
      // Hier kommt per Tests allerdings manchmal eine falsche _id zurück, siehe unten!!!
      // console.log("ACHTUNG FEHLER in dieser _id!?! Per $props.value kommt manchmal falsche _id zurück! Siehe Kommentare in savePopupEditTreeBaustoffe()");
      //--------------------------------------------------------------------------------------------------------------------------
      // ALT: Macht nun eine Dummy-Operation auf dem Tree, um Rerendering zu forcieren, der zu tickende Node ist bereits geticked
      // console.log("Löse Dummy Ticking des im Popup Edit bearbeiteten getickten Nodes aus");
      // Dummy Ticking mit falscher _id aus $props, disabled:
      // this.$refs.treeBaustoffe.setTicked(this.$refs.popupEditTreeBaustoffe.$props.value._id, true);
      // Dummy Ticking daher nicht mit $props, sondern so:
      // console.log("node._id des Nodes für das @save-Event: ", node._id); // Müsste die korrekte _id sein
      // this.$refs.treeBaustoffe.setTicked(node._id, true);
      //---------------------------------------------------------------------------------------------------------------------------
      // NEU: Dummy Ticking zugunsten von forceUpdate des Trees disabled
      // forceUpdate ebenfalls disabled, nicht mehr notwendig nach Reactivity Fix in loadTreeBaustoffe()
      // console.log("Vor $forceUpdate() für Baustoffbaum");
      // this.$refs.treeBaustoffe.$forceUpdate();
      // console.log("nodesTreeBaustoffe:");
      // console.log(this.stringifyNodesTreeBaustoffe);
      //----------------------------------------------------------------------------------------------------------------------------
      // Weitere Alternative zum Dummy Ticking: Den getickten Node testweise selektieren im Baustoffbaum:
      // console.log("Wähle den im Popup Edit bearbeiteten getickten Node im Baustoffbaum aus");
      // this.selectedKeyTreeBaustoffe = this.$refs.popupEditTreeBaustoffe.$props.value._id;
      // console.log("selectedKeyTreeBaustoffe: ", this.selectedKeyTreeBaustoffe);
      // ACHTUNG: Ohne eine solche "Dummy-Operation" auf dem Tree werden die upgedateten Input-Felder nach Drücken des Save-Buttons NICHT im betreffenden Node
      // reflektiert! Allerdings passierte nach diesem Save früher aus unbekanntem Grund kein Update von nodesTreeBaustoffe selbst, sondern nur des Felds
      // prop.node.anteilVonBaustoffInBaueinheit, das im Tree Body-Slot per {{ prop.node.anteilVonBaustoffInBaueinheit }} angezeigt wird!!!
      //-----------------------------------------------------------------------------------------------------------------------------
      // TODO YYYYYY - FEHLER mit den Props - umgangen durch obiges $forceUpdate(), das ohne _id auskommt
      // Wenn man per Popup Edit am Knoten "Mauerwerk, einschließlich Mörtelfugen" den ersten der
      // beiden ticked Nodes bearbeitet und das Popup Edit mit Save verläasst, wird aus dem Log ist ersichtlich,
      // dass hier in der Save-Methode die id in $props.value._id NICHT die des im Popup Edit
      // bearbeiteten ersten Knotens im Array tickedKeysTreeBaustoffe ist, sondern die des zweiten Knotens in diesem Array!!!
      // In der Variante mit setTicked fiel dies nicht weiter auf, da ja beide Nodes ticked sind, in der Variante mit
      // selectedKeyTreeBaustoffe wohl - es wurde dann der zweite der ticked Nodes im Baum selektiert, nicht der erste!
      // Wenn schon diese _id falsch ist, ist nicht verwunderlich, dass auch auf die 3 Input-Felder in den Props nicht richtig
      // verarbeitet werden!!!
      // Derselbe Test auf dem zweiten Knoten verläuft allerdings ohne diesen Fehler!
      // Außerdem zeigt das Debug-Mode-Objekt prop.node über dem q-popup-edit den korrekten Node an (mit der id des ersten), der
      // vom q-input aber nicht korrekt updated wird bei Eingabe in das Input-Feld
      // Es gibt also ein generelles Problem mit den Props von q-popup-edit und der q-inputs
      // HINWEIS: Klickt man im Baustoffbaum nach dem Save manuell auf einen anderen Knoten statt obiger Tree-Dummy-Operation,
      // werden die Werte ebenfalls aktualisiert!!!
      // });
    },

    updateZugeordneteBaustoffeAusgewaehlteBaueinheit() {
      //------------------------------------------------------------------------------------------------------------------------------
      // Macht einen Update der zugeordneten Baustoffe der im Bauvorhabenbaum ausgewählten Baueinheit
      // (Aufruf per Button "Speichern" im Tab "Zugeordnete Baustoffe")
      //------------------------------------------------------------------------------------------------------------------------------
      console.log("In updateZugeordneteBaustoffeAusgewaehlteBaueinheit()");
      if (this.selectedKeyTreeBaueinheiten != null) {
        console.log(
          "selectedKeyTreeBaueinheiten: ",
          this.selectedKeyTreeBaueinheiten
        );
        //------------------------------------------------------------------------------------------------------------------------------------------------------------
        // NEU: In loadTreeBaustoffe()) wurde zusätzlich Support für die
        // 3 erweiterten Felder im Model (anteilVonBaustoffInBaueinheit, symbolVonBaustoffInBaueinheit, einheitVonBaustoffInBaueinheit) eingebaut.

        // ACHTUNG: Diese 3 Felder sind aktuell in den Testdaten NICHT an allen Knoten auch definiert, denn zugeordneteBaustoffe wird in server.js in den
        // Testdaten nur für bestimmte Testbaueinheiten gesetzt, es ist sonst [], wie man im Debug Mode sieht,
        // schlimmstenfalls undefined! Dies also muss beim Rendern im Template unbedingt abgefangen werden!!!

        // Mittlerweile ist über QPopupEdits das Ändern dieser erweiterten 3 Felder in selectedNodeTreeBaueinheiten.zugeordneteBaustoffe möglich, die dann
        // zum Backend schicken mit put-Methode in updateZugeordneteBaustoffeAusgewaehlteBaueinheit
        // ------------------------------------------------------------------------------------------------------------------------------------------------------------

        // Nun this.selectedNodeTreeBaueinheiten.zugeordneteBaustoffe updaten mit den ids aus tickedKeysTreeBaustoffe:
        // Dabei ist zu beachten, dass selectedNodeTreeBaueinheiten ein Array aus Objekten ist, während tickedKeysTreeBaustoffe ein flacher Array aus ids ist
        // Hier nun das Einfügen der ids der getickten Baustoffe mit ihren Attributen in den Array of Objects zugeordneteBaustoffe in selectedNodeTreeBaueinheiten:
        this.selectedNodeTreeBaueinheiten.zugeordneteBaustoffe = []; // Alte Werte löschen

        // ALT: Vorläufiger Code, setzte nur referenzAufBaustoffInBaueinheit - disabled
        /*
        for (var i = 0; i < this.tickedKeysTreeBaustoffe.length; i++) {
          var element = {
            referenzAufBaustoffInBaueinheit: this.tickedKeysTreeBaustoffe[i],
            anteilVonBaustoffInBaueinheit: null, // TODO - vorläufig!!!
            symbolVonBaustoffInBaueinheit: null, // TODO - vorläufig!!!
            einheitVonBaustoffInBaueinheit: null // TODO - vorläufig!!!
          };
          this.selectedNodeTreeBaueinheiten.zugeordneteBaustoffe.push(element);
        };
        */

        // NEU: Setze auch die 3 erweiterten Felder in selectedNodeTreeBaueinheiten.zugeordneteBaustoffe:
        // Dazu Traversieren von nodesTreeBaustoffe und Heraussuchen der ticked Nodes mit ihren erweiteterten Feldern im Baum:
        // Dazu muss im Baustoffbaum der passende ticked Knoten per id gefunden werden (rekursiver Algorithmus wie in loadTreeBaustoffe() mit
        // forEach und includes) und die Werte daraus übertragen werden in den passenden zugeordneten Baustoff in selectedNodeTreeBaueinheiten

        if (this.tickedKeysTreeBaustoffe !== []) {
          // Nur dann den Baustoffbaum traversieren zum Augmentieren der ticked Nodes:
          console.log(
            "Vor rekursivem Traversieren des Baustoffbaums auf der Suche nach ticked Nodes"
          );
          let idsTickedKeysTreeBaustoffe = this.tickedKeysTreeBaustoffe; // ACHTUNG: Lokale Variable für tickedKeysTreeBaustoffe
          // ACHTUNG: Ohne diese, bei direkter Verwendung von this.tickedKeysTreeBaustoffe unten kommt in der rekursiven Funktion
          // die Fehlermeldung "typeError - cannot read property 'tickedKeysTreeBaustoffe' of undefined"
          // Grund: .this ist dort nicht bekannt
          let updatedZugeordneteBaustoffe = this.selectedNodeTreeBaueinheiten
            .zugeordneteBaustoffe; // ACHTUNG: Lokale Variable für selectedNodeTreeBaueinheiten.zugeordneteBaustoffe
          // ACHTUNG: Ohne diese, bei direkter Verwendung von this.selectedNodeTreeBautoffe unten kommt in der rekursiven Funktion
          // die Fehlermeldung "typeError - cannot read property 'selectedNodeTreeBaueinheiten' of undefined"
          // Grund: .this ist dort nicht bekannt
          this.nodesTreeBaustoffe.forEach(function iter(a) {
            if (idsTickedKeysTreeBaustoffe.includes(a._id)) {
              // D.h. die id des traversierten Knotens im Baustoffbaum ist dieselbe wie eine id in tickedKeysTreeBaustoffe
              console.log(
                "Passenden ticked Node gefunden, füge erweiterte Felder hinzu - _id: ",
                a._id
              );
              var tickedNodeMitErweitertenFeldern = {
                // Nur für bessere Lesbarkeit zum Zwischenspeichern
                // ACHTUNG: Das Feld a.referenzAufBaustoffInBaueinheit und die 3 erweiterten Felder müssen bei NEU getickten Nodes NICHT definiert sein, falls diese
                // nicht mit dem Popup Edit gesetzt wurden!!!
                // Nur a._id muss bei jedem Node vorhanden sein, dieses hernehmen für referenzAufBaustoffInBaueinheit!!!
                // FALSCH: referenzAufBaustoffInBaueinheit: a.referenzAufBaustoffInBaueinheit, // ALT: Führte in obigem Fall zu undefined-Elementen im Array!!!
                referenzAufBaustoffInBaueinheit: a._id, // NEU
                // Die übrigen Felder, falls undefiniert oder null, auf null setzen:
                // ACHTUNG: Als Teil der Untersuchung von #110 hier die früheren Abfragen von !== undefined
                // auf != null umgestellt, um bei Null-Werten sicherzustellen, dass auch null abgespeichert wird!
                anteilVonBaustoffInBaueinheit:
                  a.anteilVonBaustoffInBaueinheit != null
                    ? a.anteilVonBaustoffInBaueinheit
                    : null,
                symbolVonBaustoffInBaueinheit:
                  a.symbolVonBaustoffInBaueinheit != null
                    ? a.symbolVonBaustoffInBaueinheit
                    : null,
                einheitVonBaustoffInBaueinheit:
                  a.einheitVonBaustoffInBaueinheit != null
                    ? a.einheitVonBaustoffInBaueinheit
                    : null
              };
              console.log(
                "Füge dem Array nodesTreeBaustoffe Objekt hinzu - tickedNodeMitErweitertenFeldern: ",
                tickedNodeMitErweitertenFeldern
              );
              updatedZugeordneteBaustoffe.push(tickedNodeMitErweitertenFeldern);
            }
            Array.isArray(a.children) && a.children.forEach(iter);
          });
          // ACHTUNG: Der folgende Code war fehlerhaft!!!
          // Eventuell ist diese Zuweisung auch ganz unnötig, da updatedZugeordneteBaustoffe sowieso ein Pointer auf this.selectedNodeTreeBaustoffe.zugeordneteBaustoffe ist???
          // ALT/FALSCH: this.nodesTreeBaueinheiten.zugeordneteBaustoffe = updatedZugeordneteBaustoffe;
          // this.nodesTreeBaueinheiten.zugeordneteBaustoffe existiert so nicht, denn nodesTreeBaueinheiten ist ein (verschachtelter) Array
          // ALT/FALSCH:: this.selectedNodeTreeBaueinheiten.zugeordneteBaustoffe = updatedZugeordneteBaustoffe;
          // Array Assigment - unklar ob okay so, ersetzt durch $set
          // NEU/RICHTIG:
          // Sicherheitshalber Array Assigmment mit $set für Vue Reactivity:
          this.$set(
            this.selectedNodeTreeBaueinheiten,
            "zugeordneteBaustoffe",
            updatedZugeordneteBaustoffe
          );
          // HINWEIS: Obwohl selectedNodeTreeBaueinheiten computed ist, ist darüber offenbar doch ein reaktiver Update von nodesTreeBaueinheiten möglich, wie
          // der Code in renameBaueinheit() zeigt
        } else {
          console.log(
            "Keine ticked Nodes - kein Traversieren des Baustoffbaums nötig"
          );
          // this.selectedNodeTreeBaueinheiten.zugeordneteBaustoffe ist dann []
        }
        //----------------------------------------------------------------------------------------------------------------------------
        // ACHTUNG: Der folgende Teil muss AUCH ausgeführt werden, falls alle Nodes vom User unticked wurden!!!
        // Dann muss leerer Array zugeordneteBaustoffe abgespeichert werden!!!
        const apiRoute =
          process.env.API +
          "/Baueinheiten/" +
          this.selectedKeyTreeBaueinheiten +
          "/Baustoffe";
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBauvorlagen'");
        this.$socket.emit("leaveRoom", {
          room: "roomBauvorlagen"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBauvorlagen'");
        //=========================================================================================================================================
        this.$axios
          .put(apiRoute, {
            // Schickt einen Put-Request an das Backend für Update des Felds zugeordneteBaustoffe für Baueinheiten
            zugeordneteBaustoffe: this.selectedNodeTreeBaueinheiten
              .zugeordneteBaustoffe
          })
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log(
              "Erfolg aus $axios.put, response.status: ",
              response.status
            ); // Status loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_BAUSTOFFE_AENDERUNG_ERFOLG
            );
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.put, error: ", error); // Error loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_BAUSTOFFE_AENDERUNG_FEHLER
            );
          });
        // NEU: Baustoffbaum expandieren:
        // Auskommentiert 19.04.20 @ms nach Vorlage in baustoffe.vue, 17.04.2020 @sts
        // TODO YYYYYY - endgültige Lösung?
        /*
        this.$nextTick(() => {
          this.$refs.treeBaustoffe.expandAll();
        });
        */
      } // this.selectedKeyTreeBaueinheiten === null
    },

    resetZugeordneteBaustoffeAusgewaehlteBaueinheit() {
      //--------------------------------------------------------------------------------------------------------------------
      // Macht einen Reset der zugeordneten Baustoffe (Aufruf per Button "Zurücksetzen" im Tab "Zugeordnete Baustoffe"), indem
      // es die bisherigen Werte aus der Datenbank lädt
      // TODO: Update der 3 erweiterten Felder an den ticked Nodes - siehe loadTreeBaustoffe()
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetZugeordneteBaustoffeAusgewaehlteBaueinheit()");
      // NEU:
      this.loadTreeBaustoffe(true);
      // ALT:
      /*
      if (this.selectedKeyTreeBaueinheiten != null) {
        console.log(" _id: ", this.selectedKeyTreeBaueinheiten); // Das ist die id der ausgewählten Baueinheit, wird als req.params.id in Request URL eingefügt
        const apiRoute =
          process.env.API +
          "/Baueinheiten/" +
          this.selectedKeyTreeBaueinheiten +
          "/Baustoffe";
        this.$axios
          .get(apiRoute) // Schickt einen Get-Request an das Backend für Lesen des Felds zugeordneteBaustoffe für Baueinheit mit _id
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log("Erfolg aus $axios.get, response.status: ", response.status); // Status loggen
            console.log("response: ", response);

            this.selectedNodeTreeBaueinheiten.zugeordneteBaustoffe =
              response.data.zugeordneteBaustoffe;
            // Nun noch die aus der Datenbank gelesenen ids in den Array tickedKeysTreeBaustoffe übertragen, damit sie korrekt im Baustoffbaum als ticked
            // angezeigt werden:
            // Vorher die ids für diesen flachen Array aus dem nested Array of Objects zugeordneteBaustoffe extrahieren -
            // dort liegen sie im Feld referenzAufBaustoffInBaueinheit:
            this.tickedKeysTreeBaustoffe = this.selectedNodeTreeBaueinheiten.zugeordneteBaustoffe.map(a => a.referenzAufBaustoffInBaueinheit);
            console.log("tickedKeysTreeBaustoffe nach map: ", this.tickedKeysTreeBaustoffe);
            // HINWEIS: Hier keine Benutzernachricht nötig
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.get, error: ", error); // Status loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_LESEN_FEHLER
            );
          });
      }
      */
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Funktion CopyToClipbaordSonderzeichenAusgewaehlteBaueigenschaft für QSelect im Tab "Baueigenschaften > Details zur ausgewählten Baueigenschaft"
    // Siehe https://quasar.dev/quasar-utils/other-utils#Copy-to-Clipboard
    copyToClipboardSonderzeichenAusgewaehlteBaueigenschaft: async function(
      text
    ) {
      copyToClipboard(text)
        .then(() => {
          // success!
          console.log(
            "Success in copyToClipboardSonderzeichenAusgewaehlteBaueigenschaft"
          );
          this.copyToClipboardDoneSonderzeichenAusgewaehlteBaueigenschaft = true; // Für Anzeige Hint unter dem Button
        })
        .catch(() => {
          // fail
          console.log(
            "Error in copyToClipboardSonderzeichenAusgewaehlteBaueigenschaft"
          );
        });
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Funktion CopyToClipbaordSonderzeichenNeueBaueigenschaft für QSelect im Tab "Baueigenschaften > Details zur ausgewählten Baueigenschaft"
    // Siehe https://quasar.dev/quasar-utils/other-utils#Copy-to-Clipboard
    copyToClipboardSonderzeichenNeueBaueigenschaft: async function(text) {
      copyToClipboard(text)
        .then(() => {
          // success!
          console.log(
            "Success in copyToClipboardSonderzeichenNeueBaueigenschaft"
          );
          this.copyToClipboardDoneSonderzeichenNeueBaueigenschaft = true; // Für Anzeige Hint unter dem Button
        })
        .catch(() => {
          // fail
          console.log(
            "Error in copyToClipboardSonderzeichenNeueBaueigenschaft"
          );
        });
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // NEU: Funktion CopyToClipbaordSonderzeichenNeueBaueigenschaft für QSelect im Tab "Baueinheitsbeschreibung"
    // Siehe https://quasar.dev/quasar-utils/other-utils#Copy-to-Clipboard
    copyToClipboardSonderzeichenBaueinheit: async function(text) {
      copyToClipboard(text)
        .then(() => {
          // success!
          console.log("Success in copyToClipboardSonderzeichenBaueinheit");
          this.copyToClipboardDoneSonderzeichenBaueinheit = true; // Für Anzeige Hint unter dem Button
        })
        .catch(() => {
          // fail
          console.log("Error in copyToClipboardSonderzeichenBaueinheit");
        });
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Funktion CopyToClipbaord für QUploader UploaderBaueigenschaftsBeschreibung im Tab "Baueigenschaften > Beschreibung"
    // Siehe https://quasar.dev/quasar-utils/other-utils#Copy-to-Clipboard
    copyToClipboardBaueigenschaftsBeschreibung: async function(text) {
      copyToClipboard(text)
        .then(() => {
          // success!
          console.log("Success in copyToClipboardBaueigenschaftsBeschreibung");
          this.copyToClipboardDoneBaueigenschaftsBeschreibung = true; // Für Anzeige Hint unter dem Button
        })
        .catch(() => {
          // fail
          console.log("Error in copyToClipboardBaueigenschaftsBeschreibung");
        });
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Funktion CopyToClipbaord für QUploader UploaderBaueinheitsBeschreibung im Tab "Beschreibung"
    // Siehe https://quasar.dev/quasar-utils/other-utils#Copy-to-Clipboard
    copyToClipboardBaueinheitsBeschreibung: async function(text) {
      copyToClipboard(text)
        .then(() => {
          // success!
          console.log("Success in copyToClipboardBaueinheitsBeschreibung");
          this.copyToClipboardDoneBaueinheitsBeschreibung = true; // Für Anzeige Hint unter dem Button
        })
        .catch(() => {
          // fail
          console.log("Error in copyToClipboardBaueinheitsBeschreibung");
        });
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Funktion für QUploader UploaderBaueigenschaftsBeschreibung im Tab "Baueigenschaften > Beschreibung"
    // Zeigt File Name nach File Upload an in einem Feld "DateiNameAusUpload"
    // Hat als Parameter Objekt info = { [files], xhr } laut https://quasar.dev/vue-components/uploader
    // ACHTUNG: Erfordert offensichtlich nicht die Factory Function unten, daher diese disabled!
    displayLinkForUploadedFileUploaderBaueigenschaftsBeschreibung: function(
      info
    ) {
      // console.log(info.files[0]);
      console.log(
        "In displayLinkForUploadedFileUploaderBaueigenschaftsBeschreibung - info.files[0].name: ",
        info.files[0].name
      ); // File Name aus dem Upload

      // ALT: Ohne slugified File Name vom Backend:
      // const uriEncodedFileName = encodeURI(info.files[0].name);
      // Ersetzt u.a. Blanks durch %20 - mit denen kann QMarkdown in seinen internen Links nicht umgehen!
      // Siehe https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/encodeURI

      // NEU: Mit slugified File Name aus xhr Header vom Backend:
      console.log("info.xhr: ", info.xhr); // NEU
      // console.log("info.xhr.response.id: ", info.xhr.response.id); // Ist leider undefined, id muss daher geparsed werden aus dem Response Text:

      const idOfUploadedFile = JSON.parse(info.xhr.responseText).id;
      console.log("idOfUploadedFile: ", idOfUploadedFile);

      const slugNameOfUploadedFile = JSON.parse(info.xhr.responseText)
        .slugFileName;
      console.log("slugNameOUploadedFile: ", slugNameOfUploadedFile);

      this.internerLinkAusUploadBaueigenschaftsBeschreibung =
        // ALT: Bei lokalem Deployment mit Upload/Download nach/von statics/pdfs
        // "![Linkbezeichnung](/statics/pdfs/" +
        // NEU: Für Heroku und lokal mit Download aus tmp/download/img:
        "![Linkbezeichnung]" +
        "(" +
        process.env.fileAPI +
        "/img/" +
        // Beispiel lokal:  ![Linkbezeichnung](http://localhost:8080/img/parkplatz.gif "Linkanzeigetext")
        // Beispiel Heroku: ![Linkbezeichnung](https://bimclickfiles.herokuapp.com/img/parkplatz.gif "Linkanzeigetext")
        // ALT:
        // uriEncodedFileName +
        // NEU:
        slugNameOfUploadedFile +
        ' "Linkanzeigetext")';
      console.log(
        "In displayLinkForUploadedFileUploaderBaueigenschaftsBeschreibung()  - internerLinkAusUploadBaueigenschaftsBeschreibung: ",
        this.internerLinkAusUploadBaueigenschaftsBeschreibung
      );

      this.uploadDoneBaueigenschaftsBeschreibung = true; // Steuert Anzeige

      // Test Code, um zu prüfen, ob QUploader Reset per API funktioniert - positiv verifiziert
      /*
      console.log(
        "In displayLinkForUploadedFileUploaderBaueigenschaftsBeschreibung() - vor Reset von QUploader: "
      );
       this.$refs.uploaderBaueigenschaftsBeschreibung.reset(); // Issue reset of q-uploader through API
      */
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Funktion für QUploader UploaderBaueinheitsBeschreibung im Tab "Beschreibung"
    // Zeigt  File Name nach File Upload an in einem Feld "DateiNameAusUpload"
    // Hat als Parameter Objekt info = { [files], xhr } laut https://quasar.dev/vue-components/uploader
    // ACHTUNG: Erfordert offensichtlich nicht die Factory Function unten, daher diese disabled!
    displayLinkForUploadedFileUploaderBaueinheitsBeschreibung: function(info) {
      // console.log(info.files[0]);
      console.log(
        "In displayLinkForUploadedFileUploaderBaueinheitsBeschreibung() - info.files[0].name: ",
        info.files[0].name
      ); // File Name aus dem Upload

      // ALT: Ohne slugified File Name vom Backend:
      // const uriEncodedFileName = encodeURI(info.files[0].name);
      // Ersetzt u.a. Blanks durch %20 - mit denen kann QMarkdown in seinen internen Links nicht umgehen!
      // Siehe https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/encodeURI

      // NEU: Mit slugified File Name aus xhr Header vom Backend:
      console.log("info.xhr: ", info.xhr); // NEU
      // console.log("info.xhr.response.id: ", info.xhr.response.id); // Ist leider undefined, id muss daher geparsed werden aus dem Response Text:

      const idOfUploadedFile = JSON.parse(info.xhr.responseText).id;
      console.log("idOfUploadedFile: ", idOfUploadedFile);

      const slugNameOfUploadedFile = JSON.parse(info.xhr.responseText)
        .slugFileName;
      console.log("slugNameOUploadedFile: ", slugNameOfUploadedFile);

      this.internerLinkAusUploadBaueinheitsBeschreibung =
        // ALT: Bei lokalem Deployment mit Upload/Download nach/von statics/pdfs
        // "![Linkbezeichnung](/statics/pdfs/" +
        // NEU: Für Heroku und lokal mit Download aus tmp/download/img:
        "![Linkbezeichnung]" +
        "(" +
        process.env.fileAPI +
        "/img/" +
        // Beispiel lokal:  ![Linkbezeichnung](http://localhost:8080/img/parkplatz.gif "Linkanzeigetext")
        // Beispiel Heroku: ![Linkbezeichnung](https://bimclickfiles.herokuapp.com/img/parkplatz.gif "Linkanzeigetext")
        // ALT:
        // uriEncodedFileName +
        // NEU:
        slugNameOfUploadedFile +
        ' "Linkanzeigetext")';
      console.log(
        "In displayLinkForUploadedFileUploaderBaueinheitsBeschreibung()  - internerLinkAusUpload: ",
        this.internerLinkAusUploadBaueinheitsBeschreibung
      );

      this.uploadDoneBaueinheitsBeschreibung = true; // Steuert Anzeige

      // Test Code, um zu prüfen, ob QUploader Reset per API funktioniert - positiv verifiziert
      /*
      console.log(
        "In displayLinkForUploadedFileUploaderBaueinheitsBeschreibung() - vor Reset von QUploader: "
      );
       this.$refs.uploaderBaueinheitsBeschreibung.reset(); // Issue reset of q-uploader through API
      */
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Reset Funktion, um QUploader UploaderBaueinheitsBeschreibung zu resetten
    // Wird aktuell nicht aufgerufen
    resetUploaderBaueinheitsBeschreibung: function() {
      console.log("In resetUploaderBaueinheitsBeschreibung()");
      this.$refs.uploaderBaueinheitsBeschreibung.reset(); // Issue reset of q-uploader through API
    },

    //----------------------------------------------------------------------------------------------------------------------------
    // NEU: Neue Factory Function für q-uploader, um Authorization Header mit JWT Token mitgeben zu können und damit 401 Fehler
    // mit den bisherigen q-uploaders ohne Factory Function (bei Aktivierung von JWT Authorisierung am Frontend und Backend)
    // zu eliminieren!!!
    // Wird an ALLEN q-uploaders definiert per :factory="uploadFile" (NICHT: "uploadFile()")
    // Siehe https://quasar.dev/vue-components/uploader#ASP.NET-MVC%2FCore als Vorlage und BIM.click Backlog Item #96
    // Bringt per Test nach Upoload Status 200 (uff!!!)
    // TODO: XXXXXX Der Code läuft im Gegensatz zu den anderen API Calls OHNE Axios und fällt daher aus dem Rahmen -
    // z.B. funktionieren damit für die File Upoload Requests nicht die Axios Interceptors
    // Allerdings returned der Code nur eine Promise, die sich in ein Objekt für Quasar resolved (bestehend aus {url, method, headers})
    // und macht gar nicht selbst den HTTP-Post-Call (den man durch Axios mit JWT-Header ersetzen könnte), sondern dieser wird
    // offenbar in Quasar intern gemacht! Daher ist eine Umstellung auf Axios nicht so einfach möglich.
    //----------------------------------------------------------------------------------------------------------------------------
    uploadFile: function(file) {
      return new Promise((resolve, reject) => {
        console.log("In getUploadFile()");
        // Retrieve JWT token from your store.
        const myJWTToken = localStorage.getItem("jwtToken");
        console.log("Token geholt");
        // console.log("jwtToken: ", myJWTToken); // Disabled aus Security-Gründen
        // Set Authorization Header mit JWT Token aus localStorage für den nachfolgenden Axios Call für secure Route
        // TODO: XXXXXX - besser mit Axios?!? Aber wie genau den Axios Call in resolve() unten einpassen?
        console.log("Vor Post für File Upload");
        resolve({
          url: process.env.fileAPI + "/Dateien/upload",
          method: "POST",
          headers: [
            /* { name: "Content-Type", value: "application/json" }, */ // Damit kommt Error Status 500 - disabled!!!
            { name: "Authorization", value: "Bearer " + myJWTToken }
          ]
        });
      });
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // ALT: Frühere Factory Funktion für QUploader
    // Aktuell disabled, scheint nicht ausgeführt zu werden bzw. wird nicht gebraucht!
    // Achtung, Signatur hat sich geändert zwischen Quasar 0.x und 1.x
    // Siehe https://quasar.dev/vue-components/uploader
    // sowie https://stackoverflow.com/questions/53899220/quasar-quploader-failed-upload-with-upload-fcatory
    // Siehe https://forum.quasar-framework.org/topic/4600/how-to-deal-with-added-event-method-in-q-uploader/4
    /*
    factoryFunctionForQUploader: function(files) {
      return new Promise((resolve, reject) => {
        // resolve(file); // Aus obigem SO-Link, funktioniert, zusammen mit function(file, updateProgress)!
        // resolve(); // Funktioniert AUCH, zusammen mit function(file, updateProgress)! Siehe https://forum.quasar-framework.org/topic/3759/q-uploader-with-factory-function/5
        resolve(files); // Funktioniert AUCH, zusammen mit function(files, updateProgress)!
      });
    },
    */

    updateAngabenZurBaueinheitAusgewaehlteBaueinheit() {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Macht einen Update der Felder baueinheitsBemerkung, benutzerKennungenAutoren
      // für die ausgewählte Baueinheit (Aufruf per Button "Speichern" im Tab "Angaben zur Baueinheit"/früher "Strukturierungsangaben"
      // TODO XXXXXX: Auch Feld baueinheitsBezeichnung updaten
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In updateAngabenZurBaueinheitAusgewaehlteBaueinheit()");
      if (this.selectedKeyTreeBaueinheiten != null) {
        console.log(
          "selectedKeyTreeBaueinheiten: ",
          this.selectedKeyTreeBaueinheiten
        );
        const apiRoute =
          process.env.API + "/Baueinheiten/" + this.selectedKeyTreeBaueinheiten;
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        // Für Bauvorhaben disabled:
        /*
        console.log("Vor Emit to leave room 'roomBauvorlagen'");
        this.$socket.emit("leaveRoom", {
          room: "roomBauvorlagen"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBauvorlagen'");
        */
        //=========================================================================================================================================
        this.$axios
          .put(/* url, */ apiRoute, {
            // Schickt einen Put-Request an das Backend für Update obiger Felder für die Baueinheit
            // baueinheitsBezeichung: this.selectedNodeTreeBaueinheiten
            //  .baueinheitsBezeichnung,
            baueinheitsBemerkung: this.selectedNodeTreeBaueinheiten
              .baueinheitsBemerkung,
            benutzerKennungenAutoren: this
              .selectModelAutorenAusgewaehlteBaueinheit
          })
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log(
              "Erfolg aus $axios.put, response.status: ",
              response.status
            ); // Status loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_AENDERUNG_ERFOLG
            );
            // this.selectedNodeTreeBaueinheiten.benutzerKennungenAutoren = this.selectModelAutorenAusgewaehlteBaueinheit; // ACHTUNG: Wichtig, falls kein refreshTreeBaueinheiten()
            this.reloadTreeWrapper("Optimiert"); // Notwendig, da Felder, auch in den direkten und indirekten Kindknoten (Weitervererbugn/Propagieren benutzerKennungenAutoren),
            // geändert wurden durch obigen API-Request
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.put, error: ", error); // Error loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_AENDERUNG_FEHLER
            );
          });
      }
    },

    resetAngabenZurBaueinheitAusgewaehlteBaueinheit() {
      //--------------------------------------------------------------------------------------------------------------------
      // Macht einen Reset der Felder baueinheitsBemerkung, benutzerKennungenAutoren
      // für die ausgewählte Baueinheit (Aufruf per Button "Eingaben zurücksetzen" im Tab
      // TODO XXXXXX: Auch Feld baueinheitsbezeichnung resetten
      // "Angaben zur Baueinheit"/früher "Strukturierungsangaben", indem
      // es den bisherigen Wert aus der Datenbank lädt
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetAngabenZurBaueinheitAusgewaehlteBaueinheit()");
      if (this.selectedKeyTreeBaueinheiten != null) {
        console.log("baueinheitsBezeichnung und _id: ");
        console.log({
          baueinheitsBezeichnung: this.selectedNodeTreeBaueinheiten
            .baueinheitsBezeichnung, // Das ist die Bezeichnung der ausgewählten Baueinheit, dessen Beschreibung zurückgesetzt werden soll
          _id: this.selectedKeyTreeBaueinheiten // Das ist die id der ausgewählten Baueinheit, wird als req.params.id in Request URL eingefügt
        });
        const apiRoute =
          process.env.API + "/Baueinheiten/" + this.selectedKeyTreeBaueinheiten;
        this.$axios
          .get(/* url */ apiRoute) // Schickt einen Get-Request an das Backend für Lesen der Felder für Baueinheit mit _id
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log(
              "Erfolg aus $axios.get, response.status: ",
              response.status
            ); // Status loggen
            console.log("response: ", response);
            // Nun die obigen Felder der ausgewählten Baueinheit auf die aus der Datenbank gelesenen Werte resetten:
            this.selectedNodeTreeBaueinheiten.baueinheitsBemerkung =
              response.data.baueinheitsBemerkung;
            this.selectedNodeTreeBaueinheiten.benutzerKennungenAutoren =
              response.data.benutzerKennungenAutoren;
            this.selectModelAutorenAusgewaehlteBaueinheit = // ACHTUNG: Auch das Select Model für das QSelect muss hier zurückgesetzt werden!
              response.data.benutzerKennungenAutoren;
            // HINWEIS: Hier keine Benutzernachricht nötig
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.get, err: ", error); // Status loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_LESEN_FEHLER
            );
          });
      }
    },

    updateBaueigenschaftsBeschreibungAusgewaehlteBaueigenschaft() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Macht einen Update der Baueigenschaftsbeschreibung (Aufruf per Button "Speichern" im Tab "Baueigenschaften > Beschreibung")
      //----------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In updateBaueigenschaftsBeschreibungAusgewaehlteBaueigenschaft()"
      );
      if (this.ausgewaehlteBaueigenschaft != null) {
        // ALT - mit Flattening:
        /*
        console.log(
          "ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaftId: ",
          this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaftId
        );
        */
        // NEU - ohne Flattening:
        console.log(
          "ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft._id: ",
          this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft._id
        );
        /*
        console.log(
          "baueigenschaftsBeschreibung: ",
          this.ausgewaehlteBaueigenschaft.baueigenschaftsBeschreibung
        );
        */
        const apiRoute =
          process.env.API +
          "/Baueigenschaften/" +
          // ALT - mit Flattening:
          // this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaftId +
          // NEU - ohne Flattening:
          this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft._id +
          "/Beschreibung";
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBauvorlagen'");
        this.$socket.emit("leaveRoom", {
          room: "roomBauvorlagen"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBauvorlagen'");
        //=========================================================================================================================================
        this.$axios
          .put(/* url, */ apiRoute, {
            // Schickt einen Put-Request an das Backend für Update des Felds baueigenschaftsBeschreibung für die (typbezogene) Baueigenschaft
            baueigenschaftsBeschreibung: this.ausgewaehlteBaueigenschaft
              .typbezogeneBaueigenschaft.baueigenschaftsBeschreibung
          })
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log(
              "Erfolg aus $axios.put, response.status: ",
              response.status
            ); // Status loggen
            // NEU - Fix für #298 - den neuen Wert auch in selectedRowsTableBaueigenschaften reflektieren:
            this.selectedRowsTableBaueigenschaften[0].typbezogeneBaueigenschaft.baueigenschaftsBeschreibung = this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.baueigenschaftsBeschreibung;
            // Nun auch die Baueinheitsbeschreibung im global Store updaten, damit sie in der fachlichen Hilfe reaktiv angezeigt wird:
            globalStore.setBaueigenschaftsBeschreibungAusgewaehlteBaueigenschaftBaueinheit(
              this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft
                .baueigenschaftsBeschreibung
            );
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEIGENSCHAFT_BESCHREIBUNG_AENDERUNG_ERFOLG
            );
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.put, error: ", error); // Error loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEIGENSCHAFT_BESCHREIBUNG_AENDERUNG_FEHLER
            );
          });
      }
    },

    updateBaueinheitsBeschreibungAusgewaehlteBaueinheit() {
      //--------------------------------------------------------------------------------------------------------------------
      // Macht einen Update der Baueinheitsbeschreibung (Aufruf per Button "Speichern" im Tab "Beschreibung")
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In updateBaueinheitsBeschreibungAusgewaehlteBaueinheit()");
      if (this.selectedKeyTreeBaueinheiten != null) {
        console.log(
          "selectedKeyTreeBaueinheiten: ",
          this.selectedKeyTreeBaueinheiten
        );
        /*
        console.log(
          "baueinheitsBeschreibung: ",
          this.selectedNodeTreeBaueinheiten.baueinheitsBeschreibung
        );
        */
        const apiRoute =
          process.env.API +
          "/Baueinheiten/" +
          this.selectedKeyTreeBaueinheiten +
          "/Beschreibung";
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBauvorlagen'");
        this.$socket.emit("leaveRoom", {
          room: "roomBauvorlagen"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBauvorlagen'");
        //=========================================================================================================================================
        this.$axios
          .put(/* url, */ apiRoute, {
            // Schickt einen Put-Request an das Backend für Update des Felds baueinheitsBeschreibung für Baueinheit
            baueinheitsBeschreibung: this.selectedNodeTreeBaueinheiten
              .baueinheitsBeschreibung
            // _id: this.selectedKeyTreeBaueinheiten
          })
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log(
              "Erfolg aus $axios.put, response.status: ",
              response.status
            ); // Status loggen
            // Nun auch die Baueinheitsbeschreibung im global Store updaten, damit sie in der fachlichen Hilfe reaktiv angezeigt wird:
            globalStore.setBaueinheitsBeschreibungAusgewaehlteBaueinheit(
              this.selectedNodeTreeBaueinheiten.baueinheitsBeschreibung
            );
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_BESCHREIBUNG_AENDERUNG_ERFOLG
            );
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.put, error: ", error); // Error loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_BESCHREIBUNG_AENDERUNG_FEHLER
            );
          });
      }
    },

    resetBaueigenschaftsBeschreibungAusgewaehlteBaueigenschaft() {
      //------------------------------------------------------------------------------------------------------------------------------
      // Macht einen Reset der Baueinheitsbeschreibung (Aufruf per Button "Zurücksetzen" im Tab "Baueigenschaften > Beschreibung"), indem
      // es den bisherigen Wert aus der Datenbank lädt
      //------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In resetBaueigenschaftsfBeschreibungAusgewaehlteBaueigenschaft()"
      );
      if (this.selectedKeyTreeBaueinheiten != null) {
        console.log("baueigenschaftsBezeichnung und _id: ");
        console.log({
          baueigenschaftsBezeichnung: this.ausgewaehlteBaueigenschaft
            .typbezogeneBaueigenschaft.baueigenschaftsBezeichnung,
          // Das ist die Bezeichnung der ausgewählten Baueigenschaft, deren Beschreibung zurückgesetzt werden soll
          _id: this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft._id // NEU - ohne Flattening
          // _id: this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaftId // ALT - mit Flattening
          // Das ist die id der referenzierten (typbezogenen) Baueigenschaft, wird als req.params._id in Request URL eingefügt
        });

        const apiRoute =
          process.env.API +
          "/Baueigenschaften/" +
          this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft._id + // NEU - ohne Flattening
          // this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaftId + // ALT - mit Flatteining
          "/Beschreibung";
        this.$axios
          .get(/* url */ apiRoute) // Schickt einen Get-Request an das Backend für Lesen des Felds baueigenschaftsBeschreibung für Baueigenschaft mit _id
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log(
              "Erfolg aus $axios.get, response.status: ",
              response.status
            ); // Status loggen
            console.log("response: ", response);
            // Nun das Feld für die Baueigenschaftsbeschreibung der ausgewählten Baueigenschaft auf den aus der Datenbank gelesenen Wert resetten:
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.baueigenschaftsBeschreibung =
              response.data.baueigenschaftsBeschreibung;
            // HINWEIS: Hier keine Benutzernachricht nötig
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.get, err: ", error); // Status loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEIGENSCHAFT_LESEN_FEHLER
            );
          });
      }
    },

    resetBaueinheitsBeschreibungAusgewaehlteBaueinheit() {
      //--------------------------------------------------------------------------------------------------------------------
      // Macht einen Reset der Baueinheitsbeschreibung (Aufruf per Button "Zurücksetzen" im Tab "Beschreibung"), indem
      // es den bisherigen Wert aus der Datenbank lädt
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetBaueinheitsBeschreibungAusgewaehlteBaueinheit()");
      if (this.selectedKeyTreeBaueinheiten != null) {
        console.log("baueinheitsBezeichnung und _id: ");
        console.log({
          baueinheitsBezeichnung: this.selectedNodeTreeBaueinheiten
            .baueinheitsBezeichnung, // Das ist die Bezeichnung der ausgewählten Baueinheit, deren Beschreibung zurückgesetzt werden soll
          _id: this.selectedKeyTreeBaueinheiten // Das ist die id der ausgewählten Baueinheit, wird als req.params.id in Request URL eingefügt
        });
        const apiRoute =
          process.env.API +
          "/Baueinheiten/" +
          this.selectedKeyTreeBaueinheiten +
          "/Beschreibung";
        this.$axios
          .get(/* url */ apiRoute) // Schickt einen Get-Request an das Backend für Lesen des Felds baueinheitsBeschreibung für Baueinheit mit _id
          .then(response => {
            // Was im Erfolgsfall zu tun ist:
            console.log(
              "Erfolg aus $axios.get, response.status: ",
              response.status
            ); // Status loggen
            console.log("response: ", response);
            // Nun das Feld für die Baueinheitsbeschreibung der ausgewählten Baueinheit auf den aus der Datenbank gelesenen Wert resetten:
            this.selectedNodeTreeBaueinheiten.baueinheitsBeschreibung =
              response.data.baueinheitsBeschreibung;
            // HINWEIS: Hier keine Benutzernachricht nötig
          })
          .catch(error => {
            // Was im Fehlerfall zu tun ist:
            console.log("Error aus $axios.get, err: ", error); // Status loggen
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_LESEN_FEHLER
            );
          });
      }
    },

    getWerteVonBaueigenschaft(baueigenschaft) {
      //-----------------------------------------------------------------------------------------------------------------------
      // Liest die Werte einer Baueigenschaft (baueigenschaft) in Abhängigkeit vom gesetzten Wertetyp und returned diese
      //-----------------------------------------------------------------------------------------------------------------------
      let vererbteWerte = {};
      console.log("In getWertevVonBaueigenschaft()");
      console.log("baueigenschaft: ", baueigenschaft);
      switch (baueigenschaft.typbezogeneBaueigenschaft.werteTyp) {
        case "Kennwert":
          vererbteWerte.kennWert1 = baueigenschaft.kennWert1;
          // vererbteWerte.symbol = baueigenschaft.symbol;
          // vererbteWerte.einheit = baueigenschaft.einheit;
          // vererbteWerte.operator = baueigenschaft.operator;
          // vererbteWerte.formel = baueigenschaft.formel; // NEU
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          break;
        case "Kennwertepaar":
          vererbteWerte.kennWert1 = baueigenschaft.kennWert1;
          vererbteWerte.kennWert2 = baueigenschaft.kennWert2;
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          vererbteWerte.bezeichnungsWert2 = baueigenschaft.bezeichnungsWert2;
          break;
        case "Datumswert":
          vererbteWerte.datumsWert1 = baueigenschaft.datumsWert1;
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          break;
        case "Datumswertepaar":
          vererbteWerte.datumsWert1 = baueigenschaft.datumsWert1;
          vererbteWerte.datumsWert2 = baueigenschaft.datumsWert2;
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          vererbteWerte.bezeichnungsWert2 = baueigenschaft.bezeichnungsWert2;
          break;
        case "Tageszeitwert": // NEU
          vererbteWerte.tagesZeitWert1 = baueigenschaft.tagesZeitWert1;
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          break;
        case "Tageszeitwertepaar": // NEU
          vererbteWerte.tagesZeitWert1 = baueigenschaft.tagesZeitWert1;
          vererbteWerte.tagesZeitWert2 = baueigenschaft.tagesZeitWert2;
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          vererbteWerte.bezeichnungsWert2 = baueigenschaft.bezeichnungsWert2;
          break;
        case "Bezeichnungswert":
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          break;
        case "Bezeichnungswertepaar":
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          vererbteWerte.bezeichnungsWert2 = baueigenschaft.bezeichnungsWert2;
          break;
        case "Aufzählungswert":
          // console.log("Aufzählungswert");
          vererbteWerte.aufzaehlungsWert = baueigenschaft.aufzaehlungsWert;
          // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          break;
        case "Wahrheitswert":
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
          vererbteWerte.bezeichnungsWert1 = baueigenschaft.bezeichnungsWert1;
          break;
      }
      return vererbteWerte;
    },

    pruefeAktivierungFuerAusgewaehlteBaueigenschaft() {
      //--------------------------------------------------------------------------------------------------------------------
      // Prüft am Frontend ab, welche Werte eine Baueigenschaft einer Baueinheit im Baum beim Aktivieren erbt.
      // Dazu wird der Baum von der Wurzel bis zur aktuell gewählten Baueinheit auf dem Pfad (path) durchlaufen.
      //--------------------------------------------------------------------------------------------------------------------
      var enableLogging = false;
      function extendedLog(args) {
        if (enableLogging) {
          console.log(args);
        }
      }
      extendedLog("In pruefeAktivierungFuerAusgewaehlteBaueigenschaft()");
      let idsBaueinheitenToLookAt = this.selectedNodeTreeBaueinheiten.path.split(
        "#"
      );
      extendedLog(
        `Die folgenden Baueinheiten im Pfad werden der Reihe nach durchwandert: ${idsBaueinheitenToLookAt}`
      );
      let idBaueigenschaftToLookAt = this.ausgewaehlteBaueigenschaft
        .typbezogeneBaueigenschaft._id;
      let notFoundYet = true;
      let idsZuAktivierendeBaueinheiten = [];
      let idsZuDefinierendeBaueinheiten = [];
      let currentlyInspectedNodeTreeBaueinheiten = this
        .nodesTreeBaueinheiten[0];
      let currentlyInspectedBaueigenschaftInCurrentlySelectedBaueinheit;
      let unmittelbareElternBaueigenschaft = null;
      let definierteElterneigenschaft;
      for (var i = 0; i < idsBaueinheitenToLookAt.length - 1; i++) {
        // Betrachte nur Knoten über der ausgewählten Baueinheit
        // Finde die Eigenschaft in der aktuellen in der Schleife betrachteten Baueinheit
        currentlyInspectedBaueigenschaftInCurrentlySelectedBaueinheit = currentlyInspectedNodeTreeBaueinheiten.baueigenschaften.find(
          arg => {
            if (
              arg.typbezogeneBaueigenschaft._id === idBaueigenschaftToLookAt
            ) {
              return true;
            }
          }
        );
        // Falls wir am direkten Elternknoten sind, notieren wir diese Eigenschaft:
        if (i === idsBaueinheitenToLookAt.length - 2) {
          unmittelbareElternBaueigenschaft = currentlyInspectedBaueigenschaftInCurrentlySelectedBaueinheit;
          extendedLog(
            "Die Eigenschaft an der unmittelbaren Elternbaueinheit: ",
            unmittelbareElternBaueigenschaft
          );
        }
        if (
          currentlyInspectedBaueigenschaftInCurrentlySelectedBaueinheit.aktiviertNichtDeaktiviert
        ) {
          // Falls wir noch keine definierte Eigenschaft gefunden haben, speichern wir die erste definierte gefundene Eigenschaft, da alle darunterliegenden den Wert von dieser erben
          if (notFoundYet) {
            if (
              currentlyInspectedBaueigenschaftInCurrentlySelectedBaueinheit.definiertNichtUndefiniert
            ) {
              definierteElterneigenschaft = {
                baueigenschaft: currentlyInspectedBaueigenschaftInCurrentlySelectedBaueinheit,
                baueinheitsBezeichnung:
                  currentlyInspectedNodeTreeBaueinheiten.baueinheitsBezeichnung
              };
              notFoundYet = false;
            } else {
              // Hier ist nichts zu tun
              // idsZuDefinierendeBaueinheiten.push({
              //   baueigenschaft: currentlyInspectedBaueigenschaftInCurrentlySelectedBaueinheit,
              //   baueinheitsBezeichnung: currentlyInspectedNodeTreeBaueinheiten.baueinheitsBezeichnung
              // })
            }
          } else {
            extendedLog(
              "Definierter Wert bereits gefunden. Alle im Baum tiefer liegenden Knoten müssen diesen Wert automatisch ererbt haben, sofern sie aktiviert sind."
            );
          }
        } else {
          extendedLog(
            "Eigenschaft ist deaktiviert, deshalb wäre eine Aktivierung nötig, um Werte definieren zu können."
          );
          idsZuAktivierendeBaueinheiten.push({
            baueigenschaft:
              currentlyInspectedBaueigenschaftInCurrentlySelectedBaueinheit
                .typbezogeneBaueigenschaft.baueigenschaftsBezeichnung,
            baueinheitsBezeichnung:
              currentlyInspectedNodeTreeBaueinheiten.baueinheitsBezeichnung
          });
          if (!notFoundYet) {
            extendedLog(
              "Da bereits ein Elternknoten gefunden wurde, der definiert ist. Bei einer Aktivierung werden dessen Werte ererbt."
            );
            idsZuDefinierendeBaueinheiten.push({
              baueigenschaft:
                currentlyInspectedBaueigenschaftInCurrentlySelectedBaueinheit
                  .typbezogeneBaueigenschaft.baueigenschaftsBezeichnung,
              baueinheitsBezeichnung:
                currentlyInspectedNodeTreeBaueinheiten.baueinheitsBezeichnung
            });
          } else {
            extendedLog(
              "Es wurde noch kein definierter Elternknoten gefunden. "
            );
          }
        }
        // Gehe zum nächsten Verwandten in der Baumhierachie
        if (i + 1 <= idsBaueinheitenToLookAt.length - 1) {
          extendedLog(
            "currentlyInspectedBaueigenschaftInCurrentlySelectedBaueinheit:",
            currentlyInspectedBaueigenschaftInCurrentlySelectedBaueinheit
          );
          currentlyInspectedNodeTreeBaueinheiten = currentlyInspectedNodeTreeBaueinheiten.children.find(
            arg => {
              if (arg._id === idsBaueinheitenToLookAt[i + 1]) {
                return true;
              } else {
                return false;
              }
            }
          );
        }
      }
      // Bis hier wurde gesucht, ob eine definierte Elterneigenschaft vorhanden ist - dies wird nun abgefragt:
      if (definierteElterneigenschaft != null) {
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.relevanteKennwerte = this.getWerteVonBaueigenschaft(
          definierteElterneigenschaft.baueigenschaft
        );
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.ausgewaehlteBaueigenschaftKannEigeneWerteDefinieren = false;
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.ausgewaehlteBaueigenschaftIstDirektAktivierbar =
          unmittelbareElternBaueigenschaft.aktiviertNichtDeaktiviert;
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.unmittelbareElternBaueigenschaft = unmittelbareElternBaueigenschaft;
        extendedLog(
          "Es wurde eine definierte Elterneigenschaft gefunden",
          definierteElterneigenschaft,
          "Die Werteeingabe ist deshalb nicht möglich."
        );
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.idsZuAktivierendeBaueinheiten = idsZuAktivierendeBaueinheiten;
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.idsZuDefinierendeBaueinheiten = idsZuDefinierendeBaueinheiten;
        extendedLog(
          "Damit die Werte ererbt werden können, muss die Eigenschaft in folgenden Baueinheiten aktiviert werden:",
          idsZuAktivierendeBaueinheiten
        );
        extendedLog(
          "Die folgenden Baueinheiten erben dabei die Werte von der obersten definierten Elternbaueinheit",
          idsZuDefinierendeBaueinheiten
        );
      } else {
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.ausgewaehlteBaueigenschaftKannEigeneWerteDefinieren = true;
        if (unmittelbareElternBaueigenschaft != null) {
          this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.ausgewaehlteBaueigenschaftIstDirektAktivierbar =
            unmittelbareElternBaueigenschaft.aktiviertNichtDeaktiviert;
          this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.unmittelbareElternBaueigenschaft = unmittelbareElternBaueigenschaft;
        } else {
          this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.ausgewaehlteBaueigenschaftIstDirektAktivierbar = true;
          this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.unmittelbareElternBaueigenschaft = null;
        }
        extendedLog(
          "Es wurde keine definierte Elterneigenschaft gefunden. Die Werteeingabe ist deshalb möglich."
        );
        extendedLog(
          "Die Eigenschaft muss dazu in folgenden Baueinheiten aktiviert werden:",
          idsZuAktivierendeBaueinheiten
        );
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.idsZuAktivierendeBaueinheiten = idsZuAktivierendeBaueinheiten;
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.idsZuDefinierendeBaueinheiten = idsZuDefinierendeBaueinheiten;
      }
      // }
    },

    //--------------------------------------------------------------------------------------------------------------------
    // Methode notifyTopicContextHelp
    // TODO: Experimentell, für Test Kontexthilfe
    // Feuert einen Event an Global Event Bus, der in MyLayout.vue konsumiert wird und dort das Kontexthilfethema setzt
    // für eventuelle Anzeige durch rechten Drawer
    //--------------------------------------------------------------------------------------------------------------------
    notifyTopicContextHelp(topicContextHelp) {
      console.log("In notifyTopicContextHelp()");
      console.log("Emit Event ist disabled zugunsten global Store!");
      // this.$root.$emit("notifyTopicContextHelpEvent", topicContextHelp); // ACHTUNG: Unbedingt $root notwendig, da Cross-Component Event (Use Bus)
    },

    //--------------------------------------------------------------------------------------------------------------------
    // Methode showBedienungsHilfe(ref)
    // NEU: Für Öffnen Bedienungshilfethema im rechten Drawer
    // Feuert einen Event an Global Event Bus, der in my-layout.vue konsumiert wird und dort das q-expansion-item, das
    // per Parameter ref identifiziert wird, öffnet für eventuelle Anzeige durch rechten Drawer
    //--------------------------------------------------------------------------------------------------------------------
    showBedienungsHilfe(ref) {
      console.log("In showBedienungsHilfe()");
      console.log(
        "Emit Event showBedienungsHilfeEvent mit String-Parameter ref: ",
        ref
      );
      this.$root.$emit("showBedienungsHilfeEvent", ref); // ACHTUNG: Unbedingt $root notwendig, da Cross-Component Event (Use Bus)
    },

    //--------------------------------------------------------------------------------------------------------------------
    // Methode showFachlicheHilfe(ref, openRightDrawer)
    // NEU: Für Öffnen fachliches Hilfethema im rechten Drawer
    // Feuert einen Event an Global Event Bus, der in my-layout.vue konsumiert wird und dort das q-expansion-item, das
    // per Parameter ref identifiziert wird, öffnet für eventuelle Anzeige durch rechten Drawer
    // NEU: Optionaler zweiter Parameter openRightDrawer (Boolean): Wenn true, wird der rechte Drawer (Auszug) geöffnet
    //      Wenn nicht vorhanden, bleibt der Zustand des rechten Drawers wie er ist
    //--------------------------------------------------------------------------------------------------------------------
    showFachlicheHilfe(ref, openRightDrawer) {
      console.log("In showFachlicheHilfe()");
      console.log(
        "Emit Event showFachlicheHilfeEvent mit String-Parameter ref: ",
        ref
      );
      this.$root.$emit("showFachlicheHilfeEvent", ref, openRightDrawer); // ACHTUNG: Unbedingt $root notwendig, da Cross-Component Event (Use Bus)
    },

    //--------------------------------------------------------------------------------------------------------------------
    // NEU: Methoden für den QTree für die Auswahl von zugeordneten Baustoffen im Tab "Zugeordnete Baustoffe"
    //--------------------------------------------------------------------------------------------------------------------
    resetFilterTreeBaustoffe() {
      //--------------------------------------------------------------------------------------------------------------------
      // Filter-Methode für QTree, siehe https://quasar.dev/vue-components/tree#Example--Filtering-nodes
      //--------------------------------------------------------------------------------------------------------------------
      this.filterTreeBaustoffe = "";
      this.$refs.filterTreeBaustoffe.focus();
    },

    loadFilteredTreeBaustoffe(filteredNodesTreeBaustoffe) {
      //------------------------------------------------------------------------------------------------------------------------------------------
      // Neue Methode zum Laden eines gefilterten Baustoffbaums
      // Wird per Event refresh-request-tree-baustoffe aus der Unterkomponente für die Filterung aufgerufen
      console.log(
        "In loadFilteredTreeBaustoffe(filteredNodesTreeBaustoffe): ",
        filteredNodesTreeBaustoffe
      );
      this.selectedKeyTreeBaustoffe = null; // NEU: Ausgewählten Baustoff zurücksetzen, sonst falsche Anzeige der fachlichen Daten im ersten Tab rechts!
      this.expandedKeysTreeBaustoffe = [];
      this.nodesTreeBaustoffe = filteredNodesTreeBaustoffe; // Baum neu aufbauen mit von der Unterkomponente gefilterten Nodes, die
      // als Event Parameter filteredNodesTreeBaustoffe ($event als Argument im Template beim Aufruf der Komponente) übergeben wurden
      //=====================================================================================================================================
      // ACHTUNG: Obige Zuweisung an nodesTreeBaustoffe funktioniert sogar in Verbindung mit Object.freeze() in der originalen Methode
      // loadTreeBaustoffe(), da hier der gesamte Baum/Array ausgetauscht wird!!
      //=====================================================================================================================================
      this.tickedKeysTreeBaustoffe.splice(
        0,
        this.tickedKeysTreeBaustoffe.length
      ); // NEU: Sicherheitshalber Array mit reaktiver Methode leeren!!!
      // ids für den Array tickedKeysTreeBaustoffe für den Baustoffbaum aus zugeordneteBaustoffe extrahieren (Array of Objects):
      // ACHTUNG: Dies extrahiert nur die bereits gespeicherten ticked Keys, nicht etwaige vor dem Refresh ohne Speichern getickten!!!
      this.tickedKeysTreeBaustoffe = this.selectedNodeTreeBaueinheiten.zugeordneteBaustoffe.map(
        a => a.referenzAufBaustoffInBaueinheit
      );
      console.log(
        "tickedKeysTreeBaustoffe nach map: ",
        this.tickedKeysTreeBaustoffe
      );
      console.log(
        "Vor for-Schleife auf zugeordneten Baustoffen der ausgewählten Baueinheit"
      );
      console.log(
        "selectedNodeTreeBaueinheiten.zugeordneteBaustoffe: ",
        this.selectedNodeTreeBaueinheiten.zugeordneteBaustoffe
      );
      console.log("tickedKeysTreeBaustoffe: ", this.tickedKeysTreeBaustoffe);
      //-----------------------------------------------------------------------------------------------------------------------------------------------------
      // NEU: Erweiterte Felder and der Beziehung zwischen der Baueinheit und einem zugeordneten Baustoff setzen an ticked Nodes im Baustoffbaum:
      var relationshipElement = {}; // leeres Zwischenobjekt
      var tickedNodesMitErweitertenFeldern = []; // Array, der die ticked Nodes mit erweiterten Feldern enthält
      for (
        var i = 0;
        i < this.selectedNodeTreeBaueinheiten.zugeordneteBaustoffe.length;
        i++
      ) {
        // HINWEIS: zugeordneteBaustoffe ist === [] und damit ist .length === 0, wenn keine zugeordneten Baustoffe definiert sind für eine Baueinheit!
        // Dann wird die Schleife nicht betreten, tickedNodesMitErweitertenFeldern bleibt ein leerer Array, und es werden keine ticked Nodes updated
        // In diesem Fall müsste auch tickedKeysTreeBaustoffe === [] sein, da tickedKeysTreeBaustoffe mit den ids der zugeordneten Baustoffe initialisiert
        // wird
        relationshipElement = {
          // Zwischenobjekt, nur zur besseren Lesbarkeit
          referenzAufBaustoffInBaueinheit: this.selectedNodeTreeBaueinheiten
            .zugeordneteBaustoffe[i].referenzAufBaustoffInBaueinheit,
          anteilVonBaustoffInBaueinheit: this.selectedNodeTreeBaueinheiten
            .zugeordneteBaustoffe[i].anteilVonBaustoffInBaueinheit,
          symbolVonBaustoffInBaueinheit: this.selectedNodeTreeBaueinheiten
            .zugeordneteBaustoffe[i].symbolVonBaustoffInBaueinheit,
          einheitVonBaustoffInBaueinheit: this.selectedNodeTreeBaueinheiten
            .zugeordneteBaustoffe[i].einheitVonBaustoffInBaueinheit
        };
        tickedNodesMitErweitertenFeldern[i] = relationshipElement;
      }
      console.log(
        "tickedNodesMitErweitertenFeldern: ",
        tickedNodesMitErweitertenFeldern
      );

      // Nun die Objekte in diesem Array in das Objekt mit derselben id im nested Tree Array nodesTreeBaustoffe einfügen (push),
      // bzw. (besser, so unten implementiert) dort die Werte direkt flach einfügen bzw. setzen:
      // Benutzt rekursive Funktion zum Traversieren - Vorlage: https://stackoverflow.com/questions/43612046/how-to-update-value-of-nested-array-of-objects
      if (tickedNodesMitErweitertenFeldern !== []) {
        // Nur dann den Baustoffbaum traversieren zum Augmentieren der ticked Nodes:
        console.log(
          "Vor rekursivem Traversieren des Baustoffbaums auf der Suche nach ticked Nodes"
        );
        let idsTickedKeysTreeBaustoffe = this.tickedKeysTreeBaustoffe; // ACHTUNG: Lokale Variable für this.tickedKeysTreeBaustoffe -
        // ohne diese, bei direkter Verwendung von this.tickedKeysTreeBaustoffe unten kommt in der rekursiven Funktion,
        // die Fehlermeldung "typeError - cannot read property 'tickedKeysTreeBaustoffe' of undefined"
        // Notwendig, weil in function iter "this" sich auf die iter-Funktion bezieht, die Vue-Instanz kennt diese nicht unmittelbar

        let vueInstance = this; // ACHTUNG: In der Funktion iter statt "this" verwenden
        // Notwendig, weil in function iter "this" sich auf die iter-Funktion bezieht, die Vue-Instanz kennt diese nicht unmittelbar

        this.nodesTreeBaustoffe.forEach(function iter(a) {
          if (idsTickedKeysTreeBaustoffe.includes(a._id)) {
            // D.h. die id des traversierten Knotens im Baustoffbaum ist dieselbe wie eine id in tickedKeysTreeBaustoffe
            console.log(
              "Passenden ticked Node gefunden, füge erweiterte Felder hinzu - _id: ",
              a._id
            );
            // Filtere dazu obigen Array mit den passenden erweiterten Feldern nach Objekt mit dieser _id:
            var filteredTickedNodesMitErweitertenFeldern = tickedNodesMitErweitertenFeldern.filter(
              element => element.referenzAufBaustoffInBaueinheit === a._id
            );
            // ACHTUNG: Ergebnis von filter ist auch ein Array!!! Dieser muss aber wegen Filtern auf _id genau ein Element haben!
            console.log(
              "filteredTickedNodesMitErweitertenFeldern: ",
              filteredTickedNodesMitErweitertenFeldern
            );
            if (filteredTickedNodesMitErweitertenFeldern.length !== 1) {
              console.log(
                "ACHTUNG: Interner Fehler in loadTreeBaustoffe bei Filtern auf Array tickedNodesMitErweitertenFeldern"
              );
            }
            // NEU - reaktive Zuweisungen mit $set - Fix für QPopupEdit Probleme im Baustoffbaum/Rohstoffunterbaum in zugeordnete Baustoffe/Rohstoffe (TODO YYYYYY)
            // WICHTIG - sonst funktioniert die gesamte Reactivity des Arrays nodesTreeBaustoffe nicht mehr!!!
            // Reaktivity geht verloren, wenn dem an sich reaktiven Objekt nicht-reaktiv Felder hinzugefügt werden - das reaktive
            // Objekt kriegt das nicht mit!!!
            vueInstance.$set(
              a,
              "referenzAufBaustoffInBaueinheit",
              filteredTickedNodesMitErweitertenFeldern[0]
                .referenzAufBaustoffInBaueinheit
            );
            vueInstance.$set(
              a,
              "anteilVonBaustoffInBaueinheit",
              filteredTickedNodesMitErweitertenFeldern[0]
                .anteilVonBaustoffInBaueinheit
            );
            vueInstance.$set(
              a,
              "symbolVonBaustoffInBaueinheit",
              filteredTickedNodesMitErweitertenFeldern[0]
                .symbolVonBaustoffInBaueinheit
            );
            vueInstance.$set(
              a,
              "einheitVonBaustoffInBaueinheit",
              filteredTickedNodesMitErweitertenFeldern[0]
                .einheitVonBaustoffInBaueinheit
            );

            console.log("Node nach Hinzufügen der erweiterten Felder: ", a);
          }
          Array.isArray(a.children) && a.children.forEach(iter);
        });
      } else {
        console.log(
          "Keine ticked Nodes - kein Traversieren des Baustoffbaums nötig"
        );
      }
      //----------------------------------------------------------------------------------------------------------------------------
      // Nun in Abhängigkeit des Parameters show den Baustoffbaum expandieren:
      // ACHTUNG: In expandTickednodesTreeBaustoffe() ist zusätzlich eine Abfrage auf if ($refs.treeBaustoffe !== undefined) enthalten
      // Dies ist für den Fall, dass die Funktion mit show === true aufgerufen wird, aber das Tab "Zugeordnete Baustoffe" noch nicht
      // ausgewählt wurde, und damit $refs.treeBaustoffe undefined ist - in diesem Fall kann der Baum nicht expandiert werden,
      // da nicht vorhanden!!!
      this.$nextTick(() => {
        // NEU: Baustoffbaum initial expandieren
        // this.expandedKeysTreeBaustoffe.splice(0, this.expandedKeysTreeBaustoffe.length); // NEU: Sicherheitshalber vorher reaktiv den Array leeren!???
        // Disabled, führte zu unerwünschtem Kollabieren des Arrays vor dem Expandieren
        // Stattdessen:
        console.log(
          "expandedKeysTreeBaustoffe vor expandTickedNodesTreeBaustoffe(): ",
          this.expandedKeysTreeBaustoffe
        );
        //=======================================================================================================================
        const expandAll = true; // Expermienteller Switch - siehe Kommentare unten
        if (expandAll) {
          //=====================================================================================================================
          // HINWEIS - TODO XXXXXX: Hier nach dem Filtern experimentell auch den ganzen Baum expandieren mittels des
          // aus der Vorlage bisher disableten expandAll() - die Performance muss dabei beobachtet werden!
          console.log(
            "ACHTUNG: Baustoffbaum wurde geladen und wird nun mit expandAll() expandiert!"
          );
          this.$refs.treeBaustoffe.expandAll(); // Ganzen Baum expandieren (bisherige Lösung) // 14.04.20 Auskommentiert von sts
          //=====================================================================================================================
        } else {
          // Alternativ, wie schon beim orignalen initialen Laden des Baustoffbaums, nur die ticked Nodes expandieren
          this.expandTickedNodesTreeBaustoffe(); // 19.04.20 Einkommentiert von ms, nach Vorlage in baustoffe.vue
          console.log(
            "Baustoffbaum wurde geladen und ticked Nodes wurden ggf. expandiert"
          );
        }
        //=====================================================================================================================
        console.log(
          "expandedKeysTreeBaustoffe nach Expandieren: ",
          this.expandedKeysTreeBaustoffe
        );
        //=======================================================================================================================
        // HINWEIS: Offenbar fügt Quasar bei expandAll() immer wieder per push die neu expandierten Keys dem Array expandedKeysTreeBaustoffe hinzu,
        // was zu Duplikaten darin führt - scheint aber "works as designed" zu sein!!!
      });
      // ACHTUNG: Einfaches this.$refs.treeBaustoffe.expandAll(); // Ohne $nextTick() => {} funktioniert es NICHT!!!
      // Siehe https://forum.quasar-framework.org/topic/4147/solved-v1-qtree-does-not-expand-all-by-property-default-expand-all
      // $nextTick() forciert anscheinend einen DOM Update, den Vue sonst nicht machen würde
    },

    loadTreeBaustoffe(show) {
      // async loadTreeBaustoffe(show) { // Für Tests des Lesens gefilterter Baustoffe, siehe Kommentare unten
      //------------------------------------------------------------------------------------------------------------------------------------------
      // Methode - lädt den Baum für die Baustoffe aus der Datenbank (nur Extrakt von Feldern - wichtig, da hier sehr viele Knoten geholt werden!)
      // ACHTUNG: Es erfolgt ein mehrfacher Aufruf der Funktion (tricky!!!):
      // 1. aus watch für selectedKeyTreeBaueinheiten - nötig, wenn der ausgewählte Knoten im Baum sich ändert - bei Aufruf dort kann jedoch, wenn das
      //    Tab "Zugeordnete Baustoffe" noch nicht angewählt wurde, der Code nicht den Baustoffbaum dort mit den zugeordneten Baustoffen aktualisieren, da
      //    dieser dann noch gar nicht geladen ist! Umgekehrt muss dieser Aufruf aber den Baum in diesem Tab aktualisieren, falls es aktuell
      //    ausgewählt ist!
      // 2. aus Tab-Initialisierung bei Anwahl des Tabs "Zugeordnete Baustoffe" - das ist nötig trotz 1., da bei 1. das Tab noch nicht ausgewählt sein muss!!!
      //    HINWEIS: Dieser Fall wurde mitterlweile als Teil 2 in die Funktion showTreeBaustoffe() ausgelagert!
      // 3. bei "Zurücksetzen" im Tab "Zugeordnete Baustoffe"
      // Dies wurde noch optimiert, indem die Funktion aufgeteilt wird in 2 Teile (Teil 2 ist jetzt separate Funktion showTreeBaustoffe())
      // - Teil 1: nodesTreeBaustoffe vom Backend laden, tickedKeys ermitteln
      // - Teil 2: Am Ende von Teil 1 (muss im selben .then sein!), aber auch in separater Funktion showTreeBaustoffe()
      //           Den Baustoffbaum rendern und expandieren, dafür expandedKeys ermitteln -
      //           Allerdings sollte dieses Rendern nur einmal passieren, d.h. bei Tab-Wechsel nicht nochmals!
      // Die Aufrufe damit:
      //                         Teil 1            Teil 2
      // Watch                   ja                Nachdem Teil 1 (asynchron, .then!) zu Ende ist, und nur, wenn Tab "Zugeordnete Baustoffe" ausgewählt ist -
      //                                           dies wird aber abgefangen in der Funktion expandTickedNodesTreeBaustoffe()
      //                                           per Prüfung "if (this.$refs.TreeBaustoffe !== undefined)"
      // Tab-Anwahl              nein              ja - dieser Teil muss dann separat von Teil 1 aufrufbar sein!
      // Tab-Zurücksetzen        ja                Nachdem Teil 1 (asynchron, .then!) zu Ende ist
      // NEU: Button über Baum   ja                ja (Aufruf mit loadTreeBaustoffe(true))
      //
      // Teil 2 nun separat aufrufbar gemacht in Funktion showTreeBaustoffe()
      //-------------------------------------------------------------------------------------------------------------------------------------------
      // NEU (15.04.20): Nur die ticked Nodes expandieren, da der Baum sehr groß werden kann!
      //-------------------------------------------------------------------------------------------------------------------------------------------
      // Parameter: show: Boolean
      // show === true:  Rendered den (ggf. mit ticked Nodes expandierten) Baustoffbaum
      // show === false: Initialisiert nur den Baum (nodesTreeBaustoffe) und die tickedNodesTreeBaustoffe
      // Mit show === false kann Teil 2 abgeklemmt werden
      // Allerdings ist Teil 2 im .then-Zweig und kann hier somit nicht separat aufgerufen werden ohne Teil 1 - deshalb wurde er in die separate
      // Funktion showTreeBaustoffe() ausgelagert.
      // Dieser Parameter war temporär notwendig, weil, falls der Baustoffbaum gleich geladen wurde, ohne dass das entsprechende Tab
      // offen war, ein Fehler kam "Error in render: "TypeError: Cannot read property 'expandAll' of undefined"
      // Dieser Fall wird nun in expandTickedNodesTreeBaustoffe() abgefangen durch eine Abfrage "if (this.$refs.treeBaustoffe !== undefined)"
      // NEU: Aktuell wird die Funktion nur noch mit show === true aufgerufen! Den Parameter trotzdem einstweilen belassen.
      //-------------------------------------------------------------------------------------------------------------------------------------------
      console.log("In loadTreeBaustoffe(show) - Parameter show: ", show);
      this.expandedKeysTreeBaustoffe = []; // 19.04.20 @ms nach Vorlage von @sts in baustoffe.vue
      // TODO XXXXXX - im Log auf Heroku erfolgt aus unbekanntem Grund der folgende Axios Call (per Request Interceptor) erst mit ca. 4 Sekunden
      // Delay nach dem obigen console.log beim Start von loadTreeBaustoffe()!!!
      // Dies könnte daran liegen, dass der große, responsive Array nodesTreeBaustoffe dort komplett refreshed wird (falls das
      // Tab "Zugeordnete Baustoffe" angewählt ist)
      // NEU: Hier erst mal Spinner Gears zeigen, da die Funktion so lange dauern kann!!!
      // Temporär disabled, da eventuell ursächlich für obigen Delay, oder Konflikt mit dem Spinner im Request Interceptor!!!
      Loading.show({
        spinner: QSpinnerGears
        // delay: 200 // ms, Default ist 500 ms, bevor Loading den Spinner zeigt
        // other props
      });
      console.log("Nach Loading.show(), vor API-Call");
      if (this.tabBaueinheiten === "zugeordneteBaustoffeTabBaueinheiten") {
        // Dann dauert es besonders lang - dafür Nachricht anzeigen
        globalStore.showBenutzerNachricht(
          BenutzerNachrichten.BAUEINHEIT_ZUGEORDNETE_BAUSTOFFE_LADEN_WARNUNG
        );
      }
      const apiRoute = process.env.API + "/Baustoffe/Extrakt"; // Liest Baustoffbaum als Extrakt aus der Datenbank // Bisheriger API-Aufruf
      //============================================================================================================================================
      // NEU: Alternativer Testcode für Lesen gefilterter Baustoffe: Benutzt neue API-Methode (Vorlage: siehe verwaltung.vue, statt letzter Zeile
      // Nach erfolgreichem Test wieder disabled!!!
      // NEU: Ermittlung der Wurzel des Baustoffbaums für Tests des Lesens gefilterter Baustoffe:
      // ACHTUNG: Erfordert async loadTreeBaustoffe() oben
      /*
      let baustoffIdFuerFilterungBaustoffe = null;
      console.log("Lade Wurzel des Baustoffbaums für Testzwecke")
      let apiRoute = process.env.API + "/Baustoffe/Wurzel";
      await this.$axios // Unbedingt await notwendig, sonst Fehler, dass der Code darunter bereits ausgeführt wird, bevor die id der Wurzel ermittelt ist!
      // ACHTUNG: Erfordert async loadTreeBaustoffe() oben
          .get(apiRoute)
          .then(response => {
            // console.log("response.data: ");
            // console.log(response.data);
            baustoffIdFuerFilterungBaustoffe = response.data._id; // Setze Id des Wurzelknotens des Baustoffbaums für das Eingabefeld in Test Area 3
            // (kann ggf. vom Benutzer angepasst werden)
            console.log("id der Wurzel des Baustoffbaums: ", response.data._id);
          })
          .catch(error => {
            // NEU: Error Handling mit .catch
            console.log(
              "Error bei Lesen der Wurzel des Baustoffbaums - error: ",
              error
            );
          });
      let myFilterArray = [
        { baueigenschaftsBezeichnung: "Allgemein > Test > Wertetypen > Dynamische Steifigkeit", kennWert1: 35, operator: "$eq" },
        { baueigenschaftsBezeichnung: "Allgemein > Test > Wertetypen > Herstellerkurzbezeichnung", bezeichnungsWert1: "Knauf", operator: "$eq" } // ACHTUNG: String für bezeichnungsWert kann Blanks und Sonderzeichen enthalten!
      ]
      //----------------------------------------------------------------------------------------------------------------------------------------------
      // Lösung für Query String:
      // Vorlage: https://stackoverflow.com/questions/16903476/node-js-http-get-request-with-query-string-parameters - den Array erst mit stringify()
      //          in String umwandeln, dann noch als URI encoden, dann als Query Parameter mit "?" hinten an den Request anhängen
      let myFilterArrayStringified = JSON.stringify(myFilterArray);
      console.log("myFilterArrayStringified: ", myFilterArrayStringified) // JSON-Notation für Array, enthält Blanks
      // [
      //  {"baueigenschaftsBezeichnung":"Allgemein > Test > Wertetypen > Dynamische Steifigkeit","kennWert1":35,"operator":"$eq"},
      //  {"baueigenschaftsBezeichnung":"Allgemein > Test > Wertetypen > Herstellerkurzbezeichnung","bezeichnungsWert1":"Knauf","operator":"$eq"}
      // ]
      // Enthält etwaige Blanks und Sonderzeichen
      // 2. Schritt, um etwaige Blanks und Sonderzeichen zu encoden:
      let myFilterArrayStringifiedAndURIEncoded = encodeURIComponent(myFilterArrayStringified);
      // Siehe dazu https://www.w3schools.com/tags/ref_urlencode.ASP
      // sowie https://stackoverflow.com/questions/6807180/how-to-escape-a-json-string-to-have-it-in-a-url
      // Rekursiv bei nested Objects: https://stackoverflow.com/questions/1714786/query-string-encoding-of-a-javascript-object
      // https://stackoverflow.com/questions/4540753/should-i-use-encodeuri-or-encodeuricomponent-for-encoding-urls - encodeURI() gilt für ganze URLs,
      // encodeURIComponent() für Teile davon (wie z.B. Query String)
      // Dasselbe gilt für decodeURI() vs. decodeURIComponent(): https://stackoverflow.com/questions/747641/what-is-the-difference-between-decodeuricomponent-and-decodeuri
      console.log("myFilterArrayStringifiedAndURIEncoded: ", myFilterArrayStringifiedAndURIEncoded); // Mit encoded Blanks und Sonderzeichen
      // %5B%7B%22baueigenschaftsBezeichnung%22%3A%22Test%20%3E%20Dynamische%20Steifigkeit%22%2C%22kennWert1%22%3A35%2C%22operator%22%3A%22%24eq%22%7D%2C%7B%22baueigenschaftsBezeichnung%22%3A%22Test%20%3E%20Herstellerkurzbezeichnung%22%2C%22bezeichnungsWert1%22%3A%22Knauf%22%2C%22operator%22%3A%22%24eq%22%7D%5D
      //----------------------------------------------------------------------------------------------------------------------------------------------
      // NHINWEISE zum Decoding in JS-Objekt auf Server-Seite:
      // In einfachen Fällen genügt JSON.parse des Query Strings!
      // Eventuell vorher decodeURIComponent()
      // Außerdem gibt es noch Node Funktionen zur Bearbeitung des Query Strings: https://nodejs.org/api/querystring.html
      // Komplexere Decoding-Lösung mit decodeURI: https://stackoverflow.com/questions/8648892/how-to-convert-url-parameters-to-a-javascript-object
      // Tutorial: https://www.developerdrive.com/turning-the-querystring-into-a-json-object-using-javascript/
      // Weitere Hinweise zum Parsen von Query Strings mit Arrays: // Vorlage: https://stackoverflow.com/questions/30048806/parsing-a-json-query-string-into-a-json-object
      //----------------------------------------------------------------------------------------------------------------------------------------------
      apiRoute = process.env.API + "/Baustoffe/" + baustoffIdFuerFilterungBaustoffe + "/Baueigenschaften/Filter" + "?filter=" + myFilterArrayStringifiedAndURIEncoded
      */
      //----------------------------------------------------------------------------------------------------------------------
      this.$axios
        .get(apiRoute)
        .then(response => {
          console.log("response.data: ", response.data);
          //==================================================================================================================
          // NEU: #107
          // Test Code für Performance Improvement:
          // Tipp: https://forum.quasar-framework.org/topic/5650/qtree-search-filter-very-slow-when-number-of-nodes-is-1000s-how-to-optimize-it/8
          // Vorlage: https://vuedose.tips/improve-performance-on-large-lists-in-vue-js/
          // ACHTUNG: Zusätzlich umfangreiche Anpassungen im QPopupEdit notwendig für die Verwaltung der Anteile von Baustoffen an Baueinheit
          // Änderungen der QInput-Felder dort werden nach dem Object.freeze nicht mehr reaktiv in prop.node reflektiert
          // (da dieses offenbar eingefroren wurde).
          Object.freeze(response.data); // NEU - VOR der Zuweisung an nodesTreeBaustoffe!!! Friert auch nodesTreeBaustoffe ein gegen reaktive Änderungen
          this.nodesTreeBaustoffe = response.data;
          //==================================================================================================================
          // ACHTUNG: Die ursprünglichen Custom Checkboxes waren per Tests erst wirksam, wenn jedes Objekt in nodesTreeBaustoffe
          // ein Feld ticked hatte, das anfangs auf false gesetzt werden musste, sonst zeigten alle diese Custom Checkboxes im QTree
          // anfangs "indeterminate"  an!!!
          // Dieses wird von den bei Angabe einer tick-strategy am q-tree von Quasar
          // generierten Checkboxes für das Ticking NICHT benötigt, daher zusammen mit den Custom Checkboxes wieder auskommentiert!

          // Feld ticked zu allen Nodes hinzufügen mittels:
          // Function to add field ticked=false to all objects in nested array (with field "children" for nested objects):
          // Siehe https://stackoverflow.com/questions/14367101/how-to-add-property-to-nested-javascript-array-of-objects
          /*
          function addTicked(val) {
            val["ticked"]=false;
            for (var i = 0, len = val.children.length; i < len; i++) {
                addTicked(val.children[i])
            }
          };
          addTicked(this.nodesTreeBaustoffe[0]); // Fügt ticked: false zu allen Nodes inklusive dem Wurzelknoten des Rostoffunterbaums hinzu
          console.log("nodesTreeBaustoffe: ", this.nodesTreeBaustoffe); // Zur Überprüfung, ob ticked überall gesetzt wurde
          */

          // this.tickedKeysTreeBaustoffe = []; // ALT - confirmed, dass alle Nodes unticked sind
          this.tickedKeysTreeBaustoffe.splice(
            0,
            this.tickedKeysTreeBaustoffe.length
          ); // NEU: Sicherheitshalber Array mit reaktiver Methode leeren!!!
          // Zu Array Methoden und Vue siehe https://stackoverflow.com/questions/42807888/vuejs-and-vue-set-update-array
          // console.log("tickedKeysTreeBaustoffe: ", this.tickedKeysTreeBaustoffe);

          // this.expandedKeysTreeBaustoffe.splice(0, this.expandedKeysTreeBaustoffe.length); // Disabled - NICHT leeren, führte zu reaktivem Kollabieren des Arrays

          //-------------------------------------------------------------------------------------
          // Finde alle ids in nodesTreeBaustoffe:
          // Siehe https://stackoverflow.com/questions/52363138/get-all-key-values-from-multi-level-nested-array-javascript:
          // Diese wurden ursprünglich gebraucht, um per QTree API setTicked alle Nodes auf unticked zu setzen. Stellt sich mit den von Quasar
          // generierten Checkboxes im Tree auch bei Verwendung von Slots für den Tree als überflüssig heraus, daher disabled:
          /*
          var idsInTreeBaustoffe = [];
          JSON.stringify(this.nodesTreeBaustoffe, (key, value) => {
            if (key === '_id') idsInTreeBaustoffe.push(value);
            return value;
          });
          console.log("idsInTreeBaustoffe: ", idsInTreeBaustoffe);
          this.$nextTick(() => { // Überflüssig - Array tickedLeysTreeBaueinheiten ist vorher und nachher leer!!!
            this.$refs.treeBaustoffe.setTicked(idsInTreeBaustoffe, false); // Unticked alle
            console.log("nodesTreeBaustoffe nach'setTicked(idsInTreeBaustoffe, false)': ", this.nodesTreeBaustoffe);
          });
          */

          //---------------------------------------------------------------------------------------------------------------------------------------
          // Start Code für experimentelle Tests mit Quasar Extension q-hierarchy - disabled, hat sich nicht bewährt (siehe unten)
          // Siehe https://quasar-qhierarchy.netlify.com/docs
          // QHierarchy initialisieren - wieder disabled:
          // console.log("nodesTreeBaustoffe: ", this.nodesTreeBaustoffe);

          // this.dataHierarchyBaustoffe = this.nodesTreeBaustoffe; // Vorläufig, später müssen hier die zugeordneten Baustoffe vom
          // Backend geholt werden, ebenfalls als Tree
          // Dazu muss am Backend ein Algorithmus zum Einsatz kommen, der die MPath-Pfade aller getickten Baustoffe als Input nimmt,
          // und daraus einen verschachtelten Array (mit children-Feldern) als Input für q-hierarchy erzeugt:
          // Design:
          // 1. Die Gesamtmenge der vom Ticking betroffenen Knoten bestimmen als die Vereinigungsmenge aller ids in Pfaden der ticked Baustoffe:
          //    var idsInPathsOfAllTickedNodesTreeBaustoffe = [];
          //    Durch paths aller zugeordneten Baustoffe einer Baueinheit iterieren:
          //    Für jeden path den Pfad aufsplitten und die resultierenden ids in Array zwischenspeichern:
          //      var idsInPathOfSingleTickedNodeTreeBaustoffe = ausgewaehlteBaueinheit.zugeordneteBaustoffe[i].path.split("#"); // Array!!!
          //      idsInPathOfSingleTickedNodeTreeBaustoffe der Gesamtmenge hinzufügen, z.B. mit spread Operator:
          //        idsInPathsOfAllTickedNodesTreeBaustoffe.push(...idsInPathOfSingleTickedNodeTreeBaustoffe)
          // 2. Dann alle duplicate ids in der Gesamtmenge aus 1. eliminieren:
          //    Siehe dazu: https://stackoverflow.com/questions/1960473/get-all-unique-values-in-a-javascript-array-remove-duplicates,
          //    ebenfalls mit ES6 spread Operator:
          //    var uniqueIdsInPathsOfAllTickedNodesTreeBaustoffe = [...new Set(idsInPathsOfAllTickedNodesTreeBaustoffe)]
          // 3. Gesamten Baustoffbaum ohne Rohstoffunterbaum per getChildrenTree holen als Quell-Array treeBaustoffe (TBD: diesen nach Ziel-Array kopieren)
          // 4. Den Quell-Array rekursiv durchwandern - wenn ein Knoten gefunden wird, dessen id NICHT in obiger Gesamtmenge enthalten ist,
          //    im Quell-Array nicht mehr tiefer gehen und diesen Knoten samt Kindern aus dem Quell-Array entfernen
          //    ACHTUNG: Array-Methode filter ist non-mutating und liefert neuen Array zurück!!!
          //    Siehe https://stackoverflow.com/questions/42005096/js-remove-object-from-nested-array-and-return-parent-array (filter)
          //    und https://stackoverflow.com/questions/237104/how-do-i-check-if-an-array-includes-a-value-in-javascript (includes):
          //    var id = currentNode._id
          //    if (!uniqueIdsInPathsOfAllTickedNodesTreeBaueinheiten.includes(id)) { // id ist nicht enthalten in obiger Gesamtmenge
          //      treeBaustoffe.forEach(function(o) {
          //         o.children = o.children.filter(s => s.id !== id); // Filtert Objekt mit id aus dem Array der children
          //      })
          //     }
          // 5. ACHTUNG: Es könnten dabei leere Kinder übrig bleiben. Das könnte man das mit if (o.children = []) {} abfragen
          //    Eventuell erledigt obiges filter dies auch gleich!
          //    Außerdem haben Blattknoten schon heute children: [] und q-hierarchy kann damit umgehen!
          //    Siehe https://stackoverflow.com/questions/48633792/filter-empty-array-object
          //    und https://stackoverflow.com/questions/281264/remove-empty-elements-from-an-array-in-javascript?noredirect=1&lq=1
          // 6. Übrigbleibende Knoten sind Input für q-hierarchy

          // ACHTUNG: Restriktionen von q-hierarchy:
          // a) q-hierarchy macht wohl nur mit Tick Strategy "leaf" Sinn, bei "strict" müsste man sonst in der q-hierarchy über ein zusätzliches
          //    Feld anzeigen, welche Verzweigungsknoten geticked sind, und welche nur angezeigt werden, weil Kindknoten davon geticked sind
          // a) q-hierarchy hat keine Default Expansion und auch kein API dafür, d.h. der Benutzer muss immer erst alles manuell expandieren mittels "+" Icons!
          // b) Probleme mit Änderungen von Feldern, z.B. dem vorgesehenen "Anteil", es gibt kinen selectedKey wie in einer q-table, mit dem man pro Zeile´
          //    verzweigen könnte in ein Tab zur Bearbeitung der dem ausgewählten Baustoff entsprechenden Beziehung zwischen Baueinheit und Baustoff!
          // c) Damit kann man auch später nicht einen Router-Link zum Anzeigen des Baustoffs im Tab Baueinheiten hinzufügen!!!
          // d) Unklar, ob CSS Styling von QHierarchy per SASS (Färbung, stick Columns) so gut geht wie bei QTable
          // ==> Daher ratsam, wohl doch eine q-table statt q-hierarchy zu nehmen und in dieser q-tab evtl. die Baustoffbezeichnung des/der Parents pro Zeile
          //     mit anzeigen, o.ä., um dem Benutzer Zusatzinformationen zu geben, welcher Baustoff im Baustoffbaum geticked ist
          // HINWEIS: q-table könnte sogar mit Tick Strategy "strict" arbeiten, die erlauben würde, auch Verzweigungsknoten zu ticken
          //          Allerdings verwirrt dies eventuell den Benutzer, da damit beliebige Kombinationen möglich sind!!!

          // GEWÄHLTE WEITERE ALTERNATIVE: Den q-tree zur Auswahl von Baustoffen zur permanenten Anzeige der ausgewählten Baustoffe verwenden
          // und tickedNodesTreeBaustoffe dafür auslesen/abspeichern aus/nach selectedNodeTreeBaueinheiten.zugeordneteBaustoffe (ACHTUNG: Array von Objekten)
          //
          // Im Body Slot eines Knotens dann zusätzliche Felder anzeigen, z.B. anteilVonBaustoffInBaueinheit, etc.
          // RISIKO: Braucht aber ohne lazy Loading wahrscheinlich ordentlich Speicher, pro Baueinheit

          // ACHTUNG: Siehe https://stackoverflow.com/questions/45730610/vue-js-best-way-to-update-entire-array
          // ACHTUNG: Mit der folgenden Zuweisung ändert sich der jeweils andere Array, wenn einer der Arrays verändert wird!!!
          // console.log("dataHierarchyBaustoffe: ", this.dataHierarchyBaustoffe);
          //------------------------------------------------------------------------------------------------------------------------ (Ende Code für QHierarchy)

          // ids für den Array tickedKeysTreeBaustoffe für den Baustoffbaum aus zugeordneteBaustoffe extrahieren (Array of Objects):
          this.tickedKeysTreeBaustoffe = this.selectedNodeTreeBaueinheiten.zugeordneteBaustoffe.map(
            a => a.referenzAufBaustoffInBaueinheit
          );
          console.log(
            "tickedKeysTreeBaustoffe nach map: ",
            this.tickedKeysTreeBaustoffe
          );

          //-----------------------------------------------------------------------------------------------------------------------------------------------------
          // NEU: Erweiterte Felder and der Beziehung zwischen der Baueinheit und einem zugeordneten Baustoff setzen an ticked Nodes im Baustoffbaum:
          //-----------------------------------------------------------------------------------------------------------------------------------------------------
          // ALT:
          // Die 3 erweiterten Felder im Model (anteilVonBaustoffInBaueinheit, symbolVonBaustoffInBaueinheit, einheitVonBaustoffInBaueinheit) wurden im
          // Frontend noch nicht angezeigt und konnten damit auch nicht updated werden.

          // ACHTUNG: Diese 3 Felder sind aktuell in den Testdaten NICHT an allen Knoten auch definiert, denn zugeordneteBaustoffe wird in server.js in den
          // Testdaten nur für EINEN Testbaustoff "Putze, Mörtel, Estriche, Kleber und Beschichtungen" gesetzt, es ist sonst [], wie man im Debug Mode sieht,
          // schlimmstenfalls undefined! Dies also muss beim Rendern im Template unbedingt abgefangen werden!!

          // NEU:
          // Sie müssen nun in den Baustoffbaum (nodesTreeBaustoffe) pro ausgewähltem Baustoff mit aufgenommen werden.
          // Das initiale Laden des Baustoffbaums erfolgt hier in der
          // Methode loadTreeBaustoffe - schon hier könnte man entweder im Backend (Methode readExtraktBaustoffe) alle diese Felder für alle Knoten im
          // Baustoffbaum anlegen, dann allerdings müssten sie zunächst mit null initialisiert werden, oder man fügt sie hier im Frontend dem Baustoffbaum
          // hinzu für alle Knoten. Aber: Tatsächlich gebraucht werden sie (pro ausgewähltem Baustoff) NUR für die getickten Baustoffe, deshalb hier zunächst
          // darauf verzichtet.

          // Sie müssen also am Frontend für die getickten Knoten mit den passenden Werten gefüllt werden, am Besten hier, wenn tickedKeysTreeBaustoffe gesetzt wird,
          // in loadTreeBaustoffe - dazu müssen diese Werte aus selectedNodeTreeBaueinheiten, wo sie für früher getickte Baustoffe der Baueinheit bereits vorliegen
          // (denn sie werden am Backend von readBaustoff für die betreffende Baueinheit mit ans Frontend übergeben, auch ohne weiteres populate dort der
          // Referenzen auf Baustoffe, UND sie werden HIER in dieser Methodee weiter unten im Code auch schon berücksichtigt, allerdings noch vorläufig mit null
          // belegt), auch an den entsprechenden getickten Knoten in nodesTreeBaustoffe EINGEFÜGT werden! Dazu nun folgender Ansatz:

          // Es muss dazu dieser nested Array of Objects nodesTreeBaustoffe traversiert werden und die 3 Felder pro getickter id (= Feld referenzAufBaustoffInBaueinheit)
          // in den betreffenden getickten Knoten in nodesTreeBaustoffe eingefügt werden - es handelt sich um ein Pendant zu dem Code weiter unten, in der
          // umgekehrten Richtung:

          // Zunächst Schleife über den Array der zugeordneten Baustoffe der ausgewählten Baueinheit, um daraus die erweiterten Felder zu holen.
          // Die erweiterten Felder für jeden zugeordneten Baustoff inklusive des id-Felds des jeweiligen Baustoffs in referenzAufBaustoffInBaueinheit werden
          // dabei in einem Array zwischengespeichert.

          // HINWEIS: Die Objekte in zugeordneteBaustoffe enthalten ein eigenes von Mongoose hinzugefügtes _id-Feld, das aber hier nicht gebraucht wird

          console.log(
            "Vor for-Schleife auf zugeordneten Baustoffen der ausgewählten Baueinheit"
          );
          console.log(
            "selectedNodeTreeBaueinheiten.zugeordneteBaustoffe: ",
            this.selectedNodeTreeBaueinheiten.zugeordneteBaustoffe
          );
          console.log(
            "tickedKeysTreeBaustoffe: ",
            this.tickedKeysTreeBaustoffe
          );
          var relationshipElement = {}; // leeres Zwischenobjekt
          var tickedNodesMitErweitertenFeldern = []; // Array, der die ticked Nodes mit erweiterten Feldern enthält
          for (
            var i = 0;
            i < this.selectedNodeTreeBaueinheiten.zugeordneteBaustoffe.length;
            i++
          ) {
            // HINWEIS: zugeordneteBaustoffe ist === [] und damit ist .length === 0, wenn keine zugeordneten Baustoffe definiert sind für eine Baueinheit!
            // Dann wird die Schleife nicht betreten, tickedNodesMitErweitertenFeldern bleibt ein leerer Array, und es werden keine ticked Nodes updated
            // In diesem Fall müsste auch tickedKeysTreeBaustoffe === [] sein, da tickedKeysTreeBaustoffe mit den ids der zugeordneten Baustoffe initialisiert
            // wird
            relationshipElement = {
              // Zwischenobjekt, nur zur besseren Lesbarkeit
              referenzAufBaustoffInBaueinheit: this.selectedNodeTreeBaueinheiten
                .zugeordneteBaustoffe[i].referenzAufBaustoffInBaueinheit,
              anteilVonBaustoffInBaueinheit: this.selectedNodeTreeBaueinheiten
                .zugeordneteBaustoffe[i].anteilVonBaustoffInBaueinheit,
              symbolVonBaustoffInBaueinheit: this.selectedNodeTreeBaueinheiten
                .zugeordneteBaustoffe[i].symbolVonBaustoffInBaueinheit,
              einheitVonBaustoffInBaueinheit: this.selectedNodeTreeBaueinheiten
                .zugeordneteBaustoffe[i].einheitVonBaustoffInBaueinheit
            };
            tickedNodesMitErweitertenFeldern[i] = relationshipElement;
          }
          console.log(
            "tickedNodesMitErweitertenFeldern: ",
            tickedNodesMitErweitertenFeldern
          );

          // Nun die Objekte in diesem Array in das Objekt mit derselben id im nested Tree Array nodesTreeBaustoffe einfügen (push),
          // bzw. (besser, so unten implementiert) dort die Werte direkt flach einfügen bzw. setzen:
          // Benutzt rekursive Funktion zum Traversieren - Vorlage: https://stackoverflow.com/questions/43612046/how-to-update-value-of-nested-array-of-objects

          if (tickedNodesMitErweitertenFeldern !== []) {
            // Nur dann den Baustoffbaum traversieren zum Augmentieren der ticked Nodes:
            console.log(
              "Vor rekursivem Traversieren des Baustoffbaums auf der Suche nach ticked Nodes"
            );
            let idsTickedKeysTreeBaustoffe = this.tickedKeysTreeBaustoffe; // ACHTUNG: Lokale Variable für this.tickedKeysTreeBaustoffe -
            // ohne diese, bei direkter Verwendung von this.tickedKeysTreeBaustoffe unten kommt in der rekursiven Funktion,
            // die Fehlermeldung "typeError - cannot read property 'tickedKeysTreeBaustoffe' of undefined"
            // Notwendig, weil in function iter "this" sich auf die iter-Funktion bezieht, die Vue-Instanz kennt diese nicht unmittelbar

            let vueInstance = this; // ACHTUNG: In der Funktion iter statt "this" verwenden
            // Notwendig, weil in function iter "this" sich auf die iter-Funktion bezieht, die Vue-Instanz kennt diese nicht unmittelbar

            this.nodesTreeBaustoffe.forEach(function iter(a) {
              if (idsTickedKeysTreeBaustoffe.includes(a._id)) {
                // D.h. die id des traversierten Knotens im Baustoffbaum ist dieselbe wie eine id in tickedKeysTreeBaustoffe
                console.log(
                  "Passenden ticked Node gefunden, füge erweiterte Felder hinzu - _id: ",
                  a._id
                );
                // Filtere dazu obigen Array mit den passenden erweiterten Feldern nach Objekt mit dieser _id:
                var filteredTickedNodesMitErweitertenFeldern = tickedNodesMitErweitertenFeldern.filter(
                  element => element.referenzAufBaustoffInBaueinheit === a._id
                );
                // ACHTUNG: Ergebnis von filter ist auch ein Array!!! Dieser muss aber wegen Filtern auf _id genau ein Element haben!
                console.log(
                  "filteredTickedNodesMitErweitertenFeldern: ",
                  filteredTickedNodesMitErweitertenFeldern
                );
                if (filteredTickedNodesMitErweitertenFeldern.length !== 1) {
                  console.log(
                    "ACHTUNG: Interner Fehler in loadTreeBaustoffe bei Filtern auf Array tickedNodesMitErweitertenFeldern"
                  );
                }
                // ALT/FALSCH - nicht reaktive Zuweisungen
                /*
                a.referenzAufBaustoffInBaueinheit =
                  filteredTickedNodesMitErweitertenFeldern[0].referenzAufBaustoffInBaueinheit;
                a.anteilVonBaustoffInBaueinheit =
                  filteredTickedNodesMitErweitertenFeldern[0].anteilVonBaustoffInBaueinheit;
                a.symbolVonBaustoffInBaueinheit =
                  filteredTickedNodesMitErweitertenFeldern[0].symbolVonBaustoffInBaueinheit;
                a.einheitVonBaustoffInBaueinheit =
                  filteredTickedNodesMitErweitertenFeldern[0].einheitVonBaustoffInBaueinheit;
                */

                // NEU - reaktive Zuweisungen mit $set - Fix für QPopupEdit Probleme im Baustoffbaum/Rohstoffunterbaum in zugeordnete Baustoffe/Rohstoffe (TODO YYYYYY)
                // WICHTIG - sonst funktioniert die gesamte Reactivity des Arrays nodesTreeBaustoffe nicht mehr!!!
                // Reaktivity geht verloren, wenn dem an sich reaktiven Objekt nicht-reaktiv Felder hinzugefügt werden - das reaktive
                // Objekt kriegt das nicht mit!!!
                vueInstance.$set(
                  a,
                  "referenzAufBaustoffInBaueinheit",
                  filteredTickedNodesMitErweitertenFeldern[0]
                    .referenzAufBaustoffInBaueinheit
                );
                vueInstance.$set(
                  a,
                  "anteilVonBaustoffInBaueinheit",
                  filteredTickedNodesMitErweitertenFeldern[0]
                    .anteilVonBaustoffInBaueinheit
                );
                vueInstance.$set(
                  a,
                  "symbolVonBaustoffInBaueinheit",
                  filteredTickedNodesMitErweitertenFeldern[0]
                    .symbolVonBaustoffInBaueinheit
                );
                vueInstance.$set(
                  a,
                  "einheitVonBaustoffInBaueinheit",
                  filteredTickedNodesMitErweitertenFeldern[0]
                    .einheitVonBaustoffInBaueinheit
                );

                console.log("Node nach Hinzufügen der erweiterten Felder: ", a);
              }
              Array.isArray(a.children) && a.children.forEach(iter);
            });
          } else {
            console.log(
              "Keine ticked Nodes - kein Traversieren des Baustoffbaums nötig"
            );
          }
          //----------------------------------------------------------------------------------------------------------------------------
          // Nun in Abhängigkeit des Parameters show den Baustoffbaum expandieren:
          // ACHTUNG: In expandTickednodesTreeBaustoffe() ist zusätzlich eine Abfrage auf if ($refs.treeBaustoffe !== undefined) enthalten
          // Dies ist für den Fall, dass die Funktion mit show === true aufgerufen wird, aber das Tab "Zugeordnete Baustoffe" noch nicht
          // ausgewählt wurde, und damit $refs.treeBaustoffe undefined ist - in diesem Fall kann der Baum nicht expandiert werden,
          // da nicht vorhanden!!!
          if (show) {
            this.$nextTick(() => {
              // NEU: Baustoffbaum initial expandieren
              // this.expandedKeysTreeBaustoffe.splice(0, this.expandedKeysTreeBaustoffe.length); // NEU: Sicherheitshalber vorher reaktiv den Array leeren!???
              // Disabled, führte zu unerwünschtem Kollabieren des Arrays vor dem Expandieren
              // Stattdessen:
              console.log(
                "expandedKeysTreeBaustoffe vor expandTickedNodesTreeBaustoffe(): ",
                this.expandedKeysTreeBaustoffe
              );
              // NEU: Hier nur die ticked Nodes expandieren
              // Dafür die folgende Expansion aller Knoten im Baustoffbaum auskommentiert:
              // this.$refs.treeBaustoffe.expandAll(); // Ganzen Baum expandieren (bisherige Lösung) // 14.04.20 Auskommentiert von sts
              // Stattdessen:
              this.expandTickedNodesTreeBaustoffe(); // 19.04.20 Einkommentiert von ms, nach Vorlage in baustoffe.vue
              console.log(
                "Baustoffbaum wurde geladen und ticked Nodes wurden ggf. expandiert"
              );
              console.log(
                "expandedKeysTreeBaustoffe nach expandTickedNodesTreeBaustoffe(): ",
                this.expandedKeysTreeBaustoffe
              );
              // HINWEIS: Offenbar fügt Quasar bei expandAll() immer wieder per push die neu expandierten Keys dem Array expandedKeysTreeBaustoffe hinzu,
              // was zu Duplikaten darin führt - scheint aber "works as designed" zu sein!!!
            });
            // ACHTUNG: Einfaches this.$refs.treeBaustoffe.expandAll(); // Ohne $nextTick() => {} funktioniert es NICHT!!!
            // Siehe https://forum.quasar-framework.org/topic/4147/solved-v1-qtree-does-not-expand-all-by-property-default-expand-all
            // $nextTick() forciert anscheinend einen DOM Update, den Vue sonst nicht machen würde
          } // Sonst hier nichts tun
          // NEU: Spinner Gears wieder ausblenden:
          Loading.hide();
        })
        .catch(error => {
          console.log("Error bei readExtraktBaustoffe - error: ", error);
          // NEU: Spinner Gears wieder ausblenden:
          Loading.hide();
        });
    },

    showTreeBaustoffe() {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - Teil 2 von loadTreeBaustoffe (siehe oben)
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In showTreeBaustoffe");

      this.$nextTick(() => {
        // NEU: Baustoffbaum initial expandieren
        // this.expandedKeysTreeBaustoffe.splice(0, this.expandedKeysTreeBaustoffe.length); // NEU: Sicherheitshalber vorher reaktiv den Array leeren!???
        // Disabled, führte zu unerwünschtem Kollabieren des Arrays vor dem Expandieren
        // Stattdessen:
        console.log(
          "expandedKeysTreeBaustoffe vor expandTickedNodesTreeBaustoffe(): ",
          this.expandedKeysTreeBaustoffe
        );
        // NEU: Hier nur die ticked Nodes expandieren
        // Dafür die folgende Expansion aller Knoten im Baustoffbaum auskommentiert:
        // this.$refs.treeBaustoffe.expandAll(); // Ganzen Baum expandieren (bisherige Lösung) // 14.04.20 Auskommentiert von sts
        // Stattdessen:
        this.expandTickedNodesTreeBaustoffe(); // 19.04.20 Einkommentiert von ms, nach Vorlage in baustoffe.vue
        console.log(
          "Baustoffbaum wurde geladen und ticked Nodes wurden ggf. expandiert"
        );
        console.log(
          "expandedKeysTreeBaustoffe nach expandTickedNodesTreeBaustoffe(): ",
          this.expandedKeysTreeBaustoffe
        );
        // HINWEIS: Offenbar fügt Quasar bei expandAll() immer wieder per push die neu expandierten Keys dem Array expandedKeysTreeBaustoffe hinzu,
        // was zu Duplikaten darin führt - scheint aber "works as designed" zu sein!!!
      });
      // ACHTUNG: Einfaches this.$refs.treeBaustoffe.expandAll(); // Ohne $nextTick() => {} funktioniert es NICHT!!!
      // Siehe https://forum.quasar-framework.org/topic/4147/solved-v1-qtree-does-not-expand-all-by-property-default-expand-all
      // $nextTick() forciert anscheinend einen DOM Update, den Vue sonst nicht machen würde
    },

    //--------------------------------------------------------------------------------------------------------------------
    // Methoden für den QTree für Baueinheiten:
    //--------------------------------------------------------------------------------------------------------------------
    resetFilterTreeBaueinheiten() {
      //--------------------------------------------------------------------------------------------------------------------
      // Filter-Methode für QTree, siehe https://quasar.dev/vue-components/tree#Example--Filtering-nodes
      //--------------------------------------------------------------------------------------------------------------------
      this.filterTreeBaueinheiten = "";
      this.$refs.filterTreeBaueinheiten.focus();
    },

    loadNodeTreeBaueinheiten(id) {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - lädt Baueinheit im Bauvorhabenbaum aus der Datenbank
      // ACHTUNG: Lädt nur den Knoten mit allen seinen Feldern, aber nicht seine Kinder und Kindeskinder!
      // Parameter: id des zu ladenden Knotens
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In loadNodeTreeBaueinheiten()");
      // Aufruf des APIs zum Lesen eines Knotens
      const apiRoute = process.env.API + "/Baueinheiten/";
      this.$axios
        .get(/* url */ apiRoute + id)
        .then(response => {
          console.log("response.data: ");
          console.log(response.data);
          response.data.lazy = true;
          // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
          //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
          //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
          // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
          this.nodesTreeBaueinheiten.push(response.data); // Pushe Objekt für die Baueinheit auf nodesTreeBaueinheiten
          // HINWEIS: QTree erlaubt auch mehrere Wurzeln, dann würden hier mehrere Objekte auf den Array gepushed
          console.log("Knoten im Bauvorhabenbaums wurde geladen");
        })
        .catch(error => {
          // NEU: Error Handling mit .catch
          console.log("Error bei loadNodeTreeBaueinheiten - error: ", error);
        });
    },

    async loadRootNodeTreeBaueinheiten() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - lädt beim ersten Laden der Page den Wurzelknoten des Bauvorhabenbaums aus der Datenbank
      // Aufruf in mounted()
      // NEU: Returned promise - damit kann bei Aufruf mit await sichergestellt werden, dass die
      //      Funktion komplett abgeschlossen ist
      // Realisiert mit async loadRootNodeTreeBaueinheiten() und return this.$axios
      // ACHTUNG: Ein await ohne dieses return erzwingt dies NICHT!!!
      // Aufrufe ohne await bleiben dabei unbehelligt!
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In loadRootNodeTreeBaueinheiten()");
      // NEU: Aufruf des neuen APIs zum Lesen des Wurzelknotens
      const apiRoute = process.env.API + "/Baueinheiten/Wurzel";

      return this.$axios
        .get(apiRoute)
        .then(response => {
          console.log("response.data: ");
          console.log(response.data);
          response.data.lazy = true; // Fügt ein Feld lazy hinzu!!!
          // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
          //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
          //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
          // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
          this.nodesTreeBaueinheiten.push(response.data); // Pushe Objekt für die Wurzelbaueinheit auf nodesTreeBaueinheiten
          // HINWEIS: QTree erlaubt auch mehrere Wurzeln, dann würden hier mehrere Objekte auf den Array gepushed
          console.log("Wurzel des Bauvorhabenbaums wurde geladen");
        })
        .catch(error => {
          // NEU: Error Handling mit .catch
          console.log(
            "Error bei loadRootNodeTreeBaueinheiten - error: ",
            error
          );
        });
    },

    async loadLastSelectedNodeTreeBaueinheiten(
      lastSelectedKeyTreeBaueinheiten
    ) {
      //----------------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - lädt beim ersten Laden der Page einen als Parameter (Key = Id) übergebenen zuletzt ausgewählten Node im Baum
      // TODO XXXXXX: Arbeitet noch mit Testdaten für die ausgewählte Baueinheit (myBaueinheitId)
      // TODO XXXXXX: Wenn keiner gespeichert ist, sollte es wie schon vorher loadRootNodeTreeBaueinheiten() aufrufen!
      // Aufruf in mounted()
      // NEU: Returned promise - damit kann bei Aufruf mit await sichergestellt werden, dass die Funktion komplett abgeschlossen ist
      //      Realisiert mit async loadlastSelectedNodeTreeBaueinheiten() und return this.$axios
      // ACHTUNG: Ein await ohne dieses return erzwingt dies NICHT!!!
      //          Aufrufe ohne await bleiben dabei unbehelligt!
      //----------------------------------------------------------------------------------------------------------------------------
      // NEU: Lädt bei Fehler aus Laden des letzten ausgewählten Nodes den Wurzelknoten
      //      Returned zusätzlich einen Result-String, der anzeigt, welcher Knoten geladen wurde:
      //      - lastSelectedNode
      //      - rootNode
      // Ein solcher Fehler beim Laden des letzten ausgewählten Nodes kann z.B. passieren
      // - wenn die Datenbank inzwischen neu geladen wurde (bei lokalen Tests)
      // - wenn der zuletzt ausgewählte Knoten gelöscht oder verschoben wurde
      // TODO XXXXXX: Einstweilen kommt in diesen Fällen, weil das Backend dann 404 meldet, noch eine Fehlermeldung aus dem
      //              Axios Response Interceptor. Diese könnte man unterdrücken.
      //-----------------------------------------------------------------------------------------------------------------------------
      console.log("In loadLastSelectedNodeTreeBaueinheiten()");
      console.log(
        "Parameter lastSelectedKeyTreeBaueinheiten: ",
        lastSelectedKeyTreeBaueinheiten
      );
      // NEU: Aufruf des neuen APIs zum Lesen des verschachtelten Baums aller Knoten vom Wurzelknoten auf dem Pfad bis zum als Parameter übergebenen Knoten, plus dessen Kindern
      //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      // Test-Ids von Baueinheiten für lokale Tests (statt Aufruf des APIs mit dem Parameter lastSelectedKeyTreeBaueinheiten:
      // const myBaueinheitId = "6220ad94aa8a318008a7e889" // Heesters-Seniorenheim lokal, mit dazu passenden expanded Nodes unten
      // const myBaueinheitId = "6220ad94aa8a318008a7e897" // Einstein-Schule lokal
      // const myBaueinheitId = "6220ad94aa8a318008a7e89" // Klassenraum 1 lokal
      // let apiRoute = process.env.API + "/Baueinheiten/" + myBaueinheitId + "/Reload/Pfad";
      //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      // In Production nun das neue API mit Parameter lastSelectedKeyTreeBaueinheiten aufrufen - dieser darf nicht null sein:
      if (!lastSelectedKeyTreeBaueinheiten) {
        console.log(
          "FEHLER: Parameter lastSelectedKeyTreeBaueinheiten ist undefined oder null - vor Return ohne Laden des Baums"
        );
        return;
      }
      // Ansonsten:
      let apiRoute =
        process.env.API +
        "/Baueinheiten/" +
        lastSelectedKeyTreeBaueinheiten +
        "/Reload/Pfad";
      return this.$axios // ACHTUNG: Das return hier ist unbedingt erforderlich!!!
        .get(apiRoute)
        .then(response => {
          console.log("response.data: ");
          console.log(response.data);
          // Aus Vorlage für "normales" Laden des Wurzelknotens - hier nicht nötig, da die lazy-Flags bereits durch obiges API am Backend gesetzt werden
          /*
          response.data.lazy = true; // Fügt ein Feld lazy hinzu!!!
          // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
          //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
          //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
          // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
          */
          this.nodesTreeBaueinheiten = response.data; // Speichere verschachtelten Array für QTree aus Backend nach nodesTreeBaueinheitenn
          // HINWEIS: QTree erlaubt auch mehrere Wurzeln, dann würden hier mehrere Objekte auf den Array gepushed
          //--------------------------------------------------------------------------------------------------------------------------
          // Nur für obige Tests:
          // this.selectedKeyTreeBaueinheiten=myBaueinheitId; // Nur für Tests, wird ansonsten vor Aufruf in mounted() gesetzt
          // this.expandedKeysTreeBaueinheiten = ["6220ad94aa8a318008a7e876", "6220ad94aa8a318008a7e883", "6220ad94aa8a318008a7e889"]
          //--------------------------------------------------------------------------------------------------------------------------
          console.log(
            "Zuletzt selektierter Node im Bauvorhabenbaum wurde geladen"
          );
          return "lastSelectedNode" // NEU - String returnen, der anzeigt, was geladen wurde
        })
        .catch(async error => { // async erforderlich wegen await unten
          // NEU: Error Handling mit .catch
          console.log(
            "Error bei loadLastSelectedNodeTreeBaueinheiten - error: ",
            error
          );
          // NEU - Wurzelknoten laden stattdessen:
          console.log("Statt des zuletzt ausgewählten Knotens wird der Wurzelnknoten geladen")
          await this.loadRootNodeTreeBaueinheiten()
          return "rootNode" // NEU - String returnen, der anzeigt, was geladen wurde
        });
    },

    selectedNodeHandlingTreeBaueinheiten(key) {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode für das Select Node Handling des QTrees für die Baueinheiten
      // Siehe https://forum.quasar-framework.org/topic/5765/qtree-select-behavior/3
      // Komfortfunktion: Sorgt dafür, dass bei Selektion eines Knotens im Baum mit Mausklick dieser Knoten nicht deselektiert
      // wird, sondern selektiert bleibt. Erst beim Klicken auf einen anderen Knoten ändert sich der selektierte Knoten.
      // HINWEIS: Mit dieser Methode darf am q-tree nicht mehr :selected.sync="selectedKeyTreeBaueinheiten" angegeben werden,
      // sondern :selected="selectedKeyTreeBaueinheiten"
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In selectedNodeHandlingTreeBaueinheiten()");
      console.log("Parameter key: ", key);
      if (key != null) {
        this.selectedKeyTreeBaueinheiten = key;
      }
    },

    lazyLoadHandlingTreeBaueinheiten({ node, key, done, fail }) {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode für das Lazy Loading des QTrees für die Baueinheiten
      // Siehe https://quasar.dev/vue-components/tree#QTree-API
      // - Diese führt das Lazy Loading der Kinder eines Nodes node mit node-key key durch
      // - fail() ist Funktion, die im Fehlerfall augerufen wird ("if any error occurs")
      // - done(children) ist eine Funktion, die dem obigen Node den Array seiner Kinder (als Argument der Funktion) zuweist
      // Diese werden dann q-tree intern zum Array :nodes="nodesTreeBaueinheiten" hinzugefügt
      // HINWEIS: Nur durch den Aufruf dieser Funktion "lernt" q-tree, welche Kinder ein Node hat!!!
      //--------------------------------------------------------------------------------------------------------------------
      console.log(
        "In lazyLoadHandlingTreeBaueinheiten() - Parameter node: ",
        node
      );
      let startTime = performance.now(); // Siehe https://stackoverflow.com/questions/41632942/how-to-measure-time-elapsed-on-javascript
      // console.log("Funktions-Parameter done: ", done); // Zeigt Source Code von done() in Browser Console, zeigt z.B. dass done() under the Covers das Objekt lazy verändert...
      const apiRoute =
        process.env.API + "/Baueinheiten/" + node._id + "/Kinder"; // Triggert Aufruf von getImmediateChildren() am Backend
      this.$axios
        .get(apiRoute)
        .then(response => {
          let endTime0 = performance.now();
          console.log("Success aus API Call für readKindKnotenBaueinheit()");
          console.log(
            "****** Elapse Time für API Response [ms]: ",
            Math.round(endTime0 - startTime)
          );
          // console.log("Vor Setzen des lazy-Flags für alle Kindknoten")
          response.data.sort(
            (a, b) => a.indexInAggregationsknoten - b.indexInAggregationsknoten
          );
          for (var i = 0; i < response.data.length; i++) {
            // console.log(response.data[i])
            //--------------------------------------------------------------------------------
            // NEU - #349: Sniff Test für Performance-Optimierung mit Object.freeze()
            // Angetestet auf Heroku, keine signifikante Verbesserung gesehen, daher einstweilen
            // disabled:
            // for (var j = 0; j < response.data[i].baueigenschaften.length; j++) {
            //  Object.freeze(response.data[i].baueigenschaften[j].typbezogeneBaueigenschaft);
            // }
            //--------------------------------------------------------------------------------
            // ALT - lazy für alle Baumknotentypen auf true setzen - disabled
            // response.data[i].lazy = true;
            // NEU - lazy setzen in Abhängigkeit von baumKnotenTyp:
            if (response.data[i].baumKnotenTyp === "Blattknoten") {
              response.data[i].lazy = false;
            } else {
              response.data[i].lazy = true;
            }
            // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
            //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
            //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
            // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
          }
          // console.log("Nach Setzen des lazy-Flags für alle Kindknoten")
          // console.log("Vor Übergabe der Daten an Quasar q-tree mit Funktion done()")
          done(response.data); // Übergebe die Kinder an q-tree
          // console.log("Nach Übergabe der Daten an Quasar q-tree mit Funktion done()")
          let endTime1 = performance.now();
          console.log(
            "****** Elapse Time für Nachbereitung nach API Response [ms]: ",
            Math.round(endTime1 - endTime0)
          );
        })
        .catch(error => {
          // NEU: Error Handling mit .catch
          console.log(
            "Error aus API Call für readKindKnotenBaueinheit() - error: ",
            error
          );
        });
    },

    getChildrenById(_id) {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - holt Kinder für eine Baueinheit mit _id aus der Datenbank
      // TODO: Wird aktuell nicht mehr verwendet
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In getChildrenById()");
      console.log("_id: ", _id);
      console.log("WARNUNG/ACHTUNG: API ist veraltet!!!");
      var url = "http://localhost:8080/API/children/" + _id;
      this.$axios.get(url).then(response => {
        console.log("response.data: ");
        console.log(response.data);
        var arr = this.$refs.treeBaueinheiten.getNodeByKey(_id);
        console.log("arr: ");
        console.log(arr);
        this.$set(arr, "children", response.data);
        /*
        for (var i = 0; i < response.data.length; i++) {
          //console.log(response.data[i])
          arr.children.push(response.data[i]);
        }
        */
      });
    },

    async deleteSelectedBaueinheit() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Methode - löscht die im QTree selektierte Baueinheit im Backend mit Kindern und Kindeskindern und anschließend auch im Frontend
      //
      // ACHTUNG: Im Gegensatz zum Einfügen eines Knotens wird hier beim Löschen eines Knotens bisher kein Refresh ausgelöst
      // (Performance-Gründe). Geändert im Rahmen von #338/339.
      // Allerdings wird deshalb auch das Profilformular "Bodenaufbau" nach dem Delete eines Knotens mit dieser Methode
      // NICHT refreshed. Beim Refresh würden allerdings dortige, nicht gespeicherte Änderungen in Feldern mit verloren gehen!
      // Außerdem besteht dabei noch das Problem, dass ohne Speichern des Bodenaufbaus die dortigen computed-Felder nicht in der
      // Datenbank aktualisiert werden. Daher ist geplant, das  Einfügen und Löschen für Schichten im Bauvorhabenbaum zu
      // disablen, und nur noch mit den Buttons im Profilformular "Bodenaufbau" zu erlauben.
      //
      // ACHTUNG/TODO: Das Löschen des Wurzelknotens wird hier aktuell nicht unterbunden
      // Dies erfolgt aktuell nur durch Disablen des "Baueinheit löschen" Buttons für den Wurzelknoten
      //-------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In deleteSelectedBaueinheit() - vor Löschen des ausgewählten Knotens mit Key: " +
          this.selectedKeyTreeBaueinheiten
      );
      if (this.selectedKeyTreeBaueinheiten != null) {
        // console.log("process.env.API: ", process.env.API);
        // NEU - https://quasar.dev/quasar-cli/cli-documentation/handling-process-env
        // process.env.API zeigt die URL des APIs an, abhängig davon, ob Dev oder Production Build
        var apiRoute =
          process.env.API + "/Baueinheiten/" + this.selectedKeyTreeBaueinheiten;
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBauvorlagen'");
        this.$socket.emit("leaveRoom", {
          room: "roomBauvorlagen"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBauvorlagen'");
        //=========================================================================================================================================
        this.$axios // Löschen des ausgewählten Knotens mit allen Kindknoten!!!
          .delete(apiRoute)
          .then(async response => {
            console.log(
              "In deleteSelectedBaueinheit nach Delete für Baueinheit mit Kindern und Kindeskindern, response: ",
              response
            );
            //------------------------------------------------------------------------------------------------
            // NEU - um Konflikte mit Aktionen für markierte Zweige zu vermeiden: Markierung für einen eventuell markierten Zweig entfernen
            // ACHTUNG: Der markierte Knoten kann sogar im zu löschenden Zweig liegen!
            // ACHTUNG: Ein einfaches this.idWurzelZuBewegenderZweig = null wie beim Einfügen von Knoten genügt hier warum auch immer NICHT!!!
            // ACHTUNG: Dies muss am Anfang dieser Funktion erfolgen!!!
            if (this.idWurzelZuBewegenderZweig != null) {
              // Ein Knoten im Baum war markiert
              let node = this.$refs.treeBaueinheiten.getNodeByKey(
                this.idWurzelZuBewegenderZweig
              ); // Den markierten Knoten per QTree API ermitteln
              this.$set(node, "zweigMarkiertFuerBewegen", false); // Markierung entfernen - unbedingt $set verwenden!;
              this.idWurzelZuBewegenderZweig = null;
            }
            //------------------------------------------------------------------------------------------------
            // arrayOfIdsInPath ist Array, der die ids aller Knoten im Pfad vom Wurzelknoten bis inklusive des gelöschten Knotens enthält
            var arrayOfIdsInPath = this.$refs.treeBaueinheiten
              .getNodeByKey(this.selectedKeyTreeBaueinheiten) // QTree API Methode
              .path.split("#");
            //------------------------------------------------------------------------------------------------
            if (arrayOfIdsInPath.length > 1) {
              // arrayOfIdsInPath muss immer mindestens 2 Elemente enthalten, denn Wurzelknoten darf nicht gelöscht werden
              // ACHTUNG: Dies wird aktuell nur am Frontend per Disable des Buttons für "Baueinheit löschen" für Wurzelknoten unterbunden! -->
              console.log(arrayOfIdsInPath);
              var parentId = arrayOfIdsInPath[arrayOfIdsInPath.length - 2]; // id des Elternknotens im Baum, bei Länge 2 ist das der Wurzelknoten
              var parent = this.$refs.treeBaueinheiten.getNodeByKey(parentId); // parent ist der Elternknoten im Baum
              var index = parent.children.findIndex(value => {
                // Finde index des gelöschten Knotens im Array der Kindknoten des Elternknotens
                if (value._id === this.selectedKeyTreeBaueinheiten) {
                  return true;
                }
              });
            }
            //------------------------------------------------------------------------------------------------
            parent.children.splice(index, 1); // Entferne id des gelöschten Knotens aus dem Array der Kindknoten des Elternknotens
            // HINWEIS: Der Knoten muss nicht aus nodesTreeBaueinheiten entfernt werden, da die Änderung von parent dies
            //          automatisch mit erledigt!!!
            console.log(
              "In deleteSelectedBaueinheit(): Geänderter Elternknoten nach Löschen des Kindknotens - parent: ",
              parent
            );
            //-----------------------------------------------------------------------------------------------
            // NEU: Fix für Backlog Item #111 - Löschen des letzten Kindes unter dem Elternknoten hier besonders behandeln:
            if (parent.children.length === 0) {
              // Elternknoten hat keine Kinder mehr
              if (parent.baumKnotenTyp === "Verzweigungsknoten") {
                parent.baumKnotenTyp = "Blattknoten";
              } // else {} // baumKnotenTyp "Wurzelknoten" und "Rohstoffunterbaumwurzelknoten" nicht ändern!
            }
            //------------------------------------------------------------------------------------------------------------------------------
            // Kommentare zum Flag lazy an jedem QTree Node:
            // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
            //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
            //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
            // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            //------------------------------------------------------------------------------------------------
            parent.lazy = false; // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            //------------------------------------------------------------------------------------------------
            // Kommentare zum Objekt lazy am QTree selbst:
            // delete this.$refs.treeBaueinheiten.lazy[parentId] // Resetten des Eintrags im Objekt lazy - hier disabled, unnötig
            // lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"}
            // HINWEIS: Es handelt sich bei lazy um ein JS Objekt, keinen Array
            // Zugriff auf ein Element darin mit this.$refs.treeBaueinheiten.lazy[id]
            // Resetten eines Elements darin mit delete this.$refs.treeBaueinheiten.lazy[id]
            //------------------------------------------------------------------------------------------------------------------------------
            // NEU: Ursprünglicher Fix für #338 - Weil obiges splice manchmal nicht reaktiv erkannt wird (der gelöschte Knoten wird dann fälschlich
            // weiterhin angezeigt, und verschwindet erst nach Zu- und Aufklappen des Parents)
            // hier ein setExpanded des Elternknotens auslösen, was das Problem behebt auch ohne Refresh (Workaround)
            // Enabled wegen Problem #340 (ist aber nur Workaround für #340, trotzdem belassen)
            // Eigentliche Lösung für #340 (nur in deleteBaueinheit() unten, nicht hier in deleteSelectedBaueinheit():
            // Aufruf refreshTreeBaueinheitenPerformanceOptimiert(parent)
            //
            this.$refs.treeBaueinheiten.setExpanded(
              parent._id, // Erwartet key, nicht node!
              true
            );
            //
            //------------------------------------------------------------------------------------------------------------------------------
            // NEU: Alternativer Fix A für #338 - selectedKeyTreeBaueinheiten reaktiv ändern, weil obiges splice nicht immer reaktiv
            // funktioniert, warum auch immer!
            // Funktioniert so nicht, bzw. nur, wenn selectedKeyTreeBaueinheiten ganz auf null gesetzt wird, was nicht erwünscht ist!
            // Daher disabled
            // let oldKeyTreeBaueinheiten = this.selectedKeyTreeBaueinheiten;
            // this.selectedKeyTreeBaueinheiten = null;
            // this.selectedKeyTreeBaueinheiten = oldKeyTreeBaueinheiten;
            //-----------------------------------------------------------------------------------------------------------------------------
            // NEU: Zusätzlicher Fix für #338 wegen #339 - Baum neu laden - funktioniert per Test!
            // Erfordert async oben am .then
            console.log("Vor await reloadTreeWrapper('Optimiert')"); //
            await this.refreshTreeBaueinheitenPerformanceOptimiert(); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
            // HINWEIS: Im Rahmen von #340 kann hier der optimierte Refresh OHNE Parameter node aufgerufen werden, er arbeitet dann
            //          auf selectedNodeTreeBaueinheiten
            console.log("Nach await reloadTreeWrapper('Optimiert')");
            //-----------------------------------------------------------------------------------------------------------------------------
            // NEU: Da in dieser Variante der delete-Funktion immer der selected Node selbst gelöscht wird, muss zusätzlich unbedingt
            // selectedKeyTreeBaueinheiten auf null oder die Id des Parents gesetzt werden!
            // Sonst werden rechts z.B. in "Angaben zur Baueinheit" alte, gelöschte Daten angezeigt (Fehler)
            // this.selectedKeyTreeBaueinheiten = null;
            // Alternativ könnte man auch das Parent auswählen:
            this.selectedKeyTreeBaueinheiten = parent._id;
            //------------------------------------------------------------------------------------------------
            this.deleteSelectedBaueinheitDialog = false;
            // NEU: Banner-Benutzernachricht im Footer per global Store und Enums:
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_LOESCHEN_ERFOLG
            );
            //------------------------------------------------------------------------------------------------
          })
          .catch(error => {
            console.log(
              "Fehler bei delete von Baueinheit mit id: ",
              this.selectedKeyTreeBaueinheiten
            );
            console.log("error:", error);
            this.deleteSelectedBaueinheitDialog = false;
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_LOESCHEN_FEHLER
            );
          });
      } else {
        console.log(
          "In deleteSelectedBaueinheit(): Keine Baueinheit ausgewählt - kein Löschen möglich"
        );
        this.deleteSelectedBaueinheitDialog = false;
        globalStore.showBenutzerNachricht(
          BenutzerNachrichten.BAUEINHEIT_LOESCHEN_WARNUNG_KEINE_BAUEINHEIT_AUSGEWAEHLT
        );
      }
    },

    deleteBaueinheit(node) {
      //-------------------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - löscht eine im Parameter Node übergebene Baueinheit im Backend
      // mit Kindern und Kindeskindern und anschließend auch im Frontend (Modifikation obiger Methode deleteSelectedBaueinheit)
      //
      // ACHTUNG: Im Gegensatz zum Einfügen eines Knotens wird hier beim Löschen eines Knotens bisher kein Refresh ausgelöst
      // (Performance-Gründe). Geändert im Rahmen von #338/339.
      // Allerdings wird deshalb auch das Profilformular "Bodenaufbau" nach dem Delete eines Knotens mit dieser Methode
      // NICHT refreshed. Beim Refresh würden allerdings dortige, nicht gespeicherte Änderungen in Feldern mit verloren gehen!
      // Außerdem besteht dabei noch das Problem, dass ohne Speichern des Bodenaufbaus die dortigen computed-Felder nicht in der
      // Datenbank aktualisiert werden. Daher ist geplant, das  Einfügen und Löschen für Schichten im Bauvorhabenbaum zu
      // disablen, und nur noch mit den Buttons im Profilformular "Bodenaufbau" zu erlauben.
      //
      // ACHTUNG/TODO: Das Löschen des Wurzelknotens wird hier aktuell nicht unterbunden
      // Dies erfolgt aktuell nur durch Disablen des "Baueinheit löschen" Buttons für den Wurzelknoten
      //-------------------------------------------------------------------------------------------------------------------------------
      console.log("In deleteBaueinheit(node)");
      if (node != null) {
        console.log(
          "Vor Löschen des Knotens node mit baueinheitsBezeichnung: " +
            node.baueinheitsBezeichnung
        );
        // console.log("process.env.API: ", process.env.API);
        // NEU - https://quasar.dev/quasar-cli/cli-documentation/handling-process-env
        // process.env.API zeigt die URL des APIs an, abhängig davon, ob Dev oder Production Build
        var apiRoute = process.env.API + "/Baueinheiten/" + node._id;
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBauvorlagen'");
        this.$socket.emit("leaveRoom", {
          room: "roomBauvorlagen"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBauvorlagen'");
        //=========================================================================================================================================
        this.$axios // Löschen des übergebenen Knotens mit allen Kindknoten!!!
          .delete(apiRoute)
          .then(async response => {
            console.log(
              "In deleteBaueinheit nach Delete für Baueinheit mit Kindern und Kindeskindern, response: ",
              response
            );
            //------------------------------------------------------------------------------------------------
            // NEU - um Konflikte mit Aktionen für markierte Zweige zu vermeiden: Markierung für einen eventuell markierten Zweig entfernen
            // ACHTUNG: Der markierte Knoten kann sogar im zu löschenden Zweig liegen!
            // ACHTUNG: Ein einfaches this.idWurzelZuBewegenderZweig = null wie beim Einfügen von Knoten genügt hier warum auch immer NICHT!!!
            // ACHTUNG: Dies muss am Anfang dieser Funktion erfolgen!!!
            if (this.idWurzelZuBewegenderZweig != null) {
              // Ein Knoten im Baum war markiert
              let markierterNode = this.$refs.treeBaueinheiten.getNodeByKey(
                this.idWurzelZuBewegenderZweig
              ); // Den markierten Knoten per QTree API ermitteln
              this.$set(markierterNode, "zweigMarkiertFuerBewegen", false); // Markierung entfernen - unbedingt $set verwenden!;
              this.idWurzelZuBewegenderZweig = null;
            }
            //------------------------------------------------------------------------------------------------
            // arrayOfIdsInPath ist Array, der die ids aller Knoten im Pfad vom Wurzelknoten bis inklusive des gelöschten Knotens enthält
            var arrayOfIdsInPath = this.$refs.treeBaueinheiten
              .getNodeByKey(node._id) // QTree API Methode, arbeitet hier auf der Id des gelöschten Knotens!
              .path.split("#");
            //------------------------------------------------------------------------------------------------
            if (arrayOfIdsInPath.length > 1) {
              // arrayOfIdsInPath muss immer mindestens 2 Elemente enthalten, denn Wurzelknoten darf nicht gelöscht werden
              // ACHTUNG: Dies wird aktuell nur am Frontend per Disable des Buttons für "Baueinheit löschen" für Wurzelknoten unterbunden! -->
              console.log(arrayOfIdsInPath);
              var parentId = arrayOfIdsInPath[arrayOfIdsInPath.length - 2]; // id des Elternknotens im Baum, bei Länge 2 ist das der Wurzelknoten
              var parent = this.$refs.treeBaueinheiten.getNodeByKey(parentId); // parent ist der Elternknoten im Baum
              var index = parent.children.findIndex(value => {
                // Finde index des gelöschten Knotens im Array der Kindknoten des Elternknotens
                if (value._id === node._id) {
                  // ACHTUNG: Hier Id des gelöschten Knotens!
                  return true;
                }
              });
            }
            //------------------------------------------------------------------------------------------------
            parent.children.splice(index, 1); // Entferne id des gelöschten Knotens aus dem Array der Kindknoten des Elternknotens
            // HINWEIS: Der Knoten muss nicht aus nodesTreeBaueinheiten entfernt werden, da die Änderung von parent dies
            //          automatisch mit erledigt!!!
            console.log(
              "In deleteBaueinheit(): Geänderter Elternknoten nach Löschen des Kindknotens - parent: ",
              parent
            );
            //-----------------------------------------------------------------------------------------------
            // NEU: Fix für Backlog Item #111 - Löschen des letzten Kindes unter dem Elternknoten hier besonders behandeln:
            if (parent.children.length === 0) {
              // Elternknoten hat keine Kinder mehr
              if (parent.baumKnotenTyp === "Verzweigungsknoten") {
                parent.baumKnotenTyp = "Blattknoten";
              } // else {} // baumKnotenTyp "Wurzelknoten" und "Rohstoffunterbaumwurzelknoten" nicht ändern!
            }
            //------------------------------------------------------------------------------------------------
            // Kommentare zum Flag lazy an jedem QTree Node:
            // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
            //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
            //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
            // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            parent.lazy = false; // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            //------------------------------------------------------------------------------------------------
            // Kommentare zum Objekt lazy am QTree selbst:
            // delete this.$refs.treeBaueinheiten.lazy[parentId] // Resetten des Eintrags im Objekt lazy - hier disabled, unnötig
            // lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"}
            // HINWEIS: Es handelt sich bei lazy um ein JS Objekt, keinen Array
            // Zugriff auf ein Element darin mit this.$refs.treeBaueinheiten.lazy[id]
            // Resetten eines Elements darin mit delete this.$refs.treeBaueinheiten.lazy[id]
            //------------------------------------------------------------------------------------------------------------------------------
            // NEU: Ursprünglicher Fix für #338 - Weil obiges splice manchmal nicht reaktiv erkannt wird (der gelöschte Knoten wird dann fälschlich
            // weiterhin angezeigt, und verschwindet erst nach Zu- und Aufklappen des Parents)
            // hier ein setExpanded des Elternknotens auslösen, was das Problem behebt auch ohne Refresh (Workaround)
            // Enabled wegen Problem #340 (ist aber nur Workaround für #340, trotzdem belassen)
            // Eigentliche Lösung für #340 (siehe unten): Aufruf refreshTreeBaueinheitenPerformanceOptimiert(parent)
            //
            this.$refs.treeBaueinheiten.setExpanded(
              parent._id, // Erwartet key, nicht node!
              true
            );
            //
            //------------------------------------------------------------------------------------------------------------------------------
            // NEU: Alternativer Fix A für #338 - selectedKeyTreeBaueinheiten reaktiv ändern, weil obiges splice nicht immer reaktiv
            // funktioniert, warum auch immer!
            // Funktioniert so nicht, bzw. nur, wenn selectedKeyTreeBaueinheiten ganz auf null gesetzt wird, was nicht erwünscht ist!
            // Daher disabled
            // let oldKeyTreeBaueinheiten = this.selectedKeyTreeBaueinheiten;
            // this.selectedKeyTreeBaueinheiten = null;
            // this.selectedKeyTreeBaueinheiten = oldKeyTreeBaueinheiten;
            //-----------------------------------------------------------------------------------------------------------------------------
            // NEU: Zusätzlicher Fix für #338 wegen #339 - Baum neu laden - funktioniert per Test!
            // Erfordert async oben am .then
            console.log("Vor await reloadTreeWrapper('Optimiert')");
            await this.refreshTreeBaueinheitenPerformanceOptimiert(parent); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
            // HINWEIS: Als Fix für #340 muss hier der optimierte Refresh Mit Parameter node (= parent) aufgerufen werden, er arbeitet dann
            //          auf diesem mitgegebenen Node
            console.log("Nach await reloadTreeWrapper('Optimiert')");
            //-----------------------------------------------------------------------------------------------------------------------------
            // NEU: Falls der selected Node selbst gelöscht wird, muss zusätlich selectedKeyTreeBaueinheiten auf null oder die Id des
            // Parents gesetzt werden! Sonst werden rechts z.B. in "Angaben zur Baueinheit" alte, gelöschte Daten angezeigt (Fehler)
            // Dies geändert auf unbedingtes Setzen, weil ja der selected Node auch ein Kind des gelöschten sein kann!!!
            // if (node._id === this.selectedKeyTreeBaueinheiten) {
            // this.selectedKeyTreeBaueinheiten = null;
            // Alternativ könnte man auch das Parent auswählen:
            this.selectedKeyTreeBaueinheiten = parent._id;
            // }
            //-----------------------------------------------------------------------------------------------------------------------------
            this.deleteBaueinheitDialog = false;
            // NEU: Banner-Benutzernachricht im Footer per global Store und Enums:
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_LOESCHEN_ERFOLG
            );
            //------------------------------------------------------------------------------------------------
          })
          .catch(error => {
            console.log(
              "Fehler bei delete von Baueinheit mit id: ",
              this.selectedKeyTreeBaueinheiten
            );
            console.log("error:", error);
            this.deleteBaueinheitDialog = false;
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_LOESCHEN_FEHLER
            );
          });
      } else {
        console.log(
          "In deleteBaueinheit(): Keine Baueinheit übergeben - kein Löschen möglich"
        );
        this.deleteBaueinheitDialog = false;
        globalStore.showBenutzerNachricht(
          BenutzerNachrichten.BAUEINHEIT_LOESCHEN_WARNUNG_KEINE_BAUEINHEIT_AUSGEWAEHLT
        );
      }
    },

    removeChildrenInSelectedNodeTreeBaueinheiten() {
      //--------------------------------------------------------------------------------------------------------------------
      // Verworfene Testmethode
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In removeChildrenInSelectedNodeTreeBaueinheiten()");
      this.$refs.treeBaueinheiten.getNodeByKey(
        this.selectedKeyTreeBaueinheiten
      ).children = [];
      this.$refs.treeBaueinheiten.lazy = {}; // lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"}
    },

    cancelButton() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - setzt aktuell nur den selected Key im QTree für die Baueinheiten auf null
      // TODO: Implementierung
      //--------------------------------------------------------------------------------------------------------------------
      this.selectedKeyTreeBaueinheiten = null;
    },

    resetCreateChildBaueinheit() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - resetted die Validation im q-form innerhalb des q-dialogs für das Anlegen eines Kindknotens im Bauvorhabenbaum
      // Greift per $refs auf das Form zu und ruft dessen API-MEthode resetValidation() auf
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetCreateChild()");
      this.$refs.formNeueBaueinheitDialog.resetValidation();
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Methoden resetCreateChildBaueinheitMitXYZProfilAktivierung():

    resetCreateChildBaueinheitMitBauvorhabenProfilAktivierung() {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - resetted die Validation im q-form innerhalb des q-dialogs für das Anlegen eines Kindknotens im Bauvorhabenbaum
      // mit Baueigenschaftsprofilaktivierung für Profil "Baueinheit > Bauvorhaben"
      // Greift per $refs auf das Form zu und ruft dessen API-MEthode resetValidation() auf
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetCreateChildMitBauvorhabenProfilAktivierung()");
      this.$refs.formNeueBaueinheitDialogMitBauvorhabenProfilAktivierung.resetValidation();
    },

    resetCreateChildBaueinheitMitStandortProfilAktivierung() {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - resetted die Validation im q-form innerhalb des q-dialogs für das Anlegen eines Kindknotens im Bauvorhabenbaum
      // mit Baueigenschaftsprofilaktivierung für Profil "Baueinheit > Standort"
      // Greift per $refs auf das Form zu und ruft dessen API-MEthode resetValidation() auf
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetCreateChildMitStandortProfilAktivierung()");
      this.$refs.formNeueBaueinheitDialogMitStandortProfilAktivierung.resetValidation();
    },

    resetCreateChildBaueinheitMitGebaeudeProfilAktivierung() {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - resetted die Validation im q-form innerhalb des q-dialogs für das Anlegen eines Kindknotens im Bauvorhabenbaum
      // mit Baueigenschaftsprofilaktivierung für Profil "Geabaeude"
      // Greift per $refs auf das Form zu und ruft dessen API-MEthode resetValidation() auf
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetCreateChildMitGebaeudeProfilAktivierung()");
      this.$refs.formNeueBaueinheitDialogMitGebaeudeProfilAktivierung.resetValidation();
    },

    resetCreateChildBaueinheitMitGeschossProfilAktivierung() {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - resetted die Validation im q-form innerhalb des q-dialogs für das Anlegen eines Kindknotens im Bauvorhabenbaum
      // mit Baueigenschaftsprofilaktivierung für Profil "Baueinheit > Geschoss"
      // Greift per $refs auf das Form zu und ruft dessen API-MEthode resetValidation() auf
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetCreateChildMitGeschossProfilAktivierung()");
      this.$refs.formNeueBaueinheitDialogMitGeschossProfilAktivierung.resetValidation();
    },

    resetCreateChildBaueinheitMitRaumProfilAktivierung() {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - resetted die Validation im q-form innerhalb des q-dialogs für das Anlegen eines Kindknotens im Bauvorhabenbaum
      // mit Baueigenschaftsprofilaktivierung für Profil "Baueinheit > Raum"
      // Greift per $refs auf das Form zu und ruft dessen API-MEthode resetValidation() auf
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetCreateChildMitRaumProfilAktivierung()");
      this.$refs.formNeueBaueinheitDialogMitRaumProfilAktivierung.resetValidation();
    },

    resetCreateChildBaueinheitMitBodenaufbauProfilAktivierung() {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - resetted die Validation im q-form innerhalb des q-dialogs für das Anlegen eines Kindknotens im Bauvorhabenbaum
      // mit Baueigenschaftsprofilaktivierung für Profil "Baueinheit > Bodenaufbau"
      // Greift per $refs auf das Form zu und ruft dessen API-MEthode resetValidation() auf
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetCreateChildMitBodenaufbauProfilAktivierung()");
      this.$refs.formNeueBaueinheitDialogMitBodenaufbauProfilAktivierung.resetValidation();
    },

    //----------------------------------------------------------------------------------------------------------------------
    createChildBaueinheit() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - erstellt einen Kindknoten des ausgewählten Knotens am Backend und fügt ihn anschließend den Daten des
      // QTree hinzu. Anschließend wird der Tree noch ausgeklappt.
      // NEU: Ausklappen des Trees nach asynchronem await refreshTreeBaueinheiten() mit setExpanded(node, true)
      // TODO: Entweder Validation enforcen oder Länge <= 200 abprüfen vor Create!!
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In createChildBaueinheit()");
      console.log(
        "bezeichnungNeueBaueinheit: ",
        this.bezeichnungNeueBaueinheit
      );
      if (
        this.selectedKeyTreeBaueinheiten != null &&
        this.bezeichnungNeueBaueinheit != null &&
        this.bezeichnungNeueBaueinheit !== ""
      ) {
        // NEU - um Konflikte mit Aktionen für markierte Zweige zu vermeiden:
        this.idWurzelZuBewegenderZweig = null;
        //--------------------------------------------------------------------------------------------------------
        // NEU: Zusätzliches Body-Feld benutzerKennungenAutoren, dieses erbt ggf. Autoren vom Elternknoten
        //      nach folgender Logik:
        // Initialisiere die Autoren am neuen Kindknoten mit den bisherigen Autoren am
        // vorhandenen Elternknoten des neuen Kindknotens (Feld benutzerKennungenAutoren)
        // ACHTUNG: Dieses Feld am Elternknoten kann auch ein leerer Array sein, z.B. in Bauvorlagen oder
        // bei Erstanlage eines neuen Bauvorhabens oben im Baum
        // Füge, wenn angemeldeter Benutzer Mitarbeiter ist und nicht schon als Autor im Array-Feld benutzerKennungenAutoren
        // des Elternknotens enthalten ist, diesen als zusätzlichen Autor am Kindknoten hinzu:
        let benutzerKennungenAutorenNeueBaueinheit = this
          .selectedNodeTreeBaueinheiten.benutzerKennungenAutoren;
        if (
          this.localStore.state.anmeldeDatenBenutzer.benutzerRolle ===
          "Mitarbeiter"
        ) {
          // Füge ggf. den angemeldeten Benutzer als Autor hinzu, falls nicht schon enthalten:
          if (
            !benutzerKennungenAutorenNeueBaueinheit.includes(
              // Funktioniert auch bei leerem Array-Feld!
              this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
            )
          ) {
            // Den angemeldeten Benutzer dem Array als neuen Autor hinzufügen:
            benutzerKennungenAutorenNeueBaueinheit.push(
              this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
            );
          } // else // Nichts zu tun
        } // else // Redakteur oder Administrator
        // Array der Autoren übernehmen vom Elternknoten, bereits oben so initialisiert
        // ACHTUNG: Es wird bei Redakteuren und Administratoren dem Array-Feld benutzerKennungenAutoren
        // NICHT die benutzerKennung des angemeldeten Benutzers hinzugefügt!
        // Dies erlaubt die Hinzufügung von Kindknoten mit leerem Array-Feld durch Redakteure und Administratoren.
        // Das können Strukturierungsknoten oben im Baum sein oder Knoten im Bauvorlagenunterbaum.
        // Fügt ein Redakteur oder Administrator in einem Bauvorhaben mit nicht leerem Array-Feld einen Kindknoten
        // ein, so wird mit obiger Logik dessen ArrayFeld benutzerKennungenAutoren vom Elternknoten unverändert übernommen.
        //--------------------------------------------------------------------------------------------------------
        const apiRoute =
          process.env.API + "/Baueinheiten/" + this.selectedKeyTreeBaueinheiten;
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBauvorlagen'");
        this.$socket.emit("leaveRoom", {
          room: "roomBauvorlagen"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBauvorlagen'");
        //=========================================================================================================================================
        this.$axios
          .post(apiRoute, {
            // Body - in req.body.baueinheitsBezeichnungKindKnoten wird die Bezeichnung des neuen Kindknotens übergeben:
            baueinheitsBezeichnungKindKnoten: this.bezeichnungNeueBaueinheit,
            benutzerKennungenAutorenKindKnoten: benutzerKennungenAutorenNeueBaueinheit // NEU
          })
          .then(async response => {
            // async wegen await unten
            console.log("Response aus Post Request: ", response);
            // tmp wird aktuell nicht mehr benutzt, daher disabled:
            /*
            var tmp = this.$refs.treeBaueinheiten.getNodeByKey(
              this.selectedKeyTreeBaueinheiten
            );
            */
            //------------------------------------------------------------------------------------------------------------------------
            // NEU: #332 - Performance-Optimierung beim Refresh
            // NEU: Den neu angelegten Knoten mit auf den
            // Array der children pushen, um zu erreichen, um diesen mit der neuen, optimierten Refresh-Methode auch mit zu refreshen
            // Dann weiter unten die neue Refresh-Methode aufrufen ("Optimiert") statt der alten ("Nicht optimiert")
            // ACHTUNG: Wenn der ausgewählte Knoten ein Blattknoten ist oder noch nicht lazy loaded wurde, ist das Feld children
            // nicht definiert, daher wird es in diesem Fall oben neu eingefügt als leerer Array.
            let neuAngelegterKnoten = response.data;
            // let idNeueKindBaueinheit = neuAngelegterKnoten._id;
            if (this.selectedNodeTreeBaueinheiten.children === undefined) {
              this.selectedNodeTreeBaueinheiten.children = [];
            }
            this.selectedNodeTreeBaueinheiten.children.push(
              neuAngelegterKnoten
            );
            //-------------------------------------------------------------------------------------------------------------------------
            // Nun muss die Id des betreffenden Baueigenschaftsprofils ermittelt werden per API mit Query:
            //---------------------------------------------------------------------------------------------------------
            // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
            //      da der Refresh asynchron abläuft, ist await notwendig
            console.log("Vor await reloadTreeWrapper('Optimiert')");
            await this.reloadTreeWrapper("Optimiert"); // NEU: #332. ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
            console.log("Nach await reloadTreeWrapper('Optimiert')");
            console.log(
              "selectedNodeTreeBaueinheiten: ",
              this.selectedNodeTreeBaueinheiten
            );
            // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
            this.$refs.treeBaueinheiten.setExpanded(
              this.selectedKeyTreeBaueinheiten,
              true
            );
            this.createNewBaueinheitDialog = false;
            this.bezeichnungNeueBaueinheit = null;
            // NEU: Benutzernachricht im Footer per global Store und Enums:
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_ERFOLG
            );
            //----------------------------------------------------------------------------------------------------------
            // Ältere Fehlversuche - disabled:
            /*
            this.$set(tmp, "baumKnotenTyp", response.data.baumKnotenTyp);
            this.$set(tmp, "children", response.data.children);
            // tmp = response.data
            this.$refs.treeBaueinheiten.setExpanded(
              this.selectedKeyTreeBaueinheiten,
              false
            );
            */
            /*
            tmp.children = [];
            console.log("lazy: ", this.$refs.treeBaueinheiten.lazy);
            // lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"}
            // HINWEIS: Es handelt sich bei lazy um ein JS Objekt, keinen Array
            // Zugriff auf ein Element darin mit this.$refs.treeBaueinheiten.lazy[id]
            // Resetten eines Elements darin mit delete this.$refs.treeBaueinheiten.lazy[id]
            delete this.$refs.treeBaueinheiten.lazy[tmp._id]; // Resetten des Eintrags im Objekt lazy
            tmp.lazy = true;
            // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
            //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
            //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
            // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            */
            // this.$refs.treeBaueinheiten.setExpanded(tmp._id, true);
            /*
            this.selectedNodeTreeBaueinheiten.children.push({
              _id: response.data._id,
              baueinheitsBezeichnung: response.data.baueinheitsBezeichnung,
              baueigenschaften:                      // ACHTUNG: Überprüfen!
                response.data.baueigenschaften,      // ACHTUNG: Überprüfen!
              lazy: true
            });
            */
            //-----------------------------------------------------------------------------------------------------------
          })
          .catch(error => {
            console.log("Error in createChildBaueinheit - error: ", error);
            if (error.response.status === 403) {
              console.log(
                "Error 403 - Geschwisterbaueinheit mit dieser Bezeichnung existiert bereits"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
              );
            } else {
              // Status 500
              // Logging ist bereits druch Axios Interceptor erfolgt!
              // console.log("Error status 500 bei CreateChildBaueinheit")
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_FEHLER
              );
            }
            this.createNewBaueinheitDialog = false;
          });
      } else {
        console.log("Fehlende Bezeichnung für Neuanlage Kindbaueinheit!");
        globalStore.showBenutzerNachricht(
          BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_WARNUNG_BEZEICHNUNG_EINGEBEN
        );
      }
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Methoden aktiviereXYZBaueigenschaftsProfilAnBaueinheit():

    aktiviereBauvorhabenBaueigenschaftsProfilAnBaueinheit(node) {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - aktiviert das Baueigenschaftsprofil "Baueinheit > Bauvorhaben" an dem durch den Parameter node spezifizierten
      // Knoten (Ziel-Baueinheit) im Bauvorhabenbaum
      // HINWEIS: Es ist schon vorher per Methode bauvorhabenBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten(node)
      // ermittelt worden, dass das betreffende Baueigenschaftsprofil NCIHT aktiviert ist an der Baueinheit
      //--------------------------------------------------------------------------------------------------------------------
      console.log(
        "In aktiviereBauvorhabenBaueigenschaftsProfilAnBaueinheit(node)"
      );
      let idZielBaueinheit = node._id;
      // Zunächst muss die Id des Baueigenschaftsprofils "Baueinheit > Bauvorhaben" ermittelt werden per API mit Query:
      let apiRoute =
        process.env.API +
        "/Baueigenschaftsprofile/Query/" +
        // "?baueigenschaftsProfilBezeichnung=Bauvorhaben"; // ALT
        "?baueigenschaftsProfilBezeichnung=Baueinheit%20>%20Bauvorhaben"; // NEU - #375: Neue Profilbezeichnung!
      this.$axios
        .get(apiRoute)
        .then(baueigenschaftsProfile => {
          // ACHTUNG: Es kommt bei Erfolg ein Objekt, das einen Unter-Array data der Länge 0 enthält, zurück!
          // console.log("baueigenschaftsProfile: ", baueigenschaftsProfile);
          let idBauvorhabenBaueigenschaftsProfil =
            baueigenschaftsProfile.data[0]._id; // Id des gesuchten Baueigenschaftsprofils
          console.log(
            "Vor API Request für Profilaktivierung - idBauvorhabenBaueigenschaftsProfil: ",
            idBauvorhabenBaueigenschaftsProfil
          );
          // Nun damit die Profilaktivierung veranlassen per API:
          apiRoute =
            process.env.API +
            "/Baueinheiten/" +
            idZielBaueinheit +
            "/Baueigenschaftsprofil/Aktivierungszustand";
          this.$axios
            .put(apiRoute, {
              // Body - in req.body.idProfil wird die Id des zu aktivierenden Baueigenschaftsprofils übergeben
              idProfil: idBauvorhabenBaueigenschaftsProfil,
              aktivierenNichtDeaktivieren: true,
              vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore.state
                .einstellungenBenutzer.vorgabeWerteUeberschreibenVorhandeneWerte // #357
            })
            .then(response => {
              console.log(
                "Erfolg in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Bauvorhaben'"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_ERFOLG
              );
              // Nun noch den Tree refreshen:
              // NEU: Für #505 mit neuem optionalem Boolean-Parameter, welcher, wenn true, das Unter-Tab für das Tab "Baueigenschaftsprofilformulare" neu bestimmt
              //      nach einer Profilaktivierung (wie hier in diesem Fall)
              this.reloadTreeWrapper("Nicht optimiert", {
                bestimmeNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung: true
              });
            })
            .catch(error => {
              console.log(
                "Error in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Bauvorhaben' - error: ",
                error
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_FEHLER
              );
              // Nun noch den Tree refreshen:
              this.reloadTreeWrapper("Nicht optimiert");
            });
        })
        .catch(error => {
          console.log(
            "Error in API Response für Query Baueigenschaftsprofil 'Baueinheit > Bauvorhaben' - error: ",
            error
          );
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_LESEN_FEHLER
          );
          // Nun noch den Tree refreshen:
          this.reloadTreeWrapper("Nicht optimiert");
        });
    },

    aktiviereStandortBaueigenschaftsProfilAnBaueinheit(node) {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - aktiviert das Baueigenschaftsprofil "Baueinheit > Standort" an dem durch den Parameter node spezifizierten
      // Knoten (Ziel-Baueinheit) im Bauvorhabenbaum
      // HINWEIS: Es ist schon vorher per Methode standortBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten(node)
      // ermittelt worden, dass das betreffende Baueigenschaftsprofil NCIHT aktiviert ist an der Baueinheit
      //--------------------------------------------------------------------------------------------------------------------
      console.log(
        "In aktiviereStandortBaueigenschaftsProfilAnBaueinheit(node)"
      );
      let idZielBaueinheit = node._id;
      // Zunächst muss die Id des Baueigenschaftsprofils "Baueinheit > Standort" ermittelt werden per API mit Query:
      let apiRoute =
        process.env.API +
        "/Baueigenschaftsprofile/Query/" +
        // "?baueigenschaftsProfilBezeichnung=Standort"; // ALT
        "?baueigenschaftsProfilBezeichnung=Baueinheit%20>%20Standort"; // NEU - #375: Neue Profilbezeichnung!
      this.$axios
        .get(apiRoute)
        .then(baueigenschaftsProfile => {
          // ACHTUNG: Es kommt bei Erfolg ein Objekt, das einen Unter-Array data der Länge 0 enthält, zurück!
          // console.log("baueigenschaftsProfile: ", baueigenschaftsProfile);
          let idStandortBaueigenschaftsProfil =
            baueigenschaftsProfile.data[0]._id; // Id des gesuchten Baueigenschaftsprofils
          console.log(
            "Vor API Request für Profilaktivierung - idStandortBaueigenschaftsProfil: ",
            idStandortBaueigenschaftsProfil
          );
          // Nun damit die Profilaktivierung veranlassen per API:
          apiRoute =
            process.env.API +
            "/Baueinheiten/" +
            idZielBaueinheit +
            "/Baueigenschaftsprofil/Aktivierungszustand";
          this.$axios
            .put(apiRoute, {
              // Body - in req.body.idProfil wird die Id des zu aktivierenden Baueigenschaftsprofils übergeben
              idProfil: idStandortBaueigenschaftsProfil,
              aktivierenNichtDeaktivieren: true,
              vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore.state
                .einstellungenBenutzer.vorgabeWerteUeberschreibenVorhandeneWerte // #357
            })
            .then(response => {
              console.log(
                "Erfolg in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Standort'"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_ERFOLG
              );
              // Nun noch den Tree refreshen:
              // NEU: Für #505 mit neuem optionalem Boolean-Parameter, welcher, wenn true, das Unter-Tab für das Tab "Baueigenschaftsprofilformulare" neu bestimmt
              //      nach einer Profilaktivierung (wie hier in diesem Fall)
              this.reloadTreeWrapper("Nicht optimiert", {
                bestimmeNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung: true
              });
            })
            .catch(error => {
              console.log(
                "Error in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Standort' - error: ",
                error
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_FEHLER
              );
              // Nun noch den Tree refreshen:
              this.reloadTreeWrapper("Nicht optimiert");
            });
        })
        .catch(error => {
          console.log(
            "Error in API Response für Query Baueigenschaftsprofil 'Baueinheit > Standort' - error: ",
            error
          );
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_LESEN_FEHLER
          );
          // Nun noch den Tree refreshen:
          this.reloadTreeWrapper("Nicht optimiert");
        });
    },

    aktiviereGebaeudeBaueigenschaftsProfilAnBaueinheit(node) {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - aktiviert das Baueigenschaftsprofil "Baueinheit > Gebäude" an dem durch den Parameter node spezifizierten
      // Knoten (Ziel-Baueinheit) im Bauvorhabenbaum
      // HINWEIS: Es ist schon vorher per Methode gebaeudeBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten(node)
      // ermittelt worden, dass das betreffende Baueigenschaftsprofil NCIHT aktiviert ist an der Baueinheit
      //--------------------------------------------------------------------------------------------------------------------
      console.log(
        "In aktiviereGebaeudeBaueigenschaftsProfilAnBaueinheit(node)"
      );
      let idZielBaueinheit = node._id;
      // Zunächst muss die Id des Baueigenschaftsprofils "Baueinheit > Gebäude" ermittelt werden per API mit Query:
      let apiRoute =
        process.env.API +
        "/Baueigenschaftsprofile/Query/" +
        // "?baueigenschaftsProfilBezeichnung=Gebäude"; // ALT
        "?baueigenschaftsProfilBezeichnung=Baueinheit%20>%20Gebäude"; // NEU - #375: Neue Profilbezeichnung!
      this.$axios
        .get(apiRoute)
        .then(baueigenschaftsProfile => {
          // ACHTUNG: Es kommt bei Erfolg ein Objekt, das einen Unter-Array data der Länge 0 enthält, zurück!
          // console.log("baueigenschaftsProfile: ", baueigenschaftsProfile);
          let idGebaeudeBaueigenschaftsProfil =
            baueigenschaftsProfile.data[0]._id; // Id des gesuchten Baueigenschaftsprofils
          console.log(
            "Vor API Request für Profilaktivierung - idGebaeudeBaueigenschaftsProfil: ",
            idGebaeudeBaueigenschaftsProfil
          );
          // Nun damit die Profilaktivierung veranlassen per API:
          apiRoute =
            process.env.API +
            "/Baueinheiten/" +
            idZielBaueinheit +
            "/Baueigenschaftsprofil/Aktivierungszustand";
          this.$axios
            .put(apiRoute, {
              // Body - in req.body.idProfil wird die Id des zu aktivierenden Baueigenschaftsprofils übergeben
              idProfil: idGebaeudeBaueigenschaftsProfil,
              aktivierenNichtDeaktivieren: true,
              vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore.state
                .einstellungenBenutzer.vorgabeWerteUeberschreibenVorhandeneWerte // #357
            })
            .then(response => {
              console.log(
                "Erfolg in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Gebäude'"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_ERFOLG
              );
              // Nun noch den Tree refreshen:
              // NEU: Für #505 mit neuem optionalem Boolean-Parameter, welcher, wenn true, das Unter-Tab für das Tab "Baueigenschaftsprofilformulare" neu bestimmt
              //      nach einer Profilaktivierung (wie hier in diesem Fall)
              this.reloadTreeWrapper("Nicht optimiert", {
                bestimmeNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung: true
              });
            })
            .catch(error => {
              console.log(
                "Error in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Gebäude' - error: ",
                error
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_FEHLER
              );
              // Nun noch den Tree refreshen:
              this.reloadTreeWrapper("Nicht optimiert");
            });
        })
        .catch(error => {
          console.log(
            "Error in API Response für Query Baueigenschaftsprofil 'Baueinheit > Gebäude' - error: ",
            error
          );
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_LESEN_FEHLER
          );
          // Nun noch den Tree refreshen:
          this.reloadTreeWrapper("Nicht optimiert");
        });
    },

    aktiviereGeschossBaueigenschaftsProfilAnBaueinheit(node) {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - aktiviert das Baueigenschaftsprofil "Baueinheit > Geschoss" an dem durch den Parameter node spezifizierten
      // Knoten (Ziel-Baueinheit) im Bauvorhabenbaum
      // HINWEIS: Es ist schon vorher per Methode geschossBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten(node)
      // ermittelt worden, dass das betreffende Baueigenschaftsprofil NCIHT aktiviert ist an der Baueinheit
      //--------------------------------------------------------------------------------------------------------------------
      console.log(
        "In aktiviereGeschossBaueigenschaftsProfilAnBaueinheit(node)"
      );
      let idZielBaueinheit = node._id;
      // Zunächst muss die Id des Baueigenschaftsprofils "Baueinheit > Geschoss" ermittelt werden per API mit Query:
      let apiRoute =
        process.env.API +
        "/Baueigenschaftsprofile/Query/" +
        // "?baueigenschaftsProfilBezeichnung=Geschoss"; // ALT
        "?baueigenschaftsProfilBezeichnung=Baueinheit%20>%20Geschoss"; // NEU - #375: Neue Profilbezeichnung!
      this.$axios
        .get(apiRoute)
        .then(baueigenschaftsProfile => {
          // ACHTUNG: Es kommt bei Erfolg ein Objekt, das einen Unter-Array data der Länge 0 enthält, zurück!
          // console.log("baueigenschaftsProfile: ", baueigenschaftsProfile);
          let idGeschossBaueigenschaftsProfil =
            baueigenschaftsProfile.data[0]._id; // Id des gesuchten Baueigenschaftsprofils
          console.log(
            "Vor API Request für Profilaktivierung - idGeschossBaueigenschaftsProfil: ",
            idGeschossBaueigenschaftsProfil
          );
          // Nun damit die Profilaktivierung veranlassen per API:
          apiRoute =
            process.env.API +
            "/Baueinheiten/" +
            idZielBaueinheit +
            "/Baueigenschaftsprofil/Aktivierungszustand";
          this.$axios
            .put(apiRoute, {
              // Body - in req.body.idProfil wird die Id des zu aktivierenden Baueigenschaftsprofils übergeben
              idProfil: idGeschossBaueigenschaftsProfil,
              aktivierenNichtDeaktivieren: true,
              vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore.state
                .einstellungenBenutzer.vorgabeWerteUeberschreibenVorhandeneWerte // #357
            })
            .then(response => {
              console.log(
                "Erfolg in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Geschoss'"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_ERFOLG
              );
              // Nun noch den Tree refreshen:
              // NEU: Für #505 mit neuem optionalem Boolean-Parameter, welcher, wenn true, das Unter-Tab für das Tab "Baueigenschaftsprofilformulare" neu bestimmt
              //      nach einer Profilaktivierung (wie hier in diesem Fall)
              this.reloadTreeWrapper("Nicht optimiert", {
                bestimmeNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung: true
              });
            })
            .catch(error => {
              console.log(
                "Error in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Geschoss' - error: ",
                error
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_FEHLER
              );
              // Nun noch den Tree refreshen:
              this.reloadTreeWrapper("Nicht optimiert");
            });
        })
        .catch(error => {
          console.log(
            "Error in API Response für Query Baueigenschaftsprofil 'Baueinheit > Geschoss' - error: ",
            error
          );
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_LESEN_FEHLER
          );
          // Nun noch den Tree refreshen:
          this.reloadTreeWrapper("Nicht optimiert");
        });
    },

    aktiviereRaumBaueigenschaftsProfilAnBaueinheit(node) {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - aktiviert das Baueigenschaftsprofil "Baueinheit > Raum" an dem durch den Parameter node spezifizierten
      // Knoten (Ziel-Baueinheit) im Bauvorhabenbaum
      // HINWEIS: Es ist schon vorher per Methode RaumBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten(node)
      // ermittelt worden, dass das betreffende Baueigenschaftsprofil NCIHT aktiviert ist an der Baueinheit
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In aktiviereRaumBaueigenschaftsProfilAnBaueinheit(node)");
      let idZielBaueinheit = node._id;
      // Zunächst muss die Id des Baueigenschaftsprofils "Baueinheit > Raum" ermittelt werden per API mit Query:
      let apiRoute =
        process.env.API +
        "/Baueigenschaftsprofile/Query/" +
        // "?baueigenschaftsProfilBezeichnung=Raum"; // ALT
        "?baueigenschaftsProfilBezeichnung=Baueinheit%20>%20Raum"; // NEU - #375: Neue Profilbezeichnung!
      this.$axios
        .get(apiRoute)
        .then(baueigenschaftsProfile => {
          // ACHTUNG: Es kommt bei Erfolg ein Objekt, das einen Unter-Array data der Länge 0 enthält, zurück!
          // console.log("baueigenschaftsProfile: ", baueigenschaftsProfile);
          let idRaumBaueigenschaftsProfil = baueigenschaftsProfile.data[0]._id; // Id des gesuchten Baueigenschaftsprofils
          console.log(
            "Vor API Request für Profilaktivierung - idRaumBaueigenschaftsProfil: ",
            idRaumBaueigenschaftsProfil
          );
          // Nun damit die Profilaktivierung veranlassen per API:
          apiRoute =
            process.env.API +
            "/Baueinheiten/" +
            idZielBaueinheit +
            "/Baueigenschaftsprofil/Aktivierungszustand";
          this.$axios
            .put(apiRoute, {
              // Body - in req.body.idProfil wird die Id des zu aktivierenden Baueigenschaftsprofils übergeben
              idProfil: idRaumBaueigenschaftsProfil,
              aktivierenNichtDeaktivieren: true,
              vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore.state
                .einstellungenBenutzer.vorgabeWerteUeberschreibenVorhandeneWerte // #357
            })
            .then(response => {
              console.log(
                "Erfolg in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Raum'"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_ERFOLG
              );
              // Nun noch den Tree refreshen:
              // NEU: Für #505 mit neuem optionalem Boolean-Parameter, welcher, wenn true, das Unter-Tab für das Tab "Baueigenschaftsprofilformulare" neu bestimmt
              //      nach einer Profilaktivierung (wie hier in diesem Fall)
              this.reloadTreeWrapper("Nicht optimiert", {
                bestimmeNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung: true
              });
            })
            .catch(error => {
              console.log(
                "Error in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Raum' - error: ",
                error
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_FEHLER
              );
              // Nun noch den Tree refreshen:
              this.reloadTreeWrapper("Nicht optimiert");
            });
        })
        .catch(error => {
          console.log(
            "Error in API Response für Query Baueigenschaftsprofil 'Baueinheit > Raum' - error: ",
            error
          );
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_LESEN_FEHLER
          );
          // Nun noch den Tree refreshen:
          this.reloadTreeWrapper("Nicht optimiert");
        });
    },

    aktiviereBodenaufbauBaueigenschaftsProfilAnBaueinheit(node) {
      //--------------------------------------------------------------------------------------------------------------------
      // NEU: Methode - aktiviert das Baueigenschaftsprofil "Baueinheit > Bodenaufbau" an dem durch den Parameter node spezifizierten
      // Knoten (Ziel-Baueinheit) im Bauvorhabenbaum
      // HINWEIS: Es ist schon vorher per Methode BodenaufbauBaueigenschaftsProfilIstAktiviertAnNodeTreeBaueinheiten(node)
      // ermittelt worden, dass das betreffende Baueigenschaftsprofil NCIHT aktiviert ist an der Baueinheit
      //--------------------------------------------------------------------------------------------------------------------
      console.log(
        "In aktiviereBodenaufbauBaueigenschaftsProfilAnBaueinheit(node)"
      );
      let idZielBaueinheit = node._id;
      // Zunächst muss die Id des Baueigenschaftsprofils "Baueinheit > Bodenaufbau" ermittelt werden per API mit Query:
      let apiRoute =
        process.env.API +
        "/Baueigenschaftsprofile/Query/" +
        // "?baueigenschaftsProfilBezeichnung=Bodenaufbau"; // ALT
        "?baueigenschaftsProfilBezeichnung=Baueinheit%20>%20Bodenaufbau"; // NEU - #375: Neue Profilbezeichnung!
      this.$axios
        .get(apiRoute)
        .then(baueigenschaftsProfile => {
          // ACHTUNG: Es kommt bei Erfolg ein Objekt, das einen Unter-Array data der Länge 0 enthält, zurück!
          // console.log("baueigenschaftsProfile: ", baueigenschaftsProfile);
          let idBodenaufbauBaueigenschaftsProfil =
            baueigenschaftsProfile.data[0]._id; // Id des gesuchten Baueigenschaftsprofils
          console.log(
            "Vor API Request für Profilaktivierung - idBodenaufbauBaueigenschaftsProfil: ",
            idBodenaufbauBaueigenschaftsProfil
          );
          // Nun damit die Profilaktivierung veranlassen per API:
          apiRoute =
            process.env.API +
            "/Baueinheiten/" +
            idZielBaueinheit +
            "/Baueigenschaftsprofil/Aktivierungszustand";
          this.$axios
            .put(apiRoute, {
              // Body - in req.body.idProfil wird die Id des zu aktivierenden Baueigenschaftsprofils übergeben
              idProfil: idBodenaufbauBaueigenschaftsProfil,
              aktivierenNichtDeaktivieren: true,
              vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore.state
                .einstellungenBenutzer.vorgabeWerteUeberschreibenVorhandeneWerte // #357
            })
            .then(response => {
              console.log(
                "Erfolg in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Bodenaufbau'"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_ERFOLG
              );
              // Nun noch den Tree refreshen:
              // NEU: Für #505 mit neuem optionalem Boolean-Parameter, welcher, wenn true, das Unter-Tab für das Tab "Baueigenschaftsprofilformulare" neu bestimmt
              //      nach einer Profilaktivierung (wie hier in diesem Fall)
              this.reloadTreeWrapper("Nicht optimiert", {
                bestimmeNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung: true
              });
            })
            .catch(error => {
              console.log(
                "Error in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Bodenaufbau' - error: ",
                error
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_FEHLER
              );
              // Nun noch den Tree refreshen:
              this.reloadTreeWrapper("Nicht optimiert");
            });
        })
        .catch(error => {
          console.log(
            "Error in API Response für Query Baueigenschaftsprofil 'Baueinheit > Bodenaufbau' - error: ",
            error
          );
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_LESEN_FEHLER
          );
          // Nun noch den Tree refreshen:
          this.reloadTreeWrapper("Nicht optimiert");
        });
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Methoden createChildBaueinheitMitXYZProfilAktivierung():

    createChildBaueinheitMitBauvorhabenProfilAktivierung() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - erstellt einen Kindknoten des ausgewählten Knotens am Backend mit anschließender Aktivierung des
      // Baueigenschaftsprofils "Baueinheit > Bauvorhaben" an diesem Kindkonten und fügt ihn anschließend den Daten des
      // QTree hinzu. Anschließend wird der Tree noch ausgeklappt.
      // NEU: Ausklappen des Trees nach asynchronem await refreshTreeBaueinheiten() mit setExpanded(node, true)
      // erst möglich ist, wenn der Knoten geladen wurde
      // TODO: Entweder Validation enforcen oder Länge <= 200 abprüfen vor Create!!
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In createChildBaueinheitMitBauvorhabenProfilAktivierung()");
      console.log(
        "bezeichnungNeueBaueinheit: ",
        this.bezeichnungNeueBaueinheit
      );
      if (
        this.selectedKeyTreeBaueinheiten != null &&
        this.bezeichnungNeueBaueinheit != null &&
        this.bezeichnungNeueBaueinheit !== ""
      ) {
        // NEU - um Konflikte mit Aktionen für markierte Zweige zu vermeiden:
        this.idWurzelZuBewegenderZweig = null;
        //--------------------------------------------------------------------------------------------------------
        // NEU: Zusätzliches Body-Feld benutzerKennungenAutoren, dieses erbt ggf. Autoren vom Elternknoten
        //      nach folgender Logik:
        // Initialisiere die Autoren am neuen Kindknoten mit den bisherigen Autoren am
        // vorhandenen Elternknoten des neuen Kindknotens (Feld benutzerKennungenAutoren)
        // ACHTUNG: Dieses Feld am Elternknoten kann auch ein leerer Array sein, z.B. in Bauvorlagen oder
        // bei Erstanlage eines neuen Bauvorhabens oben im Baum
        // Füge, wenn angemeldeter Benutzer Mitarbeiter ist und nicht schon als Autor im Array-Feld benutzerKennungenAutoren
        // des Elternknotens enthalten ist, diesen als zusätzlichen Autor am Kindknoten hinzu:
        let benutzerKennungenAutorenNeueBaueinheit = this
          .selectedNodeTreeBaueinheiten.benutzerKennungenAutoren;
        if (
          this.localStore.state.anmeldeDatenBenutzer.benutzerRolle ===
          "Mitarbeiter"
        ) {
          // Füge ggf. den angemeldeten Benutzer als Autor hinzu, falls nicht schon enthalten:
          if (
            !benutzerKennungenAutorenNeueBaueinheit.includes(
              // Funktioniert auch bei leerem Array-Feld!
              this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
            )
          ) {
            // Den angemeldeten Benutzer dem Array als neuen Autor hinzufügen:
            benutzerKennungenAutorenNeueBaueinheit.push(
              this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
            );
          } // else // Nichts zu tun
        } // else // Redakteur oder Administrator
        // Array der Autoren übernehmen vom Elternknoten, bereits oben so initialisiert
        // ACHTUNG: Es wird bei Redakteuren und Administratoren dem Array-Feld benutzerKennungenAutoren
        // NICHT die benutzerKennung des angemeldeten Benutzers hinzugefügt!
        // Dies erlaubt die Hinzufügung von Kindknoten mit leerem Array-Feld durch Redakteure und Administratoren.
        // Das können Strukturierungsknoten oben im Baum sein oder Knoten im Bauvorlagenunterbaum.
        // Fügt ein Redakteur oder Administrator in einem Bauvorhaben mit nicht leerem Array-Feld einen Kindknoten
        // ein, so wird mit obiger Logik dessen ArrayFeld benutzerKennungenAutoren vom Elternknoten unverändert übernommen.
        //--------------------------------------------------------------------------------------------------------
        let apiRoute =
          process.env.API + "/Baueinheiten/" + this.selectedKeyTreeBaueinheiten;
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBauvorlagen'");
        this.$socket.emit("leaveRoom", {
          room: "roomBauvorlagen"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBauvorlagen'");
        //=========================================================================================================================================
        this.$axios
          .post(apiRoute, {
            // Body - in req.body.baueinheitsBezeichnungKindKnoten wird die Bezeichnung des neuen Kindknotens übergeben:
            baueinheitsBezeichnungKindKnoten: this.bezeichnungNeueBaueinheit,
            benutzerKennungenAutorenKindKnoten: benutzerKennungenAutorenNeueBaueinheit // NEU
          })
          .then(response => {
            // ACHTUNG: Es kommt bei Erfolg ein Objekt, das ein Unterobjekt data, das u.a. die _id enthält, zurück!
            // console.log("Response aus Post Request: ", response);
            // tmp wird aktuell nicht mehr benutzt, daher disabeld:
            /*
            var tmp = this.$refs.treeBaueinheiten.getNodeByKey(
              this.selectedKeyTreeBaueinheiten
            );
            */
            // NEU: Benutzernachricht im Footer per global Store und Enums:
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_ERFOLG
            );
            //------------------------------------------------------------------------
            // NEU: Zusätzlich Baueigenschaftsprofil "Baueinheit > Bauvorhaben" aktivieren per API-Call
            // response._id enthält die Id der neue erzeugten Kindbaueinheit!
            console.log(
              "Nach API Request für Erzeugung Kindbaueinheit - Id der erzeugten Kindbaueinheit: ",
              response.data._id
            );
            //------------------------------------------------------------------------------------------------------------------------
            // NEU: #332 - Performance-Optimierung beim Refresh
            // NEU: Den neu angelegten Knoten mit auf den
            // Array der children pushen, um zu erreichen, um diesen mit der neuen, optimierten Refresh-Methode auch mit zu refreshen
            // Dann weiter unten die neue Refresh-Methode aufrufen ("Optimiert") statt der alten ("Nicht optimiert")
            // ACHTUNG: Wenn der ausgewählte Knoten ein Blattknoten ist oder noch nicht lazy loaded wurde, ist das Feld children
            // nicht definiert, daher wird es in diesem Fall oben neu eingefügt als leerer Array.
            let neuAngelegterKnoten = response.data;
            let idNeueKindBaueinheit = neuAngelegterKnoten._id;
            if (this.selectedNodeTreeBaueinheiten.children === undefined) {
              this.selectedNodeTreeBaueinheiten.children = [];
            }
            this.selectedNodeTreeBaueinheiten.children.push(
              neuAngelegterKnoten
            );
            //-------------------------------------------------------------------------------------------------------------------------
            // Nun muss die Id des betreffenden Baueigenschaftsprofils ermittelt werden per API mit Query:
            apiRoute =
              process.env.API +
              "/Baueigenschaftsprofile/Query/" +
              // "?baueigenschaftsProfilBezeichnung=Bauvorhaben"; // ALT
              "?baueigenschaftsProfilBezeichnung=Baueinheit%20>%20Bauvorhaben"; // NEU - #375: Neue Profilbezeichnung!
            this.$axios
              .get(apiRoute)
              .then(baueigenschaftsProfile => {
                // ACHTUNG: Es kommt bei Erfolg ein Objekt, das einen Unter-Array data der Länge 0 enthält, zurück!
                // console.log("baueigenschaftsProfile: ", baueigenschaftsProfile);
                let idBauvorhabenBaueigenschaftsProfil =
                  baueigenschaftsProfile.data[0]._id; // Id des gesuchten Baueigenschaftsprofils
                console.log(
                  "Vor API Request für Profilaktivierung - idBauvorhabenBaueigenschaftsProfil: ",
                  idBauvorhabenBaueigenschaftsProfil
                );
                // Nun damit die Profilaktivierung veranlassen per API:
                apiRoute =
                  process.env.API +
                  "/Baueinheiten/" +
                  idNeueKindBaueinheit +
                  "/Baueigenschaftsprofil/Aktivierungszustand";
                this.$axios
                  .put(apiRoute, {
                    // Body - in req.body.idProfil wird die Id des zu aktivierenden Baueigenschaftsprofils übergeben
                    idProfil: idBauvorhabenBaueigenschaftsProfil,
                    aktivierenNichtDeaktivieren: true,
                    vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore
                      .state.einstellungenBenutzer
                      .vorgabeWerteUeberschreibenVorhandeneWerte // #357
                  })
                  .then(async response => {
                    // async wegen await unten
                    console.log(
                      "Erfolg in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Bauvorhaben'"
                    );
                    //---------------------------------------------------------------------------------------------------------
                    // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                    //      da der Refresh asynchron abläuft, ist await notwendig
                    console.log("Vor await reloadTreeWrapper('Optimiert')");
                    await this.reloadTreeWrapper("Optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                    console.log("Nach await reloadTreeWrapper('Optimiert')");
                    console.log(
                      "selectedNodeTreeBaueinheiten: ",
                      this.selectedNodeTreeBaueinheiten
                    );
                    // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                    this.$refs.treeBaueinheiten.setExpanded(
                      this.selectedKeyTreeBaueinheiten,
                      true
                    );
                    this.createNewBaueinheitMitBauvorhabenProfilAktivierungDialog = false;
                    this.bezeichnungNeueBaueinheit = null;
                    // NEU: Benutzernachricht im Footer per global Store und Enums:
                    globalStore.showBenutzerNachricht(
                      BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_ERFOLG
                    );
                    //----------------------------------------------------------------------------------------------------------
                  })
                  .catch(async error => {
                    // async wegen await unten
                    console.log(
                      "Error in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Bauvorhaben' - error: ",
                      error
                    );
                    // Nun noch den Tree refreshen:
                    //---------------------------------------------------------------------------------------------------------
                    // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                    //      da der Refresh asynchron abläuft, ist await notwendig
                    console.log(
                      "Vor await reloadTreeWrapper('Nicht optimiert')"
                    );
                    await this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                    console.log(
                      "Nach await reloadTreeWrapper('Nicht optimiert')"
                    );
                    console.log(
                      "selectedNodeTreeBaueinheiten: ",
                      this.selectedNodeTreeBaueinheiten
                    );
                    // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                    this.$refs.treeBaueinheiten.setExpanded(
                      this.selectedKeyTreeBaueinheiten,
                      true
                    );
                    this.createNewBaueinheitMitBauvorhabenProfilAktivierungDialog = false;
                    this.bezeichnungNeueBaueinheit = null;
                    // NEU: Benutzernachricht im Footer per global Store und Enums:
                    globalStore.showBenutzerNachricht(
                      BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_FEHLER
                    );
                    //----------------------------------------------------------------------------------------------------------
                  });
              })
              .catch(async error => {
                // async wegen await unten
                console.log(
                  "Error in API Response für Query Baueigenschaftsprofil 'Baueinheit > Bauvorhaben' - error: ",
                  error
                );
                // Nun noch den Tree refreshen:
                //---------------------------------------------------------------------------------------------------------
                // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                //      da der Refresh asynchron abläuft, ist await notwendig
                console.log("Vor await reloadTreeWrapper('Nicht optimiert')");
                await this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                console.log("Nach await reloadTreeWrapper('Nicht optimiert')");
                console.log(
                  "selectedNodeTreeBaueinheiten: ",
                  this.selectedNodeTreeBaueinheiten
                );
                // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                this.$refs.treeBaueinheiten.setExpanded(
                  this.selectedKeyTreeBaueinheiten,
                  true
                );
                this.createNewBaueinheitMitBauvorhabenProfilAktivierungDialog = false;
                this.bezeichnungNeueBaueinheit = null;
                // NEU: Benutzernachricht im Footer per global Store und Enums:
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_LESEN_FEHLER
                );
                //----------------------------------------------------------------------------------------------------------
              });
            //----------------------------------------------------------------------------------------------------------
            // Ältere Fehlversuche - Code wurde nur im Erfolgsfall verwendet, disabled:
            /*
            this.$set(tmp, "baumKnotenTyp", response.data.baumKnotenTyp);
            this.$set(tmp, "children", response.data.children);
            // tmp = response.data
            this.$refs.treeBaueinheiten.setExpanded(
              this.selectedKeyTreeBaueinheiten,
              false
            );
            */
            /*
            tmp.children = [];
            console.log("lazy: ", ths.$refs.treeBaueinheiten.lazy);
            // lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"}
            // HINWEIS: Es handelt sich bei lazy um ein JS Objekt, keinen Array
            // Zugriff auf ein Element darin mit this.$refs.treeBaueinheiten.lazy[id]
            // Resetten eines Elements darin mit delete this.$refs.treeBaueinheiten.lazy[id]
            delete this.$refs.treeBaueinheiten.lazy[tmp._id]; // Resetten des Eintrags im Objekt lazy
            tmp.lazy = true;
            // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
            //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
            //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
            // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            */
            // this.$refs.treeBaueinheiten.setExpanded(tmp._id, true);
            /*
            this.selectedNodeTreeBaueinheiten.children.push({
              _id: response.data._id,
              baueinheitsBezeichnung: response.data.baueinheitsBezeichnung,
              baueigenschaften:                      // ACHTUNG: Überprüfen!
                response.data.baueigenschaften,      // ACHTUNG: Überprüfen!
              lazy: true
            });
            */
          })
          .catch(error => {
            console.log("Error in createChildBaueinheit - error: ", error);
            if (error.response.status === 403) {
              console.log(
                "Error 403 - Geschwisterbaueinheit mit dieser Bezeichnung existiert bereits"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
              );
            } else {
              // Status 500
              // Logging ist bereits druch Axios Interceptor erfolgt!
              // console.log("Error status 500 bei CreateChildBaueinheit")
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_FEHLER
              );
            }
            this.createNewBaueinheitDialog = false;
          });
      } else {
        console.log("Fehlende Bezeichnung für Neuanlage Kindbaueinheit!");
        globalStore.showBenutzerNachricht(
          BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_WARNUNG_BEZEICHNUNG_EINGEBEN
        );
      }
    },

    createChildBaueinheitMitStandortProfilAktivierung() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - erstellt einen Kindknoten des ausgewählten Knotens am Backend mit anschließender Aktivierung des
      // Baueigenschaftsprofils "Baueinheit > Standort" an diesem Kindkonten und fügt ihn anschließend den Daten des
      // QTree hinzu. Anschließend wird der Tree noch ausgeklappt.
      // NEU: Ausklappen des Trees nach asynchronem await refreshTreeBaueinheiten() mit setExpanded(node, true)
      // erst möglich ist, wenn der Knoten geladen wurde
      // TODO: Entweder Validation enforcen oder Länge <= 200 abprüfen vor Create!!
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In createChildBaueinheitMitStandortProfilAktivierung()");
      console.log(
        "bezeichnungNeueBaueinheit: ",
        this.bezeichnungNeueBaueinheit
      );
      if (
        this.selectedKeyTreeBaueinheiten != null &&
        this.bezeichnungNeueBaueinheit != null &&
        this.bezeichnungNeueBaueinheit !== ""
      ) {
        // NEU - um Konflikte mit Aktionen für markierte Zweige zu vermeiden:
        this.idWurzelZuBewegenderZweig = null;
        //--------------------------------------------------------------------------------------------------------
        // NEU: Zusätzliches Body-Feld benutzerKennungenAutoren, dieses erbt ggf. Autoren vom Elternknoten
        //      nach folgender Logik:
        // Initialisiere die Autoren am neuen Kindknoten mit den bisherigen Autoren am
        // vorhandenen Elternknoten des neuen Kindknotens (Feld benutzerKennungenAutoren)
        // ACHTUNG: Dieses Feld am Elternknoten kann auch ein leerer Array sein, z.B. in Bauvorlagen oder
        // bei Erstanlage eines neuen Standorts oben im Baum
        // Füge, wenn angemeldeter Benutzer Mitarbeiter ist und nicht schon als Autor im Array-Feld benutzerKennungenAutoren
        // des Elternknotens enthalten ist, diesen als zusätzlichen Autor am Kindknoten hinzu:
        let benutzerKennungenAutorenNeueBaueinheit = this
          .selectedNodeTreeBaueinheiten.benutzerKennungenAutoren;
        if (
          this.localStore.state.anmeldeDatenBenutzer.benutzerRolle ===
          "Mitarbeiter"
        ) {
          // Füge ggf. den angemeldeten Benutzer als Autor hinzu, falls nicht schon enthalten:
          if (
            !benutzerKennungenAutorenNeueBaueinheit.includes(
              // Funktioniert auch bei leerem Array-Feld!
              this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
            )
          ) {
            // Den angemeldeten Benutzer dem Array als neuen Autor hinzufügen:
            benutzerKennungenAutorenNeueBaueinheit.push(
              this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
            );
          } // else // Nichts zu tun
        } // else // Redakteur oder Administrator
        // Array der Autoren übernehmen vom Elternknoten, bereits oben so initialisiert
        // ACHTUNG: Es wird bei Redakteuren und Administratoren dem Array-Feld benutzerKennungenAutoren
        // NICHT die benutzerKennung des angemeldeten Benutzers hinzugefügt!
        // Dies erlaubt die Hinzufügung von Kindknoten mit leerem Array-Feld durch Redakteure und Administratoren.
        // Das können Strukturierungsknoten oben im Baum sein oder Knoten im Bauvorlagenunterbaum.
        // Fügt ein Redakteur oder Administrator in einem Standort mit nicht leerem Array-Feld einen Kindknoten
        // ein, so wird mit obiger Logik dessen ArrayFeld benutzerKennungenAutoren vom Elternknoten unverändert übernommen.
        //--------------------------------------------------------------------------------------------------------
        let apiRoute =
          process.env.API + "/Baueinheiten/" + this.selectedKeyTreeBaueinheiten;
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBauvorlagen'");
        this.$socket.emit("leaveRoom", {
          room: "roomBauvorlagen"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBauvorlagen'");
        //=========================================================================================================================================
        this.$axios
          .post(apiRoute, {
            // Body - in req.body.baueinheitsBezeichnungKindKnoten wird die Bezeichnung des neuen Kindknotens übergeben:
            baueinheitsBezeichnungKindKnoten: this.bezeichnungNeueBaueinheit,
            benutzerKennungenAutorenKindKnoten: benutzerKennungenAutorenNeueBaueinheit // NEU
          })
          .then(response => {
            // ACHTUNG: Es kommt bei Erfolg ein Objekt, das ein Unterobjekt data, das u.a. die _id enthält, zurück!
            // console.log("Response aus Post Request: ", response);
            // tmp wird aktuell nicht mehr benutzt, daher disabeld:
            /*
            var tmp = this.$refs.treeBaueinheiten.getNodeByKey(
              this.selectedKeyTreeBaueinheiten
            );
            */
            // NEU: Benutzernachricht im Footer per global Store und Enums:
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_ERFOLG
            );
            //------------------------------------------------------------------------
            // NEU: Zusätzlich Baueigenschaftsprofil "Baueinheit > Standort" aktivieren per API-Call
            // response._id enthält die Id der neue erzeugten Kindbaueinheit!
            console.log(
              "Nach API Request für Erzeugung Kindbaueinheit - Id der erzeugten Kindbaueinheit: ",
              response.data._id
            );
            //------------------------------------------------------------------------------------------------------------------------
            // NEU: #332 - Performance-Optimierung beim Refresh
            // NEU: Den neu angelegten Knoten mit auf den
            // Array der children pushen, um zu erreichen, um diesen mit der neuen, optimierten Refresh-Methode auch mit zu refreshen
            // Dann weiter unten die neue Refresh-Methode aufrufen ("Optimiert") statt der alten ("Nicht optimiert")
            // ACHTUNG: Wenn der ausgewählte Knoten ein Blattknoten ist oder noch nicht lazy loaded wurde, ist das Feld children
            // nicht definiert, daher wird es in diesem Fall oben neu eingefügt als leerer Array.
            let neuAngelegterKnoten = response.data;
            let idNeueKindBaueinheit = neuAngelegterKnoten._id;
            if (this.selectedNodeTreeBaueinheiten.children === undefined) {
              this.selectedNodeTreeBaueinheiten.children = [];
            }
            this.selectedNodeTreeBaueinheiten.children.push(
              neuAngelegterKnoten
            );
            //-------------------------------------------------------------------------------------------------------------------------
            // Nun muss die Id des betreffenden Baueigenschaftsprofils ermittelt werden per API mit Query:
            apiRoute =
              process.env.API +
              "/Baueigenschaftsprofile/Query/" +
              // "?baueigenschaftsProfilBezeichnung=Standort"; // ALT
              "?baueigenschaftsProfilBezeichnung=Baueinheit%20>%20Standort"; // NEU - #375: Neue Profilbezeichnung!
            this.$axios
              .get(apiRoute)
              .then(baueigenschaftsProfile => {
                // ACHTUNG: Es kommt bei Erfolg ein Objekt, das einen Unter-Array data der Länge 0 enthält, zurück!
                // console.log("baueigenschaftsProfile: ", baueigenschaftsProfile);
                let idStandortBaueigenschaftsProfil =
                  baueigenschaftsProfile.data[0]._id; // Id des gesuchten Baueigenschaftsprofils
                console.log(
                  "Vor API Request für Profilaktivierung - idStandortBaueigenschaftsProfil: ",
                  idStandortBaueigenschaftsProfil
                );
                // Nun damit die Profilaktivierung veranlassen per API:
                apiRoute =
                  process.env.API +
                  "/Baueinheiten/" +
                  idNeueKindBaueinheit +
                  "/Baueigenschaftsprofil/Aktivierungszustand";
                this.$axios
                  .put(apiRoute, {
                    // Body - in req.body.idProfil wird die Id des zu aktivierenden Baueigenschaftsprofils übergeben
                    idProfil: idStandortBaueigenschaftsProfil,
                    aktivierenNichtDeaktivieren: true,
                    vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore
                      .state.einstellungenBenutzer
                      .vorgabeWerteUeberschreibenVorhandeneWerte // #357
                  })
                  .then(async response => {
                    // async wegen await unten
                    console.log(
                      "Erfolg in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Standort'"
                    );
                    // Nun noch den Tree refreshen:
                    //---------------------------------------------------------------------------------------------------------
                    // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                    //      da der Refresh asynchron abläuft, ist await notwendig
                    console.log("Vor await reloadTreeWrapper('Optimiert')");
                    await this.reloadTreeWrapper("Optimiert", {
                      // NEU: #332
                      bestimmeNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung: true
                    });
                    console.log("Nach await reloadTreeWrapper('Optimiert')");
                    console.log(
                      "selectedNodeTreeBaueinheiten: ",
                      this.selectedNodeTreeBaueinheiten
                    );
                    // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                    this.$refs.treeBaueinheiten.setExpanded(
                      this.selectedKeyTreeBaueinheiten,
                      true
                    );
                    this.createNewBaueinheitMitStandortProfilAktivierungDialog = false;
                    this.bezeichnungNeueBaueinheit = null;
                    // NEU: Benutzernachricht im Footer per global Store und Enums:
                    globalStore.showBenutzerNachricht(
                      BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_ERFOLG
                    );
                    //----------------------------------------------------------------------------------------------------------
                  })
                  .catch(async error => {
                    // async wegen await unten
                    console.log(
                      "Error in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Standort' - error: ",
                      error
                    );
                    // Nun noch den Tree refreshen:
                    //---------------------------------------------------------------------------------------------------------
                    // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                    //      da der Refresh asynchron abläuft, ist await notwendig
                    console.log(
                      "Vor await reloadTreeWrapper('Nicht optimiert')"
                    );
                    await this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                    console.log(
                      "Nach await reloadTreeWrapper('Nicht optimiert')"
                    );
                    console.log(
                      "selectedNodeTreeBaueinheiten: ",
                      this.selectedNodeTreeBaueinheiten
                    );
                    // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                    this.$refs.treeBaueinheiten.setExpanded(
                      this.selectedKeyTreeBaueinheiten,
                      true
                    );
                    this.createNewBaueinheitMitStandortProfilAktivierungDialog = false;
                    this.bezeichnungNeueBaueinheit = null;
                    // NEU: Benutzernachricht im Footer per global Store und Enums:
                    globalStore.showBenutzerNachricht(
                      BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_FEHLER
                    );
                    //----------------------------------------------------------------------------------------------------------
                  });
              })
              .catch(async error => {
                console.log(
                  "Error in API Response für Query Baueigenschaftsprofil 'Baueinheit > Standort' - error: ",
                  error
                );
                // Nun noch den Tree refreshen:
                //---------------------------------------------------------------------------------------------------------
                // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                //      da der Refresh asynchron abläuft, ist await notwendig
                console.log("Vor await reloadTreeWrapper('Nicht optimiert')");
                await this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                console.log("Nach await reloadTreeWrapper('Nicht optimiert')");
                console.log(
                  "selectedNodeTreeBaueinheiten: ",
                  this.selectedNodeTreeBaueinheiten
                );
                // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                this.$refs.treeBaueinheiten.setExpanded(
                  this.selectedKeyTreeBaueinheiten,
                  true
                );
                this.createNewBaueinheitMitStandortProfilAktivierungDialog = false;
                this.bezeichnungNeueBaueinheit = null;
                // NEU: Benutzernachricht im Footer per global Store und Enums:
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_LESEN_FEHLER
                );
                //----------------------------------------------------------------------------------------------------------
              });
            //------------------------------------------------------------------------
            // Ältere Fehlversuche - Code wurde nur im Erfolgsfall verwendet, disabled:
            /*
            this.$set(tmp, "baumKnotenTyp", response.data.baumKnotenTyp);
            this.$set(tmp, "children", response.data.children);
            // tmp = response.data
            this.$refs.treeBaueinheiten.setExpanded(
              this.selectedKeyTreeBaueinheiten,
              false
            );
            */
            /*
            tmp.children = [];
            console.log("lazy: ", ths.$refs.treeBaueinheiten.lazy);
            // lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"}
            // HINWEIS: Es handelt sich bei lazy um ein JS Objekt, keinen Array
            // Zugriff auf ein Element darin mit this.$refs.treeBaueinheiten.lazy[id]
            // Resetten eines Elements darin mit delete this.$refs.treeBaueinheiten.lazy[id]
            delete this.$refs.treeBaueinheiten.lazy[tmp._id]; // Resetten des Eintrags im Objekt lazy
            tmp.lazy = true;
            // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
            //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
            //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
            // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            */
            // this.$refs.treeBaueinheiten.setExpanded(tmp._id, true);
            /*
            this.selectedNodeTreeBaueinheiten.children.push({
              _id: response.data._id,
              baueinheitsBezeichnung: response.data.baueinheitsBezeichnung,
              baueigenschaften:                      // ACHTUNG: Überprüfen!
                response.data.baueigenschaften,      // ACHTUNG: Überprüfen!
              lazy: true
            });
            */
          })
          .catch(error => {
            console.log("Error in createChildBaueinheit - error: ", error);
            if (error.response.status === 403) {
              console.log(
                "Error 403 - Geschwisterbaueinheit mit dieser Bezeichnung existiert bereits"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
              );
            } else {
              // Status 500
              // Logging ist bereits druch Axios Interceptor erfolgt!
              // console.log("Error status 500 bei CreateChildBaueinheit")
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_FEHLER
              );
            }
            this.createNewBaueinheitDialog = false;
          });
      } else {
        console.log("Fehlende Bezeichnung für Neuanlage Kindbaueinheit!");
        globalStore.showBenutzerNachricht(
          BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_WARNUNG_BEZEICHNUNG_EINGEBEN
        );
      }
    },

    createChildBaueinheitMitGebaeudeProfilAktivierung() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - erstellt einen Kindknoten des ausgewählten Knotens am Backend mit anschließender Aktivierung des
      // Baueigenschaftsprofils "Baueinheit > Gebäude" an diesem Kindkonten und fügt ihn anschließend den Daten des
      // QTree hinzu. Anschließend wird der Tree noch ausgeklappt.
      // NEU: Ausklappen des Trees nach asynchronem await refreshTreeBaueinheiten() mit setExpanded(node, true)
      // erst möglich ist, wenn der Knoten geladen wurde
      // TODO: Entweder Validation enforcen oder Länge <= 200 abprüfen vor Create!!
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In createChildBaueinheitMitGebaeudeProfilAktivierung()");
      console.log(
        "bezeichnungNeueBaueinheit: ",
        this.bezeichnungNeueBaueinheit
      );
      if (
        this.selectedKeyTreeBaueinheiten != null &&
        this.bezeichnungNeueBaueinheit != null &&
        this.bezeichnungNeueBaueinheit !== ""
      ) {
        // NEU - um Konflikte mit Aktionen für markierte Zweige zu vermeiden:
        this.idWurzelZuBewegenderZweig = null;
        //--------------------------------------------------------------------------------------------------------
        // NEU: Zusätzliches Body-Feld benutzerKennungenAutoren, dieses erbt ggf. Autoren vom Elternknoten
        //      nach folgender Logik:
        // Initialisiere die Autoren am neuen Kindknoten mit den bisherigen Autoren am
        // vorhandenen Elternknoten des neuen Kindknotens (Feld benutzerKennungenAutoren)
        // ACHTUNG: Dieses Feld am Elternknoten kann auch ein leerer Array sein, z.B. in Bauvorlagen oder
        // bei Erstanlage eines neuen Gebaeudees oben im Baum
        // Füge, wenn angemeldeter Benutzer Mitarbeiter ist und nicht schon als Autor im Array-Feld benutzerKennungenAutoren
        // des Elternknotens enthalten ist, diesen als zusätzlichen Autor am Kindknoten hinzu:
        let benutzerKennungenAutorenNeueBaueinheit = this
          .selectedNodeTreeBaueinheiten.benutzerKennungenAutoren;
        if (
          this.localStore.state.anmeldeDatenBenutzer.benutzerRolle ===
          "Mitarbeiter"
        ) {
          // Füge ggf. den angemeldeten Benutzer als Autor hinzu, falls nicht schon enthalten:
          if (
            !benutzerKennungenAutorenNeueBaueinheit.includes(
              // Funktioniert auch bei leerem Array-Feld!
              this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
            )
          ) {
            // Den angemeldeten Benutzer dem Array als neuen Autor hinzufügen:
            benutzerKennungenAutorenNeueBaueinheit.push(
              this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
            );
          } // else // Nichts zu tun
        } // else // Redakteur oder Administrator
        // Array der Autoren übernehmen vom Elternknoten, bereits oben so initialisiert
        // ACHTUNG: Es wird bei Redakteuren und Administratoren dem Array-Feld benutzerKennungenAutoren
        // NICHT die benutzerKennung des angemeldeten Benutzers hinzugefügt!
        // Dies erlaubt die Hinzufügung von Kindknoten mit leerem Array-Feld durch Redakteure und Administratoren.
        // Das können Strukturierungsknoten oben im Baum sein oder Knoten im Bauvorlagenunterbaum.
        // Fügt ein Redakteur oder Administrator in einem Gebaeude mit nicht leerem Array-Feld einen Kindknoten
        // ein, so wird mit obiger Logik dessen ArrayFeld benutzerKennungenAutoren vom Elternknoten unverändert übernommen.
        //--------------------------------------------------------------------------------------------------------
        let apiRoute =
          process.env.API + "/Baueinheiten/" + this.selectedKeyTreeBaueinheiten;
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBauvorlagen'");
        this.$socket.emit("leaveRoom", {
          room: "roomBauvorlagen"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBauvorlagen'");
        //=========================================================================================================================================
        this.$axios
          .post(apiRoute, {
            // Body - in req.body.baueinheitsBezeichnungKindKnoten wird die Bezeichnung des neuen Kindknotens übergeben:
            baueinheitsBezeichnungKindKnoten: this.bezeichnungNeueBaueinheit,
            benutzerKennungenAutorenKindKnoten: benutzerKennungenAutorenNeueBaueinheit // NEU
          })
          .then(response => {
            // ACHTUNG: Es kommt bei Erfolg ein Objekt, das ein Unterobjekt data, das u.a. die _id enthält, zurück!
            // console.log("Response aus Post Request: ", response);
            // tmp wird aktuell nicht mehr benutzt, daher disabeld:
            /*
            var tmp = this.$refs.treeBaueinheiten.getNodeByKey(
              this.selectedKeyTreeBaueinheiten
            );
            */
            // NEU: Benutzernachricht im Footer per global Store und Enums:
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_ERFOLG
            );
            //------------------------------------------------------------------------
            // NEU: Zusätzlich Baueigenschaftsprofil "Baueinheit > Gebäude" aktivieren per API-Call
            // response._id enthält die Id der neue erzeugten Kindbaueinheit!
            console.log(
              "Nach API Request für Erzeugung Kindbaueinheit - Id der erzeugten Kindbaueinheit: ",
              response.data._id
            );
            //------------------------------------------------------------------------------------------------------------------------
            // NEU: #332 - Performance-Optimierung beim Refresh
            // NEU: Den neu angelegten Knoten mit auf den
            // Array der children pushen, um zu erreichen, um diesen mit der neuen, optimierten Refresh-Methode auch mit zu refreshen
            // Dann weiter unten die neue Refresh-Methode aufrufen ("Optimiert") statt der alten ("Nicht optimiert")
            // ACHTUNG: Wenn der ausgewählte Knoten ein Blattknoten ist oder noch nicht lazy loaded wurde, ist das Feld children
            // nicht definiert, daher wird es in diesem Fall oben neu eingefügt als leerer Array.
            let neuAngelegterKnoten = response.data;
            let idNeueKindBaueinheit = neuAngelegterKnoten._id;
            if (this.selectedNodeTreeBaueinheiten.children === undefined) {
              this.selectedNodeTreeBaueinheiten.children = [];
            }
            this.selectedNodeTreeBaueinheiten.children.push(
              neuAngelegterKnoten
            );
            //-------------------------------------------------------------------------------------------------------------------------
            // Nun muss die Id des betreffenden Baueigenschaftsprofils ermittelt werden per API mit Query:
            apiRoute =
              process.env.API +
              "/Baueigenschaftsprofile/Query/" +
              // "?baueigenschaftsProfilBezeichnung=Gebäude"; // ALT
              "?baueigenschaftsProfilBezeichnung=Baueinheit%20>%20Gebäude"; // NEU - #375: Neue Profilbezeichnung!
            this.$axios
              .get(apiRoute)
              .then(baueigenschaftsProfile => {
                // ACHTUNG: Es kommt bei Erfolg ein Objekt, das einen Unter-Array data der Länge 0 enthält, zurück!
                // console.log("baueigenschaftsProfile: ", baueigenschaftsProfile);
                let idGebaeudeBaueigenschaftsProfil =
                  baueigenschaftsProfile.data[0]._id; // Id des gesuchten Baueigenschaftsprofils
                console.log(
                  "Vor API Request für Profilaktivierung - idGebaeudeBaueigenschaftsProfil: ",
                  idGebaeudeBaueigenschaftsProfil
                );
                // Nun damit die Profilaktivierung veranlassen per API:
                apiRoute =
                  process.env.API +
                  "/Baueinheiten/" +
                  idNeueKindBaueinheit +
                  "/Baueigenschaftsprofil/Aktivierungszustand";
                this.$axios
                  .put(apiRoute, {
                    // Body - in req.body.idProfil wird die Id des zu aktivierenden Baueigenschaftsprofils übergeben
                    idProfil: idGebaeudeBaueigenschaftsProfil,
                    aktivierenNichtDeaktivieren: true,
                    vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore
                      .state.einstellungenBenutzer
                      .vorgabeWerteUeberschreibenVorhandeneWerte // #357
                  })
                  .then(async response => {
                    // async wegen await unten
                    console.log(
                      "Erfolg in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Gebäude'"
                    );
                    // Nun noch den Tree refreshen:
                    //---------------------------------------------------------------------------------------------------------
                    // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                    //      da der Refresh asynchron abläuft, ist await notwendig
                    console.log("Vor await reloadTreeWrapper('Optimiert')");
                    await this.reloadTreeWrapper("Optimiert"); // NEU: #332. ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                    console.log("Nach await reloadTreeWrapper('Optimiert')");
                    console.log(
                      "selectedNodeTreeBaueinheiten: ",
                      this.selectedNodeTreeBaueinheiten
                    );
                    // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                    this.$refs.treeBaueinheiten.setExpanded(
                      this.selectedKeyTreeBaueinheiten,
                      true
                    );
                    this.createNewBaueinheitMitGebaeudeProfilAktivierungDialog = false;
                    this.bezeichnungNeueBaueinheit = null;
                    // NEU: Benutzernachricht im Footer per global Store und Enums:
                    globalStore.showBenutzerNachricht(
                      BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_ERFOLG
                    );
                    //----------------------------------------------------------------------------------------------------------
                  })
                  .catch(async error => {
                    // async wegen await unten
                    console.log(
                      "Error in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Gebäude' - error: ",
                      error
                    );
                    // Nun noch den Tree refreshen:
                    //---------------------------------------------------------------------------------------------------------
                    // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                    //      da der Refresh asynchron abläuft, ist await notwendig
                    console.log(
                      "Vor await reloadTreeWrapper('Nicht optimiert')"
                    );
                    await this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                    console.log(
                      "Nach await reloadTreeWrapper('Nicht optimiert')"
                    );
                    console.log(
                      "selectedNodeTreeBaueinheiten: ",
                      this.selectedNodeTreeBaueinheiten
                    );
                    // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                    this.$refs.treeBaueinheiten.setExpanded(
                      this.selectedKeyTreeBaueinheiten,
                      true
                    );
                    this.createNewBaueinheitMitGebaeudeProfilAktivierungDialog = false;
                    this.bezeichnungNeueBaueinheit = null;
                    // NEU: Benutzernachricht im Footer per global Store und Enums:
                    globalStore.showBenutzerNachricht(
                      BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_FEHLER
                    );
                    //----------------------------------------------------------------------------------------------------------
                  });
              })
              .catch(async error => {
                // async wegen await unten
                console.log(
                  "Error in API Response für Query Baueigenschaftsprofil 'Baueinheit > Gebäude' - error: ",
                  error
                );
                // Nun noch den Tree refreshen:
                //---------------------------------------------------------------------------------------------------------
                // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                //      da der Refresh asynchron abläuft, ist await notwendig
                console.log("Vor await reloadTreeWrapper('Nicht optimiert')");
                await this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                console.log("Nach await reloadTreeWrapper('Nicht optimiert')");
                console.log(
                  "selectedNodeTreeBaueinheiten: ",
                  this.selectedNodeTreeBaueinheiten
                );
                // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                this.$refs.treeBaueinheiten.setExpanded(
                  this.selectedKeyTreeBaueinheiten,
                  true
                );
                this.createNewBaueinheitMitGebaeudeProfilAktivierungDialog = false;
                this.bezeichnungNeueBaueinheit = null;
                // NEU: Benutzernachricht im Footer per global Store und Enums:
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_LESEN_FEHLER
                );
                //----------------------------------------------------------------------------------------------------------
              });
            //------------------------------------------------------------------------
            // Ältere Fehlversuche - Code wurde nur im Erfolgsfall verwendet, disabled:
            /*
            this.$set(tmp, "baumKnotenTyp", response.data.baumKnotenTyp);
            this.$set(tmp, "children", response.data.children);
            // tmp = response.data
            this.$refs.treeBaueinheiten.setExpanded(
              this.selectedKeyTreeBaueinheiten,
              false
            );
            */
            /*
            tmp.children = [];
            console.log("lazy: ", ths.$refs.treeBaueinheiten.lazy);
            // lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"}
            // HINWEIS: Es handelt sich bei lazy um ein JS Objekt, keinen Array
            // Zugriff auf ein Element darin mit this.$refs.treeBaueinheiten.lazy[id]
            // Resetten eines Elements darin mit delete this.$refs.treeBaueinheiten.lazy[id]
            delete this.$refs.treeBaueinheiten.lazy[tmp._id]; // Resetten des Eintrags im Objekt lazy
            tmp.lazy = true;
            // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
            //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
            //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
            // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            */
            // this.$refs.treeBaueinheiten.setExpanded(tmp._id, true);
            /*
            this.selectedNodeTreeBaueinheiten.children.push({
              _id: response.data._id,
              baueinheitsBezeichnung: response.data.baueinheitsBezeichnung,
              baueigenschaften:                      // ACHTUNG: Überprüfen!
                response.data.baueigenschaften,      // ACHTUNG: Überprüfen!
              lazy: true
            });
            */
          })
          .catch(error => {
            console.log("Error in createChildBaueinheit - error: ", error);
            if (error.response.status === 403) {
              console.log(
                "Error 403 - Geschwisterbaueinheit mit dieser Bezeichnung existiert bereits"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
              );
            } else {
              // Status 500
              // Logging ist bereits druch Axios Interceptor erfolgt!
              // console.log("Error status 500 bei CreateChildBaueinheit")
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_FEHLER
              );
            }
            this.createNewBaueinheitDialog = false;
          });
      } else {
        console.log("Fehlende Bezeichnung für Neuanlage Kindbaueinheit!");
        globalStore.showBenutzerNachricht(
          BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_WARNUNG_BEZEICHNUNG_EINGEBEN
        );
      }
    },

    createChildBaueinheitMitGeschossProfilAktivierung() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - erstellt einen Kindknoten des ausgewählten Knotens am Backend mit anschließender Aktivierung des
      // Baueigenschaftsprofils "Baueinheit > Geschoss" an diesem Kindkonten und fügt ihn anschließend den Daten des
      // QTree hinzu. Anschließend wird der Tree noch ausgeklappt.
      // NEU: Ausklappen des Trees nach asynchronem await refreshTreeBaueinheiten() mit setExpanded(node, true)
      // erst möglich ist, wenn der Knoten geladen wurde
      // TODO: Entweder Validation enforcen oder Länge <= 200 abprüfen vor Create!!
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In createChildBaueinheitMitGeschossProfilAktivierung()");
      console.log(
        "bezeichnungNeueBaueinheit: ",
        this.bezeichnungNeueBaueinheit
      );
      if (
        this.selectedKeyTreeBaueinheiten != null &&
        this.bezeichnungNeueBaueinheit != null &&
        this.bezeichnungNeueBaueinheit !== ""
      ) {
        // NEU - um Konflikte mit Aktionen für markierte Zweige zu vermeiden:
        this.idWurzelZuBewegenderZweig = null;
        //--------------------------------------------------------------------------------------------------------
        // NEU: Zusätzliches Body-Feld benutzerKennungenAutoren, dieses erbt ggf. Autoren vom Elternknoten
        //      nach folgender Logik:
        // Initialisiere die Autoren am neuen Kindknoten mit den bisherigen Autoren am
        // vorhandenen Elternknoten des neuen Kindknotens (Feld benutzerKennungenAutoren)
        // ACHTUNG: Dieses Feld am Elternknoten kann auch ein leerer Array sein, z.B. in Bauvorlagen oder
        // bei Erstanlage eines neuen Geschosses oben im Baum
        // Füge, wenn angemeldeter Benutzer Mitarbeiter ist und nicht schon als Autor im Array-Feld benutzerKennungenAutoren
        // des Elternknotens enthalten ist, diesen als zusätzlichen Autor am Kindknoten hinzu:
        let benutzerKennungenAutorenNeueBaueinheit = this
          .selectedNodeTreeBaueinheiten.benutzerKennungenAutoren;
        if (
          this.localStore.state.anmeldeDatenBenutzer.benutzerRolle ===
          "Mitarbeiter"
        ) {
          // Füge ggf. den angemeldeten Benutzer als Autor hinzu, falls nicht schon enthalten:
          if (
            !benutzerKennungenAutorenNeueBaueinheit.includes(
              // Funktioniert auch bei leerem Array-Feld!
              this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
            )
          ) {
            // Den angemeldeten Benutzer dem Array als neuen Autor hinzufügen:
            benutzerKennungenAutorenNeueBaueinheit.push(
              this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
            );
          } // else // Nichts zu tun
        } // else // Redakteur oder Administrator
        // Array der Autoren übernehmen vom Elternknoten, bereits oben so initialisiert
        // ACHTUNG: Es wird bei Redakteuren und Administratoren dem Array-Feld benutzerKennungenAutoren
        // NICHT die benutzerKennung des angemeldeten Benutzers hinzugefügt!
        // Dies erlaubt die Hinzufügung von Kindknoten mit leerem Array-Feld durch Redakteure und Administratoren.
        // Das können Strukturierungsknoten oben im Baum sein oder Knoten im Bauvorlagenunterbaum.
        // Fügt ein Redakteur oder Administrator in einem Geschoss mit nicht leerem Array-Feld einen Kindknoten
        // ein, so wird mit obiger Logik dessen ArrayFeld benutzerKennungenAutoren vom Elternknoten unverändert übernommen.
        //--------------------------------------------------------------------------------------------------------
        let apiRoute =
          process.env.API + "/Baueinheiten/" + this.selectedKeyTreeBaueinheiten;
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBauvorlagen'");
        this.$socket.emit("leaveRoom", {
          room: "roomBauvorlagen"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBauvorlagen'");
        //=========================================================================================================================================
        this.$axios
          .post(apiRoute, {
            // Body - in req.body.baueinheitsBezeichnungKindKnoten wird die Bezeichnung des neuen Kindknotens übergeben:
            baueinheitsBezeichnungKindKnoten: this.bezeichnungNeueBaueinheit,
            benutzerKennungenAutorenKindKnoten: benutzerKennungenAutorenNeueBaueinheit // NEU
          })
          .then(async response => {
            // async wegen await unten
            // ACHTUNG: Es kommt bei Erfolg ein Objekt, das ein Unterobjekt data, das u.a. die _id enthält, zurück!
            // console.log("Response aus Post Request: ", response);
            // tmp wird aktuell nicht mehr benutzt, daher disabeld:
            /*
            var tmp = this.$refs.treeBaueinheiten.getNodeByKey(
              this.selectedKeyTreeBaueinheiten
            );
            */
            // NEU: Benutzernachricht im Footer per global Store und Enums:
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_ERFOLG
            );
            //------------------------------------------------------------------------
            // NEU: Zusätzlich Baueigenschaftsprofil "Baueinheit > Geschoss" aktivieren per API-Call
            // response._id enthält die Id der neue erzeugten Kindbaueinheit!
            console.log(
              "Nach API Request für Erzeugung Kindbaueinheit - Id der erzeugten Kindbaueinheit: ",
              response.data._id
            );
            //------------------------------------------------------------------------------------------------------------------------
            // NEU: #332 - Performance-Optimierung beim Refresh
            // NEU: Den neu angelegten Knoten mit auf den
            // Array der children pushen, um zu erreichen, um diesen mit der neuen, optimierten Refresh-Methode auch mit zu refreshen
            // Dann weiter unten die neue Refresh-Methode aufrufen ("Optimiert") statt der alten ("Nicht optimiert")
            // ACHTUNG: Wenn der ausgewählte Knoten ein Blattknoten ist oder noch nicht lazy loaded wurde, ist das Feld children
            // nicht definiert, daher wird es in diesem Fall oben neu eingefügt als leerer Array.
            let neuAngelegterKnoten = response.data;
            let idNeueKindBaueinheit = neuAngelegterKnoten._id;
            if (this.selectedNodeTreeBaueinheiten.children === undefined) {
              this.selectedNodeTreeBaueinheiten.children = [];
            }
            this.selectedNodeTreeBaueinheiten.children.push(
              neuAngelegterKnoten
            );
            //-------------------------------------------------------------------------------------------------------------------------
            // Nun muss die Id des betreffenden Baueigenschaftsprofils ermittelt werden per API mit Query:
            apiRoute =
              process.env.API +
              "/Baueigenschaftsprofile/Query/" +
              // "?baueigenschaftsProfilBezeichnung=Geschoss"; // ALT
              "?baueigenschaftsProfilBezeichnung=Baueinheit%20>%20Geschoss"; // NEU - #375: Neue Profilbezeichnung!
            this.$axios
              .get(apiRoute)
              .then(baueigenschaftsProfile => {
                // ACHTUNG: Es kommt bei Erfolg ein Objekt, das einen Unter-Array data der Länge 0 enthält, zurück!
                // console.log("baueigenschaftsProfile: ", baueigenschaftsProfile);
                let idGeschossBaueigenschaftsProfil =
                  baueigenschaftsProfile.data[0]._id; // Id des gesuchten Baueigenschaftsprofils
                console.log(
                  "Vor API Request für Profilaktivierung - idGeschossBaueigenschaftsProfil: ",
                  idGeschossBaueigenschaftsProfil
                );
                // Nun damit die Profilaktivierung veranlassen per API:
                apiRoute =
                  process.env.API +
                  "/Baueinheiten/" +
                  idNeueKindBaueinheit +
                  "/Baueigenschaftsprofil/Aktivierungszustand";
                this.$axios
                  .put(apiRoute, {
                    // Body - in req.body.idProfil wird die Id des zu aktivierenden Baueigenschaftsprofils übergeben
                    idProfil: idGeschossBaueigenschaftsProfil,
                    aktivierenNichtDeaktivieren: true,
                    vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore
                      .state.einstellungenBenutzer
                      .vorgabeWerteUeberschreibenVorhandeneWerte // #357
                  })
                  .then(async response => {
                    // async wegen await unten
                    console.log(
                      "Erfolg in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Geschoss'"
                    );
                    // Nun noch den Tree refreshen:
                    //---------------------------------------------------------------------------------------------------------
                    // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                    //      da der Refresh asynchron abläuft, ist await notwendig
                    console.log("Vor await reloadTreeWrapper('Optimiert')");
                    await this.reloadTreeWrapper("Optimiert"); // NEU: #332. ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                    console.log("Nach await reloadTreeWrapper('Optimiert')");
                    console.log(
                      "selectedNodeTreeBaueinheiten: ",
                      this.selectedNodeTreeBaueinheiten
                    );
                    // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                    this.$refs.treeBaueinheiten.setExpanded(
                      this.selectedKeyTreeBaueinheiten,
                      true
                    );
                    this.createNewBaueinheitMitGeschossProfilAktivierungDialog = false;
                    this.bezeichnungNeueBaueinheit = null;
                    // NEU: Benutzernachricht im Footer per global Store und Enums:
                    globalStore.showBenutzerNachricht(
                      BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_ERFOLG
                    );
                    //----------------------------------------------------------------------------------------------------------
                  })
                  .catch(async error => {
                    // async wegen await unten
                    console.log(
                      "Error in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Geschoss' - error: ",
                      error
                    );
                    // Nun noch den Tree refreshen:
                    //---------------------------------------------------------------------------------------------------------
                    // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                    //      da der Refresh asynchron abläuft, ist await notwendig
                    console.log(
                      "Vor await reloadTreeWrapper('Nicht optimiert')"
                    );
                    await this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                    console.log(
                      "Nach await reloadTreeWrapper('Nicht optimiert')"
                    );
                    console.log(
                      "selectedNodeTreeBaueinheiten: ",
                      this.selectedNodeTreeBaueinheiten
                    );
                    // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                    this.$refs.treeBaueinheiten.setExpanded(
                      this.selectedKeyTreeBaueinheiten,
                      true
                    );
                    this.createNewBaueinheitMitGeschossProfilAktivierungDialog = false;
                    this.bezeichnungNeueBaueinheit = null;
                    // NEU: Benutzernachricht im Footer per global Store und Enums:
                    globalStore.showBenutzerNachricht(
                      BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_FEHLER
                    );
                  });
              })
              .catch(async error => {
                // async wegen await unten
                console.log(
                  "Error in API Response für Query Baueigenschaftsprofil 'Baueinheit > Geschoss' - error: ",
                  error
                );
                // Nun noch den Tree refreshen:
                //---------------------------------------------------------------------------------------------------------
                // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                //      da der Refresh asynchron abläuft, ist await notwendig
                console.log("Vor await reloadTreeWrapper('Nicht optimiert')");
                await this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                console.log("Nach await reloadTreeWrapper('Nicht optimiert')");
                console.log(
                  "selectedNodeTreeBaueinheiten: ",
                  this.selectedNodeTreeBaueinheiten
                );
                // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                this.$refs.treeBaueinheiten.setExpanded(
                  this.selectedKeyTreeBaueinheiten,
                  true
                );
                this.createNewBaueinheitMitGeschossProfilAktivierungDialog = false;
                this.bezeichnungNeueBaueinheit = null;
                // NEU: Benutzernachricht im Footer per global Store und Enums:
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_LESEN_FEHLER
                );
              });
            //------------------------------------------------------------------------
            // Ältere Fehlversuche - Code wurde nur im Erfolgsfall verwendet, disabled:
            /*
            this.$set(tmp, "baumKnotenTyp", response.data.baumKnotenTyp);
            this.$set(tmp, "children", response.data.children);
            // tmp = response.data
            this.$refs.treeBaueinheiten.setExpanded(
              this.selectedKeyTreeBaueinheiten,
              false
            );
            */
            /*
            tmp.children = [];
            console.log("lazy: ", ths.$refs.treeBaueinheiten.lazy);
            // lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"}
            // HINWEIS: Es handelt sich bei lazy um ein JS Objekt, keinen Array
            // Zugriff auf ein Element darin mit this.$refs.treeBaueinheiten.lazy[id]
            // Resetten eines Elements darin mit delete this.$refs.treeBaueinheiten.lazy[id]
            delete this.$refs.treeBaueinheiten.lazy[tmp._id]; // Resetten des Eintrags im Objekt lazy
            tmp.lazy = true;
            // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
            //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
            //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
            // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            */
            // this.$refs.treeBaueinheiten.setExpanded(tmp._id, true);
            /*
            this.selectedNodeTreeBaueinheiten.children.push({
              _id: response.data._id,
              baueinheitsBezeichnung: response.data.baueinheitsBezeichnung,
              baueigenschaften:                      // ACHTUNG: Überprüfen!
                response.data.baueigenschaften,      // ACHTUNG: Überprüfen!
              lazy: true
            });
            */
          })
          .catch(error => {
            console.log("Error in createChildBaueinheit - error: ", error);
            if (error.response.status === 403) {
              console.log(
                "Error 403 - Geschwisterbaueinheit mit dieser Bezeichnung existiert bereits"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
              );
            } else {
              // Status 500
              // Logging ist bereits druch Axios Interceptor erfolgt!
              // console.log("Error status 500 bei CreateChildBaueinheit")
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_FEHLER
              );
            }
            this.createNewBaueinheitDialog = false;
          });
      } else {
        console.log("Fehlende Bezeichnung für Neuanlage Kindbaueinheit!");
        globalStore.showBenutzerNachricht(
          BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_WARNUNG_BEZEICHNUNG_EINGEBEN
        );
      }
    },

    createChildBaueinheitMitRaumProfilAktivierung() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - erstellt einen Kindknoten des ausgewählten Knotens am Backend mit anschließender Aktivierung des
      // Baueigenschaftsprofils "Baueinheit > Raum" an diesem Kindkonten und fügt ihn anschließend den Daten des
      // QTree hinzu. Anschließend wird der Tree noch ausgeklappt.
      // NEU: Ausklappen des Trees nach asynchronem await refreshTreeBaueinheiten() mit setExpanded(node, true)
      // erst möglich ist, wenn der Knoten geladen wurde
      // TODO: Entweder Validation enforcen oder Länge <= 200 abprüfen vor Create!!
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In createChildBaueinheitMitRaumProfilAktivierung()");
      console.log(
        "bezeichnungNeueBaueinheit: ",
        this.bezeichnungNeueBaueinheit
      );
      if (
        this.selectedKeyTreeBaueinheiten != null &&
        this.bezeichnungNeueBaueinheit != null &&
        this.bezeichnungNeueBaueinheit !== ""
      ) {
        // NEU - um Konflikte mit Aktionen für markierte Zweige zu vermeiden:
        this.idWurzelZuBewegenderZweig = null;
        //--------------------------------------------------------------------------------------------------------
        // NEU: Zusätzliches Body-Feld benutzerKennungenAutoren, dieses erbt ggf. Autoren vom Elternknoten
        //      nach folgender Logik:
        // Initialisiere die Autoren am neuen Kindknoten mit den bisherigen Autoren am
        // vorhandenen Elternknoten des neuen Kindknotens (Feld benutzerKennungenAutoren)
        // ACHTUNG: Dieses Feld am Elternknoten kann auch ein leerer Array sein, z.B. in Bauvorlagen oder
        // bei Erstanlage eines neuen Raumes oben im Baum
        // Füge, wenn angemeldeter Benutzer Mitarbeiter ist und nicht schon als Autor im Array-Feld benutzerKennungenAutoren
        // des Elternknotens enthalten ist, diesen als zusätzlichen Autor am Kindknoten hinzu:
        let benutzerKennungenAutorenNeueBaueinheit = this
          .selectedNodeTreeBaueinheiten.benutzerKennungenAutoren;
        if (
          this.localStore.state.anmeldeDatenBenutzer.benutzerRolle ===
          "Mitarbeiter"
        ) {
          // Füge ggf. den angemeldeten Benutzer als Autor hinzu, falls nicht schon enthalten:
          if (
            !benutzerKennungenAutorenNeueBaueinheit.includes(
              // Funktioniert auch bei leerem Array-Feld!
              this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
            )
          ) {
            // Den angemeldeten Benutzer dem Array als neuen Autor hinzufügen:
            benutzerKennungenAutorenNeueBaueinheit.push(
              this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
            );
          } // else // Nichts zu tun
        } // else // Redakteur oder Administrator
        // Array der Autoren übernehmen vom Elternknoten, bereits oben so initialisiert
        // ACHTUNG: Es wird bei Redakteuren und Administratoren dem Array-Feld benutzerKennungenAutoren
        // NICHT die benutzerKennung des angemeldeten Benutzers hinzugefügt!
        // Dies erlaubt die Hinzufügung von Kindknoten mit leerem Array-Feld durch Redakteure und Administratoren.
        // Das können Strukturierungsknoten oben im Baum sein oder Knoten im Bauvorlagenunterbaum.
        // Fügt ein Redakteur oder Administrator in einem Raum mit nicht leerem Array-Feld einen Kindknoten
        // ein, so wird mit obiger Logik dessen ArrayFeld benutzerKennungenAutoren vom Elternknoten unverändert übernommen.
        //--------------------------------------------------------------------------------------------------------
        let apiRoute =
          process.env.API + "/Baueinheiten/" + this.selectedKeyTreeBaueinheiten;
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBauvorlagen'");
        this.$socket.emit("leaveRoom", {
          room: "roomBauvorlagen"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBauvorlagen'");
        //=========================================================================================================================================
        this.$axios
          .post(apiRoute, {
            // Body - in req.body.baueinheitsBezeichnungKindKnoten wird die Bezeichnung des neuen Kindknotens übergeben:
            baueinheitsBezeichnungKindKnoten: this.bezeichnungNeueBaueinheit,
            benutzerKennungenAutorenKindKnoten: benutzerKennungenAutorenNeueBaueinheit // NEU
          })
          .then(async response => {
            // async wegen await unten
            // ACHTUNG: Es kommt bei Erfolg ein Objekt, das ein Unterobjekt data, das u.a. die _id enthält, zurück!
            // console.log("Response aus Post Request: ", response);
            // tmp wird aktuell nicht mehr benutzt, daher disabeld:
            /*
            var tmp = this.$refs.treeBaueinheiten.getNodeByKey(
              this.selectedKeyTreeBaueinheiten
            );
            */
            // NEU: Benutzernachricht im Footer per global Store und Enums:
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_ERFOLG
            );
            //------------------------------------------------------------------------
            // NEU: Zusätzlich Baueigenschaftsprofil "Baueinheit > Raum" aktivieren per API-Call
            // response._id enthält die Id der neue erzeugten Kindbaueinheit!
            console.log(
              "Nach API Request für Erzeugung Kindbaueinheit - Id der erzeugten Kindbaueinheit: ",
              response.data._id
            );
            //------------------------------------------------------------------------------------------------------------------------
            // NEU: #332 - Performance-Optimierung beim Refresh
            // NEU: Den neu angelegten Knoten mit auf den
            // Array der children pushen, um zu erreichen, um diesen mit der neuen, optimierten Refresh-Methode auch mit zu refreshen
            // Dann weiter unten die neue Refresh-Methode aufrufen ("Optimiert") statt der alten ("Nicht optimiert")
            // ACHTUNG: Wenn der ausgewählte Knoten ein Blattknoten ist oder noch nicht lazy loaded wurde, ist das Feld children
            // nicht definiert, daher wird es in diesem Fall oben neu eingefügt als leerer Array.
            let neuAngelegterKnoten = response.data;
            let idNeueKindBaueinheit = neuAngelegterKnoten._id;
            if (this.selectedNodeTreeBaueinheiten.children === undefined) {
              this.selectedNodeTreeBaueinheiten.children = [];
            }
            this.selectedNodeTreeBaueinheiten.children.push(
              neuAngelegterKnoten
            );
            //-------------------------------------------------------------------------------------------------------------------------
            // Nun muss die Id des betreffenden Baueigenschaftsprofils ermittelt werden per API mit Query:
            apiRoute =
              process.env.API +
              "/Baueigenschaftsprofile/Query/" +
              // "?baueigenschaftsProfilBezeichnung=Raum"; // ALT
              "?baueigenschaftsProfilBezeichnung=Baueinheit%20>%20Raum"; // NEU - #375: Neue Profilbezeichnung!
            this.$axios
              .get(apiRoute)
              .then(baueigenschaftsProfile => {
                // ACHTUNG: Es kommt bei Erfolg ein Objekt, das einen Unter-Array data der Länge 0 enthält, zurück!
                // console.log("baueigenschaftsProfile: ", baueigenschaftsProfile);
                let idRaumBaueigenschaftsProfil =
                  baueigenschaftsProfile.data[0]._id; // Id des gesuchten Baueigenschaftsprofils
                console.log(
                  "Vor API Request für Profilaktivierung - idRaumBaueigenschaftsProfil: ",
                  idRaumBaueigenschaftsProfil
                );
                // Nun damit die Profilaktivierung veranlassen per API:
                apiRoute =
                  process.env.API +
                  "/Baueinheiten/" +
                  idNeueKindBaueinheit +
                  "/Baueigenschaftsprofil/Aktivierungszustand";
                this.$axios
                  .put(apiRoute, {
                    // Body - in req.body.idProfil wird die Id des zu aktivierenden Baueigenschaftsprofils übergeben
                    idProfil: idRaumBaueigenschaftsProfil,
                    aktivierenNichtDeaktivieren: true,
                    vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore
                      .state.einstellungenBenutzer
                      .vorgabeWerteUeberschreibenVorhandeneWerte // #357
                  })
                  .then(async response => {
                    // async wegen await unten
                    console.log(
                      "Erfolg in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Raum'"
                    );
                    // Nun noch den Tree refreshen:
                    //---------------------------------------------------------------------------------------------------------
                    // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                    //      da der Refresh asynchron abläuft, ist await notwendig
                    console.log("Vor await reloadTreeWrapper('Optimiert')");
                    await this.reloadTreeWrapper("Optimiert"); // NEU: #332. ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                    console.log("Nach await reloadTreeWrapper('Optimiert')");
                    console.log(
                      "selectedNodeTreeBaueinheiten: ",
                      this.selectedNodeTreeBaueinheiten
                    );
                    // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                    this.$refs.treeBaueinheiten.setExpanded(
                      this.selectedKeyTreeBaueinheiten,
                      true
                    );
                    this.createNewBaueinheitMitRaumProfilAktivierungDialog = false;
                    this.bezeichnungNeueBaueinheit = null;
                    // NEU: Benutzernachricht im Footer per global Store und Enums:
                    globalStore.showBenutzerNachricht(
                      BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_ERFOLG
                    );
                    //----------------------------------------------------------------------------------------------------------
                  })
                  .catch(async error => {
                    // async wegen await unten
                    console.log(
                      "Error in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Raum' - error: ",
                      error
                    );
                    // Nun noch den Tree refreshen:
                    //---------------------------------------------------------------------------------------------------------
                    // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                    //      da der Refresh asynchron abläuft, ist await notwendig
                    console.log(
                      "Vor await reloadTreeWrapper('Nicht optimiert')"
                    );
                    await this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                    console.log(
                      "Nach await reloadTreeWrapper('Nicht optimiert')"
                    );
                    console.log(
                      "selectedNodeTreeBaueinheiten: ",
                      this.selectedNodeTreeBaueinheiten
                    );
                    // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                    this.$refs.treeBaueinheiten.setExpanded(
                      this.selectedKeyTreeBaueinheiten,
                      true
                    );
                    this.createNewBaueinheitMitRaumProfilAktivierungDialog = false;
                    this.bezeichnungNeueBaueinheit = null;
                    // NEU: Benutzernachricht im Footer per global Store und Enums:
                    globalStore.showBenutzerNachricht(
                      BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_FEHLER
                    );
                  });
              })
              .catch(async error => {
                // async wegen await unten
                console.log(
                  "Error in API Response für Query Baueigenschaftsprofil 'Baueinheit > Raum' - error: ",
                  error
                );
                // Nun noch den Tree refreshen:
                //---------------------------------------------------------------------------------------------------------
                // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                //      da der Refresh asynchron abläuft, ist await notwendig
                console.log("Vor await reloadTreeWrapper('Nicht optimiert')");
                await this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                console.log("Nach await reloadTreeWrapper('Nicht optimiert')");
                console.log(
                  "selectedNodeTreeBaueinheiten: ",
                  this.selectedNodeTreeBaueinheiten
                );
                // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                this.$refs.treeBaueinheiten.setExpanded(
                  this.selectedKeyTreeBaueinheiten,
                  true
                );
                this.createNewBaueinheitMitRaumProfilAktivierungDialog = false;
                this.bezeichnungNeueBaueinheit = null;
                // NEU: Benutzernachricht im Footer per global Store und Enums:
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_LESEN_FEHLER
                );
              });
            //------------------------------------------------------------------------
            // Ältere Fehlversuche - Code wurde nur im Erfolgsfall verwendet, disabled:
            /*
            this.$set(tmp, "baumKnotenTyp", response.data.baumKnotenTyp);
            this.$set(tmp, "children", response.data.children);
            // tmp = response.data
            this.$refs.treeBaueinheiten.setExpanded(
              this.selectedKeyTreeBaueinheiten,
              false
            );
            */
            /*
            tmp.children = [];
            console.log("lazy: ", ths.$refs.treeBaueinheiten.lazy);
            // lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"}
            // HINWEIS: Es handelt sich bei lazy um ein JS Objekt, keinen Array
            // Zugriff auf ein Element darin mit this.$refs.treeBaueinheiten.lazy[id]
            // Resetten eines Elements darin mit delete this.$refs.treeBaueinheiten.lazy[id]
            delete this.$refs.treeBaueinheiten.lazy[tmp._id]; // Resetten des Eintrags im Objekt lazy
            tmp.lazy = true;
            // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
            //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
            //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
            // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            */
            // this.$refs.treeBaueinheiten.setExpanded(tmp._id, true);
            /*
            this.selectedNodeTreeBaueinheiten.children.push({
              _id: response.data._id,
              baueinheitsBezeichnung: response.data.baueinheitsBezeichnung,
              baueigenschaften:                      // ACHTUNG: Überprüfen!
                response.data.baueigenschaften,      // ACHTUNG: Überprüfen!
              lazy: true
            });
            */
          })
          .catch(error => {
            console.log("Error in createChildBaueinheit - error: ", error);
            if (error.response.status === 403) {
              console.log(
                "Error 403 - Geschwisterbaueinheit mit dieser Bezeichnung existiert bereits"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
              );
            } else {
              // Status 500
              // Logging ist bereits druch Axios Interceptor erfolgt!
              // console.log("Error status 500 bei CreateChildBaueinheit")
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_FEHLER
              );
            }
            this.createNewBaueinheitDialog = false;
          });
      } else {
        console.log("Fehlende Bezeichnung für Neuanlage Kindbaueinheit!");
        globalStore.showBenutzerNachricht(
          BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_WARNUNG_BEZEICHNUNG_EINGEBEN
        );
      }
    },

    createChildBaueinheitMitBodenaufbauProfilAktivierung() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - erstellt einen Kindknoten des ausgewählten Knotens am Backend mit anschließender Aktivierung des
      // Baueigenschaftsprofils "Baueinheit > Bodenaufbau" an diesem Kindkonten und fügt ihn anschließend den Daten des
      // QTree hinzu. Anschließend wird der Tree noch ausgeklappt.
      // NEU: Ausklappen des Trees nach asynchronem await refreshTreeBaueinheiten() mit setExpanded(node, true)
      // erst möglich ist, wenn der Knoten geladen wurde
      // TODO: Entweder Validation enforcen oder Länge <= 200 abprüfen vor Create!!
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In createChildBaueinheitMitBodenaufbauProfilAktivierung()");
      console.log(
        "bezeichnungNeueBaueinheit: ",
        this.bezeichnungNeueBaueinheit
      );
      if (
        this.selectedKeyTreeBaueinheiten != null &&
        this.bezeichnungNeueBaueinheit != null &&
        this.bezeichnungNeueBaueinheit !== ""
      ) {
        // NEU - um Konflikte mit Aktionen für markierte Zweige zu vermeiden:
        this.idWurzelZuBewegenderZweig = null;
        //--------------------------------------------------------------------------------------------------------
        // NEU: Zusätzliches Body-Feld benutzerKennungenAutoren, dieses erbt ggf. Autoren vom Elternknoten
        //      nach folgender Logik:
        // Initialisiere die Autoren am neuen Kindknoten mit den bisherigen Autoren am
        // vorhandenen Elternknoten des neuen Kindknotens (Feld benutzerKennungenAutoren)
        // ACHTUNG: Dieses Feld am Elternknoten kann auch ein leerer Array sein, z.B. in Bauvorlagen oder
        // bei Erstanlage eines neuen Bodenaufbaues oben im Baum
        // Füge, wenn angemeldeter Benutzer Mitarbeiter ist und nicht schon als Autor im Array-Feld benutzerKennungenAutoren
        // des Elternknotens enthalten ist, diesen als zusätzlichen Autor am Kindknoten hinzu:
        let benutzerKennungenAutorenNeueBaueinheit = this
          .selectedNodeTreeBaueinheiten.benutzerKennungenAutoren;
        if (
          this.localStore.state.anmeldeDatenBenutzer.benutzerRolle ===
          "Mitarbeiter"
        ) {
          // Füge ggf. den angemeldeten Benutzer als Autor hinzu, falls nicht schon enthalten:
          if (
            !benutzerKennungenAutorenNeueBaueinheit.includes(
              // Funktioniert auch bei leerem Array-Feld!
              this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
            )
          ) {
            // Den angemeldeten Benutzer dem Array als neuen Autor hinzufügen:
            benutzerKennungenAutorenNeueBaueinheit.push(
              this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
            );
          } // else // Nichts zu tun
        } // else // Redakteur oder Administrator
        // Array der Autoren übernehmen vom Elternknoten, bereits oben so initialisiert
        // ACHTUNG: Es wird bei Redakteuren und Administratoren dem Array-Feld benutzerKennungenAutoren
        // NICHT die benutzerKennung des angemeldeten Benutzers hinzugefügt!
        // Dies erlaubt die Hinzufügung von Kindknoten mit leerem Array-Feld durch Redakteure und Administratoren.
        // Das können Strukturierungsknoten oben im Baum sein oder Knoten im Bauvorlagenunterbaum.
        // Fügt ein Redakteur oder Administrator in einem Bodenaufbau mit nicht leerem Array-Feld einen Kindknoten
        // ein, so wird mit obiger Logik dessen ArrayFeld benutzerKennungenAutoren vom Elternknoten unverändert übernommen.
        //--------------------------------------------------------------------------------------------------------
        let apiRoute =
          process.env.API + "/Baueinheiten/" + this.selectedKeyTreeBaueinheiten;
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBauvorlagen'");
        this.$socket.emit("leaveRoom", {
          room: "roomBauvorlagen"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBauvorlagen'");
        //=========================================================================================================================================
        this.$axios
          .post(apiRoute, {
            // Body - in req.body.baueinheitsBezeichnungKindKnoten wird die Bezeichnung des neuen Kindknotens übergeben:
            baueinheitsBezeichnungKindKnoten: this.bezeichnungNeueBaueinheit,
            benutzerKennungenAutorenKindKnoten: benutzerKennungenAutorenNeueBaueinheit // NEU
          })
          .then(async response => {
            // async wegen await unten
            // ACHTUNG: Es kommt bei Erfolg ein Objekt, das ein Unterobjekt data, das u.a. die _id enthält, zurück!
            // console.log("Response aus Post Request: ", response);
            // tmp wird aktuell nicht mehr benutzt, daher disabeld:
            /*
            var tmp = this.$refs.treeBaueinheiten.getNodeByKey(
              this.selectedKeyTreeBaueinheiten
            );
            */
            // NEU: Benutzernachricht im Footer per global Store und Enums:
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_ERFOLG
            );
            //------------------------------------------------------------------------
            // NEU: Zusätzlich Baueigenschaftsprofil "Baueinheit > Bodenaufbau" aktivieren per API-Call
            // response._id enthält die Id der neue erzeugten Kindbaueinheit!
            console.log(
              "Nach API Request für Erzeugung Kindbaueinheit - Id der erzeugten Kindbaueinheit: ",
              response.data._id
            );
            //------------------------------------------------------------------------------------------------------------------------
            // NEU: #332 - Performance-Optimierung beim Refresh
            // NEU: Den neu angelegten Knoten mit auf den
            // Array der children pushen, um zu erreichen, um diesen mit der neuen, optimierten Refresh-Methode auch mit zu refreshen
            // Dann weiter unten die neue Refresh-Methode aufrufen ("Optimiert") statt der alten ("Nicht optimiert")
            // ACHTUNG: Wenn der ausgewählte Knoten ein Blattknoten ist oder noch nicht lazy loaded wurde, ist das Feld children
            // nicht definiert, daher wird es in diesem Fall oben neu eingefügt als leerer Array.
            let neuAngelegterKnoten = response.data;
            let idNeueKindBaueinheit = neuAngelegterKnoten._id;
            if (this.selectedNodeTreeBaueinheiten.children === undefined) {
              this.selectedNodeTreeBaueinheiten.children = [];
            }
            this.selectedNodeTreeBaueinheiten.children.push(
              neuAngelegterKnoten
            );
            //-------------------------------------------------------------------------------------------------------------------------
            // Nun muss die Id des betreffenden Baueigenschaftsprofils ermittelt werden per API mit Query:
            apiRoute =
              process.env.API +
              "/Baueigenschaftsprofile/Query/" +
              // "?baueigenschaftsProfilBezeichnung=Bodenaufbau"; // ALT
              "?baueigenschaftsProfilBezeichnung=Baueinheit%20>%20Bodenaufbau"; // NEU - #375: Neue Profilbezeichnung!
            this.$axios
              .get(apiRoute)
              .then(baueigenschaftsProfile => {
                // ACHTUNG: Es kommt bei Erfolg ein Objekt, das einen Unter-Array data der Länge 0 enthält, zurück!
                // console.log("baueigenschaftsProfile: ", baueigenschaftsProfile);
                let idBodenaufbauBaueigenschaftsProfil =
                  baueigenschaftsProfile.data[0]._id; // Id des gesuchten Baueigenschaftsprofils
                console.log(
                  "Vor API Request für Profilaktivierung - idBodenaufbauBaueigenschaftsProfil: ",
                  idBodenaufbauBaueigenschaftsProfil
                );
                // Nun damit die Profilaktivierung veranlassen per API:
                apiRoute =
                  process.env.API +
                  "/Baueinheiten/" +
                  idNeueKindBaueinheit +
                  "/Baueigenschaftsprofil/Aktivierungszustand";
                this.$axios
                  .put(apiRoute, {
                    // Body - in req.body.idProfil wird die Id des zu aktivierenden Baueigenschaftsprofils übergeben
                    idProfil: idBodenaufbauBaueigenschaftsProfil,
                    aktivierenNichtDeaktivieren: true,
                    vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore
                      .state.einstellungenBenutzer
                      .vorgabeWerteUeberschreibenVorhandeneWerte // #357
                  })
                  .then(async response => {
                    // async wegen await unten
                    console.log(
                      "Erfolg in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Bodenaufbau'"
                    );
                    // Nun noch den Tree refreshen:
                    //---------------------------------------------------------------------------------------------------------
                    // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                    //      da der Refresh asynchron abläuft, ist await notwendig
                    console.log("Vor await reloadTreeWrapper('Optimiert')");
                    await this.reloadTreeWrapper("Optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                    console.log("Nach await reloadTreeWrapper('Optimiert')");
                    console.log(
                      "selectedNodeTreeBaueinheiten: ",
                      this.selectedNodeTreeBaueinheiten
                    );
                    // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                    this.$refs.treeBaueinheiten.setExpanded(
                      this.selectedKeyTreeBaueinheiten,
                      true
                    );
                    this.createNewBaueinheitMitBodenaufbauProfilAktivierungDialog = false;
                    this.bezeichnungNeueBaueinheit = null;
                    // NEU: Benutzernachricht im Footer per global Store und Enums:
                    globalStore.showBenutzerNachricht(
                      BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_ERFOLG
                    );
                    //----------------------------------------------------------------------------------------------------------
                  })
                  .catch(async error => {
                    // async wegen await unten
                    console.log(
                      "Error in API Response für Aktivierung Baueigenschaftsprofil 'Baueinheit > Bodenaufbau' - error: ",
                      error
                    );
                    // Nun noch den Tree refreshen:
                    //---------------------------------------------------------------------------------------------------------
                    // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                    //      da der Refresh asynchron abläuft, ist await notwendig
                    console.log(
                      "Vor await reloadTreeWrapper('Nicht optimiert')"
                    );
                    await this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                    console.log(
                      "Nach await reloadTreeWrapper('Nicht optimiert')"
                    );
                    console.log(
                      "selectedNodeTreeBaueinheiten: ",
                      this.selectedNodeTreeBaueinheiten
                    );
                    // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                    this.$refs.treeBaueinheiten.setExpanded(
                      this.selectedKeyTreeBaueinheiten,
                      true
                    );
                    this.createNewBaueinheitMitBodenaufbauProfilAktivierungDialog = false;
                    this.bezeichnungNeueBaueinheit = null;
                    // NEU: Benutzernachricht im Footer per global Store und Enums:
                    globalStore.showBenutzerNachricht(
                      BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_AKTIVIERUNG_AN_BAUEINHEIT_FEHLER
                    );
                  });
              })
              .catch(async error => {
                // async wegen await unten
                console.log(
                  "Error in API Response für Query Baueigenschaftsprofil 'Baueinheit > Bodenaufbau' - error: ",
                  error
                );
                // Nun noch den Tree refreshen:
                //---------------------------------------------------------------------------------------------------------
                // NEU: Selektierten (Eltern-)knoten des neu angelegten Kindknotens expandieren - NACH Refresh des Baums -
                //      da der Refresh asynchron abläuft, ist await notwendig
                console.log("Vor await reloadTreeWrapper('Nicht optimiert')");
                await this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Unbedingt hier await, damit Baum Refresh abgewartet wird vor Expansion!
                console.log("Nach await reloadTreeWrapper('Nicht optimiert')");
                console.log(
                  "selectedNodeTreeBaueinheiten: ",
                  this.selectedNodeTreeBaueinheiten
                );
                // this.selectedNodeTreeBaueinheiten.lazy = true; // Offenbar unnötig!
                this.$refs.treeBaueinheiten.setExpanded(
                  this.selectedKeyTreeBaueinheiten,
                  true
                );
                this.createNewBaueinheitMitBodenaufbauProfilAktivierungDialog = false;
                this.bezeichnungNeueBaueinheit = null;
                // NEU: Benutzernachricht im Footer per global Store und Enums:
                globalStore.showBenutzerNachricht(
                  BenutzerNachrichten.BAUEIGENSCHAFTSPROFIL_LESEN_FEHLER
                );
              });
            //------------------------------------------------------------------------
            // Ältere Fehlversuche - Code wurde nur im Erfolgsfall verwendet, disabled:
            /*
            this.$set(tmp, "baumKnotenTyp", response.data.baumKnotenTyp);
            this.$set(tmp, "children", response.data.children);
            // tmp = response.data
            this.$refs.treeBaueinheiten.setExpanded(
              this.selectedKeyTreeBaueinheiten,
              false
            );
            */
            /*
            tmp.children = [];
            console.log("lazy: ", ths.$refs.treeBaueinheiten.lazy);
            // lazy: Von Quasar verwaltetes Objekt mit lazy loaded Nodes - Format: {"id1": "loaded", .. "idn": "loaded"}
            // HINWEIS: Es handelt sich bei lazy um ein JS Objekt, keinen Array
            // Zugriff auf ein Element darin mit this.$refs.treeBaueinheiten.lazy[id]
            // Resetten eines Elements darin mit delete this.$refs.treeBaueinheiten.lazy[id]
            delete this.$refs.treeBaueinheiten.lazy[tmp._id]; // Resetten des Eintrags im Objekt lazy
            tmp.lazy = true;
            // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
            //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
            //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
            // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
            */
            // this.$refs.treeBaueinheiten.setExpanded(tmp._id, true);
            /*
            this.selectedNodeTreeBaueinheiten.children.push({
              _id: response.data._id,
              baueinheitsBezeichnung: response.data.baueinheitsBezeichnung,
              baueigenschaften:                      // ACHTUNG: Überprüfen!
                response.data.baueigenschaften,      // ACHTUNG: Überprüfen!
              lazy: true
            });
            */
          })
          .catch(error => {
            console.log("Error in createChildBaueinheit - error: ", error);
            if (error.response.status === 403) {
              console.log(
                "Error 403 - Geschwisterbaueinheit mit dieser Bezeichnung existiert bereits"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
              );
            } else {
              // Status 500
              // Logging ist bereits druch Axios Interceptor erfolgt!
              // console.log("Error status 500 bei CreateChildBaueinheit")
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_FEHLER
              );
            }
            this.createNewBaueinheitDialog = false;
          });
      } else {
        console.log("Fehlende Bezeichnung für Neuanlage Kindbaueinheit!");
        globalStore.showBenutzerNachricht(
          BenutzerNachrichten.BAUEINHEIT_NEUANLAGE_WARNUNG_BEZEICHNUNG_EINGEBEN
        );
      }
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // NEU: Methoden für Form zum Umbenennen einer Baueinheit
    resetRenameBaueinheit() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - resetted die Validation im q-form innerhalb des q-dialogs für das Umbenennen eines Knotens im Bauvorhabenbaum
      // Greift per $refs auf das Form zu und ruft dessen API-MEthode resetValidation() auf
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetRenameBaueinheit()");
      this.$refs.formUmbenennenBaueinheitDialog.resetValidation();
    },

    renameBaueinheit() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - führt eine Umbenennung der ausgewählten Baueinheit am Backend durch
      //--------------------------------------------------------------------------------------------------------------------
      if (this.selectedKeyTreeBaueinheiten != null) {
        console.log("In renameBaueinheit()");
        console.log("id: ", this.selectedKeyTreeBaueinheiten);
        // NEU - um Konflikte mit Aktionen für markierte Zweige zu vermeiden:
        // this.idWurzelZuBewegenderZweig = null; // Nicht nötig bei Rename-Aktion!
        console.log(
          "Bisherige baueinheitsBezeichnung: ",
          this.selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
        );
        console.log(
          "Geänderte baueinheitsBezeichnung: ",
          this.geaenderteBezeichnungBaueinheit
        );
        // NEU:
        const apiRoute =
          process.env.API +
          "/Baueinheiten/" +
          this.selectedKeyTreeBaueinheiten /* :id */ +
          "/Bezeichnung";
        //=========================================================================================================================================
        // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
        // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
        console.log("Vor Emit to leave room 'roomBauvorlagen'");
        this.$socket.emit("leaveRoom", {
          room: "roomBauvorlagen"
        }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
        console.log("Nach Emit to leave room 'roomBauvorlagen'");
        //=========================================================================================================================================
        this.$axios
          .put(apiRoute, {
            baueinheitsBezeichnung: this.geaenderteBezeichnungBaueinheit
            // _id: this.selectedKeyTreeBaueinheiten
          })
          .then(response => {
            console.log("response status: ", response.status);
            // Nun die geänderte Bezeichnung auch im Baum reflektieren:
            // HINWEIS: Obwohl selectedNodeTreeBaueinheiten computed auf dem nested Aarray nodesTreeBaueinheiten ist, kann
            // durch die Zuweisung unten darüber eine Änderung im nested Array nodesTreeBaueinheiten erfolgen.
            // Es muss also NICHT mit einer rekursiven Funktion auf dem nested Array nodesTreeBaueinheiten erst die id-Felder
            // nach der id selectedKeyTreeBaueinheiten durchsucht werden und dann in dem gefundenen Knoten das Feld baueinheitsBezeichnung
            // updated werden.
            this.selectedNodeTreeBaueinheiten.baueinheitsBezeichnung = this.geaenderteBezeichnungBaueinheit;
            this.renameSelectedBaueinheitDialog = false;
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEINHEIT_BEZEICHNUNG_AENDERUNG_ERFOLG
            );
          })
          .catch(error => {
            console.log("error: ", error);
            this.renameSelectedBaueinheitDialog = false;
            // Hier den Fall Status 403 abhandeln (Baueinheitsbezeichnung nicht eindeutig unter den Geschwisterknoten)
            if (error.response.status === 403) {
              console.log(
                "Status 403 - geänderte Baueinheitsbezeichnung existiert bereits an einem Geschwisterknoten"
              );
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_BEZEICHNUNG_AENDERUNG_FEHLER_EXISTIERT_BEREITS
              );
            } else {
              // sonstiger Fehler
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.BAUEINHEIT_BEZEICHNUNG_AENDERUNG_FEHLER
              );
            }
          });
      }
    },

    refreshTreeBaueinheitenPerformanceOptimiert(node) {
      //----------------------------------------------------------------------------------------------------------------------------------
      // NEU: Führt einen Performance-optimierten Refresh des gesamten aktuellen Baums durch.
      // Der Ablauf besteht aus zwei Calls und ist folgendermaßen: Es werden die Knoten auf dem Elternpfad über dem ausgewählten Knoten
      // (einschließlich dem ausgewählten Knoten) eingesammelt (d.h. in einer Liste zwischengespeichert), da diese sich
      // geändert haben könnten. Anschließend werden sie neu vom Backend geladen (Call 1)
      // Parallel dazu werden die geladenen Kind- und Kindeskindnoten unterhalb des ausgewählten Knotens eingesammelt.
      // HINWEIS: Geladen sind Knoten, die früher einmal aufgeklappt worden sind (sie können auch wieder zugeklappt worden sein).
      // Auch sie werden neu geladen (Call 2).
      // Die neugeladenen Knoten aus Call 1 ersetzen im Baum ihre jeweilige alte Version.
      // Am ausgewählten Knoten (bzw. dessen neu geladener Version) werden im Property "children" die Ergebnisse von Call 2 eingefügt
      //==================================================================================================================================
      // Design und Beispiel: Siehe bim-click-front-end\src\markdown\reloadTree.md
      //==================================================================================================================================
      if (node === undefined) {
        if (this.selectedNodeTreeBaueinheiten != null) {
          try {
            let selectedNodeAfterReload;
            let nodesBelow = this.getNodesBelowNodeAsList(
              this.selectedNodeTreeBaueinheiten
            );
            let idsOnPath = this.selectedNodeTreeBaueinheiten.path.split("#");
            const apiRouteOnPath =
              process.env.API + "/Baueinheiten/" + "Reload/Nodes"; // Elternpfad zum Knoten
            const apiRouteBelow =
              process.env.API + "/Baueinheiten/" + "Reload/Branch"; // Zweig unter dem Knoten
            const params = new URLSearchParams([["ids", idsOnPath]]);
            console.log("params", idsOnPath.map(i => `ids=${i}`).join("&"));
            let callOnPath = this.$axios.get(
              apiRouteOnPath + "/?" + idsOnPath.map(i => `ids=${i}`).join("&")
            ); // Die Knoten im Elternpfad für den Refresh
            let callBelow = this.$axios.put(apiRouteBelow, {
              treeAsList: nodesBelow
            }); // Der Zweig unter dem Knoten für den Refresh
            return Promise.all([callOnPath, callBelow]).then(values => {
              let dataCallOnPath = values[0].data;
              let dataCallBelow = values[1].data;
              selectedNodeAfterReload =
                dataCallOnPath[dataCallOnPath.length - 1];
              let currentStage = this.nodesTreeBaueinheiten;
              dataCallOnPath.forEach(n => {
                // Hilfsfunktion - HINWEIS: n ist ein node!
                var gefundenInCurrentStageIndex = currentStage.findIndex(
                  arg => arg._id === n._id
                );
                if (gefundenInCurrentStageIndex !== -1) {
                  let splicedElement = currentStage.splice(
                    gefundenInCurrentStageIndex,
                    1,
                    n
                  )[0];
                  //--------------------------------------------------------------------------------------------------------
                  // #329: lazy setzen in Abhängigkeit von baumKnotenTyp:
                  if (n.baumKnotenTyp !== "Blattknoten") {
                    n.lazy = true;
                  }
                  //--------------------------------------------------------------------------------------------------------
                  // Knoten für Tests umbenennen:
                  // n.baueinheitsBezeichnung = `Reloaded - ${n.baueinheitsBezeichnung}`
                  if (n === selectedNodeAfterReload) {
                    if (
                      splicedElement.children !== null &&
                      splicedElement.children !== undefined
                    ) {
                      n.children = dataCallBelow; // Zweig unter dem ausgewählten Knoten
                      console.log(
                        "In refreshTreeBaueinheitenPerformanceOptimiert() - dataCallBelow: ",
                        dataCallBelow
                      );
                      // Seit 28.09.2021: Sortiere die Kindknoten nach Feld indexInAggregationsknoten - dies reflektiert ggf. nach einem Speichern von Schichten mit
                      // geänderter Reihenfolge die neue Reihenfolge, die nun auch am Frontend per Refresh angezeigt werden soll.
                      // ACHTUNG: Diese wird im else-Zweig unten bisher NICHT durchgeführt (dieser wird beim Löschen aufgerufen)
                      n.children.sort(
                        (a, b) =>
                          a.indexInAggregationsknoten -
                          b.indexInAggregationsknoten
                      );
                    }
                  } else if (splicedElement.children !== undefined) {
                    n.children = splicedElement.children;
                    currentStage = n.children;
                  }
                }
              });
              // Setze selectedKey auf null und anschließend wieder auf den ursprünglichen Wert, damit Quasar merkt, dass sich der dahinterliegende
              // Knoten geändert hat
              let _selectedKey = this.selectedKeyTreeBaueinheiten;
              this.selectedKeyTreeBaueinheiten = null;
              this.selectedKeyTreeBaueinheiten = _selectedKey;
              return 0;
            });
          } catch (exception) {
            // Fehlerbehandlung TODO
            console.log(
              "XXXXXX ERROR/FEHLER in reloadTreeBaueinheiten_05_2021() - exception ",
              exception
            );
          }
        } else {
          console.log(
            "XXXXXX ERROR/FEHLER in reloadTreeBaueinheiten_05_2021(): Aufruf mit selectedNodeTreeBaueinheiten == null"
          );
          throw new Error(
            "XXXXXX ERROR/FEHLER in reloadTreeBaueinheiten_05_2021(): Aufruf mit selectedNodeTreeBaueinheiten == null"
          );
        }
      } else {
        // NEU: Aufruf mit Parameter node - wird bisher nur verwendet bei Aufruf nach Löschen eines Knotens
        // Dort kann auch der ausgewählte Knoten gelöscht werden
        // Statt selectedNodeTreeBaueinheiten wird hier dann node verwendet - ansonsten selbe Logik wie oben
        if (node != null) {
          try {
            let selectedNodeAfterReload;
            let nodesBelow = this.getNodesBelowNodeAsList(node);
            let idsOnPath = node.path.split("#");
            const apiRouteOnPath =
              process.env.API + "/Baueinheiten/" + "Reload/Nodes";
            const apiRouteBelow =
              process.env.API + "/Baueinheiten/" + "Reload/Branch";
            const params = new URLSearchParams([["ids", idsOnPath]]);
            console.log("params", idsOnPath.map(i => `ids=${i}`).join("&"));
            let callOnPath = this.$axios.get(
              apiRouteOnPath + "/?" + idsOnPath.map(i => `ids=${i}`).join("&")
            );
            let callBelow = this.$axios.put(apiRouteBelow, {
              treeAsList: nodesBelow
            });
            return Promise.all([callOnPath, callBelow]).then(values => {
              let dataCallOnPath = values[0].data;
              let dataCallBelow = values[1].data;
              selectedNodeAfterReload =
                dataCallOnPath[dataCallOnPath.length - 1];
              let currentStage = this.nodesTreeBaueinheiten;
              dataCallOnPath.forEach(n => {
                // Hilfsfunktion - HINWEIS: n ist ein node!
                var gefundenInCurrentStageIndex = currentStage.findIndex(
                  arg => arg._id === n._id
                );
                if (gefundenInCurrentStageIndex !== -1) {
                  let splicedElement = currentStage.splice(
                    gefundenInCurrentStageIndex,
                    1,
                    n
                  )[0];
                  //--------------------------------------------------------------------------------------------------------
                  // #329: lazy setzen in Abhängigkeit von baumKnotenTyp:
                  if (n.baumKnotenTyp !== "Blattknoten") {
                    n.lazy = true;
                  }
                  //--------------------------------------------------------------------------------------------------------
                  // Knoten für Tests umbenennen:
                  // n.baueinheitsBezeichnung = `Reloaded - ${n.baueinheitsBezeichnung}`
                  if (n === selectedNodeAfterReload) {
                    if (
                      splicedElement.children !== null &&
                      splicedElement.children !== undefined
                    ) {
                      n.children = dataCallBelow;
                    }
                  } else if (splicedElement.children !== undefined) {
                    n.children = splicedElement.children;
                    currentStage = n.children;
                  }
                }
              });
              // Setze selectedKey auf null und anschließend wieder auf den ursprünglichen Wert, damit Quasar merkt, dass sich der dahinterliegende
              // Knoten geändert hat
              let _selectedKey = this.selectedKeyTreeBaueinheiten;
              this.selectedKeyTreeBaueinheiten = null;
              this.selectedKeyTreeBaueinheiten = _selectedKey;
              return 0;
            });
          } catch (exception) {
            // Fehlerbehandlung TODO
            console.log(
              "XXXXXX ERROR/FEHLER in reloadTreeBaueinheiten_05_2021() - exception ",
              exception
            );
          }
        } else {
          console.log(
            "XXXXXX ERROR/FEHLER in reloadTreeBaueinheiten_05_2021(): Aufruf mit node == null"
          );
          throw new Error(
            "XXXXXX ERROR/FEHLER in reloadTreeBaueinheiten_05_2021(): Aufruf mit node == null"
          );
        }
      }
    },

    getNodesOnPath() {
      //----------------------------------------------------------------------------------------------------------------------------------
      // Sucht die Knoten auf dem Pfad aus dem Quasar-Baum heraus
      let gesuchteIds = this.selectedNodeTreeBaueinheiten.path.split("#");
      let notFound = true;
      let currentStageInTree = this.nodesTreeBaueinheiten;
      let referenzenArray = [];
      let indexArray = [];
      for (var i = 0; i < gesuchteIds.length; i++) {
        var gefundenInCurrentStageIndex = currentStageInTree.findIndex(
          arg => arg._id === gesuchteIds[i]
        );
        if (gefundenInCurrentStageIndex !== -1) {
          var gefundenInCurrentStage =
            currentStageInTree[gefundenInCurrentStageIndex];
          indexArray.push(gefundenInCurrentStageIndex);
          referenzenArray.push(gefundenInCurrentStage);
          currentStageInTree = gefundenInCurrentStage.children;
        } else {
          throw new Error(
            "XXXXXX - ERROR/FEHLER in getNodesOnPath(): Es passt etwas im Baum nicht"
          );
        }
      }
      return referenzenArray;
    },

    getNodesBelowNodeAsList(nodeToReload) {
      //----------------------------------------------------------------------------------------------------------------------------------
      // Finde den Baum unter dem Knoten im Parameter in eine Listendarstellung um
      let nodesBelowSelectedNodeAsList = this.umwandleQuasarBaumInListenDarstellung(
        nodeToReload.children,
        nodeToReload.path
      );
      return nodesBelowSelectedNodeAsList;
    },

    umwandleQuasarBaumInListenDarstellung(
      //----------------------------------------------------------------------------------------------------------------------------------
      baumInQuasarStruktur,
      pfadAktuellAusgewaehlterKnoten
    ) {
      // Wandelt einen Baum in Quasar-Struktur in eine Liste um, die am Backend verarbeitet wird
      // pfadAktuellAusgewaehlterKnoten ist der Pfad des Knotens und wird benutzt um den Knoten, die nicht auf dem Pfad liegen nicht neu zu laden
      if (baumInQuasarStruktur != null && baumInQuasarStruktur.length > 0) {
        let stack = [];
        let current_index = 0;
        let result = [];
        baumInQuasarStruktur.forEach(i => {
          stack.push(i);
          result.push({
            name: i.baueinheitsBezeichnung,
            parent: "-",
            level: 0,
            _id: i._id,
            path: i.path
          });
        });
        while (stack.length > current_index) {
          let node = stack[current_index];
          if (node.children != null && node.children.length > 0) {
            let numberReloadedChildren = 0;
            for (var i = 0; i < node.children.length; i++) {
              // Dieser Befehl sortiert mittels des Pfads Knoten aus, die nicht auf dem Pfad oder darunter liegen
              if (
                pfadAktuellAusgewaehlterKnoten.startsWith(
                  node.children[i].path
                ) ||
                node.children[i].path.startsWith(pfadAktuellAusgewaehlterKnoten)
              ) {
                numberReloadedChildren++;
                stack.push(node.children[i]);
                result.push({
                  name: node.children[i].baueinheitsBezeichnung,
                  parent: result[current_index].name,
                  idOfParent: result[current_index]._id,
                  level: result[current_index].level + 1,
                  _id: node.children[i]._id,
                  path: node.children[i].path
                });
              } else {
                console.log(
                  `Dont push ${node.children[i].baueinheitsBezeichnung}`
                );
              }
            }
            result[current_index].amountChildren = numberReloadedChildren;
          }
          current_index++;
        }
        return result;
      } else return [];
    },

    async handleRefreshWithCallBack(eventArgs) {
      // Spezial-Reload beim Moven von Schichten, gegen das Problem #394, dass nach dem Move selectedSchicht noch auf alter
      // vorher selektierter Schicht stehen bleibt - daher Callback-Funktion, um selectedSchicht zu aktualisieren
      // Ansonsten wie reloadTreeWrapper("Optimiert")
      console.log(
        "In handleRefreshWithCallBack() - benutze optimierte Refresh-Version 05/2021"
      );
      await this.refreshTreeBaueinheitenPerformanceOptimiert();
      console.log(
        "Vor Aufruf Callback-Funktion - eventArgs.idSelectedSchicht: ",
        eventArgs.idSelectedSchicht
      );
      eventArgs.callBack(eventArgs.idSelectedSchicht); // Parameter ist die bisher ausgewählte Schicht
    },

    reloadTreeWrapper(useVersion = "Optimiert", options = {}) {
      //----------------------------------------------------------------------------------------------------------------------------------
      // Varianten:
      // reloadTreeWrapper(useVersion: "Optimiert"):
      //                      - Performance-optimierte neue Version
      //                      - Lädt Elternpfad und alle bereits geladenen Kindknoten des ausgewählten Knotens neu
      //                      - Bestimmt nicht das ausgewählte Tab in "Fachliche Planung" neu (2. Parameter wird ignoriert)
      //                      - Wird verwendet beim Speichern von Profilformularen oder von einzelnen Baueigenschaften oder bei Profilaktivierung
      //                        d.h. bei allen Operationen, die NICHT die Struktur des Baums verändern
      // reloadTreeWrapper(useVersion: "Nicht optimiert", { bestimmeNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung: true/false }):
      //                      - Nicht optimierte alte Version
      //                      - Lädt alle bisher geladenen Knoten rekursiv neu
      //                      - Der 2. Parameter entscheidet, ob das ausgewählte Tab in "Fachliche Planung" neu bestimmt wird
      //                        (wird verwendet bei Profilaktivierung am ausgewählten Knoten)
      //                      - Muss verwendet, bei Operationen, die die Struktur des Baum verändern
      //                        (z.B. Bewegen von Zweigen, Neu-Hinzufügen von Knoten, Löschen von Knoten, Löschen von Baueigenschaften)
      // Diese Methode entscheidet, welche Version des Reloads verwendet wird
      // Defaultmäßig (wenn kein Parameter beim Aufruf verwendet wird), wird der Parameter useVersion auf "Optimiert" gesetzt, d.h.
      // ohne ersten Parameter wird die neue Version aufgerufen
      // TODO 06/2021: Einbau in User-Settings o.ä.
      // DONE 08/2021: Im Rahmen von #349 festgestellt, dass oben reloadTreeWrapper(useVersion = "Optimiert", ..) zwar der
      // korrekte Default "Optimiert" eingestellt war, unten im Code aber noch auf case "05/2021" abgefragt wurde statt case "Optimmiert".
      // Daher wurde beim Aufruf mit Paramter "Optimiert" die NICHT optimierte Version aufgerufen statt der optimierten, wie man
      // auch im Log sah. Unten gefixt.
      switch (useVersion) {
        // case "05/2021": // FALSCH
        case "Optimiert": // RICHTIG - #349
          console.log("Benutze optimierte Refresh-Version 05/2021");
          return this.refreshTreeBaueinheitenPerformanceOptimiert();
        default:
          // "Nicht optimiert"
          console.log(
            "Benutze nicht optimierte Refresh-Version 2020, mit Auswertung 2. Parameter"
          );
          if (
            options.bestimmeNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung ===
            true
          ) {
            return this.refreshTreeBaueinheiten(true);
          } else {
            return this.refreshTreeBaueinheiten();
          }
      }
    },

    //-----------------------------------------------------------------------------------------------------------------------------------
    async refreshTreeBaueinheiten(
      bestimmeNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung // NEU: Boolean, optional, wenn true, wird am Ende eine Funktion aufgerufen,
      // welche das "passende" Unter-Tab für das Tab "Baueigenschaftsprofilformulare" neu berechnet. Wenn nicht angegeben, ist dieser undefined!
      // HINWEIS: In fast allen Aufrufen von refreshTreeBaueinheiten() wird die Funktion nach wie vor ohne diesen Parameter aufgerufen,
      //          Nur bei Aufrufen aus aktiviereBauvorhabenBaueigenschaftsProfilAnBaueinheit(),
      //                               aktiviereStandortBaueigenschaftsProfilAnBaueinheit(),
      //                               aktiviereGebaeudeBaueigenschaftsProfilAnBaueinheit(),
      //                               etc., wird die Funktion aktuell mit Parameter (true) aufgerufen (d.h. nach Profilaktivierung)!
      // NEU: Zusätzlich könnte auch vorsorglich noch bei Aufruf aus der Komponente für die Baueigenschaftsprofile an Baueinheit der Parameter true mitgegeben werden.
      //      Dieser (baueigenschaftsProfileTabBaustoffeUndBaueinheiten) könnte als Event Handler Prop refreshTreeBaueinheiten(true)
      //      mitgegeben werden. Per Tests ist das allerdings offenbar unnnötig. In dieser Komponente kann auch eine Profilaktivierung erfolgen, allerdings ist nicht
      //      gleichzeitig das Tab "Baueigenschaftsprofilformulare" aktiv, sondern das Tab "Baueigenschaftsprofile an Baueinheit".
    ) {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - der komplette Bauvorhabenbaum wird neu aus der Datenbank geladen. Dabei wird eine Rekursion benutzt.
      // ACHTUNG: Es wird hier KEIN lazy Loading benutzt, sondern der Baum mit eigener rekursiver Methode ladeKinderRekursiv() neu aufgebaut!
      // Nach Beendigung dieser Funktion ist der verschachtelte Array nodesTreeBaueinheiten neu aufgebaut mit den neuesten Daten aus der Datenbank
      // HINWEIS: Testmatrix für diese Funktion in bim-click-design-internals.md
      // HINWEIS: Die Objekte/Arrays this.$refs.treeBaueinheiten.lazy und this.$refs.treeBaueinheiten.expanded und .selected bleiben in ihrem bisherigen Zustand!
      // ACHTUNG: Diese Methode hat zwar async/await, man kann sich aber dennoch nicht darauf verlassen, dass die gesamte Methode komplett zu Ende ist nach Rückkehr!
      //          Daher muss man in bewegeZweig() nach Aufruf von refreshTreeBaueinheiten() vor dem Aufruf von setExpanded(), welches unter der Decke die Methode
      //          lazyLoadHandlingTreeBaueinheiten() aufruft (die asynchrone Datenbank-Calls macht) mit Sleeps als Workaround arbeiten.
      // ACHTUNG: Diese Methode funktionierte bzgl. strukturellen Änderungen im Baum (Hinzufügen, Löschen, Verschieben, Kopieren von Knoten)
      //          in den meisten Fällen, wie z.B. dem einfachen Hinzufügen oder Löschen von einzelnen Knoten.
      //          Diese Methode funktionierte nicht immer wenn im Baum ganze Zweige verschoben oder kopiert wurden - siehe Testmatrix.
      //          Diese Fälle sind mittlerweile ebenfalls gefixed!
      // ===================================================================================================================
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In refreshTreeBaueinheiten() - Baum wird neu aufgebaut");
      console.log(
        "Optionaler Parameter bestimmeNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung: ",
        bestimmeNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung
      );
      console.log(
        "Hinweis: Dieser Parameter kann, da optional, undefined, nur nach einer Baueigenschaftsprofilaktivierung sollte er 'true' sein!"
      );
      const apiRoute = process.env.API + "/Baueinheiten/Wurzel";
      await this.$axios // async/await sicherheitshalber wegen Rekursion
        .get(apiRoute)
        .then(async response => {
          console.log("Success aus get für Wurzel Bauvorhabenbaum");
          // console.log("response.data: ", response.data);
          var neuGeladenerKnoten = response.data;
          //-------------------------------------------------------------------------------------------------------
          // ALT - lazy für alle Baumknotentypen auf true setzen - disabled
          // neuGeladenerKnoten.lazy = true; // FIX 09.05.2020, von false auf true gesetzt im Zusammenhang mit Fixing der Fehler beim Verschieben/Kopieren von Zweigen
          // NEU - lazy setzen in Abhängigkeit von baumKnotenTyp:
          if (neuGeladenerKnoten.baumKnotenTyp === "Blattknoten") {
            neuGeladenerKnoten.lazy = false;
          } else {
            neuGeladenerKnoten.lazy = true;
          }
          // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
          //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
          //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
          // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
          //---------------------------------------------------------------------------------------------------------
          console.log(
            "Start der Rekursion zum Neuaufbau von nodesTreeBaueinheiten"
          );
          var tmp = await this.ladeKinderRekursiv(
            // tmp hält den aktuellen Zustand des neu aufgebauten Baums
            this.nodesTreeBaueinheiten[0], // Bisheriger Zustand des aktuell bearbeiteten Knotens - hier Wurzelknoten (verschachtelt mit Kindern im children-Feld)
            neuGeladenerKnoten // Neu vom Backend geholter Zustand des aktuell bearbeiteten Knotens (verschachtelt mit Kindern im children-Feld)
          );
          console.log(
            "Ende der Rekursion - nodesTreeBaueinheiten wird aktualisiert mit dem Ergebnis"
          );
          this.nodesTreeBaueinheiten = [tmp];
          console.log(
            "nodesTreeBaueinheiten nach Neu-Laden: ",
            this.nodesTreeBaueinheiten
          );
          // this.vorgangNeuanlage = false; // ALT
          //-----------------------------------------------------------------------------------------------------------------------------------------
          // NEU - für #505
          // Für den Fall, dass per Kontextmenü die Profilaktivierung ausgelöst wurde mit anschließendem refreshTreeBaueinheiten()
          // und gleichzeitig das Tab "Baueigenschaftsprofilformulare" angewählt war, nun das Unter-Tab auf Grund der Profilaktivierung neu bestimmen,
          // damit dieses korekt angezeigt wird:
          // 1. FEHLER: Aufruf von getTabVonHierarchischOberstemProfilFormularInAktiviertenBaueigenschaftsProfilen() mit Parameter
          // getneuGeladenerKnoten - dies ist jedoch der Wurzelknoten, nicht der neu aktivierte Unterknoten!!!
          // Stattdessen muss der selektierte Knoten genommen werden, Code dafür unten eingefügt.
          // 2. FEHLER: Aufruf funktioniert zwar mit dem folgenden Code, aber zugeordneteBaueigenschaftsProfile dort ist zwar definiert,
          // aber per Log noch im ALTEN Zustand VOR der Aktivierung! (Vermutlich Timing-Problem, da refreshTreeBaueinheiten() noch nicht beendet ist)
          // Auch direkter Aufruf von getTabVonHierarchischOberstemProfilFormularInAktiviertenBaueigenschaftsProfilen()
          // mit this.selectedNodeTreeBaueinheiten() liefert den ALTEN Zustand!!!
          // LÖSUNG: Unten ein "await this.$nextTick();" vor dem Aufruf eingefügt!
          // 3. FEHLER: Diese Tab-Neubestimmung nur durchführen, nachdem tatsächlich ein Profil aktiviert wurde!
          // Dies wird durch den neuen, optionalen Parameter der Funktion durch die Aufrufer gesteuert (aus den Funktionen für die Aktivierung eines Baueigenschaftsprofils)
          // Wenn die Neu-Berechnung immer durchgeführt würde, führt dies zu ungewollten Tab-Wechseln, z.B. beim Speichern eines Baueigenschaftsprofilformulars
          // aus einem Formular, das nicht das hierarchisch oberste ist, wo ebenfalls refreshTreeBaueinheiten() aufgerufen wird. Dann führt die
          // Tab-Neubestimmung zu einem ungewollten Tab-Wechsel auf das hierarchisch oberste Unter-Tab.
          // Dies wird durch die folgende Abfrage verhindert:
          if (
            bestimmeNeuUnterTabBaueigenschaftsProfilFormulareNachProfilAktivierung
          ) {
            // Neuer optionaler Parameter der Funktion für obige Steuerung für 3. FEHLER oben
            console.log(
              "◥◤◥◤◥◤◥◤◥◤◥◤ Vor Bestimmung des passenden Unter-Tabs für Baueigenschaftsprofilformulare am Ende von refreshTreeBaueinheiten()"
            );
            await this.$nextTick(); // Unbedingt notwendig, sonst 2. FEHLER oben
            let selektierterKnoten = this.$refs.treeBaueinheiten.getNodeByKey(
              this.selectedKeyTreeBaueinheiten
            ); // Für 1. FEHLER oben
            // console.log("selektierterKnoten: ", selektierterKnoten);
            console.log(
              "selektierterKnoten.zugeordneteBaueigenschaftsProfile: ",
              selektierterKnoten.zugeordneteBaueigenschaftsProfile
            ); // ACHTUNG: Ist nur mit $nextTick() im NEUEN Zustand NACH Aktivierung!
            this.tabBaueigenschaftsProfilFormulare = this.getTabVonHierarchischOberstemProfilFormularInAktiviertenBaueigenschaftsProfilen(
              selektierterKnoten
            );
          } // else ist dieser undefined
          //-----------------------------------------------------------------------------------------------------------------------------------------
          return true; // Hinweis: Eingefügt, um Ende obiger Promise (.then) zu signalisieren
        })
        .catch(error => {
          // NEU: Error Handling mit .catch
          console.log("Error bei refreshTreeBaueinheiten - error: ", error);
        });
    },

    async ladeKinderRekursiv(
      alterZustandAktuellBearbeiteterKnoten,
      neuerZustandAktuellBearbeiteterKnoten
    ) {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - durchläuft den bisherigen Baum rekursiv und lädt ihn neu.
      // In alterZustandAktuellBearbeiteterKnoten steht immer der aktuelle Knoten (aus dem alten Baum), in neuerZustandAktuellBearbeiteterKnoten steht sein Update.
      // In dieser Methode werden die Kinder in neuerZustandAktuellBearbeiteterKnoten neu geladen, falls der aktuelle alte Knoten denn geladene Kinder hatte.
      // Gleichzeitig wird (über eine Variable tmp) neuerZustandAktuellBearbeiteterKnoten als Ergebnis der Funktion returned - dies erfolgt, um das Ende der
      // Funktion besser zu signalisieren.
      // HINWEIS: nodesTreeBaueinheiten[0], mit dem die Funktion initial aufgerufen wird, enthält NUR die vor dem Refresh bereis per lazy Loading geladenen Knoten,
      //          NICHT ALLE Knoten!!!
      // HINWEIS: children in nodesTreeBaueinheiten ist verschachtelt, während das API getKindKnotenBaueinheit die Kinder linear holt!
      // TODO XXXXXX: Konsistenteres Error Handling mit catch für den Axios Call!!!
      //--------------------------------------------------------------------------------------------------------------------

      function findIndexOfKind(id) {
        // Helper-Funktion um im Array response.data, welcher Kinder enthält, den Index für ein Element mit id zu ermitteln, mittels findIndex
        // Siehe https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex
        return response.data.findIndex(item => item._id === id);
      }

      //--------------------------------------------------------------------------------------------------------------------
      try {
        //----------------------------------------------------------------------------------------------------------
        // ALT - lazy für alle Baumknotentypen auf true setzen - disabled
        // neuerZustandAktuellBearbeiteterKnoten.lazy = true;
        // NEU - lazy setzen in Abhängigkeit von baumKnotenTyp:
        if (
          neuerZustandAktuellBearbeiteterKnoten.baumKnotenTyp === "Blattknoten"
        ) {
          neuerZustandAktuellBearbeiteterKnoten.lazy = false;
        } else {
          neuerZustandAktuellBearbeiteterKnoten.lazy = true;
        }
        // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
        //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
        //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
        // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
        //-----------------------------------------------------------------------------------------------------------
        if (alterZustandAktuellBearbeiteterKnoten.hasOwnProperty("children")) {
          console.log("In ladeKinderRekursiv()");
          let apiRoute =
            process.env.API +
            "/Baueinheiten/" +
            alterZustandAktuellBearbeiteterKnoten._id +
            "/Kinder";
          // this.$axios.get(apiRoute); // Fix MS 07.05.2020 - disabled, die Zeile darunter macht ja dasselbe!
          var response = await this.$axios.get(apiRoute);
          // TODO XXXXXX: Konsistenteres Error Handling mit catch für den Axios Call!!!
          // Folgende console.logs disabled, da dieselbe Info schon von Axios Response Interceptor ausgegeben wird;
          /*
          console.log(
            "Response von API readKindKnotenBaueinheit() für Knoten mit id: ", alterZustandAktuellBearbeiteterKnoten._id
          );
          console.log(
            "response.status: ",
            response.status
          );
          console.log(
            "response.data: ",
            response.data
          );
          */
          neuerZustandAktuellBearbeiteterKnoten.children = response.data; // HINWEIS: Diese Zuweisung weist ggf. auch neu hinzugekommene Kindknoten mit zu!!!
          // Seit 28.10.2021: Sortiere die Kindknoten nach Feld indexInAggregationsknoten - dies reflektiert ggf. nach einem Speichern von Schichten mit
          // geänderter Reihenfolge die neue Reihenfolge, die nun auch am Frontend per Refresh angezeigt werden soll:
          neuerZustandAktuellBearbeiteterKnoten.children.sort(
            (a, b) => a.indexInAggregationsknoten - b.indexInAggregationsknoten
          );
          try {
            for (
              var i = 0;
              i < alterZustandAktuellBearbeiteterKnoten.children.length;
              i++
            ) {
              // HINWEISE:
              // i ist Index für Array alterZustandAktuellBearbeiteterKnoten.children
              // currentIndex ist Index für Arrays response.data (enthält die Children als Objekte, hat kein Feld children!) und neuerZustandAktuellBearbeiteterKnoten.children
              console.log(
                "In Schleife für Rekursion - baumKnotenTyp wird gesetzt und Rekursion für Kinder aufgerufen - i:",
                i
              );
              const currentIndex = findIndexOfKind(
                alterZustandAktuellBearbeiteterKnoten.children[i]._id
              ); // Finde den korrespondierenden Index für den Zugriff auf die anderen Arrays
              console.log("currentIndex: ", currentIndex);
              if (currentIndex === -1) {
                console.log(
                  "Spezialfall: Knoten wurde nach dem Verschieben gelöscht - diesen ignorieren - id: ",
                  alterZustandAktuellBearbeiteterKnoten.children[i]._id
                );
                continue; // Beendet aktuellen Schleifendurchlauf, führt nächste Iteration der Schleife aus
                // ACHTUNG: Diese Abfrage ist aus Robustheitsgründen generell sinnvoll, covered aber auch den Spezialfall, wenn in alterZustandAktuellBearbeiteterKnoten.children
                // der bisherig Wurzelknoten des bewegten Zweigs noch enthalten ist - dieser wurde ja gelöscht, daher returned die API-Methode
                // readKindKnotenBaueinheit() in diesem Fall dann 404! In diesem Fall hier mit continue fortfahren, um das Lesen
                // der Kindknoten für solche Knoten zu unterbinden!
              }
              // Andernfalls weitermachen:
              //--------------------------------------------------------------------------------------------------------
              // NEU - lazy setzen für das aktuelle Kind in Abhängigkeit von baumKnotenTyp:
              if (response.data[currentIndex].baumKnotenTyp === "Blattknoten") {
                neuerZustandAktuellBearbeiteterKnoten.children[
                  currentIndex
                ].lazy = false;
              } else {
                neuerZustandAktuellBearbeiteterKnoten.children[
                  currentIndex
                ].lazy = true;
              }
              // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
              //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
              //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
              // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
              //--------------------------------------------------------------------------------------------------------
              // Nun die Rekursion durchführen für das aktuelle Kind:
              var tmp = await this.ladeKinderRekursiv(
                alterZustandAktuellBearbeiteterKnoten.children[i],
                // NEU:
                response.data[currentIndex] // NEU
                // ALT: response.data[i] // ACHTUNG: Dieser Code funktionierte meistens, war aber nicht robust - man sollte nicht davon ausgehen, dass sich die jeweligen per [i]
                // indizierten Positionen in den beiden Arrays immer entsprechen!!! Daher geändert mit Hilfe der Helper-Funktion!
                // --------------------------------------------------------------------------------------------------------------------------------------------------
                // ACHTUNG: Bei dem neu eingefügten Wurzelknoten eines bewegten (kopierten/verschobenen) Zweigs, der bisher NICHT in nodesTreeBaustoffe enthalten war,
                // aber in response.data[i] nun unter dem neuen Elternknoten mit zurückkommt, wird dessen neuer Zustand response.data[i] hier
                // "unterschlagen" - response.data.length ist in diesem Fall um 1 größer sein alterZustandAktuellBearbeiteterKnoten.children.length!!!
                // Dies gilt auch beim Einfügen von neuen (Blatt-)Knoten, ist dort aber vermutlich unschädlich.
                // FRAGE: Entsprechen sich überhaupt die jeweligen per [i] indizierten Positionen in den beiden Arrays?
                // FIX: Obigen Fall nachfolgend separat handeln - siehe unten
              );
            }
            // NEU: Obigen Fall hier separat handeln:
            if (
              response.data.length ===
              alterZustandAktuellBearbeiteterKnoten.children.length + 1
            ) {
              console.log(
                "Achtung: Neu erzeugter Knoten gefunden - id: ",
                response.data[response.data.length - 1]._id
              );
              console.log(
                "Dessen lazy-Flag wird nun in Abhängigkeit von baumKnotenTyp gesetzt"
              );
              //--------------------------------------------------------------------------------------------------------
              // ALT - lazy unbedingt auf true setzen:
              // response.data[response.data.length-1].lazy = true; // ACHTUNG: War FALSCH, response.data statt neuerZustandAktuellBearbeiteterKnoten, und .children fehlte!!!
              // neuerZustandAktuellBearbeiteterKnoten[response.data.length-1].lazy = true; // ACHTUNG: War wohl falsch, .children fehlte!!!
              // neuerZustandAktuellBearbeiteterKnoten.children[response.data.length-1].lazy = true; // Korrigierte Version, ersetzt durch selektives Setzen des lazy-Flags
              // NEU - lazy setzen für das aktuelle Kind in Abhängigkeit von baumKnotenTyp:
              if (
                response.data[response.data.length - 1].baumKnotenTyp ===
                "Blattknoten"
              ) {
                neuerZustandAktuellBearbeiteterKnoten.children[
                  response.data.length - 1
                ].lazy = false;
              } else {
                neuerZustandAktuellBearbeiteterKnoten.children[
                  response.data.length - 1
                ].lazy = true;
              }
              // lazy === true zeigt an, dass bei nicht geladenen QTree Kindern (Feld children ist dann nicht vorhanden)
              //          bei Klick auf "Expandieren" die Methode für lazy Loading aufgerufen wird
              //          (bei leerem Array children ([]) muss das Verhalten ermittelt werden)
              // lazy === false unterdrückt den grauen Rechts-Pfeil für "Expandieren"
              //--------------------------------------------------------------------------------------------------------
              /*
              // Optionaler Code - bisher nicht weiter verfolgt: Ggf. dessen Kinder aus Datenbank lesen
              // Einstweilen zur Bestimmung, ob er Kinder hat, den baumKnotenTyp prüfen:
              if (response.data[response.data.length-1].baumKnotenTyp === "Verzweigungsknoten") {
                console.log("Verzweigungsknoten - dessen Kinder lesen");
                apiRoute =
                  process.env.API +
                  "/Baueinheiten/" +
                  response.data[response.data.length-1]._id +
                  "/Kinder";
                response = await this.$axios.get(apiRoute);
                // TODO XXXXXX: Konsistenteres Error Handling mit catch für den Axios Call!!!
                console.log(
                  "Antwort aus API getKindKnotenBaueinheit() - response.data: ",
                  response.data
                );
                // Diese nun weiterverarbeiten - aber wie?
                // neuerZustandAktuellBearbeiteterKnoten.children=response.data; // ??? Oder per for die Kindknoten einzeln pushen in den Array children?
                console.log("ACHTUNG: Code ist hier noch unvollständig!!!")
              }
              */
            }
          } catch (error) {
            console.log("Error in ladeKinderRekursiv() - error: ", error);
          }
          console.log(
            "Nach Rekursion - result.children: ",
            neuerZustandAktuellBearbeiteterKnoten.children
          );
        }
        return neuerZustandAktuellBearbeiteterKnoten;
      } catch (error) {
        console.log("Error in ladeKinderRekursiv() - error: ", error);
      }
    },

    //----------------------------------------------------------------------------------------------------------------------
    // Methoden für Baueigenschaften
    //----------------------------------------------------------------------------------------------------------------------

    aktualisiereDefiniertNichtUndefiniert(baueigenschaft) {
      //--------------------------------------------------------------------------------------------------------------------
      // Aktualisiert bei aktivierter Baueigenschaft in Abhängigkeit vom Wertetyp, und ob die
      // für den Wertetyp relevanten Wertefelder gesetzt sind oder nicht,
      // das wertbezogene Merkmal definiertNichtUndefiniert.
      // Bei deaktivierter Baueigenschaft werden in Abhängigkeit vom Wertetyp die betreffenden Wertefelder geleert.
      //--------------------------------------------------------------------------------------------------------------------
      if (!baueigenschaft.aktiviertNichtDeaktiviert) {
        // Baueigenschaft ist deaktiviert:
        // Alle Wertefelder leeren und die Baueigenschaft auf undefiniert setzen
        switch (baueigenschaft.typbezogeneBaueigenschaft.werteTyp) {
          case "Kennwert":
            baueigenschaft.kennWert1 = null;
            // baueigenschaft.typbezogeneBaueigenschaft.symbol = null; // War falsch, ist typbezogenes Feld!
            // baueigenschaft.typbezogeneBaueigenschaft.einheit = null; // War falsch, ist typbezogenes Feld!
            // baueigenschaft.typbezogeneBaueigenschaft.operator = null; // War falsch, ist typbezogenes Feld!
            // baueigenschaft.typbezogeneBaueigenschaft.formel = null; // War falsch, ist typbezogenes Feld! // NEU
            baueigenschaft.bezeichnungsWert1 = null;
            break;
          case "Kennwertepaar":
            baueigenschaft.kennWert1 = null;
            baueigenschaft.kennWert2 = null;
            // baueigenschaft.typbezogeneBaueigenschaft.symbol = null; // War falsch, ist typbezogenes Feld!
            // baueigenschaft.typbezogeneBaueigenschaft.einheit = null; // War falsch, ist typbezogenes Feld!
            // baueigenschaft.typbezogeneBaueigenschaft.operator = null; // War falsch, ist typbezogenes Feld!
            // baueigenschaft.typbezogeneBaueigenschaft.formel = null; // War falsch, ist typbezogenes Feld! // NEU
            baueigenschaft.bezeichnungsWert1 = null;
            baueigenschaft.bezeichnungsWert2 = null;
            break;
          case "Datumswert":
            baueigenschaft.datumsWert1 = null;
            baueigenschaft.bezeichnungsWert1 = null;
            break;
          case "Datumswertepaar":
            baueigenschaft.datumsWert1 = null;
            baueigenschaft.datumsWert2 = null;
            baueigenschaft.bezeichnungsWert1 = null;
            baueigenschaft.bezeichnungsWert2 = null;
            break;
          case "Tageszeitwert": // NEU
            baueigenschaft.tagesZeitWert1 = null;
            baueigenschaft.bezeichnungsWert1 = null;
            break;
          case "Tageszeitwertepaar": // NEU
            baueigenschaft.tagesZeitWert1 = null;
            baueigenschaft.tagesZeitWert2 = null;
            baueigenschaft.bezeichnungsWert1 = null;
            baueigenschaft.bezeichnungsWert2 = null;
            break;
          case "Bezeichnungswert":
            baueigenschaft.bezeichnungsWert1 = null;
            break;
          case "Bezeichnungswertepaar":
            baueigenschaft.bezeichnungsWert1 = null;
            baueigenschaft.bezeichnungsWert2 = null;
            break;
          case "Aufzählungswert":
            // console.log("Aufzählungswert");
            // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            baueigenschaft.bezeichnungsWert1 = null;
            baueigenschaft.aufzaehlungsWert = null;
            break;
          case "Wahrheitswert":
            // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            baueigenschaft.bezeichnungsWert1 = null;
            baueigenschaft.wahrheitsWert = null;
            break;
        }
        baueigenschaft.definiertNichtUndefiniert = false;
      } else {
        // Bei Aktivierung, je nach Wertetyp, prüfen ob die entsprechenden Wertefelder leer oder gelöscht sind.
        // Wenn das nicht der Fall ist, wird definiertNichtUndefiniert auf true gesetzt, sonst auf false
        switch (baueigenschaft.typbezogeneBaueigenschaft.werteTyp) {
          case "Kennwert":
            if (
              (baueigenschaft.kennWert1 === null ||
                baueigenschaft.kennWert1 === "") &&
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Kennwertepaar":
            if (
              (baueigenschaft.kennWert1 === null ||
                baueigenschaft.kennWert1 === "") &&
              (baueigenschaft.kennWert2 === null ||
                baueigenschaft.kennWert2 === "") &&
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "") &&
              (baueigenschaft.bezeichnungsWert2 === null ||
                baueigenschaft.bezeichnungsWert2 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Datumswert":
            if (
              (baueigenschaft.datumsWert1 === null ||
                baueigenschaft.datumsWert1 === "") &&
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Datumswertepaar":
            if (
              (baueigenschaft.datumsWert1 === null ||
                baueigenschaft.datumsWert1 === "") &&
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "") &&
              (baueigenschaft.datumsWert2 === null ||
                baueigenschaft.datumsWert2 === "") &&
              (baueigenschaft.bezeichnungsWert2 === null ||
                baueigenschaft.bezeichnungsWert2 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Tageszeitwert": // NEU
            if (
              (baueigenschaft.tagesZeitWert1 === null ||
                baueigenschaft.tagesZeitWert1 === "") &&
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Tageszeitwertepaar":
            if (
              (baueigenschaft.tagesZeitWert1 === null ||
                baueigenschaft.tagesZeitWert1 === "") &&
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "") &&
              (baueigenschaft.tagesZeitWert2 === null ||
                baueigenschaft.tagesZeitWert2 === "") &&
              (baueigenschaft.bezeichnungsWert2 === null ||
                baueigenschaft.bezeichnungsWert2 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Bezeichnungswert":
            if (
              baueigenschaft.bezeichnungsWert1 === null ||
              baueigenschaft.bezeichnungsWert1 === ""
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Bezeichnungswertepaar":
            if (
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "") &&
              (baueigenschaft.bezeichnungsWert2 === null ||
                baueigenschaft.bezeichnungsWert2 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Aufzählungswert":
            console.log("Aufzählungswert");
            if (
              (baueigenschaft.aufzaehlungsWert === null ||
                baueigenschaft.aufzaehlungsWert === "" ||
                baueigenschaft.aufzaehlungsWert === []) && // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
          case "Wahrheitswert":
            // ALT: Der Fall, dass der Wahrheitswert leer ist, kann nicht erkannt werden
            // NEU: Kann nun erkannt werden, mit prop indeterminate am q-toggle:
            if (
              baueigenschaft.wahrheitsWert === null && // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
              (baueigenschaft.bezeichnungsWert1 === null ||
                baueigenschaft.bezeichnungsWert1 === "")
            ) {
              baueigenschaft.definiertNichtUndefiniert = false;
            } else {
              baueigenschaft.definiertNichtUndefiniert = true;
            }
            break;
        }
      }
    },

    updateAusgewaehlteBaueigenschaft() {
      //------------------------------------------------------------------------------------------------------------------------------
      // Aktualisiert die augewaehlte Baueigenschaft am Backend
      //------------------------------------------------------------------------------------------------------------------------------
      console.log(`In updateAusgewaehlteBaueigenschaft`);

      // Für die Baueigenschaft zunächst ermitteln, ob sie definierte Werte hat oder nicht, und definiertNichtUndefiniert entsprechend setzen:
      this.ausgewaehlteBaueigenschaft.definiertNichtUndefiniert = this.istDefiniertAusgewaehlteBaueigenschaft; // Computed Property, siehe unten

      var apiRoute =
        process.env.API +
        "/Baueinheiten/" +
        this.selectedKeyTreeBaueinheiten +
        "/Baueigenschaften";

      // console.log("selectModelBauinformationAusgewaehlteBaueigenschaft: ", this.selectModelBauinformationAusgewaehlteBaueigenschaft);

      // NEU - ohne Flattening:
      this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation._id =
        this.selectModelBauinformationAusgewaehlteBaueigenschaft != null
          ? this.selectModelBauinformationAusgewaehlteBaueigenschaft._id
          : null;
      // Feld setzen mit ausgewählter Bauinformation in q-select
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      console.log("Vor Emit to leave room 'roomBauvorlagen'");
      this.$socket.emit("leaveRoom", {
        room: "roomBauvorlagen"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBauvorlagen'");
      //=========================================================================================================================================
      // ACHTUNG: Hier zusätzlich Leave für roomBaueigenschaften notwendig, denn deren (typbezogene) Felder können ebenfalls geändert worden sein!
      console.log("Vor Emit to leave room 'roomBaueigenschaften'");
      this.$socket.emit("leaveRoom", {
        room: "roomBaueigenschaften"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBaueigenschaften'");
      //=========================================================================================================================================
      this.$axios
        .put(/* url */ apiRoute, {
          // NEU: Ruft updateBaueigenschaftBaueinheit als Route Handler am Backend
          // Body - in req.body.baueigenschaft wird die upzudatende Baueigenschaft übergeben
          // Diese enthält auch ein Feld _id zur Identifikation der zugehörigen typbezogenen Baueigenschaft in BaueigenschaftenCollection
          // in req.body.baueigenschaft.typbezogeneBaueigenschaft._id
          // Dieses wird schonn beim Lesen aus der Datenbank dem Objekt hinzugefügt (ohne Flattening!)
          baueigenschaft: this.ausgewaehlteBaueigenschaft,
          // ALT: idBaueigenschaft: this.ausgewaehlteBaueigenschaft._id,
          idBaueigenschaft: this.ausgewaehlteBaueigenschaft
            .typbezogeneBaueigenschaft._id, // NEU
          idBaueinheit: this.selectedKeyTreeBaueinheiten,
          definiertNichtUndefiniert: this.istDefiniertAusgewaehlteBaueigenschaft // Computed Property - ermittelt, ob die Baueigenschaft definierte Werte hat
        })
        .then(async updateResponse => {
          // updateResponse ist die Response vom Update, es wird daraus nur updateResponse.status benötigt
          console.log("updateResponse: ", updateResponse);
          if (updateResponse.status === 200) {
            //=======================================================================================================================
            await this.reloadTreeWrapper(); // Aktualisiere den Bauvorhabenbaum, der ausgewählte Knoten bleibt dabei erhalten,
            // sein Inhalt kann sich geändert haben!
            //=======================================================================================================================
            // NEU: Banner-Benutzernachricht im Footer per global Store und Enums:
            console.log(
              "In updateAusgewaehlteBaueigenschaft() - Update der Baueigenschaft erfolgreich"
            );
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEIGENSCHAFT_AENDERUNG_ERFOLG
            );
            //----------------------------------------------------------------------------------------------------------
            this.selectedRowsTableBaueigenschaften[0] = this.selectedNodeTreeBaueinheiten.baueigenschaften.find(
              arg => this.ausgewaehlteBaueigenschaft._id === arg._id
            );
            // Sucht in der aktualisierten Tabelle der Baueigenschaften an der ausgewählten Baueinheit im Baum nach der id der gerade aktualisierten Baueigenschaft
            // und aktualisiert die ausgewählte Baueigenschaft auf die Werte der aktualisierten Baueigenschaft an der ausgewählten Baueinheit im aus der Datenbank
            // neu geladenen Bauvorhabenbaum - dabei ist der Key in der QTable derselbe wie vor dem Update
            //----------------------------------------------------------------------------------------------------------
            // NEU: Fix #118 22.05.2020 gegen Fehler im alten Code unten:
            this.ausgewaehlteBaueigenschaft = Object.assign(
              {},
              this.selectedRowsTableBaueigenschaften[0]
            );
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft = Object.assign(
              {},
              this.selectedRowsTableBaueigenschaften[0]
                .typbezogeneBaueigenschaft
            );
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation = Object.assign(
              {},
              this.selectedRowsTableBaueigenschaften[0]
                .typbezogeneBaueigenschaft.bauinformation
            );
            // Fix 28.08.2020:
            // ACHTUNG: Funktioniert so nur im Zusammenspiel mit type="date" an den betreffenden Quasar-Feldern, welche
            //          in der Lage sind, diese Felder als native Date-Typen zu verarbeiten!
            //          Die Date-Utils verarbeiten als Argument nur diese Date-Typen, nicht Strings!
            this.ausgewaehlteBaueigenschaft.datumsWert1 = date.formatDate(
              this.ausgewaehlteBaueigenschaft.datumsWert1,
              "YYYY-MM-DD"
            );
            this.ausgewaehlteBaueigenschaft.datumsWert2 = date.formatDate(
              this.ausgewaehlteBaueigenschaft.datumsWert2,
              "YYYY-MM-DD"
            );
            //------------------------------------------------------------------------------------------------------------
            // ALT - FALSCH, da hier Referenzen zugewiesen werden, wir wollen jedoch auf Kopien arbeiten!
            // Führte dazu, dass in der QTable Felder aktualisiert werden, obwohl kein Speichern erfolgte - daher disabled:
            // this.ausgewaehlteBaueigenschaft = this.selectedRowsTableBaueigenschaften[0];
            //------------------------------------------------------------------------------------------------------------
            console.log(
              "Selected Row in Tabelle für Baueigenschaften wurde aktualisiert"
            );
            //-------------------------------------------------------------------------------------------------------------
            // NEU: Fix #119, 22.05.2020 gegen Fehler bei 2-maligem Speichern - "Cannot set property '_id' of null" für das Objekt
            // selectModelBauinformationAusgewaehlteBaueigenschaft:
            this.selectModelBauinformationAusgewaehlteBaueigenschaft = this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft.find(
              bauinformation => {
                return (
                  bauinformation._id ===
                  this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft
                    .bauinformation._id
                );
              }
            );
          } else {
            console.log(
              "In updateAusgewaehlteBaueigenschaft() - Updateprüfung im Backend abgelehnt"
            );
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEIGENSCHAFT_AENDERUNG_ABLEHNUNG
            );
          }
        })
        .catch(error => {
          console.log(
            "In updateAusgewaehlteBaueigenschaft() - Error bei Update der Baueigenschaft für Baueinheit"
          );
          console.log("error: ", error);
          // TODO: showBenutzerNachricht mit entsprechender Nachricht
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFT_AENDERUNG_FEHLER
          );
        });
      // .finally(/* Tue etwas bei Erfolg und Misserfolg */);
    },

    resetNeueBaueigenschaft() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode, um die neue Baueigenschaft zu resetten (auf leere Baueigenschaft)
      // Wird von "Zurücksetzen"-Button ausgelöst
      //--------------------------------------------------------------------------------------------------------------------
      console.log("resetNeueBaueigenschaft");
      this.neueBaueigenschaft = Object.assign({}, this.leereBaueigenschaft);
      this.neueBaueigenschaft.typbezogeneBaueigenschaft = Object.assign(
        {},
        this.leereBaueigenschaft.typbezogeneBaueigenschaft
      );
      this.selectOptionsAufzaehlungswertNeueBaueigenschaft = [];
      this.suppressNotificationNeuTabBaueigenschaften = true; // Verhindert Notification bei erstem Tab-Auruf!
      // (Benutzer hat dann noch keine Aktivierung oder Deaktivierung auslöst)
      this.selectModelAufzaehlungswertNeueBaueigenschaft = null;
      this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft = null;
      this.selectModelBauinformationNeueBaueigenschaft = null;
      this.initialisiereSelectOptionsUndSelectFilterOptionsAufzaehlungswertNeueBaueigenschaft();
    },

    //----------------------------------------------------------------------------------------------------------------------
    resetAusgewaehlteBaueigenschaft() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode, um die ausgewählte Baueigenschaft zu resetten (Änderungen werden rückgängig gemacht)
      // Wird von Buttons ausgelöst oder Tab-Anwahl
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In resetAusgewaehlteBaueigenschaft()");
      if (this.selectedRowsTableBaueigenschaften.length > 0) {
        this.ausgewaehlteBaueigenschaft = Object.assign(
          {},
          this.selectedRowsTableBaueigenschaften[0]
        );
        this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft = Object.assign(
          {},
          this.selectedRowsTableBaueigenschaften[0].typbezogeneBaueigenschaft
        );
        this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation = Object.assign(
          {},
          this.selectedRowsTableBaueigenschaften[0].typbezogeneBaueigenschaft
            .bauinformation
        );
        // ALT: Code mit Flattening, disabled:
        /*
        this.zugeordneteBauinformationAusgewaehlteBaueigenschaft = this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft.find(
          bauinformation => {
            return (
              bauinformation._id ===
              this.ausgewaehlteBaueigenschaft.bauinformationId
            );
          }
        );
        */
        // NEU: Code OHNE Flattening am Backend, 2-fach genestetes Objekt!!!
        this.selectModelBauinformationAusgewaehlteBaueigenschaft = this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft.find(
          bauinformation => {
            return (
              bauinformation._id ===
              this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft
                .bauinformation._id
            );
          }
        );
        // NEU: Date Felder aufbereiten in das von type="date" an den q-input Feldern erwartete Format "YYYY-MM-DD":
        // ACHTUNG: Funktioniert so nur im Zusammenspiel mit type="date" an den betreffenden Quasar-Feldern, welche
        //          in der Lage sind, diese Felder als native Date-Typen zu verarbeiten!
        //          Die Date-Utils verarbeiten als Argument nur diese Date-Typen, nicht Strings!
        this.ausgewaehlteBaueigenschaft.datumsWert1 = date.formatDate(
          this.ausgewaehlteBaueigenschaft.datumsWert1,
          "YYYY-MM-DD"
        );
        this.ausgewaehlteBaueigenschaft.datumsWert2 = date.formatDate(
          this.ausgewaehlteBaueigenschaft.datumsWert2,
          "YYYY-MM-DD"
        );
      }
    },

    changeAngezeigtesTabBaueigenschaften(value) {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode, um das ausgewählte Tab für die Baueigenschaften zu initialisieren und es anzuzeigen
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In changeAngezeigtesTabBaueigenschaften() - value: ", value);
      this.tabBaueigenschaften = value;
      if (this.tabBaueigenschaften === "neuTabBaueigenschaften") {
        this.initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenNeueBaueigenschaft();
        this.resetNeueBaueigenschaft();
        // NEU - experimentell - Kontexthilfethema per Event setzen (wird verarbeitet durch MyLayout/rechter Drawer)
        this.notifyTopicContextHelp(
          CONTEXT_HELP_BAUEINHEITEN_BAUEIGENSCHAFTEN_NEU
        );

        // NEU - Bedienungshilfe im rechten Drawer steuern über globalStore
        // NEU: Ist nicht mehr nötig, da die Steuerung nun doch über Events erfolgt (da mehrere verschachtelte Expansion Items gleichzeitig zu öffnen sind)
        // globalStore.setIsSelectedNeuBaueigenschaftenBaueinheiten(); // Für Bedienungshilfe setzen

        // NEU - Event abfeuern zum Anzeigen des richtigen Bedienungshilfethemas:
        this.showBedienungsHilfe(
          "bedienungsHilfeNeuBaueigenschaftenBaueinheiten"
        ); // Aufruf mit String-Parameter ref des betreffenden q-expansion-items
      }
      if (
        this.tabBaueigenschaften === "auswahlTabBaueigenschaften" ||
        this.tabBaueigenschaften === "beschreibungTabBaueigenschaften"
      ) {
        this.initialisiereAusgewaehltesTabBaueigenschaften();
        // this.pruefeAktivierungFuerAusgewaehlteBaueigenschaft();
        // Setzen Kontexthilfethema wird für Button "Bearbeiten" in initialisiereAusgewaehltesTabBaueigenschaften(); mit erledigt (asymmetrisch zu "Neu") - TODO
        /* this.notifyTopicContextHelp(
          CONTEXT_HELP_BAUEINHEITEN_BAUEIGENSCHAFTEN_AUSWAHL
        );
        */
      }
    },

    createNeueBaueigenschaft() {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode - legt eine neue Baueigenschaft im Backend an und lädt den Baum dann neu.
      //--------------------------------------------------------------------------------------------------------------------
      console.log("In createNeueBaueigenschaft()");
      // Zuerst selectModelBauinformationNeueBaueigenschaft nach neueBaueigenschaft.bauinformation kopieren
      // (= aktuell per q-select im Tab ausgewaehlte, neue oder potentiell auch leere Bauinformation), damit diese abgespeichert wird.
      // ACHTUNG: Der Fall, dass das select model leer ist und damit auch bauinformation null ist, muss im Controller speziell behandelt werden!!!

      this.neueBaueigenschaft.bauinformation =
        this.selectModelBauinformationNeueBaueigenschaft === {}
          ? null
          : this.selectModelBauinformationNeueBaueigenschaft;
      // Nun ggf. das Select Model für den Aufzählungswert nach neueBaueigenschaft.selektierbareOptionenAufzaehlungswert kopieren:
      if (
        this.neueBaueigenschaft.typbezogeneBaueigenschaft.werteTyp ===
        "Aufzählungswert"
      ) {
        this.neueBaueigenschaft.typbezogeneBaueigenschaft.selektierbareOptionenAufzaehlungsWert = this.selectModelAufzaehlungswertNeueBaueigenschaft;
      }

      this.neueBaueigenschaft.baumTyp = "Bauvorhabenbaum"; // NEU: Parameter zur Unterscheidung des BaumTyps, hier Bauvorhabenbaum
      // NEU: Neuanlage mit idBaustoff statt baustoffBezeichnung als Argument:
      this.neueBaueigenschaft.idKnoten = this.selectedKeyTreeBaueinheiten; // HINWEIS: idKnoten heißt dieses Feld im Body für API-Methode createBaueigenschaft()

      // Triggere nun Erzeugung der neuen Baueigenschaft am Backend:
      // HINWEIS: Die übrigen Felder in neueBaueigenschaft (baueigenschatsBemerkung, symbol, einheit, operator, formel, Wertefelder, etc. werden nun "flach" an das
      // Backend geschickt zur Verarbeitung durch die Post-API-Methode createBaueigenschaft()
      // NEU:
      const apiRoute = process.env.API + "/Baueigenschaften/";
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      console.log("Vor Emit to leave room 'roomBauvorlagen'");
      this.$socket.emit("leaveRoom", {
        room: "roomBauvorlagen"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBauvorlagen'");
      //=========================================================================================================================================
      // ACHTUNG: Hier zusätzlich Leave für roomBaueigenschaften notwendig, denn es wird ja eine neue Baueigenschaft angelegt!
      console.log("Vor Emit to leave room 'roomBaueigenschaften'");
      this.$socket.emit("leaveRoom", {
        room: "roomBaueigenschaften"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBaueigenschaften'");
      //=========================================================================================================================================
      this.$axios
        .post(apiRoute, this.neueBaueigenschaft)
        .then(response => {
          // NEU: Banner-Benutzernachricht im Footer per global Store und Enums:
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFT_NEUANLAGE_ERFOLG
          );
          this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Hier alter Refresh notwendig, weil Baum komplett neu aufgebaut werden muss mit der neuen Baueigenschaft!!!
        })
        // NEU: Catch für Error 403 - Baueigenschaft mit dieser Bezeichnung existiert bereits
        .catch(error => {
          console.log("error: ", error);
          if (error.response.status === 403) {
            console.log(
              "Error 403 - Baueigenschaft mit dieser Bezeichnung existiert bereits"
            );
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.BAUEIGENSCHAFT_NEUANLAGE_FEHLER_BEZEICHNUNG_EXISTIERT_BEREITS
            );
          }
        });
    },

    deleteSelectedBaueigenschaft: function(
      wertBezogeneBaueigenschaftenLoeschenInBaumTyp = "Bauvorhabenbaum"
    ) {
      //------------------------------------------------------------------------------------------------------------------
      // Funktion, um eine an einer im Bauvorhabenbaum ausgewählte Baueinheit ausgewählte Baueigenschaft in allen
      // Baueinheiten zu löschen
      // NEU - #395: Selektives Löschen in den zwei Baumtypen unterstützen
      // Damit wird hier die wertebezogene Baueigenschaft nur noch im jeweiligen Baumtyp - hier dem Bauvorhabenbaum - gelöscht
      // ACHTUNG: Bei Baueigenschaften, die nur in diesem Baumtyp angelegt wurden, kann dann eine "leere" typbezogene BEg übrig bleiben!
      // Diese kann jedoch in "Baueigenschaften" mit der dortigen Löschfunktion endgültig gelöscht werden!
      // Dazu zweiter Parameter und gleichnamigen Request-Parameter am API eingeführt:
      //    wertBezogeneBaueigenschaftenLoeschenInBaumTyp - "Allgemein", "Baustoffbaum", "Bauvorhabenbaum"
      //------------------------------------------------------------------------------------------------------------------
      console.log("In deleteSelectedBaueigenschaft()");
      console.log(
        "wertBezogeneBaueigenschaftenLoeschenInBaumTyp: ",
        wertBezogeneBaueigenschaftenLoeschenInBaumTyp
      );
      // NEU:
      const apiRoute =
        process.env.API +
        "/Baueigenschaften/" +
        this.selectedRowsTableBaueigenschaften[0].typbezogeneBaueigenschaft
          ._id + // NEU - ohne Flattening
        // this.selectedRowsTableBaueigenschaften[0].typbezogeneBaueigenschaftId; // ALT - mit Flattening
        // ACHTUNG: Löschen by id der (typbezogenen) Baueigenschaft, NICHT der id der Baueigenschaft (= _id) selbst
        // NEU - #395: Selektives Löschen nur noch am jeweiligen Baumtyp:
        "/" +
        wertBezogeneBaueigenschaftenLoeschenInBaumTyp;
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      console.log("Vor Emit to leave room 'roomBauvorlagen'");
      this.$socket.emit("leaveRoom", {
        room: "roomBauvorlagen"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBauvorlagen'");
      //=========================================================================================================================================
      // ACHTUNG: Hier zusätzlich Leave für roomBaueigenschaften notwendig, denn es wird ja eine Baueigenschaft gelöscht!
      console.log("Vor Emit to leave room 'roomBaueigenschaften'");
      this.$socket.emit("leaveRoom", {
        room: "roomBaueigenschaften"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBaueigenschaften'");
      //=========================================================================================================================================
      this.$axios
        .delete(apiRoute)
        .then(response => {
          console.log(response);
          this.reloadTreeWrapper("Nicht optimiert"); // ACHTUNG: Alter refresh notwendig, weil der Array der Baueigenschaften auch in
          // Geschwisterknoten geändert werden muss - der neue refresh refreshed diese NICHT!!!
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFT_LOESCHEN_ERFOLG
          );
          this.deleteSelectedBaueigenschaftDialog = false; // NEU
          this.selectedRowsTableBaueigenschaften = [];
        })
        .catch(error => {
          console.log("Fehler beim Löschen von Baueigenschaft");
          console.log(error);
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFT_LOESCHEN_FEHLER
          );
          this.deleteSelectedBaueigenschaftDialog = false; // NEU
        });
    },

    //---------------------------------------------------------------------------------------------------------------------
    // Methoden für die q-table für Baueigenschaften:
    //---------------------------------------------------------------------------------------------------------------------

    // ACHTUNG: Die folgende Funktion wird auch für die q-table für die zugeordneten Bauinformationen benutzt!!!
    getPaginationLabel: function(firstRowIndex, endRowIndex, totalRowsNumber) {
      //--------------------------------------------------------------------------------------------------------------------
      // Funktion, um in QTable das Pagination Label unten rechts in deutsch anzuzeigen.
      // Wird in q-tables für Baueigenschaften UND Bauinformationen verwewndet
      // Sonst würde z.B. "1 - 25 of 500" angezeigt werden,
      // Wird im Templates oben durch :pagination-label="getPaginationLabel" verwendet.
      // ACHTUNG: Sicherheitshalber von data() nach methods verschoben!!!
      //--------------------------------------------------------------------------------------------------------------------
      return firstRowIndex + " - " + endRowIndex + " von " + totalRowsNumber;
    },

    getSelectedStringTableBaueigenschaften: function() {
      //--------------------------------------------------------------------------------------------------------------------
      // Funktion, um in QTable das selected label unten links deutsch anzuzeigen.
      // Sonst würde z.B. "2 records selected" angezeigt werden.
      // Wird im Template oben durch :selected-rows-label="getSelectedString" verwendet.
      // ACHTUNG: Muss unbedingt in "methods" deklariert werden, NICHT oben in data ()!!!
      //--------------------------------------------------------------------------------------------------------------------
      // console.log(
      //  "In getSelectedStringTableBaueigenschaften() - length:", this.selectedRowsTableBauinformationen.length
      //   ); */
      return this.selectedRowsTableBaueigenschaften.length === 0
        ? ""
        : `${this.selectedRowsTableBaueigenschaften.length} Eigenschaft${
            this.selectedRowsTableBaueigenschaften.length > 1 ? "en" : ""
          } ausgewählt von ${
            this.selectedNodeTreeBaueinheiten.baueigenschaften.length
          }`;
      // ACHTUNG: Hier dataTableBaueigenschaften.length zu verwenden statt selectedRowsTableBaueigenschaften.length, falls
      // dataTableBaueigenschaften statt selectedRowsTableBaueigenschaften als v-model für die QTable für die Baueigenschaften
      // dienen würde (aktuell nicht der Fall)
    },

    toggleBooleanFieldTableBaueigenschaften(row, booleanColumnField) {
      //--------------------------------------------------------------------------------------------------------------------
      // Methode für das Togglen von Boolean-Werten in der QTable für Baueigenschaften
      // Parameter:
      // - row - (Referenz auf eine) Row aus der QTable
      //         ACHTUNG: Mit dieser wird dann dataTableBaueigenschaften direkt aktualisiert
      // - booleanColumnField - Das zu aktualisierende Boolean Feld in der Row (d.h. dessen "name" in {"name": value})
      // Per row[booleanColumnField] wird dann die Property booleanColumnField im Objekt row geändert
      // (d.h., da Boolean-Wert erwartet wird, einfach getoggled)
      // ACHTUNG: row.booleanColumnField wäre undefined, da booleanColumnField eine Variable ist - JS sucht im Row Objekt nach
      // einer Eigenschaft mit dem Stringnamen "booleanColumnField" => undefined

      // TODO XXXXXX: Spezialisierung der Methode für Aktivierungszustand vs. andere Boolean-Felder
      // Aktuell funktioniert die Methode nur auf dem Boolean-Feld aktiviertNichtDeaktiviert!!!
      // Sie aktiviert bzw. deaktiviert die Baueigenschaft auch in der Datenbank!
      //--------------------------------------------------------------------------------------------------------------------
      console.log(
        "In toggleBooleanFieldTableBaueigenschaften() für Baueinheiten"
      );
      console.log("booleanColumnField: ", booleanColumnField);
      console.log(
        "Bisheriger, zu togglender Wert von row[booleanColumnField]: ",
        row[booleanColumnField]
      );
      let idSelectedRow = row._id;
      this.selectedRowsTableBaueigenschaften[0] = row;
      row[booleanColumnField] = !row[booleanColumnField]; // TODO/ACHTUNG: Funktioniert nicht, wenn das Feld undefined ist,
      // was z.B. der Fall sein kann bei obligatorischNichtOptional!
      var apiRoute =
        process.env.API +
        "/Baueinheiten/" +
        this.selectedKeyTreeBaueinheiten + // id des Baustoffs
        "/Baueigenschaft/toggleAktivierungszustand";
      // this.pruefeAktivierungFuerAusgewaehlteBaueigenschaft()
      // this.selectedRowsTableBaueigenschaften[0].aktiviertNichtDeaktiviert = !this.selectedRowsTableBaueigenschaften[0].aktiviertNichtDeaktiviert
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      console.log("Vor Emit to leave room 'roomBauvorlagen'");
      this.$socket.emit("leaveRoom", {
        room: "roomBauvorlagen"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBauvorlagen'");
      //=========================================================================================================================================
      this.$axios
        .put(/* url */ apiRoute, {
          baueigenschaft: this.selectedRowsTableBaueigenschaften[0],
          // ALT: idBaueigenschaft: this.selectedRowsTableBaueigenschaften[0]._id,
          idBaueigenschaft: this.selectedRowsTableBaueigenschaften[0]
            .typbezogeneBaueigenschaft._id, // NEU
          definiertNichtUndefiniert: false, // Wird nicht verwendet
          vorgabeWerteUeberschreibenVorhandeneWerte: this.localStore.state
            .einstellungenBenutzer.vorgabeWerteUeberschreibenVorhandeneWerte // #357
        })
        .then(async updateResponse => {
          this.$refs.tableBaueigenschaften.clearSelection();
          await this.reloadTreeWrapper("Optimiert"); // Aktualisiere den Bauvorhabenbaum, der ausgewählte Knoten bleibt dabei erhalten,
          // sein Inhalt kann sich geändert haben!

          // NEU: Banner-Benutzernachricht im Footer per global Store und Enums:
          console.log(
            "In updateAusgewaehlteBaueigenschaft() - Update der Baueigenschaft erfolgreich"
          );
          console.log(idSelectedRow);
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEIGENSCHAFT_AENDERUNG_ERFOLG
          );
          this.selectedRowsTableBaueigenschaften.push(
            this.selectedNodeTreeBaueinheiten.baueigenschaften.find(
              arg => idSelectedRow === arg._id
            )
          ); // Sucht in der aktualisierten Tabelle der Baueigenschaften an der ausgewählten Baueinheit per id nach der gerade aktualisierten Baueigenschaft
          // und aktualisiert die ausgewählte Baueigenschaft auf die Werte der aktualisierten Baueigenschaft an der ausgewählten Baueinheit im aus der Datenbank
          // neu geladenen Bauvorhabenbaum - dabei ist der Key in der QTable derselbe wie vor dem Update
          /*
            this.ausgewaehlteBaueigenschaft = this.selectedRowsTableBaueigenschaften[0];
            console.log(
              "Selected Row in Tabelle für Baueigenschaften wurde aktualisiert"
            );
            */
        });
      //
    },

    bearbeiteEigenschaftAusContextMenuTableBaueigenschaften(props) {
      //----------------------------------------------------------------------------------------------------------------------------
      // Methode für das Bearbeiten einer Baueigenschaft per Context Menu in der QTable für Baueigenschaften
      // Parameter:
      // - props - (Referenz auf die) Props aus QTable
      //----------------------------------------------------------------------------------------------------------------------------
      props.selected = true; // Selektiere die betreffende Row programmatisch über das selected Settings in den Props
      this.changeAngezeigtesTabBaueigenschaften("auswahlTabBaueigenschaften"); // Initialisiere ausgewaehlteBaueigenschaft und
      // wechsle zum Tab "Auswahl"
    },

    toggleSpaltenWeitereTypbezogeneAngaben() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in der QTable für Baueigenschaften die Spaltensichtbarkeit für die fachlichen Angaben
      //----------------------------------------------------------------------------------------------------------------------------
      if (this.weitereTypbezogeneAngabenAnzeigen) {
        this.visibleColumnsTableBaueigenschaften.push(
          "baueigenschaftsBemerkung"
        );
        // ALT:
        /*
        this.visibleColumnsTableBaueigenschaften.push(
          "bauinformationsBezeichnung"
        );
        */
        // NEU - statt bauinformationsBezeichnung:
        this.visibleColumnsTableBaueigenschaften.push(
          "bauinformationsAnzeigeText"
        );
        this.visibleColumnsTableBaueigenschaften.push("bauinformationsTyp");
        this.visibleColumnsTableBaueigenschaften.push(
          "baueigenschaftsAnzeigeText"
        ); // NEU: #514
        this.visibleColumnsTableBaueigenschaften.push(
          "systemdefiniertNichtBenutzerdefiniert"
        ); // NEU: #514
        this.visibleColumnsTableBaueigenschaften.push("sollwertNichtIstwert"); // NEU: #514
      } else {
        this.visibleColumnsTableBaueigenschaften = this.visibleColumnsTableBaueigenschaften.filter(
          value =>
            value !== "baueigenschaftsBemerkung" &&
            // value !== "bauinformationsBezeichnung" && // ALT
            value !== "bauinformationsAnzeigeText" && // NEU
            value !== "bauinformationsTyp" &&
            value !== "baueigenschaftsAnzeigeText" && // NEU: #514
            value !== "systemdefiniertNichtBenutzerdefiniert" && // NEU: #514
            value !== "sollwertNichtIstwert" // NEU: #514
          // TODO: && value !== "bauinformation"
        );
      }
    },

    toggleSpaltenKennwertbezogeneAngaben() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Baueigenschaften die Spaltensichtbarkeit für die kennwertbezogenen Angaben
      //-------------------------------------------------------------------------------------------------------------------------------
      if (this.kennwertbezogeneAngabenAnzeigen) {
        this.visibleColumnsTableBaueigenschaften.push("einheit");
        this.visibleColumnsTableBaueigenschaften.push("symbol");
        this.visibleColumnsTableBaueigenschaften.push("operator");
        this.visibleColumnsTableBaueigenschaften.push("formel"); // NEU
      } else {
        this.visibleColumnsTableBaueigenschaften = this.visibleColumnsTableBaueigenschaften.filter(
          value =>
            value !== "einheit" &&
            value !== "symbol" &&
            value !== "operator" &&
            value !== "formel" // NEU: "formel"
        );
      }
    },

    toggleSpaltenWertbezogeneMerkmale() {
      //--------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Baueigenschaften die Spaltensichtbarkeit für die wertbezogenen Merkmale
      //--------------------------------------------------------------------------------------------------------------------------
      if (this.wertbezogeneMerkmaleAnzeigen) {
        for (let i = 0; i < this.wertbezogeneMerkmaleArray.length; i++) {
          this.visibleColumnsTableBaueigenschaften.push(
            this.wertbezogeneMerkmaleArray[i]
          );
        }
      } else {
        this.visibleColumnsTableBaueigenschaften = this.visibleColumnsTableBaueigenschaften.filter(
          value => !this.wertbezogeneMerkmaleArray.includes(value)
        );
      }
    },

    toggleSpaltenSchutzKategorien() {
      //----------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Baueigenschaften die Spaltensichtbarkeit für die Schutzkategorien
      //----------------------------------------------------------------------------------------------------------------------
      //this.schutzKategorienAnzeigen = !this.schutzKategorienAnzeigen;
      if (this.schutzKategorienAnzeigen) {
        for (let i = 0; i < this.schutzKategorienArray.length; i++) {
          this.visibleColumnsTableBaueigenschaften.push(
            this.schutzKategorienArray[i]
          );
        }
      } else {
        this.visibleColumnsTableBaueigenschaften = this.visibleColumnsTableBaueigenschaften.filter(
          value => !this.schutzKategorienArray.includes(value)
        );
      }
    },

    toggleSpaltenWertbezogeneAngaben() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Baueigenschaften die Spaltensichtbarkeit für die wertbezogenen Angaben
      //----------------------------------------------------------------------------------------------------------------------------
      if (this.wertbezogeneAngabenAnzeigen) {
        for (let i = 0; i < this.wertbezogeneAngabenArray.length; i++) {
          this.visibleColumnsTableBaueigenschaften.push(
            this.wertbezogeneAngabenArray[i]
          );
        }
      } else {
        this.visibleColumnsTableBaueigenschaften = this.visibleColumnsTableBaueigenschaften.filter(
          value => !this.wertbezogeneAngabenArray.includes(value)
        );
      }
    },

    toggleSpaltenAktivierungsMerkmale() {
      //--------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Baueigenschaften die Spaltensichtbarkeit für die Aktivierungsmerkmale
      //--------------------------------------------------------------------------------------------------------------------------
      if (this.aktivierungsMerkmaleAnzeigen) {
        for (let i = 0; i < this.aktivierungsMerkmaleArray.length; i++) {
          this.visibleColumnsTableBaueigenschaften.push(
            this.aktivierungsMerkmaleArray[i]
          );
        }
      } else {
        this.visibleColumnsTableBaueigenschaften = this.visibleColumnsTableBaueigenschaften.filter(
          value => !this.aktivierungsMerkmaleArray.includes(value)
        );
      }
    },

    //------------------------------------------------------------------------------------------------------------------------------
    // Methoden für die q-table für die zugeordneten Bauinformationen:
    //------------------------------------------------------------------------------------------------------------------------------
    //---------------------------------------------------------------------------------------------------------------------
    // Gemeinsamer Toggle Button für alle Q-Table Spalten in der QTable für die Bauinformationen
    // ACHTUNG: Die einzelnen Toggles für die visible Columns fügen auch jeweils "ihren" Array-Wert HINTEN an den Array an!
    // Oder sie löschen "ihre" Werte aus dem Array an beliebiger Position
    // Dadurch kann sich die Länge des Arrays und die Position eines Wertes im Array über die Zeit verändern!
    toggleAllColumns() {
      console.log("In toggleAllColumns()");
      if (this.toggleAllColumnsState) {
        // "Viele Spalten"
        this.visibleColumnsTableBauinformationen.length = 0;
        this.visibleColumnsTableBauinformationen.push(
          // Array initialisieren mit allen Kategorien außer den 10 Normkategorien:
          // Hinweis: Würde hier eigentlich auch nicht-reaktiv durch normale Zuweisung statt push funktionieren (getestet)
          "bauinformationsBezeichnung",
          "bauinformationsTyp",
          "benutzerKennungenAutoren", // NEU
          "bauinformationsAnzeigeText", // NEU
          "bauinformationsBemerkung",
          "herausgeberGeografie",
          "herausgeberInstitution",
          "herausgeberBezeichnung",
          "herausgeberBundeslandDeutschland",
          "herausgeberBundeslandÖsterreich",
          "herausgeberKantonSchweiz",
          "gültigkeitsDatumVon",
          "gültigkeitsDatumBis",
          "normTypDIN",
          "normTypÖNORM",
          "normTypSN",
          "normTypEN",
          "normTypISO",
          "internerLink",
          "externerLink",
          "oneDriveLink" // NEU
          /*
          "grundNorm",
          "terminologieNorm",
          "prüfNorm",
          "produktNorm",
          "verfahrensNorm",
          "dienstleistungsNorm",
          "schnittstellenNorm",
          "deklarationsNorm",
          "fachbereichsNorm",
          "werkNorm"
          */
        );
        console.log(
          "In toggleAllColumns mit Toggle auf EIN - visibleColumnsTableBauinformationen:",
          this.visibleColumnsTableBauinformationen
        );

        // ACHTUNG: toggleAllColumnsState darf nicht invertiert werden - wird von q-toggle v-model automatisch gemacht!!!
        // this.toggleAllColumnsState = !this.toggleAllColumnsState;
        // Nur wenn :value statt v-model verwendet wird am q-toggle, muss der State in der @input-Methode invertiert werden!!!
        // Kan getestet werden in https://codepen.io/mickey58/pen/NWxdqKO?editors=1011

        // NEU: Auch die neuen Gruppen-Toggles alle einschalten - sonst sind diese Toggles eventuell inkonsistent:
        this.regionenAnzeigen = true;
        // console.log("regionenAnzeigen: ", this.regionenAnzeigen);
        // this.$refs.toggleRegionenAnzeigen.toggle(); // Überflüssig
        this.gueltigkeitAnzeigen = true;
        // this.$refs.toggleGueltigkeitAnzeigen.toggle(); // Überflüssig
        this.normTypenAnzeigen = true;
        // this.$refs.normTypenAnzeigen.toggle(); // Überflüssig
        this.linksAnzeigen = true;
        // this.$refs.linksAnzeigen.toggle(); // Überflüssig

        // NEU: Den Toggle für die Normkategorien ausschalten - sonst ist dieser Toggle eventuell inkonsistent:
        this.toggleAllNormkategorienState = false;
      } else {
        // "Wenige Spalten"
        // Array leeren außer den 4 ersten Spalten
        // Hinweis: Würde hier eigentlich auch nicht-reaktiv durch normale Zuweisung statt push funktionieren (getestet)
        this.visibleColumnsTableBauinformationen.length = 0;
        this.visibleColumnsTableBauinformationen.push(
          "bauinformationsBezeichnung",
          "benutzerKennungenAutoren",
          "bauinformationsTyp",
          // "bauinformationsBemerkung", // NEU: Weggelassen
          "bauinformationsAnzeigeText" // NEU: Dazugenommen
        );

        console.log(
          "In toggleAllColumns mit Toggle auf AUS - visibleColumnsTableBauinformationen:",
          this.visibleColumnsTableBauinformationen
        );

        // ACHTUNG: toggleAllColumnsState darf nicht invertiert werden - wird von q-toggle v-model automatisch gemacht!!!
        // this.toggleAllColumnsState = !this.toggleAllColumnsState;
        // Nur wenn :value statt v-model verwendet wird am q-toggle, muss der State in der @input-Methode invertiert werden!!!
        // Kann getestet werden in https://codepen.io/mickey58/pen/NWxdqKO?editors=1011

        // NEU: Auch die neuen Gruppen-Toggles alle ausschalten - sonst sind diese Toggles eventuell inkonsistent:
        this.regionenAnzeigen = false;
        // this.$refs.toggleRegionenAnzeigen.toggle(); // Überflüssig
        this.gueltigkeitAnzeigen = false;
        // this.$refs.toggleGueltigkeitAnzeigen.toggle(); // Überflüssig
        this.normTypenAnzeigen = false;
        // this.$refs.toggleNormTypenAnzeigen.toggle(); // Überflüssig
        this.linksAnzeigen = false;
        // this.$refs.toggleLinksAnzeigen.toggle(); // Überflüssig

        // NEU: Auch den Toggle für die Normkategorien ausschalten -  sonst ist dieser Toggle eventuell inkonsistent:
        this.toggleAllNormkategorienState = false;
      } // else

      console.log(
        "Am Ende von toggleAllColumns - toggleAllColumnsState neu: ",
        this.toggleAllColumnsState
      );
      // ALT:
      // this.$refs.toggleAllColumns.toggle(); // Führt zu infinite Loop!!!
      // await this.$nextTick(); // nur mit async function oben!
      // console.log("After next tick");
    },

    //---------------------------------------------------------------------------------------------------------------------
    // Gemeinsamer Toggle Button für alle Q-Table Spalten, die Normkategorien emthalten
    // ACHTUNG: Die einzelnen Toggles für die visible Columns fügen auch jeweils "ihren" Array-Wert HINTEN an den Array an!
    // Oder sie löschen "ihre" Werte aus dem Array an beliebiger Position
    // Dadurch kann sich die Länge des Arrays und die Position eines Wertes im Array über die Zeit verändern!
    // Deshalb mussten die früher vorhandenen Einzel-Toggles für die Normkategorien entfernt werden, da inkompatibel mit der folgenden Methode
    toggleAllNormkategorien() {
      // "Alle Normkategorien"
      // if (this.btnClickCounter % 2 === 1) {
      if (this.toggleAllNormkategorienState) {
        this.visibleColumnsTableBauinformationen.push(
          // Adds 10 Normkategorien at end of array (first parameter)
          /*
          "bauinformationsBezeichnung",
          "bauinformationsTyp",
          "benutzerKennungenAutoren", // NEU
          "bauinformationsAnzeigeText", // NEU
          "bauinformationsBemerkung",
          "herausgeberGeografie",
          "herausgeberInstitution",
          "herausgeberBezeichnung",
          "herausgeberBundeslandDeutschland",
          "herausgeberBundeslandÖsterreich",
          "herausgeberKantonSchweiz",
          "gültigkeitsDatumVon",
          "gültigkeitsDatumBis",
          "normTypDIN",
          "normTypÖNORM",
          "normTypSN",
          "normTypEN",
          "normTypISO",
          "internerLink",
          "externerLink",
          "oneDriveLink", // NEU
          */
          "grundNorm",
          "terminologieNorm",
          "prüfNorm",
          "produktNorm",
          "verfahrensNorm",
          "dienstleistungsNorm",
          "schnittstellenNorm",
          "deklarationsNorm",
          "fachbereichsNorm",
          "werkNorm"
        );
        console.log(
          "In toggleAllNormkategorien mit Toggle auf EIN - visibleColumnsTableBauinformationen:",
          this.visibleColumnsTableBauinformationen
        );
      } else {
        // "Keine Normkategorien"
        // if (this.btnClickCounter % 2 === 0) {
        // if (this.toggleAllNormkategorienState) {
        // Achtung: Da sich durch Togglen von anderen Toggles die Position von Normkategorien im Array visibleColunmnsBauinformationen ändern kann,
        // kann man nicht einfach hinten am Array mit der Splice-Funktion die 10 dort anfangs eingefügten Normkategorien abschneiden!!!
        // D.h. das Folgende funktioniert nicht so einfach, sondern schneidet evtl. andere getogglete Werte einfach mit ab:
        // this.visibleColumnsTableBauinformationen.splice(this.visibleColumnsTableBauinformationen.length - 10, 10);
        // Stattdessen müssen explizit die Normkategorien im Array herausgefiltert werden.
        // ACHTUNG: .filter liefert einen neuen Array zurück, funktioniert nicht direkt auf dem bisherigen Array!
        this.visibleColumnsTableBauinformationen = this.visibleColumnsTableBauinformationen.filter(
          value =>
            value !== "grundNorm" &&
            value !== "terminologieNorm" &&
            value !== "prüfNorm" &&
            value !== "produktNorm" &&
            value !== "verfahrensNorm" &&
            value !== "dienstleistungsNorm" &&
            value !== "schnittstellenNorm" &&
            value !== "deklarationsNorm" &&
            value !== "fachbereichsNorm" &&
            value !== "werkNorm"
        );

        console.log(
          "In toggleAllNormkategorien mit Toggle auf AUS - visibleColumnsTableBauinformationen:",
          this.visibleColumnsTableBauinformationen
        );
      }
      // this.btnClickCounter += 1; // ALT
      // ACHTUNG: toggleAllNormkategorienState darf nicht invertiert werden - wird von q-toggle v-model automatisch gemacht!!!
      // this.toggleAllNormkategorienState = !this.toggleAllNormkategorienState;
      console.log(
        "Am Ende von toggleAllNormKategorien - toggleAllNormkategorienState neu: ",
        this.toggleAllNormkategorienState
      );

      // this.$refs.toggleAllNormkategorien.toggle(); // Führt zu infinite Loop!!!
      // await this.$nextTick(); // nur mit async function oben!
      // console.log("After next tick");
    },
    /* eslint-disable no-console */

    //----------------------------------------------------------------------------------------------------------------------------
    // NEU: Funktionen für "Gruppen-Toggles", die jeweils die Sichtbarkeit mehrerer Spalten in der QTable togglen:

    toggleSpaltenRegionen() {
      //--------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Bauinformationen die Spaltensichtbarkeit für die Normtypen
      //--------------------------------------------------------------------------------------------------------------------------
      // console.log("In toggleSpaltenRegionen() - regionenAnzeigen: ", this.regionenAnzeigen);
      if (this.regionenAnzeigen) {
        for (let i = 0; i < this.regionenArray.length; i++) {
          this.visibleColumnsTableBauinformationen.push(this.regionenArray[i]);
        }
      } else {
        this.visibleColumnsTableBauinformationen = this.visibleColumnsTableBauinformationen.filter(
          value => !this.regionenArray.includes(value)
        );
      }
    },

    toggleSpaltenGueltigkeit() {
      //--------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Bauinformationen die Spaltensichtbarkeit für die Gültigkeit
      //--------------------------------------------------------------------------------------------------------------------------
      if (this.gueltigkeitAnzeigen) {
        for (let i = 0; i < this.gueltigkeitArray.length; i++) {
          this.visibleColumnsTableBauinformationen.push(
            this.gueltigkeitArray[i]
          );
        }
      } else {
        this.visibleColumnsTableBauinformationen = this.visibleColumnsTableBauinformationen.filter(
          value => !this.gueltigkeitArray.includes(value)
        );
      }
    },

    toggleSpaltenNormTypen() {
      //--------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Bauinformationen die Spaltensichtbarkeit für die Normtypen
      //--------------------------------------------------------------------------------------------------------------------------
      if (this.normTypenAnzeigen) {
        for (let i = 0; i < this.normTypenArray.length; i++) {
          this.visibleColumnsTableBauinformationen.push(this.normTypenArray[i]);
        }
      } else {
        this.visibleColumnsTableBauinformationen = this.visibleColumnsTableBauinformationen.filter(
          value => !this.normTypenArray.includes(value)
        );
      }
    },

    toggleSpaltenLinks() {
      //--------------------------------------------------------------------------------------------------------------------------
      // Methode - toggled in QTable für Bauinformationen die Spaltensichtbarkeit für die Links
      //--------------------------------------------------------------------------------------------------------------------------
      if (this.linksAnzeigen) {
        for (let i = 0; i < this.linksArray.length; i++) {
          this.visibleColumnsTableBauinformationen.push(this.linksArray[i]);
        }
      } else {
        this.visibleColumnsTableBauinformationen = this.visibleColumnsTableBauinformationen.filter(
          value => !this.linksArray.includes(value)
        );
      }
    },

    getSelectedStringTableBauinformationen: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Funktion, um in QTable das selected Label unten links auf Deutsch anzuzeigen.
      // Sonst würde z.B. "2 records selected" angezeigt werden.
      // Wird im Template oben durch :selected-rows-label="getSelectedStringTableBauinformationen" verwendet.
      // ACHTUNG: Muss unbedingt in "methods" deklariert werden, NICHT oben in data ()!!!
      //-------------------------------------------------------------------------------------------------------------------------------
      /* console.log(
        "In getSelectedStringTableBauinformationen() - length:",
        this.selectedRowsTableBauinformationen.length
      ); */
      return this.selectedRowsTableBauinformationen.length === 0
        ? ""
        : `${this.selectedRowsTableBauinformationen.length} Bauinformation${
            this.selectedRowsTableBauinformationen.length > 1 ? "en" : ""
          } ausgewählt von ${this.dataTableBauinformationen.length}`;
    },

    getSelectedBauinformation: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Funktion zur Berechnung der ausgewählten Bauinformation
      //-------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) return undefined; // ALT: {}
      // ACHTUNG: {} ist nicht dasselbe wie undefined, nur bei undefined wird per v-if das Tab ausgeblendet!!!
      return this.selectedRowsTableBauinformationen[0]; // Alle Felder im 1. Eintrag in den selektierten Rows
    },

    //--------------------------------------------------------------------------------------------------------------
    checkAusgewaehlteBauinformationAusQTableAufInternenLink() {
      // NEU: Für Button "Internen Link öffnen" im Tab "Übersicht":
      // Zuerst Aufruf dieser Methode, die prüft, ob überhaupt eine Bauinformation ausgewählt ist. Wenn keine ausgewählt ist,
      // triggered die Methode per v-model zunächst den anderen q-dialog, der einen Hinweis ausgibt, dass eine Bauinformation auszuwählen ist
      // und returned.
      // Ansonsten prüft sie, ob die (erste) ausgewählte Bauinformation einen validen internen Link hat und returned in diesem Fall.
      // Sonst stösst sie per v-model einen weiteren q-dialog mit Hinweis an, dass eine Bauinformation mit internem Link auszuwählen ist.
      // NEU: Andernfalls stösst sie die weitere Funktion openSelectedInternerLinkTableBauinformationen(); an, die das verlinkte File am Backend herunterlädt
      // aus MongoDB und diese im Browser öffnet
      // HINWEIS: Die Funktion "getSelectedInternerLinkTableBauinformationen" muss zur korrekten Gesamtfunktion returnen ohne Ergebnis, falls
      // selectedRowsTableBauinformationen[0].internerLink == null ist!

      if (this.selectedRowsTableBauinformationen.length === 0) {
        this.confirmHinweisAuswaehlenBauinformationAusQTable = true; // Hinweis, dass Bauinformation auszuwählen ist
        // return;
      } else {
        // Testen, ob interner Link vorhanden
        if (this.selectedRowsTableBauinformationen[0].internerLink == null) {
          this.confirmHinweisAuswaehlenBauinformationAusQTableMitInternemLink = true; // Hinweis, dass Bauinformation mit internem Link auszuwählen ist
        } else {
          this.openSelectedInternerLinkTableBauinformationen(); // NEU: Lädt File am Backend herunter aus MongoDB per API von dateien.controller.js
          // und öffnet diese im Browser
        }
      }
    },

    //-------------------------------------------------------------------------------------------------------------------------------------------------------
    // NEU: Methode zum Öffnen eines internen Links (in einem neuen Browser Tab) in der ausgewählten Bauinformation in der Tabelle "Zugeordnete Bauinformationen"
    // Für lokales und Heroku Cloud Deployment enabled
    openSelectedInternerLinkTableBauinformationen: function() {
      if (this.selectedRowsTableBauinformationen.length === 0) {
        return;
      }
      if (this.selectedRowsTableBauinformationen[0].internerLink == null) {
        return;
      }
      console.log(
        "In openSelectedInternerLinkTableBauinformationen() - selectedRowsTableBauinformationen[0].internerLink: ",
        this.selectedRowsTableBauinformationen[0].internerLink
      );
      // NEU: id der gespeicherten Datei steht in this.selectedRowsTableBauinformationen[0].idInternerLink
      // BIM.click Backend File Server API rufen, um mit dieser id die Datei aus der Datenbank zu lesen und am Backend File Server in tmp/download-Folder zur Verfügung zu stellen

      const apiRoute =
        process.env.fileAPI +
        "/Dateien/download/" +
        this.selectedRowsTableBauinformationen[0].idInternerLink; // id der zugehörigen hochgeladenen Datei in DateienCollection in Mongoose
      //
      this.$axios
        .get(apiRoute)
        .then(response => {
          console.log(
            "In openSelectedInternerLinkTableBauinformationen() nach HTTP Get Request für Download Datei - response.data: ",
            response.data
          );
          // ACHTUNG - TODO: Die folgende Abfrage auf [] ist per Tests immer false, also so nicht sinnvoll! Abfrage auf null oder {} ist ebenfalls false!!!
          if (
            response.data.dateiName === undefined ||
            response.data.dateiName === null ||
            response.data.dateiName === ""
          ) {
            console.log(
              "WARNUNG: Keine Datei gefunden - die herunterzuladende Datei kann z.B. inzwischen gelöscht worden sein"
            );
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.DATEI_NICHT_OEFFENBAR
            );
            return;
          }
          //-----------------------------------------------------------------------------------------------------------
          // URL zum Öffnen der Datei, jeweils für lokales Deployment und für Heroku Deployment, bestimmen:
          var downloadDir = null;
          var downloadURL = null;
          // TODO: XXXXXX - Die downloadURL für lokal und Production ist aktuell identisch, funktioniert auch in beiden Umgebungen, kann also zusammengeführt werden!!!
          if (process.env.NODE_ENV !== "production") {
            // Greift auch, wenn undefined!!!
            // Bei lokalem Deployment auf localhost:
            // ALT (für Testzwecke)
            // downloadDir = "statics/pdfs"; //
            // downloadURL =
            //   process.env.ownURL + "/" + downloadDir + "/" + response.data.dateiName; // HINWEIS: Dateiname könnte alternativ aus
            // selectedRowsTableBauinformationen[0].internerLink extrahiert werden
            // NEU (auch lokal Download aus Datenbank nach localhost:4444/tmp/download, welches statisch von Express geserved wird)
            downloadDir = "tmp/download";
            downloadURL =
              process.env.fileAPI +
              // "/" +
              // downloadDir +
              "/" +
              response.data.dateiName; // HINWEIS: Dateiname könnte alternativ aus
            // selectedRowsTableBauinformationen[0].internerLink extrahiert werden
          } else {
            // Bei Cloud Deployment auf Heroku:
            // downloadDir = "app/tmp/download"; // Wird nicht gebraucht bei Zugriff über express.static in file-server.js
            // gemäß https://stackoverflow.com/questions/35744597/how-to-link-pages-in-node
            // Die URLS zum Zugriff sind direkt: bimclickfiles.herokuapp.com/filename.ext
            downloadURL =
              // "https://" + // ACHTUNG: https:// ist entgegen ersten Annahmen hier doch nicht notwendig gegen Status 404/"cannot GET..." Errors
              // Im Gegenteil: Mit "https://" kommt in Tests sogar zweimal https://https://bimclickfiles als URL im Browser, was
              // zu "This website is unavailable..." Errors führt!!!
              process.env.fileAPI +
              // "/" +
              // downloadDir +
              "/" +
              response.data.dateiName; // HINWEIS: Dateiname könnte alternativ aus
            // selectedRowsTableBauinformationen[0].internerLink extrahiert werden
          }
          console.log("downloadDir: ", downloadDir);
          console.log("downloadURL: ", downloadURL);

          window.open(downloadURL, "_blank"); // Die URL in neuem Tab öffnen - siehe https://www.tutorialsplane.com/vue-js-open-link-in-new-tab/
        })
        .catch(error => {
          console.log("Fehler beim Get für Download Datei");
          console.log(error);
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.DATEI_NICHT_OEFFENBAR
          );
        });
    },

    //-------------------------------------------------------------------------------------------------------------------------------------
    oeffneExternenLinkAusgewaehlteBauinformationAusQTable() {
      // NEU: Funktion zum Öffnen des externen Links in neuem Browser Tab - wird verwendet bei Öffnen aus Kontextmenü in der QTable für die Bauinformationen
      // Siehe https://stackoverflow.com/questions/4907843/open-a-url-in-a-new-tab-and-not-a-new-window
      let win = window.open(
        this.selectedRowsTableBauinformationen[0].externerLink,
        "_blank"
      );
      win.focus();
    },

    //-------------------------------------------------------------------------------------------------------------------------------------
    oeffneOneDriveLinkAusgewaehlteBauinformationAusQTable() {
      // NEU: Funktion zum Öffnen des OneDrive-Links in neuem Browser Tab - wird verwendet bei Öffnen aus Kontextmenü in der QTable für die Bauinformationen
      // Siehe https://stackoverflow.com/questions/4907843/open-a-url-in-a-new-tab-and-not-a-new-window
      let win = window.open(
        this.selectedRowsTableBauinformationen[0].oneDriveLink,
        "_blank"
      );
      win.focus();
    },

    checkAusgewaehlteBauinformationAusQTableAufExternenLink() {
      //------------------------------------------------------------------------------------------------------------------------------------
      // NEU für Button "Externen Link öffnen":
      // Zuerst Aufruf dieser Methode, die prüft, ob überhaupt eine Bauinformation ausgewählt ist. Wenn keine ausgewählt ist,
      // triggered die Methode per v-model zunächst den anderen q-dialog, der einen Hinweis ausgibt, dass eine Bauinformation auszuwählen
      // ist und returned.
      // Ansonsten prüft sie, ob die (erste) ausgewählte Bauinformation einen validen externen Link hat und returned in diesem Fall.
      // Sonst stösst sie per v-model einen weiteren q-dialog mit Hinweis an, dass eine Bauinformation mit externem Link auszuwählen ist.
      // Sonst returned sie, wodurch dann der Button "Externen Link öffnen" z.B. das PDF anzeigt.
      // HINWEIS: Die Funktion "getSelectedExternerLinkTableBauinformationen" muss zur korrekten Gesamtfunktion returnen ohne Ergebnis,
      // falls selectedRowsTableBauinformationen[0].externerLink == null ist!
      //------------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        this.confirmHinweisAuswaehlenBauinformationAusQTable = true; // Hinweis, dass Bauinformation auszuwählen ist
        // return;
      } else {
        // Testen, ob externer Link vorhanden
        if (this.selectedRowsTableBauinformationen[0].externerLink == null) {
          this.confirmHinweisAuswaehlenBauinformationAusQTableMitExternemLink = true; // Hinweis, dass Bauinformation mit externem Link auszuwählen ist
        }
      }
    },

    checkAusgewaehlteBauinformationAusQTableAufOneDriveLink() {
      //------------------------------------------------------------------------------------------------------------------------------------
      // NEU für Button "OneDrive-Link öffnen":
      // Zuerst Aufruf dieser Methode, die prüft, ob überhaupt eine Bauinformation ausgewählt ist. Wenn keine ausgewählt ist,
      // triggered die Methode per v-model zunächst den anderen q-dialog, der einen Hinweis ausgibt, dass eine Bauinformation auszuwählen
      // ist und returned.
      // Ansonsten prüft sie, ob die (erste) ausgewählte Bauinformation einen validen OneDrive-Link hat und returned in diesem Fall.
      // Sonst stösst sie per v-model einen weiteren q-dialog mit Hinweis an, dass eine Bauinformation mit OneDrive-Link auszuwählen ist.
      // Sonst returned sie, wodurch dann der Button "OneDrive-Link öffnen" z.B. das PDF anzeigt.
      // HINWEIS: Die Funktion "getSelectedOneDriveLinkTableBauinformationen" muss zur korrekten Gesamtfunktion returnen ohne Ergebnis,
      // falls selectedRowsTableBauinformationen[0].oneDriveLink == null ist!
      //------------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        this.confirmHinweisAuswaehlenBauinformationAusQTable = true; // Hinweis, dass Bauinformation auszuwählen ist
        // return;
      } else {
        // Testen, ob OneDrive-Link vorhanden
        if (this.selectedRowsTableBauinformationen[0].oneDriveLink == null) {
          this.confirmHinweisAuswaehlenBauinformationAusQTableMitOneDriveLink = true; // Hinweis, dass Bauinformation mit OneDrive-Link auszuwählen ist
        }
      }
    },

    initialisiereAusgewaehltesTabBaueinheiten() {
      //------------------------------------------------------------------------------------------------------------------------------------
      // Methode zur Initialisierung der Tabs für die ausgewählte Baueinheit (Strukturierungsangaben/Beschreibung/Baueigenschaften/Zugeordnete
      // Baustoffe/Zugeordnete Bauinformationen/Sonstiges)
      // Für das Tab "Zugeordnete Bauinformationen":
      //   Initialisiert selectModelBauinformationenAusgewaehlteBaueinheit für das q-select zum Auswählen/Abwählen mit den zugeordneten Bauinformationen
      //   der ausgewählten Baueinheit
      // NEU: Für das Tab "Zugeordnete Baustoffe":
      //   Lädt den Baustoffbaum in dem entsprechenden Tab Panel
      // Wird aufgerufen bei Klick auf eines der Tabs (@input-Event)
      // ACHTUNG: Das Tab "Baueigenschaften" (Default-Tab) wird hier nicht initialisiert, sondern bereits im watch für selectedKeyTreeBaueinheiten, wenn eine
      //          Baueinheit im Baum ausgewählt wird
      //-------------------------------------------------------------------------------------------------------------------------------------
      console.log("In initialisiereAusgewaehltesTabBaueinheiten()");
      //--------------------------------------------------------------------------------------------------------------------------------------------
      if (this.tabBaueinheiten === "strukturierungsAngabenTabBaueinheiten") {
        // Model für q-select laden:
        this.selectModelAutorenAusgewaehlteBaueinheit = this.selectedNodeTreeBaueinheiten.benutzerKennungenAutoren;
        // ACHTUNG: Muss Array sein bei Selection "multiple"
        // selectedNodeTreeBaueinheiten ist computed!
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectModelBauinformationenAusgewaehlteBaueinheit hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        console.log(
          "selectModelAutorenAusgewaehlteBaueinheit: ",
          this.selectModelAutorenAusgewaehlteBaueinheit
        );
        this.initialisiereSelectOptionsUndSelectFilterOptionsAutorenAusgewaehlteBaueinheit();
      }
      //--------------------------------------------------------------------------------------------------------------------------------------------
      if (
        this.tabBaueinheiten === "zugeordneteBauinformationenTabBaueinheiten"
      ) {
        // Model für q-select laden mit den bereits für die Baueinheit selektierten = aktuell in der q-table angezeigten zugeordneten Bauinformationen
        // this.selectModelBauinformationenAusgewaehlteBaueinheit.push(
        //   this.selectedNodeTreeBaueinheiten.zugeordneteBauinformationen
        // );
        this.selectModelBauinformationenAusgewaehlteBaueinheit = this.selectedNodeTreeBaueinheiten.zugeordneteBauinformationen;
        // TODO: Hier würde es auch genügen, dass nur die Felder _id, bauinformationsBezeichung, bauinformationsTyp extrahiert werden
        // Es ist aber hier nicht so dramatisch wie beim den selectOptions, wo alle Bauinformationen aus der Datenbank angezeigt werden müssen,
        // da für eine bestimmte Baueigenschaft immer nur einige wenige Bauinformationen selektiert sein werden! Daher bisher nur beim
        // Initialisieren der selectOptions per neuem API Call den Extrakt obiger 3 Felder geladen!

        // ACHTUNG: Muss Array sein bei Selection "multiple"
        // selectedNodeTreeBaueinheiten ist computed!
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectModelBauinformationenAusgewaehlteBaueinheit hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        console.log(
          "selectModelBauinformationenAusgewaehlteBaueinheit: ",
          this.selectModelBauinformationenAusgewaehlteBaueinheit
        );
        this.initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenAusgewaehlteBaueinheit();
      }
      //--------------------------------------------------------------------------------------------------------------------------------------------
      if (this.tabBaueinheiten === "beschreibungTabBaueinheiten") {
        // NEU - Event abfeuern zum Anzeigen des richtigen Bedienungshilfethemas:
        this.showBedienungsHilfe("bedienungsHilfeBeschreibungBaueinheiten"); // Aufruf mit String-Parameter ref des betreffenden q-expansion-items
      }
      //--------------------------------------------------------------------------------------------------------------------------------------------
      if (this.tabBaueinheiten === "zugeordneteBaustoffeTabBaueinheiten") {
        // ALT (für Baustoffe):
        // if (!this.selectedKeyTreeBaueinheitenIstImRohstoffunterbaum) {
        //   this.loadTreeRohstoffe(true); Laden des Rohstoffunterbaums für die Auswahl der zugeordneten Rohstoffe
        // }
        // NEU (für Baueinheiten):
        // ALT: Die Funktion loadTreeBaustoffe() wird doppelt ausgeführt, da sie nicht nur hier in initialisiereAusgewaehltesTabBaustoffe,
        // sondern auch im watch für selectedNodeTreeBaueinheiten gerufen wurde!
        // Der Aufruf im watch ist notwendig, da sie bei Änderung des ausgewählten
        // Baustoffsjeweils neu aufgerufen werden muss! Falls das Tab "Zugeordnete Baustoffe" allerdings noch nie
        // ausgewählt wurde, kann loadTreeBaustoffe() in diesem Fall den Baustoffbaum mit den ticked Nodes nicht laden.
        // Deshalb war der Aufruf hier aus initialisiereAusgewaehltesTabBaustoffe() ebenfalls notwendig, da
        // das Tab auch erst nach der Auswahl eines Knotens im Baum angewählt werden kann.
        // NEU: Dies wurde optimiert, indem die Funktion aufgeteilt wurde in 2 Funktionen, Teil 2 ist jetzt showTreeBaustoffe()
        //      und wird hier aufgerufen statt loadTreeBaustoffe()
        // Siehe Kommentare in loadTreeBaustoffe()
        //------------------------------------------------------------------------------------------------
        // NEU: Spinner Gears zeigen, da die Funktion lange dauern kann!!!
        /*
        Loading.show({
        spinner: QSpinnerGears,
        // delay: 200 // ms, Default ist 500 ms, bevor Loading den Spinner zeigt
        // other props
        });
        */
        this.showTreeBaustoffe(); // NEU: Anzeigen des Unterbaums für die Auswahl der Baustoffe, statt loadTreeBaustoffe()
        // Loading.hide(); // Spinner entfernen
        // Test Code: Den Spinner nach 1,5 s wieder hiden per Timer:
        /*
        let timer = setTimeout(() => {
          Loading.hide()
          timer = void 0
        }, 1500)
        */
        //------------------------------------------------------------------------------------------------
        // TODO: Event abfeuern zum Anzeigen des richtigen Bedienungshilfethemas:
        // this.showBedienungsHilfe("bedienungsHilfeZugeordneteBaustoffeBaueinheiten"); // Aufruf mit String-Parameter ref des betreffenden q-expansion-items
      }
      //-------------------------------------------------------------------------------------------------------------------------------
      // if (this.tabBaueinheiten === "baueigenschaftsProfilFormulareTabBaueinheiten") {
      //   this.loadBauvorhabenAusgewaehlteBaueinheit(); // Unnötig, da schon aufgerufen bei Auswahl eines Knotens im Bauvorhabenbaum
      // }
    },

    /*
    loadBauvorhabenAusgewaehlteBaueinheit() {
      //-------------------------------------------------------------------------------------------------------------------------------------------------
      // Lädt die notwendigen Felder für das Tab "Angaben zum Bauvorhaben"
      // Disabled - ersetzt durch Profilformular "Bauvorhaben" mit Vue-Komponente
      // Diese stammen aus VERSCHIEDENEN Baueigenschaften, die erst gesucht werden müssen im Array der Baueigenschaften an der
      // ausgewählten Baueinheit im Bauvorhabenbaum.

      // Design ist konsistent mit dem Verhalten des Tabs "Auswahl", das ebenfalls nicht reaktiv die ausgewählte Baueigenschaft im Tab "Übersicht" ändert:
      // Beim Initialisieren des Tabs "Angaben zum Bauvorhaben" Kopien aller betroffenen Baueigenschaften in einem Array
      // bauvorhabenAusgewaehlteBaueinheit anlegen (ähnlich wie bei ausgewaehlteBaueigenschaft), im q-form dann auf dieser Kopie arbeiten,
      // beim Speichern die geänderten Werte für die betreffenden Baueigenschaften in der Datenbank speichern, danach
      // selectedRowTreeBaueinheiten.baueigenschaften mit den geänderten Werten aktualisieren. Beim Zurücksetzen die entsprechenden Werte wieder aus
      // der Datenbank holen und bauvorhabenAusgewaehlteBaueinheit damit resetten.

      // TODO: XXXXXX - Muss auch aufgerufen werden, wenn selectedKeyTreeBaueinheiten sich ändert!!! (watch)
      //                Dadurch doppelte Aufrufe im Console Log!!!
      //--------------------------------------------------------------------------------------------------------------------------------------------------
      console.log("In loadBauvorhabenAusgewaehlteBaueinheit()");
      var index; // im Array der Baueigenschaften an der ausgewählten Baueinheit im Bauvorhabenbaum

      function findeBaueigenschaft(
        selectedNodeTreeBaueinheiten,
        gesuchteBaueigenschaftsBezeichnung
      ) {
        //------------------------------------------------------------------------------------------------------------------------------------------
        // Hilfsfunktion
        // Bestimmt mittels findIndex den Index der Baueigenschaft mit der Bezeichnung gesuchteBaueigenschaftsBezeichnung (zweiter Parameter)
        // im Array der Baueigenschaften an der ausgewählten Baueinheit im Bauvorhabenbaum (erster Parameter)
        // ACHTUNG: Auf this.selectedNodeTreeBaueinheiten konnte wegen undefined Fehler im Log aus der Funktion nicht direkt zugegriffen werden -
        // deshalb wurde der erste Parameter eingeführt, der es als Referenz an die Funktion gibt!
        //------------------------------------------------------------------------------------------------------------------------------------------
        const index2 = selectedNodeTreeBaueinheiten.baueigenschaften.findIndex(
          item =>
            item.typbezogeneBaueigenschaft.baueigenschaftsBezeichnung ===
            gesuchteBaueigenschaftsBezeichnung
        );
        return index2;
      }
      //----------------------------------------------------------------------------------------------------------------------------------------
      // Den Array bauvorhabenAusgewaehlteBaueinheit in data() traversieren
      // und für jedes Objekt darin die passenden Felder setzen aus selectedNodeTreeBaueinheiten.baueigenschaften[index]
      //----------------------------------------------------------------------------------------------------------------------------------------
      for (var i = 0; i < this.bauvorhabenAusgewaehlteBaueinheit.length; i++) {
        // Zuerst den passenden index für die Baueigenschaft mit der
        // in bauvorhabenAusgewaehlteBaueinheit[i].baueigenschaftsBezeichnung finden
        // im Array der Baueigenschaften an der ausgewählten Baueinheit:
        index = findeBaueigenschaft(
          this.selectedNodeTreeBaueinheiten,
          this.bauvorhabenAusgewaehlteBaueinheit[i].baueigenschaftsBezeichnung
        );
        if (index < 0) {
          console.log(
            "Fehler: Keine passende Baueigenschaft im Array der Baueigenschaften an der ausgewählten Baueinheit im Bauvorhabenbaum gefunden"
          );
          console.log(
            "Vom Fehler betroffene baueigenschaftsBezeichnung: ",
            this.bauvorhabenAusgewaehlteBaueinheit[i].baueigenschaftsBezeichnung
          );
          continue; // In Schleife weitermachen, siehe https://www.w3schools.com/js/js_break.asp
        }
        // index ist hier nun 0 oder größer, damit ist Zugriff auf Felder wie this.selectedNodeTreeBaueinheiten.baueigenschaften[index]._id (Beispiel) möglich
        // Den index selbst im Objekt im Array bauvorhabenAusgewaehlteBaueinheit für Angaben zum Bauvorhaben (an der ausgewählten Baueinheit) merken
        // für späteres Speichern von Werten im Backend:
        this.bauvorhabenAusgewaehlteBaueinheit[
          i
        ].indexArrayBaueigenschaftenAusgewaehlteBaueinheit = index;

        // Zugehörige _id merken der jeweiligen (wertbezogenen) Baueigenschaft an der Baueinheit für späteres Speichern im Backend:
        this.bauvorhabenAusgewaehlteBaueinheit[
          i
        ].idBaueigenschaft = this.selectedNodeTreeBaueinheiten.baueigenschaften[
          index
        ]._id;

        // Wertetyp der betreffenden Baueigenschaft ermitteln:
        var arg = this.selectedNodeTreeBaueinheiten.baueigenschaften[index]
          .typbezogeneBaueigenschaft.werteTyp;
        // HINWEIS: Dieser liegt eigentlich auch schon in this.bauvorhabenAusgewaehlteBaueinheit[i].werteTyp
        // Abhängig vom Wertetyp den Inhalt des zum Wertetyp passenden Wertefelds aus this.selectedNodeTreeBaueinheiten.baueigenschaften[index].kennWert1 (Beispiel)
        // nach this.bauvorhabenAusgewaehlteBaueinheit[i].werteFeldInhalt übertragen:
        switch (arg) {
          case "Bezeichnungswert":
            this.bauvorhabenAusgewaehlteBaueinheit[
              i
            ].werteFeldInhalt = this.selectedNodeTreeBaueinheiten.baueigenschaften[
              index
            ].bezeichnungsWert1;
            break;
          case "Kennwert":
            this.bauvorhabenAusgewaehlteBaueinheit[
              i
            ].werteFeldInhalt = this.selectedNodeTreeBaueinheiten.baueigenschaften[
              index
            ].kennWert1;
            break;
          case "Aufzählungswert":
            this.bauvorhabenAusgewaehlteBaueinheit[
              i
            ].werteFeldInhalt = this.selectedNodeTreeBaueinheiten.baueigenschaften[
              index
            ].aufzaehlungsWert;
            break;
          case "Datumswert":
            this.bauvorhabenAusgewaehlteBaueinheit[
              i
            ].werteFeldInhalt = this.selectedNodeTreeBaueinheiten.baueigenschaften[
              index
            ].datumsWert1;
            break;
          case "Tageszeitwert":
            this.bauvorhabenAusgewaehlteBaueinheit[
              i
            ].werteFeldInhalt = this.selectedNodeTreeBaueinheiten.baueigenschaften[
              index
            ].tagesZeitWert1;
            break;
          case "Wahrheitswert":
            this.bauvorhabenAusgewaehlteBaueinheit[
              i
            ].werteFeldInhalt = this.selectedNodeTreeBaueinheiten.baueigenschaften[
              index
            ].wahrheitsWert;
        }
      }
    },
    */

    /*
    updateBauvorhabenAusgewaehlteBaueinheit: function() {
      //----------------------------------------------------------------------------------------------------------------------------------
      // Funktion, um die Angaben zum ausgewählten Bauvorhaben (im Array bauvorhabenAusgewaehlteBaueinheit) an das Backend zum Speichern zu senden.
      // Disabled - ersetzt durch Profilformular "Bauvorhaben" mit Vue-Komponente
      // Dabei wird der Array of Objects bauvorhabeAusgewaehlteBaueinheit an die Backend-Controller-Methode updateBauvorhabenBaueinheit() übergeben.
      // Dieser ist bereits so angelegt, dass es alle notwendigen Informationen für das Backend enthält (ids der betreffenden
      // Baueigenschaften, vom Wertetyp abhängige passende Wertefelder, mit denen die Datenbank aktualisiert wird).
      // Die Funktion wird im Tab "Angaben zum Bauvorhaben" verwendet bei Klick auf Button "Speichern".
      //----------------------------------------------------------------------------------------------------------------------------------
      console.log("In updateBauvorhabenAusgewaehlteBaueinheit()");
      var index; // im Array der Baueigenschaften an der ausgewählten Baueinheit im Bauvorhabenbaum

      function findeBaueigenschaft(
        selectedNodeTreeBaueinheiten,
        gesuchteBaueigenschaftsBezeichnung
      ) {
        //------------------------------------------------------------------------------------------------------------------------------------------
        // Hilfsfunktion
        // Bestimmt mittels findIndex den Index der Baueigenschaft mit der Bezeichnung gesuchteBaueigenschaftsBezeichnung (zweiter Parameter)
        // im Array der Baueigenschaften an der ausgewählten Baueinheit im Bauvorhabenbaum (erster Parameter)
        // ACHTUNG: Auf this.selectedNodeTreeBaueinheiten konnte wegen undefined Fehler im Log aus der Funktion nicht direkt zugegriffen werden -
        // deshalb wurde der erste Parameter eingeführt, der es als Referenz an die Funktion gibt!
        //------------------------------------------------------------------------------------------------------------------------------------------
        const index2 = selectedNodeTreeBaueinheiten.baueigenschaften.findIndex(
          item =>
            item.typbezogeneBaueigenschaft.baueigenschaftsBezeichnung ===
            gesuchteBaueigenschaftsBezeichnung
        );
        return index2;
      }

      console.log(
        "bauvorhabenAusgewaehlteBaueinheit vor put:",
        this.bauvorhabenAusgewaehlteBaueinheit
      );

      // console.log("process.env.API: ", process.env.API);
      // NEU - https://quasar.dev/quasar-cli/cli-documentation/handling-process-env
      // process.env.API zeigt die URL des APIs an, abhängig davon, ob Dev oder Production Build
      const apiRoute =
        process.env.API +
        "/Baueinheiten/" +
        this.selectedKeyTreeBaueinheiten +
        "/Bauvorhaben";
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      // Für Bauvorhaben disabled:
      //
      // console.log("Vor Emit to leave room 'roomBauvorlagen'");
      // this.$socket.emit("leaveRoom", {
      //  room: "roomBauvorlagen"
      // }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      // console.log("Nach Emit to leave room 'roomBauvorlagen'");
      //=========================================================================================================================================
      this.$axios
        .put(
          // NEU: this.selectedKeyTreeBaueinheiten als id in request.param.id übergeben:
          apiRoute,
          {
            bauvorhaben: this.bauvorhabenAusgewaehlteBaueinheit
          }
        )
        .then(response => {
          console.log(
            "Update für Angaben zum Bauvorhaben erfolgreich - response: ",
            response
          );

          // QTree aktualisieren mit den aktualisierten Werten für die betroffenen Eigenschaften an der Baueinheit:
          console.log(
            "TODO: XXXXXX - QTree aktualisieren mit den geänderten Werten der Baueigenschaften für das Bauvorhaben"
          );
          //----------------------------------------------------------------------------------------------------------------------------------------
          // Den Array bauvorhabenAusgewaehlteBaueinheit in data() traversieren
          // und für jedes Objekt darin die passenden Felder übertragen nach selectedNodeTreeBaueinheiten.baueigenschaften[index]
          // Der index wurde hinterlegt in this.bauvorhabenAusgewaehlteBaueinheit[i].indexArrayBaueigenschaftenAusgewaehlteBaueinheit
          //----------------------------------------------------------------------------------------------------------------------------------------
          for (
            var i = 0;
            i < this.bauvorhabenAusgewaehlteBaueinheit.length;
            i++
          ) {
            // ACHTUNG: Die Wiederverwendung des in this.bauvorhabenAusgewaehlteBaueinheit[i].indexArrayBaueigenschaftenAusgewaehlteBaueinheit
            // abespeicherten index funktinoniert nur, wenn zwischenzeitlich keine Baueigenschaften in den Array eingefügt oder im Array
            // gelöscht wurden.
            // ALT:
            // var index = this.bauvorhabenAusgewaehlteBaueinheit[i]
            // .indexArrayBaueigenschaftenAusgewaehlteBaueinheit;

            // NEU:
            // Daher besser mit findeBaueigenschaft den Index dynamisch bestimmen!
            // Zuerst den passenden index für die Baueigenschaft mit der
            // in bauvorhabenAusgewaehlteBaueinheit[i].baueigenschaftsBezeichnung finden
            // im Array der Baueigenschaften an der ausgewählten Baueinheit:
            index = findeBaueigenschaft(
              this.selectedNodeTreeBaueinheiten,
              this.bauvorhabenAusgewaehlteBaueinheit[i]
                .baueigenschaftsBezeichnung
            );
            if (index < 0) {
              console.log(
                "Fehler: Keine passende Baueigenschaft im Array der Baueigenschaften an der ausgewählten Baueinheit im Bauvorhabenbaum gefunden"
              );
              console.log(
                "Vom Fehler betroffene baueigenschaftsBezeichnung: ",
                this.bauvorhabenAusgewaehlteBaueinheit[i]
                  .baueigenschaftsBezeichnung
              );
              continue; // In Schleife weitermachen, siehe https://www.w3schools.com/js/js_break.asp
            }
            // index ist hier nun 0 oder größer, damit ist Zugriff auf Felder wie this.selectedNodeTreeBaueinheiten.baueigenschaften[index]._id (Beispiel) möglich

            // Wertetyp der betreffenden Baueigenschaft ermitteln:
            var arg = this.selectedNodeTreeBaueinheiten.baueigenschaften[index]
              .typbezogeneBaueigenschaft.werteTyp;
            // HINWEIS: Dieser liegt eigentlich auch schon in this.bauvorhabenAusgewaehlteBaueinheit[i].werteTyp
            // Abhängig vom Wertetyp den Inhalt des zum Wertetyp passenden Wertefelds nach this.selectedNodeTreeBaueinheiten.baueigenschaften[index].kennWert1 (Beispiel)
            // aus this.bauvorhabenAusgewaehlteBaueinheit[i].werteFeldInhalt übertragen:
            switch (arg) {
              case "Bezeichnungswert":
                this.selectedNodeTreeBaueinheiten.baueigenschaften[
                  index
                ].bezeichnungsWert1 = this.bauvorhabenAusgewaehlteBaueinheit[
                  i
                ].werteFeldInhalt;
                break;
              case "Kennwert":
                this.selectedNodeTreeBaueinheiten.baueigenschaften[
                  index
                ].kennWert1 = this.bauvorhabenAusgewaehlteBaueinheit[
                  i
                ].werteFeldInhalt;
                break;
              case "Aufzählungswert":
                this.selectedNodeTreeBaueinheiten.baueigenschaften[
                  index
                ].aufzaehlungsWert = this.bauvorhabenAusgewaehlteBaueinheit[
                  i
                ].werteFeldInhalt;
                break;
              case "Datumswert":
                this.selectedNodeTreeBaueinheiten.baueigenschaften[
                  index
                ].datumsWert1 = this.bauvorhabenAusgewaehlteBaueinheit[
                  i
                ].werteFeldInhalt;
                break;
              case "Tageszeitwert":
                this.selectedNodeTreeBaueinheiten.baueigenschaften[
                  index
                ].tagesZeitWert1 = this.bauvorhabenAusgewaehlteBaueinheit[
                  i
                ].werteFeldInhalt;
                break;
              case "Wahrheitswert":
                this.selectedNodeTreeBaueinheiten.baueigenschaften[
                  index
                ].wahrheitsWert = this.bauvorhabenAusgewaehlteBaueinheit[
                  i
                ].werteFeldInhalt;
            }
          }
          // ACHTUNG: Array!
          console.log(
              "selectedNodeTreeBaueinheiten.baueigenschaften: ",
              this.selectedNodeTreeBaueinheiten.baueigenschaften
            );
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEINHEIT_BAUVORHABEN_AENDERUNG_ERFOLG
          );
        })
        .catch(error => {
          console.log(
            "Fehler bei put für Update für Angaben zum Bauvorhaben - error:",
            error
          );
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEINHEIT_BAUVORHABEN_AENDERUNG_FEHLER
          );
        });
    },
    */

    makeObject(benutzerKennung) {
      // Hilfsfunktion, die aus einer benutzerKennung (String) ein Objekt für selectOptions und selectFilterOptionsAutorenAusgewaehlteBaueinheit macht
      // TODO XXXXXX: Die Benutzerrolle wird einstweilen einfach auf "Benutzer" gesetzt - stattdessen sollte sie pro benutzerKennung aus der Datenbank geholt werden
      // Besser wäre es allerdings, gleich Referenzen (ids) auf Benutzer zu halten in benutzerKennungenAutoren und diese dann mit
      // benutzerKennung und benutzerRolle zu populieren beim Laden der Baueinheit aus der Datenbank - analog zu relevevanteBauinformationen
      // Dies erfordert aber eine Migration der Datenbank (statt Array of String ein Array of ObjectId)
      // Alternativ könnte man auch nur Mitarbeiter anbieten als Autoren statt alle Benutzer, damit würde das Feld benutzerRolle in den Options allerdings überflüssig!
      return { benutzerKennung: benutzerKennung, benutzerRolle: "Benutzer" };
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Funktionen für das q-select zum Auswählen/Abwählen von der ausgewählten Baueinheit zugeordneten Autoren
    // im Tab "Angaben zur Baueinheit"/früher: "Strukturierungsangaben"
    //----------------------------------------------------------------------------------------------------------------------------------
    initialisiereSelectOptionsUndSelectFilterOptionsAutorenAusgewaehlteBaueinheit() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Lädt, abhängig davon, ob das Feld benutzerKennungenAutoren am Elternknoten der ausgewählten Baueinheit leer ist oder nicht,
      // entweder alle Autoren aus der Datenbank oder nur die
      // Autoren am Elternknoten und initialisiert damit die Options und Filter Options für das q-select für
      // zum Auswählen/Abwählen von Autoren im Tab "Angaben zur Baueinheit"
      // TODO XXXXXX: Eigentlich werden für die QSelect Options nur die Felder benutzerKennung und benutzerRolle benötigt
      // TODO XXXXXX: benutzerKennungenAutoren umstellen auf Array of ObjectId statt Array of String (=benutzerKennung)
      // TODO XXXXXX: Bei leerem Array-Feld benutzerKennungenAutoren am Elternknoten nur Benutzer mit benutzerRolle === "Mitarbeiter" laden, nicht alle Benutzer
      //---------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In initialisiereSelectOptionsUndSelectFilterOptionsAutorenAusgewaehlteBaueinheit()"
      );
      // Obige Unterscheidung treffen, per computed Properties:
      if (this.elternKnotenHatZugeordneteAutoren) {
        // Dessen Autoren laden für QSelect Options
        this.selectFilterOptionsAutorenAusgewaehlteBaueinheit = Array.from(
          this.benutzerKennungenAutorenAmElternKnoten,
          x => this.makeObject(x)
        );
        // ACHTUNG: Es wird hier ein Array of Objects erwartet, mit den Feldern benutzerKennung und benutzerRolle, kein reiner Array of Strings!!!
        this.selectOptionsAutorenAusgewaehlteBaueinheit = this.selectFilterOptionsAutorenAusgewaehlteBaueinheit;
      } else {
        // Array-Feld benutzerKennungenAutoren am Elternknoten ist leer (inklusive Wurzelknoten), d.h. keine Autoren am Elternknoten
        // In diesem Fall alle Benutzer als Autoren laden für QSelect Options
        // Alternativ könnte man auch nur Mitarbeiter anbieten als Autoren statt alle Benutzer, damit würde das Feld benutzerRolle in den Options allerdings überflüssig!
        const apiRoute = process.env.API + "/Benutzer";
        this.$axios.get(apiRoute /* ALT: url */).then(response => {
          // console.log("response.data: ");
          // console.log(response.data);
          this.selectOptionsAutorenAusgewaehlteBaueinheit = response.data; // RICHTIG - Array an Array
          // FALSCH: this.selectOptionsAutorenAusgewaehlteBaueinheit.push(response.data);
          // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
          // selectOptionsAutorenAusgewaehlteBaueinheit hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
          console.log(
            "selectOptionsAutorenAusgewaehlteBaueinheit: ",
            this.selectOptionsAutorenAusgewaehlteBaueinheit
          );
          this.selectFilterOptionsAutorenAusgewaehlteBaueinheit = response.data; // RICHTIG
          // FALSCH: this.selectFilterOptionsAutorenAusgewaehlteBaueinheit.push(response.data);
          // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
          // selectFilterOptionsAutorenAusgewaehlteBaueinheit hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
          console.log(
            "selectFilterOptionsAutorenAusgewaehlteBaueinheit: ",
            this.selectFilterOptionsAutorenAusgewaehlteBaueinheit
          );
        });
      }
    },

    createSelectValueAutorenAusgewaehlteBaueinheit(val, done) {
      //--------------------------------------------------------------------------------------------------------------------
      // Funktion für QSelect zur Auswahl von Autoren
      // Wird im Tab "Angaben zur Baueinheit" verwendet
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // ACHTUNG: Diese Funktion wird offenbar nur aufgerufen, wenn Options dynamisch zu den vorhandenen hinzugefügt werden!!!
      //--------------------------------------------------------------------------------------------------------------------
      // Calling done(var) when new-value-mode is not set or "add", or done(var, "add") adds "var" content to the model
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "add-unique", or done(var, "add-unique") adds "var" content to the model
      // only if is not already set
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "toggle", or done(var, "toggle") toggles the model with "var" content
      // (adds to model if not already in the model, removes from model if already has it)
      // and it resets the input textbox to empty string
      // ----
      // If "var" content is undefined/null, then it doesn't tampers with the model
      // and only resets the input textbox to empty string

      console.log(
        "In createSelectValueAutorenAusgewaehlteBaueinheit(val, done) - val: ",
        val
      );
      if (val.length > 1) {
        // ACHTUNG: Werte mit val.length >= 1 sind erlaubt
        if (
          !this.selectOptionsAutorenAusgewaehlteBaueigenschaft.benutzerKennung.includes(
            val
          )
        ) {
          // Den Wert als neue Option zum Select Dropdown Menü hinzufügen:
          this.selectOptionsAutorenAusgewaehlteBaueigenschaft.push(val);
        }
        done(val, "toggle");
      }
    },

    selectFilterFunctionAutorenAusgewaehlteBaueinheit(val, update) {
      //--------------------------------------------------------------------------------------------------------------------
      // Filter-Funktion für QSelect zur Auswahl von Autoren
      // Wird im Tab "Angaben zur Baueinheit" verwendet
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // Der Filter-String kann eingegeben werden zur Filterung der auswählbaren Optionen auf benutzerKennung
      // oder benutzerRolle
      //--------------------------------------------------------------------------------------------------------------------
      update(() => {
        console.log(
          "In selectFilterFunctionAutorenAusgewaehlteBaueinheit(val, update) für update - val: ",
          val
        ); // val ist der eingegebene Filter-String!
        if (val === "") {
          this.selectFilterOptionsAutorenAusgewaehlteBaueinheit = this.selectOptionsAutorenAusgewaehlteBaueinheit;
          console.log(
            "selectOptionsAutorenAusgewaehlteBaueinheit: ",
            this.selectOptionsAutorenAusgewaehlteBaueinheit
          );
          console.log(
            "selectFilterOptionsAutorenAusgewaehlteBaueinheit: ",
            this.selectFilterOptionsAutorenAusgewaehlteBaueinheit
          );
        } else {
          const needle = val.toLowerCase();
          //===============================================================================================================================
          // ACHTUNG: Der folgende Array-Filter mit needle funktioniert NICHT, wenn eines der beteiligten Felder undefined oder null ist!!!
          // Er wirft dann im Browser Log Fehler "Cannot read property 'toLowerCase' of undefined"
          // Daher sollten Filter nur auf Feldern definiert werden, die im Model required sind bzw. default: null haben!!!
          // Allerdings fixed der Fix für #268 unten die null- und undefined-Eventualitäten!!!
          //===============================================================================================================================
          this.selectFilterOptionsAutorenAusgewaehlteBaueinheit = this.selectOptionsAutorenAusgewaehlteBaueinheit.filter(
            // Array-Filter mit Arrow-Funktion:
            // Siehe https://medium.com/poka-techblog/simplify-your-javascript-use-map-reduce-and-filter-bd02c593cc2d
            //=============================================================================================================================
            // ACHTUNG: Hier muss bei Verwendung von Objekten als Options unbedingt das Unterfeld v.subField angegeben werden!!!
            v =>
              // ACHTUNG: Fix für #268, "!= null"-Abfrage erschlägt auch gleich den undefined-Fall!
              (v.benutzerKennung != null &&
                v.benutzerKennung.toLowerCase().indexOf(needle) > -1) ||
              // v.bauinformationsTyp.toLowerCase().indexOf(needle) > -1 // ALT
              (v.benutzerRolle != null &&
                v.bbenutzerRolle.toLowerCase().indexOf(needle) > -1) // NEU
          );
          console.log(
            "selectFilterOptionsAutorenAusgewaehlteBaueinheit: ",
            this.selectFilterOptionsAutorenAusgewaehlteBaueinheit
          );
        }
      });
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Funktionen für das q-select zum Auswählen/Abwählen der zugeordneten Bauinformation unter q-table für zugeordnete Bauinformationen
    // für ausgewählte Baueinheit im Tab "Zugeordnete Bauinformationen":
    //----------------------------------------------------------------------------------------------------------------------------------
    initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenAusgewaehlteBaueinheit() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Lädt alle Bauinformationen aus der Datenbank und initialisiert damit die Options und Filter Options für das q-select für
      // zum Auswählen/Abwählen von zugeordneten Bauinformationen im Tab "Zugeordnete Bauinformationen"
      // TODO: Eigentlich werden für die QSelect Options nur die Felder bauinformationsBemerkung und bauinformationsTyp benötigt
      //---------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenAusgewaehlteBaueinheit()"
      );
      // ALT:
      // var url = "http://localhost:8080/api/bauinformationen/readBauinformationen";
      // NEU: Benutze neues API, das nur ID, Bezeichnung, Typ holt, um das Datenvolumen im Speicher zu reduzieren:
      // ALT:
      // const url = "http://localhost:8080/Bauinformationen/Extrakt";
      // NEU:
      const apiRoute = process.env.API + "/Bauinformationen/Extrakt";
      this.$axios.get(apiRoute /* ALT: url */).then(response => {
        // console.log("response.data: ");
        // console.log(response.data);
        this.selectOptionsBauinformationenAusgewaehlteBaueinheit =
          response.data; // RICHTIG - Array an Array
        // FALSCH: this.selectOptionsBauinformationenAusgewaehlteBaueinheit.push(response.data);
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectOptionsBauinformationenAusgewaehlteBaueinheit hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        console.log(
          "selectOptionsBauinformationenAusgewaehlteBaueinheit: ",
          this.selectOptionsBauinformationenAusgewaehlteBaueinheit
        );
        this.selectFilterOptionsBauinformationenAusgewaehlteBaueinheit =
          response.data; // RICHTIG
        // FALSCH: this.selectFilterOptionsBauinformationenAusgewaehlteBaueinheit.push(response.data);
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectFilterOptionsBauinformationenAusgewaehlteBaueinheit hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        console.log(
          "selectFilterOptionsBauinformationenAusgewaehlteBaueinheit: ",
          this.selectFilterOptionsBauinformationenAusgewaehlteBaueinheit
        );
      });
    },

    createSelectValueBauinformationenAusgewaehlteBaueinheit(val, done) {
      //--------------------------------------------------------------------------------------------------------------------
      // Funktion für QSelect zur Auswahl von Bauinformationen
      // Wird im Tab "Zugeordnete Bauinformationen" verwendet
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // ACHTUNG: Diese Funktion wird offenbar nur aufgerufen, wenn Options dynamisch zu den vorhandenen hinzugefügt werden!!!
      //--------------------------------------------------------------------------------------------------------------------
      // Calling done(var) when new-value-mode is not set or "add", or done(var, "add") adds "var" content to the model
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "add-unique", or done(var, "add-unique") adds "var" content to the model
      // only if is not already set
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "toggle", or done(var, "toggle") toggles the model with "var" content
      // (adds to model if not already in the model, removes from model if already has it)
      // and it resets the input textbox to empty string
      // ----
      // If "var" content is undefined/null, then it doesn't tampers with the model
      // and only resets the input textbox to empty string

      console.log(
        "In createSelectValueBauinformationenAusgewaehlteBaueinheit(val, done) - val: ",
        val
      );
      if (val.length > 1) {
        if (
          !this.selectOptionsBauinformationenAusgewaehlteBaueinheit.bauinformationsBezeichnung.includes(
            val
          )
        ) {
          done(val, "toggle");
        }
      }
    },

    selectFilterFunctionBauinformationenAusgewaehlteBaueinheit(val, update) {
      //--------------------------------------------------------------------------------------------------------------------
      // Filter-Funktion für QSelect zur Auswahl von Bauinformationen
      // Wird im Tab "Zugeordnete Bauinformationen" verwendet
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // Der Filter-String kann eingegeben werden zur Filterung der auswählbaren Optionen auf BauinformationsBezeichnung
      // oder BauinformationsTyp
      //--------------------------------------------------------------------------------------------------------------------
      update(() => {
        console.log(
          "In selectFilterFunctionBauinformationenAusgewaehlteBaueinheit(val, update) für update - val: ",
          val
        ); // val ist der eingegebene Filter-String!
        if (val === "") {
          this.selectFilterOptionsBauinformationenAusgewaehlteBaueinheit = this.selectOptionsBauinformationenAusgewaehlteBaueinheit;
          console.log(
            "selectOptionsBauinformationenAusgewaehlteBaueinheit: ",
            this.selectOptionsBauinformationenAusgewaehlteBaueinheit
          );
          console.log(
            "selectFilterOptionsBauinformationenAusgewaehlteBaueinheit: ",
            this.selectFilterOptionsBauinformationenAusgewaehlteBaueinheit
          );
        } else {
          const needle = val.toLowerCase();
          //===============================================================================================================================
          // ACHTUNG: Der folgende Array-Filter mit needle funktioniert NICHT, wenn eines der beteiligten Felder undefined oder null ist!!!
          // Er wirft dann im Browser Log Fehler "Cannot read property 'toLowerCase' of undefined"
          // Daher sollten Filter nur auf Feldern definiert werden, die im Model required sind bzw. default: null haben!!!
          // Allerdings fixed der Fix für #268 unten die null- und undefined-Eventualitäten!!!
          //===============================================================================================================================
          this.selectFilterOptionsBauinformationenAusgewaehlteBaueinheit = this.selectOptionsBauinformationenAusgewaehlteBaueinheit.filter(
            // Array-Filter mit Arrow-Funktion:
            // Siehe https://medium.com/poka-techblog/simplify-your-javascript-use-map-reduce-and-filter-bd02c593cc2d
            //=============================================================================================================================
            // ACHTUNG: Hier muss bei Verwendung von Objekten als Options unbedingt das Unterfeld v.subField angegeben werden!!!
            v =>
              // ACHTUNG: Fix für #268, "!= null"-Abfrage erschlägt auch gleich den undefined-Fall!
              (v.bauinformationsBezeichnung != null &&
                v.bauinformationsBezeichnung.toLowerCase().indexOf(needle) >
                  -1) ||
              // v.bauinformationsTyp.toLowerCase().indexOf(needle) > -1 // ALT
              (v.bauinformationsAnzeigeText != null &&
                v.bauinformationsAnzeigeText.toLowerCase().indexOf(needle) > -1) // NEU
          );
          console.log(
            "selectFilterOptionsBauinformationenAusgewaehlteBaueinheit: ",
            this.selectFilterOptionsBauinformationenAusgewaehlteBaueinheit
          );
        }
      });
    },

    submitZugeordneteBauinformationenAusgewaehlteBaueinheit: function() {
      //----------------------------------------------------------------------------------------------------------------------------------
      // Funktion, um neue, per q-select ausgewählte Referenzen auf zugeordnete Bauinformationen für die ausgewählte Baueinheit abzuspeichern
      // Wird im Tab "Zugeordnete Bauinformationen" verwendet
      //----------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In submitZugeordneteBauinformationenAusgewaehlteBaueinheit()"
      );
      console.log(
        "selectModelBauinformationenAusgewaehlteBaueinheit:",
        this.selectModelBauinformationenAusgewaehlteBaueinheit
      );
      var idsSelectedBauinformationen = this.selectModelBauinformationenAusgewaehlteBaueinheit.map(
        value => {
          return value._id; // Extrahiere die ids der selektierten Bauinformationen
        }
      );
      // console.log("process.env.API: ", process.env.API);
      // NEU - https://quasar.dev/quasar-cli/cli-documentation/handling-process-env
      // process.env.API zeigt die URL des APIs an, abhängig davon, ob Dev oder Production Build
      const apiRoute =
        process.env.API +
        "/Baueinheiten/" +
        this.selectedKeyTreeBaueinheiten +
        // "9999999999999999999999" + // Für Tests mit express-async-errors
        "/Bauinformationen";
      //=========================================================================================================================================
      // NEU: Für Leaving Rooms (socket.io) - wenn dieser Code aktiviert ist, wird die vom Server geschickte Web Socket Aktualisierungs-
      // nachricht NICHT empfangen! Der Server macht nach einer Pausenzeit dann wieder ein Join Room für diesen Client!
      console.log("Vor Emit to leave room 'roomBauvorlagen'");
      this.$socket.emit("leaveRoom", {
        room: "roomBauvorlagen"
      }); // Event, der am Server ein Leave für diesen Room auslöst! Der Room wird mitgegeben.
      console.log("Nach Emit to leave room 'roomBauvorlagen'");
      //=========================================================================================================================================
      this.$axios
        .put(
          // NEU: this.selectedKeyTreeBaueinheiten als id in request.param.id übergeben:
          apiRoute,
          {
            // _id: this.selectedKeyTreeBaueinheiten, // ALT (_id im Body)
            // _id: "99999999999999999999", // Für Test von Express-Async-Errors, provoziert einen Error, in der Controller-Methode parallel .catch disablen
            zugeordneteBauinformationen: idsSelectedBauinformationen
          }
        )
        .then(response => {
          console.log("Update erfolgreich - response: ", response);
          // QTree updaten mit den neu ausgewählten Bauinformationen für die Baueinheit:
          this.$set(
            this.selectedNodeTreeBaueinheiten,
            "zugeordneteBauinformationen",
            response.data.zugeordneteBauinformationen
          );
          console.log(
            "selectedNodeTreeBaueinheiten.zugeordneteBauinformationen: ",
            this.selectedNodeTreeBaueinheiten.zugeordneteBauinformationen
          );
          // Nun noch das zugehörige selectModel im QTree updaten:
          // TODO: Hier wäre eigentlich ein Extrakt beschränkt auf {_id, bauinformationsBezeichnung, bauinformationsTyp}
          // aus den größeren Objekten in zugeordneteBauinformationen ausreichend
          this.$set(
            this,
            "selectModelBauinformationenAusgewaehlteBaueinheit",
            this.selectedNodeTreeBaueinheiten.zugeordneteBauinformationen
          );
          // NEU:
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEINHEIT_BAUINFORMATIONEN_AENDERUNG_ERFOLG
          );
        })
        .catch(error => {
          console.log(
            "Fehler bei put für Update Bauinformationen - error:",
            error
          );
          // ALT: Logging und Fehlermeldung durch Axios Response Interceptor
          // NEU:
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEINHEIT_BAUINFORMATIONEN_AENDERUNG_FEHLER
          );
        });
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Methode zur Initialisierung der Unter-Tabs des Tabs "Baueigenschaften" (Übersicht/Auswahl/Neu)
    // Initialisiert insbesondere die Variablen für die q-selects in diesen Tabs
    // - 2 q-selects im Unter-Tab "Auswahl" für Bauinformation und Aufzählungswert
    // - 2 q-selects im Unter-Tab "Neu" für Bauinformation und Aufzählungswert
    //----------------------------------------------------------------------------------------------------------------------------------
    async initialisiereAusgewaehltesTabBaueigenschaften() {
      //--------------------------------------------------------------------------------------------------------------------------------
      // Methode
      // Aktionen für das Unter-Tab "auswahlTabBaueigenschaften":
      // 1) ALT/weggefallen: Erstellt flache Kopie der ausgewählten Baueigenschaft (ein JS Objekt), um Änderungen zuerst daran durchzuführen
      //    NEU: Erstelle Kopie der ausgewählten Baueigenschaft mit entsprechenden object.assigns für die genesteten Objekte (siehe unten)
      // 2) Initialisiert selectModelBauinformationAusgewaehlteBaueigenschaft (in diesem Fall wegen single Selection
      //    auch ein JS Objekt, kein Array!) für das q-select zum Auswählen/Abwählen der zugeordneten Bauinformation der ausgewählten
      //    Baueigenschaft
      // 3) Dito für Aufzählungswert
      // 4) Setze Kontexthilfe
      //--------------------------------------------------------------------------------------------------------------------------------
      console.log("In initialisiereAusgewaehltesTabBaueigenschaften()");
      console.log(this.tabBaueigenschaften);
      if (
        this.tabBaueigenschaften === "auswahlTabBaueigenschaften" ||
        this.tabBaueigenschaften === "beschreibungTabBaueigenschaften"
      ) {
        if (this.selectedRowsTableBaueigenschaften.length > 0) {
          // Step 1):
          console.log(
            "Erstelle Arbeitskopie von ausgewählter Baueigenschaft für die ausgewählten Baueinheit"
          );
          // console.log("selectedRowsTableBaueigenschaften[0]: ", this.selectedRowsTableBaueigenschaften[0])
          // Die hier erstellte 3-fache Anwendung von Object.assign ist nötig, da sonst die Referenzen noch auf die alten Objekte zeigen (keine Deep-Copy)
          this.ausgewaehlteBaueigenschaft = Object.assign(
            {},
            this.selectedRowsTableBaueigenschaften[0]
          );
          this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft = Object.assign(
            {},
            this.selectedRowsTableBaueigenschaften[0].typbezogeneBaueigenschaft
          ); // ACHTUNG: Enthält auch ein Unterfeld baueigenschaftsBeschreibung!
          this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation = Object.assign(
            {},
            this.selectedRowsTableBaueigenschaften[0].typbezogeneBaueigenschaft
              .bauinformation
          );

          this.pruefeAktivierungFuerAusgewaehlteBaueigenschaft();
          this.pruefeWerteeingabe(this.ausgewaehlteBaueigenschaft);
          // NEU: Date Felder aufbereiten in das von type="date" an den q-input Feldern erwartete Format "YYYY-MM-DD":
          // ACHTUNG: Funktioniert so nur im Zusammenspiel mit type="date" an den betreffenden Quasar-Feldern, welche
          //          in der Lage sind, diese Felder als native Date-Typen zu verarbeiten!
          //          Die Date-Utils verarbeiten als Argument nur diese Date-Typen, nicht Strings!
          this.ausgewaehlteBaueigenschaft.datumsWert1 = date.formatDate(
            this.ausgewaehlteBaueigenschaft.datumsWert1,
            "YYYY-MM-DD"
          );
          console.log(
            "ausgewaehlteBaueigenschaft.datumsWert1: ",
            this.ausgewaehlteBaueigenschaft.datumsWert1
          );
          this.ausgewaehlteBaueigenschaft.datumsWert2 = date.formatDate(
            this.ausgewaehlteBaueigenschaft.datumsWert2,
            "YYYY-MM-DD"
          );
          console.log(
            "ausgewaehlteBaueigenschaft.datumsWert2: ",
            this.ausgewaehlteBaueigenschaft.datumsWert2
          );

          // Step 2):
          // Model für q-select laden mit der bereits für die Baueigenschaft selektierten = aktuell im q-form angezeigten zugeordneten Bauinformation
          // SEHR ALT (mit Flattening am Backend):
          // this.selectModelBauinformationAusgewaehlteBaueigenschaft = this.ausgewaehlteBaueigenschaft.bauinformationId; // Objekt, die populierte bauinformation (KEIN Array)
          // ALT (ohne Flattening):
          // this.selectModelBauinformationAusgewaehlteBaueigenschaft = this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation;
          // NEU (ohne Flattening, null Fall berücksichtigen)
          // ACHTUNG: Der Fall, dass das select model leer ist und damit auch bauinformation null ist, muss im Controller speziell behandelt werden!!!

          this.selectModelBauinformationAusgewaehlteBaueigenschaft =
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft
              .bauinformation === {}
              ? null
              : this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft
                  .bauinformation;
          // Objekt, die populierte bauinformation (KEIN Array)
          // ACHTUNG: Bei q-select Selection "single" (d.h. Abwesenheit von "multiple") MUSS das v-model ein Objekt sein, kein Array, sonst Fehler!!!
          // ACHTUNG: bauinformation muss populiert sein!!! Nur dann kann im q-select auf bauinformationsBezeichnung, bauinformationsTyp zugegriffen werden
          console.log(
            "selectModelBauinformationAusgewaehlteBaueigenschaft: ",
            this.selectModelBauinformationAusgewaehlteBaueigenschaft
          );

          await this.initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft();
          console.log(
            this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft
          );

          // Step 3) - initialisiere QSelect Options für Auswahl Aufzählungswerte:
          this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft = this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.selektierbareOptionenAufzaehlungsWert;

          // Step 4):
          // NEU - experimentell - Kontexthilfethema per Event setzen (wird verarbeitet durch MyLayout/rechter Drawer)
          this.notifyTopicContextHelp(
            CONTEXT_HELP_BAUEINHEITEN_BAUEIGENSCHAFTEN_AUSWAHL
          );
          // NEU: Bedienungshilfe im rechten Drawer über global Store steuern:
          // NEU: Ist nicht mehr nötig, da die Steuerung nun doch über Events erfolgt (da mehrere verschachtelte Expansion Items gleichzeitig zu öffnen sind)
          // globalStore.setIsSelectedAuswahlBaueigenschaftenBaueinheiten(); // Für Bedienungshlife setzen

          // NEU - Event abfeuern zum Anzeigen des richtigen Bedienungshilfethemas:
          this.showBedienungsHilfe(
            "bedienungsHilfeAuswahlBaueigenschaftenBaueinheiten"
          ); // Aufruf mit String-Parameter ref des betreffenden q-expansion-items
        } else {
          this.ausgewaehlteBaueigenschaft = null;
        }
      } else {
        if (this.tabBaueigenschaften === "neuTabBaueigenschaften") {
          // Model für q-select initialisieren für Definition Optionen für Aufzählungswert (immer ein Array!!!)
          // ACHTUNG: Bei q-select Selection "multiple" (NUR beim Tab "Neu" der Fall) MUSS auch das v-model ein Array sein, sonst Fehler!!!
          // ACHTUNG: Hier wahrscheinlich push notwendig, da Array Operation auf v-model! Beseitigt aber nicht den Fehler mit undefiniertem val in @new-value-Funktion!
          // ACHTUNG: Bei v-model="neueBaueigenschaft.aufzaehlungsWert": Push funktioniert nur, wenn gleichzeitig der aufzaehlungsWert
          //          in leereBaueigenschaft mit [] initialisiert wurde, nicht mit null!!!
          // TODO: Bisher wird der Array nur mit Testwerten initialisiert - später kann er initial vermutlich leer sein, da bei
          //       Neuanlage zunächst keine Optionswerte am q-select vorhanden sein sollten
          // TODO: Bei wiederholtem Aufruf des Tabs "Neu" werden die Testwerte mehrfach auf den Array gepushed!!!
          /* sts: Auskommentiert
          this.selectModelAufzaehlungswertNeueBaueigenschaft.push(
            "xl"
          );
          this.selectModelAufzaehlungswertNeueBaueigenschaft.push(
            "xs"
          );
          this.selectModelAufzaehlungswertNeueBaueigenschaft.push(
            "lg"
          );
          */
          // TODO: Bei option-value="valueAufzaehlungsWert": [ { valueAufzaehlungswert: "xl" }, { valueAufzaehlungswert: "xs" }, ...  ]
          // TODO: Alternativ final vermutlich leerer Array!!!
          this.initialisiereSelectOptionsUndSelectFilterOptionsAufzaehlungswertNeueBaueigenschaft();

          // selectModelBauinformationNeueBaueigenschaft intialisieren:
          this.selectModelBauinformationenNeueBaueigenschaft = null; // leeres Objekt (KEIN Array)
          this.initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenNeueBaueigenschaft();

          // NEU - experimentell - Kontexthilfethema per Event setzen (wird verarbeitet durch MyLayout/rechter Drawer)
          this.notifyTopicContextHelp(
            CONTEXT_HELP_BAUEINHEITEN_BAUEIGENSCHAFTEN_NEU
          );
          // NEU: Bedienungshilfe im rechten Drawer über global Store steuern:
          // NEU: Ist nicht mehr nötig, da die Steuerung nun doch über Events erfolgt (da mehrere verschachtelte Expansion Items gleichzeitig zu öffnen sind)
          // globalStore.setIsSelectedNeuBaueigenschaftenBaueinheiten(); // Für Bedienungshilfe setzen

          // NEU - Event abfeuern zum Anzeigen des richtigen Bedienungshilfethemas:
          this.showBedienungsHilfe(
            "bedienungsHilfeNeuBaueigenschaftenBaueinheiten"
          ); // Aufruf mit String-Parameter ref des betreffenden q-expansion-items
        }
      }
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Funktionen für das q-select zum Definieren der Optionen zur Auswahl einer Bauinformation im Tab Baueigenschaften/Auswahl:
    //----------------------------------------------------------------------------------------------------------------------------------
    initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Funktion initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft
      // Lädt alle Bauinformationen aus der Datenbank und initialisiert damit die Options und Filter Options für das q-select für
      // zum Auswählen/Abwählen von zugeordneten Bauinformationen
      // TODO: Eigentlich werden für die QSelect Options nur die Felder _id, bauinformationsBemerkung und bauinformationsTyp benötigt
      //---------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft()"
      );
      // ALT:
      // var url = "http://localhost:8080/api/bauinformationen/readBauinformationen";
      // NEU: Benutze neues API, das nur ID, Bezeichnung, Typ holt, um das Datenvolumen im Speicher zu reduzieren:
      // ALT:
      // const url = "http://localhost:8080/Bauinformationen/Extrakt";
      // NEU:
      const apiRoute = process.env.API + "/Bauinformationen/Extrakt";
      this.$axios.get(apiRoute /* ALT: url */).then(response => {
        // console.log("response.data: ");
        // console.log(response.data);
        this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft =
          response.data; // RICHTIG - Array an Array
        // FALSCH: this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft.push(response.data);
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectOptionsBauinformationenAusgewaehlteBaueigenschaft hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        this.$set(
          this,
          "selectOptionsBauinformationenAusgewaehlteBaueigenschaft",
          response.data
        );
        console.log(
          "selectOptionsBauinformationenAusgewaehlteBaueigenschaft: ",
          this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft
        );
        this.selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft =
          response.data; // RICHTIG
        // FALSCH: this.selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft.push(response.data);
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        console.log(
          "selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft: ",
          this.selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft
        );
        //@sts, 16.12. HotFix Für Darstellung Bauinformation im Auswahltab (mit Flattening Backend - disabled)
        /*
        this.selectModelBauinformationAusgewaehlteBaueigenschaft = this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft.find(
          bauinformation => {
            return (
              bauinformation._id ===
              this.ausgewaehlteBaueigenschaft.bauinformationId
            );
          }
        );
        */
      });
    },

    createSelectValueBauinformationenAusgewaehlteBaueigenschaft(val, done) {
      //--------------------------------------------------------------------------------------------------------------------
      // Funktion createSelectValueBauinformationenAusgewaehlteBaueigenschaft für QSelect zur Auswahl von Bauinformationen
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // ACHTUNG: Diese Funktion wird offenbar nur aufgerufen, wenn Options dynamisch zu den vorhandenen hinzugefügt werden!!!
      //--------------------------------------------------------------------------------------------------------------------
      // Calling done(var) when new-value-mode is not set or "add", or done(var, "add") adds "var" content to the model
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "add-unique", or done(var, "add-unique") adds "var" content to the model
      // only if is not already set
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "toggle", or done(var, "toggle") toggles the model with "var" content
      // (adds to model if not already in the model, removes from model if already has it)
      // and it resets the input textbox to empty string
      // ----
      // If "var" content is undefined/null, then it doesn't tampers with the model
      // and only resets the input textbox to empty string

      console.log(
        "In createSelectValueBauinformationenAusgewaehlteBaueigenschaft(val, done) - val: ",
        val
      );
      if (val.length > 1) {
        if (
          !this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft.bauinformationsBezeichnung.includes(
            val
          )
        ) {
          done(val, "toggle");
        }
      }
    },

    selectFilterFunctionBauinformationenAusgewaehlteBaueigenschaft(
      val,
      update
    ) {
      //----------------------------------------------------------------------------------------------------------------------
      // Filter-Funktion für QSelect zur Auswahl von Bauinformationen
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // Der Filter-String kann eingegeben werden zur Filterung auf bauinformationsBezeichnung oder bauinformationsTyp,
      // ohne dass die durch den Filter erfassten Objekte automatisch zum Menü selbst (d.h. zum selectOptionsBauinformationen)
      // hinzugefügt werden
      //----------------------------------------------------------------------------------------------------------------------
      update(() => {
        console.log(
          "In selectFilterFunctionBauinformationenAusgewaehlteBaueigenschaft(val, update) für update - val: ",
          val
        ); // val ist der eingegebene Filter-String!
        if (val === "") {
          this.selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft = this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft;
          console.log(
            "selectOptionsBauinformationenAusgewaehlteBaueigenschaft: ",
            this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft
          );
          console.log(
            "selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft: ",
            this.selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft
          );
        } else {
          const needle = val.toLowerCase();
          //===============================================================================================================================
          // ACHTUNG: Der folgende Array-Filter mit needle funktioniert NICHT, wenn eines der beteiligten Felder undefined oder null ist!!!
          // Er wirft dann im Browser Log Fehler "Cannot read property 'toLowerCase' of undefined"
          // Daher sollten Filter nur auf Feldern definiert werden, die im Model required sind bzw. default: null haben!!!
          // Allerdings fixed der Fix für #268 unten die null- und undefined-Eventualitäten!!!
          //===============================================================================================================================
          this.selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft = this.selectOptionsBauinformationenAusgewaehlteBaueigenschaft.filter(
            // Array-Filter mit Arrow-Funktion:
            // Siehe https://medium.com/poka-techblog/simplify-your-javascript-use-map-reduce-and-filter-bd02c593cc2d
            //=============================================================================================================================
            // ACHTUNG: Hier muss bei Verwendung von Objekten als Options unbedingt das Unterfeld v.subField angegeben werden!!!
            v =>
              // ACHTUNG: Fix für #268, "!= null"-Abfrage erschlägt auch gleich den undefined-Fall!
              (v.bauinformationsBezeichnung != null &&
                v.bauinformationsBezeichnung.toLowerCase().indexOf(needle) >
                  -1) ||
              // v.bauinformationsTyp.toLowerCase().indexOf(needle) > -1 // ALT
              (v.bauinformationsAnzeigeText != null &&
                v.bauinformationsAnzeigeText.toLowerCase().indexOf(needle) > -1) // NEU
          );
          console.log(
            "selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft: ",
            this.selectFilterOptionsBauinformationenAusgewaehlteBaueigenschaft
          );
        }
      });
    },

    submitZugeordneteBauinformationAusgewaehlteBaueigenschaft: function() {
      //---------------------------------------------------------------------------------------------------------------------------------------
      // Funktion, um neue, per q-select ausgewählte Referenz auf zugeordnete Bauinformation für die ausgewählte Baueigenschaft abzuspeichern
      // TODO - Feld bauinformation in ausgewählter Baueigenschaft der ausgewählten Baueinheit updaten mit
      // in selectModelBauinformationAusgewaehlteBaueigenschaft ausgewählter Referenz auf zugeordnete Bauinformation
      // (Feld ausgewaehlteBaueigenschaft.bauinformation)
      // ACHTUNG: Der Update dieses Feldes muss global in allen gleichnamigen Baueigenschaften im Baum erfolgen!!!
      // ACHTUNG: Der Code hier ist noch FALSCH, stammt vom Update des Arrays von Referenzen auf Bauinformationen in Baueinheit!!!
      //          Siehe weitere Kommentare unten im Code.
      // (TODO) - Diesen Fehler vorläufig nicht korrigiert, da diese Methode aktuell gar nicht separat aufgerufen wird, sondern die Speicherung
      //          der Bauinformation sollte zusammen mit dem Speichern aller anderen Felder für die ausgewählte Bauinformation
      //          im Tab "Auswahl" erfolgen!!!
      //---------------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In submitZugeordneteBauinformationAusgewaehlteBaueigenschaft()"
      );
      console.log(
        "ACHTUNG: Dieser Code ist veraltet - bitte die BIM.click Entwickler benachrichtigen, falls diese Meldung erscheint!!!"
      );
      console.log(
        "selectModelBauinformationAusgewaehlteBaueigenschaft:",
        this.selectModelBauinformationAusgewaehlteBaueigenschaft
      );

      // (TODO): Folgender Code ist eventuell FALSCH, da selectModelBauinformationAusgewaehlteBaueigenschaft kein Array, sondern ein
      // Objekt ist ({_id, bauinformationsTyp, bauinformationsBezeichnung})
      var idSelectedBauinformation = this.selectModelBauinformationAusgewaehlteBaueigenschaft.map(
        value => {
          return value; // @sts: unnötig nach Flatten._id; // Extrahiere die id der selektierten Bauinformation
        }
      );
      this.$axios
        .put(
          // (TODO): Dieser Call ist definitiv FALSCH - er dated die zugeordneten Bauinformationen für eine Baueinheit ab.
          // Stattdessen muss hier die einzelne zugeordnete Bauinformation für eine Baueigenschaft updated werden!!!
          "http://localhost:8080/API/Baustoff/0919/Update/Baustoff/Bauinformationen", // ACHTUNG: API ist veraltet!!!
          {
            _id: this.selectedKeyTreeBaueinheiten,
            zugeordneteBauinformationen: idSelectedBauinformation
          }
        )
        .then(response => {
          console.log("Update erfolgreich");
          console.log(response);
          //var tmpNode = this.$refs.treeBaueinheiten.getNodeByKey(this.)
          this.$set(
            this.selectedNodeTreeBaueinheiten,
            "zugeordneteBauinformationen",
            response.data.zugeordneteBauinformationen
          );
          console.log(
            this.selectedNodeTreeBaueinheiten.zugeordneteBauinformationen
          );
          this.$set(
            this,
            "selectModelBauinformationAusgewaehlteBaueigenschaft",
            this.selectedNodeTreeBaueinheiten.zugeordneteBauinformationen
          );
        });
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Funktionen für das q-select zum Definieren der Optionen zur Auswahl einer Bauinformation im Tab Baueigenschaften/Neu:
    //----------------------------------------------------------------------------------------------------------------------------------
    initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenNeueBaueigenschaft() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Funktion initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenNeueBaueigenschaft
      // Lädt alle Bauinformationen aus der Datenbank und initialisiert damit die Options und Filter Options für das q-select für
      // zum Auswählen/Abwählen von zugeordneten Bauinformationen
      // TODO: Eigentlich werden für die QSelect Options nur die Felder bauinformationsBemerkung und bauinformationsTyp benötigt
      //---------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In initialisiereSelectOptionsUndSelectFilterOptionsBauinformationenNeueBaueigenschaft()"
      );
      // ALT:
      // var url = "http://localhost:8080/api/bauinformationen/readBauinformationen";
      // NEU: Benutze neues API, das nur ID, Bezeichnung, Typ holt, um das Datenvolumen im Speicher zu reduzieren:
      // ALT:
      // const url = "http://localhost:8080/Bauinformationen/Extrakt";
      // NEU:
      const apiRoute = process.env.API + "/Bauinformationen/Extrakt";
      this.$axios.get(apiRoute /* ALT: url */).then(response => {
        // console.log("response.data: ");
        // console.log(response.data);
        this.selectOptionsBauinformationenNeueBaueigenschaft = response.data; // RICHTIG - Array an Array
        // FALSCH: this.selectOptionsBauinformationenNeueBaueigenschaft.push(response.data);
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectOptionsBauinformationenNeueBaueigenschaft hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        console.log(
          "selectOptionsBauinformationenNeueBaueigenschaft: ",
          this.selectOptionsBauinformationenNeueBaueigenschaft
        );
        this.selectFilterOptionsBauinformationenNeueBaueigenschaft =
          response.data; // RICHTIG
        // FALSCH: this.selectFilterOptionsBauinformationenNeueBaueigenschaft.push(response.data);
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectFilterOptionsBauinformationenNeueBaueigenschaft hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        console.log(
          "selectFilterOptionsBauinformationenNeueBaueigenschaft: ",
          this.selectFilterOptionsBauinformationenNeueBaueigenschaft
        );
      });
    },

    createSelectValueBauinformationenNeueBaueigenschaft(val, done) {
      //--------------------------------------------------------------------------------------------------------------------
      // Funktion createSelectValueBauinformationenNeueBaueigenschaft für QSelect zur Auswahl von Bauinformationen
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // ACHTUNG: Diese Funktion wird offenbar nur aufgerufen, wenn Options dynamisch zu den vorhandenen hinzugefügt werden!!!
      //--------------------------------------------------------------------------------------------------------------------
      // Calling done(var) when new-value-mode is not set or "add", or done(var, "add") adds "var" content to the model
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "add-unique", or done(var, "add-unique") adds "var" content to the model
      // only if is not already set
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "toggle", or done(var, "toggle") toggles the model with "var" content
      // (adds to model if not already in the model, removes from model if already has it)
      // and it resets the input textbox to empty string
      // ----
      // If "var" content is undefined/null, then it doesn't tampers with the model
      // and only resets the input textbox to empty string

      console.log(
        "In createSelectValueBauinformationenNeueBaueigenschaft(val, done) - val: ",
        val
      );
      if (val.length > 1) {
        if (
          !this.selectOptionsBauinformationenNeueBaueigenschaft.bauinformationsBezeichnung.includes(
            val
          )
        ) {
          done(val, "toggle");
        }
      }
    },

    selectFilterFunctionBauinformationenNeueBaueigenschaft(val, update) {
      //--------------------------------------------------------------------------------------------------------------------
      // Filter-Funktion für QSelect zur Auswahl von Bauinformationen
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // Der Filter-String kann eingegeben werden zur Filterung auf bauinformationsBezeichnung oder bauinformationsTyp,
      // ohne dass die durch den Filter erfassten Objekte automatisch zum Menü selbst (d.h. zum selectOptionsBauinformationen)
      // hinzugefügt werden
      //--------------------------------------------------------------------------------------------------------------------
      update(() => {
        console.log(
          "In selectFilterFunctionBauinformationenNeueBaueigenschaft(val, update) für update - val: ",
          val
        ); // val ist der eingegebene Filter-String!
        if (val === "") {
          this.selectFilterOptionsBauinformationenNeueBaueigenschaft = this.selectOptionsBauinformationenNeueBaueigenschaft;
          console.log(
            "selectOptionsBauinformationenNeueBaueigenschaft: ",
            this.selectOptionsBauinformationenNeueBaueigenschaft
          );
          console.log(
            "selectFilterOptionsBauinformationenNeueBaueigenschaft: ",
            this.selectFilterOptionsBauinformationenNeueBaueigenschaft
          );
        } else {
          const needle = val.toLowerCase();
          //===============================================================================================================================
          // ACHTUNG: Der folgende Array-Filter mit needle funktioniert NICHT, wenn eines der beteiligten Felder undefined oder null ist!!!
          // Er wirft dann im Browser Log Fehler "Cannot read property 'toLowerCase' of undefined"
          // Daher sollten Filter nur auf Feldern definiert werden, die im Model required sind bzw. default: null haben!!!
          // Allerdings fixed der Fix für #268 unten die null- und undefined-Eventualitäten!!!
          //===============================================================================================================================
          this.selectFilterOptionsBauinformationenNeueBaueigenschaft = this.selectOptionsBauinformationenNeueBaueigenschaft.filter(
            // Array-Filter mit Arrow-Funktion:
            // Siehe https://medium.com/poka-techblog/simplify-your-javascript-use-map-reduce-and-filter-bd02c593cc2d
            //=============================================================================================================================
            // ACHTUNG: Hier muss bei Verwendung von Objekten als Options unbedingt das Unterfeld v.subField angegeben werden!!!
            v =>
              // ACHTUNG: Fix für #268, "!= null"-Abfrage erschlägt auch gleich den undefined-Fall!
              (v.bauinformationsBezeichnung != null &&
                v.bauinformationsBezeichnung.toLowerCase().indexOf(needle) >
                  -1) ||
              // v.bauinformationsTyp.toLowerCase().indexOf(needle) > -1 // ALT
              (v.bauinformationsAnzeigeText != null &&
                v.bauinformationsAnzeigeText.toLowerCase().indexOf(needle) > -1) // NEU
          );
          console.log(
            "selectFilterOptionsBauinformationenNeueBaueigenschaft: ",
            this.selectFilterOptionsBauinformationenNeueBaueigenschaft
          );
        }
      });
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Funktionen für das q-select zum Definieren der Optionen für einen Aufzählungswert im Tab Baueigenschaften/Auswahl:
    //----------------------------------------------------------------------------------------------------------------------------------
    createSelectValueAufzaehlungswertAusgewaehlteBaueigenschaft(val, done) {
      //--------------------------------------------------------------------------------------------------------------------
      // Funktion createSelectValueAufzaehlungswertAusgewaehlteBaueigenschaft für QSelect zur Definition von Optionen
      // für einen neuen Aufzählungswert
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // ACHTUNG: Diese Funktion wird offenbar nur aufgerufen, wenn Options dynamisch zu den vorhandenen hinzugefügt werden!!!
      //--------------------------------------------------------------------------------------------------------------------
      // Calling done(var) when new-value-mode is not set or "add", or done(var, "add") adds "var" content to the model
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "add-unique", or done(var, "add-unique") adds "var" content to the model
      // only if is not already set
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "toggle", or done(var, "toggle") toggles the model with "var" content
      // (adds to model if not already in the model, removes from model if already has it)
      // and it resets the input textbox to empty string
      // ----
      // If "var" content is undefined/null, then it doesn't tampers with the model
      // and only resets the input textbox to empty string

      console.log(
        "In createSelectValueAufzaehlungswertAusgewaehlteBaueigenschaft(val, done) - val: ",
        val
      );

      if (val.length > 0) {
        // ACHTUNG: Werte mit val.length >= 1 sind erlaubt, z.B. "s", "m", "l", "xl" bei Größenangaben!
        if (
          !this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft.includes(
            val
          )

          // ACHTUNG - TODO bei option-value="valueAufzaehlungswert" = nested q-select Option Values:
          // !this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft.valueAufzaehlungswert.includes(val)
        ) {
          // Den Wert als neue Option zum Select Dropdown Menü hinzufügen:
          this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft.push(
            val
            // TODO bei option-value="valueAufzaehlungswert" = nested q-select Option Values:
            // { "valueAufzaehlungswert": val } // ??? Unklar, ob richtig so - bei q-select für Bauinformationen (ebenfalls nested) steht hier nur val!!!
          );
        }
        // TODO bei option-value="valueAufzaehlungswert" = nested q-select Option Values:
        // done({ "valueAufzaehlungswert": val }, "toggle");  // ??? Unklar, ob richtig so - bei q-select für Bauinformationen (ebenfalls nested) steht hier nur val!!!
        done(val, "toggle");
      }
    },

    //------------------------------------------------------------------------------------------------------------------------------------------------
    selectFilterFunctionAufzaehlungswertAusgewaehlteBaueigenschaft(
      val,
      update
    ) {
      //--------------------------------------------------------------------------------------------------------------------
      // Filter-Funktion für QSelect zur Definition der Optionen für einen neuen Aufzählungswert
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // Der Filter-String kann eingegeben werden zur Filterung der auswählbaren Menü Options
      //--------------------------------------------------------------------------------------------------------------------
      update(() => {
        console.log(
          "In selectFilterFunctionAufzaehlungswertAusgewaehlteBaueigenschaft(val, udpate) für update - val: ",
          val
        ); // val ist der vom Benutzer eingegebene Filter-String!
        if (val === "") {
          this.selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft = this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft;
          // Variante: Array Cloning statt Zuweisung - funktioniert, aber beseitigt den Fehler mit @new-value="...()" nicht
          // this.selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft = [...this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft];
          // ES6 Spread Operation auf Array, siehe https://www.samanthaming.com/tidbits/35-es6-way-to-clone-an-array?source=post_page-----9a782b17fa89----------------------
          console.log(
            "selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft: ",
            this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft
          );
          console.log(
            "selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft: ",
            this.selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft
          );
        } else {
          const needle = val.toLowerCase();
          //===============================================================================================================================
          // ACHTUNG: Der folgende Array-Filter mit needle funktioniert NICHT, wenn eines der beteiligten Felder undefined oder null ist!!!
          // Er wirft dann im Browser Log Fehler "Cannot read property 'toLowerCase' of undefined"
          // Daher sollten Filter nur auf Feldern definiert werden, die im Model required sind bzw. default: null haben!!!
          // Allerdings fixed der Fix für #268 unten die null- und undefined-Eventualitäten!!!
          //===============================================================================================================================
          this.selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft = this.selectOptionsAufzaehlungswertAusgewaehlteBaueigenschaft.filter(
            // Array-Filter mit Arrow-Funktion:
            // Siehe https://medium.com/poka-techblog/simplify-your-javascript-use-map-reduce-and-filter-bd02c593cc2d
            // Nur bei nested Objekten: v => v.valueAufzaehlungswert.toLowerCase().indexOf(needle) > -1
            //=============================================================================================================================
            // NEU: Abfrage gegen null und undefined (falls z.B. keine Options definiert sind):
            // v => v.toLowerCase().indexOf(needle) > -1 // ALT
            //=============================================================================================================================
            // ACHTUNG: Hier muss bei Verwendung von Objekten als Options unbedingt das Unterfeld v.subField angegeben werden!!!
            v => v != null && v.toLowerCase().indexOf(needle) > -1 // NEU
          );
          console.log(
            "selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft: ",
            this.selectFilterOptionsAufzaehlungswertAusgewaehlteBaueigenschaft
          );
        }
      });
    },

    //----------------------------------------------------------------------------------------------------------------------------------
    // Funktionen für das q-select zum Definieren der Optionen für einen Aufzählungswert im Tab Baueigenschaften/Neu:
    //----------------------------------------------------------------------------------------------------------------------------------
    initialisiereSelectOptionsUndSelectFilterOptionsAufzaehlungswertNeueBaueigenschaft() {
      // @sts 9.12.19 Initialisierung überflüssig und deshalb auskommentiert
      //--------------------------------------------------------------------------------------------------------------------------------
      // Methode - initialisiert die Options und Filter Options für das q-select zur Definition von Optionen für einen Aufzählungswert
      // TODO: Diese werden temporär zu Testzwecken mit Testwerten gefüllt
      // TODO: Da diese bei Neuanlage eines Aufzählungswerts im Tab "neuTabBaueigenschaften" leer sein sollten und schon so deklariert sind,
      // ist hier eventuell nichts zu tun, es sei denn, man kommt von woanders auf das Tab "Neu"???
      // TODO: Bisher werden die beiden Arrays nur mit Testwerten initialisiert - später können sie initial vermutlich leer sein, da bei
      //       Neuanlage zunächst keine Optionswerte am q-select vorhanden sein sollten
      // TODO: Bei wiederholtem Aufruf des Tabs "Neu" werden die Testwerte mehrfach auf den Array gepushed!!!
      //---------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In initialisiereSelectOptionsUndSelectFilterOptionsAufzaehlungswertNeueBaueigenschaft()"
      );
      /*this.selectOptionsAufzaehlungswertNeueBaueigenschaft.push(
        "xl"
      ); // Variante 1 - funktioniert
      this.selectOptionsAufzaehlungswertNeueBaueigenschaft.push(
        "xs"
      ); // Variante 1 - funktioniert
      this.selectOptionsAufzaehlungswertNeueBaueigenschaft.push(
        "lg"
      ); // Variante 1 - funktioniert
      // this.selectOptionsAufzaehlungswertNeueBaueigenschaft = [ "xl", "xs", "lg" ]; // Variante 2 - funktioniert auch
      // this.selectOptionsAufzaehlungswertNeueBaueigenschaft = [ { valueAufzaehlungswert: "xl" }, ... ];
      // TODO: Nur bei option-value="valueAufzaehlungswert" = nested Property für die q-select Option Values
      // this.selectOptionsAufzaehlungswertNeueBaueigenschaft = []; // TODO: Finale Variante?
      console.log(
        "selectOptionsAufzaehlungswertNeueBaueigenschaft: ",
        this.selectOptionsAufzaehlungswertNeueBaueigenschaft
      );
      this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft.push(
        "xl"
      ); // Variante 1 - funktioniert
      this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft.push(
        "xs"
      ); // Variante 1 - funktioniert
      this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft.push(
        "lg"
      ); // Variante 1 - funktioniert
      // this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft = [ "xl", "xs", "lg" ]; // Variante 2 - funktioniert auch
      // this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft = [ { valueAufzaehlungswert: "xl" }, ... ];
      // TODO: Nur bei option-value="valueAufzaehlungswert" = nested Property für die q-select Option Values
      // this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft = []; // TODO: Finale Variante?
      console.log(
        "selectFilterOptionsAufzaehlungswertNeueBaueigenschaft: ",
        this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft
      );
      */
    },

    //--------------------------------------------------------------------------------------------------------------------------------------------------------
    createSelectValueAufzaehlungswertNeueBaueigenschaft(val, done) {
      //--------------------------------------------------------------------------------------------------------------------
      // Funktion createSelectvalueAufzaehlungswertNeueBaueigenschaft für QSelect zur Definition von Optionen
      // für einen neuen Aufzählungswert
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // ACHTUNG: Diese Funktion wird offenbar nur aufgerufen, wenn Options dynamisch zu den vorhandenen hinzugefügt werden!!!
      //--------------------------------------------------------------------------------------------------------------------
      // Calling done(var) when new-value-mode is not set or "add", or done(var, "add") adds "var" content to the model
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "add-unique", or done(var, "add-unique") adds "var" content to the model
      // only if is not already set
      // and it resets the input textbox to empty string
      // ----
      // Calling done(var) when new-value-mode is "toggle", or done(var, "toggle") toggles the model with "var" content
      // (adds to model if not already in the model, removes from model if already has it)
      // and it resets the input textbox to empty string
      // ----
      // If "var" content is undefined/null, then it doesn't tampers with the model
      // and only resets the input textbox to empty string

      console.log(
        "In createSelectValueAufzaehlungswertNeueBaueigenschaft(val, done) - val: ",
        val
      );

      if (val.length > 0) {
        // ACHTUNG: Werte mit val.length >= 1 sind erlaubt, z.B. "s", "m", "l", "xl" bei Größenangaben!
        if (
          !this.selectOptionsAufzaehlungswertNeueBaueigenschaft.includes(val)

          // ACHTUNG - TODO bei option-value="valueAufzaehlungswert" = nested q-select Option Values:
          // !this.selectOptionsAufzaehlungswertNeueBaueigenschaft.valueAufzaehlungswert.includes(val)
        ) {
          // Den Wert als neue Option zum Select Dropdown Menü hinzufügen:
          this.selectOptionsAufzaehlungswertNeueBaueigenschaft.push(
            val
            // TODO bei option-value="valueAufzaehlungswert" = nested q-select Option Values:
            // { "valueAufzaehlungswert": val } // ??? Unklar, ob richtig so - bei q-select für Bauinformationen (ebenfalls nested) steht hier nur val!!!
          );
        }
        // TODO bei option-value="valueAufzaehlungswert" = nested q-select Option Values:
        // done({ "valueAufzaehlungswert": val }, "toggle");  // ??? Unklar, ob richtig so - bei q-select für Bauinformationen (ebenfalls nested) steht hier nur val!!!
        done(val, "toggle");
      }
    },

    //--------------------------------------------------------------------------------------------------------------------------------------------------------
    selectFilterFunctionAufzaehlungswertNeueBaueigenschaft(val, update) {
      //--------------------------------------------------------------------------------------------------------------------
      // Filter-Funktion für QSelect zur Definition der Optionen für einen neuen Aufzählungswert
      // Vorlage: https://quasar.dev/vue-components/select#Example--Filtering-without-adding-to-menu
      // Der Filter-String kann eingegeben werden zur Filterung der auswählbaren Menü Options
      //--------------------------------------------------------------------------------------------------------------------
      update(() => {
        console.log(
          "In selectFilterFunctionAufzaehlungswertNeueBaueigenschaft(val, update) für update - val: ",
          val
        ); // val ist der vom Benutzer eingegebene Filter-String!
        if (val === "") {
          this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft = this.selectOptionsAufzaehlungswertNeueBaueigenschaft;
          // Variante: Array Cloning statt Zuweisung - funktioniert, aber beseitigt den Fehler mit @new-value="...()" nicht
          // this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft = [...this.selectOptionsAufzaehlungswertNeueBaueigenschaft];
          // ES6 Spread Operation auf Array, siehe https://www.samanthaming.com/tidbits/35-es6-way-to-clone-an-array?source=post_page-----9a782b17fa89----------------------
          console.log(
            "selectOptionsAufzaehlungswertNeueBaueigenschaft: ",
            this.selectOptionsAufzaehlungswertNeueBaueigenschaft
          );
          console.log(
            "selectFilterOptionsAufzaehlungswertNeueBaueigenschaft: ",
            this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft
          );
        } else {
          const needle = val.toLowerCase();
          //===============================================================================================================================
          // ACHTUNG: Der folgende Array-Filter mit needle funktioniert NICHT, wenn eines der beteiligten Felder undefined oder null ist!!!
          // Er wirft dann im Browser Log Fehler "Cannot read property 'toLowerCase' of undefined"
          // Daher sollten Filter nur auf Feldern definiert werden, die im Model required sind bzw. default: null haben!!!
          // Allerdings fixed der Fix für #268 unten die null- und undefined-Eventualitäten!!!
          //===============================================================================================================================
          this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft = this.selectOptionsAufzaehlungswertNeueBaueigenschaft.filter(
            // Array-Filter mit Arrow-Funktion:
            // Siehe https://medium.com/poka-techblog/simplify-your-javascript-use-map-reduce-and-filter-bd02c593cc2d
            // Nur bei nested Objekten: v => v.valueAufzaehlungswert.toLowerCase().indexOf(needle) > -1
            //=============================================================================================================================
            // NEU: Abfrage gegen null und undefined (falls z.B. keine Options definiert sind):
            // v => v.toLowerCase().indexOf(needle) > -1 // ALT
            //=============================================================================================================================
            // ACHTUNG: Hier muss bei Verwendung von Objekten als Options unbedingt das Unterfeld v.subField angegeben werden!!!
            v => v != null && v.toLowerCase().indexOf(needle) > -1 // NEU
          );
          console.log(
            "selectFilterOptionsAufzaehlungswertNeueBaueigenschaft: ",
            this.selectFilterOptionsAufzaehlungswertNeueBaueigenschaft
          );
        }
      });
    },

    pruefeWerteeingabe(baueigenschaft) {
      if (
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
          .unmittelbareElternBaueigenschaft !== undefined &&
        this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
          .unmittelbareElternBaueigenschaft !== null
      ) {
        if (
          !this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
            .ausgewaehlteBaueigenschaftKannEigeneWerteDefinieren
        ) {
          this.disableWerteFelder = true;
          // NEU: Benutzernachricht per global Store und Enums:
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.WERTEEINGABE_NICHT_MOEGLICH
          );
        } else {
          // Werte waren im aktivierten Elternknoten noch nicht definiert
          this.disableWerteFelder = false; // Erlaube Werteänderungen
          globalStore.showBenutzerNachricht(
            // NEU: Benutzernachricht per global Store und Enums:
            BenutzerNachrichten.WERTEEINGABE_MOEGLICH
          );
        }
      }
    },

    //-------------------------------------------------------------------------------------------------------------------------------------------------------
    handleAktivierung(gewuenschterAktivierungszustand) {
      // Methode handleAktivierung
      // Parameter: gewuenschterAktivierungszustand: Boolean (true bei Aktivierung, false bei Deaktivierung)
      // Wird aufgerufen, wenn Toggle bzw. Radio Button für Aktivierung betätigt wird im Tab Baueigenschaften/Auswahl
      //-----------------------------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In handleAktivierung() - ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert: ",
        this.ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert
      );
      if (gewuenschterAktivierungszustand) {
        // Eigenschaft war BISHER nicht aktiviert und soll aktiviert werden
        if (
          this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
            .unmittelbareElternBaueigenschaft !== undefined &&
          this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
            .unmittelbareElternBaueigenschaft !== null
        ) {
          // ACHTUNG: Hier unbedingt Prüfung auf undefined und null,
          // sonst "TypeError: Cannot read property 'definiertNichtUndefiniert' of undefined"
          // bzw. "TypeError: Cannot read property 'aktiviertNichtDeaktiviert' of null"

          // if-Zweig: Es handelt sich NICHT um den Wurzelknoten, an dem die Eigenschaft aktiviert werden soll
          console.log(
            "In handleAktivierung() - Aktivierung, ausgewaehlteBaueigenschatAmElternknoten: ",
            this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
              .unmittelbareElternBaueigenschaft
          );
          let bool = true; //this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.ausgewaehlteBaueigenschaftIstDirektAktivierbar // Die Eigenschaft ist im Elternknoten aktiviert, diese Prüfung ist nicht mehr nötig
          if (bool) {
            if (
              !this
                .hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
                .ausgewaehlteBaueigenschaftKannEigeneWerteDefinieren
            ) {
              this.erbeWerteAusBaumHierarchie();
              this.disableWerteFelder = true;
              // NEU: Benutzernachricht per global Store und Enums:
              globalStore.showBenutzerNachricht(
                BenutzerNachrichten.PFADAKTIVIERUNG_AUSGELOEST_WERTEEINGABE_NICHT_MOEGLICH
              );
              // globalStore.showBenutzerNachricht("Die folgenden Baueinheiten werden beim Abspeichern zusätzlich aktiviert und durch Vererbung definiert:" + this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.idsZuAktivierendeBaueinheiten)
            } else {
              // Werte waren im aktivierten Elternknoten noch nicht definiert
              this.disableWerteFelder = false; // Erlaube Werteänderungen
              globalStore.showBenutzerNachricht(
                // NEU: Benutzernachricht per global Store und Enums:
                BenutzerNachrichten.PFADAKTIVIERUNG_AUSGELOEST_WERTEEINGABE_MOEGLICH
              );
              // globalStore.showBenutzerNachricht("Die folgenden Baueinheiten werden beim Abspeichern zusätzlich aktiviert:" + this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.idsZuAktivierendeBaueinheiten)
            }
            this.ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert = true; // Eigenschaft ist jetzt aktiviert
            this.ausgewaehlteBaueigenschaft.aktivierbar = false; // NEU: MS - Setze aktivierbar zurück!
            // HINWEIS: Vererbung an Kinder wird im Backend erledigt!
          } else {
            // Die Eigenschaft ist im Elternknoten nicht aktiviert und darf deshalb gemäß Aktivierungsregel nicht aktiviert werden!
            // In diesem Fall verbleibt this.ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert im bisherigen Zustand "false"
            // NEU: Benutzernachricht per global Store und Enums:
            globalStore.showBenutzerNachricht(
              BenutzerNachrichten.AKTIVIERUNG_NICHT_MOEGLICH
            );
            console.log("Dieser Fall sollte nicht mehr vorkommen.");
          }
        } else {
          // Es handelt sich um den Wurzelknoten, und die Eigenschaft soll an diesem aktiviert werden
          // this.disableWerteFelder = false;
          console.log("In handleAktivierung() - Wurzelknoten");
          this.disableWerteFelder = false;
          this.ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert = true;
          this.ausgewaehlteBaueigenschaft.aktivierbar = false; // NEU: MS - Setze aktivierbar zurück!
          // Wertefelder sind in diesem Fall enabled!
          // NEU: Benutzernachricht per global Store und Enums:
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.AKTIVIERUNG_AUSGELOEST_WURZELKNOTEN
          );
        }
      } else {
        // Eigenschaft soll deaktiviert werden
        if (!this.ausgewaehlteBaueigenschaft.obligatorischNichtOptional) {
          console.log("In handleAktivierung() - Deaktivierung");
          this.ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert = false;
          this.ausgewaehlteBaueigenschaft.aktivierbar = true; // NEU
          this.disableWerteFelder = true;
          this.verwerfeEingabewerte();
          // NEU: Benutzernachricht per global Store und Enums:
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.DEAKTIVIERUNG_AUSGELOEST
          );
        } else {
          // NEU: Benutzernachricht per global Store und Enums:
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.DEAKTIVIERUNG_NICHT_MOEGLICH
          );
        }
      }
    },

    selectHandlerBauinformationAusgewaehlteBaueigenschaft(val) {
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      // Handler für QSelect zur Auswahl der Bauinformation für eine Baueigenschaft
      // Die Auswahl wird hier in die ausgewählte Baueigenschaft übertragen
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      console.log("In selectHandlerBauinformationAusgewaehlteBaueigenschaft()");
      console.log("val: ");
      this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation._id =
        val._id;
      this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation.bauinformationsAnzeigeText =
        val.bauinformationsAnzeigeText; // NEU, statt bauinformationsTyp
      this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.bauinformation.bauinformationsBezeichnung =
        val.bauinformationsBezeichnung;
    },

    erbeWerteAusBaumHierarchie() {
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      // Überträgt die Werte aus dem gefundenenen definierten Elternknoten in die ausgewaehlte Baueigenschaft
      // Wird beim Aktivieren aufgerufen
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      console.log("In erbeWerteAusBaumHierarchie()");

      for (var prop in this
        .hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
        .relevanteKennwerte) {
        if (prop === "datumsWert1" || prop === "datumsWert2") {
          // ACHTUNG: Funktioniert so nur im Zusammenspiel mit type="date" an den betreffenden Quasar-Feldern, welche
          //          in der Lage sind, diese Felder als native Date-Typen zu verarbeiten!
          //          Die Date-Utils verarbeiten als Argument nur diese Date-Typen, nicht Strings!
          this.ausgewaehlteBaueigenschaft[prop] = date.formatDate(
            this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung
              .relevanteKennwerte[prop],
            "YYYY-MM-DD"
          );
        } else {
          // ACHTUNG: Hier kam ESLint Fehler "error Expected "[" and "]" to be on the same line  standard/computed-property-even-spacing"
          // (weil Prettier offenbar automatisch die eckigen Klammern auf verschiedene Zeilen umformatiert, warum auch immer)
          // Gelöst durch Einfügen folgender Regel in eslintrc.js: "standard/computed-property-even-spacing": "off",
          // Danach Rebuild mit quasar dev notwendig, damit Quasar die eue ESLint Regel berücksichtigt!
          // Nach Tipp von https://github.com/prettier/eslint-config-prettier/issues/29
          this.ausgewaehlteBaueigenschaft[
            prop
          ] = this.hierarchischHoechsteDefinierteBaueigenschaftInElternbeziehung.relevanteKennwerte[
            prop
          ];
        }
      }
      this.ausgewaehlteBaueigenschaft.definiertNichtUndefiniert = true;
      // this.ausgewaehlteBaueigenschaft.ererbtNichtGesetzt = true; // NEU -#258:  MS - ist vermutlich FALSCH - disabled
    },

    verwerfeEingabewerte() {
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      // Wird beim Deaktivieren aufgerufen
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      console.log("In verwerfeEingabewerte()");

      this.ausgewaehlteBaueigenschaft.kennWert1 = null;
      this.ausgewaehlteBaueigenschaft.kennWert2 = null;
      // this.ausgewaehlteBaueigenschaft.symbol = null; Auskommentiert, da dies typbezogene Eigenschaften sind
      // this.ausgewaehlteBaueigenschaft.einheit = null;
      // this.ausgewaehlteBaueigenschaft.operator = null;
      // this.ausgewaehlteBaueigenschaft.formel = null;
      this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 = null;
      this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 = null;
      this.ausgewaehlteBaueigenschaft.datumsWert1 = null; // Wurde vergessen!!!
      this.ausgewaehlteBaueigenschaft.datumsWert2 = null; // Wurde vergessen!!!
      this.ausgewaehlteBaueigenschaft.tagesZeitWert1 = null;
      this.ausgewaehlteBaueigenschaft.tagesZeitWert1 = null;
      this.ausgewaehlteBaueigenschaft.aufzaehlungsWert = [];
      this.ausgewaehlteBaueigenschaft.wahrheitsWert = null; // Wurde vergessen!!!

      this.ausgewaehlteBaueigenschaft.definiertNichtUndefiniert = false;
      this.ausgewaehlteBaueigenschaft.ererbtNichtGesetzt = false;
    },

    handleDisabledFieldsNeueBaueigenschaft(newValue, oldValue) {
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      // ?????? ACHTUNG: Muss "handler" heißen, siehe https://vuejs.org/v2/api/#watch
      // ?????? TODO XXXXXX: Wird nirgends aufgerufen?
      // Stattdessen gibt es eine computed Property disabledFieldsNeueBaueigenschaft
      //--------------------------------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In Watch Handler für Watch auf neueBaueigenschaft.aktiviertNichtDeaktiviert()"
      );
      // newValue, oldValue beziehen sich auf den Wert von neueBaueigenschaft.aktiviertNichtDeaktiviert
      console.log("newValue: ", newValue, "oldValue: ", oldValue);
      this.disabledFieldsNeueBaueigenschaft.kennWert1 = true;
      this.disabledFieldsNeueBaueigenschaft.kennWert2 = true;
      this.disabledFieldsNeueBaueigenschaft.datumsWert1 = true;
      this.disabledFieldsNeueBaueigenschaft.datumsWert2 = true;
      this.disabledFieldsNeueBaueigenschaft.tagesZeitWert1 = true; // NEU
      this.disabledFieldsNeueBaueigenschaft.tagesZeitWert2 = true; // NEU
      this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = true;
      this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert2 = true;
      this.disabledFieldsNeueBaueigenschaft.aufzaehlungsWert = true;
      this.disabledFieldsNeueBaueigenschaft.wahrheitsWert = true;
      this.disabledFieldsNeueBaueigenschaft.symbol = true;
      this.disabledFieldsNeueBaueigenschaft.einheit = true;
      this.disabledFieldsNeueBaueigenschaft.operator = true;
      this.disabledFieldsNeueBaueigenschaft.formel = true; // NEU
      this.disabledFieldsNeueBaueigenschaft.sonderzeichen = true; // NEU
      if (newValue) {
        // Aktivierung
        if (!this.suppressNotificationNeuTabBaueigenschaften) {
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.AKTIVIERUNG_AUSGELOEST_WERTEEINGABE_MOEGLICH
          );
        }
        var arg = this.neueBaueigenschaft.typbezogeneBaueigenschaft.werteTyp;
        switch (arg) {
          case "Kennwert":
            this.disabledFieldsNeueBaueigenschaft.kennWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.symbol = false;
            this.disabledFieldsNeueBaueigenschaft.einheit = false;
            this.disabledFieldsNeueBaueigenschaft.operator = false;
            this.disabledFieldsNeueBaueigenschaft.formel = false; // NEU
            this.disabledFieldsNeueBaueigenschaft.sonderzeichen = false; // NEU
            break;
          case "Kennwertepaar":
            this.disabledFieldsNeueBaueigenschaft.kennWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.kennWert2 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert2 = false;
            this.disabledFieldsNeueBaueigenschaft.symbol = false;
            this.disabledFieldsNeueBaueigenschaft.einheit = false;
            this.disabledFieldsNeueBaueigenschaft.operator = false;
            this.disabledFieldsNeueBaueigenschaft.formel = false; // NEU
            this.disabledFieldsNeueBaueigenschaft.sonderzeichen = false; // NEU
            break;
          case "Datumswert":
            this.disabledFieldsNeueBaueigenschaft.datumsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            break;
          case "Datumswertepaar":
            this.disabledFieldsNeueBaueigenschaft.datumsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.datumsWert2 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert2 = false;
            break;
          case "Tageszeitwert":
            this.disabledFieldsNeueBaueigenschaft.tagesZeitWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            break;
          case "Tageszeitwertepaar":
            this.disabledFieldsNeueBaueigenschaft.tagesZeitWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.tagesZeitWert2 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert2 = false;
            break;
          case "Bezeichnungswert":
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            break;
          case "Bezeichnungswertepaar":
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.bezeichnungsWert2 = false;
            break;
          case "Aufzählungswert":
            // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            this.disabledFieldsNeueBaueigenschaft.baueigenschaft.bezeichnungsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.aufzaehlungsWert = false;
            break;
          case "Wahrheitswert":
            // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            this.disabledFieldsNeueBaueigenschaft.baueigenschaft.bezeichnungsWert1 = false;
            this.disabledFieldsNeueBaueigenschaft.wahrheitsWert = false;
            break;
        }
      } else {
        if (!this.suppressNotificationNeuTabBaueigenschaften) {
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.DEAKTIVIERUNG_AUSGELOEST
          );
        }
      }
      this.suppressNotificationNeuTabBaueigenschaften = false;
    }
  }, // /methods:

  //***=======================================================================================================================================================
  computed: {
    selectedNodeTreeBaustoffe: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // NEU: Wird für Tab "Zugeordnete Baustoffe" nun auch hier computed in baueinheiten.vue, für den dort angezeigten vereinfachten Baustoffbaum
      //      zur Auswahl von Baustoffen an einer Baueinheit
      // Computed Property - liefert den aktuell im Baustoffbaum selektierten Knoten (node) zurück
      // ACHTUNG: War temporär nach data() verschoben wegen Timing-Problem - führte jedoch zu massiven anderen Problemen, daher wieder computed
      //-------------------------------------------------------------------------------------------------------------------------------
      /*
      console.log("In selectedNodeTreeBaustoffe (computed)");
        console.log(
          "selectedKeyTreeBaustoffe: ",
          this.selectedKeyTreeBaustoffe
      );
      */
      // Workaround für Problem, wenn obiges Console Logging per uglifyOptions oder durch Auskommentierung entfällt -
      // es tritt dann ein Timing-Problem auf, dass offenbar die undefined-Abfrage unten noch true ist und daher die computed
      // Funktion undefined zurückliefert - dann rendered das ganze Template rechts vom QSplitter NICHT mehr!!!
      // Asynchrones sleep ist in computed nicht erlaubt, daher eigene Schleife für Verzögerung:
      /*
      let j=0;
        for (let i=0; i<100000; i++) {
        j = j+1;
      };
      */
      // Dies funktioniert jedoch NICHT - stattdessen unten Pseudozugriff per helper auf this.selectedKeyTreeBaustoffe - beeinflusst vermutlich
      // das Timing und die Reihenfolge der Initialisierungen dieser Variablen/computed Funktionen - funktionierte, aber fragil
      // Obige console.logs sicherheitshalber disabled, werden nicht unbedingt benötigt
      let helper = this.selectedKeyTreeBaustoffe; // WICHTIG: Für Zeitverögerung!!!
      if (this.$refs.treeBaustoffe !== undefined) {
        try {
          return this.$refs.treeBaustoffe.getNodeByKey(
            this.selectedKeyTreeBaustoffe
          );
        } catch {
          return null;
        }
      } else {
        return undefined;
      }
    },
    //--------------------------------------------------------------------------------------------------------------------------------------------------------
    // ACHTUNG: Computed Properties sind zwar auch functions, dürfen aber im Template NICHT mit :property="function()",
    //          sondern MÜSSEN per :property="function" aufgerufen werden!!!
    //          Andernfalls kommt die irreführendé Vue-Fehlermeldung "..is not a function"!!!
    // ERKLÄRUNG: Computed Properties akzeptieren keine Argumente, deshalb funktioniert computed() NICHT!!!
    // Siehe https://forum.quasar-framework.org/topic/4596/how-to-trigger-an-event-when-button-in-q-uploader-is-clicked-how-to-dynamically-disable-enable-it/3
    //--------------------------------------------------------------------------------------------------------------------------------------------------------
    getPfadExportBauteilkatalogAnBaueinheit: function() {
      // ================================================================================================================================================== -->
      // Funktion zur Ermitlung der URL der heruntergeladenen Excel-Datei
      // Abgeleitet aus entsprechender Funktion in daten-austausch.vue -->
      // ================================================================================================================================================== -->
      console.log(
        "In getPfadExportBauteilkatalogAnBaueinheit()- pfadExportBauteilkatalog: ",
        this.pfadExportBauteilkatalogAnBaueinheit
      );
      return (
        process.env.fileAPI + "/" + this.pfadExportBauteilkatalogAnBaueinheit
      );
    },

    getPfadDownloadBaueigenschaftsProfilFormulareAnBaueinheit: function() {
      //--------------------------------------------------------------------------------------------------------------------------
      // NEU: Funktion zur Ermittlung der URL der heruntergeladenen Excel-Datei
      // ACHTUNG: Muss in computed sein!
      console.log(
        "In getPfadDownloadBaueigenschaftsProfilFormulareAnBaueinheit - pfadDownloadBaueigenschaftsProfilFormulareAnBaueinheit: ",
        this.pfadDownloadBaueigenschaftsProfilFormulareAnBaueinheit
      );
      return (
        process.env.fileAPI +
        "/" +
        this.pfadDownloadBaueigenschaftsProfilFormulareAnBaueinheit
      );
    },

    //------------------------------------------------------------------------------------------------------------------------------------------------------
    computeLabelButtonBaueigenschaftAnzeigenOderBearbeiten: function() {
      if (this.benutzerRolleIstMitarbeiter) {
        return "Baueigenschaft anzeigen";
      } else {
        return "Baueigenschaft bearbeiten";
      }
    },

    computeLabelKontextMenueBaueigenschaftAnzeigenOderBearbeiten: function() {
      if (this.benutzerRolleIstMitarbeiter) {
        return "Baueigenschaft auswählen und anzeigen";
      } else {
        return "Baueigenschaft auswählen und bearbeiten";
      }
    },

    isValidAutorenAusgewaehlteBaueinheit: function() {
      //-----------------------------------------------------------------------------------------------------------------------------------------
      // NEU: Computed Property für external Validation per :error="!isValidAutorenAusgewaehlteBaueinheit" am QSelect für zugeordnete Autoren:
      // Vorlage siehe: https://quasar.dev/vue-components/input#External-validation
      // Die Error Message muss abhängig von dieser computed Property per dediziertem neuen Error VSlot unter dem QSelect displayed werden!
      // Die Validation prüft weiter unten, ob mindestens ein zugeordneter Autor am ausgewählten Knoten ausgewählt ist und (da in den QSelect Options,
      // sofern Autoren am Elternknoten zugeordnet sind, die Select Options stets die Autoren am Elternknoten sind) mindestens ein Autor
      // ausgewählt ist, was dann eine Untermenge der zugeordneten Autoren am Elternknoten ist. Dies ist notwendig, um die Vererbungsregel
      // für Autoren zu gewährleisten - siehe internes Design.
      //-----------------------------------------------------------------------------------------------------------------------------------------
      // Hier erfolgt zusätzlich zunächst eine Prüfung, ob der angemeldete Benutzer im Select Model enthalten ist
      // Wenn ja: OK, wenn nein: Benutzerwarnung, dass der angemeldete Benutzer nicht ohne Folgen abgewählt werden kann (dieser darf dann nach Speichern
      // nichts mehr ändern am ausgewählten Knoten, auch keine Autoren mehr eintragen).
      // ACHTUNG: Die :error Property wird per Test unabhängig von den sonstigen :disable-Bedingugen am QSelect ausgeführt, selbst wenn das QSelect disabled ist!
      //          Deshalb muss vor obiger Validation GENAU die negierte Bedingung vom :disable abgefragt werden, sonst erscheint die
      //          Warnung fälschlich auch bei disabletem QSelect!
      // HINWEIS: Hier den negierten logischen Ausdruck am :disable !(!a || !b || !c || !d) umgewandelt in (a && b && c && d) - siehe :disable am QSelect im Template
      if (
        this
          .benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten &&
        this.selectedNodeTreeBaueinheiten.baumKnotenTyp !== "Wurzelknoten" &&
        !this.nodeTreeBaueinheitenIstImBauvorlagenunterbaum(
          this.selectedNodeTreeBaueinheiten
        ) &&
        !(
          this.localStore.state.anmeldeDatenBenutzer.benutzerRolle ===
            "Mitarbeiter" &&
          this.selectedNodeTreeBaueinheiten.benutzerKennungenAutoren.length ===
            0
        )
      ) {
        // Das QSelect ist dann also NICHT insgesamt disabled und es muss in diesem Fall dann obige Prüfung erfolgen
        if (
          this.localStore.state.anmeldeDatenBenutzer.benutzerRolle ===
            "Mitarbeiter" &&
          !this.selectModelAutorenAusgewaehlteBaueinheit.includes(
            this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
          )
        ) {
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.BAUEINHEIT_ANGEMELDETER_BENUTZER_ALS_AUTOR_ABGEWAEHLT_WARNUNG
          );
        }
      }
      //-------------------------------------------------------------------------------------------------------------------------------------
      // Es folgt obige externe Validation, die unabhängig von obigen Prüfungen erfolgt
      // Man beachte dabei, dass die computed Property ja in jedem Fall einen Wert zurückliefern muss!
      // Außerdem können obige Warnsituation (angemeldeter Benutzer wurde abgewählt) und der Validation-Fehler (gar kein Autor mehr ausgewählt) hier
      // auch gleichzeitig auftreten!
      if (!this.elternKnotenHatZugeordneteAutoren) {
        // Keine zugeordneten Autoren am Elternknoten, inkludiert auch Wurzelknoten
        return true; // Hier keine weitere Validierung notwendig, der Rest wird durch die richtig initialisierten Select Options erledigt (alle Benutzer)
      } else {
        if (this.selectModelAutorenAusgewaehlteBaueinheit.length > 0) {
          return true; // Es muss mindestens ein Autor ausgewählt sein im Select Model (aus den richtig initialisierten Select Options,
          // in diesem Fall die Autoren am Elternknoten) - dies gilt für alle Benutzerrollen, auch wenn der angemeldete Benutzer kein Mitarbeiter ist
        } else {
          return false; // Sonst Validation Fehler zurückgeben! Löst Error Message aus per Error VSlot am QSelect und disabled den Button zum Speichern.
        }
      }
    },

    //======================================================================================================================================
    // NEU: Computed Properties, die in Abhängigkeit von der Benutzerrolle des angemeldeten Benutzers Labels berechnen oder
    //      Boolean-Werte zum Disablen von Kontextmenü-Einträgen/Buttons/Tabs zurückliefern
    //--------------------------------------------------------------------------------------------------------------------------------------

    benutzerKennungenAutorenAmElternKnoten: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Neue computed Property, welche verwendet wird zur Bestimmung, ob/welche Autoren an einem Knoten hinzugefügt oder entfernt werden
      // dürfen (für alle Benutzerrollen). Sie liefert die am Elternknoten definierten Autoren als Array-Feld.
      // Wenn benutzerKennungenAutorenAmElterKnoten ein leerer Array ist:
      // In diesem Fall dürfen beliebige Autoren aus der Menge aller Benutzer per QSelect hinzugefügt werden
      // Wenn benutzerKennungenAutorenAmElterKnoten nicht leer ist, dürfen nur Autoren ausgewählt werden aus genau dieser Menge der Autoren am Elternknoten
      // benutzerKennungenAutorenAmElternKnoten bestimmt also das Model des QSelect
      // Ob benutzerKennungenAutorenAmElternKnoten leer ist oder nicht, wird von der nachfolgenden Computed Property
      // elternKnotenHatZugeordneteAutoren bestimmt, die benutzerKennungenAutorenAmElternKnoten aufruft
      if (this.selectedNodeTreeBaueinheiten.parent == null) {
        // Kein Parent Feld (undefined) oder null: es handelt sich um den Wurzelknoten
        return []; // leerer Array, der Wurzelknoten selbst muss allerdings sowieso immer ebenfalsl einen leeren Array benutzerKennungenAutoren haben!!!
      } else {
        return this.$refs.treeBaueinheiten.getNodeByKey(
          this.selectedNodeTreeBaueinheiten.parent
        ).benutzerKennungenAutoren; // Array-Feld am Elternknoten
      }
    },

    elternKnotenHatZugeordneteAutoren: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Neue computed Property, welche verwendet wird zur Bestimmung, ob das Array-Feld benutzerKennungenAutoren leer ist oder nicht.
      if (this.benutzerKennungenAutorenAmElternKnoten.length === 0) {
        return false; // Array ist leer - wird auch für den Wurzelknoten zurückgeliefert!
      } else {
        return true; // Array ist nicht leer
      }
    },

    benutzerDarfBearbeitenTypbezogeneBaueigenschaftenSelectedNodeTreeBaueinheiten: function() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Neue computed Property zum Disablen von Aktionen an (typbezogenen) Baueigenschaften
      // Ob ein Mitarbeiter (d.h. nicht Administrator oder Redakteur) solche bearbeiten (d.h. anlegen/ändern/löschen) darf,
      // wird durch ein globales Flag gesteuert: localStore.state.mitarbeiterDuerfenTypbezogeneBaueigenschaftenBearbeiten
      // Administratoren und Redakteure dürfen diese immer bearbeiten
      if (
        this.localStore.state.anmeldeDatenBenutzer.benutzerRolle ===
        "Mitarbeiter"
      ) {
        if (
          this.localStore.state
            .mitarbeiterDuerfenTypbezogeneBaueigenschaftenBearbeiten
        ) {
          return true;
        } else {
          return false;
        }
      } else {
        // Administrator oder Redakteur
        return true;
      }
    },

    benutzerDarfBearbeitenInklusiveBauvorlagenunterbaumSelectedNodeTreeBaueinheiten: function() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Neue, zentrale computed Property, welche verwendet wird zum Disablen von
      // Tabs/Buttons/Input-Feldern/Select-Feldern/Toggles/Popup Edits/Uploaders etc.
      // in den Komponenten, die im QSplitter rechts vom QTree für den Bauvorhabenbaum angezeigt werden
      // Sie ruft lediglich zwei bereits vorhandene computed Properties auf, die mit && verkettet werden
      // Diese würden sonst mit :disable = "!a || !b" verwendet, was identisch ist mit :disable = "!(a && b)""
      return (
        this.benutzerDarfBearbeitenSelectedNodeTreeBaueinheiten &&
        this
          .benutzerDarfBearbeitenImBauvorlagenunterbaumSelectedNodeTreeBaueinheiten
      );
    },

    benutzerIstAutorAnWurzelVonFuerBewegenMarkiertemZweigTreeBaueinheiten: function() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Computed Property, die berechnet, ob der angemeldete Benutzer zu den Autoren am des zum Kopieren
      // oder Verschieben markierten Zweigs gehört
      // (falls false, muss das Verschieben disabled werden, da es eine Änderung wäre, für die der Benutzer nicht berechtigt ist)
      console.log(
        "In benutzerIstAutorAnWurzelVonFuerBewegenMarkiertemZweigTreeBaueinheiten (computed)"
      );
      if (
        this.idWurzelZuBewegenderZweig === undefined ||
        this.idWurzelZuBewegenderZweig == null
      ) {
        return false;
      } else {
        // Mittels QTree API getNodeByKey kann auf dessen Node inklusive seiner Kindknoten (im verschachtelten Unterfeld children) zugegriffen werden:
        let wurzelZuBewegenderZweig = this.$refs.treeBaueinheiten.getNodeByKey(
          this.idWurzelZuBewegenderZweig
        );
        // ACHTUNG: wurzelZuBewegenderZweig ist eine lokale Hilfsvariable, KEIN .this verwenden!!!
        console.log("wurzelZuBewegenderZweig: ", wurzelZuBewegenderZweig); // ACHTUNG: Kein .this verwenden!
        if (
          wurzelZuBewegenderZweig.hasOwnProperty("benutzerKennungenAutoren")
        ) {
          // console.log("wurzelZuBewegenderZweig.benutzerKennungenAutoren: ", wurzelZuBewegenderZweig.benutzerKennungenAutoren);
          // console.log("localStore.state.anmeldeDatenBenutzer.eMailBenutzer: ", this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer);
          if (
            wurzelZuBewegenderZweig.benutzerKennungenAutoren.includes(
              this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
            )
          ) {
            console.log(
              "Benutzer ist Autor am zum Verschieben/Kopieren markierten Zweig - Verschieben enablen"
            );
            return true;
          } else {
            console.log(
              "Benutzer ist kein Autor am zum Verschieben/Kopieren markierten Zweig - Verschieben disablen"
            );
            // HINWEIS: Dies inkludiert den Fall, dass das Array-Feld benutzerKennungenAutoren leer ist!!!
            return false;
          }
        } else {
          // Feld benutzerKennungAutoren existiert nicht, defensiv true returnen
          console.log(
            "ACHTUNG: Feld benutzerKennungenAutoren existiert nicht - benutzer wird als Autor zugelassen"
          );
          return true;
        }
      }
    },

    benutzerDarfNeuanlegenKindKnotenUnterSelectedNodeTreeBaueinheiten: function() {
      // Computed Property, um festzustellen, ob der angemeldete Benutzer unter einer im Bauvorhabenbaum ausgewählten Knoten (Baueinheit)
      // einen neuen Kindknoten anlegen darf (per Button)
      // ACHTUNG: Analoge Funktion benutzerDarfNeuanlegenKindKnotenOderMarkiertenZweigBewegenUnterNodeTreeBaueinheiten(node)
      // für die entsprechenden Kontextmenüs am Bauvorhabenbaum ist in methods:, da sie Parameter node braucht!
      console.log(
        "In benutzerDarfNeuanlegenKindKnotenUnterSelectedNodeTreeBaueinheiten (computed)"
      );
      // console.log("localStore.state.anmeldeDatenBenutzer.benutzerRolle: ", this.localStore.state.anmeldeDatenBenutzer.benutzerRolle);
      if (
        this.localStore.state.anmeldeDatenBenutzer.benutzerRolle !==
        "Mitarbeiter"
      ) {
        // Benutzerrolle "Administrator" oder "Redakteur"
        return true;
      } else {
        // Benutzerrolle "Mitarbeiter"
        if (
          this.selectedNodeTreeBaueinheiten.benutzerKennungenAutoren.includes(
            this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
          )
        ) {
          console.log("Mitarbeiter ist Autor für ausgewählten Knoten.");
          console.log(
            "Mitarbeiter darf Kindknoten unter dem ausgewählten Knoten anlegen."
          );
          return true;
        } else {
          // Mitarbeiter ist kein Autor für ausgewählten Knoten! Dies inkludiert den Fall, dass benutzerKennungenAutoren leer ist!
          if (
            this.selectedNodeTreeBaueinheiten.benutzerKennungenAutoren
              .length === 0
          ) {
            // benutzerKennungenAutoren ist leerer Array
            //==========================================================================================
            // ACHTUNG: Leeren Array unbedingt mit array.length === 0 testen, nicht mit array === [] !!!
            //==========================================================================================
            console.log(
              "selectedNodeTreeBaueinheiten.benutzerKennungenAutoren ist leerer Array."
            );
            console.log(
              "Mitarbeiter darf Kindknoten unter dem ausgewählten Knoten anlegen."
            );
            return true;
            // Vorläufig: Mitarbeiter dürfen unter allen solchen Knoten mit leerem Array-Feld benutzerKennungenAutoren
            // Kindknoten anlegen (oder auch markierte Zweige dorthin bewegen) - also return true in diesem Fall
            //===================================================================================================================================
            // VORLÄUFIG VERWORFENE Idee: Stelle fest, ob dies der unterste Knoten im Pfad aufwärts mit leerem Array benutzerKennungenAutoren ist
            // Code dafür DISABLED!!!
            // Stelle fest, ob der ausgewählte Knoten der unterste Knoten im Pfad aufwärts mit leerem Array benutzerKennungenAutoren ist
            // Wenn ja: return true (Neuanlage erlaubt), sonst: false (Neuanlage Kindknoten nicht erlaubt)
            // Idee: Dazu das parent-Feld benutzen - dieses enthält die Id des Elternknotens, wobei der Wurzelknoten KEIN parent-Field hat!
            // Hinweis: path-Feld enthält die Ids der Elternknoten vom Wurzelknoten an abwärts, eventuell (am Wurzelknoten) NUR die Id des Wurzelknotens
            // ACHTUNG: FEHLERHAFTER Algorithmus dafür:(siehe Beschreibung unter FEHLER unten)
            // - Ermittle aus parent-Feld den Elternknoten des ausgewählten Knotens
            // - Wenn kein Elternknoten: Der ausgewählte Knoten ist der unterste solche im Pfad (FALSCH: Kann Kinder haben)
            // - Andernfalls: Der ausgewählte Knoten ist nicht der unterste solche im Pfad (AUCH FALSCH)
            // - Hinweis: Wegen der im Design beschriebenen Vererbungsregel für Autoren muss der Elternknoten in letzterem Fall ebenfalls leeres
            //   Array-Feld für die Autoren haben! (RICHTIG)
            // FEHLERHAFTER CODE DISABLED:
            /*
            if (!this.selectedNodeTreeBaueinheiten.hasOwnProperty("parent")) {
              // Es handelt sich also bei dem ausgewählten Knoten mit leerem Array-Feld benutzerKennungenAutoren um den Wurzelknoten
              // In diesem Fall ist dies der unterste solche Knoten, also muss true returned werden
              console.log(
                "Der ausgewählte Knoten ist der Wurzelknoten mit leerem Array-Feld benutzerKennungenAutoren" +
                "Mitarbeiter darf Kindknoten darunter anlegen."
              );
              return true;
            } else {
              // Der ausgewählte Knoten hat ein Parent. Wegen obiger Vererbungsregel muss in diesem Fall dessen Array-Feld benutzerKennungenAutoren ebenfalls leer sein
              // Zur Sicherheit nun console.log-Ausgabe dieses Array-Felds - Zugriff mit QTree-API getNodeByKey()
              console.log(
                "benutzerKennungenAutoren am Elternknoten des ausgewählten Knotens: ",
                this.$refs.treeBaueinheiten.getNodeByKey(
                  this.selectedNodeTreeBaueinheiten.parent
                ).benutzerKennungenAutoren
              );
              console.log(
                "ACHTUNG: Dieses Feld muss ein leerer Array sein, sonst liegt Inkonsistenz in benutzerBerechtigungen vor!"
              );
              console.log(
                "Der ausgewählte Knoten ist der unterste Knoten im Pfad mit leerem Array-Feld benutzerKennungenAutoren. " +
                "Mitarbeiter darf Kindknoten darunter anlegen."
              );
              //============================================================================================================================
              // FEHLER:
              // Die Tatsache, dass der Elternknoten ebenfalls leeres Feld benutzerKennungenAutoren hat, heisst nicht, dass -->
              // es nicht noch (ggf. nicht einmal lazy geladene) Kindknoten mit leerem Array-Feld gibt, d.h. es muss sich keineswegs -->
              // um den untersten solchen Knoten handeln. Ob es sich um den untersten solchen Knoten handelt, könnte nur durch einen -->
              // Backend-Call ermittelt werden, der rekursiv solange die Kindknoten aus der Datenbank liest, bis keine mit leerem Array-Feld -->
              // mehr zu finden sind. Das ist Performance-sensitiv, da es ja für jeden geladenen Knoten im Baum ermittelt werden muss für -->
              // das richtige Disabling der Kontextmenüs. Eigentlich müsste dazu der ganze Bauvorhabenbaum gleich initial so geladen werden, dass alle
              // alle Zweige mit leerem Array-Feld bis zu den jeweils ersten Kindern mit nicht leerem Array-Feld geladen werden. -->
              // Dies wäre ein größerer Eingriff in das Design, der erst einmal vermieden werden sollte.
              // Einstweilen muss wohl die Logik so geändert werden, dass unter jedem Knoten mit leerem Array-Feld benutzerKennungenAutoren -->
              // ein Mitarbeiter Kindknoten anlegen darf, nicht nur unter den jeweils untersten in einem Zweig.
              // In diesem Fall ist dies also  der unterste Knoten mit leerem Array benutzerKennungenAutoren, also muss true returned werden
              return true;
            }
            */
          } else {
            console.log(
              "Der ausgewählte Knoten hat nicht leeres Array-Feld benutzerKennungenAutoren. " +
                "Mitarbeiter ist kein darin zugeordneter Autor und darf keinen Kindkoten darunter anlegen."
            );
            return false;
          }
        }
      }
    },

    benutzerDarfBearbeitenSelectedNodeTreeBaueinheiten: function() {
      // Computed Property, um festzustellen, ob der angemeldete Benutzer eine im Bauvorhabenbaum ausgewählte Baueinheit
      // bearbeiten darf (d.h. löschen oder umbenennen darf per Button)
      // ACHTUNG: Analoge Funktion für Kontextmenü ist in methods:, da sie Parameter node braucht!
      console.log(
        "In benutzerDarfBearbeitenSelectedNodeTreeBaueinheiten (computed)"
      );
      // console.log("localStore.state.anmeldeDatenBenutzer.benutzerRolle: ", this.localStore.state.anmeldeDatenBenutzer.benutzerRolle);
      if (this.selectedNodeTreeBaueinheiten == null) {
        return false;
      } // Sonst TypeError: Cannot read property 'benutzerKennungenAutoren' of null!

      // Sonst weitermachen:
      if (
        this.localStore.state.anmeldeDatenBenutzer.benutzerRolle !==
        "Mitarbeiter"
      ) {
        // Benutzerrolle "Administrator" oder "Redakteur"
        return true;
      } else {
        // Benutzerrolle "Mitarbeiter"
        if (
          this.selectedNodeTreeBaueinheiten.benutzerKennungenAutoren.includes(
            this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
          )
        ) {
          return true;
        } else {
          // Dies inkludiert den Fall, dass benutzerKennungenAutoren leer ist
          return false;
        }
      }
    },

    selectedKeyTreeBaueinheitenIstImBauvorlagenunterbaum: function() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Vorlage: selectedKeyTreeBaustoffeIstImRohstoffunterbaum in baustoffe.vue
      // Computed Property - berechnet, ob die im Bauvorhabenbaum ausgewählte Baueinheit im Bauvorlagenunterbaum ist (für Disabling von Buttons)
      // ACHTUNG: Analoge Funktion nodeTreeBaueinheitenIstImBauvorlagenunterbaum(node) für Disabling von Kontextmenüs
      //          Diese arbeitet auf Parameter node statt auf selectedKeyTreeBaueinheiten.
      //          Diese muss wegen Parameter in methods: definiert werden!
      //----------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In selectedKeyTreeBaueinheitenIstImBauvorlagenunterbaum (computed)"
      );
      if (
        this.selectedKeyTreeBaueinheiten !== undefined &&
        this.selectedKeyTreeBaueinheiten !== null
      ) {
        if (
          this.selectedNodeTreeBaueinheiten.baumKnotenTyp === "Wurzelknoten"
        ) {
          return false;
        }
        if (
          this.selectedNodeTreeBaueinheiten.baumKnotenTyp ===
          "Bauvorlagenunterbaumwurzelknoten"
        ) {
          return true;
        }
        // Ansonsten befinden wir uns irgendwo im Baum, und müssen den zweitobersten Knoten im Pfad von oben extrahieren, sofern dieser existiert,
        // und feststellen, ob das der Wurzelknoten des Bauvorlagenunterbaums ist:
        const arrayOfIdsInPath = this.selectedNodeTreeBaueinheiten.path.split(
          "#"
        );
        console.log("arrayOfIdsInPath: ", arrayOfIdsInPath);
        if (arrayOfIdsInPath.length <= 2) {
          return false;
        } // Es handelt sich um einen Kindknoten von Baueinheiten (Wurzelknoten des Bauvorlagenunterbaums wurde oben schon ausgeschlossen)

        // Ansonsten handelt es sich um einen "tiefgelegenen" Kindknoten irgendwo im Baum (Bauvorhaben- oder Bauvorlagenteil)
        // Nun die id des zweitobersten Knotens im Pfad dieses Kindknotens hernehmen und für diese prüfen, ob dies die des Wurzelknotens des Bauvorlagenunterbaums ist
        // Dazu ausnutzen, dass ab dem Laden der zweiten Ebene des Bauvorlagenbaums in den Array nodesTreeBaueinheiten auch der Wurzelknoten
        // des Bauvorlagenunterbaums in das Frontend geladen ist - also kommt man ohn Backend Call aus - allerdings ist der Code dafür etwas tricky und abhängig
        // vom genauen Aufbau des Baums und den Bezeichnungen in baumKnotenTyp!

        // Der Bauvorlagenunterbaumwurzelknoten befindet sich in den children:[ {} ] des ersten Array-Elements (nodesTreeBaueinheiten[0].children) und hat u.a.
        // die Felder _id und baumKnotenTyp="Bauvorlagenunterbaumwwurzelknoten"
        // Die per filter im Unter-Array children gefundene _id des Bauvorlagenbaumwurzelknotens dann vergleichen mit der zweitobersten _id im Pfad (arrayOfIdsInPath[1])

        console.log(
          "Vor filter auf Suche nach Bauvorlagenunterbaumwurzelknoten!"
        );
        // console.log("nodesTreeBaueinheiten: ", this.nodesTreeBaueinheiten);
        console.log(
          "nodesTreeBaueinheiten[0].children: ",
          this.nodesTreeBaueinheiten[0].children
        );
        // ACHTUNG dabei: nodesTreeBaueinheiten ist ein Array aus verschachtelten Objekten UND auch children ist ein Array!
        const bauvorlagenunterbaumWurzelknoten = this.nodesTreeBaueinheiten[0].children.filter(
          element =>
            element.baumKnotenTyp === "Bauvorlagenunterbaumwurzelknoten"
        );
        // ACHTUNG: Resultat von filter ist wieder ein Array!!!
        if (
          bauvorlagenunterbaumWurzelknoten === null ||
          bauvorlagenunterbaumWurzelknoten.length > 2
        ) {
          console.log(
            "In selectedKeyTreeBaueinheitenIstImBauvorlagenunterbaum (computed) - Fehler beim Finden des Bauvorlagenunterbaumwurzelknotens per Filter im Bauvorlagenbaum!!!"
          );
          return false;
        }
        const idBauvorlagenunterbaumWurzelknoten =
          bauvorlagenunterbaumWurzelknoten[0]._id;
        console.log(
          "Nach filter - idBauvorlagenunterbaumWurzelknoten: ",
          idBauvorlagenunterbaumWurzelknoten
        );

        // Nun die id des potentiellen Bauvorlagenunterbaumwurzelknotens ermittteln, zum Vergleich mit der oben ermittelten _id des tatsächlichen:
        const idPotentiellerBauvorlagenunterbaumWurzelknoten =
          arrayOfIdsInPath[1]; // Dies ist die _id des zweitobersten Knotens im Pfad
        console.log(
          "idPotentiellerBauvorlagenunterbaumWurzelknoten: ",
          idPotentiellerBauvorlagenunterbaumWurzelknoten
        );

        // Nun vergleichen und Resultat zurückgeben:
        if (
          idPotentiellerBauvorlagenunterbaumWurzelknoten ===
          idBauvorlagenunterbaumWurzelknoten
        ) {
          return true;
        } else {
          return false;
        }
      } else {
        return false;
      } // Vue computed Funktion muss immer Wert zurückliefern!
    },

    benutzerDarfBearbeitenImBauvorlagenunterbaumSelectedNodeTreeBaueinheiten: function() {
      // Computed Property, um festzustellen, ob die im Bauvorhabenbaum ausgewählte Baueinheit im Bauvorlagenunterbaum liegt
      // Wenn ja, dürfen nur Administratoren und Redakteure diese bearbeiten
      // Dient zum Disabling der Buttons für Löschen oder Umbenennen
      // ACHTUNG: Analoge Funktion für Kontextmenü ist in methods:, da sie Parameter node braucht!

      // Stelle fest, ob die ausgewählte Baueinheit im Bauvorlagenunterbaum ist: Benutzt die obige Computed Property
      console.log(
        "In benutzerDarfBearbeitenImBauvorlagenunterbaumSelectedNodeTreeBaueinheiten()"
      );
      if (!this.benutzerRolleIstMitarbeiter) {
        return true; // Administratoren und Redakteure dürfen alles!
      }
      // Sonst weitermachen, Benutzer ist Mitarbeiter:
      if (!this.selectedKeyTreeBaueinheitenIstImBauvorlagenunterbaum) {
        return true; // Nicht im Bauvorlagenunterbaum, in diesem Fall return true
        // (andere Funktionen liefern dann ggf. false, abhängig von benutzerKennungenAutoren)
      } else {
        // Ausgewählter Knoten ist im Bauvorhabenunterbaum, Mitarbeiter dürfen dort nicht bearbeiten
        return false;
      }
    },

    benutzerRolleIstMitarbeiter: function() {
      console.log("In benutzerRolleIstMitarbeiter (computed)");
      // console.log("localStore.state.anmeldeDatenBenutzer.benutzerRolle: ", this.localStore.state.anmeldeDatenBenutzer.benutzerRolle);
      if (
        this.localStore.state.anmeldeDatenBenutzer.benutzerRolle ===
        "Mitarbeiter"
      ) {
        return true;
      } else {
        return false;
      }
    },

    benutzerIstAutorFuerAusgewaehlteBaueinheit: function() {
      //-----------------------------------------------------------------------------------------------------
      // Abgeleitet aus analoger Funktion in bauinformatione.vue
      // Benutzt Computed Property selectedNodeTreeBaueinheiten
      //-----------------------------------------------------------------------------------------------------
      console.log("In benutzerIstAutorFuerAusgewaehlteBaueinheit()");
      if (
        this.selectedNodeTreeBaueinheiten.benutzerKennungenAutoren.includes(
          this.localStore.state.anmeldeDatenBenutzer.eMailBenutzer
        )
      ) {
        return true; // Der eigentliche Sinn dieser Funktion!
      } else {
        return false;
      }
    },

    computeSchichtDicke: function() {
      var total = 0;
      this.schichtAufbau.forEach(e => {
        total = total + Number(e.dicke); // Unklar, warum hier Number() Konvertierung erforderlich ist - ansonsten wird hier String-Konkatenation gemacht!
        // Tipp kommt von https://stackoverflow.com/questions/39116903/vue-js-how-to-calculate-totals
      });
      return total;
    },

    //=================================================================================================================================
    // computed: Funktionen für Tab "Angaben zum Bauvorhaben"
    // Alle disabled - ersetzt durch Profilformular "Bauvorhaben" mit Vue-Komponente
    //---------------------------------------------------------------------------------------------------------------------------------
    /*
    computeOrtsBezeichnungBaueigenschaft: {
      // Testweise für v-model auf Baueigenschaft mit Baueigenschaftsbezeichnung "Ortsbezeichnung" am ausgewählten Knoten im Bauvorhabenbaum definiert:
      // Mit get und set Methoden - siehe https://codingexplained.com/coding/front-end/vue-js/adding-getters-setters-computed-properties

      // Wenn man dann im Template am q-input v-model="computeOrtsBezeichnungBaueigenschaft" angibt,
      // nimmt Vue den bezeichnungswert1 der betreffenden Baueigenschaft (z.B. "Winnenden", wenn so definiert), zeigt ihn per getter im q-input-Feld an,
      // UND ändert reaktiv diesen Wert bei Eingabe in das q-input-Feld durch den Benutzer per setter
      // Dies erfolgt bei jedem Keystroke, daher dem q-input debounce="1000" (ms) hinzugefügt!!!

      // Stattdessen dann Alternative implementiert - konsistent mit dem Verhalten des Tabs "Auswahl", das ebenfalls nicht reaktiv die ausgewählte
      // Baueigenschaft im Tab "Übersicht" ändert:
      // Beim Initialisieren des Tabs "Angaben zum Bauvorhaben" Kopien aller betroffenen Baueigenschaften in einem Array
      // bauvorhabenAusgewaehlteBaueinheit anlegen (ähnlich wie bei ausgewaehlteBaueigenschaft), im q-form dann auf dieser Kopie arbeiten,
      // beim Speichern die geänderten Werte für die betreffenden Baueigenschaften in der Datenbank speichern, danach
      // selectedRowTreeBaueinheiten.baueigenschaften mit den geänderten Werten aktualisieren. Beim Zurücksetzen die entsprechenden Werte wieder aus
      // der Datenbank holen und bauvorhabenAusgewaehlteBaueinheit damit resetten.
      get: function() {
        console.log(
          "In getter von computeOrtsBezeichnungBaueigenschaft (computed)"
        );
        const index = this.selectedNodeTreeBaueinheiten.baueigenschaften.findIndex(
          item =>
            item.typbezogeneBaueigenschaft.baueigenschaftsBezeichnung ===
            "Bezeichnung Ort"
        );
        console.log(
          "Index von Baueigenschaft mit Bezeichnung 'Ortsbezeichnung' im Array der Baueigenschaften am ausgewählten Knoten im Bauvorhabenbaum: ",
          index
        );
        console.log(
          "Bisheriger Wert von selectedNodeTreeBaueinheiten.baueigenschaften[index].bezeichnungsWert1: ",
          this.selectedNodeTreeBaueinheiten.baueigenschaften[index]
            .bezeichnungsWert1
        );
        return this.selectedNodeTreeBaueinheiten.baueigenschaften[index]
          .bezeichnungsWert1;
      },
      //------------------------------------------------------------------------------------
      set: function(newValue) {
        console.log(
          "in setter von computeOrtsBezeichnungBaueigenschaft (computed)"
        );
        const index = this.selectedNodeTreeBaueinheiten.baueigenschaften.findIndex(
          item =>
            item.typbezogeneBaueigenschaft.baueigenschaftsBezeichnung ===
            "Bezeichnung Ort"
        );
        console.log(
          "Index von Baueigenschaft mit Bezeichnung 'Ortsbezeichnung' im Array der Baueigenschaften am ausgewählten Knoten im Bauvorhabenbaum: ",
          index
        );
        // Reaktive Änderungen im Array können, müssen aber per Test nicht per $set erfolgen: Funktioniert!
        //
        // this.$set(
        //  this.selectedNodeTreeBaueinheiten.baueigenschaften[index],
        //  "bezeichnungsWert1",
        //  newValue
        // );

        this.selectedNodeTreeBaueinheiten.baueigenschaften[
          index
        ].bezeichnungsWert1 = newValue; // Neuen Wert zuweisen
        console.log(
          "Neuer Wert von selectedNodeTreeBaueinheiten.baueigenschaften[index].bezeichnungsWert1: ",
          this.selectedNodeTreeBaueinheiten.baueigenschaften[index]
            .bezeichnungsWert1
        );
      }
    },

    computeCheckAufKoordinatenBauvorhabenAusgewaehlteBaueinheit: function() {
      //------------------------------------------------------------------------------------------------------------------------------------
      // Disabled - ersetzt durch Profilformular "Bauvorhaben" mit Vue-Komponente
      // NEU für Buttons "Google Maps mit Koordinaten öffnen" und "OpenTopoMap mit Koordinaten öffnen":
      // Computed Property, die prüft, ob Koordinaten (d.h. Felder für geografische Länge und Breite) vorhanden sind.
      //------------------------------------------------------------------------------------------------------------------------------------
      return (
        this.bauvorhabenAusgewaehlteBaueinheit[16].werteFeldInhalt === null || // geografische Länge
        this.bauvorhabenAusgewaehlteBaueinheit[15].werteFeldInhalt === null // geografische Breite
      );
    },

    computeCheckAufPlusCodeBauvorhabenAusgewaehlteBaueinheit: function() {
      //------------------------------------------------------------------------------------------------------------------------------------
      // NEU für Button "Google Maps mit Plus Code öffnen":
      // Disabled - ersetzt durch Profilformular "Bauvorhaben" mit Vue-Komponente
      // Computed-Fuktion, die prüft, ob ein Plus Code vorhanden ist.
      //------------------------------------------------------------------------------------------------------------------------------------
      return (
        this.bauvorhabenAusgewaehlteBaueinheit[17].werteFeldInhalt === null
      ); // Plus Code
    },

    computeURLDlubalMitKoordinatenBauvorhabenAusgewaehlteBaueinheit: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zur Berechnung der URL von dlubal.com/de/schnee-wind-erdbeben-lastzonen mit Geolokation aus geografischer Länge und Breite
      //---------------------------------------------------------------------------------------------------------------------------------
      if (
        this.bauvorhabenAusgewaehlteBaueinheit[16].werteFeldInhalt === null || // geografische Länge
        this.bauvorhabenAusgewaehlteBaueinheit[15].werteFeldInhalt === null // geografische Breite
      ) {
        return;
      }
      console.log(
        "In computeURLDlubalMitKoordinatenBauvorhabenAusgewaehlteBaueinheit (computed)"
      );
      // Dlubal URL (Beispiel):
      // https://dlubal.com/de/schnee-wind-erdbeben-lastzonen/erdbeben-din-en-1998-1.html#&center=48.810126196698285,9.293619838536745&zoom=10&marker=52.520007,13.404953999999861
      let prefix =
        "https://www.dlubal.com/de/schnee-wind-erdbeben-lastzonen/schnee-din-en-1991-1-3.html?";
      let zoomLevel = "8";

      let longitude = this.bauvorhabenAusgewaehlteBaueinheit[16]
        .werteFeldInhalt; // geografische Länge
      let latitude = this.bauvorhabenAusgewaehlteBaueinheit[15].werteFeldInhalt; // geografische Breite
      let urlDlubalMitKoordinaten =
        prefix +
        "&center=" +
        latitude +
        "," +
        longitude +
        "&zoom=" +
        zoomLevel +
        "&marker=" +
        latitude +
        "," +
        longitude;
      return urlDlubalMitKoordinaten;
    },

    computeURLGoogleMapsMitKoordinatenBauvorhabenAusgewaehlteBaueinheit: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zur Berechnung der URL von Google Maps mit Geolokation aus geografischer Länge und Breite
      //---------------------------------------------------------------------------------------------------------------------------------
      if (
        this.bauvorhabenAusgewaehlteBaueinheit[16].werteFeldInhalt === null || // geografische Länge
        this.bauvorhabenAusgewaehlteBaueinheit[15].werteFeldInhalt === null // geografische Breite
      ) {
        return;
      }
      console.log(
        "In computeURLGoogleMapsMitKoordinatenBauvorhabenAusgewaehlteBaueinheit (computed)"
      );
      // Google Maps API parameters:
      // See https://stackoverflow.com/questions/32806084/google-map-zoom-parameter-in-url-not-working
      // See https://developers.google.com/maps/documentation/urls/guide - universal style without zoom level
      // See https://stackoverflow.com/a/41634648/11858583 - Android style with zoom level - zoom leve no longer working
      // See https://developers.google.com/maps/documentation/urls/ios-urlscheme - iOS style with zoom level

      // let universalPrefix = "https://www.google.de/maps/search/?api=1&query="; // for universal style, zoom level is ignored, marker does not show up as documented!
      // let universalZoomLevel = "map_action=map&zoom=5"; // for universal style, zoom level is ignored
      // let androidPrefix = "https://maps.google.de/maps/?q="; // for Android style WITH zoom level, without marker, zoom level does not work anymore
      // let androidZoomLevel = "z=18";

      let iOSPrefix = "https://www.google.de/maps/@"; // for iOS style WITH zoom level, without marker
      let iOSZoomLevel = "18z"; // for iOS style WITH zoom level

      let longitude = this.bauvorhabenAusgewaehlteBaueinheit[16]
        .werteFeldInhalt; // geografische Länge, for both styles
      let latitude = this.bauvorhabenAusgewaehlteBaueinheit[15].werteFeldInhalt; // geografische Breite, for both styles
      // let urlGoogleMapsmitKoordinaten = universalPrefix + latitude + "," + longitude +"&" + universalZoomLevel; // universal style without zoom Level
      // let urlGoogleMapsmitKoordinaten = androidPrefix + latitude + "," + longitude + "&" + androidZoomLevel; // Android style wit zoom Level - does not work
      let urlGoogleMapsMitKoordinaten =
        iOSPrefix + latitude + "," + longitude + "," + iOSZoomLevel; // iOS style with zoom level
      console.log("urlGoogleMapsMitKoordinaten: ");
      return urlGoogleMapsMitKoordinaten;
    },

    computeURLGoogleMapsMitPlusCodeBauvorhabenAusgewaehlteBaueinheit: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zur Berechnung der URL von Google Maps mit Plus Code
      //---------------------------------------------------------------------------------------------------------------------------------
      if (
        this.bauvorhabenAusgewaehlteBaueinheit[16].werteFeldInhalt === null || // geografische Länge
        this.bauvorhabenAusgewaehlteBaueinheit[15].werteFeldInhalt === null // geografische Breite
      ) {
        return;
      }
      console.log(
        "In computeURLGoogleMapsMitPlusCodeBauvorhabenAusgewaehlteBaueinheit (computed)"
      );
      // Google Maps Parameters - see https://stackoverflow.com/questions/32806084/google-map-zoom-parameter-in-url-not-working
      // See https://developers.google.com/maps/documentation/urls/guide
      // See https://www.focus.de/digital/praxistipps/geheime-funktion-in-google-maps-kryptische-zeichenfolge-ist-ueberraschend-nuetzlich_id_9731644.html
      let prefix = "https://plus.codes/"; // Spezielle Google Site für Plus Codes!!!
      let plusCode = this.bauvorhabenAusgewaehlteBaueinheit[17].werteFeldInhalt; // Plus Code
      let urlGoogleMapsMitPlusCode = prefix + plusCode;
      console.log("urlGoogleMapsMitPlusCode: ");
      return urlGoogleMapsMitPlusCode;
    },

    computeURLOpenTopoMapMitKoordinatenBauvorhabenAusgewaehlteBaueinheit: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zur Berechnung der URL von OpenTopoMap mit Koordinaten
      //---------------------------------------------------------------------------------------------------------------------------------
      if (
        this.bauvorhabenAusgewaehlteBaueinheit[16].werteFeldInhalt === null || // geografische Länge
        this.bauvorhabenAusgewaehlteBaueinheit[15].werteFeldInhalt === null // geografische Breite
      ) {
        return;
      }
      console.log(
        "In computeURLOpenTopoMapmitKoordinatenBauvorhabenAusgewaehlteBaueinheit (computed)"
      );
      // OpenTopoMap URL Beispiel: https://opentopomap.org/#map=15/46.3299/8.4100 - #map=15 ist Zoom-Level
      let prefix = "https://opentopomap.org/#map=";
      let zoomLevel = "17"; // maximaler Zoomlevel
      let longitude = this.bauvorhabenAusgewaehlteBaueinheit[16]
        .werteFeldInhalt; // geografische Länge
      let latitude = this.bauvorhabenAusgewaehlteBaueinheit[15].werteFeldInhalt; // geografische Breite
      let urlOpenTopoMapMitKoordinaten =
        prefix + zoomLevel + "/" + latitude + "/" + longitude;
      console.log("urlGoogleMapMitKoordinaten: ");
      return urlOpenTopoMapMitKoordinaten;
    },

    wurzelKnotenBauvorhabenBaum: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property - ermittelt, ob der Wurzelknoten des Bauvorhabenbaums ausgewählt wurde und liefert falls ja, true zurück
      //-------------------------------------------------------------------------------------------------------------------------------
      console.log("In wurzelKnotenBauvorhabenBaum (computed)");
      if (this.selectedNodeTreeBaueinheiten === undefined) {
        return true;
      }
      if (this.selectedNodeTreeBaueinheiten === null) {
        return true;
      }
      if (this.selectedNodeTreeBaueinheiten.baumKnotenTyp === "Wurzelknoten") {
        return true;
      }
      return false;
    },

    alleBaueigenschaftenSindAktiviertBauvorhabenAusgewaehlteBaueinheit: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property - ermittelt, ob alle Felder im Array bauvorhabenAusgewaehlteBaueinheit aktiviert sind und gibt, falls ja,
      // true zurück
      //-------------------------------------------------------------------------------------------------------------------------------
      console.log(
        "In alleBaueigenschaftenSindAktiviertBauvorhabenAusgewaehlteBaueinheit (computed)"
      );
      var index; // im Array der Baueigenschaften an der ausgewählten Baueinheit im Bauvorhabenbaum

      function findeBaueigenschaft(
        selectedNodeTreeBaueinheiten,
        gesuchteBaueigenschaftsBezeichnung
      ) {
        //------------------------------------------------------------------------------------------------------------------------------------------
        // Hilfsfunktion
        // Bestimmt mittels findIndex den Index der Baueigenschaft mit der Bezeichnung gesuchteBaueigenschaftsBezeichnung (zweiter Parameter)
        // im Array der Baueigenschaften an der ausgewählten Baueinheit im Bauvorhabenbaum (erster Parameter)
        // ACHTUNG: Auf this.selectedNodeTreeBaueinheiten konnte wegen undefined Fehler im Log aus der Funktion nicht direkt zugegriffen werden -
        // deshalb wurde der erste Parameter eingeführt, der es als Referenz an die Funktion gibt!
        //------------------------------------------------------------------------------------------------------------------------------------------
        // console.log("in findeBaueigenschaft(selectedNodeTreeBaueinheiten, gesuchteBaueigenschaftsBezeichnung)");
        // console.log("Parameter selectedNodeTreeBaueinheiten: ", selectedNodeTreeBaueinheiten);
        // console.log("Parameter gesuchteBaueigenschaftsBezeichnung: ", gesuchteBaueigenschaftsBezeichnung);

        const index2 = selectedNodeTreeBaueinheiten.baueigenschaften.findIndex(
          item =>
            item.typbezogeneBaueigenschaft.baueigenschaftsBezeichnung ===
            gesuchteBaueigenschaftsBezeichnung
        );
        // console.log("index2: ", index2);
        return index2;
      }
      //----------------------------------------------------------------------------------------------------------------------------------------
      // Den Array bauvorhabenAusgewaehlteBaueinheit in data() traversieren
      // und für jedes Objekt darin bestimmen, ob die entsprechende Baueigenschaft aktiviert ist in selectedNodeTreeBaueinheiten.baueigenschaften[index]
      //----------------------------------------------------------------------------------------------------------------------------------------
      for (var i = 0; i < this.bauvorhabenAusgewaehlteBaueinheit.length; i++) {
        // Zuerst den passenden index für die Baueigenschaft mit der
        // in bauvorhabenAusgewaehlteBaueinheit[i].baueigenschaftsBezeichnung finden
        // im Array der Baueigenschaften an der ausgewählten Baueinheit:
        index = findeBaueigenschaft(
          this.selectedNodeTreeBaueinheiten,
          this.bauvorhabenAusgewaehlteBaueinheit[i].baueigenschaftsBezeichnung
        );
        if (index < 0) {
          console.log(
            "Fehler: Keine passende Baueigenschaft im Array der Baueigenschaften an der ausgewählten Baueinheit im Bauvorhabenbaum gefunden"
          );
          console.log(
            "Vom Fehler betroffene baueigenschaftsBezeichnung: ",
            this.bauvorhabenAusgewaehlteBaueinheit[i].baueigenschaftsBezeichnung
          );
          return false; // In diesem Fall stimmt etwas in den Daten nicht, sicherheitshalber false zurückgeben
        }
        // index ist hier nun 0 oder größer, damit ist Zugriff auf Felder wie this.selectedNodeTreeBaueinheiten.baueigenschaften[index]._id (Beispiel) möglich
        if (
          !this.selectedNodeTreeBaueinheiten.baueigenschaften[index]
            .aktiviertNichtDeaktiviert
        ) {
          // Baueigenschaft ist deaktiviert
          console.log(
            "Achtung: Mindestens eine Baueigenschaft im Bauvorhaben an der ausgewählten Baueinheit ist deaktiviert"
          );
          console.log(
            "baueigenschaftsBezeichnung der deaktivierten Baueigenschaft im Bauvorhaben: ",
            this.selectedNodeTreeBaueinheiten.baueigenschaften[index]
              .typbezogeneBaueigenschaft.baueigenschaftsBezeichnung
          );
          return false; //
        }
      }
      // Schleife erfolgreich durchlaufen ohne return - d.h. alle betroffenen Baueigenschaften sind aktiviert
      return true;
    },
    */
    // /computed: Funktionen für Tab "Angaben zum Bauvorhaben"
    //=================================================================================================================================

    computeUploadURL: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property - returned URL für File Upload
      //-------------------------------------------------------------------------------------------------------------------------------
      const port = process.env.PORT || 4444;
      console.log("In computeUploadURL (computed)");
      console.log(
        "computeUploadURL: ",
        process.env.fileAPI /* + ":" + port */ + "/Dateien/upload"
      );
      return process.env.fileAPI /* + ":" + port */ + "/Dateien/upload";
    },

    istDefiniertAusgewaehlteBaueigenschaft: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property - ermittelt, ob in den Input-Feldern Eingabewerte stehen und gibt in diesem Fall true zurück
      //-------------------------------------------------------------------------------------------------------------------------------
      let result;
      switch (
        this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
      ) {
        case "Kennwert":
          if (
            (this.ausgewaehlteBaueigenschaft.kennWert1 === null ||
              this.ausgewaehlteBaueigenschaft.kennWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Kennwertepaar":
          if (
            (this.ausgewaehlteBaueigenschaft.kennWert1 === null ||
              this.ausgewaehlteBaueigenschaft.kennWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.kennWert2 === null ||
              this.ausgewaehlteBaueigenschaft.kennWert2 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Datumswert":
          if (
            (this.ausgewaehlteBaueigenschaft.datumsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.datumsWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Datumswertepaar":
          if (
            (this.ausgewaehlteBaueigenschaft.datumsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.datumsWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.datumsWert2 === null ||
              this.ausgewaehlteBaueigenschaft.datumsWert2 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Tageszeitwert": // NEU
          if (
            (this.ausgewaehlteBaueigenschaft.tagesZeitWert1 === null ||
              this.ausgewaehlteBaueigenschaft.tagesZeitWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Tageszeitwertepaar":
          if (
            (this.ausgewaehlteBaueigenschaft.tagesZeitWert1 === null ||
              this.ausgewaehlteBaueigenschaft.tagesZeitWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.tagesZeitWert2 === null ||
              this.ausgewaehlteBaueigenschaft.tagesZeitWert2 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Bezeichnungswert":
          if (
            this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
            this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === ""
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Bezeichnungswertepaar":
          if (
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Aufzählungswert":
          // console.log("Aufzählungswert");
          if (
            (this.ausgewaehlteBaueigenschaft.aufzaehlungsWert === null ||
              this.ausgewaehlteBaueigenschaft.aufzaehlungsWert === "" ||
              this.ausgewaehlteBaueigenschaft.aufzaehlungsWert.length === 0) && // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Wahrheitswert":
          // ALT: Der Fall, dass der Wahrheitswert leer ist, konnte bisher nicht erkannt werden
          // NEU: Mit der neuesten Quasar Version 1.8+ kann der Toggle bei Boolean auch Zustand "indeterminate", wenn das zugehörige v-model null ist!!!
          console.log("Wahrheitswert");
          if (
            this.ausgewaehlteBaueigenschaft.wahrheitsWert === null && // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            (this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === null ||
              this.ausgewaehlteBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
      }
      return result;
    },

    disabledFieldsAusgewaehlteBaueigenschaft: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property
      // Returned Array aus Wertefeldname/Boolean-Paaren, wobei der Boolean-Wert "true" ist, wenn das Feld disabled ist
      //-------------------------------------------------------------------------------------------------------------------------------
      console.log("In disabledFieldsAusgewaehlteBaueigenschaft (computed)");
      if (!this.ausgewaehlteBaueigenschaft.aktiviertNichtDeaktiviert) {
        return {
          kennWert1: true,
          kennWert2: true,
          datumsWert1: true,
          datumsWert2: true,
          tagesZeitWert1: true,
          tagesZeitWert2: true,
          bezeichnungsWert1: true,
          bezeichnungsWert2: true,
          aufzaehlungsWert: true,
          wahrheitsWert: true,
          symbol: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          einheit: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          operator: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          // NEU:
          formel: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          // NEU:
          sonderzeichen: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          )
        };
      } else {
        return {
          kennWert1: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          kennWert2: !["Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          datumsWert1: !["Datumswert", "Datumswertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          datumsWert2: !["Datumswertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          // Fix für Defect - Tageszeitwert1/2 war nie disabled!!!
          // FALSCH:
          // tagesZeitWert1: false,
          // tagesZeitWert2: false,
          // NEU/RICHTIG:
          tagesZeitWert1: !["Tageszeitwert", "Tageszeitwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          tagesZeitWert2: !["Tageszeitwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),

          // Fix für Defect - Bezeichnungswert1 war disabled!!!
          bezeichnungsWert1: ![
            "Kennwert",
            "Kennwertepaar",
            "Datumswert",
            "Datumswertepaar",
            "Aufzählungswert",
            "Wahrheitswert",
            "Bezeichnungswert", // NEU: FIX
            "Bezeichnungswertepaar" // NEU: FIX
          ].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),

          // Fix für Defect - Bezeichnungswert2 war disabled!!!
          bezeichnungsWert2: ![
            "Kennwertepaar",
            "Datumswertepaar",
            "Bezeichnungswertepaar" // NEU
          ].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          aufzaehlungsWert: !["Aufzählungswert"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          wahrheitsWert: !["Wahrheitswert"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          symbol: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          einheit: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          operator: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          ),
          // NEU:
          formel: !["Kennwert", "Kennwertepaar"].includes(
            this.ausgewaehlteBaueigenschaft.typbezogeneBaueigenschaft.werteTyp
          )
        };
      }
    },

    stringifyZugeordneteBaustoffe: function() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Macht Pretty Printing für Debug-Ausgabe
      //----------------------------------------------------------------------------------------------------------------------------
      if (
        globalStore.state.debugMode &&
        this.selectedNodeTreeBaueinheiten != null
      ) {
        return JSON.stringify(
          this.selectedNodeTreeBaueinheiten.zugeordneteBaustoffe,
          null,
          2
        );
      } else {
        return null;
      }
    },

    stringifyNodesTreeBaustoffe: function() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Macht Pretty Printing für Debug-Ausgabe
      //----------------------------------------------------------------------------------------------------------------------------
      if (globalStore.state.debugMode && this.nodesTreeBaustoffe != null) {
        return JSON.stringify(this.nodesTreeBaustoffe, null, 2);
      } else {
        return null;
      }
    },

    stringifySelectedNodeTreeBaueinheiten: function() {
      //----------------------------------------------------------------------------------------------------------------------------
      // Macht Pretty Printing für Debug-Ausgabe
      //----------------------------------------------------------------------------------------------------------------------------
      if (
        globalStore.state.debugMode &&
        this.selectedNodeTreeBaueinheiten != null
      ) {
        return JSON.stringify(this.selectedNodeTreeBaueinheiten, null, 2);
      } else {
        return null;
      }
    },

    /*
    selectedKeyTreeBaustoffeIstImRohstoffunterbaum: function() {
      //----------------------------------------------------------------------------------------------------------------------------
      // computed Property - berechnet, ob der ausgewählte Baustoff im Rohstoffunterbaum ist
      // ACHTUNG: Nur relevant für Baustoffe, nicht für Baueinheiten - daher disabled!
      // HINWEIS: Diese Funktion ist nur relevant in baustoffe.vue, wo zugeordnete Rohstoffe für solche Baustoffe verwaltet werden, die nicht
      // zum Rohstoffunterbaum selbst gehören
      // In baueinheiten.vue kann JEDE Baueinheit Verweise auf zugeordnete Baustoffe (ohne Rohstoffe) haben
      // eslint-disable-next-line vue/return-in-computed-property
      //----------------------------------------------------------------------------------------------------------------------------
      console.log("In selectedKeyTreeBaustoffeIstImRohstoffunterbaum (computed)");

      if (
        this.selectedKeyTreeBaustoffe !== undefined &&
        this.selectedKeyTreeBaustoffe !== null
      ) {
        if (this.selectedNodeTreeBaustoffe.baumKnotenTyp === "Wurzelknoten") {
          return false;
        }
        if (
          this.selectedNodeTreeBaustoffe.baumKnotenTyp ===
          "Rohstoffunterbaumwurzelknoten"
        ) {
          return true;
        }
        // Ansonsten befinden wir uns irgendwo im Baum, und müssen den zweitobersten Knoten im Pfad von oben extrahieren, sofern dieser existiert,
        // und feststellen, ob das der Wurzelknoten des Rohstoffunterbaums ist:
        const arrayOfIdsInPath = this.selectedNodeTreeBaustoffe.path.split("#");
        console.log("arrayOfIdsInPath: ", arrayOfIdsInPath);
        if (arrayOfIdsInPath.length <= 2) {
          return false;
        } // Es handelt sich um einen Kindknoten von Baueinheiten (Wurzelknoten des Rohstoffunterbaums wurde oben schon ausgeschlossen

        // Ansonsten handelt es sich um einen "tiefgelegenen" Kindknoten irgendwo im Baum (Baustoff- oder Rohstoffteil)
        // Nun die id des zweitobersten Knotens im Pfad dieses Kindknotens hernehmen und für diese prüfen, ob dies die des Wurzelknotens des Rohstoffunterbaums ist
        // Dazu ausnutzen, dass ab dem Laden der zweiten Ebene des Bauvorhabenbaums in den Array nodesTreeBaustoffe auch der Wurzelknoten
        // des Rohstoffunterbaums in das Frontend geladen ist - also kommt man ohn Backend Call aus - allerdings ist der Code dafür etwas tricky und abhängig
        // vom genauen Aufbau des Baums und den Bezeichnungen in baumKnotenTyp!

        // Der Rohstoffunterbaumwurzelknoten befindet sich in den children:[ {} ] des ersten Array-Elements (nodesTreeBaustoffe[0].children) und hat u.a.
        // die Felder _id und baumKnotenTyp="Rohstoffunterbaumwwurzelknoten"
        // Die per filter im Unter-Array children gefundene _id des Bauvorhabenbaumwurzelknotens dann vergleichen mit der zweitobersten _id im Pfad (arrayOfIdsInPath[1])

        console.log("Vor filter auf Suche nach Rohstoffunterbaumwurzelknoten!");
        // console.log("nodesTreeBaustoffe: ", this.nodesTreeBaustoffe);
        console.log(
          "nodesTreeBaustoffe[0].children: ",
          this.nodesTreeBaustoffe[0].children
        );
        // ACHTUNG dabei: nodesTreeBaustoffe ist ein Array aus verschachtelten Objekten UND auch children ist ein Array!
        const rohstoffunterbaumWurzelknoten = this.nodesTreeBaustoffe[0].children.filter(
          element => element.baumKnotenTyp === "Rohstoffunterbaumwurzelknoten"
        );
        // ACHTUNG: Resultat von filter ist wieder ein Array!!!
        if (
          rohstoffunterbaumWurzelknoten === null ||
          rohstoffunterbaumWurzelknoten.length > 2
        ) {
          console.log(
            "In selectedKeyTreeBaustoffeIstImRohstoffunterbaum (computed) - Fehler beim Finden des Rohstoffunterbaumwurzelknotens per Filter im Bauvorhabenbaum!!!"
          );
          return false;
        }
        const idRohstoffunterbaumWurzelknoten =
          rohstoffunterbaumWurzelknoten[0]._id;
        console.log(
          "Nach filter - idRohstoffunterbaumWurzelknoten: ",
          idRohstoffunterbaumWurzelknoten
        );

        // Nun die id des potentiellen Rohstoffunterbaumwurzelknotens ermittteln, zum Vergleich mit der oben ermittelten _id des tatsächlichen:
        const idPotentiellerRohstoffunterbaumWurzelknoten = arrayOfIdsInPath[1]; // Dies ist die _id des zweitobersten Knotens im Pfad
        console.log(
          "idPotentiellerRohstoffunterbaumWurzelknoten: ",
          idPotentiellerRohstoffunterbaumWurzelknoten
        );

        // Nun vergleichen und Resultat zurückgeben:
        if (
          idPotentiellerRohstoffunterbaumWurzelknoten ===
          idRohstoffunterbaumWurzelknoten
        ) {
          return true;
        } else {
          return false;
        }
      } else {
        return false;
      } // Vue computed Funktion muss immer Wert zurückliefern!
    },
    */

    selectedNodeTreeBaueinheiten: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property - liefert den aktuell im Bauvorhabenbaum elektierten Knoten (node) zurück
      // ACHTUNG: War temporär nach data() verschoben wegen Timing-Problem - führte jedoch zu massiven anderen Problemen, daher wieder computed
      //-------------------------------------------------------------------------------------------------------------------------------
      /*
      console.log("In selectedNodeTreeBaueinheiten (computed)");
        console.log(
          "selectedKeyTreeBaueinheiten: ",
          this.selectedKeyTreeBaueinheiten
      );
      */
      // Workaround für Problem, wenn obiges Console Logging per uglifyOptions oder durch Auskommentierung entfällt -
      // es tritt dann ein Timing-Problem auf, dass offenbar die undefined-Abfrage unten noch true ist und daher die computed
      // Funktion undefined zurückliefert - dann rendered das ganze Template rechts vom QSplitter NICHT mehr!!!
      // Asynchrones sleep ist in computed nicht erlaubt, daher eigene Schleife für Verzögerung:
      /*
      let j=0;
        for (let i=0; i<100000; i++) {
        j = j+1;
      };
      */
      // Dies funktioniert jedoch NICHT - stattdessen unten Pseudozugriff per helper auf this.selectedKeyTreeBaueinheiten - beeinflusst vermutlich
      // das Timing und die Reihenfolge der Initialisierungen dieser Variablen/computed Funktionen - funktionierte, aber fragil
      // Obige console.logs sicherheitshalber disabled, werden nicht unbedingt benötigt
      let helper = this.selectedKeyTreeBaueinheiten; // WICHTIG: Für Zeitverögerung!!!
      if (this.$refs.treeBaueinheiten !== undefined) {
        try {
          return this.$refs.treeBaueinheiten.getNodeByKey(
            this.selectedKeyTreeBaueinheiten
          );
        } catch {
          return null;
        }
      } else {
        return undefined;
      }
    },

    nothingSelectedInTableBaueigenschaften: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property - liefert 'true', wenn keine Baueigenschaft in q-table ausgewählt ist,
      // regelt das Disablen von Buttons für "Auswahl"-Tab
      //-------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBaueigenschaften.length > 0) {
        return false;
      } else {
        return true;
      }
    },

    //---------------------------------------------------------------------------------------------------------------------------------
    // Computed Properties für q-table für zugeordnete Bauinformationen:
    //---------------------------------------------------------------------------------------------------------------------------------
    computeExternerLinkTableBauinformationen: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zum Disablen des Buttons für externen Link im Tab "Zugeordnete Bauinformationen"
      //---------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        return true;
      }
      if (
        this.selectedRowsTableBauinformationen[0].externerLink === undefined ||
        this.selectedRowsTableBauinformationen[0].externerLink === null
      ) {
        return true;
      }
      return false;
    },

    computeOneDriveLinkTableBauinformationen: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zum Disablen des Buttons für OneDrive-Link im Tab "Zugeordnete Bauinformationen"
      //---------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        return true;
      }
      if (
        this.selectedRowsTableBauinformationen[0].oneDriveLink === undefined ||
        this.selectedRowsTableBauinformationen[0].oneDriveLink === null
      ) {
        return true;
      }
      return false;
    },

    computeInternerLinkTableBauinformationen: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zum Disablen des Buttons für internen Link im Tab "Zugeordnete Bauinformationen"
      //---------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        return true;
      }
      if (
        this.selectedRowsTableBauinformationen[0].internerLink === undefined ||
        this.selectedRowsTableBauinformationen[0].internerLink === null
      ) {
        return true;
      }
      return false;
    },

    computeSelectedRowsTableBauinformationen: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zum Disablen der Buttons unter der QTable, wenn keine Bauinformation ausgewählt ist
      //---------------------------------------------------------------------------------------------------------------------------------
      return this.selectedRowsTableBauinformationen.length === 0; // return "true", falls nichts ausgewählt ist
    },

    getSelectedExternerLinkTableBauinformationen: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zur Berechnung des externen Links in der ausgewählten Bauinformation in der Tabelle im Tab "Übersicht"
      //---------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        return;
      }
      if (this.selectedRowsTableBauinformationen[0].externerLink == null) {
        return;
      }
      return this.selectedRowsTableBauinformationen[0].externerLink; // URL-Feld im 1. Eintrag in den selektierten Rows
    },

    getSelectedOneDriveLinkTableBauinformationen: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zur Berechnung des OneDrive-Links in der ausgewählten Bauinformation in der Tabelle im Tab "Übersicht"
      //---------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        return;
      }
      if (this.selectedRowsTableBauinformationen[0].oneDriveLink == null) {
        return;
      }
      return this.selectedRowsTableBauinformationen[0].oneDriveLink; // URL-Feld im 1. Eintrag in den selektierten Rows
    },

    getSelectedInternerLinkTableBauinformationen: function() {
      //---------------------------------------------------------------------------------------------------------------------------------
      // Computed Property zur Berechnung des internen Links in der ausgewählten Bauinformation in der Tabelle im Tab "Übersicht"
      //---------------------------------------------------------------------------------------------------------------------------------
      if (this.selectedRowsTableBauinformationen.length === 0) {
        return;
      }
      if (this.selectedRowsTableBauinformationen[0].internerLink == null) {
        return;
      }
      console.log(
        "In getSelectedInternerLinkTableBauinformationen (computed) - selectedRowsTableBauinformationen[0].internerLink: ",
        this.selectedRowsTableBauinformationen[0].internerLink
      );
      return (
        // Hier gemäß https://stackoverflow.com/questions/35744597/how-to-link-pages-in-node testen:
        // a) href mit Link auf Heroku Route, die File aus dem tmp Directory per sendfile an den Browser schickt
        // b) href mit Link auf die File im tmp Directory auf Heroku und express.static für das tmp Directory

        // a) FUNKTIONIERT per Test!
        // "https://bimclickserver.herokuapp.com/sendfile" // ACHTUNG: https:// ist notwendig, sonst prefixed href es mit einer lokalen URL!!!

        // b) FUNKTIONERT per Test!
        // "https://bimclickserver.herokuapp.com/parkplatz.gif" // ACHTUNG: https:// ist notwendig, sonst prefixed href es mit einer lokalen URL!!!

        // Bisheriger Code für den lokalen Fall - temporär wieder enabled
        // SEHR ALT: "http://localhost:4200/" +
        // ACHTUNG: Ohne Origin "http://" öffnet sich zwar das Browser-Tab mit der URL, aber das PDF wird erst bei Refresh geladen!!!
        // ALT: process.env.ownURL +
        // NEU:
        process.env.fileAPI +
        "/" +
        // ACHTUNG: Ohne Origin "http://" öffnet sich zwar das Browser-Tab mit der URL, aber das PDF wird erst bei Refresh geladen!!!
        this.selectedRowsTableBauinformationen[0].internerLink
      ); // URL-Feld im 1. Eintrag in den selektierten Rows
    },

    istDefiniertNeueBaueigenschaft: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property - schaut, ob in den Input-Feldern Eingabewerte stehen und gibt in diesem Fall true zurück
      //-------------------------------------------------------------------------------------------------------------------------------
      let result;
      switch (this.neueBaueigenschaft.typbezogeneBaueigenschaft.werteTyp) {
        case "Kennwert":
          if (
            (this.neueBaueigenschaft.kennWert1 === null ||
              this.neueBaueigenschaft.kennWert1 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Kennwertepaar":
          if (
            (this.neueBaueigenschaft.kennWert1 === null ||
              this.neueBaueigenschaft.kennWert1 === "") &&
            (this.neueBaueigenschaft.kennWert2 === null ||
              this.neueBaueigenschaft.kennWert2 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert2 === null ||
              this.neueBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Datumswert":
          if (
            (this.neueBaueigenschaft.datumsWert1 === null ||
              this.neueBaueigenschaft.datumsWert1 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Datumswertepaar":
          if (
            (this.neueBaueigenschaft.datumsWert1 === null ||
              this.neueBaueigenschaft.datumsWert1 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.neueBaueigenschaft.datumsWert2 === null ||
              this.neueBaueigenschaft.datumsWert2 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert2 === null ||
              this.neueBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Tageszeitwert": // NEU
          if (
            (this.neueBaueigenschaft.tagesZeitWert1 === null ||
              this.neueBaueigenschaft.tagesZeitWert1 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Tageszeitwertepaar":
          if (
            (this.neueBaueigenschaft.tagesZeitWert1 === null ||
              this.neueBaueigenschaft.tagesZeitWert1 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.neueBaueigenschaft.tagesZeitWert2 === null ||
              this.neueBaueigenschaft.tagesZeitWert2 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert2 === null ||
              this.neueBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Bezeichnungswert":
          if (
            this.neueBaueigenschaft.bezeichnungsWert1 === null ||
            this.neueBaueigenschaft.bezeichnungsWert1 === ""
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Bezeichnungswertepaar":
          if (
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "") &&
            (this.neueBaueigenschaft.bezeichnungsWert2 === null ||
              this.neueBaueigenschaft.bezeichnungsWert2 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Aufzählungswert":
          // console.log("Aufzählungswert");
          if (
            (this.neueBaueigenschaft.aufzaehlungsWert === null ||
              this.neueBaueigenschaft.aufzaehlungsWert === "" ||
              this.neueBaueigenschaft.aufzaehlungsWert.length === 0) && // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
        case "Wahrheitswert":
          // ALT: Der Fall, dass der Wahrheitswert leer ist, konnte bisher nicht erkannt werden
          // NEU: Mit der neuesten Quasar Version 1.8+ kann der Toggle bei Boolean auch Zustand "indeterminate", wenn das zugehörige v-model null ist!!!
          // console.log("Wahrheitswert");
          if (
            this.neueBaueigenschaft.wahrheitsWert === null && // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            (this.neueBaueigenschaft.bezeichnungsWert1 === null ||
              this.neueBaueigenschaft.bezeichnungsWert1 === "")
          ) {
            result = false;
          } else {
            result = true;
          }
          break;
      }
      return result;
    },

    disabledFieldsNeueBaueigenschaft: function() {
      //-------------------------------------------------------------------------------------------------------------------------------
      // Computed Property für Disabling der Wertefelder im Tab Baueigenschaften/Neu
      //-------------------------------------------------------------------------------------------------------------------------------
      console.log("In disabledFieldsNeueBaueigenschaft (computed)");
      let result = {};
      result.kennWert1 = true;
      result.kennWert2 = true;
      result.datumsWert1 = true;
      result.datumsWert2 = true;
      result.tagesZeitWert1 = true; // NEU
      result.tagesZeitWert2 = true; // NEU
      result.bezeichnungsWert1 = true;
      result.bezeichnungsWert2 = true;
      result.aufzaehlungsWert = true;
      result.wahrheitsWert = true;
      // Fix für Backlog Item #117: Folgende 4 Felder plus das QSelect für Sonderzeichen sind typbezogene Felder - hier NICHT disablen! Daher unten auskommentert.
      // Sollten auch ohne Aktivierung editierbar sein, allerdings nur bei Wertetyp "Kennwert" oder "Kennwertepaar"
      /*
      result.symbol = true;
      result.einheit = true;
      result.operator = true;
      result.formel = true; // NEU
      result.sonderzeichen = true; // NEU
      */
      if (this.neueBaueigenschaft.aktiviertNichtDeaktiviert) {
        // Aktivierung
        if (!this.suppressNotificationNeuTabBaueigenschaften) {
          globalStore.showBenutzerNachricht(
            BenutzerNachrichten.AKTIVIERUNG_AUSGELOEST_WERTEEINGABE_MOEGLICH
          );
        }
        var arg = this.neueBaueigenschaft.typbezogeneBaueigenschaft.werteTyp;
        // Enable nur zum werteTyp passende Felder:
        switch (arg) {
          case "Kennwert":
            result.kennWert1 = false;
            result.bezeichnungsWert1 = false;
            result.symbol = false;
            result.einheit = false;
            result.operator = false;
            result.formel = false; // NEU
            result.sonderzeichen = false; // NEU
            break;
          case "Kennwertepaar":
            result.kennWert1 = false;
            result.kennWert2 = false;
            result.bezeichnungsWert1 = false;
            result.bezeichnungsWert2 = false;
            result.symbol = false;
            result.einheit = false;
            result.operator = false;
            result.formel = false; // NEU
            result.sonderzeichen = false; // NEU
            break;
          case "Datumswert":
            result.datumsWert1 = false;
            result.bezeichnungsWert1 = false;
            break;
          case "Datumswertepaar":
            result.datumsWert1 = false;
            result.datumsWert2 = false;
            result.bezeichnungsWert1 = false;
            result.bezeichnungsWert2 = false;
            break;
          case "Tageszeitwert":
            result.tagesZeitWert1 = false;
            result.bezeichnungsWert1 = false;
            break;
          case "Tageszeitwertepaar":
            result.tagesZeitWert1 = false;
            result.tagesZeitWert2 = false;
            result.bezeichnungsWert1 = false;
            result.bezeichnungsWert2 = false;
            break;
          case "Bezeichnungswert":
            result.bezeichnungsWert1 = false;
            break;
          case "Bezeichnungswertepaar":
            result.bezeichnungsWert1 = false;
            result.bezeichnungsWert2 = false;
            break;
          case "Aufzählungswert":
            result.bezeichnungsWert1 = false; // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            result.aufzaehlungsWert = false;
            break;
          case "Wahrheitswert":
            // NEU: Auch Bezeichnungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            result.bezeichnungsWert1 = false; // NEU: TODO #222 - auch Aufzählungs- und Wahrheitswerte haben Feld bezeichnungsWert1 zusätzlich enabled!
            result.wahrheitsWert = false;
            break;
        }
      } else {
        // Deaktivierung =>
        if (
          this.neueBaueigenschaft.typbezogeneBaueigenschaft.werteTyp ===
          "Aufzählungswert"
        ) {
          result.aufzaehlungsWert = false;
        }
      }
      return result;
    }
  }, // /computed:

  //***==============================================================================================================================================
  watch: {
    //-----------------------------------------------------------------------------------------------------------------------------------------------
    tabBaueinheiten: async function(value) {
      //------------------------------------------------------------------------------------------------------------------------------------------------
      // NEU: Für 505
      // Watch-Funktion auf tabBaueinheiten (reagiert auf Tab-Wechsel)
      // value ist der neue Wert
      // Bestimmt das richtige Unter-Tab in Abhängigkeit vom ausgewählten Node im Bauvorhabenbaum
      //------------------------------------------------------------------------------------------------------------------------------------------------
      console.log("In watch für tabBaueinheiten(value) - value: ", value);
      if (value === "baueigenschaftsProfilFormulareTabBaueinheiten") {
        this.tabBaueigenschaftsProfilFormulare = this.getTabVonHierarchischOberstemProfilFormularInAktiviertenBaueigenschaftsProfilen(
          this.selectedNodeTreeBaueinheiten
        );
      }
    },

    //-----------------------------------------------------------------------------------------------------------------------------------------------
    selectedKeyTreeBaueinheiten: async function(value) {
      //------------------------------------------------------------------------------------------------------------------------------------------------
      // Watch-Funktion, für Aktionen, wenn sich selectedKeyTreeBaueinheiten ändert
      // value ist neuer Wert, siehe https://vuejs.org/guide/essentials/watchers.html
      //------------------------------------------------------------------------------------------------------------------------------------------------
      this.ausgewaehlteBaueigenschaft = null;
      this.tabBaueigenschaften = "uebersichtTabBaueigenschaften";
      console.log(
        "In watch für selectedKeyTreeBaueinheiten(value) - value: ",
        value
      );
      console.log(
        "selectedKeyTreeBaueinheiten: ",
        this.selectedKeyTreeBaueinheiten
      );

      if (this.selectedKeyTreeBaueinheiten != null) {
        // Die folgenden Aktionen werden NUR wenn ein Knoten im Baum selektiert ist, ausgeführt, NICHT, wenn gar nichts selektiert ist!
        //-----------------------------------------------------------------------------------------------------------------------------
        // ALT - verlagert aus computed() wegen Timing-Problem dort - führte zu anderen massiven Problemen, daher wieder disabled
        // console.log("$refs: ", this.$refs)
        /*
        if (this.$refs.treeBaueinheiten !== undefined) {
          try {
            this.selectedNodeTreeBaueinheiten = this.$refs.treeBaueinheiten.getNodeByKey(
              this.selectedKeyTreeBaueinheiten
            );
          } catch {
            this.selectedNodeTreeBaueinheiten = null;
          }
        } else {
          this.selectedNodeTreeBaueinheiten = undefined;
        }
        console.log(
          "selectedNodeTreeBaueinheiten: ",
          this.selectedNodeTreeBaueinheiten
        );
        if (
          this.selectedNodeTreeBaueinheiten == null ||
          this.selectedNodeTreeBaueinheiten === undefined
        ) {
          console.log(
            "ACHTUNG: Schwerwiegender Fehler in selectedNodeTreeBaustoff - null oder undefined"
          );
        }
        */
        //-----------------------------------------------------------------------------------------------------------------------------
        // TODO - Bei null nicht weitermachen, sollte aber nicht vorkommen!!!
        //-----------------------------------------------------------------------------------------------------------------------------
        // NEU: Für #505
        // NEU: Bei systemdefinierten Knoten (Wurzelknoten, Vorlagen für Baueinheiten, Bauprojekte) als Unter-Tab "strukturierungsAngabenTabBaueinheiten" ansteuern,
        //      sonst "baueigenschaftsProfilFormulareTabBaueinheiten"
        if (
          this.knotenIstWurzelTreeBaueinheiten(
            this.selectedKeyTreeBaueinheiten
          ) ||
          this.selectedNodeTreeBaueinheiten.baumKnotenTyp ===
            "Bauvorlagenunterbaumwurzelknoten" ||
          this.selectedNodeTreeBaueinheiten.baueinheitsBezeichnung.startsWith(
            "Bauprojekte"
          )
          // TODO XXXXXX #264: Vorläufig, eigener baumKnotenTyp sollte dafür eingeführt werden
        ) {
          this.tabBaueinheiten = "strukturierungsAngabenTabBaueinheiten";
        } else {
          // TODO XXXXXX - Alternative: Ausgewähltes Tab bei anderen Knoten einfach beibehalten, statt stets auf Tab "Baueigenschaftsprofilformulare" zu wechseln!
          //               Für diese Alternative die folgende Zeile einfach auskommentieren:
          this.tabBaueinheiten =
            "baueigenschaftsProfilFormulareTabBaueinheiten";
        }
        // NEU: Default-Tab für Unter-Unter-Tab "baueigenschaftsProfilFormulareTabBaueinheiten" setzen in Abhängigkeit von der ausgewählten Baueinheit
        this.tabBaueigenschaftsProfilFormulare = this.getTabVonHierarchischOberstemProfilFormularInAktiviertenBaueigenschaftsProfilen(
          this.selectedNodeTreeBaueinheiten
        );
        //-----------------------------------------------------------------------------------------------------------------------------
        // Update der ausgewählten Zeile in der Table für Baueigenschaften mit aktuellem Wert der Baueigenschaft aus dem selectedNodeTreeBaueinheiten
        if (this.selectedRowsTableBaueigenschaften.length > 0) {
          const selectedKeyTable = this.selectedRowsTableBaueigenschaften[0]
            .typbezogeneBaueigenschaft.baueigenschaftsBezeichnung;
          // if (this.$refs.tableBaueigenschaften !== undefined) {
          //   this.$refs.tableBaueigenschaften.clearSelection();
          this.selectedRowsTableBaueigenschaften[0] = this.selectedNodeTreeBaueinheiten.baueigenschaften.find(
            baueigenschaft => {
              return (
                baueigenschaft.typbezogeneBaueigenschaft
                  .baueigenschaftsBezeichnung === selectedKeyTable
              );
            }
          );
        }
        // await sleep(sleepTime); // Nur für Tests von Zeitverzögerung
        console.log(
          "Vor Zugriff auf selectedNodeTreeBaueinheiten.baueinheitsBeschreibung"
        );
        // console.log("selectedNodeTreeBaueinheiten: ", this.selectedNodeTreeBaueinheiten);
        //-------------------------------------------------------------------------------------------------------------------------
        // NEU: Für Markdown-Anzeige in MyLayout.vue im rechten Drawer per reaktivem Update über global Store:
        globalStore.setBaueinheitsBeschreibungAusgewaehlteBaueinheit(
          this.selectedNodeTreeBaueinheiten.baueinheitsBeschreibung
        );
        // Mutated global Store und triggered reaktiven Update von localStore.state.baueinheitsBeschreibungAusgewaehlteBaueinheit in MyLayout.vue!
        // Alternativ funktioniert auch:
        // this.localStore.setBaueinheitsBeschreibungAusgewaehlteBaueinheit(this.selectedNodeTreeBaueinheiten.baueinheitsBeschreibung);
        globalStore.setBaueinheitsBezeichnungAusgewaehlteBaueinheit(
          this.selectedNodeTreeBaueinheiten.baueinheitsBezeichnung
        );

        //-------------------------------------------------------------------------------------------------------------------------
        // NEU: Fachliche Hilfe anzeigen für die ausgewählte Baueinheit!
        // Aktuell nur, wenn Profil "Baueinheit > Bauvorhaben" aktiviert ist (nicht an den Knoten weiter unten im Bauvorhabenbaum, wo meist keine Beschreibung eingetragen ist)
        //-------------------------------------------------------------------------------------------------------------------------
        // Event emitten an Komponente MyLayout.vue mit Parameter topicContextHelp
        // Dort triggered das Event das Öffnen des rechten Auszugs, der entsprechende Kontexthilfe per topicContextHelp anzeigt
        // Siehe auch https://code.tutsplus.com/tutorials/design-patterns-for-communication-between-vuejs-component--cms-32354
        //--------------------------------------------------------------------------------------------------------------------------
        if (
          this.istAktiviertBaueigenschaftsProfilAnSelectedNode(
            "Baueinheit > Bauvorhaben"
          )
        ) {
          // Nur, wenn Profil "Baueinheit > Bauvorhaben" aktiviert ist an der ausgewählten Baueinheit
          // ALT - rechten Drawer "manuell" öffnen:
          // const topicContextHelp = 100; // Testweise 100 - Event Parameter, wird ignoriert, war für alte Kontexthilfe
          // this.$root.$emit("openRightDrawerEvent", topicContextHelp); // Öffnet den rechten Drawer - ACHTUNG: Unbedingt $root notwendig, da Cross-Component Event (Use Bus)
          // ==========================================================
          // NEU: Öffnen der fachlichen Hilfe hier temporär disabled!!!
          // ==========================================================
          // this.showFachlicheHilfe("fachlicheHilfeBaueinheit", true); // Zweiter Parameter öffnet rechten Drawer und zeigt fachliche Hilfe für die ausgewählte Baueinheit
        } else {
          // Profil "Baueinheit > Bauvorhaben" nicht aktiviert
          this.$root.$emit("closeRightDrawerEvent"); // Rechten Drawer wieder schließen
        }
        //--------------------------------------------------------------------------------------------------------------------------

        //---------------------------------------------------------------------------------------------------------------------------
        // NEU: selectModelAutorenAusgewaehlteBaueinheit neu initialisieren für das Tab "Zugeordnete Bauinformationen":
        this.selectModelAutorenAusgewaehlteBaueinheit = this.selectedNodeTreeBaueinheiten.benutzerKennungenAutoren; // selectedNodeTreeBaueinheiten ist computed!
        // NEU: selectOptionsAutorenAusgewaehlteBaueinheit und selectFilterOptionsAutorenAusgewaehlteBaueinheit neu initialisieren (abhängig vom Elternknoten):
        this.initialisiereSelectOptionsUndSelectFilterOptionsAutorenAusgewaehlteBaueinheit();

        //---------------------------------------------------------------------------------------------------------------------------
        // NEU: selectModelBauinformationenAusgewaehlteBaueinheit neu initialisieren für das Tab "Zugeordnete Bauinformationen":
        this.selectModelBauinformationenAusgewaehlteBaueinheit = this.selectedNodeTreeBaueinheiten.zugeordneteBauinformationen; // selectedNodeTreeBaueinheiten ist computed!
        // ACHTUNG: Hier kein Object.assign oder push für die Zuweisung verwenden, sonst merkwürdige Ergebnisse, z.B.
        // selectModelBauinformationenAusgewaehlteBaueinheit hat bei push das Format "[[ {}, ..., {} ]]" statt "[ {}, ..., {} ]"
        /*
        console.log(
          "selectModelBauinformationenAusgewaehlteBaueinheit: ",
          this.selectModelBauinformationenAusgewaehlteBaueinheit
        );
        */
        //---------------------------------------------------------------------------------------------------------------------------
        // NEU: Select Models neu initialisieren für die Tabs "Details zur ausgewählten Baueigenschaft" und "Neuanlage einer Baueigenschaft"
        this.selectModelSonderzeichenAusgewaehlteBaueigenschaft = null;
        this.selectModelSonderzeichenNeueBaueigenschaft = null;
        this.copyToClipboardDoneSonderzeichenAusgewaehlteBaueigenschaft = false;
        this.copyToClipboardDoneSonderzeichenNeueBaueigenschaft = false;
        //---------------------------------------------------------------------------------------------------------------------------
        // NEU: bauvorhabenAusgewaehlteBaueinheit initialisieren für das Tab "Angaben zum Bauvorhaben":
        // ACHTUNG: Wurde doppelt ausgeführt, da es auch bei Initialisierung des Tabs loadBauvorhabenAusgewaehlteBaueinheit
        // aufgerufen wird - dort disabled, hier enabled!!!
        // this.loadBauvorhabenAusgewaehlteBaueinheit(); // Disabled - vorläufige Version des Profilformulars "Bauvorhaben" - wird nicht mehr gebraucht!
        //---------------------------------------------------------------------------------------------------------------------------
        // NEU: Baustoffbaum initialisieren für das Tab "Zugeordnete Baustoffe":
        // ACHTUNG: Die Funktion wird eventuell doppelt ausgeführt, da auch bei Initialisierung des Tabs loadTreeBaustoffe(true) gerufen wird
        //          Dies stellte sich allerdings als nötig heraus, da sowohl bei Anwahl von "Zugeordnete Baustoffe" über das Tab, als
        //          auch bei Neu-Auswahl eines Knotens im Baum BEI AUSWGEWÄHLTEM TAB "Zugeordnete Baustoffe" die zugeordneten Baustoffe aktualisiert
        //          werden müssen!!!
        // this.loadTreeBaustoffe(false); // ALT
        this.loadTreeBaustoffe(true); // NEU - Aufruf hier ist notwendig!
        // ACHTUNG: Bei Aufruf mit (false), werden, wenn aktuell das Tab "Zugeordnete Baustoffe" bereits angewählt ist, und ein neuer Knoten im
        // Baum ausgewählt wird, die zugeordneten Baustoffe für den neu ausgewählten Knoten NICHT angezeigt, sondern weiterhin die des bisher ausgewählten
        // Knotens - Fehler!!!
        console.log("selectedKeyTreeBaueinheiten wurde gesetzt");
      } else {
        console.log("selectedKeyTreeBaueinheiten wurde abgewählt");
      }
      //---------------------------------------------------------------------------------------------------------------------------
      // NEU - #400: selectedKeyTreeBaueinheiten auch in localStorage abspeichern - auch wenn er abgewählt wurde (d.h. auf null gesetzt wurde)
      // TODO XXXXXX: Auch in Benutzereinstellungen speichern, damit sie auch nach Abmeldung dort erhalten bleiben
      localStorage.setItem(
        "selectedKeyTreeBaueinheiten",
        this.selectedKeyTreeBaueinheiten
      );
      globalStore.changeSelectedKeyTreeBaueinheiten(
        this.selectedKeyTreeBaueinheiten
      ); // Diesen auch in global Store speichern
      // Nun zusätzlich den Wert auch in den Benutzereinstellungen speichern per Backend-Call, damit auch noch nach einer Abmeldung der Wert erhalten bleibt:
      // Rufe dazu die Hilfsfunktion updateBenutzer() in methods():
      this.updateBenutzer(value);
    }
  }, // /watch:

  //***========================================================================================================================================
  mounted: async function() {
    //---------------------------------------------------------------------------------------------------------------------------------------
    // Mounted-Funktion, für Initialisierungen beim Laden der Komponente
    //---------------------------------------------------------------------------------------------------------------------------------------
    console.log("In mounted() von baueinheiten.vue");
    // NEU: JWT Header setzen für Axios Calls an das Backend:
    const myJWTToken = localStorage.getItem("jwtToken");
    console.log("Token geholt");
    // console.log("jwtToken: ", myJWTToken); // Disabled aus Security-Gründen
    // Set Authorization Header mit JWT Token aus localStorage für den nachfolgenden Axios Call für secure Route
    // Vorlage: https://www.djamware.com/post/5ac8338780aca714d19d5b9e/securing-mevn-stack-vuejs-2-web-application-using-passport
    this.$axios.defaults.headers.common["Authorization"] =
      "bearer " + myJWTToken;
    //----------------------------------------------------------------------------------------------------------------------------------------
    // Weiter geht es in mounted():
    // NEU - #400: Baum bis zu gespeichertem zuletzt ausgewählten selected Key laden, mit den Knoten auf dem Pfad vom Wurzelknoten bis zu diesem Knoten, inklusive seiner Kindknoten, expandiert per neuem API
    // Zunächst selectedKeyTreeBaueinheiten aus dem local (Browser) Store oder dem global Store (localStore.state) holen (ist per Design unten vermutlich gleichwertig/egal) und prüfen, ob nicht null. Bei null den Wurzelknoten laden wie ohne #400!
    // HINWEIS: my-layout.created() sorgt dafür, dass auch nach einem Refresh die in local (Browser) Storage ebenfalls vorgehaltenen Werte nach global Store kopiert werden!
    //-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    // HINWEISE zu allen benutzerspezifischen Einstellungen/Werten, zu denen auch mit #400 nun auch selectedKeyTreeBaueinheiten und selectedKeyTreeBaustoffe gehören:
    // - In my-layout.vue werden bei Anmeldung eines Benutzers alle solchen Werte aus den Benutzereinstellungen aus der Datenbank in den local (Browser) Storage UND den global (BIM.click Frontend) Store kopiert
    // - In local Storage werden sie zusätzlich vorgehalten, damit sie auch noch nach einem Refresh verfügbar sind
    // - Nach einem Refresh werden sie in my-layout.created() aus local Storage wieder in den global Store "dupliziert" (falls nicht ein Sicherheits-Timeout von aktuell 12 Stunden zuschlägt, sonst wird Neu-Anmeldung erzwungen)
    // - Wenn eine solche Benutzereinstellung aktualisiert wird, muss sie direkt per API (benutzer.controller.updateBenutzer()) an das Backend übermittelt werden, sonst wird sie "vergessen"!
    // - Das passiert bei vielen solchen Einstellungen im Tab "Einstellungen"
    // - Bei den in den Benutzereinstellungen gespeicherten Werten selectedKeyTreeBaueinheiten und selectedKeyTreeBaustoffe muss diese Aktualisierung allerdings bei jeder Änderung dieser
    //   Werte erfolgen, in den watch()-Funktionen dafür in baueinheiten.vue und baustoffe.vue
    //-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    const lastSelectedKeyTreeBaueinheiten = localStorage.getItem(
      "selectedKeyTreeBaueinheiten"
    );
    console.log(
      "lastSelectedKeyTreeBaueinheiten: ",
      lastSelectedKeyTreeBaueinheiten
    ); // ACHTUNG: Kann String mit Wert "null" sein!?!
    // console.log("typeof lastSelectedKeyTreeBaueinheiten: ", typeof lastSelectedKeyTreeBaueinheiten) // string
    // globalStore.changeSelectedKeyTreeBaueinheiten(lastSelectedKeyTreeBaueinheiten) // Diesen auch in global Store speichern - hier überflüssig, wird in my-layout.vue erledigt und in watch() für selectedKeyTreeBaueinheiten
    //=============================================================================================================================================
    // ACHTUNG: Es funktioniert warum auch immer nur mit der folgenden kryptischen null-Abfrage!!!
    //          Außerdem darf hier nicht sofort selectedKeyTreeBaueinheiten aktualisiert werden, sondern erst nach Neu-Aufbau des Baums!!!
    if (
      lastSelectedKeyTreeBaueinheiten != null &&
      lastSelectedKeyTreeBaueinheiten !== "null"
    ) {
      // if (lastSelectedKeyTreeBaueinheiten != null) { // ACHTUNG: Führt zu Fehler, dass trotz "null" loadLastSelectedNodeTreeBaueinheiten() aufgerufen wird!
      //=============================================================================================================================================
      let resultAusLoadLastSelectedNode = await this.loadLastSelectedNodeTreeBaueinheiten( // NEU: Resultat (String) abfragen
        lastSelectedKeyTreeBaueinheiten
      ); // NEU - #400
      //=============================================================================================================================================
      // ACHTUNG: Hier unbedingt await, und erst danach die Aktualisierungen von selectedKeyTreeBaueinheiten und expandedKeysTreeBaueinheiten, sonst
      //          gibt es Race Conditions/Timing Probleme!!!
      //=============================================================================================================================================
      // Nun (NACH dem Neu-Laden des Baums) selectedKeyTreeBaueinheiten aktualisieren mit dem neuen Wert:
      if (resultAusLoadLastSelectedNode === "lastSelectedNode") {
        this.selectedKeyTreeBaueinheiten = lastSelectedKeyTreeBaueinheiten;
        // Nun die expanded Keys aus dem Pfad von selectedNodeTreeBaueinheiten ermitteln (computed)
        // HINWEIS: Die Property "path" enthält die ids aller Knoten im Pfad vom Wurzelknoten bis inklusive des gelöschten Knotens, getrennt durch "#"
        // HINWEIS: Als weitere Alternative könnte man diese auch im oben in loadLastSelectedNodeTreeBaueinheiten() aufgerufenen API am Backend aus dem Pfad ermitteln und im Response Body mitschicken
        //------------------------------------------------------------------------------------------------
        // Alternative 1:
        this.expandedKeysTreeBaueinheiten = this.selectedNodeTreeBaueinheiten.path // computed-Wert
          .split("#");
        //------------------------------------------------------------------------------------------------
        // Alternative 2 - funktioniert auch, aber disabled, da komplexer:
        /*
        this.expandedKeysTreeBaueinheiten = this.$refs.treeBaueinheiten
          .getNodeByKey(lastSelectedKeyTreeBaueinheiten) // QTree API Methode
          .path.split("#");
        */
      } // else {} // resultAusLastSelectedNode ist "rootNode", d.h. es wurde der Root Node geladen - dann ist nichts weiter zu tun
      //---------------------------------------------------------------------------------------------------------------------------
    } else {
      this.loadRootNodeTreeBaueinheiten(); // Wie bisher ohne #400 - HINWEIS: Hier kein await, da keine Folgeaktionen darauf warten
    }
    // NEU: Rows per Page für QTables Pagination aus localStore laden - passiert aktuell direkt in diesen Objekten oben in data!
    // this.paginationTableBaueigenschaften.rowsPerPage = this.localStore.state.einstellungenBenutzer.tablesPaginationRowsPerPage;
    // this.paginationTableBauinformationen.rowsPerPage = this.localStore.state.einstellungenBenutzer.tablesPaginationRowsPerPage;
  } // /mounted:
};
</script>

<!--***====================================================================================================================================-->
<!-- CSS .my-sticky-column-table, ursprünglich auskommentiert, wegen Dependency auf SASS-Preprocessor -->
<!--
     CSS, um erste Spalte in q-table (mit zunächst EINER Header-Zeile) "sticky" zu machen, siehe https://quasar.dev/vue-components/table */
     Benötigt SASS als CSS Pre-Processor - dieser wird angezogen per style lang="sass"
     Neu:    https://quasar.dev/quasar-cli/cli-documentation/css-preprocessors#Introduction
             SASS kann mit Quasar App v1.1.0+ direkt verwendet werden!
     Vorher: http://v0-13.quasar-framework.org/guide/app-pre-processors.html

     a) Zunächst Quasar Upgrade nach Quasar 1.1.7 und Quasar App 1.1.4 durchgeführt mit:
        bimclickfrontend> quasar upgrade
        bimclickfrontend> quasar upgrade --install
        Am Besten aus separatem Node.js Command Window mit Admin-Rechten bzw. bei geschlossenem VS Code,
        da bei laufendem VS Code es zu gelockten Files, die vom NPM Install gebraucht werden, kommen kann!!!
        Siehe auch https://quasar.dev/start/upgrade-guide

     b) Sass-Loader und Node-Sass mussten (sonst auch nach dem Quasar Upgrade Compile-Fehler mit dem <style lange="sass">)
        dennoch installiert werden nach Hinweisen in https://quasar.dev/quasar-cli/cli-documentation/handling-webpack, mittels:
          bimclickfrontend> npm add --dev sass-loader node-sass
          (Note you also need to install node-sass because sass-loader depends on it as a peer dependency)
     c) Es kamen danach Warnungen, dass zusätzliche Pakete sass und fibers benötigt werden (ignorieren???
        Diese könnten installiert werden mit npm install -g sass bzw. npm install fibers (unklar, ob notwendig oder nicht)

     d) Zusätzlich in VS Code eine Sass Extension installiert zur Formatierung des SASS-Codes

     e) Dann den ursprünglichen SASS/CSS-Code aus der Vorlage umfänglich angepasst mit vielen Versuchen,
        damit auch die zweite Spalte "sticky" wird!!!
        CSS-HINWEISE: https://stackoverflow.com/questions/5664773/how-can-i-get-a-specific-number-child-using-css
        ACHTUNG: max-width: 600px verursachte Compile-Fehler, daher entfernt!!!

     f) TODO: Später zusätzlich zu sticky Column noch sticky Header hinzufügen, dazu gibt es auch eine Vorlage auf
        https://quasar.dev/vue-components/table

-->
<!-- Start Vorlage -->
<!--
<style lang="sass">
.my-sticky-column-table
    /* specifying max-width so the example can highlight the sticky column on any browser window     */
    max-width: 600px

    /* bg color is important for th; just specify one */
    thead tr: first-child th: first-child
      background-color: #fff
      opacity: 1

    td:first-child
      background-color: #f5f5dc

    thead tr: first-child th: first-child,

    td: first-child
      position: sticky
      left: 0
      z-index: 1
 </style>
-->
<!-- Ende Vorlage -->

<style lang="sass">

/* Aktueller q-table Aufbau für Tabelle Baueigenschaften: */
/* Header: */
/* q-tr für 1. Header-Zeile */
/*   q-th mindestens 2-mal (1 leer, 1 leer über Bezeichnung) */
/* q-tr für 2. Header-Zeile */
/*   Von Quasar erzeugte q-ths, mindestens 2-mal (1 für (De-)Select All Checkbox, 1 für "Bezeichnung") */
/* Body: Viele q-trs mit q-tds */
/* ACHTUNG: Ein Quasar <q-th> entspricht nicht immer einem HTML <th> was in der CSS verwendet wird! */
/* Für die MIT VSlots für Header und Body aufgebaute QTable für die Tabelle Baueigenschaften mit EINER Header-Zeile gilt :/
/* In der ersten Header-Zeilgggggggggge werden unter der Decke von Quasar offenbar NUR HTML <td>s verwendet!!! */
/* In der zweiten Header-Zeile wird für die erste (De-)Select All Checkbox Spalte offenbar ein <td> verwendet, sonst <th>s!!! */

.stickyColumnsTable2HeaderLines
  /*----------------------------------------------------------------------------------------------------------------------------*/
  /* Definitionen für Farben für Table mit 2 Header-Zeilen und Body: */
  /* #C0C0C0 ist HTML Silver, siehe https://www.w3schools.com/colors/colors_shades.asp */

  thead tr:first-child td:first-child /* Setzt Farbe der 1. Header-Zeile, 1. Spalte (td) - OK */
    background-color: #F5F5F5 // HTML White Smoke // HTML White, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  thead tr:first-child  /* Setzt Farbe der gesamten 1. Header-Zeile, 1. Spalte bereits oben separat gesetzt  - OK */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  /* Wegen Opacity-Änderung das folgende thead hinter das vorherige thead oben verschoben */
  thead tr:first-child td:nth-child(2) /* Setzt Farbe und Opacity der 1. Header-Zeile, 2. Spalte (td) - OK */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 0.8

  thead tr:nth-child(2) th:nth-child(2) /* NEU für Opazität der 2. Header-Zeile (tr) für 2. Spalte (th:nth-child(2) */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  thead tr:nth-child(2) /* Setzt Farbe der gesamten 2. Header-Zeile, 1. Spalte bereits oben separat gesetzt  - OK */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  /* Wegen Opacity-Änderung das folgende thead hinter das vorherige thead oben verschoben */
  thead tr:nth-child(2) th:nth-child(2) /* Setzt Farbe und Opacity der 2. Header-Zeile, 2. Spalte (th) */
    /* ACHTUNG: nth-Zählung zählt ALLE Typen von Children, auch das erste td in der 2. Row, daher hier für das th:nth-child(2) - OK */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 0.8

  td:first-child /* Setzt Farbe der 1. Spalte NUR im Table Body (ab 3. Zeile in Table mit 2 Header-Zeilen) - OK */
    background-color: #FFFFFF // HTML White, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  tbody td:nth-child(2) /* Setzt Farbe der 2. Spalte in allen Zeilen im Body, überschreibt nicht die Header-Zeilen */
    background-color: #F5F5DC // ein Beige, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 0.9

  /*----------------------------------------------------------------------------------------------------------------------------*/
  /* Definitionen für Stickiness der 1. und 2. Spalte im Table Header (2 Zeilen) und im Body: */

  /* Definitionen für 1. Header-Zeile (thead tr: first-child) */
  thead tr:first-child th:first-child /* Setzt Stickiness in der 1. Header-Zeile (tr) für 1. Spalte (th:first-child, leeres Feld für Checkboxes) - OK  */
    position: sticky
    left: 0
    z-index: 1

  /* ACHTUNG: Offensichtlich hat sich in Quasar 1.8 das Rendering der 1. Header-Zeile geändert, es sind jetz dort: */
  /* 1. Spalte (Checkboxen - leer): th - früher war das ein td???  */
  /* 2. Spalte (Bezeichnung): th -- früher war das ein td??? */
  /* 3. Spalte (Aktivierungsmerkmale mit Unterspalten): th colspan=2 (bei 3 Unterspalten unter Aktivierungsmerkmalen) -- früher waren das tds, nicht ths!!! */
  /* ACHTUNG: Mit Wegfall von "obligatorisch" und "aktivierbar" ist colspan=1 für 3. Spalte!

  /* Setzt Stickiness in der 1. Header-Zeile (tr:first-child) für 2. Spalte (nth-child(2)) */
  /* ALT, vor Quasar 1.8 */
  /* thead tr:first-child td:nth-child(2) */ /* ALT: 2. td */
  /*   position: sticky */
  /*   left: 37px */
  /*   z-index: 1 */

  /* ALT, seit Quasar 1.8 */
  /* thead tr:first-child th:nth-child(2) */ /* NEU: 2. th */
  /*   position: sticky */
  /*   left: 37px */
  /*   z-index: 1 */

  /* NEU für 1. Header-Zeile, 2. Spalte (th:nth-child(2), Baueigenschafsbezeichnung) */
  /* NEU: Mit Ueberschrift in 1. Header-Zeile, braucht mehr Platz - 70px statt 37px */
  thead tr:first-child th:nth-child(2)
    position: sticky
    left: 70px
    z-index: 1

  /* Definitionen für 2. Header-Zeile (thead tr: nth-child(2) */
  /*========================================================================================================= */
  /* ACHTUNG - BUG FIX für #278: Ohne das nächste thead mit left: 0 wird die 2. Header-Zeile durch die (leere) 1. (Checkbox-)Spalte, 2. Zeile durchgescrollt!!! */
  thead tr:nth-child(2) th:first-child /* Setzt Stickiness in der 2. Header-Zeile (tr) für 1. Spalte (th:first-child, leeres Feld für Checkboxes) - OK  */
    position: sticky
    left: 0
    z-index: 1
  /*========================================================================================================= */

  thead tr:nth-child(2) th:nth-child(2) /* Setzt Stickiness in der 2. Header-Zeile (tr) für 2. Spalte (th:nth-child(2), Baueigenschaftsbezeichnung) - OK  */
    position: sticky
    left: 70px
    z-index: 1

  tbody td:first-child /* Setzt Stickiness der 1. Spalte (td:first-child, Checkboxes) im Table Body (ab 3. Zeile in Table mit 2 Header-Zeilen) - OK */
    position: sticky
    left: 0
    z-index: 1

  tbody td:nth-child(2) /* Setzt Stickiness der 2. Spalte (td:nth-child(2), Baueigenschaftsbezeichnung) im Table Body (ab 3. Zeile in Table mit 2 Header-Zeilen) - OK */
    position: sticky
    left: 70px
    z-index: 1

/* Aktueller q-table Aufbau für Tabelle zugeordnete Bauinformationen: */
/* Header: */
/* q-tr für einzige Header-Zeile */
/*   Von Quasar erzeugte q-ths, mindestens 2-mal (1 für (De-)Select All Checkbox, 1 für "Bezeichnung"), weitere q-ths für Spalten-Labels */
/* Body: Viele q-trs mit q-tds */
/* ACHTUNG: Ein Quasar <q-th> entspricht nicht immer einem HTML <th> was in der CSS verwendet wird! */
/* ACHTUNG: Für die OHNE VSlots für Header und Body aufgebaute Tabelle für zugeordnete Bauinformationen mit einer Header-Zeile ist die Generierung */
/* von HTML <th>s und <td>s anders als bei der Tabelle für Baueigenschaften MIT VSlots für Header und Body und zwei Header-Zeilen!!! */
/* In der einzigen Header-Zeile wird hier für die erste (De-)Select All Checkbox Spalte ein <th> verwendet und auch sonst nur <th>s!!! */
/* Daher sind hier andere thead und tbody Definitionen erforderlich als für .stickyColumnsTable2HeaderLines */
</style>

<style lang="sass">
.stickyColumnsTable1HeaderLine
  /*----------------------------------------------------------------------------------------------------------------------------*/
  /* Definitionen für Farben für Table mit 1 Header-Zeile und Body: */
  /* #C0C0C0 ist HTML Silver, siehe https://www.w3schools.com/colors/colors_shades.asp */

  thead tr:first-child th:first-child /* Setzt Farbe der 1. Header-Zeile, 1. Spalte (th - nicht td wie oben) - OK */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  thead tr:first-child /* Setzt Farbe der gesamten 1. Header-Zeile, 1. Spalte bereits oben separat gesetzt  - OK */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  /* Wegen Opacity-Änderung das folgende thead hinter das vorherige thead oben verschoben */
  thead tr:first-child th:nth-child(2) /* Setzt Farbe und Opacity der 1. Header-Zeile, 1. Spalte (th) */
    /* ACHTUNG: nth-Zählung zählt ALLE Typen von Children, gleichgültig ob th oder td - OK */
    background-color: #F5F5F5 // HTML White Smoke, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 0.8

  td:first-child /* Setzt Farbe der 1. Spalte NUR im Table Body (ab 2. Zeile in Table mit 1 Header-Zeile) - OK */
    background-color: #FFFFFF // HTML White, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 1

  tbody td:nth-child(2) /* Setzt Farbe der 2. Spalte in allen Zeilen im Body, überschreibt nicht die Header-Zeilen */
    background-color: #F5F5DC // ein Beige, siehe https://www.w3schools.com/colors/colors_shades.asp
    opacity: 0.9

  /*----------------------------------------------------------------------------------------------------------------------------*/
  /* Definitionen für Stickiness der 1. und 2. Spalte im Table Header (1 Zeile) und im Body: */
  thead tr:first-child th:first-child /* Setzt Stickiness in der 1. Header-Zeile (tr) für 1. Spalte (erstes td) - OK  */
    position: sticky
    left: 0
    z-index: 1

  thead tr:first-child th:nth-child(2) /* Setzt Stickiness in der 1. Header-Zeile (tr) für 2. Spalte (zweites td) - OK */
    position: sticky
    left: 43px
    z-index: 1

  tbody td:first-child /* Setzt Stickiness der 1. Spalte (td) im Table Body (ab 1. Zeile in Table mit 1 Header-Zeile) - OK */
    position: sticky
    left: 0
    z-index: 1

  tbody td:nth-child(2) /* Setzt Stickiness der 2. Spalte (td) im Table Body (ab 2. Zeile in Table mit 1 Header-Zeile) - OK */
    position: sticky
    left: 43px
    z-index: 1
</style>

<style>
/* NEU: CSS Klasse für Key-Spalte in QTables (notwendig, wenn diese unterschiedlich gefärbte gerade/ungerade Zeilen haben: */
/* Background Color ist ein Beige, siehe https://www.w3schools.com/colors/colors_shades.asp */
/* Die Färbung erfolgt allerdings nur für das "innere" div, nicht für die gesamte QTable-Zelle! */
/* Die Opacity wird aus der sticky Column oben übernommen, könnte also auch weggelassen werden */
.my-key-column-in-tables {
  background-color: #f5f5dc;
  opacity: 0.9;
}

/* CSS Klasse für Tooltips: */
.my-tooltip {
  background-color: #f5f5dc;
  color: black;
}

/* CSS Klassen zum Test: */
.background-color-beige {
  /* Aktuell nicht verwendet */
  background-color: #f5f5dc;
}
.my-card-schicht {
  width: 100%;
  max-width: 250px;
}
.height-1rem {
  height: 1rem;
  /* height: 1em; */
}
.font-size-small {
  font-size: small;
  /* font-size: x-small; */
  /* font-size: xx-small; */
  height: 25px;
}
.height-small {
  height: 18px;
}
</style>
